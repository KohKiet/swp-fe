/*! For license information please see main.d5a98705.js.LICENSE.txt */
(()=>{var e={191:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler");Symbol.for("react.provider");var s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),f=Symbol.for("react.client.reference");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case o:case d:case u:case p:return e;default:switch(e=e&&e.$$typeof){case c:case l:case h:case A:case s:return e;default:return t}}case r:return t}}}t.Hy=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===a||e===o||e===d||e===u||"object"===typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===A||e.$$typeof===c||e.$$typeof===s||e.$$typeof===l||e.$$typeof===f||void 0!==e.getModuleId)}},219:(e,t,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,A=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=h(n);i&&i!==p&&e(t,i,r)}var a=d(n);u&&(a=a.concat(u(n)));for(var s=c(t),f=c(n),m=0;m<a.length;++m){var g=a[m];if(!o[g]&&(!r||!r[g])&&(!f||!f[g])&&(!s||!s[g])){var v=A(n,g);try{l(t,g,v)}catch(y){}}}}return t}},579:(e,t,n)=>{"use strict";e.exports=n(2799)},816:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2284);function i(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=(0,r.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},1635:function(e,t,n){e.exports=function(){"use strict";function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i=function(e){try{return!!e()}catch(e){return!0}},o=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),a=o,s=Function.prototype,c=s.call,l=a&&s.bind.bind(c,c),d=a?l:function(e){return function(){return c.apply(e,arguments)}},u=d({}.isPrototypeOf),A=function(e){return e&&e.Math===Math&&e},h=A("object"==typeof globalThis&&globalThis)||A("object"==typeof window&&window)||A("object"==typeof self&&self)||A("object"==typeof t&&t)||A("object"==typeof t&&t)||function(){return this}()||Function("return this")(),p=o,f=Function.prototype,m=f.apply,g=f.call,v="object"==typeof Reflect&&Reflect.apply||(p?g.bind(m):function(){return g.apply(m,arguments)}),y=d,b=y({}.toString),E=y("".slice),w=function(e){return E(b(e),8,-1)},_=w,S=d,C=function(e){if("Function"===_(e))return S(e)},T="object"==typeof document&&document.all,I=void 0===T&&void 0!==T?function(e){return"function"==typeof e||e===T}:function(e){return"function"==typeof e},R={},x=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),N=o,O=Function.prototype.call,k=N?O.bind(O):function(){return O.apply(O,arguments)},P={},B={}.propertyIsEnumerable,L=Object.getOwnPropertyDescriptor,D=L&&!B.call({1:2},1);P.f=D?function(e){var t=L(this,e);return!!t&&t.enumerable}:B;var U,M,F=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},j=i,Q=w,V=Object,H=d("".split),z=j((function(){return!V("z").propertyIsEnumerable(0)}))?function(e){return"String"===Q(e)?H(e,""):V(e)}:V,K=function(e){return null==e},G=K,W=TypeError,q=function(e){if(G(e))throw new W("Can't call method on "+e);return e},Y=z,X=q,J=function(e){return Y(X(e))},Z=I,$=function(e){return"object"==typeof e?null!==e:Z(e)},ee={},te=ee,ne=h,re=I,ie=function(e){return re(e)?e:void 0},oe=function(e,t){return arguments.length<2?ie(te[e])||ie(ne[e]):te[e]&&te[e][t]||ne[e]&&ne[e][t]},ae=h.navigator,se=ae&&ae.userAgent,ce=se?String(se):"",le=h,de=ce,ue=le.process,Ae=le.Deno,he=ue&&ue.versions||Ae&&Ae.version,pe=he&&he.v8;pe&&(M=(U=pe.split("."))[0]>0&&U[0]<4?1:+(U[0]+U[1])),!M&&de&&(!(U=de.match(/Edge\/(\d+)/))||U[1]>=74)&&(U=de.match(/Chrome\/(\d+)/))&&(M=+U[1]);var fe=M,me=fe,ge=i,ve=h.String,ye=!!Object.getOwnPropertySymbols&&!ge((function(){var e=Symbol("symbol detection");return!ve(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&me&&me<41})),be=ye&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ee=oe,we=I,_e=u,Se=Object,Ce=be?function(e){return"symbol"==typeof e}:function(e){var t=Ee("Symbol");return we(t)&&_e(t.prototype,Se(e))},Te=String,Ie=function(e){try{return Te(e)}catch(e){return"Object"}},Re=I,xe=Ie,Ne=TypeError,Oe=function(e){if(Re(e))return e;throw new Ne(xe(e)+" is not a function")},ke=Oe,Pe=K,Be=function(e,t){var n=e[t];return Pe(n)?void 0:ke(n)},Le=k,De=I,Ue=$,Me=TypeError,Fe={exports:{}},je=h,Qe=Object.defineProperty,Ve=h,He=function(e,t){try{Qe(je,e,{value:t,configurable:!0,writable:!0})}catch(r){je[e]=t}return t},ze="__core-js_shared__",Ke=Fe.exports=Ve[ze]||He(ze,{});(Ke.versions||(Ke.versions=[])).push({version:"3.42.0",mode:"pure",copyright:"\xa9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Ge=Fe.exports,We=Ge,qe=function(e,t){return We[e]||(We[e]=t||{})},Ye=q,Xe=Object,Je=function(e){return Xe(Ye(e))},Ze=Je,$e=d({}.hasOwnProperty),et=Object.hasOwn||function(e,t){return $e(Ze(e),t)},tt=d,nt=0,rt=Math.random(),it=tt(1..toString),ot=function(e){return"Symbol("+(void 0===e?"":e)+")_"+it(++nt+rt,36)},at=qe,st=et,ct=ot,lt=ye,dt=be,ut=h.Symbol,At=at("wks"),ht=dt?ut.for||ut:ut&&ut.withoutSetter||ct,pt=function(e){return st(At,e)||(At[e]=lt&&st(ut,e)?ut[e]:ht("Symbol."+e)),At[e]},ft=k,mt=$,gt=Ce,vt=Be,yt=function(e,t){var n,r;if("string"===t&&De(n=e.toString)&&!Ue(r=Le(n,e)))return r;if(De(n=e.valueOf)&&!Ue(r=Le(n,e)))return r;if("string"!==t&&De(n=e.toString)&&!Ue(r=Le(n,e)))return r;throw new Me("Can't convert object to primitive value")},bt=TypeError,Et=pt("toPrimitive"),wt=function(e,t){if(!mt(e)||gt(e))return e;var n,r=vt(e,Et);if(r){if(void 0===t&&(t="default"),n=ft(r,e,t),!mt(n)||gt(n))return n;throw new bt("Can't convert object to primitive value")}return void 0===t&&(t="number"),yt(e,t)},_t=Ce,St=function(e){var t=wt(e,"string");return _t(t)?t:t+""},Ct=$,Tt=h.document,It=Ct(Tt)&&Ct(Tt.createElement),Rt=function(e){return It?Tt.createElement(e):{}},xt=Rt,Nt=!x&&!i((function(){return 7!==Object.defineProperty(xt("div"),"a",{get:function(){return 7}}).a})),Ot=x,kt=k,Pt=P,Bt=F,Lt=J,Dt=St,Ut=et,Mt=Nt,Ft=Object.getOwnPropertyDescriptor;R.f=Ot?Ft:function(e,t){if(e=Lt(e),t=Dt(t),Mt)try{return Ft(e,t)}catch(e){}if(Ut(e,t))return Bt(!kt(Pt.f,e,t),e[t])};var jt=i,Qt=I,Vt=/#|\.prototype\./,Ht=function(e,t){var n=Kt[zt(e)];return n===Wt||n!==Gt&&(Qt(t)?jt(t):!!t)},zt=Ht.normalize=function(e){return String(e).replace(Vt,".").toLowerCase()},Kt=Ht.data={},Gt=Ht.NATIVE="N",Wt=Ht.POLYFILL="P",qt=Ht,Yt=Oe,Xt=o,Jt=C(C.bind),Zt=function(e,t){return Yt(e),void 0===t?e:Xt?Jt(e,t):function(){return e.apply(t,arguments)}},$t={},en=x&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),tn=$,nn=String,rn=TypeError,on=function(e){if(tn(e))return e;throw new rn(nn(e)+" is not an object")},an=x,sn=Nt,cn=en,ln=on,dn=St,un=TypeError,An=Object.defineProperty,hn=Object.getOwnPropertyDescriptor,pn="enumerable",fn="configurable",mn="writable";$t.f=an?cn?function(e,t,n){if(ln(e),t=dn(t),ln(n),"function"==typeof e&&"prototype"===t&&"value"in n&&mn in n&&!n[mn]){var r=hn(e,t);r&&r[mn]&&(e[t]=n.value,n={configurable:fn in n?n[fn]:r[fn],enumerable:pn in n?n[pn]:r[pn],writable:!1})}return An(e,t,n)}:An:function(e,t,n){if(ln(e),t=dn(t),ln(n),sn)try{return An(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new un("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var gn=$t,vn=F,yn=x?function(e,t,n){return gn.f(e,t,vn(1,n))}:function(e,t,n){return e[t]=n,e},bn=h,En=v,wn=C,_n=I,Sn=R.f,Cn=qt,Tn=ee,In=Zt,Rn=yn,xn=et,Nn=function(e){var t=function(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return En(e,this,arguments)};return t.prototype=e.prototype,t},On=function(e,t){var n,r,i,o,a,s,c,l,d,u=e.target,A=e.global,h=e.stat,p=e.proto,f=A?bn:h?bn[u]:bn[u]&&bn[u].prototype,m=A?Tn:Tn[u]||Rn(Tn,u,{})[u],g=m.prototype;for(o in t)r=!(n=Cn(A?o:u+(h?".":"#")+o,e.forced))&&f&&xn(f,o),s=m[o],r&&(c=e.dontCallGetSet?(d=Sn(f,o))&&d.value:f[o]),a=r&&c?c:t[o],(n||p||typeof s!=typeof a)&&(l=e.bind&&r?In(a,bn):e.wrap&&r?Nn(a):p&&_n(a)?wn(a):a,(e.sham||a&&a.sham||s&&s.sham)&&Rn(l,"sham",!0),Rn(m,o,l),p&&(xn(Tn,i=u+"Prototype")||Rn(Tn,i,{}),Rn(Tn[i],o,a),e.real&&g&&(n||!g[o])&&Rn(g,o,a)))},kn=Math.ceil,Pn=Math.floor,Bn=Math.trunc||function(e){var t=+e;return(t>0?Pn:kn)(t)},Ln=Bn,Dn=function(e){var t=+e;return t!=t||0===t?0:Ln(t)},Un=Dn,Mn=Math.max,Fn=Math.min,jn=function(e,t){var n=Un(e);return n<0?Mn(n+t,0):Fn(n,t)},Qn=Dn,Vn=Math.min,Hn=function(e){var t=Qn(e);return t>0?Vn(t,9007199254740991):0},zn=Hn,Kn=function(e){return zn(e.length)},Gn=J,Wn=jn,qn=Kn,Yn=function(e){return function(t,n,r){var i=Gn(t),o=qn(i);if(0===o)return!e&&-1;var a,s=Wn(r,o);if(e&&n!=n){for(;o>s;)if((a=i[s++])!=a)return!0}else for(;o>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},Xn={includes:Yn(!0),indexOf:Yn(!1)},Jn=Xn.includes;On({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(e){return Jn(this,e,arguments.length>1?arguments[1]:void 0)}});var Zn=h,$n=ee,er=function(e,t){var n=$n[e+"Prototype"],r=n&&n[t];if(r)return r;var i=Zn[e],o=i&&i.prototype;return o&&o[t]},tr=er("Array","includes"),nr=$,rr=w,ir=pt("match"),or=function(e){var t;return nr(e)&&(void 0!==(t=e[ir])?!!t:"RegExp"===rr(e))},ar=or,sr=TypeError,cr={};cr[pt("toStringTag")]="z";var lr="[object z]"===String(cr),dr=lr,ur=I,Ar=w,hr=pt("toStringTag"),pr=Object,fr="Arguments"===Ar(function(){return arguments}()),mr=dr?Ar:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=pr(e),hr))?n:fr?Ar(t):"Object"===(r=Ar(t))&&ur(t.callee)?"Arguments":r},gr=mr,vr=String,yr=function(e){if("Symbol"===gr(e))throw new TypeError("Cannot convert a Symbol value to a string");return vr(e)},br=pt("match"),Er=On,wr=function(e){if(ar(e))throw new sr("The method doesn't accept regular expressions");return e},_r=q,Sr=yr,Cr=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[br]=!1,"/./"[e](t)}catch(e){}}return!1},Tr=d("".indexOf);Er({target:"String",proto:!0,forced:!Cr("includes")},{includes:function(e){return!!~Tr(Sr(_r(this)),Sr(wr(e)),arguments.length>1?arguments[1]:void 0)}});var Ir=er("String","includes"),Rr=u,xr=tr,Nr=Ir,Or=Array.prototype,kr=String.prototype,Pr=function(e){var t=e.includes;return e===Or||Rr(Or,e)&&t===Or.includes?xr:"string"==typeof e||e===kr||Rr(kr,e)&&t===kr.includes?Nr:t},Br=r(Pr),Lr=Oe,Dr=Je,Ur=z,Mr=Kn,Fr=TypeError,jr="Reduce of empty array with no initial value",Qr=function(e){return function(t,n,r,i){var o=Dr(t),a=Ur(o),s=Mr(o);if(Lr(n),0===s&&r<2)throw new Fr(jr);var c=e?s-1:0,l=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=l;break}if(c+=l,e?c<0:s<=c)throw new Fr(jr)}for(;e?c>=0:s>c;c+=l)c in a&&(i=n(i,a[c],c,o));return i}},Vr={left:Qr(!1),right:Qr(!0)},Hr=i,zr=function(e,t){var n=[][e];return!!n&&Hr((function(){n.call(null,t||function(){return 1},1)}))},Kr=h,Gr=ce,Wr=w,qr=function(e){return Gr.slice(0,e.length)===e},Yr=qr("Bun/")?"BUN":qr("Cloudflare-Workers")?"CLOUDFLARE":qr("Deno/")?"DENO":qr("Node.js/")?"NODE":Kr.Bun&&"string"==typeof Bun.version?"BUN":Kr.Deno&&"object"==typeof Deno.version?"DENO":"process"===Wr(Kr.process)?"NODE":Kr.window&&Kr.document?"BROWSER":"REST",Xr="NODE"===Yr,Jr=Vr.left;On({target:"Array",proto:!0,forced:!Xr&&fe>79&&fe<83||!zr("reduce")},{reduce:function(e){var t=arguments.length;return Jr(this,e,t,t>1?arguments[1]:void 0)}});var Zr=er("Array","reduce"),$r=u,ei=Zr,ti=Array.prototype,ni=function(e){var t=e.reduce;return e===ti||$r(ti,e)&&t===ti.reduce?ei:t},ri=ni,ii=r(ri),oi=w,ai=Array.isArray||function(e){return"Array"===oi(e)},si=On,ci=ai,li=d([].reverse),di=[1,2];si({target:"Array",proto:!0,forced:String(di)===String(di.reverse())},{reverse:function(){return ci(this)&&(this.length=this.length),li(this)}});var ui=er("Array","reverse"),Ai=u,hi=ui,pi=Array.prototype,fi=function(e){var t=e.reverse;return e===pi||Ai(pi,e)&&t===pi.reverse?hi:t},mi=fi,gi=r(mi),vi=ot,yi=qe("keys"),bi=function(e){return yi[e]||(yi[e]=vi(e))},Ei=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),wi=et,_i=I,Si=Je,Ci=Ei,Ti=bi("IE_PROTO"),Ii=Object,Ri=Ii.prototype,xi=Ci?Ii.getPrototypeOf:function(e){var t=Si(e);if(wi(t,Ti))return t[Ti];var n=t.constructor;return _i(n)&&t instanceof n?n.prototype:t instanceof Ii?Ri:null},Ni=d,Oi=Oe,ki=$,Pi=function(e){return ki(e)||null===e},Bi=String,Li=TypeError,Di=function(e,t,n){try{return Ni(Oi(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}},Ui=$,Mi=q,Fi=function(e){if(Pi(e))return e;throw new Li("Can't set "+Bi(e)+" as a prototype")},ji=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Di(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Mi(n),Fi(r),Ui(n)?(t?e(n,r):n.__proto__=r,n):n}}():void 0),Qi={},Vi={},Hi=et,zi=J,Ki=Xn.indexOf,Gi=Vi,Wi=d([].push),qi=function(e,t){var n,r=zi(e),i=0,o=[];for(n in r)!Hi(Gi,n)&&Hi(r,n)&&Wi(o,n);for(;t.length>i;)Hi(r,n=t[i++])&&(~Ki(o,n)||Wi(o,n));return o},Yi=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Xi=qi,Ji=Yi.concat("length","prototype");Qi.f=Object.getOwnPropertyNames||function(e){return Xi(e,Ji)};var Zi={};Zi.f=Object.getOwnPropertySymbols;var $i=oe,eo=Qi,to=Zi,no=on,ro=d([].concat),io=$i("Reflect","ownKeys")||function(e){var t=eo.f(no(e)),n=to.f;return n?ro(t,n(e)):t},oo=et,ao=io,so=R,co=$t,lo={},uo=qi,Ao=Yi,ho=Object.keys||function(e){return uo(e,Ao)},po=x,fo=en,mo=$t,go=on,vo=J,yo=ho;lo.f=po&&!fo?Object.defineProperties:function(e,t){go(e);for(var n,r=vo(t),i=yo(t),o=i.length,a=0;o>a;)mo.f(e,n=i[a++],r[n]);return e};var bo,Eo=oe("document","documentElement"),wo=on,_o=lo,So=Yi,Co=Vi,To=Eo,Io=Rt,Ro="prototype",xo="script",No=bi("IE_PROTO"),Oo=function(){},ko=function(e){return"<"+xo+">"+e+"</"+xo+">"},Po=function(e){e.write(ko("")),e.close();var t=e.parentWindow.Object;return e=null,t},Bo=function(){try{bo=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;Bo="undefined"!=typeof document?document.domain&&bo?Po(bo):(t=Io("iframe"),n="java"+xo+":",t.style.display="none",To.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(ko("document.F=Object")),e.close(),e.F):Po(bo);for(var r=So.length;r--;)delete Bo[Ro][So[r]];return Bo()};Co[No]=!0;var Lo=Object.create||function(e,t){var n;return null!==e?(Oo[Ro]=wo(e),n=new Oo,Oo[Ro]=null,n[No]=e):n=Bo(),void 0===t?n:_o.f(n,t)},Do=$,Uo=yn,Mo=Error,Fo=d("".replace),jo=String(new Mo("zxcasd").stack),Qo=/\n\s*at [^:]*:[^\n]*/,Vo=Qo.test(jo),Ho=F,zo=!i((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",Ho(1,7)),7!==e.stack)})),Ko=yn,Go=function(e,t){if(Vo&&"string"==typeof e&&!Mo.prepareStackTrace)for(;t--;)e=Fo(e,Qo,"");return e},Wo=zo,qo=Error.captureStackTrace,Yo={},Xo=Yo,Jo=pt("iterator"),Zo=Array.prototype,$o=function(e){return void 0!==e&&(Xo.Array===e||Zo[Jo]===e)},ea=mr,ta=Be,na=K,ra=Yo,ia=pt("iterator"),oa=function(e){if(!na(e))return ta(e,ia)||ta(e,"@@iterator")||ra[ea(e)]},aa=k,sa=Oe,ca=on,la=Ie,da=oa,ua=TypeError,Aa=function(e,t){var n=arguments.length<2?da(e):t;if(sa(n))return ca(aa(n,e));throw new ua(la(e)+" is not iterable")},ha=k,pa=on,fa=Be,ma=function(e,t,n){var r,i;pa(e);try{if(!(r=fa(e,"return"))){if("throw"===t)throw n;return n}r=ha(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return pa(r),n},ga=Zt,va=k,ya=on,ba=Ie,Ea=$o,wa=Kn,_a=u,Sa=Aa,Ca=oa,Ta=ma,Ia=TypeError,Ra=function(e,t){this.stopped=e,this.result=t},xa=Ra.prototype,Na=function(e,t,n){var r,i,o,a,s,c,l,d=n&&n.that,u=!(!n||!n.AS_ENTRIES),A=!(!n||!n.IS_RECORD),h=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),f=ga(t,d),m=function(e){return r&&Ta(r,"normal",e),new Ra(!0,e)},g=function(e){return u?(ya(e),p?f(e[0],e[1],m):f(e[0],e[1])):p?f(e,m):f(e)};if(A)r=e.iterator;else if(h)r=e;else{if(!(i=Ca(e)))throw new Ia(ba(e)+" is not iterable");if(Ea(i)){for(o=0,a=wa(e);a>o;o++)if((s=g(e[o]))&&_a(xa,s))return s;return new Ra(!1)}r=Sa(e,i)}for(c=A?e.next:r.next;!(l=va(c,r)).done;){try{s=g(l.value)}catch(e){Ta(r,"throw",e)}if("object"==typeof s&&s&&_a(xa,s))return s}return new Ra(!1)},Oa=yr,ka=On,Pa=u,Ba=xi,La=ji,Da=function(e,t,n){for(var r=ao(t),i=co.f,o=so.f,a=0;a<r.length;a++){var s=r[a];oo(e,s)||n&&oo(n,s)||i(e,s,o(t,s))}},Ua=Lo,Ma=yn,Fa=F,ja=function(e,t){Do(t)&&"cause"in t&&Uo(e,"cause",t.cause)},Qa=function(e,t,n,r){Wo&&(qo?qo(e,t):Ko(e,"stack",Go(n,r)))},Va=Na,Ha=function(e,t){return void 0===e?arguments.length<2?"":t:Oa(e)},za=pt("toStringTag"),Ka=Error,Ga=[].push,Wa=function(e,t){var n,r=Pa(qa,this);La?n=La(new Ka,r?Ba(this):qa):(n=r?this:Ua(qa),Ma(n,za,"Error")),void 0!==t&&Ma(n,"message",Ha(t)),Qa(n,Wa,n.stack,1),arguments.length>2&&ja(n,arguments[2]);var i=[];return Va(e,Ga,{that:i}),Ma(n,"errors",i),n};La?La(Wa,Ka):Da(Wa,Ka,{name:!0});var qa=Wa.prototype=Ua(Ka.prototype,{constructor:Fa(1,Wa),message:Fa(1,""),name:Fa(1,"AggregateError")});ka({global:!0,constructor:!0,arity:2},{AggregateError:Wa});var Ya,Xa,Ja,Za=I,$a=h.WeakMap,es=Za($a)&&/native code/.test(String($a)),ts=h,ns=$,rs=yn,is=et,os=Ge,as=bi,ss=Vi,cs="Object already initialized",ls=ts.TypeError,ds=ts.WeakMap;if(es||os.state){var us=os.state||(os.state=new ds);us.get=us.get,us.has=us.has,us.set=us.set,Ya=function(e,t){if(us.has(e))throw new ls(cs);return t.facade=e,us.set(e,t),t},Xa=function(e){return us.get(e)||{}},Ja=function(e){return us.has(e)}}else{var As=as("state");ss[As]=!0,Ya=function(e,t){if(is(e,As))throw new ls(cs);return t.facade=e,rs(e,As,t),t},Xa=function(e){return is(e,As)?e[As]:{}},Ja=function(e){return is(e,As)}}var hs,ps,fs,ms={set:Ya,get:Xa,has:Ja,enforce:function(e){return Ja(e)?Xa(e):Ya(e,{})},getterFor:function(e){return function(t){var n;if(!ns(t)||(n=Xa(t)).type!==e)throw new ls("Incompatible receiver, "+e+" required");return n}}},gs=x,vs=et,ys=Function.prototype,bs=gs&&Object.getOwnPropertyDescriptor,Es=vs(ys,"name"),ws={EXISTS:Es,PROPER:Es&&"something"===function(){}.name,CONFIGURABLE:Es&&(!gs||gs&&bs(ys,"name").configurable)},_s=yn,Ss=function(e,t,n,r){return r&&r.enumerable?e[t]=n:_s(e,t,n),e},Cs=i,Ts=I,Is=$,Rs=Lo,xs=xi,Ns=Ss,Os=pt("iterator"),ks=!1;[].keys&&("next"in(fs=[].keys())?(ps=xs(xs(fs)))!==Object.prototype&&(hs=ps):ks=!0);var Ps=!Is(hs)||Cs((function(){var e={};return hs[Os].call(e)!==e}));Ts((hs=Ps?{}:Rs(hs))[Os])||Ns(hs,Os,(function(){return this}));var Bs={IteratorPrototype:hs,BUGGY_SAFARI_ITERATORS:ks},Ls=mr,Ds=lr?{}.toString:function(){return"[object "+Ls(this)+"]"},Us=lr,Ms=$t.f,Fs=yn,js=et,Qs=Ds,Vs=pt("toStringTag"),Hs=function(e,t,n,r){var i=n?e:e&&e.prototype;i&&(js(i,Vs)||Ms(i,Vs,{configurable:!0,value:t}),r&&!Us&&Fs(i,"toString",Qs))},zs=Bs.IteratorPrototype,Ks=Lo,Gs=F,Ws=Hs,qs=Yo,Ys=function(){return this},Xs=function(e,t,n,r){var i=t+" Iterator";return e.prototype=Ks(zs,{next:Gs(+!r,n)}),Ws(e,i,!1,!0),qs[i]=Ys,e},Js=On,Zs=k,$s=Xs,ec=xi,tc=Hs,nc=Ss,rc=Yo,ic=Bs,oc=ws.PROPER,ac=ic.BUGGY_SAFARI_ITERATORS,sc=pt("iterator"),cc="keys",lc="values",dc="entries",uc=function(){return this},Ac=function(e,t,n,r,i,o,a){$s(n,t,r);var s,c,l,d=function(e){if(e===i&&f)return f;if(!ac&&e&&e in h)return h[e];switch(e){case cc:case lc:case dc:return function(){return new n(this,e)}}return function(){return new n(this)}},u=t+" Iterator",A=!1,h=e.prototype,p=h[sc]||h["@@iterator"]||i&&h[i],f=!ac&&p||d(i),m="Array"===t&&h.entries||p;if(m&&(s=ec(m.call(new e)))!==Object.prototype&&s.next&&(tc(s,u,!0,!0),rc[u]=uc),oc&&i===lc&&p&&p.name!==lc&&(A=!0,f=function(){return Zs(p,this)}),i)if(c={values:d(lc),keys:o?f:d(cc),entries:d(dc)},a)for(l in c)(ac||A||!(l in h))&&nc(h,l,c[l]);else Js({target:t,proto:!0,forced:ac||A},c);return a&&h[sc]!==f&&nc(h,sc,f,{name:i}),rc[t]=f,c},hc=function(e,t){return{value:e,done:t}},pc=J,fc=Yo,mc=ms;$t.f;var gc=Ac,vc=hc,yc="Array Iterator",bc=mc.set,Ec=mc.getterFor(yc);gc(Array,"Array",(function(e,t){bc(this,{type:yc,target:pc(e),index:0,kind:t})}),(function(){var e=Ec(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,vc(void 0,!0);switch(e.kind){case"keys":return vc(n,!1);case"values":return vc(t[n],!1)}return vc([n,t[n]],!1)}),"values"),fc.Arguments=fc.Array;var wc=$t,_c=function(e,t,n){return wc.f(e,t,n)},Sc=oe,Cc=_c,Tc=x,Ic=pt("species"),Rc=u,xc=TypeError,Nc=function(e,t){if(Rc(t,e))return e;throw new xc("Incorrect invocation")},Oc=I,kc=Ge,Pc=d(Function.toString);Oc(kc.inspectSource)||(kc.inspectSource=function(e){return Pc(e)});var Bc=kc.inspectSource,Lc=d,Dc=i,Uc=I,Mc=mr,Fc=Bc,jc=function(){},Qc=oe("Reflect","construct"),Vc=/^\s*(?:class|function)\b/,Hc=Lc(Vc.exec),zc=!Vc.test(jc),Kc=function(e){if(!Uc(e))return!1;try{return Qc(jc,[],e),!0}catch(e){return!1}},Gc=function(e){if(!Uc(e))return!1;switch(Mc(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return zc||!!Hc(Vc,Fc(e))}catch(e){return!0}};Gc.sham=!0;var Wc,qc,Yc,Xc,Jc=!Qc||Dc((function(){var e;return Kc(Kc.call)||!Kc(Object)||!Kc((function(){e=!0}))||e}))?Gc:Kc,Zc=Jc,$c=Ie,el=TypeError,tl=on,nl=function(e){if(Zc(e))return e;throw new el($c(e)+" is not a constructor")},rl=K,il=pt("species"),ol=function(e,t){var n,r=tl(e).constructor;return void 0===r||rl(n=tl(r)[il])?t:nl(n)},al=d([].slice),sl=TypeError,cl=function(e,t){if(e<t)throw new sl("Not enough arguments");return e},ll=/(?:ipad|iphone|ipod).*applewebkit/i.test(ce),dl=h,ul=v,Al=Zt,hl=I,pl=et,fl=i,ml=Eo,gl=al,vl=Rt,yl=cl,bl=ll,El=Xr,wl=dl.setImmediate,_l=dl.clearImmediate,Sl=dl.process,Cl=dl.Dispatch,Tl=dl.Function,Il=dl.MessageChannel,Rl=dl.String,xl=0,Nl={},Ol="onreadystatechange";fl((function(){Wc=dl.location}));var kl=function(e){if(pl(Nl,e)){var t=Nl[e];delete Nl[e],t()}},Pl=function(e){return function(){kl(e)}},Bl=function(e){kl(e.data)},Ll=function(e){dl.postMessage(Rl(e),Wc.protocol+"//"+Wc.host)};wl&&_l||(wl=function(e){yl(arguments.length,1);var t=hl(e)?e:Tl(e),n=gl(arguments,1);return Nl[++xl]=function(){ul(t,void 0,n)},qc(xl),xl},_l=function(e){delete Nl[e]},El?qc=function(e){Sl.nextTick(Pl(e))}:Cl&&Cl.now?qc=function(e){Cl.now(Pl(e))}:Il&&!bl?(Xc=(Yc=new Il).port2,Yc.port1.onmessage=Bl,qc=Al(Xc.postMessage,Xc)):dl.addEventListener&&hl(dl.postMessage)&&!dl.importScripts&&Wc&&"file:"!==Wc.protocol&&!fl(Ll)?(qc=Ll,dl.addEventListener("message",Bl,!1)):qc=Ol in vl("script")?function(e){ml.appendChild(vl("script"))[Ol]=function(){ml.removeChild(this),kl(e)}}:function(e){setTimeout(Pl(e),0)});var Dl={set:wl,clear:_l},Ul=h,Ml=x,Fl=Object.getOwnPropertyDescriptor,jl=function(e){if(!Ml)return Ul[e];var t=Fl(Ul,e);return t&&t.value},Ql=function(){this.head=null,this.tail=null};Ql.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var Vl,Hl,zl,Kl,Gl,Wl=Ql,ql=/ipad|iphone|ipod/i.test(ce)&&"undefined"!=typeof Pebble,Yl=/web0s(?!.*chrome)/i.test(ce),Xl=h,Jl=jl,Zl=Zt,$l=Dl.set,ed=Wl,td=ll,nd=ql,rd=Yl,id=Xr,od=Xl.MutationObserver||Xl.WebKitMutationObserver,ad=Xl.document,sd=Xl.process,cd=Xl.Promise,ld=Jl("queueMicrotask");if(!ld){var dd=new ed,ud=function(){var e,t;for(id&&(e=sd.domain)&&e.exit();t=dd.get();)try{t()}catch(e){throw dd.head&&Vl(),e}e&&e.enter()};td||id||rd||!od||!ad?!nd&&cd&&cd.resolve?((Kl=cd.resolve(void 0)).constructor=cd,Gl=Zl(Kl.then,Kl),Vl=function(){Gl(ud)}):id?Vl=function(){sd.nextTick(ud)}:($l=Zl($l,Xl),Vl=function(){$l(ud)}):(Hl=!0,zl=ad.createTextNode(""),new od(ud).observe(zl,{characterData:!0}),Vl=function(){zl.data=Hl=!Hl}),ld=function(e){dd.head||Vl(),dd.add(e)}}var Ad=ld,hd=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},pd=h.Promise,fd=h,md=pd,gd=I,vd=qt,yd=Bc,bd=pt,Ed=Yr,wd=fe,_d=md&&md.prototype,Sd=bd("species"),Cd=!1,Td=gd(fd.PromiseRejectionEvent),Id=vd("Promise",(function(){var e=yd(md),t=e!==String(md);if(!t&&66===wd)return!0;if(!_d.catch||!_d.finally)return!0;if(!wd||wd<51||!/native code/.test(e)){var n=new md((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[Sd]=r,!(Cd=n.then((function(){}))instanceof r))return!0}return!(t||"BROWSER"!==Ed&&"DENO"!==Ed||Td)})),Rd={CONSTRUCTOR:Id,REJECTION_EVENT:Td,SUBCLASSING:Cd},xd={},Nd=Oe,Od=TypeError,kd=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw new Od("Bad Promise constructor");t=e,n=r})),this.resolve=Nd(t),this.reject=Nd(n)};xd.f=function(e){return new kd(e)};var Pd,Bd,Ld=On,Dd=Xr,Ud=h,Md=k,Fd=Ss,jd=Hs,Qd=function(e){var t=Sc(e);Tc&&t&&!t[Ic]&&Cc(t,Ic,{configurable:!0,get:function(){return this}})},Vd=Oe,Hd=I,zd=$,Kd=Nc,Gd=ol,Wd=Dl.set,qd=Ad,Yd=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}},Xd=hd,Jd=Wl,Zd=ms,$d=pd,eu=Rd,tu=xd,nu="Promise",ru=eu.CONSTRUCTOR,iu=eu.REJECTION_EVENT,ou=Zd.getterFor(nu),au=Zd.set,su=$d&&$d.prototype,cu=$d,lu=su,du=Ud.TypeError,uu=Ud.document,Au=Ud.process,hu=tu.f,pu=hu,fu=!!(uu&&uu.createEvent&&Ud.dispatchEvent),mu="unhandledrejection",gu=function(e){var t;return!(!zd(e)||!Hd(t=e.then))&&t},vu=function(e,t){var n,r,i,o=t.value,a=1===t.state,s=a?e.ok:e.fail,c=e.resolve,l=e.reject,d=e.domain;try{s?(a||(2===t.rejection&&_u(t),t.rejection=1),!0===s?n=o:(d&&d.enter(),n=s(o),d&&(d.exit(),i=!0)),n===e.promise?l(new du("Promise-chain cycle")):(r=gu(n))?Md(r,n,c,l):c(n)):l(o)}catch(e){d&&!i&&d.exit(),l(e)}},yu=function(e,t){e.notified||(e.notified=!0,qd((function(){for(var n,r=e.reactions;n=r.get();)vu(n,e);e.notified=!1,t&&!e.rejection&&Eu(e)})))},bu=function(e,t,n){var r,i;fu?((r=uu.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Ud.dispatchEvent(r)):r={promise:t,reason:n},!iu&&(i=Ud["on"+e])?i(r):e===mu&&Yd("Unhandled promise rejection",n)},Eu=function(e){Md(Wd,Ud,(function(){var t,n=e.facade,r=e.value;if(wu(e)&&(t=Xd((function(){Dd?Au.emit("unhandledRejection",r,n):bu(mu,n,r)})),e.rejection=Dd||wu(e)?2:1,t.error))throw t.value}))},wu=function(e){return 1!==e.rejection&&!e.parent},_u=function(e){Md(Wd,Ud,(function(){var t=e.facade;Dd?Au.emit("rejectionHandled",t):bu("rejectionhandled",t,e.value)}))},Su=function(e,t,n){return function(r){e(t,r,n)}},Cu=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,yu(e,!0))},Tu=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new du("Promise can't be resolved itself");var r=gu(t);r?qd((function(){var n={done:!1};try{Md(r,t,Su(Tu,n,e),Su(Cu,n,e))}catch(t){Cu(n,t,e)}})):(e.value=t,e.state=1,yu(e,!1))}catch(t){Cu({done:!1},t,e)}}};ru&&(lu=(cu=function(e){Kd(this,lu),Vd(e),Md(Pd,this);var t=ou(this);try{e(Su(Tu,t),Su(Cu,t))}catch(e){Cu(t,e)}}).prototype,(Pd=function(e){au(this,{type:nu,done:!1,notified:!1,parent:!1,reactions:new Jd,rejection:!1,state:0,value:null})}).prototype=Fd(lu,"then",(function(e,t){var n=ou(this),r=hu(Gd(this,cu));return n.parent=!0,r.ok=!Hd(e)||e,r.fail=Hd(t)&&t,r.domain=Dd?Au.domain:void 0,0===n.state?n.reactions.add(r):qd((function(){vu(r,n)})),r.promise})),Bd=function(){var e=new Pd,t=ou(e);this.promise=e,this.resolve=Su(Tu,t),this.reject=Su(Cu,t)},tu.f=hu=function(e){return e===cu||void 0===e?new Bd(e):pu(e)}),Ld({global:!0,constructor:!0,wrap:!0,forced:ru},{Promise:cu}),jd(cu,nu,!1,!0),Qd(nu);var Iu=pt("iterator"),Ru=!1;try{var xu=0,Nu={next:function(){return{done:!!xu++}},return:function(){Ru=!0}};Nu[Iu]=function(){return this},Array.from(Nu,(function(){throw 2}))}catch(e){}var Ou=pd,ku=function(e,t){try{if(!t&&!Ru)return!1}catch(e){return!1}var n=!1;try{var r={};r[Iu]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Pu=Rd.CONSTRUCTOR||!ku((function(e){Ou.all(e).then(void 0,(function(){}))})),Bu=k,Lu=Oe,Du=xd,Uu=hd,Mu=Na;On({target:"Promise",stat:!0,forced:Pu},{all:function(e){var t=this,n=Du.f(t),r=n.resolve,i=n.reject,o=Uu((function(){var n=Lu(t.resolve),o=[],a=0,s=1;Mu(e,(function(e){var c=a++,l=!1;s++,Bu(n,t,e).then((function(e){l||(l=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise}});var Fu=On,ju=Rd.CONSTRUCTOR;pd&&pd.prototype,Fu({target:"Promise",proto:!0,forced:ju,real:!0},{catch:function(e){return this.then(void 0,e)}});var Qu=k,Vu=Oe,Hu=xd,zu=hd,Ku=Na;On({target:"Promise",stat:!0,forced:Pu},{race:function(e){var t=this,n=Hu.f(t),r=n.reject,i=zu((function(){var i=Vu(t.resolve);Ku(e,(function(e){Qu(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Gu=xd;On({target:"Promise",stat:!0,forced:Rd.CONSTRUCTOR},{reject:function(e){var t=Gu.f(this);return(0,t.reject)(e),t.promise}});var Wu=on,qu=$,Yu=xd,Xu=function(e,t){if(Wu(e),qu(t)&&t.constructor===e)return t;var n=Yu.f(e);return(0,n.resolve)(t),n.promise},Ju=On,Zu=pd,$u=Rd.CONSTRUCTOR,eA=Xu,tA=oe("Promise"),nA=!$u;Ju({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return eA(nA&&this===tA?Zu:this,e)}});var rA=k,iA=Oe,oA=xd,aA=hd,sA=Na;On({target:"Promise",stat:!0,forced:Pu},{allSettled:function(e){var t=this,n=oA.f(t),r=n.resolve,i=n.reject,o=aA((function(){var n=iA(t.resolve),i=[],o=0,a=1;sA(e,(function(e){var s=o++,c=!1;a++,rA(n,t,e).then((function(e){c||(c=!0,i[s]={status:"fulfilled",value:e},--a||r(i))}),(function(e){c||(c=!0,i[s]={status:"rejected",reason:e},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var cA=k,lA=Oe,dA=oe,uA=xd,AA=hd,hA=Na,pA="No one promise resolved";On({target:"Promise",stat:!0,forced:Pu},{any:function(e){var t=this,n=dA("AggregateError"),r=uA.f(t),i=r.resolve,o=r.reject,a=AA((function(){var r=lA(t.resolve),a=[],s=0,c=1,l=!1;hA(e,(function(e){var d=s++,u=!1;c++,cA(r,t,e).then((function(e){u||l||(l=!0,i(e))}),(function(e){u||l||(u=!0,a[d]=e,--c||o(new n(a,pA)))}))})),--c||o(new n(a,pA))}));return a.error&&o(a.value),r.promise}});var fA=On,mA=v,gA=al,vA=xd,yA=Oe,bA=hd,EA=h.Promise,wA=!1;fA({target:"Promise",stat:!0,forced:!EA||!EA.try||bA((function(){EA.try((function(e){wA=8===e}),8)})).error||!wA},{try:function(e){var t=arguments.length>1?gA(arguments,1):[],n=vA.f(this),r=bA((function(){return mA(yA(e),void 0,t)}));return(r.error?n.reject:n.resolve)(r.value),n.promise}});var _A=xd;On({target:"Promise",stat:!0},{withResolvers:function(){var e=_A.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var SA=On,CA=pd,TA=i,IA=oe,RA=I,xA=ol,NA=Xu,OA=CA&&CA.prototype;SA({target:"Promise",proto:!0,real:!0,forced:!!CA&&TA((function(){OA.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=xA(this,IA("Promise")),n=RA(e);return this.then(n?function(n){return NA(t,e()).then((function(){return n}))}:e,n?function(n){return NA(t,e()).then((function(){throw n}))}:e)}});var kA=d,PA=Dn,BA=yr,LA=q,DA=kA("".charAt),UA=kA("".charCodeAt),MA=kA("".slice),FA=function(e){return function(t,n){var r,i,o=BA(LA(t)),a=PA(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=UA(o,a))<55296||r>56319||a+1===s||(i=UA(o,a+1))<56320||i>57343?e?DA(o,a):r:e?MA(o,a,a+2):i-56320+(r-55296<<10)+65536}},jA={codeAt:FA(!1),charAt:FA(!0)},QA=jA.charAt,VA=yr,HA=ms,zA=Ac,KA=hc,GA="String Iterator",WA=HA.set,qA=HA.getterFor(GA);zA(String,"String",(function(e){WA(this,{type:GA,string:VA(e),index:0})}),(function(){var e,t=qA(this),n=t.string,r=t.index;return r>=n.length?KA(void 0,!0):(e=QA(n,r),t.index+=e.length,KA(e,!1))}));var YA=ee.Promise,XA={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},JA=h,ZA=Hs,$A=Yo;for(var eh in XA)ZA(JA[eh],eh),$A[eh]=$A.Array;var th=YA,nh=r(th),rh=er("Array","values"),ih=mr,oh=et,ah=u,sh=rh,ch=Array.prototype,lh={DOMTokenList:!0,NodeList:!0},dh=function(e){var t=e.values;return e===ch||ah(ch,e)&&t===ch.values||oh(lh,ih(e))?sh:t},uh=r(dh),Ah=Ie,hh=TypeError,ph=al,fh=Math.floor,mh=function(e,t){var n=e.length;if(n<8)for(var r,i,o=1;o<n;){for(i=o,r=e[o];i&&t(e[i-1],r)>0;)e[i]=e[--i];i!==o++&&(e[i]=r)}else for(var a=fh(n/2),s=mh(ph(e,0,a),t),c=mh(ph(e,a),t),l=s.length,d=c.length,u=0,A=0;u<l||A<d;)e[u+A]=u<l&&A<d?t(s[u],c[A])<=0?s[u++]:c[A++]:u<l?s[u++]:c[A++];return e},gh=mh,vh=ce.match(/firefox\/(\d+)/i),yh=!!vh&&+vh[1],bh=/MSIE|Trident/.test(ce),Eh=ce.match(/AppleWebKit\/(\d+)\./),wh=!!Eh&&+Eh[1],_h=On,Sh=d,Ch=Oe,Th=Je,Ih=Kn,Rh=function(e,t){if(!delete e[t])throw new hh("Cannot delete property "+Ah(t)+" of "+Ah(e))},xh=yr,Nh=i,Oh=gh,kh=zr,Ph=yh,Bh=bh,Lh=fe,Dh=wh,Uh=[],Mh=Sh(Uh.sort),Fh=Sh(Uh.push),jh=Nh((function(){Uh.sort(void 0)})),Qh=Nh((function(){Uh.sort(null)})),Vh=kh("sort"),Hh=!Nh((function(){if(Lh)return Lh<70;if(!(Ph&&Ph>3)){if(Bh)return!0;if(Dh)return Dh<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Uh.push({k:t+r,v:n})}for(Uh.sort((function(e,t){return t.v-e.v})),r=0;r<Uh.length;r++)t=Uh[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));_h({target:"Array",proto:!0,forced:jh||!Qh||!Vh||!Hh},{sort:function(e){void 0!==e&&Ch(e);var t=Th(this);if(Hh)return void 0===e?Mh(t):Mh(t,e);var n,r,i=[],o=Ih(t);for(r=0;r<o;r++)r in t&&Fh(i,t[r]);for(Oh(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:xh(t)>xh(n)?1:-1}}(e)),n=Ih(i),r=0;r<n;)t[r]=i[r++];for(;r<o;)Rh(t,r++);return t}});var zh=er("Array","sort"),Kh=u,Gh=zh,Wh=Array.prototype,qh=function(e){var t=e.sort;return e===Wh||Kh(Wh,e)&&t===Wh.sort?Gh:t},Yh=r(qh),Xh=On,Jh=d,Zh=jn,$h=RangeError,ep=String.fromCharCode,tp=String.fromCodePoint,np=Jh([].join);Xh({target:"String",stat:!0,arity:1,forced:!!tp&&1!==tp.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,i=0;r>i;){if(t=+arguments[i++],Zh(t,1114111)!==t)throw new $h(t+" is not a valid code point");n[i]=t<65536?ep(t):ep(55296+((t-=65536)>>10),t%1024+56320)}return np(n,"")}});var rp=i,ip=pt("iterator"),op=!rp((function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),n.delete("a",2),n.delete("b",void 0),!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b")||!t.size&&!0||!t.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[ip]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("https://a#\u0431").hash||"a1c3"!==r||"x"!==new URL("https://x",void 0).host})),ap=Ss,sp=On,cp=h,lp=jl,dp=oe,up=k,Ap=d,hp=x,pp=op,fp=Ss,mp=_c,gp=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:ap(e,r,t[r],n);return e},vp=Hs,yp=Xs,bp=ms,Ep=Nc,wp=I,_p=et,Sp=Zt,Cp=mr,Tp=on,Ip=$,Rp=yr,xp=Lo,Np=F,Op=Aa,kp=oa,Pp=hc,Bp=cl,Lp=gh,Dp=pt("iterator"),Up="URLSearchParams",Mp=Up+"Iterator",Fp=bp.set,jp=bp.getterFor(Up),Qp=bp.getterFor(Mp),Vp=lp("fetch"),Hp=lp("Request"),zp=lp("Headers"),Kp=Hp&&Hp.prototype,Gp=zp&&zp.prototype,Wp=cp.TypeError,qp=cp.encodeURIComponent,Yp=String.fromCharCode,Xp=dp("String","fromCodePoint"),Jp=parseInt,Zp=Ap("".charAt),$p=Ap([].join),ef=Ap([].push),tf=Ap("".replace),nf=Ap([].shift),rf=Ap([].splice),of=Ap("".split),af=Ap("".slice),sf=Ap(/./.exec),cf=/\+/g,lf=/^[0-9a-f]+$/i,df=function(e,t){var n=af(e,t,t+2);return sf(lf,n)?Jp(n,16):NaN},uf=function(e){for(var t=0,n=128;n>0&&0!=(e&n);n>>=1)t++;return t},Af=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(31&e[0])<<6|63&e[1];break;case 3:t=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:t=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3]}return t>1114111?null:t},hf=function(e){for(var t=(e=tf(e,cf," ")).length,n="",r=0;r<t;){var i=Zp(e,r);if("%"===i){if("%"===Zp(e,r+1)||r+3>t){n+="%",r++;continue}var o=df(e,r+1);if(o!=o){n+=i,r++;continue}r+=2;var a=uf(o);if(0===a)i=Yp(o);else{if(1===a||a>4){n+="\ufffd",r++;continue}for(var s=[o],c=1;c<a&&!(3+ ++r>t||"%"!==Zp(e,r));){var l=df(e,r+1);if(l!=l){r+=3;break}if(l>191||l<128)break;ef(s,l),r+=2,c++}if(s.length!==a){n+="\ufffd";continue}var d=Af(s);null===d?n+="\ufffd":i=Xp(d)}}n+=i,r++}return n},pf=/[!'()~]|%20/g,ff={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},mf=function(e){return ff[e]},gf=function(e){return tf(qp(e),pf,mf)},vf=yp((function(e,t){Fp(this,{type:Mp,target:jp(e).entries,index:0,kind:t})}),Up,(function(){var e=Qp(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,Pp(void 0,!0);var r=t[n];switch(e.kind){case"keys":return Pp(r.key,!1);case"values":return Pp(r.value,!1)}return Pp([r.key,r.value],!1)}),!0),yf=function(e){this.entries=[],this.url=null,void 0!==e&&(Ip(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Zp(e,0)?af(e,1):e:Rp(e)))};yf.prototype={type:Up,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,a,s,c=this.entries,l=kp(e);if(l)for(n=(t=Op(e,l)).next;!(r=up(n,t)).done;){if(o=(i=Op(Tp(r.value))).next,(a=up(o,i)).done||(s=up(o,i)).done||!up(o,i).done)throw new Wp("Expected sequence with length 2");ef(c,{key:Rp(a.value),value:Rp(s.value)})}else for(var d in e)_p(e,d)&&ef(c,{key:d,value:Rp(e[d])})},parseQuery:function(e){if(e)for(var t,n,r=this.entries,i=of(e,"&"),o=0;o<i.length;)(t=i[o++]).length&&(n=of(t,"="),ef(r,{key:hf(nf(n)),value:hf($p(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],ef(n,gf(e.key)+"="+gf(e.value));return $p(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var bf=function(){Ep(this,Ef);var e=Fp(this,new yf(arguments.length>0?arguments[0]:void 0));hp||(this.size=e.entries.length)},Ef=bf.prototype;if(gp(Ef,{append:function(e,t){var n=jp(this);Bp(arguments.length,2),ef(n.entries,{key:Rp(e),value:Rp(t)}),hp||this.length++,n.updateURL()},delete:function(e){for(var t=jp(this),n=Bp(arguments.length,1),r=t.entries,i=Rp(e),o=n<2?void 0:arguments[1],a=void 0===o?o:Rp(o),s=0;s<r.length;){var c=r[s];if(c.key!==i||void 0!==a&&c.value!==a)s++;else if(rf(r,s,1),void 0!==a)break}hp||(this.size=r.length),t.updateURL()},get:function(e){var t=jp(this).entries;Bp(arguments.length,1);for(var n=Rp(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=jp(this).entries;Bp(arguments.length,1);for(var n=Rp(e),r=[],i=0;i<t.length;i++)t[i].key===n&&ef(r,t[i].value);return r},has:function(e){for(var t=jp(this).entries,n=Bp(arguments.length,1),r=Rp(e),i=n<2?void 0:arguments[1],o=void 0===i?i:Rp(i),a=0;a<t.length;){var s=t[a++];if(s.key===r&&(void 0===o||s.value===o))return!0}return!1},set:function(e,t){var n=jp(this);Bp(arguments.length,1);for(var r,i=n.entries,o=!1,a=Rp(e),s=Rp(t),c=0;c<i.length;c++)(r=i[c]).key===a&&(o?rf(i,c--,1):(o=!0,r.value=s));o||ef(i,{key:a,value:s}),hp||(this.size=i.length),n.updateURL()},sort:function(){var e=jp(this);Lp(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=jp(this).entries,r=Sp(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new vf(this,"keys")},values:function(){return new vf(this,"values")},entries:function(){return new vf(this,"entries")}},{enumerable:!0}),fp(Ef,Dp,Ef.entries,{name:"entries"}),fp(Ef,"toString",(function(){return jp(this).serialize()}),{enumerable:!0}),hp&&mp(Ef,"size",{get:function(){return jp(this).entries.length},configurable:!0,enumerable:!0}),vp(bf,Up),sp({global:!0,constructor:!0,forced:!pp},{URLSearchParams:bf}),!pp&&wp(zp)){var wf=Ap(Gp.has),_f=Ap(Gp.set),Sf=function(e){if(Ip(e)){var t,n=e.body;if(Cp(n)===Up)return t=e.headers?new zp(e.headers):new zp,wf(t,"content-type")||_f(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),xp(e,{body:Np(0,Rp(n)),headers:Np(0,t)})}return e};if(wp(Vp)&&sp({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return Vp(e,arguments.length>1?Sf(arguments[1]):{})}}),wp(Hp)){var Cf=function(e){return Ep(this,Kp),new Hp(e,arguments.length>1?Sf(arguments[1]):{})};Kp.constructor=Cf,Cf.prototype=Kp,sp({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Cf})}}var Tf,If={URLSearchParams:bf,getState:jp},Rf=ee.URLSearchParams,xf=x,Nf=d,Of=k,kf=i,Pf=ho,Bf=Zi,Lf=P,Df=Je,Uf=z,Mf=Object.assign,Ff=Object.defineProperty,jf=Nf([].concat),Qf=!Mf||kf((function(){if(xf&&1!==Mf({b:1},Mf(Ff({},"a",{enumerable:!0,get:function(){Ff(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!==Mf({},e)[n]||Pf(Mf({},t)).join("")!==r}))?function(e,t){for(var n=Df(e),r=arguments.length,i=1,o=Bf.f,a=Lf.f;r>i;)for(var s,c=Uf(arguments[i++]),l=o?jf(Pf(c),o(c)):Pf(c),d=l.length,u=0;d>u;)s=l[u++],xf&&!Of(a,c,s)||(n[s]=c[s]);return n}:Mf,Vf=on,Hf=ma,zf=x,Kf=$t,Gf=F,Wf=function(e,t,n){zf?Kf.f(e,t,Gf(0,n)):e[t]=n},qf=Zt,Yf=k,Xf=Je,Jf=function(e,t,n,r){try{return r?t(Vf(n)[0],n[1]):t(n)}catch(t){Hf(e,"throw",t)}},Zf=$o,$f=Jc,em=Kn,tm=Wf,nm=Aa,rm=oa,im=Array,om=d,am=2147483647,sm=/[^\0-\u007E]/,cm=/[.\u3002\uFF0E\uFF61]/g,lm="Overflow: input needs wider integers to process",dm=RangeError,um=om(cm.exec),Am=Math.floor,hm=String.fromCharCode,pm=om("".charCodeAt),fm=om([].join),mm=om([].push),gm=om("".replace),vm=om("".split),ym=om("".toLowerCase),bm=function(e){return e+22+75*(e<26)},Em=function(e,t,n){var r=0;for(e=n?Am(e/700):e>>1,e+=Am(e/t);e>455;)e=Am(e/35),r+=36;return Am(r+36*e/(e+38))},wm=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=pm(e,n++);if(i>=55296&&i<=56319&&n<r){var o=pm(e,n++);56320==(64512&o)?mm(t,((1023&i)<<10)+(1023&o)+65536):(mm(t,i),n--)}else mm(t,i)}return t}(e);var n,r,i=e.length,o=128,a=0,s=72;for(n=0;n<e.length;n++)(r=e[n])<128&&mm(t,hm(r));var c=t.length,l=c;for(c&&mm(t,"-");l<i;){var d=am;for(n=0;n<e.length;n++)(r=e[n])>=o&&r<d&&(d=r);var u=l+1;if(d-o>Am((am-a)/u))throw new dm(lm);for(a+=(d-o)*u,o=d,n=0;n<e.length;n++){if((r=e[n])<o&&++a>am)throw new dm(lm);if(r===o){for(var A=a,h=36;;){var p=h<=s?1:h>=s+26?26:h-s;if(A<p)break;var f=A-p,m=36-p;mm(t,hm(bm(p+f%m))),A=Am(f/m),h+=36}mm(t,hm(bm(A))),s=Em(a,u,l===c),a=0,l++}}a++,o++}return fm(t,"")},_m=On,Sm=x,Cm=op,Tm=h,Im=Zt,Rm=d,xm=Ss,Nm=_c,Om=Nc,km=et,Pm=Qf,Bm=function(e){var t=Xf(e),n=$f(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=qf(i,r>2?arguments[2]:void 0));var a,s,c,l,d,u,A=rm(t),h=0;if(!A||this===im&&Zf(A))for(a=em(t),s=n?new this(a):im(a);a>h;h++)u=o?i(t[h],h):t[h],tm(s,h,u);else for(s=n?new this:[],d=(l=nm(t,A)).next;!(c=Yf(d,l)).done;h++)u=o?Jf(l,i,[c.value,h],!0):c.value,tm(s,h,u);return s.length=h,s},Lm=al,Dm=jA.codeAt,Um=function(e){var t,n,r=[],i=vm(gm(ym(e),cm,"."),".");for(t=0;t<i.length;t++)n=i[t],mm(r,um(sm,n)?"xn--"+wm(n):n);return fm(r,".")},Mm=yr,Fm=Hs,jm=cl,Qm=If,Vm=ms,Hm=Vm.set,zm=Vm.getterFor("URL"),Km=Qm.URLSearchParams,Gm=Qm.getState,Wm=Tm.URL,qm=Tm.TypeError,Ym=Tm.parseInt,Xm=Math.floor,Jm=Math.pow,Zm=Rm("".charAt),$m=Rm(/./.exec),eg=Rm([].join),tg=Rm(1..toString),ng=Rm([].pop),rg=Rm([].push),ig=Rm("".replace),og=Rm([].shift),ag=Rm("".split),sg=Rm("".slice),cg=Rm("".toLowerCase),lg=Rm([].unshift),dg="Invalid scheme",ug="Invalid host",Ag="Invalid port",hg=/[a-z]/i,pg=/[\d+-.a-z]/i,fg=/\d/,mg=/^0x/i,gg=/^[0-7]+$/,vg=/^\d+$/,yg=/^[\da-f]+$/i,bg=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Eg=/[\0\t\n\r #/:<>?@[\\\]^|]/,wg=/^[\u0000-\u0020]+/,_g=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Sg=/[\t\n\r]/g,Cg=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)lg(t,e%256),e=Xm(e/256);return eg(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n?r:t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=tg(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},Tg={},Ig=Pm({},Tg,{" ":1,'"':1,"<":1,">":1,"`":1}),Rg=Pm({},Ig,{"#":1,"?":1,"{":1,"}":1}),xg=Pm({},Rg,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ng=function(e,t){var n=Dm(e,0);return n>32&&n<127&&!km(t,e)?e:encodeURIComponent(e)},Og={ftp:21,file:null,http:80,https:443,ws:80,wss:443},kg=function(e,t){var n;return 2===e.length&&$m(hg,Zm(e,0))&&(":"===(n=Zm(e,1))||!t&&"|"===n)},Pg=function(e){var t;return e.length>1&&kg(sg(e,0,2))&&(2===e.length||"/"===(t=Zm(e,2))||"\\"===t||"?"===t||"#"===t)},Bg=function(e){return"."===e||"%2e"===cg(e)},Lg={},Dg={},Ug={},Mg={},Fg={},jg={},Qg={},Vg={},Hg={},zg={},Kg={},Gg={},Wg={},qg={},Yg={},Xg={},Jg={},Zg={},$g={},ev={},tv={},nv=function(e,t,n){var r,i,o,a=Mm(e);if(t){if(i=this.parse(a))throw new qm(i);this.searchParams=null}else{if(void 0!==n&&(r=new nv(n,!0)),i=this.parse(a,null,r))throw new qm(i);(o=Gm(new Km)).bindURL(this),this.searchParams=o}};nv.prototype={type:"URL",parse:function(e,t,n){var r,i,o,a,s,c=this,l=t||Lg,d=0,u="",A=!1,h=!1,p=!1;for(e=Mm(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=ig(e,wg,""),e=ig(e,_g,"$1")),e=ig(e,Sg,""),r=Bm(e);d<=r.length;){switch(i=r[d],l){case Lg:if(!i||!$m(hg,i)){if(t)return dg;l=Ug;continue}u+=cg(i),l=Dg;break;case Dg:if(i&&($m(pg,i)||"+"===i||"-"===i||"."===i))u+=cg(i);else{if(":"!==i){if(t)return dg;u="",l=Ug,d=0;continue}if(t&&(c.isSpecial()!==km(Og,u)||"file"===u&&(c.includesCredentials()||null!==c.port)||"file"===c.scheme&&!c.host))return;if(c.scheme=u,t)return void(c.isSpecial()&&Og[c.scheme]===c.port&&(c.port=null));u="","file"===c.scheme?l=qg:c.isSpecial()&&n&&n.scheme===c.scheme?l=Mg:c.isSpecial()?l=Vg:"/"===r[d+1]?(l=Fg,d++):(c.cannotBeABaseURL=!0,rg(c.path,""),l=$g)}break;case Ug:if(!n||n.cannotBeABaseURL&&"#"!==i)return dg;if(n.cannotBeABaseURL&&"#"===i){c.scheme=n.scheme,c.path=Lm(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=tv;break}l="file"===n.scheme?qg:jg;continue;case Mg:if("/"!==i||"/"!==r[d+1]){l=jg;continue}l=Hg,d++;break;case Fg:if("/"===i){l=zg;break}l=Zg;continue;case jg:if(c.scheme=n.scheme,i===Tf)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Lm(n.path),c.query=n.query;else if("/"===i||"\\"===i&&c.isSpecial())l=Qg;else if("?"===i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Lm(n.path),c.query="",l=ev;else{if("#"!==i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Lm(n.path),c.path.length--,l=Zg;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Lm(n.path),c.query=n.query,c.fragment="",l=tv}break;case Qg:if(!c.isSpecial()||"/"!==i&&"\\"!==i){if("/"!==i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=Zg;continue}l=zg}else l=Hg;break;case Vg:if(l=Hg,"/"!==i||"/"!==Zm(u,d+1))continue;d++;break;case Hg:if("/"!==i&&"\\"!==i){l=zg;continue}break;case zg:if("@"===i){A&&(u="%40"+u),A=!0,o=Bm(u);for(var f=0;f<o.length;f++){var m=o[f];if(":"!==m||p){var g=Ng(m,xg);p?c.password+=g:c.username+=g}else p=!0}u=""}else if(i===Tf||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()){if(A&&""===u)return"Invalid authority";d-=Bm(u).length+1,u="",l=Kg}else u+=i;break;case Kg:case Gg:if(t&&"file"===c.scheme){l=Xg;continue}if(":"!==i||h){if(i===Tf||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()){if(c.isSpecial()&&""===u)return ug;if(t&&""===u&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(u))return a;if(u="",l=Jg,t)return;continue}"["===i?h=!0:"]"===i&&(h=!1),u+=i}else{if(""===u)return ug;if(a=c.parseHost(u))return a;if(u="",l=Wg,t===Gg)return}break;case Wg:if(!$m(fg,i)){if(i===Tf||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()||t){if(""!==u){var v=Ym(u,10);if(v>65535)return Ag;c.port=c.isSpecial()&&v===Og[c.scheme]?null:v,u=""}if(t)return;l=Jg;continue}return Ag}u+=i;break;case qg:if(c.scheme="file","/"===i||"\\"===i)l=Yg;else{if(!n||"file"!==n.scheme){l=Zg;continue}switch(i){case Tf:c.host=n.host,c.path=Lm(n.path),c.query=n.query;break;case"?":c.host=n.host,c.path=Lm(n.path),c.query="",l=ev;break;case"#":c.host=n.host,c.path=Lm(n.path),c.query=n.query,c.fragment="",l=tv;break;default:Pg(eg(Lm(r,d),""))||(c.host=n.host,c.path=Lm(n.path),c.shortenPath()),l=Zg;continue}}break;case Yg:if("/"===i||"\\"===i){l=Xg;break}n&&"file"===n.scheme&&!Pg(eg(Lm(r,d),""))&&(kg(n.path[0],!0)?rg(c.path,n.path[0]):c.host=n.host),l=Zg;continue;case Xg:if(i===Tf||"/"===i||"\\"===i||"?"===i||"#"===i){if(!t&&kg(u))l=Zg;else if(""===u){if(c.host="",t)return;l=Jg}else{if(a=c.parseHost(u))return a;if("localhost"===c.host&&(c.host=""),t)return;u="",l=Jg}continue}u+=i;break;case Jg:if(c.isSpecial()){if(l=Zg,"/"!==i&&"\\"!==i)continue}else if(t||"?"!==i)if(t||"#"!==i){if(i!==Tf&&(l=Zg,"/"!==i))continue}else c.fragment="",l=tv;else c.query="",l=ev;break;case Zg:if(i===Tf||"/"===i||"\\"===i&&c.isSpecial()||!t&&("?"===i||"#"===i)){if(".."===(s=cg(s=u))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(c.shortenPath(),"/"===i||"\\"===i&&c.isSpecial()||rg(c.path,"")):Bg(u)?"/"===i||"\\"===i&&c.isSpecial()||rg(c.path,""):("file"===c.scheme&&!c.path.length&&kg(u)&&(c.host&&(c.host=""),u=Zm(u,0)+":"),rg(c.path,u)),u="","file"===c.scheme&&(i===Tf||"?"===i||"#"===i))for(;c.path.length>1&&""===c.path[0];)og(c.path);"?"===i?(c.query="",l=ev):"#"===i&&(c.fragment="",l=tv)}else u+=Ng(i,Rg);break;case $g:"?"===i?(c.query="",l=ev):"#"===i?(c.fragment="",l=tv):i!==Tf&&(c.path[0]+=Ng(i,Tg));break;case ev:t||"#"!==i?i!==Tf&&("'"===i&&c.isSpecial()?c.query+="%27":c.query+="#"===i?"%23":Ng(i,Tg)):(c.fragment="",l=tv);break;case tv:i!==Tf&&(c.fragment+=Ng(i,Ig))}d++}},parseHost:function(e){var t,n,r;if("["===Zm(e,0)){if("]"!==Zm(e,e.length-1))return ug;if(t=function(e){var t,n,r,i,o,a,s,c=[0,0,0,0,0,0,0,0],l=0,d=null,u=0,A=function(){return Zm(e,u)};if(":"===A()){if(":"!==Zm(e,1))return;u+=2,d=++l}for(;A();){if(8===l)return;if(":"!==A()){for(t=n=0;n<4&&$m(yg,A());)t=16*t+Ym(A(),16),u++,n++;if("."===A()){if(0===n)return;if(u-=n,l>6)return;for(r=0;A();){if(i=null,r>0){if(!("."===A()&&r<4))return;u++}if(!$m(fg,A()))return;for(;$m(fg,A());){if(o=Ym(A(),10),null===i)i=o;else{if(0===i)return;i=10*i+o}if(i>255)return;u++}c[l]=256*c[l]+i,2!=++r&&4!==r||l++}if(4!==r)return;break}if(":"===A()){if(u++,!A())return}else if(A())return;c[l++]=t}else{if(null!==d)return;u++,d=++l}}if(null!==d)for(a=l-d,l=7;0!==l&&a>0;)s=c[l],c[l--]=c[d+a-1],c[d+--a]=s;else if(8!==l)return;return c}(sg(e,1,-1)),!t)return ug;this.host=t}else if(this.isSpecial()){if(e=Um(e),$m(bg,e))return ug;if(t=function(e){var t,n,r,i,o,a,s,c=ag(e,".");if(c.length&&""===c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""===(i=c[r]))return e;if(o=10,i.length>1&&"0"===Zm(i,0)&&(o=$m(mg,i)?16:8,i=sg(i,8===o?1:2)),""===i)a=0;else{if(!$m(10===o?vg:8===o?gg:yg,i))return e;a=Ym(i,o)}rg(n,a)}for(r=0;r<t;r++)if(a=n[r],r===t-1){if(a>=Jm(256,5-t))return null}else if(a>255)return null;for(s=ng(n),r=0;r<n.length;r++)s+=n[r]*Jm(256,3-r);return s}(e),null===t)return ug;this.host=t}else{if($m(Eg,e))return ug;for(t="",n=Bm(e),r=0;r<n.length;r++)t+=Ng(n[r],Tg);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return km(Og,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&kg(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=Cg(i),null!==o&&(l+=":"+o)):"file"===t&&(l+="//"),l+=e.cannotBeABaseURL?a[0]:a.length?"/"+eg(a,"/"):"",null!==s&&(l+="?"+s),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw new qm(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new rv(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+Cg(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Mm(e)+":",Lg)},getUsername:function(){return this.username},setUsername:function(e){var t=Bm(Mm(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=Ng(t[n],xg)}},getPassword:function(){return this.password},setPassword:function(e){var t=Bm(Mm(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=Ng(t[n],xg)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?Cg(e):Cg(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Kg)},getHostname:function(){var e=this.host;return null===e?"":Cg(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Gg)},getPort:function(){var e=this.port;return null===e?"":Mm(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=Mm(e))?this.port=null:this.parse(e,Wg))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+eg(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Jg))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=Mm(e))?this.query=null:("?"===Zm(e,0)&&(e=sg(e,1)),this.query="",this.parse(e,ev)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=Mm(e))?("#"===Zm(e,0)&&(e=sg(e,1)),this.fragment="",this.parse(e,tv)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var rv=function(e){var t=Om(this,iv),n=jm(arguments.length,1)>1?arguments[1]:void 0,r=Hm(t,new nv(e,!1,n));Sm||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},iv=rv.prototype,ov=function(e,t){return{get:function(){return zm(this)[e]()},set:t&&function(e){return zm(this)[t](e)},configurable:!0,enumerable:!0}};if(Sm&&(Nm(iv,"href",ov("serialize","setHref")),Nm(iv,"origin",ov("getOrigin")),Nm(iv,"protocol",ov("getProtocol","setProtocol")),Nm(iv,"username",ov("getUsername","setUsername")),Nm(iv,"password",ov("getPassword","setPassword")),Nm(iv,"host",ov("getHost","setHost")),Nm(iv,"hostname",ov("getHostname","setHostname")),Nm(iv,"port",ov("getPort","setPort")),Nm(iv,"pathname",ov("getPathname","setPathname")),Nm(iv,"search",ov("getSearch","setSearch")),Nm(iv,"searchParams",ov("getSearchParams")),Nm(iv,"hash",ov("getHash","setHash"))),xm(iv,"toJSON",(function(){return zm(this).serialize()}),{enumerable:!0}),xm(iv,"toString",(function(){return zm(this).serialize()}),{enumerable:!0}),Wm){var av=Wm.createObjectURL,sv=Wm.revokeObjectURL;av&&xm(rv,"createObjectURL",Im(av,Wm)),sv&&xm(rv,"revokeObjectURL",Im(sv,Wm))}Fm(rv,"URL"),_m({global:!0,constructor:!0,forced:!Cm,sham:!Sm},{URL:rv});var cv=On,lv=i,dv=cl,uv=yr,Av=op,hv=oe("URL"),pv=Av&&lv((function(){hv.canParse()})),fv=lv((function(){return 1!==hv.canParse.length}));cv({target:"URL",stat:!0,forced:!pv||fv},{canParse:function(e){var t=dv(arguments.length,1),n=uv(e),r=t<2||void 0===arguments[1]?void 0:uv(arguments[1]);try{return!!new hv(n,r)}catch(e){return!1}}});var mv=On,gv=cl,vv=yr,yv=op,bv=oe("URL");mv({target:"URL",stat:!0,forced:!yv},{parse:function(e){var t=gv(arguments.length,1),n=vv(e),r=t<2||void 0===arguments[1]?void 0:vv(arguments[1]);try{return new bv(n,r)}catch(e){return null}}});var Ev=r(ee.URL);let wv=!0,_v=!0;function Sv(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Cv(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function Tv(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(wv=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Iv(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(_v=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Rv(){if("object"==typeof window){if(wv)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function xv(e,t){_v&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Nv(e){return"[object Object]"===Object.prototype.toString.call(e)}function Ov(e){var t;return Nv(e)?ii(t=Object.keys(e)).call(t,(function(t,n){const r=Nv(e[n]),i=r?Ov(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function kv(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?kv(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{kv(e,e.get(t),n)}))})))}function Pv(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&kv(e,n,i)}))})),i}const Bv=Rv;function Lv(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const a=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let a=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>{var n;return Br(n=e.label.toLowerCase()).call(n,t)}))));return!a&&n.length&&Br(t).call(t,"back")&&(a=n[n.length-1]),a&&(e.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=r(e.video),Bv("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return Bv("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>nh.reject(o(e))))))}}}function Dv(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Uv(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Cv(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Mv(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Fv(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new nh(((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])})).then(n,r)}}function jv(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Pv(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Cv(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Pv(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?nh.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():nh.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Qv(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function Vv(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Qv(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find((e=>e.track===t));if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),nh.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=s.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Hv(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function zv(e,t){Cv(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var Kv=Object.freeze({__proto__:null,fixNegotiationNeeded:zv,shimAddTrackRemoveTrack:Vv,shimAddTrackRemoveTrackWithNative:Qv,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:Mv,shimGetStats:Fv,shimGetUserMedia:Lv,shimMediaStream:Dv,shimOnTrack:Uv,shimPeerConnection:Hv,shimSenderReceiverGetStats:jv});function Gv(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){xv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function Wv(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function qv(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}function Yv(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):nh.resolve(new Map)}}function Xv(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Cv(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Jv(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){xv("removeStream","removeTrack"),this.getSenders().forEach((t=>{var n;t.track&&Br(n=e.getTracks()).call(n,t.track)&&this.removeTrack(t)}))})}function Zv(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function $v(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function ey(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function ty(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?nh.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function ny(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?nh.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var ry=Object.freeze({__proto__:null,shimAddTransceiver:$v,shimCreateAnswer:ny,shimCreateOffer:ty,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,nh.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:ey,shimGetUserMedia:Gv,shimOnTrack:Wv,shimPeerConnection:qv,shimRTCDataChannel:Zv,shimReceiverGetStats:Xv,shimRemoveStream:Jv,shimSenderGetStats:Yv});function iy(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n;this._localStreams||(this._localStreams=[]),Br(n=this._localStreams).call(n,e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r&&r.forEach((e=>{var t;this._localStreams?Br(t=this._localStreams).call(t,e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{Br(n).call(n,e.track)&&this.removeTrack(e)}))})}}function oy(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{var t;if(this._remoteStreams||(this._remoteStreams=[]),Br(t=this._remoteStreams).call(t,e))return;this._remoteStreams.push(e);const n=new Event("addstream");n.stream=e,this.dispatchEvent(n)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function ay(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),nh.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),nh.resolve()):i};let s=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),nh.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),nh.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),nh.resolve()):r},t.addIceCandidate=s}function sy(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(cy(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function cy(e){return e&&void 0!==e.video?Object.assign({},e,{video:Ov(e.video)}):e}function ly(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(xv("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function dy(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function uy(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Ay(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var hy=Object.freeze({__proto__:null,shimAudioContext:Ay,shimCallbacksAPI:ay,shimConstraints:cy,shimCreateOfferLegacy:uy,shimGetUserMedia:sy,shimLocalStreamsAPI:iy,shimRTCIceServerUrls:ly,shimRemoteStreamsAPI:oy,shimTrackEventTransceiver:dy}),py="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",fy=q,my=yr,gy=py,vy=d("".replace),yy=RegExp("^["+gy+"]+"),by=RegExp("(^|[^"+gy+"])["+gy+"]+$"),Ey=function(e){return function(t){var n=my(fy(t));return 1&e&&(n=vy(n,yy,"")),2&e&&(n=vy(n,by,"$1")),n}},wy={start:Ey(1),end:Ey(2),trim:Ey(3)},_y=ws.PROPER,Sy=i,Cy=py,Ty=wy.trim;On({target:"String",proto:!0,forced:function(e){return Sy((function(){return!!Cy[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||_y&&Cy[e].name!==e}))}("trim")},{trim:function(){return Ty(this)}});var Iy=er("String","trim"),Ry=u,xy=Iy,Ny=String.prototype,Oy=function(e){var t=e.trim;return"string"==typeof e||e===Ny||Ry(Ny,e)&&t===Ny.trim?xy:t},ky=r(Oy),Py={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let o=3;o<r.length;o++){const i=r[o],a=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(a){const r=t.parseRtpMap(a),o=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(r.parameters=o.length?t.parseFmtp(o[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{i.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),s=a.length>0&&a[0].ssrc;let c;const l=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));l.length>0&&l[0].length>1&&l[0][0]===s&&(c=l[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&c&&(t.rtx={ssrc:c}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:s,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&s&&n.push({ssrc:s});let d=t.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substring(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=d}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){const e=a[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const o=void 0!==n?n:2;return i=e||t.generateSessionId(),"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t}(Py);var By=Py.exports,Ly=r(By),Dy=e({__proto__:null,default:Ly},[By]);function Uy(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=Ly.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Cv(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function My(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Cv(e,"icecandidate",(e=>{if(e.candidate){const t=Ly.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function Fy(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=Ly.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Ly.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=Ly.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=i(e),n=o(arguments[0],e);let a;a=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>a}),this._sctp=s}return a.apply(this,arguments)}}function jy(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Cv(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Qy(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function Vy(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==ky(e).call(e))).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function Hy(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?nh.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),nh.resolve())})}function zy(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}return e.sdp||"offer"!==e.type&&"answer"!==e.type?n.apply(this,[e]):("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}var Ky=Object.freeze({__proto__:null,removeExtmapAllowMixed:Vy,shimAddIceCandidateNullOrEmpty:Hy,shimConnectionState:Qy,shimMaxMessageSize:Fy,shimParameterlessSetLocalDescription:zy,shimRTCIceCandidate:Uy,shimRTCIceCandidateRelayProtocol:My,shimSendThrowTypeError:jy});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=Rv,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Sv(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Sv(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Sv(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:Ky,extractVersion:Sv,disableLog:Tv,disableWarnings:Iv,sdp:Dy};switch(r.browser){case"chrome":if(!Kv||!Hv||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Kv,Hy(e,r),zy(e),Lv(e,r),Dv(e),Hv(e,r),Uv(e),Vv(e,r),Mv(e),Fv(e),jv(e),zv(e,r),Uy(e),My(e),Qy(e),Fy(e,r),jy(e),Vy(e,r);break;case"firefox":if(!ry||!qv||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=ry,Hy(e,r),zy(e),Gv(e,r),qv(e,r),Wv(e),Jv(e),Yv(e),Xv(e),Zv(e),$v(e),ey(e),ty(e),ny(e),Uy(e),Qy(e),Fy(e,r),jy(e);break;case"safari":if(!hy||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=hy,Hy(e,r),zy(e),ly(e),uy(e),ay(e),iy(e),oy(e),dy(e),sy(e),Ay(e),Uy(e),My(e),Fy(e,r),jy(e),Vy(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var Gy=h;On({global:!0,forced:Gy.globalThis!==Gy},{globalThis:Gy});var Wy=r(h),qy={exports:{}};!function(e,n){!function(t,r){var i="function",o="undefined",a="object",s="string",c="major",l="model",d="name",u="type",A="vendor",h="version",p="architecture",f="console",m="mobile",g="tablet",v="smarttv",y="wearable",b="embedded",E="Amazon",w="Apple",_="ASUS",S="BlackBerry",C="Browser",T="Chrome",I="Firefox",R="Google",x="Huawei",N="LG",O="Microsoft",k="Motorola",P="Opera",B="Samsung",L="Sharp",D="Sony",U="Xiaomi",M="Zebra",F="Facebook",j="Chromium OS",Q="Mac OS",V=" Browser",H=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},z=function(e,t){return typeof e===s&&-1!==K(t).indexOf(K(e))},K=function(e){return e.toLowerCase()},G=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,500)},W=function(e,t){for(var n,o,s,c,l,d,u=0;u<t.length&&!l;){var A=t[u],h=t[u+1];for(n=o=0;n<A.length&&!l&&A[n];)if(l=A[n++].exec(e))for(s=0;s<h.length;s++)d=l[++o],typeof(c=h[s])===a&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,d):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=d?d.replace(c[1],c[2]):r:this[c[0]]=d?c[1].call(this,d,c[2]):r:4===c.length&&(this[c[0]]=d?c[3].call(this,d.replace(c[1],c[2])):r):this[c]=d||r;u+=2}},q=function(e,t){for(var n in t)if(typeof t[n]===a&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(z(t[n][i],e))return"?"===n?r:n}else if(z(t[n],e))return"?"===n?r:n;return t.hasOwnProperty("*")?t["*"]:e},Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,h],[/opios[\/ ]+([\w\.]+)/i],[h,[d,P+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[h,[d,P+" GX"]],[/\bopr\/([\w\.]+)/i],[h,[d,P]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[h,[d,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[h,[d,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,h],[/quark(?:pc)?\/([-\w\.]+)/i],[h,[d,"Quark"]],[/\bddg\/([\w\.]+)/i],[h,[d,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[d,"UC"+C]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[h,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[h,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[h,[d,"Smart Lenovo "+C]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+C],h],[/\bfocus\/([\w\.]+)/i],[h,[d,I+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[d,P+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[d,P+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[d,"MIUI"+V]],[/fxios\/([\w\.-]+)/i],[h,[d,I]],[/\bqihoobrowser\/?([\w\.]*)/i],[h,[d,"360"]],[/\b(qq)\/([\w\.]+)/i],[[d,/(.+)/,"$1Browser"],h],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1"+V],h],[/samsungbrowser\/([\w\.]+)/i],[h,[d,B+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[h,[d,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,"Sogou Mobile"],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[d,h],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[d],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[h,d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,F],h],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[h,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[d,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,T+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[d,"Android "+C]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[h,q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],h],[/(wolvic|librewolf)\/([\w\.]+)/i],[d,h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[d,I+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,[h,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[d,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,K]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",K]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,K]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[A,B],[u,g]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[l,[A,B],[u,m]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[A,w],[u,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[A,w],[u,g]],[/(macintosh);/i],[l,[A,w]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[A,L],[u,m]],[/(?:honor)([-\w ]+)[;\)]/i],[l,[A,"Honor"],[u,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[A,x],[u,g]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[A,x],[u,m]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[l,/_/g," "],[A,U],[u,m]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[A,U],[u,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[A,"OPPO"],[u,m]],[/\b(opd2\d{3}a?) bui/i],[l,[A,"OPPO"],[u,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[A,"Vivo"],[u,m]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[A,"Realme"],[u,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[A,k],[u,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[A,k],[u,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[A,N],[u,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[A,N],[u,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[A,"Lenovo"],[u,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[A,"Nokia"],[u,m]],[/(pixel c)\b/i],[l,[A,R],[u,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[A,R],[u,m]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[A,D],[u,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[A,D],[u,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[A,"OnePlus"],[u,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[A,E],[u,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[A,E],[u,m]],[/(playbook);[-\w\),; ]+(rim)/i],[l,A,[u,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[A,S],[u,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[A,_],[u,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[A,_],[u,m]],[/(nexus 9)/i],[l,[A,"HTC"],[u,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[A,[l,/_/g," "],[u,m]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[l,[A,"TCL"],[u,g]],[/(itel) ((\w+))/i],[[A,K],l,[u,q,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[A,"Acer"],[u,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[A,"Meizu"],[u,m]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[A,"Ulefone"],[u,m]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[l,[A,"Energizer"],[u,m]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[l,[A,"Cat"],[u,m]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[l,[A,"Smartfren"],[u,m]],[/droid.+; (a(?:015|06[35]|142p?))/i],[l,[A,"Nothing"],[u,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[A,l,[u,m]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[A,l,[u,g]],[/(surface duo)/i],[l,[A,O],[u,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[A,"Fairphone"],[u,m]],[/(u304aa)/i],[l,[A,"AT&T"],[u,m]],[/\bsie-(\w*)/i],[l,[A,"Siemens"],[u,m]],[/\b(rct\w+) b/i],[l,[A,"RCA"],[u,g]],[/\b(venue[\d ]{2,7}) b/i],[l,[A,"Dell"],[u,g]],[/\b(q(?:mv|ta)\w+) b/i],[l,[A,"Verizon"],[u,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[A,"Barnes & Noble"],[u,g]],[/\b(tm\d{3}\w+) b/i],[l,[A,"NuVision"],[u,g]],[/\b(k88) b/i],[l,[A,"ZTE"],[u,g]],[/\b(nx\d{3}j) b/i],[l,[A,"ZTE"],[u,m]],[/\b(gen\d{3}) b.+49h/i],[l,[A,"Swiss"],[u,m]],[/\b(zur\d{3}) b/i],[l,[A,"Swiss"],[u,g]],[/\b((zeki)?tb.*\b) b/i],[l,[A,"Zeki"],[u,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[A,"Dragon Touch"],l,[u,g]],[/\b(ns-?\w{0,9}) b/i],[l,[A,"Insignia"],[u,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[A,"NextBook"],[u,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[A,"Voice"],l,[u,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[A,"LvTel"],l,[u,m]],[/\b(ph-1) /i],[l,[A,"Essential"],[u,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[A,"Envizen"],[u,g]],[/\b(trio[-\w\. ]+) b/i],[l,[A,"MachSpeed"],[u,g]],[/\btu_(1491) b/i],[l,[A,"Rotor"],[u,g]],[/(shield[\w ]+) b/i],[l,[A,"Nvidia"],[u,g]],[/(sprint) (\w+)/i],[A,l,[u,m]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[A,O],[u,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[A,M],[u,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[A,M],[u,m]],[/smart-tv.+(samsung)/i],[A,[u,v]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[A,B],[u,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[A,N],[u,v]],[/(apple) ?tv/i],[A,[l,w+" TV"],[u,v]],[/crkey/i],[[l,T+"cast"],[A,R],[u,v]],[/droid.+aft(\w+)( bui|\))/i],[l,[A,E],[u,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[A,L],[u,v]],[/(bravia[\w ]+)( bui|\))/i],[l,[A,D],[u,v]],[/(mitv-\w{5}) bui/i],[l,[A,U],[u,v]],[/Hbbtv.*(technisat) (.*);/i],[A,l,[u,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[A,G],[l,G],[u,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[A,l,[u,f]],[/droid.+; (shield) bui/i],[l,[A,"Nvidia"],[u,f]],[/(playstation [345portablevi]+)/i],[l,[A,D],[u,f]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[A,O],[u,f]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[l,[A,B],[u,y]],[/((pebble))app/i],[A,l,[u,y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[A,w],[u,y]],[/droid.+; (glass) \d/i],[l,[A,R],[u,y]],[/droid.+; (wt63?0{2,3})\)/i],[l,[A,M],[u,y]],[/droid.+; (glass) \d/i],[l,[A,R],[u,y]],[/(pico) (4|neo3(?: link|pro)?)/i],[A,l,[u,y]],[/; (quest( \d| pro)?)/i],[l,[A,F],[u,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[A,[u,b]],[/(aeobc)\b/i],[l,[A,E],[u,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[u,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[u,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,m]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[A,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[d,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[d,h],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,h],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[d,[h,q,Y]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,q,Y],[d,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,Q],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,h],[/\(bb(10);/i],[h,[d,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[d,I+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[h,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[h,[d,T+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,j],h],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,h],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,h]]},J=function(e,n){if(typeof e===a&&(n=e,e=r),!(this instanceof J))return new J(e,n).getResult();var f=typeof t!==o&&t.navigator?t.navigator:r,v=e||(f&&f.userAgent?f.userAgent:""),y=f&&f.userAgentData?f.userAgentData:r,b=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(X,n):X,E=f&&f.userAgent==v;return this.getBrowser=function(){var e={};return e[d]=r,e[h]=r,W.call(e,v,b.browser),e[c]=function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:r}(e[h]),E&&f&&f.brave&&typeof f.brave.isBrave==i&&(e[d]="Brave"),e},this.getCPU=function(){var e={};return e[p]=r,W.call(e,v,b.cpu),e},this.getDevice=function(){var e={};return e[A]=r,e[l]=r,e[u]=r,W.call(e,v,b.device),E&&!e[u]&&y&&y.mobile&&(e[u]=m),E&&"Macintosh"==e[l]&&f&&typeof f.standalone!==o&&f.maxTouchPoints&&f.maxTouchPoints>2&&(e[l]="iPad",e[u]=g),e},this.getEngine=function(){var e={};return e[d]=r,e[h]=r,W.call(e,v,b.engine),e},this.getOS=function(){var e={};return e[d]=r,e[h]=r,W.call(e,v,b.os),E&&!e[d]&&y&&y.platform&&"Unknown"!=y.platform&&(e[d]=y.platform.replace(/chrome os/i,j).replace(/macos/i,Q)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return v},this.setUA=function(e){return v=typeof e===s&&e.length>500?G(e,500):e,this},this.setUA(v),this};J.VERSION="0.7.40",J.BROWSER=H([d,h,c]),J.CPU=H([p]),J.DEVICE=H([l,A,u,f,m,v,g,y,b]),J.ENGINE=J.OS=H([d,h]),e.exports&&(n=e.exports=J),n.UAParser=J;var Z=typeof t!==o&&(t.jQuery||t.Zepto);if(Z&&!Z.ua){var $=new J;Z.ua=$.getResult(),Z.ua.get=function(){return $.getUA()},Z.ua.set=function(e){$.setUA(e);var t=$.getResult();for(var n in t)Z.ua[n]=t[n]}}}("object"==typeof window?window:t)}(qy,qy.exports);var Yy=r(qy.exports),Xy=Dl.clear;On({global:!0,bind:!0,enumerable:!0,forced:h.clearImmediate!==Xy},{clearImmediate:Xy});var Jy=h,Zy=v,$y=I,eb=Yr,tb=ce,nb=al,rb=cl,ib=Jy.Function,ob=/MSIE .\./.test(tb)||"BUN"===eb&&function(){var e=Jy.Bun.version.split(".");return e.length<3||"0"===e[0]&&(e[1]<3||"3"===e[1]&&"0"===e[2])}(),ab=On,sb=h,cb=Dl.set,lb=function(e,t){var n=t?2:1;return ob?function(r,i){var o=rb(arguments.length,1)>n,a=$y(r)?r:ib(r),s=o?nb(arguments,n):[],c=o?function(){Zy(a,this,s)}:a;return t?e(c,i):e(c)}:e},db=sb.setImmediate?lb(cb,!1):cb;ab({global:!0,bind:!0,enumerable:!0,forced:sb.setImmediate!==db},{setImmediate:db});var ub=r(ee.setImmediate),Ab=h,hb=Ad,pb=Oe,fb=cl,mb=x;On({global:!0,enumerable:!0,dontCallGetSet:!0,forced:i((function(){return mb&&1!==Object.getOwnPropertyDescriptor(Ab,"queueMicrotask").value.length}))},{queueMicrotask:function(e){fb(arguments.length,1),hb(pb(e))}});var gb=r(ee.queueMicrotask);function vb(e,t){return function(){return e.apply(t,arguments)}}const{toString:yb}=Object.prototype,{getPrototypeOf:bb}=Object,{iterator:Eb,toStringTag:wb}=Symbol,_b=(Sb=Object.create(null),e=>{const t=yb.call(e);return Sb[t]||(Sb[t]=t.slice(8,-1).toLowerCase())});var Sb;const Cb=e=>(e=e.toLowerCase(),t=>_b(t)===e),Tb=e=>t=>typeof t===e,{isArray:Ib}=Array,Rb=Tb("undefined"),xb=Cb("ArrayBuffer"),Nb=Tb("string"),Ob=Tb("function"),kb=Tb("number"),Pb=e=>null!==e&&"object"==typeof e,Bb=e=>{if("object"!==_b(e))return!1;const t=bb(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||wb in e||Eb in e)},Lb=Cb("Date"),Db=Cb("File"),Ub=Cb("Blob"),Mb=Cb("FileList"),Fb=Cb("URLSearchParams"),[jb,Qb,Vb,Hb]=["ReadableStream","Request","Response","Headers"].map(Cb);function zb(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e)if("object"!=typeof e&&(e=[e]),Ib(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(n=0;n<o;n++)a=r[n],t.call(null,e[a],a,e)}}function Kb(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const Gb=void 0!==Wy?Wy:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,Wb=e=>!Rb(e)&&e!==Gb,qb=(Yb="undefined"!=typeof Uint8Array&&bb(Uint8Array),e=>Yb&&e instanceof Yb);var Yb;const Xb=Cb("HTMLFormElement"),Jb=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Zb=Cb("RegExp"),$b=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};zb(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},eE=Cb("AsyncFunction"),tE=(nE="function"==typeof ub,rE=Ob(Gb.postMessage),nE?ub:rE?(iE="axios@".concat(Math.random()),oE=[],Gb.addEventListener("message",(e=>{let{source:t,data:n}=e;t===Gb&&n===iE&&oE.length&&oE.shift()()}),!1),e=>{oE.push(e),Gb.postMessage(iE,"*")}):e=>setTimeout(e));var nE,rE,iE,oE;const aE=void 0!==gb?gb.bind(Gb):"undefined"!=typeof process&&process.nextTick||tE;var sE={isArray:Ib,isArrayBuffer:xb,isBuffer:function(e){return null!==e&&!Rb(e)&&null!==e.constructor&&!Rb(e.constructor)&&Ob(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Ob(e.append)&&("formdata"===(t=_b(e))||"object"===t&&Ob(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&xb(e.buffer),t},isString:Nb,isNumber:kb,isBoolean:e=>!0===e||!1===e,isObject:Pb,isPlainObject:Bb,isReadableStream:jb,isRequest:Qb,isResponse:Vb,isHeaders:Hb,isUndefined:Rb,isDate:Lb,isFile:Db,isBlob:Ub,isRegExp:Zb,isFunction:Ob,isStream:e=>Pb(e)&&Ob(e.pipe),isURLSearchParams:Fb,isTypedArray:qb,isFileList:Mb,forEach:zb,merge:function e(){const{caseless:t}=Wb(this)&&this||{},n={},r=(r,i)=>{const o=t&&Kb(n,i)||i;Bb(n[o])&&Bb(r)?n[o]=e(n[o],r):Bb(r)?n[o]=e({},r):Ib(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&zb(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return zb(t,((t,r)=>{n&&Ob(t)?e[r]=vb(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>ky(e)?ky(e).call(e):e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,a;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&bb(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:_b,kindOfTest:Cb,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Ib(e))return e;let t=e.length;if(!kb(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Eb]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Xb,hasOwnProperty:Jb,hasOwnProp:Jb,reduceDescriptors:$b,freezeMethods:e=>{$b(e,((t,n)=>{if(Ob(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Ob(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Ib(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Kb,global:Gb,isContextDefined:Wb,isSpecCompliantForm:function(e){return!!(e&&Ob(e.append)&&"FormData"===e[wb]&&e[Eb])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Pb(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=Ib(e)?[]:{};return zb(e,((e,t)=>{const o=n(e,r+1);!Rb(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:eE,isThenable:e=>e&&(Pb(e)||Ob(e))&&Ob(e.then)&&Ob(e.catch),setImmediate:tE,asap:aE,isIterable:e=>null!=e&&Ob(e[Eb])};function cE(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}sE.inherits(cE,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:sE.toJSONObject(this.config),code:this.code,status:this.status}}});const lE=cE.prototype,dE={};function uE(e){return sE.isPlainObject(e)||sE.isArray(e)}function AE(e){return sE.endsWith(e,"[]")?e.slice(0,-2):e}function hE(e,t,n){return e?e.concat(t).map((function(e,t){return e=AE(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{dE[e]={value:e}})),Object.defineProperties(cE,dE),Object.defineProperty(lE,"isAxiosError",{value:!0}),cE.from=(e,t,n,r,i,o)=>{const a=Object.create(lE);return sE.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),cE.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const pE=sE.toFlatObject(sE,{},null,(function(e){return/^is[A-Z]/.test(e)}));function fE(e,t,n){if(!sE.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=sE.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!sE.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&sE.isSpecCompliantForm(t);if(!sE.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(sE.isDate(e))return e.toISOString();if(!s&&sE.isBlob(e))throw new cE("Blob is not supported. Use a Buffer instead.");return sE.isArrayBuffer(e)||sE.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let s=e;if(e&&!i&&"object"==typeof e)if(sE.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(sE.isArray(e)&&function(e){return sE.isArray(e)&&!e.some(uE)}(e)||(sE.isFileList(e)||sE.endsWith(n,"[]"))&&(s=sE.toArray(e)))return n=AE(n),s.forEach((function(e,r){!sE.isUndefined(e)&&null!==e&&t.append(!0===a?hE([n],r,o):null===a?n:n+"[]",c(e))})),!1;return!!uE(e)||(t.append(hE(i,n,o),c(e)),!1)}const d=[],u=Object.assign(pE,{defaultVisitor:l,convertValue:c,isVisitable:uE});if(!sE.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!sE.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),sE.forEach(n,(function(n,o){!0===(!(sE.isUndefined(n)||null===n)&&i.call(t,n,sE.isString(o)?ky(o).call(o):o,r,u))&&e(n,r?r.concat(o):[o])})),d.pop()}}(e),t}function mE(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function gE(e,t){this._pairs=[],e&&fE(e,this,t)}const vE=gE.prototype;function yE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bE(e,t,n){if(!t)return e;const r=n&&n.encode||yE;sE.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(o=i?i(t,n):sE.isURLSearchParams(t)?t.toString():new gE(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}vE.append=function(e,t){this._pairs.push([e,t])},vE.toString=function(e){const t=e?function(t){return e.call(this,t,mE)}:mE;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var EE=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){sE.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},wE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_E={exports:{}},SE=On,CE=x,TE=$t.f;SE({target:"Object",stat:!0,forced:Object.defineProperty!==TE,sham:!CE},{defineProperty:TE});var IE=ee.Object,RE=_E.exports=function(e,t,n){return IE.defineProperty(e,t,n)};IE.defineProperty.sham&&(RE.sham=!0);var xE=r(_E.exports),NE=TypeError,OE=ai,kE=Jc,PE=$,BE=pt("species"),LE=Array,DE=function(e){var t;return OE(e)&&(t=e.constructor,(kE(t)&&(t===LE||OE(t.prototype))||PE(t)&&null===(t=t[BE]))&&(t=void 0)),void 0===t?LE:t},UE=function(e,t){return new(DE(e))(0===t?0:t)},ME=i,FE=fe,jE=pt("species"),QE=function(e){return FE>=51||!ME((function(){var t=[];return(t.constructor={})[jE]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},VE=On,HE=i,zE=ai,KE=$,GE=Je,WE=Kn,qE=function(e){if(e>9007199254740991)throw NE("Maximum allowed index exceeded");return e},YE=Wf,XE=UE,JE=QE,ZE=fe,$E=pt("isConcatSpreadable"),ew=ZE>=51||!HE((function(){var e=[];return e[$E]=!1,e.concat()[0]!==e})),tw=function(e){if(!KE(e))return!1;var t=e[$E];return void 0!==t?!!t:zE(e)};VE({target:"Array",proto:!0,arity:1,forced:!ew||!JE("concat")},{concat:function(e){var t,n,r,i,o,a=GE(this),s=XE(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(tw(o=-1===t?a:arguments[t]))for(i=WE(o),qE(c+i),n=0;n<i;n++,c++)n in o&&YE(s,c,o[n]);else qE(c+1),YE(s,c++,o);return s.length=c,s}});var nw={},rw=w,iw=J,ow=Qi.f,aw=al,sw="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];nw.f=function(e){return sw&&"Window"===rw(e)?function(e){try{return ow(e)}catch(e){return aw(sw)}}(e):ow(iw(e))};var cw={},lw=pt;cw.f=lw;var dw=ee,uw=et,Aw=cw,hw=$t.f,pw=function(e){var t=dw.Symbol||(dw.Symbol={});uw(t,e)||hw(t,e,{value:Aw.f(e)})},fw=k,mw=oe,gw=pt,vw=Ss,yw=function(){var e=mw("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=gw("toPrimitive");t&&!t[r]&&vw(t,r,(function(e){return fw(n,this)}),{arity:1})},bw=Zt,Ew=z,ww=Je,_w=Kn,Sw=UE,Cw=d([].push),Tw=function(e){var t=1===e,n=2===e,r=3===e,i=4===e,o=6===e,a=7===e,s=5===e||o;return function(c,l,d,u){for(var A,h,p=ww(c),f=Ew(p),m=_w(f),g=bw(l,d),v=0,y=u||Sw,b=t?y(c,m):n||a?y(c,0):void 0;m>v;v++)if((s||v in f)&&(h=g(A=f[v],v,p),e))if(t)b[v]=h;else if(h)switch(e){case 3:return!0;case 5:return A;case 6:return v;case 2:Cw(b,A)}else switch(e){case 4:return!1;case 7:Cw(b,A)}return o?-1:r||i?i:b}},Iw={forEach:Tw(0),map:Tw(1),filter:Tw(2),some:Tw(3),every:Tw(4),find:Tw(5),findIndex:Tw(6),filterReject:Tw(7)},Rw=On,xw=h,Nw=k,Ow=d,kw=x,Pw=ye,Bw=i,Lw=et,Dw=u,Uw=on,Mw=J,Fw=St,jw=yr,Qw=F,Vw=Lo,Hw=ho,zw=Qi,Kw=nw,Gw=Zi,Ww=R,qw=$t,Yw=lo,Xw=P,Jw=Ss,Zw=_c,$w=qe,e_=Vi,t_=ot,n_=pt,r_=cw,i_=pw,o_=yw,a_=Hs,s_=ms,c_=Iw.forEach,l_=bi("hidden"),d_="Symbol",u_="prototype",A_=s_.set,h_=s_.getterFor(d_),p_=Object[u_],f_=xw.Symbol,m_=f_&&f_[u_],g_=xw.RangeError,v_=xw.TypeError,y_=xw.QObject,b_=Ww.f,E_=qw.f,w_=Kw.f,__=Xw.f,S_=Ow([].push),C_=$w("symbols"),T_=$w("op-symbols"),I_=$w("wks"),R_=!y_||!y_[u_]||!y_[u_].findChild,x_=function(e,t,n){var r=b_(p_,t);r&&delete p_[t],E_(e,t,n),r&&e!==p_&&E_(p_,t,r)},N_=kw&&Bw((function(){return 7!==Vw(E_({},"a",{get:function(){return E_(this,"a",{value:7}).a}})).a}))?x_:E_,O_=function(e,t){var n=C_[e]=Vw(m_);return A_(n,{type:d_,tag:e,description:t}),kw||(n.description=t),n},k_=function(e,t,n){e===p_&&k_(T_,t,n),Uw(e);var r=Fw(t);return Uw(n),Lw(C_,r)?(n.enumerable?(Lw(e,l_)&&e[l_][r]&&(e[l_][r]=!1),n=Vw(n,{enumerable:Qw(0,!1)})):(Lw(e,l_)||E_(e,l_,Qw(1,Vw(null))),e[l_][r]=!0),N_(e,r,n)):E_(e,r,n)},P_=function(e,t){Uw(e);var n=Mw(t),r=Hw(n).concat(U_(n));return c_(r,(function(t){kw&&!Nw(B_,n,t)||k_(e,t,n[t])})),e},B_=function(e){var t=Fw(e),n=Nw(__,this,t);return!(this===p_&&Lw(C_,t)&&!Lw(T_,t))&&(!(n||!Lw(this,t)||!Lw(C_,t)||Lw(this,l_)&&this[l_][t])||n)},L_=function(e,t){var n=Mw(e),r=Fw(t);if(n!==p_||!Lw(C_,r)||Lw(T_,r)){var i=b_(n,r);return!i||!Lw(C_,r)||Lw(n,l_)&&n[l_][r]||(i.enumerable=!0),i}},D_=function(e){var t=w_(Mw(e)),n=[];return c_(t,(function(e){Lw(C_,e)||Lw(e_,e)||S_(n,e)})),n},U_=function(e){var t=e===p_,n=w_(t?T_:Mw(e)),r=[];return c_(n,(function(e){!Lw(C_,e)||t&&!Lw(p_,e)||S_(r,C_[e])})),r};Pw||(f_=function(){if(Dw(m_,this))throw new v_("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?jw(arguments[0]):void 0,t=t_(e),n=function(e){var r=void 0===this?xw:this;r===p_&&Nw(n,T_,e),Lw(r,l_)&&Lw(r[l_],t)&&(r[l_][t]=!1);var i=Qw(1,e);try{N_(r,t,i)}catch(e){if(!(e instanceof g_))throw e;x_(r,t,i)}};return kw&&R_&&N_(p_,t,{configurable:!0,set:n}),O_(t,e)},Jw(m_=f_[u_],"toString",(function(){return h_(this).tag})),Jw(f_,"withoutSetter",(function(e){return O_(t_(e),e)})),Xw.f=B_,qw.f=k_,Yw.f=P_,Ww.f=L_,zw.f=Kw.f=D_,Gw.f=U_,r_.f=function(e){return O_(n_(e),e)},kw&&Zw(m_,"description",{configurable:!0,get:function(){return h_(this).description}})),Rw({global:!0,constructor:!0,wrap:!0,forced:!Pw,sham:!Pw},{Symbol:f_}),c_(Hw(I_),(function(e){i_(e)})),Rw({target:d_,stat:!0,forced:!Pw},{useSetter:function(){R_=!0},useSimple:function(){R_=!1}}),Rw({target:"Object",stat:!0,forced:!Pw,sham:!kw},{create:function(e,t){return void 0===t?Vw(e):P_(Vw(e),t)},defineProperty:k_,defineProperties:P_,getOwnPropertyDescriptor:L_}),Rw({target:"Object",stat:!0,forced:!Pw},{getOwnPropertyNames:D_}),o_(),a_(f_,d_),e_[l_]=!0;var M_=ye&&!!Symbol.for&&!!Symbol.keyFor,F_=On,j_=oe,Q_=et,V_=yr,H_=qe,z_=M_,K_=H_("string-to-symbol-registry"),G_=H_("symbol-to-string-registry");F_({target:"Symbol",stat:!0,forced:!z_},{for:function(e){var t=V_(e);if(Q_(K_,t))return K_[t];var n=j_("Symbol")(t);return K_[t]=n,G_[n]=t,n}});var W_=On,q_=et,Y_=Ce,X_=Ie,J_=M_,Z_=qe("symbol-to-string-registry");W_({target:"Symbol",stat:!0,forced:!J_},{keyFor:function(e){if(!Y_(e))throw new TypeError(X_(e)+" is not a symbol");if(q_(Z_,e))return Z_[e]}});var $_=ai,eS=I,tS=w,nS=yr,rS=d([].push),iS=On,oS=oe,aS=v,sS=k,cS=d,lS=i,dS=I,uS=Ce,AS=al,hS=function(e){if(eS(e))return e;if($_(e)){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];"string"==typeof i?rS(n,i):"number"!=typeof i&&"Number"!==tS(i)&&"String"!==tS(i)||rS(n,nS(i))}var o=n.length,a=!0;return function(e,t){if(a)return a=!1,t;if($_(this))return t;for(var r=0;r<o;r++)if(n[r]===e)return t}}},pS=ye,fS=String,mS=oS("JSON","stringify"),gS=cS(/./.exec),vS=cS("".charAt),yS=cS("".charCodeAt),bS=cS("".replace),ES=cS(1..toString),wS=/[\uD800-\uDFFF]/g,_S=/^[\uD800-\uDBFF]$/,SS=/^[\uDC00-\uDFFF]$/,CS=!pS||lS((function(){var e=oS("Symbol")("stringify detection");return"[null]"!==mS([e])||"{}"!==mS({a:e})||"{}"!==mS(Object(e))})),TS=lS((function(){return'"\\udf06\\ud834"'!==mS("\udf06\ud834")||'"\\udead"'!==mS("\udead")})),IS=function(e,t){var n=AS(arguments),r=hS(t);if(dS(r)||void 0!==e&&!uS(e))return n[1]=function(e,t){if(dS(r)&&(t=sS(r,this,fS(e),t)),!uS(t))return t},aS(mS,null,n)},RS=function(e,t,n){var r=vS(n,t-1),i=vS(n,t+1);return gS(_S,e)&&!gS(SS,i)||gS(SS,e)&&!gS(_S,r)?"\\u"+ES(yS(e,0),16):e};mS&&iS({target:"JSON",stat:!0,arity:3,forced:CS||TS},{stringify:function(e,t,n){var r=AS(arguments),i=aS(CS?IS:mS,null,r);return TS&&"string"==typeof i?bS(i,wS,RS):i}});var xS=Zi,NS=Je;On({target:"Object",stat:!0,forced:!ye||i((function(){xS.f(1)}))},{getOwnPropertySymbols:function(e){var t=xS.f;return t?t(NS(e)):[]}}),pw("asyncIterator"),pw("hasInstance"),pw("isConcatSpreadable"),pw("iterator"),pw("match"),pw("matchAll"),pw("replace"),pw("search"),pw("species"),pw("split");var OS=yw;pw("toPrimitive"),OS();var kS=oe,PS=Hs;pw("toStringTag"),PS(kS("Symbol"),"Symbol"),pw("unscopables"),Hs(h.JSON,"JSON",!0);var BS=ee.Symbol,LS=pt,DS=$t.f,US=LS("metadata"),MS=Function.prototype;void 0===MS[US]&&DS(MS,US,{value:null}),pw("asyncDispose"),pw("dispose"),pw("metadata");var FS=BS,jS=d,QS=oe("Symbol"),VS=QS.keyFor,HS=jS(QS.prototype.valueOf),zS=QS.isRegisteredSymbol||function(e){try{return void 0!==VS(HS(e))}catch(e){return!1}};On({target:"Symbol",stat:!0},{isRegisteredSymbol:zS});for(var KS=qe,GS=oe,WS=d,qS=Ce,YS=pt,XS=GS("Symbol"),JS=XS.isWellKnownSymbol,ZS=GS("Object","getOwnPropertyNames"),$S=WS(XS.prototype.valueOf),eC=KS("wks"),tC=0,nC=ZS(XS),rC=nC.length;tC<rC;tC++)try{var iC=nC[tC];qS(XS[iC])&&YS(iC)}catch(e){}var oC=function(e){if(JS&&JS(e))return!0;try{for(var t=$S(e),n=0,r=ZS(eC),i=r.length;n<i;n++)if(eC[r[n]]==t)return!0}catch(e){}return!1};On({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:oC}),pw("customMatcher"),pw("observable"),On({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:zS}),On({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:oC}),pw("matcher"),pw("metadataKey"),pw("patternMatch"),pw("replaceAll");var aC=r(FS),sC=r(cw.f("iterator"));function cC(e){return cC="function"==typeof aC&&"symbol"==typeof sC?function(e){return typeof e}:function(e){return e&&"function"==typeof aC&&e.constructor===aC&&e!==aC.prototype?"symbol":typeof e},cC(e)}var lC=r(cw.f("toPrimitive"));function dC(e){var t=function(e,t){if("object"!=cC(e)||!e)return e;var n=e[lC];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cC(t)?t:t+""}function uC(e,t,n){return(t=dC(t))in e?xE(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var AC=r(Rf),hC={isBrowser:!0,classes:{URLSearchParams:void 0!==AC?AC:gE,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const pC="undefined"!=typeof window&&"undefined"!=typeof document,fC="object"==typeof navigator&&navigator||void 0,mC=pC&&(!fC||["ReactNative","NativeScript","NS"].indexOf(fC.product)<0),gC="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,vC=pC&&window.location.href||"http://localhost";function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yC(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var EC=bC(bC({},Object.freeze({__proto__:null,hasBrowserEnv:pC,hasStandardBrowserEnv:mC,hasStandardBrowserWebWorkerEnv:gC,navigator:fC,origin:vC})),hC),wC=on,_C=k,SC=et,CC=u,TC=function(){var e=wC(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},IC=RegExp.prototype,RC=function(e){var t=e.flags;return void 0!==t||"flags"in IC||SC(e,"flags")||!CC(IC,e)?t:_C(TC,e)},xC=jA.charAt,NC=k,OC=on,kC=I,PC=w,BC=/./.exec,LC=TypeError,DC=On,UC=k,MC=C,FC=Xs,jC=hc,QC=q,VC=Hn,HC=yr,zC=on,KC=$,GC=w,WC=or,qC=RC,YC=Be,XC=i,JC=ol,ZC=function(e,t,n){return t+(n?xC(e,t).length:1)},$C=function(e,t){var n=e.exec;if(kC(n)){var r=NC(n,e,t);return null!==r&&OC(r),r}if("RegExp"===PC(e))return NC(BC,e,t);throw new LC("RegExp#exec called on incompatible receiver")},eT=ms,tT=pt("matchAll"),nT="RegExp String",rT=nT+" Iterator",iT=eT.set,oT=eT.getterFor(rT),aT=TypeError,sT=MC("".indexOf),cT=MC("".matchAll),lT=!!cT&&!XC((function(){cT("a",/./)})),dT=FC((function(e,t,n,r){iT(this,{type:rT,regexp:e,string:t,global:n,unicode:r,done:!1})}),nT,(function(){var e=oT(this);if(e.done)return jC(void 0,!0);var t=e.regexp,n=e.string,r=$C(t,n);return null===r?(e.done=!0,jC(void 0,!0)):e.global?(""===HC(r[0])&&(t.lastIndex=ZC(n,VC(t.lastIndex),e.unicode)),jC(r,!1)):(e.done=!0,jC(r,!1))})),uT=function(e){var t,n,r,i=zC(this),o=HC(e),a=JC(i,RegExp),s=HC(qC(i));return t=new a(a===RegExp?i.source:i,s),n=!!~sT(s,"g"),r=!!~sT(s,"u"),t.lastIndex=VC(i.lastIndex),new dT(t,o,n,r)};DC({target:"String",proto:!0,forced:lT},{matchAll:function(e){var t,n,r,i,o=QC(this);if(KC(e)){if(WC(e)&&(t=HC(QC(qC(e))),!~sT(t,"g")))throw new aT("`.matchAll` does not allow non-global regexes");if(lT)return cT(o,e);if(void 0===(r=YC(e,tT))&&"RegExp"===GC(e)&&(r=uT),r)return UC(r,e,o)}else if(lT)return cT(o,e);return n=HC(o),i=new RegExp(e,"g"),UC(uT,i,n)}});var AT=er("String","matchAll"),hT=u,pT=AT,fT=String.prototype,mT=function(e){var t=e.matchAll;return"string"==typeof e||e===fT||hT(fT,e)&&t===fT.matchAll?pT:t},gT=r(mT);function vT(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const a=Number.isFinite(+o),s=i>=e.length;return o=!o&&sE.isArray(r)?r.length:o,s?(sE.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a):(r[o]&&sE.isObject(r[o])||(r[o]=[]),t(e,n,r[o],i)&&sE.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!a)}if(sE.isFormData(e)&&sE.isFunction(e.entries)){const n={};return sE.forEachEntry(e,((e,r)=>{t(function(e){return gT(sE).call(sE,/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const yT={transitional:wE,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=sE.isObject(e);if(i&&sE.isHTMLForm(e)&&(e=new FormData(e)),sE.isFormData(e))return r?JSON.stringify(vT(e)):e;if(sE.isArrayBuffer(e)||sE.isBuffer(e)||sE.isStream(e)||sE.isFile(e)||sE.isBlob(e)||sE.isReadableStream(e))return e;if(sE.isArrayBufferView(e))return e.buffer;if(sE.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return fE(e,new EC.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return EC.isNode&&sE.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=sE.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return fE(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(sE.isString(e))try{return(t||JSON.parse)(e),ky(sE).call(sE,e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||yT.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(sE.isResponse(e)||sE.isReadableStream(e))return e;if(e&&sE.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw cE.from(e,cE.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:EC.classes.FormData,Blob:EC.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};sE.forEach(["delete","get","head","post","put","patch"],(e=>{yT.headers[e]={}}));var bT=yT;const ET=sE.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wT=Symbol("internals");function _T(e){var t;return e&&ky(t=String(e)).call(t).toLowerCase()}function ST(e){return!1===e||null==e?e:sE.isArray(e)?e.map(ST):String(e)}function CT(e,t,n,r,i){return sE.isFunction(r)?r.call(this,t,n):(i&&(t=n),sE.isString(t)?sE.isString(r)?-1!==t.indexOf(r):sE.isRegExp(r)?r.test(t):void 0:void 0)}class TT{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=_T(t);if(!i)throw new Error("header name must be a non-empty string");const o=sE.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=ST(e))}const o=(e,t)=>sE.forEach(e,((e,n)=>i(e,n,t)));if(sE.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(sE.isString(e)&&(e=ky(e).call(e))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(ky(a=e).call(a)))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){var o,a;i=e.indexOf(":"),n=ky(o=e.substring(0,i)).call(o).toLowerCase(),r=ky(a=e.substring(i+1)).call(a),!n||t[n]&&ET[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(sE.isObject(e)&&sE.isIterable(e)){let n,r,i={};for(const t of e){if(!sE.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?sE.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(i,t)}else null!=e&&i(t,e,n);var a;return this}get(e,t){if(e=_T(e)){const n=sE.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(sE.isFunction(t))return t.call(this,e,n);if(sE.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=_T(e)){const n=sE.findKey(this,e);return!(!n||void 0===this[n]||t&&!CT(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=_T(e)){const i=sE.findKey(n,e);!i||t&&!CT(0,n[i],i,t)||(delete n[i],r=!0)}}return sE.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!CT(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return sE.forEach(this,((r,i)=>{var o;const a=sE.findKey(n,i);if(a)return t[a]=ST(r),void delete t[i];const s=e?function(e){return ky(e).call(e).toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):ky(o=String(i)).call(o);s!==i&&delete t[i],t[s]=ST(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return sE.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&sE.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[wT]=this[wT]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=_T(e);t[r]||(function(e,t){const n=sE.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return sE.isArray(e)?e.forEach(r):r(e),this}}TT.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),sE.reduceDescriptors(TT.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),sE.freezeMethods(TT);var IT=TT;function RT(e,t){const n=this||bT,r=t||n,i=IT.from(r.headers);let o=r.data;return sE.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function xT(e){return!(!e||!e.__CANCEL__)}function NT(e,t,n){cE.call(this,null==e?"canceled":e,cE.ERR_CANCELED,t,n),this.name="CanceledError"}function OT(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new cE("Request failed with status code "+n.status,[cE.ERR_BAD_REQUEST,cE.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}sE.inherits(NT,cE,{__CANCEL__:!0});const kT=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,a=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),l=r[a];i||(i=c),n[o]=s,r[o]=c;let d=a,u=0;for(;d!==o;)u+=n[d++],d%=e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),c-i<t)return;const A=l&&c-l;return A?Math.round(1e3*u/A):void 0}}(50,250);return function(e,t){let n,r,i=0,o=1e3/t;const a=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];t>=o?a(c,e):(n=c,r||(r=setTimeout((()=>{r=null,a(n)}),o-t)))},()=>n&&a(n)]}((n=>{const o=n.loaded,a=n.lengthComputable?n.total:void 0,s=o-r,c=i(s);r=o,e({loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&o<=a?(a-o)/c:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},PT=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},BT=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return sE.asap((()=>e(...n)))};var LT=EC.hasStandardBrowserEnv?((e,t)=>n=>(n=new Ev(n,EC.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new Ev(EC.origin),EC.navigator&&/(msie|trident)/i.test(EC.navigator.userAgent)):()=>!0,DT=EC.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const a=[e+"="+encodeURIComponent(t)];sE.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),sE.isString(r)&&a.push("path="+r),sE.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function UT(e,t,n){let r=!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}function MT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const FT=e=>e instanceof IT?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MT(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e):e;function jT(e,t){t=t||{};const n={};function r(e,t,n,r){return sE.isPlainObject(e)&&sE.isPlainObject(t)?sE.merge.call({caseless:r},e,t):sE.isPlainObject(t)?sE.merge({},t):sE.isArray(t)?t.slice():t}function i(e,t,n,i){return sE.isUndefined(t)?sE.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function o(e,t){if(!sE.isUndefined(t))return r(void 0,t)}function a(e,t){return sE.isUndefined(t)?sE.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t,n)=>i(FT(e),FT(t),0,!0)};return sE.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=c[r]||i,a=o(e[r],t[r],r);sE.isUndefined(a)&&o!==s||(n[r]=a)})),n}var QT=e=>{const t=jT({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:s,auth:c}=t;if(t.headers=s=IT.from(s),t.url=bE(UT(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&s.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),sE.isFormData(r))if(EC.hasStandardBrowserEnv||EC.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>ky(e).call(e))).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(EC.hasStandardBrowserEnv&&(i&&sE.isFunction(i)&&(i=i(t)),i||!1!==i&&LT(t.url))){const e=o&&a&&DT.read(a);e&&s.set(o,e)}return t},VT="undefined"!=typeof XMLHttpRequest&&function(e){return new nh((function(t,n){const r=QT(e);let i=r.data;const o=IT.from(r.headers).normalize();let a,s,c,l,d,{responseType:u,onUploadProgress:A,onDownloadProgress:h}=r;function p(){l&&l(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let f=new XMLHttpRequest;function m(){if(!f)return;const r=IT.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());OT((function(e){t(e),p()}),(function(e){n(e),p()}),{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=m:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(m)},f.onabort=function(){f&&(n(new cE("Request aborted",cE.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new cE("Network Error",cE.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||wE;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new cE(t,i.clarifyTimeoutError?cE.ETIMEDOUT:cE.ECONNABORTED,e,f)),f=null},void 0===i&&o.setContentType(null),"setRequestHeader"in f&&sE.forEach(o.toJSON(),(function(e,t){f.setRequestHeader(t,e)})),sE.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),u&&"json"!==u&&(f.responseType=r.responseType),h&&([c,d]=kT(h,!0),f.addEventListener("progress",c)),A&&f.upload&&([s,l]=kT(A),f.upload.addEventListener("progress",s),f.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(a=t=>{f&&(n(!t||t.type?new NT(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);g&&-1===EC.protocols.indexOf(g)?n(new cE("Unsupported protocol "+g+":",cE.ERR_BAD_REQUEST,e)):f.send(i||null)}))},HT=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof cE?t:new NT(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,i(new cE("timeout ".concat(t," of ms exceeded"),cE.ETIMEDOUT))}),t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:s}=r;return s.unsubscribe=()=>sE.asap(a),s}},zT=r(th),KT=cw.f("asyncIterator"),GT=r(KT);function WT(e,t){this.v=e,this.k=t}function qT(e){return function(){return new YT(e.apply(this,arguments))}}function YT(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof WT;zT.resolve(s?a.v:a).then((function(n){if(s){var c="return"===t?"return":"next";if(!a.k||n.done)return r(c,n);n=e[c](n).value}i(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new zT((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function XT(e){return new WT(e,0)}function JT(e){var t={},n=!1;function r(t,r){return n=!0,r=new zT((function(n){n(e[t](r))})),{done:!1,value:new WT(r,1)}}return t[void 0!==aC&&sC||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}YT.prototype["function"==typeof aC&&GT||"@@asyncIterator"]=function(){return this},YT.prototype.next=function(e){return this._invoke("next",e)},YT.prototype.throw=function(e){return this._invoke("throw",e)},YT.prototype.return=function(e){return this._invoke("return",e)};var ZT=r(KT);function $T(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=ZT,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new eI(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function eI(e){function t(e){if(Object(e)!==e)return nh.reject(new TypeError(e+" is not an object."));var t=e.done;return nh.resolve(e.value).then((function(e){return{value:e,done:t}}))}return eI=function(e){this.s=e,this.n=e.next},eI.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?nh.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?nh.reject(e):t(n.apply(this.s,arguments))}},new eI(e)}const tI=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},nI=function(){var e=qT((function*(e,t){var n,r=!1,i=!1;try{for(var o,a=$T(rI(e));r=!(o=yield XT(a.next())).done;r=!1){const e=o.value;yield*JT($T(tI(e,t)))}}catch(e){i=!0,n=e}finally{try{r&&null!=a.return&&(yield XT(a.return()))}finally{if(i)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),rI=function(){var e=qT((function*(e){if(e[ZT])return void(yield*JT($T(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield XT(t.read());if(e)break;yield n}}finally{yield XT(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),iI=(e,t,n,r)=>{const i=nI(e,t);let o,a=0,s=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return s(),void e.close();let o=r.byteLength;if(n){let e=a+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw s(e),e}},cancel:e=>(s(e),i.return())},{highWaterMark:2})};function oI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oI(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const sI="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,cI=sI&&"function"==typeof ReadableStream,lI=sI&&("function"==typeof TextEncoder?(dI=new TextEncoder,e=>dI.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var dI;const uI=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(e){return!1}},AI=cI&&uI((()=>{let e=!1;const t=new Request(EC.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),hI=cI&&uI((()=>sE.isReadableStream(new Response("").body))),pI={stream:hI&&(e=>e.body)};var fI;sI&&(fI=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!pI[e]&&(pI[e]=sE.isFunction(fI[e])?t=>t[e]():(t,n)=>{throw new cE("Response type '".concat(e,"' is not supported"),cE.ERR_NOT_SUPPORT,n)})})));const mI=async(e,t)=>{const n=sE.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(sE.isBlob(e))return e.size;if(sE.isSpecCompliantForm(e)){const t=new Request(EC.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return sE.isArrayBufferView(e)||sE.isArrayBuffer(e)?e.byteLength:(sE.isURLSearchParams(e)&&(e+=""),sE.isString(e)?(await lI(e)).byteLength:void 0)})(t):n};var gI=sI&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:l,headers:d,withCredentials:u="same-origin",fetchOptions:A}=QT(e);l=l?(l+"").toLowerCase():"text";let h,p=HT([i,o&&o.toAbortSignal()],a);const f=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let m;try{if(c&&AI&&"get"!==n&&"head"!==n&&0!==(m=await mI(d,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(sE.isFormData(r)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=PT(m,kT(BT(c)));r=iI(n.body,65536,e,t)}}sE.isString(u)||(u=u?"include":"omit");const i="credentials"in Request.prototype;h=new Request(t,aI(aI({},A),{},{signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:i?u:void 0}));let o=await fetch(h);const a=hI&&("stream"===l||"response"===l);if(hI&&(s||a&&f)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=sE.toFiniteNumber(o.headers.get("content-length")),[n,r]=s&&PT(t,kT(BT(s),!0))||[];o=new Response(iI(o.body,65536,n,(()=>{r&&r(),f&&f()})),e)}l=l||"text";let g=await pI[sE.findKey(pI,l)||"text"](o,e);return!a&&f&&f(),await new nh(((t,n)=>{OT(t,n,{data:g,headers:IT.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:h})}))}catch(t){if(f&&f(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new cE("Network Error",cE.ERR_NETWORK,e,h),{cause:t.cause||t});throw cE.from(t,t&&t.code,e,h)}});const vI={http:null,xhr:VT,fetch:gI};sE.forEach(vI,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const yI=e=>"- ".concat(e),bI=e=>sE.isFunction(e)||null===e||!1===e;var EI={getAdapter:e=>{e=sE.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!bI(n)&&(r=vI[(t=String(n)).toLowerCase()],void 0===r))throw new cE("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));throw new cE("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(yI).join("\n"):" "+yI(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r},adapters:vI};function wI(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new NT(null,e)}function _I(e){return wI(e),e.headers=IT.from(e.headers),e.data=RT.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),EI.getAdapter(e.adapter||bT.adapter)(e).then((function(t){return wI(e),t.data=RT.call(e,e.transformResponse,t),t.headers=IT.from(t.headers),t}),(function(t){return xT(t)||(wI(e),t&&t.response&&(t.response.data=RT.call(e,e.transformResponse,t.response),t.response.headers=IT.from(t.response.headers))),nh.reject(t)}))}const SI="1.9.0",CI={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{CI[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const TI={};CI.transitional=function(e,t,n){function r(e,t){return"[Axios v"+SI+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new cE(r(i," has been removed"+(t?" in "+t:"")),cE.ERR_DEPRECATED);return t&&!TI[i]&&(TI[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}},CI.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};var II={assertOptions:function(e,t,n){if("object"!=typeof e)throw new cE("options must be an object",cE.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],a=t[o];if(a){const t=e[o],n=void 0===t||a(t,o,e);if(!0!==n)throw new cE("option "+o+" must be "+n,cE.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new cE("Unknown option "+o,cE.ERR_BAD_OPTION)}},validators:CI};const RI=II.validators;let xI=class{constructor(e){this.defaults=e||{},this.interceptors={request:new EE,response:new EE}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=jT(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&II.assertOptions(n,{silentJSONParsing:RI.transitional(RI.boolean),forcedJSONParsing:RI.transitional(RI.boolean),clarifyTimeoutError:RI.transitional(RI.boolean)},!1),null!=r&&(sE.isFunction(r)?t.paramsSerializer={serialize:r}:II.assertOptions(r,{encode:RI.function,serialize:RI.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),II.assertOptions(t,{baseUrl:RI.spelling("baseURL"),withXsrfToken:RI.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&sE.merge(i.common,i[t.method]);i&&sE.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=IT.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let d,u=0;if(!s){const e=[_I.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,c),d=e.length,l=nh.resolve(t);u<d;)l=l.then(e[u++],e[u++]);return l}d=a.length;let A=t;for(u=0;u<d;){const t=a[u++],n=a[u++];try{A=t(A)}catch(e){n.call(this,e);break}}try{l=_I.call(this,A)}catch(e){return nh.reject(e)}for(u=0,d=c.length;u<d;)l=l.then(c[u++],c[u++]);return l}getUri(e){return bE(UT((e=jT(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};sE.forEach(["delete","get","head","options"],(function(e){xI.prototype[e]=function(t,n){return this.request(jT(n||{},{method:e,url:t,data:(n||{}).data}))}})),sE.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(jT(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}xI.prototype[e]=t(),xI.prototype[e+"Form"]=t(!0)}));var NI=xI;class OI{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new nh((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new nh((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new NT(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new OI((function(t){e=t})),cancel:e}}}var kI=OI;const PI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(PI).forEach((e=>{let[t,n]=e;PI[n]=t}));var BI=PI;const LI=function e(t){const n=new NI(t),r=vb(NI.prototype.request,n);return sE.extend(r,NI.prototype,n,{allOwnKeys:!0}),sE.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(jT(t,n))},r}(bT);LI.Axios=NI,LI.CanceledError=NT,LI.CancelToken=kI,LI.isCancel=xT,LI.VERSION=SI,LI.toFormData=fE,LI.AxiosError=cE,LI.Cancel=LI.CanceledError,LI.all=function(e){return nh.all(e)},LI.spread=function(e){return function(t){return e.apply(null,t)}},LI.isAxiosError=function(e){return sE.isObject(e)&&!0===e.isAxiosError},LI.mergeConfig=jT,LI.AxiosHeaders=IT,LI.formToJSON=e=>vT(sE.isHTMLForm(e)?new FormData(e):e),LI.getAdapter=EI.getAdapter,LI.HttpStatusCode=BI,LI.default=LI;var DI=LI;const UI=()=>{};function MI(){const e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:UI};return e.promise=new nh(((t,n)=>{e.resolve=n=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=t=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,n(t))}})),e}const FI=new Map,jI=new Map,QI=new Map;let VI=function(e){return e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot",e}({}),HI=function(e){return e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger",e}({});const zI=new Yy;let KI=zI.getResult(),GI=null;function WI(e){if(!GI){e&&zI.setUA(e),KI=zI.getResult();const t=function(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return HI.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return HI.CHROME;case"Safari":case"Mobile Safari":return HI.SAFARI;case"Edge":return HI.EDGE;case"Firefox":return HI.FIREFOX;case"QQ":case"QQBrowser":return HI.QQ;case"Opera":return HI.OPERA;case"WeChat":return HI.WECHAT;default:return e.browser.name||""}}(KI),n=qI(KI),r=function(e){return"Windows"===e.os.name?e.os.version?e.os.name+" "+e.os.version:e.os.name:e.os.name||""}(KI),i=KI.os.version,o=qI(KI,!1),a=KI.device.type;if(!(t&&n&&r&&i))return{name:t,version:n,os:r,osVersion:i,browserVersion:o,deviceType:a};GI={name:t,version:n,os:r,osVersion:i,browserVersion:o,deviceType:a}}return GI}function qI(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t="Blink"===e.engine.name?e.engine.version||"":e.browser.version||"",n?t.split(".")[0]:t}function YI(){return WI().os}function XI(){const e=WI();return"".concat(e.os," ").concat(e.osVersion)}function JI(){const e=WI();return!!("WebKit"===KI.engine.name&&e.os===VI.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==HI.SAFARI||nR()&&e.name!==HI.SAFARI)}function ZI(){return WI().name===HI.CHROME}function $I(){return WI().name===HI.SAFARI}function eR(){return WI().name===HI.EDGE}function tR(){return WI().name===HI.FIREFOX}function nR(){return WI().os===VI.IOS}function rR(e){const t=WI();return!(t.name!==HI.CHROME||!t.osVersion)&&Number(t.version)>=e}function iR(e){const t=WI();return!(t.name!==HI.CHROME||!t.osVersion)&&Number(t.version)<e}function oR(e,t,n){const r=WI();return!(r.name!==e||!r.osVersion)&&(n?Number(r.version)>=t&&Number(r.version)<=n:Number(r.version)===t)}function aR(e){const t=WI();return!(t.name!==HI.EDGE||!t.osVersion)&&Number(t.version)>=e}function sR(e){const t=WI();return!(t.name!==HI.SAFARI||!t.osVersion)&&Number(t.version)>=e}function cR(e,t,n){const r=WI();if(r.os!==VI.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}function lR(e,t,n){const r=WI();if(r.name!==HI.SAFARI||!r.osVersion||!r.browserVersion)return!1;const i=r.browserVersion.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}function dR(e){const t=WI();return!(t.name!==HI.OPERA||!t.osVersion)&&Number(t.version)>=e}function uR(){const e=WI();if(e.os!==VI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function AR(){const e=WI();if(e.os!==VI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])}function hR(){const e=WI();if(e.os!==VI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 16===Number(t[0])}function pR(){const e=WI();if(e.os!==VI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function fR(){return $I()&&navigator.maxTouchPoints>0}function mR(){return WI().name===HI.WECHAT}function gR(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function vR(){const e=YI();return function(){const{deviceType:e}=WI();return"mobile"===e||"tablet"===e}()||e===VI.ANDROID||e===VI.IOS||e===VI.HARMONY_OS}function yR(){const e=WI();return e.name!==HI.EDGE&&e.name!==HI.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function bR(){return YI()===VI.ANDROID}function ER(){const e=WI();return bR()&&(e.name===HI.CHROME||e.name===HI.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function wR(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_R(Object(n),!0).forEach((function(t){wR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let CR=function(e){return e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",e}({}),TR=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;super(t),wR(this,"code",void 0),wR(this,"message",void 0),wR(this,"data",void 0),wR(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=n}toString(){return this.data?"".concat(this.message,"\ndata: ").concat(JSON.stringify(this.data)):this.message}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return"error"===e&&(t||console).error(this.toString()),"warning"===e&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function IR(e,t){if("boolean"!=typeof e)throw new TR(CR.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function RR(e,t,n){if(!Br(n).call(n,e))throw new TR(CR.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(n)))}function xR(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<n||e>r||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!function(e){return"number"==typeof e&&e%1==0}(e))throw new TR(CR.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}function NR(e,t){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new TR(CR.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));void 0!==e.min&&xR(e.min,"".concat(t,".min"),0,1/0),void 0!==e.max&&xR(e.max,"".concat(t,".max"),1,1/0),void 0!==e.exact&&xR(e.exact,"".concat(t,".exact"),1,1/0),void 0!==e.ideal&&xR(e.ideal,"".concat(t,".ideal"),1,1/0)}else xR(e,t,1,1/0)}function OR(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new TR(CR.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!BR(e,n,r,i))throw new TR(CR.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))}function kR(e,t){if(!Array.isArray(e))throw new TR(CR.INVALID_PARAMS,"".concat(t," should be an array"))}function PR(e){return null==e}function BR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&e.length<=n&&e.length>=t&&(!r||function(e){if("string"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}(e))}var LR=function(e){return e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE",e}(LR||{}),DR=function(e){return e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",e}(DR||{});const UR=new class{constructor(){wR(this,"_clientSize",null),wR(this,"getClientWidth",(()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth)),wR(this,"getClientHeight",(()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight)),wR(this,"getStyle",(e=>window.getComputedStyle(e,null))),wR(this,"checkCssVisibleProperty",(e=>{var t;let n=!0;const r=this.getStyle(e),{display:i,visibility:o,opacity:a,filter:s}=r;return("none"===i||Br(t=["hidden","collapse"]).call(t,o)||Number(a)<.1)&&(n=!1),!!n&&(s&&s.split(" ").filter((e=>{var t;const n=e.split("(")[0];return Br(t=["brightness","blur","opacity"]).call(t,n)})).map((e=>{const[t,n]=e.split(/\(|\)/);return[t,Number(n.match(/^[0-9\.]+/))]})).forEach((e=>{const[t,r]=e;switch(t){case"brightness":(r<.1||r>3)&&(n=!1);break;case"blur":r>3&&(n=!1);break;case"opacity":r<.1&&(n=!1)}})),n)})),wR(this,"checkPropertyUpToAllParentNodes",((e,t)=>{let n=!0,r=!0;const i=e=>t(e);let o=e;for(;o&&r;)i(o)||(n=!1,r=!1),o=o.parentElement,o||(r=!1);return n})),wR(this,"checkActualCssVisibleIncludeInherit",(e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty))),wR(this,"getSizeAboutClient",(e=>{const{width:t,height:n,left:r,right:i,top:o,bottom:a}=e.getBoundingClientRect(),s=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:n,left:r,right:i,top:o,bottom:a,clientWidth:s,clientHeight:c,clientMin:Math.min(s,c)}})),wR(this,"checkActualSize",(()=>{const{width:e,height:t,clientMin:n}=this._clientSize;return this.checkSizeIsVisible(e,t,n)})),wR(this,"elementFromPoint",((e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null)),wR(this,"checkCoverForAPoint",((e,t,n)=>{const r=this.elementFromPoint(e,t);return null!==r&&r!==n})),wR(this,"getPointPositionList",(()=>{const{width:e,height:t,left:n,top:r}=this._clientSize,i=e/6,o=t/6,a=[],s=10**6;for(let c=0;c<5;c++)for(let e=0;e<5;e++){const t=(n*s+(0===c?.1:4===c?(i*c*s-1e5)/s:i*c)*s)/s,l=(r*s+(0===e?.1:4===e?(o*e*s-1e5)/s:o*e)*s)/s;a.push({x:t,y:l})}return[...a]})),wR(this,"checkElementCover",(e=>this.getPointPositionList().map((t=>this.checkCoverForAPoint(t.x,t.y,e))).filter((e=>!!e)).length>6)),wR(this,"checkSizeIsVisible",((e,t,n)=>(e>50||n/e<=10)&&(t>50||n/t<=10))),wR(this,"checkSizeOfPartInClient",(()=>{const{left:e,right:t,top:n,bottom:r,clientHeight:i,clientWidth:o,clientMin:a}=this._clientSize;let s,c,l,d;if(e<0)s=0;else{if(!(e<o))return!1;s=e}if(t<0)return!1;if(c=t<o?t:o,n<0)l=0;else{if(!(n<i))return!1;l=n}if(r<0)return!1;d=r<i?r:i;const u=c-s,A=d-l;return this.checkSizeIsVisible(u,A,a)})),wR(this,"returnHiddenResult",(e=>(this._clientSize=null,{visible:!1,reason:e}))),wR(this,"checkOneElementVisible",(e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(LR.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(LR.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(LR.SIZE)}}return this.returnHiddenResult(LR.STYLE)}return this.returnHiddenResult(DR.UNMOUNTED)}return this.returnHiddenResult(DR.INVALID_HTML_ELEMENT)})),wR(this,"checkElementIsMountedOnDom",(e=>this.checkPropertyUpToAllParentNodes(e,(e=>"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement))))}};function MR(e){return(new TextEncoder).encode(e)}const FR=function(e,t){const n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n},jR=async e=>function(e,t){let n="";return new Uint8Array(e).forEach((e=>{n+=e.toString(t).padStart(2,"0")})),n}(await crypto.subtle.digest("SHA-256",MR(e)),16);let QR=class{constructor(){wR(this,"_events",{}),wR(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map((e=>e.listener)):[]}on(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const t=this._events[e].map((e=>e));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(let o=0;o<t.length;o+=1){const n=t[o];n.once&&this.off(e,n.listener),n.listener.apply(this,r||[])}}safeEmit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];[...this._events[e]||[]].forEach((t=>{t.once&&this.off(e,t.listener);try{t.listener.apply(this,n)}catch(t){console.error("safeEmit event:".concat(e," error ").concat(null==t?void 0:t.toString()))}}))}_indexOfListener(e,t){let n=e.length;for(;n--;)if(e[n].listener===t)return n;return-1}},VR=null;function HR(){if(VR)return VR;if(window.electron)return VR=window.electron;if(!window.require)return null;try{return VR=window.require("electron"),VR}catch(e){return null}}let zR=function(e){return e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.PRELOAD="PRELOAD",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload",e.REPUB_AFTER_PC_CONNECTED="repubAfterPCConnected",e}({}),KR=function(e){return e.TRACER="tracer",e}({});function GR(e){return xR(e.timeout,"config.timeout",0,1e5),xR(e.timeoutFactor,"config.timeoutFactor",0,100,!1),xR(e.maxRetryCount,"config.maxRetryConfig",0,1/0),xR(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}let WR=function(e){return e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",e}({}),qR=function(e){return e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.FALLBACK="FALLBACK",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e}({});function YR(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((e=>{if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function XR(e){return OR(e.turnServerURL,"turnServerURL"),OR(e.username,"username"),OR(e.password,"password"),e.udpport&&xR(e.udpport,"udpport",1,99999,!0),e.forceturn&&IR(e.forceturn,"forceturn"),e.security&&IR(e.security,"security"),e.tcpport&&xR(e.tcpport,"tcpport",1,99999,!0),!0}function JR(e){return void 0!==e.level&&RR(e.level,"level",[1,2,3]),void 0!==e.delay&&xR(e.delay,"delay",0,3e3,!0),!0}let ZR=function(e){return e.PEERCONNECTION_STATE_CHANGE="peerconnection-state-change",e.AUDIO_METADATA="audio-metadata",e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",e}({}),$R=function(e){return e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK",e.REGIONAL_DISTRIBUTION="REGIONAL_DISTRIBUTION",e}({}),ex=function(e){return e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({}),tx=function(e){return e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({});function nx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return 0===e.getListeners(t).length?nh.reject(new TR(CR.UNEXPECTED_ERROR,"can not emit promise")):new nh(((n,i)=>{e.emit(t,...r,n,i)}))}function rx(e,t){if(0===e.getListeners(t).length)return nh.resolve();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return nx(e,t,...r)}function ix(e,t){if(0===e.getListeners(t).length)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return ox(e,t,...r)}function ox(e,t){let n=null,r=null;for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if(e.emit(t,...o,(e=>{n=e}),(e=>{r=e})),null!==r)throw r;if(null===n)throw new TR(CR.UNEXPECTED_ERROR,"handler is not sync");return n}const ax=new class extends QR{set networkState(e){this.emit(tx.NETWORK_STATE_CHANGE,e,this._networkState),e===ex.ONLINE?this.emit(tx.ONLINE):e===ex.OFFLINE&&(this.onlineWaiter=new nh((e=>{this.once(tx.ONLINE,(()=>{this.onlineWaiter=void 0,e(ex.ONLINE)}))})),this.emit(tx.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===ex.ONLINE}constructor(){super(),wR(this,"_moduleName","network-indicator"),wR(this,"_networkState",ex.ONLINE),wR(this,"onlineWaiter",void 0),window.addEventListener("online",(()=>{this.networkState=ex.ONLINE})),window.addEventListener("offline",(()=>{this.networkState=ex.OFFLINE}))}};function sx(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}function cx(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),t}function lx(e){void 0!==nh?nh.resolve().then(e):setTimeout(e,0)}function dx(e){return JSON.parse(JSON.stringify(e))}function ux(e){try{return dx(e)}catch(t){return e}}const Ax={};function hx(e,t){Ax[t]||(Ax[t]=!0,e())}function px(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}function fx(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}function mx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=(new TextEncoder).encode(e);if(n.length>t)n=n.slice(0,t);else if(n.length<t){const e=new Uint8Array(t);e.set(n),n=e}return n}function gx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=ii(t).call(t,((e,t)=>e+t.length),0),i=new Uint8Array(new ArrayBuffer(r));let o=0;return t.forEach((e=>{i.set(e,o),o+=e.length})),i}function vx(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function yx(e){let t=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&e.realFormData&&(e=e.realFormData),e.forEach((e=>{t+="string"==typeof e?vx(e):e.size})),t+138}function bx(e){const t=new TR(CR.TIMEOUT,"timeout");return new nh(((n,r)=>{window.setTimeout((()=>r(t)),e)}))}function Ex(e){return new nh((t=>{window.setTimeout(t,e)}))}function wx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;const n=Math.random().toString(16).substr(2,e).toLowerCase();return n.length===e?"".concat(t).concat(n):"".concat(t).concat(n)+wx(e-n.length,"")}function _x(){return wx(32,"").toUpperCase()}const Sx=()=>{},Cx=new class{constructor(){wR(this,"fnMap",new Map)}throttleByKey(e,t,n,r){for(var i=arguments.length,o=new Array(i>4?i-4:0),a=4;a<i;a++)o[a-4]=arguments[a];if(this.fnMap.has(t)){const i=this.fnMap.get(t);if(i.threshold!==n){i.fn(...i.args),clearTimeout(i.timer);const a=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:a,args:o,skipFn:r})}else i.skipFn&&i.skipFn(...i.args),this.fnMap.set(t,SR(SR({},i),{},{fn:e,args:o,skipFn:r}))}else{const i=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:i,args:o,skipFn:r})}}},Tx=Cx.throttleByKey.bind(Cx);function Ix(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}function Rx(e,t){if(!Ix(e)||!Ix(t))return t;if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){const n=[...e];for(let r=0;r<t.length;r++)n[r]=Rx(e[r],t[r]);return n}{const n=SR({},e);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)?n[r]=Rx(e[r],t[r]):n[r]=t[r]);return n}}function xx(e,t){let n=[0];if(t&&(n=new Array(t).fill(0)),0===e)return n;let r=0;for(;e>0&&(n[r]=255&e,e>>=8,r++,!t||r!==t););return n}function Nx(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function Ox(e){return ii(e).call(e,((e,t)=>e+t),0)}function kx(e){const t="0123456789abcdef";function n(e){let n,r="";for(n=0;n<=3;n++)r+=t.charAt(e>>8*n+4&15)+t.charAt(e>>8*n&15);return r}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,o,a){return r(function(e,t){return e<<t|e>>>32-t}(r(r(t,e),r(i,a)),o),n)}function o(e,t,n,r,o,a,s){return i(t&n|~t&r,e,t,o,a,s)}function a(e,t,n,r,o,a,s){return i(t&r|n&~r,e,t,o,a,s)}function s(e,t,n,r,o,a,s){return i(t^n^r,e,t,o,a,s)}function c(e,t,n,r,o,a,s){return i(n^(t|~r),e,t,o,a,s)}const l=function(e){let t;const n=1+(e.length+8>>6),r=new Array(16*n);for(t=0;t<16*n;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<t%4*8;return r[t>>2]|=128<<t%4*8,r[16*n-2]=8*e.length,r}(e);let d,u,A,h,p,f=1732584193,m=-271733879,g=-1732584194,v=271733878;for(d=0;d<l.length;d+=16)u=f,A=m,h=g,p=v,f=o(f,m,g,v,l[d+0],7,-680876936),v=o(v,f,m,g,l[d+1],12,-389564586),g=o(g,v,f,m,l[d+2],17,606105819),m=o(m,g,v,f,l[d+3],22,-1044525330),f=o(f,m,g,v,l[d+4],7,-176418897),v=o(v,f,m,g,l[d+5],12,1200080426),g=o(g,v,f,m,l[d+6],17,-1473231341),m=o(m,g,v,f,l[d+7],22,-45705983),f=o(f,m,g,v,l[d+8],7,1770035416),v=o(v,f,m,g,l[d+9],12,-1958414417),g=o(g,v,f,m,l[d+10],17,-42063),m=o(m,g,v,f,l[d+11],22,-1990404162),f=o(f,m,g,v,l[d+12],7,1804603682),v=o(v,f,m,g,l[d+13],12,-40341101),g=o(g,v,f,m,l[d+14],17,-1502002290),m=o(m,g,v,f,l[d+15],22,1236535329),f=a(f,m,g,v,l[d+1],5,-165796510),v=a(v,f,m,g,l[d+6],9,-1069501632),g=a(g,v,f,m,l[d+11],14,643717713),m=a(m,g,v,f,l[d+0],20,-373897302),f=a(f,m,g,v,l[d+5],5,-701558691),v=a(v,f,m,g,l[d+10],9,38016083),g=a(g,v,f,m,l[d+15],14,-660478335),m=a(m,g,v,f,l[d+4],20,-405537848),f=a(f,m,g,v,l[d+9],5,568446438),v=a(v,f,m,g,l[d+14],9,-1019803690),g=a(g,v,f,m,l[d+3],14,-187363961),m=a(m,g,v,f,l[d+8],20,1163531501),f=a(f,m,g,v,l[d+13],5,-1444681467),v=a(v,f,m,g,l[d+2],9,-51403784),g=a(g,v,f,m,l[d+7],14,1735328473),m=a(m,g,v,f,l[d+12],20,-1926607734),f=s(f,m,g,v,l[d+5],4,-378558),v=s(v,f,m,g,l[d+8],11,-2022574463),g=s(g,v,f,m,l[d+11],16,1839030562),m=s(m,g,v,f,l[d+14],23,-35309556),f=s(f,m,g,v,l[d+1],4,-1530992060),v=s(v,f,m,g,l[d+4],11,1272893353),g=s(g,v,f,m,l[d+7],16,-155497632),m=s(m,g,v,f,l[d+10],23,-1094730640),f=s(f,m,g,v,l[d+13],4,681279174),v=s(v,f,m,g,l[d+0],11,-358537222),g=s(g,v,f,m,l[d+3],16,-722521979),m=s(m,g,v,f,l[d+6],23,76029189),f=s(f,m,g,v,l[d+9],4,-640364487),v=s(v,f,m,g,l[d+12],11,-421815835),g=s(g,v,f,m,l[d+15],16,530742520),m=s(m,g,v,f,l[d+2],23,-995338651),f=c(f,m,g,v,l[d+0],6,-198630844),v=c(v,f,m,g,l[d+7],10,1126891415),g=c(g,v,f,m,l[d+14],15,-1416354905),m=c(m,g,v,f,l[d+5],21,-57434055),f=c(f,m,g,v,l[d+12],6,1700485571),v=c(v,f,m,g,l[d+3],10,-1894986606),g=c(g,v,f,m,l[d+10],15,-1051523),m=c(m,g,v,f,l[d+1],21,-2054922799),f=c(f,m,g,v,l[d+8],6,1873313359),v=c(v,f,m,g,l[d+15],10,-30611744),g=c(g,v,f,m,l[d+6],15,-1560198380),m=c(m,g,v,f,l[d+13],21,1309151649),f=c(f,m,g,v,l[d+4],6,-145523070),v=c(v,f,m,g,l[d+11],10,-1120210379),g=c(g,v,f,m,l[d+2],15,718787259),m=c(m,g,v,f,l[d+9],21,-343485551),f=r(f,u),m=r(m,A),g=r(g,h),v=r(v,p);return n(f)+n(m)+n(g)+n(v)}let Px=1,Bx=console,Lx=class{static setLogger(e){Bx=e}constructor(e,t){wR(this,"id",void 0),wR(this,"lockingPromise",nh.resolve()),wR(this,"locks",0),wR(this,"name",""),wR(this,"lockId",void 0),this.lockId=Px++,e&&(this.name=e),t&&(this.id=t),this.logger("created")}logger(e,t){const n=(this.id?"[".concat(this.id,"]"):"")+"[lock-".concat(this.name,"-").concat(this.lockId,"]"),r="created"===e?"is ".concat(e,"."):"is ".concat(e,", current queue ").concat(this.locks,". ").concat(null!=t?t:"");Bx.debug("".concat(n," ").concat(r))}setId(e){this.id=e}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,this.logger("locked",e);const n=new nh((n=>{t=()=>{this.locks-=1,this.logger("unlocked",e),n()}})),r=this.lockingPromise.then((()=>t));return this.lockingPromise=this.lockingPromise.then((()=>n)),r}};function Dx(e,t){return function(n,r,i){const o=i.value;if("function"!=typeof o)throw new Error("Cannot use mutex on object property.");return i.value=async function(){const n=this[t];if(!n)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));const i=await n.lock("From ".concat(e,".").concat(r));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await o.apply(this,s)}finally{i()}},i}}const Ux={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Mx(e,t){const n=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,n)}function Fx(e,t,n,r){const i=Object.assign({},Ux,r);let o=i.timeout;const a=async()=>{await function(e){return new nh((t=>{window.setTimeout(t,e)}))}(o),o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o)};let s=!1;const c=new nh((async(r,o)=>{t=t||(()=>!1),n=n||(()=>!0);for(let c=0;c<i.maxRetryCount;c+=1){if(s)return o(new TR(CR.OPERATION_ABORTED));try{const n=await e();if(!t(n,c))return r(n);if(c+1===i.maxRetryCount)return r(n);await a()}catch(e){if(!n(e,c))return o(e);if(c+1===i.maxRetryCount)return o(e);await a()}}}));return c.cancel=()=>s=!0,c}let jx,Qx=class{constructor(e){wR(this,"input",[]),wR(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return 0===this.input.length?0:ii(e=this.input).call(e,((e,t)=>e+t))/this.input.length}},Vx=0,Hx=0;function zx(e,t,n,r){return new nh(((i,o)=>{t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),Vx+=vx(t.data)):n&&(t.data.size?Vx+=t.data.size:t.data instanceof FormData?Vx+=yx(t.data):Vx+=vx(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,DI.request(t).then((e=>{"string"==typeof e.data?Hx+=vx(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?Hx+=e.data.byteLength:Hx+=vx(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((e=>{DI.isCancel(e)?o(new TR(CR.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new TR(CR.NETWORK_TIMEOUT,e.message)):e.response?o(new TR(CR.NETWORK_RESPONSE_ERROR,e.response.status)):o(new TR(CR.NETWORK_ERROR,e.message))}))}))}async function Kx(e,t){const n=new Blob([t.data],{type:"buffer"});return await zx(e,SR(SR({},t),{},{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}const Gx=()=>void 0!==window.isSecureContext;function Wx(e){if(Array.isArray(e))return e.map((e=>e));if(!qx(e))return e;const t={};for(const n in e){const r=e[n];qx(r)||Array.isArray(r)?t[n]=Wx(r):t[n]=r}return t}function qx(e){return!("object"!=typeof e||Array.isArray(e)||!e)}let Yx=class{constructor(e){wR(this,"input",[]),wR(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}};const Xx={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},Jx={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:Xx,remoteCandidate:Xx},updateInterval:0},Zx={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0,packetsDiscarded:0,framesAssembledFromMultiplePackets:0,totalProcessingDelay:0,avgDecodeMs:0,avgFramesAssembledFromMultiplePacketsMs:0,avgProcessingDelayMs:0,avgInterFrameDelayMs:0,totalAssemblyTime:0},$x={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},eN={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},tN={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0,totalSamplesReceived:0,silentConcealedSamples:0,concealmentEvents:0,freezeMs80:0,freezeMs200:0,freezeSamples80:0,freezeSamples200:0};let nN=class{constructor(e,t){wR(this,"onFirstVideoReceived",void 0),wR(this,"onFirstVideoDecoded",void 0),wR(this,"onFirstAudioReceived",void 0),wR(this,"onFirstVideoDecodedTimeout",void 0),wR(this,"onFirstAudioDecoded",void 0),wR(this,"onSelectedLocalCandidateChanged",void 0),wR(this,"onSelectedRemoteCandidateChanged",void 0),wR(this,"videoIsReady",!1),wR(this,"videoIsReady2",{}),wR(this,"pc",void 0),wR(this,"options",void 0),wR(this,"intervalTimer",void 0),wR(this,"stats",Wx(Jx)),wR(this,"isFirstVideoReceived",{}),wR(this,"isFirstVideoDecoded",{}),wR(this,"isFirstAudioReceived",{}),wR(this,"isFirstAudioDecoded",{}),wR(this,"isFirstVideoDecodedTimeout",{}),wR(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval((async()=>{this.updateStats()}),this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new nh((e=>{e({local:SR({},Xx),remote:SR({},Xx)})}))}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const t=this.lossRateWindowStats.length,n=["videoSend","audioSend","videoRecv","audioRecv"];let r=0,i=0,o=0,a=0;for(const s of n)e[s].forEach(((e,n)=>{if(!this.lossRateWindowStats[t-1][s][n]||!this.lossRateWindowStats[0][s][n])return;const c=this.lossRateWindowStats[t-1][s][n].packets-this.lossRateWindowStats[0][s][n].packets,l=this.lossRateWindowStats[t-1][s][n].packetsLost-this.lossRateWindowStats[0][s][n].packetsLost;"videoSend"===s||"audioSend"===s?(r+=c,o+=l):(i+=c,a+=l),Number.isNaN(c)||Number.isNaN(c)?e.packetLostRate=0:e.packetLostRate=c<=0||l<=0?0:l/(c+l)}));e.sendPacketLossRate=r<=0||o<=0?0:o/(r+o),e.recvPacketLossRate=i<=0||a<=0?0:a/(i+a)}},rN=class extends nN{constructor(){super(...arguments),wR(this,"_stats",Jx),wR(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=Wx(Jx);const n=t.filter((e=>"ssrc"===e.type));this.processSSRCStats(n);const r=t.find((e=>"VideoBwe"===e.type));r&&this.processBandwidthStats(r),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach((e=>{var t;const n=Br(t=e.id).call(t,"send");switch("".concat(e.mediaType,"_").concat(n?"send":"recv")){case"video_send":{const t=Wx($x);t.codec=e.googCodecName,t.adaptionChangeReason="none",e.googCpuLimitedResolution&&(t.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(t.adaptionChangeReason="bandwidth"),t.avgEncodeMs=Number(e.googAvgEncodeMs),t.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.firsCount=Number(e.googFirReceived),t.nacksCount=Number(e.googNacksReceived),t.plisCount=Number(e.googPlisReceived),t.frameCount=Number(e.framesEncoded),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.videoSend.push(t),this._stats.rtt=t.rttMs;break}case"video_recv":{const t=Wx(Zx),n=this.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(t.codec=e.googCodecName,t.targetDelayMs=Number(e.googTargetDelayMs),t.renderDelayMs=Number(e.googRenderDelayMs),t.currentDelayMs=Number(e.googCurrentDelayMs),t.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),t.decodeMs=Number(e.googDecodeMs),t.maxDecodeMs=Number(e.googMaxDecodeMs),t.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},t.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},t.decodeFrameRate=Number(e.googFrameRateDecoded),t.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},t.jitterBufferMs=Number(e.googJitterBufferMs),t.firsCount=Number(e.googFirsSent),t.nacksCount=Number(e.googNacksSent),t.plisCount=Number(e.googPlisSent),t.framesDecodeCount=Number(e.framesDecoded),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,t.decodedFrame.width,t.decodedFrame.height),this.isFirstVideoDecoded[t.ssrc]=!0),n){const r=n.stats,i=Date.now()-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=i,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc,10))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<n.stats.framesDecodeCount&&(t.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:SR({},t),lts:Date.now()}),this._stats.videoRecv.push(t);break}case"audio_recv":{const t=Wx(tN);t.codec=e.googCodecName,t.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,t.decodingCNG=Number(e.googDecodingCNG),t.decodingCTN=Number(e.googDecodingCTN),t.decodingCTSG=Number(e.googDecodingCTSG),t.decodingNormal=Number(e.googDecodingNormal),t.decodingPLC=Number(e.googDecodingPLC),t.decodingPLCCNG=Number(e.googDecodingPLCCNG),t.expandRate=Number(e.googExpandRate),t.accelerateRate=Number(e.googAccelerateRate),t.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),t.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),t.speechExpandRate=Number(e.googSpeechExpandRate),t.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),t.jitterBufferMs=Number(e.googJitterBufferMs),t.jitterMs=Number(e.googJitterReceived),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),t.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.decodingNormal>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),this._stats.audioRecv.push(t);break}case"audio_send":{const t=Wx(eN);t.codec=e.googCodecName,t.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,t.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),t.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),t.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),t.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.rtt=t.rttMs,this._stats.audioSend.push(t);break}}}))}_getStats(){return new nh(((e,t)=>{this.pc.getStats(e,t)}))}statsResponsesToObjects(e){const t=[];return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t.push(n)})),t}},iN=function(e){return e.BANDWIDTH="bandwidth",e.CPU="cpu",e.NONE="none",e.OTHER="other",e}({}),oN=function(e){return e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L1T3_KEY="L1T3_KEY",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY",e}({}),aN=function(e){return e[e.new=0]="new",e[e.connecting=1]="connecting",e[e.connected=2]="connected",e[e.disconnected=3]="disconnected",e[e.failed=4]="failed",e[e.closed=5]="closed",e}({}),sN=function(e){return e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver",e}({});var cN=function(e){return e[e.kNone=1]="kNone",e[e.kMillisecondsFromSeconds=1e3]="kMillisecondsFromSeconds",e[e.kBytesToBits=8]="kBytesToBits",e}(cN||{});function lN(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cN.kNone;if(!t)return;const o=Number(t[n]);if("number"!=typeof o)return;const a=Number(t[r]);if("number"!=typeof a)return;if(!e)return a?o/a*i:void 0;const s=Number(e[n]);if("number"!=typeof s)return;const c=Number(e[r]);if("number"!=typeof c)return;const l=a-c;return l?(o-s)/l*i:void 0}let dN=class extends nN{constructor(){super(...arguments),wR(this,"_stats",Jx),wR(this,"report",void 0),wR(this,"lastDecodeVideoReceiverStats",new Map),wR(this,"lastVideoFramesRecv",new Map),wR(this,"lastVideoFramesSent",new Map),wR(this,"lastVideoFramesDecode",new Map),wR(this,"lastVideoFramesOutput",new Map),wR(this,"lastVideoJBDelay",new Map),wR(this,"lastAudioJBDelay",new Map),wR(this,"mediaBytesSent",new Map),wR(this,"mediaBytesRetransmit",new Map),wR(this,"mediaBytesTargetEncode",new Map),wR(this,"lastDecodeAudioReceiverStats",new Map),wR(this,"lastAudioConcealment",new Map),wR(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=Wx(Jx),this.report.forEach((e=>{switch(e.type){case sN.OUTBOUND:case sN.INBOUND:{const t=e.mediaType||e.kind,n=!t&&"frameWidth"in e,r=!t&&!("frameWidth"in e);e.type===sN.OUTBOUND?"audio"===t||r?this.processAudioOutboundStats(e):("video"===t||n)&&this.processVideoOutboundStats(e):e.type===sN.INBOUND&&("audio"===t||r?this.processAudioInboundStats(e):("video"===t||n)&&this.processVideoInboundStats(e));break}case sN.TRANSPORT:{const t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case sN.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.updateInterval=Date.now()-this.stats.timestamp,this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const e=await this.pc.getStats(),t={local:SR({},Xx),remote:SR({},Xx)};return e.forEach((n=>{let r;if(n.type===sN.TRANSPORT&&(r=e.get(n.selectedCandidatePairId)),n.type===sN.CANDIDATE_PAIR&&n.selected&&(r=n),r){const n=(e,t)=>{e.type=t.type,e.id=t.id,t.address&&(e.address=t.address),t.candidateType&&(e.candidateType=t.candidateType),t.port&&(e.port=t.port),t.priority&&(e.priority=t.priority),t.protocol&&(e.protocol=t.protocol),t.relayProtocol&&(e.relayProtocol=t.relayProtocol)};if(r.localCandidateId){const i=e.get(r.localCandidateId);i&&n(t.local,i)}if(r.remoteCandidateId){const i=e.get(r.remoteCandidateId);i&&n(t.remote,i)}}})),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){const t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){const t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===sN.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===sN.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===sN.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(SR({},t),SR({},this.stats.selectedCandidatePair.localCandidate)),e.type===sN.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(SR({},t),SR({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find((t=>t.ssrc===e.ssrc));t||(t=Wx(tN),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.packetsDiscarded=e.packetsDiscarded,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,t.retransmittedBytesReceived=e.retransmittedBytesReceived,t.retransmittedPacketsReceived=e.retransmittedPacketsReceived,t.totalProcessingDelay=e.totalProcessingDelay,t.jitterBufferEmittedCount=e.jitterBufferEmittedCount;const n=this.lastDecodeAudioReceiverStats.get(t.ssrc);t.avgProcessingDelayMs=lN(n,t,"totalProcessingDelay","jitterBufferEmittedCount",cN.kMillisecondsFromSeconds),this.processAudioTrackReceiverStats(e,e.trackId,t),this.calculateAudioFreeze(t,n,e),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),"number"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples),this.lastDecodeAudioReceiverStats.set(t.ssrc,SR({},t))}calculateAudioFreeze(e,t,n){const r=this.lastAudioConcealment.get(e.ssrc);if(null!=t&&null!=r){const i=r.lts,o=n.timestamp,a=o-i;if(a<=0)return;const s=e.concealedSamples-t.concealedSamples-0,c=r.nonSilent+s,l=e.totalSamplesReceived-t.totalSamplesReceived;if(l<=0)return;const d=80*l/a,u=200*l/a,A=a/l;let h=0;e.freezeSamples80=t.freezeSamples80,e.freezeMs80=t.freezeMs80,c>d&&(r.plc80>0?(e.freezeSamples80+=s,e.freezeMs80+=Math.round(s*A)):(e.freezeSamples80+=c,e.freezeMs80+=Math.round(c*A)),h=r.plc80+1);let p=0;e.freezeSamples200=t.freezeSamples200,e.freezeMs200=t.freezeMs200,c>u&&(r.plc200>0?(e.freezeSamples200+=s,e.freezeMs200+=Math.round(s*A)):(e.freezeSamples200+=c,e.freezeMs200+=Math.round(c*A)),p=r.plc200+1),this.lastAudioConcealment.set(e.ssrc,{nonSilent:s,lts:o,plc80:h,plc200:p})}else e.freezeSamples80=0,e.freezeSamples200=0,e.freezeMs80=0,e.freezeMs200=0,this.lastAudioConcealment.set(e.ssrc,{nonSilent:0,lts:n.timestamp,plc80:0,plc200:0})}processVideoInboundStats(e){let t=this._stats.videoRecv.find((t=>t.ssrc===e.ssrc));t||(t=Wx(Zx),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.framesDroppedCount=e.framesDropped,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay,t.totalFreezesDuration=e.totalFreezesDuration,t.totalProcessingDelay=e.totalProcessingDelay,t.packetsDiscarded=e.packetsDiscarded,t.framesAssembledFromMultiplePackets=e.framesAssembledFromMultiplePackets,t.totalAssemblyTime=e.totalAssemblyTime,t.keyFramesDecoded=e.keyFramesDecoded,t.retransmittedBytesReceived=e.retransmittedBytesReceived,t.retransmittedPacketsReceived=e.retransmittedPacketsReceived;const n=this.lastDecodeVideoReceiverStats.get(t.ssrc),r=this.lastVideoFramesDecode.get(t.ssrc),i=this.lastVideoFramesOutput.get(t.ssrc),o=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){const e=t.decodedFrame?t.decodedFrame.width:0,n=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,e,n),this.isFirstVideoDecoded[t.ssrc]=!0}if(n){const r=n.stats,i=o-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&i>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=i,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<r.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(n.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-n.qpSum)/(e.framesDecoded-n.stats.framesDecodeCount))}e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime,t.avgDecodeMs=lN(null==n?void 0:n.stats,t,"decodeMs","framesDecodeCount")),t.avgProcessingDelayMs=lN(null==n?void 0:n.stats,t,"totalProcessingDelay","framesDecodeCount",cN.kMillisecondsFromSeconds),t.avgFramesAssembledFromMultiplePacketsMs=lN(null==n?void 0:n.stats,t,"totalAssemblyTime","framesAssembledFromMultiplePackets",cN.kMillisecondsFromSeconds),t.avgInterFrameDelayMs=lN(null==n?void 0:n.stats,t,"totalInterFrameDelay","framesDecodeCount",cN.kMillisecondsFromSeconds),r&&o-r.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-r.count)/((o-r.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:t.decodeFrameRate})):r?t.decodeFrameRate=r.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:0}),t.framesDroppedCount&&e.framesReceived&&(i&&o-i.lts>=800?(t.outputFrameRate=Math.round((e.framesReceived-t.framesDroppedCount-i.count)/((o-i.lts)/1e3)),this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:Math.max(t.outputFrameRate,0)})):i?t.outputFrameRate=i.rate:this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:0})),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:SR({},t),lts:n?n.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find((t=>t.ssrc===e.ssrc));t||(t=Wx($x),this._stats.videoSend.push(t));const n=this.mediaBytesSent.get(e.ssrc);if(n)n.add(e.bytesSent);else{const t=new Yx(10);t.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,t)}if(void 0!==e.retransmittedBytesSent){const t=this.mediaBytesRetransmit.get(e.ssrc);if(t)t.add(e.retransmittedBytesSent);else{const t=new Yx(10);t.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,t)}}if(e.totalEncodedBytesTarget){const t=this.mediaBytesTargetEncode.get(e.ssrc);if(t)t.add(e.totalEncodedBytesTarget);else{const t=new Yx(10);t.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,t)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,t.retransmittedBytesSent=e.retransmittedBytesSent,t.retransmittedPacketsSent=e.retransmittedPacketsSent,t.hugeFramesSent=e.hugeFramesSent,t.keyFramesEncoded=e.keyFramesEncoded,t.targetBitrate=e.targetBitrate,e.totalEncodeTime&&e.framesEncoded){const n=this.lastEncoderMs.get(e.ssrc);if(!n||n.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{const r=e.framesEncoded-n.lastFrameCount,i=e.totalEncodeTime-n.lastEncoderTime;t.avgEncodeMs=1e3*i/r}}if(e.framesEncoded&&e.qpSum){const n=this.lastEncoderMs.get(e.ssrc);!n||n.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-n.lastQpSum)/(e.framesEncoded-n.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,sN.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find((t=>t.ssrc===e.ssrc));if(t||(t=Wx(eN),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,t.retransmittedBytesSent=e.retransmittedBytesSent,t.retransmittedPacketsSent=e.retransmittedPacketsSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,sN.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}findRemoteStatsId(e,t){var n;const r=Array.from(uh(n=this.report).call(n)).find((n=>n.type===t&&n.ssrc===e));return r?r.id:null}processVideoMediaSource(e,t){const n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})}processAudioMediaSource(e,t){const n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)}processVideoTrackSenderStats(e,t,n){var r,i,o,a;const s=t?this.report.get(t):void 0,c=null!==(r=null==s?void 0:s.framesSent)&&void 0!==r?r:e.framesSent;if("number"!=typeof c)return;let l=null!==(i=null==s?void 0:s.frameWidth)&&void 0!==i?i:e.frameWidth,d=null!==(o=null==s?void 0:s.frameHeight)&&void 0!==o?o:e.frameHeight,u=null!==(a=null==s?void 0:s.framesPerSecond)&&void 0!==a?a:e.framesPerSecond;if("number"==typeof l&&"number"==typeof d||(l=0,d=0),null==u){const e=Date.now(),t=this.lastVideoFramesSent.get(n.ssrc);t&&e-t.lts>=800?(u=Math.round((c-t.count)/((e-t.lts)/1e3)),this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:u})):t?u=t.rate:this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:0})}n.sentFrame={width:l,height:d,frameRate:Math.max(0,u)}}processVideoTrackReceiverStats(e,t,n){var r,i,o,a,s;const c=t?this.report.get(t):void 0,l=null!==(r=null==c?void 0:c.framesReceived)&&void 0!==r?r:e.framesReceived,d=null!==(i=null==c?void 0:c.frameWidth)&&void 0!==i?i:e.frameWidth,u=null!==(o=null==c?void 0:c.frameHeight)&&void 0!==o?o:e.frameHeight,A=null!==(a=null==c?void 0:c.jitterBufferDelay)&&void 0!==a?a:e.jitterBufferDelay,h=null!==(s=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==s?s:e.jitterBufferEmittedCount;if("number"==typeof l){const e=this.lastVideoFramesRecv.get(n.ssrc),t=Date.now();n.framesReceivedCount=l;let r=0;e&&t-e.lts>=800?(r=Math.round((l-e.count)/((t-e.lts)/1e3)),this.lastVideoFramesRecv.set(n.ssrc,{count:l,lts:t,rate:r})):e?r=e.rate:this.lastVideoFramesRecv.set(n.ssrc,{count:l,lts:t,rate:0}),n.receivedFrame={width:d||0,height:u||0,frameRate:r||0},n.decodedFrame={width:d||0,height:u||0,frameRate:n.decodeFrameRate||0},n.outputFrame={width:d||0,height:u||0,frameRate:n.outputFrameRate||n.decodeFrameRate||0}}if(A&&h){const e=this.lastVideoJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=h-e.jitterBufferEmittedCount;r>0&&(t=1e3*(A-e.jitterBufferDelay)/r),n.jitterBufferMs=t,n.currentDelayMs=Math.round(t),this.lastVideoJBDelay.set(n.ssrc,{jitterBufferDelay:A,jitterBufferEmittedCount:h,jitterBufferMs:n.currentDelayMs})}}processAudioTrackSenderStats(e,t,n){var r,i,o,a;const s=t?this.report.get(t):void 0,c=null!==(r=null!==(i=null==s?void 0:s.echoReturnLoss)&&void 0!==i?i:e.echoReturnLoss)&&void 0!==r?r:0,l=null!==(o=null!==(a=null==s?void 0:s.echoReturnLossEnhancement)&&void 0!==a?a:e.echoReturnLossEnhancement)&&void 0!==o?o:0;n.aecReturnLoss=c,n.aecReturnLossEnhancement=l}processAudioTrackReceiverStats(e,t,n){var r,i,o,a,s,c,l,d,u;const A=t?this.report.get(t):void 0,h=null!==(r=null==A?void 0:A.removedSamplesForAcceleration)&&void 0!==r?r:e.removedSamplesForAcceleration,p=null!==(i=null==A?void 0:A.totalSamplesReceived)&&void 0!==i?i:e.totalSamplesReceived,f=null!==(o=null==A?void 0:A.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,m=null!==(a=null==A?void 0:A.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount,g=null!==(s=null==A?void 0:A.audioLevel)&&void 0!==s?s:null==e?void 0:e.audioLevel,v=null!==(c=null==A?void 0:A.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,y=null!==(l=null==A?void 0:A.concealedSamples)&&void 0!==l?l:e.concealedSamples,b=null!==(d=null==A?void 0:A.silentConcealedSamples)&&void 0!==d?d:e.silentConcealedSamples,E=null!==(u=null==A?void 0:A.concealmentEvents)&&void 0!==u?u:e.concealmentEvents;if("number"==typeof p&&(n.totalSamplesReceived=p),"number"==typeof b&&(n.silentConcealedSamples=b),"number"==typeof E&&(n.concealmentEvents=E),"number"==typeof y&&(n.concealedSamples=y),h&&p&&(n.accelerateRate=h/p),f&&m){const e=this.lastAudioJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=m-e.jitterBufferEmittedCount;r>0&&(t=1e3*(f-e.jitterBufferDelay)/r),n.jitterBufferMs=Math.round(t),this.lastAudioJBDelay.set(n.ssrc,{jitterBufferDelay:f,jitterBufferEmittedCount:m,jitterBufferMs:n.jitterBufferMs})}n.outputLevel=g;let w=1920;v&&p&&(w=p/v/50,n.receivedFrames=Math.round(p/w)),y&&(n.droppedFrames=Math.round(y/w))}processRemoteInboundStats(e,t){const n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime),n.jitter&&(t.jitterMs=1e3*n.jitter),n.timestamp&&(t.timestamp=n.timestamp))}getCodecFromCodecStats(e){const t=this.report.get(e);if(!t)return"";const n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""}updateSendBitrate(){let e=0,t=null,n=null;this.mediaBytesSent.forEach((t=>{e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((e=>{t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((e=>{n=null===n?e.diffMean():n+e.diffMean()}));const r=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*r/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))}},uN=class extends nN{updateStats(){return nh.resolve()}};function AN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4;const o=function(){const e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return e&&e[0]?Number(e[0].split("/")[1]):null}();return o?o<76?new rN(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new dN(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):function(e){if(!window.RTCStatsReport)return!1;const t=e.getStats();return!!(t instanceof nh||function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(t))}(e)?new dN(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new uN(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i})}const hN="websdk_ng_install_id";function pN(){try{if(CN("INSTALL_ID"))return CN("INSTALL_ID");let e=window.localStorage.getItem(hN);return e||(e=_x(),window.localStorage.setItem(hN,e)),SN("INSTALL_ID",e),e}catch(e){return}}const fN=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-([0-9]+)/);if(t&&t[1]&&t[2]){const e=t[1],n=t[2];return"".concat(e,".").concat(n)}return"4.0.0.999"}("4.23.4"),mN=function(){try{return!0===JSON.parse("true")}catch(e){return!0}}();let gN=function(e){return e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn",e}({});const vN=function(){const e="us".concat("erna","me"),t="pa".concat("sswo","rd"),n=["t","s","t"];n.splice(1,0,"e");const r=n.join(""),i=[];for(let s=0;s<6;s++)i.push("1");const o=i.join(""),a={};return a[e]=r,a[t]=o,Object.assign(a,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=vN;const yN={ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC_DEFAULT_CODECS:["H264","VP8","VP9","AV1"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:2,ENABLE_AUT_FEEDBACK:!1,SVC_EXTENDED:["VP9"]},bN={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},EN="v4.23.4-0-g17410532-dirty(6/5/2025, 4:24:52 PM)",wN={ENABLE_EVENT_REPORT:!0,UPLOAD_LOG:!1,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,ENABLE_PRELOAD:!0,NEW_ICE_RESTART:!1,ICE_RESTART_INTERVAL:1e4,RESTART_SEQUENCE:["udp_tcp_relay","relay"],FIRST_TCP_CANDIDATE:!1,FIRST_TCP_CANDIDATE_INTERVAL:1e3,TURN_DOMAIN:"edge.agora.io",USE_TURN_IP:!1,NEW_TURN_MODE:void 0,NEW_FORCE_TURN:!1,USE_NEW_RENDER_FREEZE_TIME:!1},_N=SR(SR(SR(SR({},wN),{},{PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,SHOW_REPORT_USER_INVOKER_LOG:!0,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,FIRST_H264_PROFILE_LEVEL_ID:"42001f",FIRST_PACKETIZATION_MODE:"",X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,FINGERPRINT:null,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,ENABLE_AUDIO_TOPN:!1,ENABLE_AUDIO_METADATA:!1,ENABLE_AUDIO_PTS_METADATA:!1,TOPN_SMOOTH_LEVEL:void 0,TOPN_NEW_SPEAKER_DELAY:void 0,TOPN_SWITCH_HOLD_MS:void 0,TOPN_AUDIO_GAIN:void 0,TOPN_SILENCE_THRESHOLD:250,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ENABLE_AUDIO_RED:!1,OPUS_PTIME:void 0,AUDIO_DUPLICATE_NUM:void 0,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:bN,CUSTOM_ADAPTATION_DEFAULT_MODE:"",HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,DISABLE_SCREEN_SHARE_REMB:!1},yN),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1,AP_REQUEST_DETAIL:void 0,ENABLE_ROLE_SELECT_EDGE:!1,CLIENT_ROLE_OPTIONS:void 0,COMPATIBLE_SDP_EXTENSION:["gdpr_forbidden"],LIMIT_BITRATE:void 0,EXPERIMENTS:{},USE_PUB_RTX:!0,USE_SUB_RTX:!0,ENABLE_DATASTREAM_2:!1,USE_XR:!0,ENABLE_PREALLOC_PC:!1,ENABLE_PRE_SUB:!1,ENABLE_SVC:!1},{INSTALL_ID:""}),{},{K_MIN_RENDER_DELAY:66,USE_STANDARD_BITRATE_DEFAULT:!1,VIDEO_NEW_BITRATE_RATIO:void 0,VIDEO_STANDARD_BITRATE_VERSION:void 0,BASELINE_MORE_H264_BITRATE_RATIO:1.1});function SN(e,t,n){var r,i,o;Br(r=Object.keys(_N)).call(r,e)&&(!n&&Br(i=Object.keys(IN)).call(i,e)||(_N[e]=t,"ENABLE_VIDEO_SEI"!==e&&"ENABLE_AUDIO_TOPN"!==e&&"ENABLE_AUDIO_METADATA"!==e&&"ENABLE_AUDIO_PTS_METADATA"!==e||!0!==t||(_N.ENABLE_ENCODED_TRANSFORM=!0,"ENABLE_AUDIO_PTS_METADATA"===e&&(_N.ENABLE_AUDIO_METADATA=!0)),"USE_NEW_NETWORK_CONFIG"===e&&t&&(o=!!t,_N.USE_NEW_NETWORK_CONFIG=o,o&&(_N.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],_N.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],_N.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],_N.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],_N.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",_N.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",_N.GATEWAY_DOMAINS=["edge.sd-rtn.com"])),"ENABLE_PRE_SUB"===e&&t&&(_N.ENABLE_INSTANT_VIDEO=!0,_N.ENABLE_PREALLOC_PC=!0),"ENABLE_SVC"===e&&t&&(_N.ENABLE_AUT_CC=!0),"NEW_FORCE_TURN"===e&&t&&(_N.NEW_TURN_MODE||(_N.NEW_TURN_MODE=4))))}function CN(e){return _N[e]}mN||(_N.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],_N.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],_N.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],_N.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],_N.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],_N.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],_N.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",_N.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",_N.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",_N.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",_N.AREAS=["NORTH_AMERICA","OVERSEA"]);let TN=function(e){return e[e.REALTIME=1]="REALTIME",e}({});const IN={};var RN=function(e){return e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",e}(RN||{});let xN=function(e){return e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1",e}({});!function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"}({});const NN=128,ON=96,kN=1e3,PN=10;let BN=0;var LN=(()=>{var e={8:(e,t,n)=>{n.r(t),n.d(t,{Parser:()=>w,Printer:()=>I,parse:()=>O,print:()=>k});const r="\n",i="".concat("\r").concat(r),o=" ";let a;function s(e){return e>="0"&&e<="9"}function c(e){return e>="!"&&e<="~"}function l(e){return c(e)||e>="\x80"&&e<="\xff"}function d(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function u(e){return e>="1"&&e<="9"}function A(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function h(e){return"d"===e||"h"===e||"m"===e||"s"===e}function p(e){return e>"\x01"&&e<"\t"||e>"\v"&&e<"\f"||e>"\x0e"&&e<"\xff"}function f(e){return A(e)||s(e)||"+"===e||"/"===e}function m(e){return s(e)||A(e)||"+"===e||"/"===e||"-"===e||"_"===e}function g(e){return A(e)||s(e)||"+"===e||"/"===e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(a||(a={}));class E{consumeText(e,t){let n=t;for(;n<e.length;){const t=e[n];if("\0"===t||"\r"===t||t===r)break;n+=1}if(n-t==0)throw new Error("Invalid text, at ".concat(e));return n}consumeUnicastAddress(e,t,n){return this.consumeTill(e,t,o)}consumeOneOrMore(e,t,n){let r=t;for(;n(e[r]);)r++;if(r-t==0)throw new Error("Invalid rule at ".concat(t,"."));return r}consumeSpace(e,t){if(e[t]===o)return t+1;throw new Error("Invalid space at ".concat(t,"."))}consumeIP4Address(e,t){let n=t;for(let r=0;r<4;r++)if(n=this.consumeDecimalUChar(e,n),3!==r){if("."!==e[n])throw new Error("Invalid IP4 address.");n++}return n}consumeDecimalUChar(e,t){let n=t;for(let i=0;i<3&&s(e[n]);i++,n++);if(n-t==0)throw new Error("Invalid decimal uchar.");const r=parseInt(e.slice(t,n));if(r>=0&&r<=255)return n;throw new Error("Invalid decimal uchar")}consumeIP6Address(e,t){let n=this.consumeHexpart(e,t);return":"===e[n]?(n+=1,n=this.consumeIP4Address(e,n),n):n}consumeHexpart(e,t){let n=t;if(":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}if(n=this.consumeHexseq(e,n),":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}return n}consumeHexseq(e,t){let n=t;for(;n=this.consumeHex4(e,n),":"===e[n]&&":"!==e[n+1];)n+=1;return n}consumeHex4(e,t){let n=0;for(;n<4;n++)if(!((r=e[t+n])>="0"&&r<="9"||r>="a"&&r<="f"||r>="A"&&r<="F")){if(0===n)throw new Error("Invalid hex 4");break}var r;return t+n}consumeFQDN(e,t){let n=t;for(;s(e[n])||A(e[n])||"-"===e[n]||"."===e[n];)n+=1;if(n-t<4)throw new Error("Invalid FQDN");return n}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,l)}consumeMulticastAddress(e,t,n){switch(n){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(n){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const n=this.consumeHexpart(e,t);return"/"===e[n]?this.consumeInteger(e,n+1):n}consumeIP4MulticastAddress(e,t){let n=t+3;const r=e.slice(t,n),i=parseInt(r);if(i<224||i>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let o=0;o<3;o++){if("."!==e[n])throw new Error("Invalid IP4 multicast address.");n+=1,n=this.consumeDecimalUChar(e,n)}return"/"===e[n]&&(n+=1),n=this.consumeTTL(e,n),"/"===e[n]&&(n=this.consumeInteger(e,n)),n}consumeInteger(e,t){if(!u(e[t]))throw new Error("Invalid integer.");for(t+=1;s(e[t]);)t+=1;return t}consumeTTL(e,t){if("0"===e[t])return t+1;if(!u(e[t]))throw new Error("Invalid TTL.");t+=1;for(let n=0;n<2&&s(e[t]);n++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,d)}consumeTime(e,t){let n=t;if("0"===e[n])return n+1;for(u(e[n])&&(n+=1);s(e[n]);)n++;if(n-t<10)throw new Error("Invalid time");return n}consumeAddress(e,t){return this.consumeTill(e,t,o)}consumeTypedTime(e,t){let n=t;return n=this.consumeOneOrMore(e,n,s),h(e[n])?n+1:n}consumeRepeatInterval(e,t){if(!u(e[t]))throw new Error("Invalid repeat interval");for(t+=1;s(e[t]);)t+=1;return h(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,s)}consume(e,t,n){for(let r=0;r<n.length;r++){if(t+r>=e.length)throw new Error("consume exceeding value length");if(e[t+r]!==n[r])throw new Error("consume ".concat(n," failed at ").concat(r))}return t+n.length}consumeTill(e,t,n){let r=t;for(;r<e.length&&("string"!=typeof n||e[r]!==n)&&("function"!=typeof n||!n(e[r]));)r++;return r}}class w extends E{constructor(){super(),b(this,"records",[]),b(this,"currentLine",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter((e=>!!ky(e).call(e))).map(this.parseLine),this.currentLine=0;const n=this.parseVersion(),r=this.parseOrigin(),i=this.parseSessionName(),o=this.parseInformation(),a=this.parseUri(),s=this.parseEmail(),c=this.parsePhone(),l=this.parseConnection(),d=this.parseBandWidth(),u=this.parseTimeFields(),A=this.parseKey(),h=this.parseSessionAttribute(),p=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:n,origin:r,sessionName:i,information:o,uri:a,emails:s,phones:c,connection:l,bandwidths:d,timeFields:u,key:A,attributes:h,mediaDescriptions:p}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===r)return"\r"===e[t-1]?i:r;throw new Error("Invalid newline character.")}parseLine(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const n=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:n,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new S;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==a.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(t,(e=>d(e)&&":"!==e)),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,n.attValue=this.extractOneOrMore(t,p)),e.parse(n),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new C(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==a.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(e,(e=>d(e)&&":"!==e)),_cur:0};":"===e.value[e.cur]&&(e.cur+=1,n.attValue=this.extractOneOrMore(e,p)),t.parse(n),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===a.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const e=this.getCurrentRecord();if(e.type===a.ZONE_ADJUSTMENTS){const t=[];for(;;)try{const n=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let r=!1;"-"===e.value[e.cur]&&(r=!0,e.cur+=1);const i=this.extract(e,this.consumeTypedTime);t.push({time:n,typedTime:i,back:r})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==a.REPEAT)break;{const n=this.extract(t,this.consumeRepeatInterval),r=this.parseTypedTime(t);e.push({repeatInterval:n,typedTimes:r}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:n}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==a.BANDWIDTH)break;{const n=this.extractOneOrMore(t,d);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;const r=this.extractOneOrMore(t,s);e.push({bwtype:n,bandwidth:r}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==a.VERSION)throw new Error("first sdp record must be version");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,s));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==a.ORIGIN)throw new Error("second line of sdp must be origin");const t=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,s);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,s);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const o=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:n,sessVersion:r,nettype:i,addrtype:o,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===a.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==a.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===a.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==a.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==a.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===a.CONNECTION){const t=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const r=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:n,address:r}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let n=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,n+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const r=[];for(r.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,r.push(this.extract(e,this.consumeToken));if(0===r.length)throw new Error("Invalid proto");const i=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:n,protos:r,fmts:i}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===a.TIME;){const t=this.parseTime(),n=this.parseRepeat(),r=this.parseZone();e.push({time:t,repeats:n,zones:r})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===a.MEDIA;){const t=this.parseMedia(),n=this.parseInformation(),r=this.parseConnections(),i=this.parseBandWidth(),o=this.parseKey(),a=this.parseMediaAttributes(t);e.push({media:t,information:n,connections:r,bandwidths:i,key:o,attributes:a})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===a.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t}extract(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=t.call(this,e.value,e.cur,...r),a=e.value.slice(e.cur,o);return e.cur=o,a}extractOneOrMore(e,t){const n=this.consumeOneOrMore(e.value,e.cur,t),r=e.value.slice(e.cur,n);return e.cur=n,r}consumeSpaceForRecord(e){if(e.value[e.cur]!==o)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}class _ extends E{constructor(){super(...arguments),b(this,"attributes",void 0),b(this,"digested",!1)}extractOneOrMore(e,t,n){const r=this.consumeOneOrMore(e.attValue,e._cur,t),i=e.attValue.slice(e._cur,r),[o,a]=n||[];if("number"==typeof o&&i.length<o)throw new Error("error in length, should be more or equal than ".concat(o," characters."));if("number"==typeof a&&i.length>a)throw new Error("error in length, should be less or equal than ".concat(a," characters."));return e._cur=r,i}consumeAttributeSpace(e){if(e.attValue[e._cur]!==o)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}extract(e,t){if(!e.attValue)throw new Error("Nothing to extract from attValue.");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=t.call(this,e.attValue,e._cur,...r),a=e.attValue.slice(e._cur,o);return e._cur=o,a}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let n=0;n<t.length;n++)if(t[n]!==e.attValue[e._cur+n])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,f,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,f,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,f));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:n})}parseExtmap(e){const t=this.extractOneOrMore(e,s);let n;"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),n=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeTill,o),i=y(y({entry:parseInt(t,10)},n&&{direction:n}),{},{extensionName:r});this.peekChar(e)===o&&(this.consumeAttributeSpace(e),i.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(i)}parseSetup(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}class S extends _{constructor(){super(...arguments),b(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;)this.consumeAttributeSpace(e),n.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:n})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,m)}parseIdentity(e){const t=this.extractOneOrMore(e,g),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");const r=this.extractOneOrMore(e,(e=>e!==o&&p(e)));n.push({name:t,value:r})}this.attributes.identities.push({assertionValue:t,extensions:n})}parseMsidSemantic(e){this.peekChar(e)===o&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}{const n=this.extract(e,this.consumeTill,o);t.identifierList.push(n)}}this.attributes.msidSemantic=t}}class C extends _{constructor(e){super(),b(this,"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}parseCandidate(e){const t=this.extractOneOrMore(e,f,[1,32]);this.consumeAttributeSpace(e);const n=this.extractOneOrMore(e,s,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extractOneOrMore(e,s,[1,10]);this.consumeAttributeSpace(e);const a=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const l=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);const d={foundation:t,componentId:n,transport:r,priority:i,connectionAddress:a,port:l,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),d.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),d.relPort=this.extract(e,this.consumePort));this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),d.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(d)}parseRemoteCandidate(e){const t=[];for(;;){const n=this.extractOneOrMore(e,s,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumePort);t.push({componentId:n,connectionAddress:r,port:i});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");const r={encodingName:n,clockRate:this.extractOneOrMore(e,s)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),r.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const i=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));i?i.rtpMap=r:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:r,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,s);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,":");let r;":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),r=this.extract(e,this.consumeTill));const i=this.attributes.ssrcs.find((e=>e.ssrcId===parseInt(t,10)));i?i.attributes[n]=r:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[n]:r}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,o);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill),r={};n.split(";").forEach((e=>{let[t,n]=e.split("=");t=ky(t).call(t);const i="string"==typeof n?ky(n).call(n):null;"string"==typeof t&&t.length>0&&(r[t]=i)}));const i=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));i?i.fmtp={parameters:r}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:r}})}parseFmtParameters(e){const t={},n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");for(t[n]=r;";"===e.attValue[e._cur];){const n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");t[n]=r}return t}parseRtcpFb(e){let t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,o),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,o);let r;if("trr-int"===n)r={type:n,interval:this.extract(e,this.consumeTill)};else{const t={type:n};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===o&&(t.additional=this.extract(e,this.consumeTill))),r=t}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(r);else{const e=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));e?e.rtcpFeedbacks.push(r):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[r]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,d),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,d),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,d,[1,64])};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,d,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,(e=>A(e)||s(e)||"_"===e||"-"===e));this.consumeAttributeSpace(e);const n={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===o){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");const t=[];for(;;){const n=this.extract(e,this.consumeToken);t.push(n);try{this.extract(e,this.consume,",")}catch(e){break}}n.payloads=t,this.peekChar(e)===o&&this.extract(e,this.consume,o)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case"depend":{const r={type:t,rids:this.extract(e,this.consume,"=").split(",")};n.params.push(r);break}default:{const r={type:t};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),r.val=this.extract(e,this.consumeTill,";")),n.params.push(r)}}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(n)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,s,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,s,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);n.push(parseInt(t,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:n})}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class I{constructor(){T(this,"eol",i)}print(e,t){let n="";return t&&(this.eol=t),n+=this.printVersion(e.version),n+=this.printOrigin(e.origin),n+=this.printSessionName(e.sessionName),n+=this.printInformation(e.information),n+=this.printUri(e.uri),n+=this.printEmail(e.emails),n+=this.printPhone(e.phones),n+=this.printConnection(e.connection),n+=this.printBandwidth(e.bandwidths),n+=this.printTimeFields(e.timeFields),n+=this.printKey(e.key),n+=this.printSessionAttributes(e.attributes),n+=this.printMediaDescription(e.mediaDescriptions),n}printVersion(e){return"v=".concat(e).concat(this.eol)}printOrigin(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?"s=".concat(e).concat(this.eol):""}printInformation(e){return e?"i=".concat(e).concat(this.eol):""}printUri(e){return e?"u=".concat(e).concat(this.eol):""}printEmail(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printPhone(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printConnection(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}printBandwidth(e){let t="";for(const n of e)t+="b=".concat(n.bwtype,":").concat(n.bandwidth).concat(this.eol);return t}printTimeFields(e){let t="";for(const n of e){t+="t=".concat(n.time.startTime," ").concat(n.time.startTime).concat(this.eol);for(const e of n.repeats)t+="r=".concat(e.repeatInterval," ").concat(e.typedTimes.join(" ")).concat(this.eol);n.zoneAdjustments&&(t+="z=",t+="z=".concat(n.zoneAdjustments.map((e=>"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime))).join(" ")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?"k=".concat(e).concat(this.eol):""}printAttributes(e){let t="";for(const n of e)t+="a=".concat(n.attField).concat(n.attValue?":".concat(n.attValue):"").concat(this.eol);return t}printMediaDescription(e){let t="";for(const n of e)t+=this.printMedia(n.media),t+=this.printInformation(n.information),t+=this.printConnections(n.connections),t+=this.printBandwidth(n.bandwidths),t+=this.printKey(n.key),t+=this.printMediaAttributes(n);return t}printConnections(e){let t="";for(const n of e)t+=this.printConnection(n);return t}printMedia(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}printSessionAttributes(e){return new x(this.eol).print(e)}printMediaAttributes(e){return new N(this.eol).print(e)}}class R{constructor(e){T(this,"eol",void 0),this.eol=e}printIceUfrag(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?"":"a=ice-options:".concat(e.join(o)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map((e=>"a=fingerprint:".concat(e.hashFunction).concat(o).concat(e.fingerprint))).join(this.eol)+this.eol:""}printExtmap(e){return e.map((e=>"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(o).concat(e.extensionName).concat(e.extensionAttributes?"".concat(o).concat(e.extensionAttributes):"").concat(this.eol))).join("")}printSetup(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}printUnrecognized(e){return e.map((e=>"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(this.eol))).join("")}}class x extends R{print(e){let t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t="";return e.length>0&&(t+=e.map((e=>"a=group:".concat(e.semantic).concat(e.identificationTag.map((e=>"".concat(o).concat(e))).join("")).concat(this.eol))).join("")),t}printIceLite(e){return void 0===e?"":"a=ice-lite"+this.eol}printTlsId(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}printIdentity(e){return 0===e.length?"":e.map((e=>"a=identity:".concat(e.assertionValue).concat(e.extensions.map((e=>"".concat(o).concat(e.name).concat(e.value?"=".concat(e.value):"")))))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return"";let t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(o,"*"):e.identifierList.length>0&&(t+=e.identifierList.map((e=>"".concat(o).concat(e)))),t+this.eol}}class N extends R{print(e){const t=e.attributes;let n="";return n+=this.printRTCP(t.rtcp),n+=this.printIceUfrag(t.iceUfrag),n+=this.printIcePwd(t.icePwd),n+=this.printIceOptions(t.iceOptions),n+=this.printCandidates(t.candidates),n+=this.printRemoteCandidatesList(t.remoteCandidatesList),n+=this.printEndOfCandidates(t.endOfCandidates),n+=this.printFingerprints(t.fingerprints),n+=this.printSetup(t.setup),n+=this.printMid(t.mid),n+=this.printExtmap(t.extmaps),n+=this.printRTPRelated(t),n+=this.printPtime(t.ptime),n+=this.printMaxPtime(t.maxPtime),n+=this.printDirection(t.direction),n+=this.printSSRCGroups(t.ssrcGroups),n+=this.printSSRC(t.ssrcs),n+=this.printRTCPMux(t.rtcpMux),n+=this.printRTCPMuxOnly(t.rtcpMuxOnly),n+=this.printRTCPRsize(t.rtcpRsize),n+=this.printMSId(t.msids),n+=this.printImageattr(t.imageattr),n+=this.printRid(t.rids),n+=this.printSimulcast(t.simulcast),n+=this.printSCTPPort(t.sctpPort),n+=this.printMaxMessageSize(t.maxMessageSize),n+=this.printUnrecognized(t.unrecognized),n}printCandidates(e){return e.map((e=>"a=candidate:".concat(e.foundation).concat(o).concat(e.componentId).concat(o).concat(e.transport).concat(o).concat(e.priority).concat(o).concat(e.connectionAddress).concat(o).concat(e.port).concat(o,"typ").concat(o).concat(e.type).concat(e.relAddr?"".concat(o,"raddr").concat(o).concat(e.relAddr):"").concat(e.relPort?"".concat(o,"rport").concat(o).concat(e.relPort):"").concat(Object.keys(e.extension).map((t=>"".concat(o).concat(t).concat(o).concat(e.extension[t]))).join("")).concat(this.eol))).join("")}printRemoteCandidatesList(e){return e.map((e=>"a=remote-candidates:".concat(e.join(o)).concat(this.eol))).join("")}printEndOfCandidates(e){return void 0===e?"":"a=end-of-candidates"+this.eol}printRTPRelated(e){if(!e.payloads)return"";const t=e.payloads;let n="";n+=e.rtcpFeedbackWildcards.map((e=>this.printRTCPFeedback("*",e))).join("");for(const r of t)n+=this.printRtpMap(r.payloadType,r.rtpMap),n+=this.printFmtp(r.payloadType,r.fmtp),n+=r.rtcpFeedbacks.map((e=>this.printRTCPFeedback(r.payloadType,e))).join("");return n}printFmtp(e,t){if(!t)return"";const n=Object.keys(t.parameters);return 1===n.length&&null===t.parameters[n[0]]?"a=fmtp:".concat(e).concat(o).concat(n[0]).concat(this.eol):"a=fmtp:".concat(e).concat(o).concat(Object.keys(t.parameters).map((e=>"".concat(e,"=").concat(t.parameters[e]))).join(";")).concat(this.eol)}printRtpMap(e,t){return t?"a=rtpmap:".concat(e).concat(o).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(e,t){let n="a=rtcp-fb:".concat(e).concat(o),r=t;return"trr-int"===r.type?n+="ttr-int".concat(o).concat(r.interval):(n+="".concat(r.type),r.parameter&&(n+="".concat(o).concat(r.parameter),r.additional&&(n+="".concat(o).concat(r.additional)))),n+this.eol}printPtime(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}printDirection(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}printSSRC(e){return e.map((e=>Object.keys(e.attributes).map((t=>"a=ssrc:".concat(e.ssrcId.toString(10)).concat(o).concat(t).concat(e.attributes[t]?":".concat(e.attributes[t]):"").concat(this.eol))).join(""))).join("")}printRTCPMux(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(e){if(void 0===e)return"";let t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(o).concat(e.netType)),e.addressType&&(t+="".concat(o).concat(e.addressType)),e.address&&(t+="".concat(o).concat(e.address)),t+this.eol}printMSId(e){return e.map((e=>"a=msid:".concat(e.id).concat(e.appdata?"".concat(o).concat(e.appdata):"").concat(this.eol))).join("")}printImageattr(e){return e.map((e=>"a=imageattr:".concat(e).concat(this.eol))).join("")}printRid(e){return e.map((e=>{let t="a=rid:".concat(e.id).concat(o).concat(e.direction);return e.payloads&&(t+="".concat(o,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(t+="".concat(o).concat(e.params.map((e=>"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val))).join(";"))),t+this.eol})).join("")}printSimulcast(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}printSCTPPort(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?"":"a=max-message-size:".concat(e).concat(this.eol)}printMid(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map((e=>"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map((e=>"".concat(o).concat(e.toString(10)))).join("")).concat(this.eol))).join("")}}function O(e){return(new w).parse(e)}function k(e,t){return(new I).print(e,t)}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8)})();function DN(e){return LN.parse(e)}function UN(e,t){return LN.print(e,t)}var MN=er("Array","keys"),FN=mr,jN=et,QN=u,VN=MN,HN=Array.prototype,zN={DOMTokenList:!0,NodeList:!0},KN=function(e){var t=e.keys;return e===HN||QN(HN,e)&&t===HN.keys||jN(zN,FN(e))?VN:t},GN=r(KN);function WN(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qN(Object(n),!0).forEach((function(t){WN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const XN=new class extends QR{constructor(){super(...arguments),WN(this,"currentUploadLogID",0)}reportLogUploadError(e){const{errorRange:t}=e;t[t.length-1]&&t[t.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=t[t.length-1],this.emit("REPORT_LOG_UPLOAD",e))}};class JN{constructor(e){WN(this,"logger",void 0),WN(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}}function ZN(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function $N(){const e=new Date,t=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const eO={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},tO=Date.now(),nO=e=>{for(const t in eO)if(Object.prototype.hasOwnProperty.call(eO,t)&&eO[t]===e)return t;return"DEFAULT"},rO=new class{constructor(){WN(this,"proxyServerURL",void 0),WN(this,"logLevel",eO.DEBUG),WN(this,"uploadState","collecting"),WN(this,"uploadLogWaitingList",[]),WN(this,"uploadLogUploadingList",[]),WN(this,"uploadErrorCount",0),WN(this,"currentLogID",0),WN(this,"url",void 0),WN(this,"extLog",((e,t)=>{this.appendLogToWaitingList(e,...t)}))}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[eO.DEBUG].concat(t);this.log.apply(this,r)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[eO.INFO].concat(t);this.log.apply(this,r)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[eO.WARNING].concat(t);this.log.apply(this,r)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[eO.ERROR].concat(t);this.log.apply(this,r)}upload(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[eO.DEBUG].concat(t);this.uploadLog.apply(this,r)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){SN("UPLOAD_LOG",!0)}disableLogUpload(){SN("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new JN(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-tO<100)return void setTimeout((()=>{this.log(...t)}),Date.now()-tO);const r=Math.max(0,Math.min(4,t[0]));if(t[0]=ZN()+" Agora-SDK [".concat(nO(r),"]:"),this.appendLogToWaitingList(r,...t),r<this.logLevel)return;const i=ZN()+" %cAgora-SDK [".concat(nO(r),"]:");let o=[];if(!CN("USE_NEW_LOG"))switch(r){case eO.DEBUG:o=[i,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,o);break;case eO.INFO:o=[i,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,o);break;case eO.WARNING:o=[i,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,o);break;case eO.ERROR:o=[i,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,o)}}uploadLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-tO<100)return void setTimeout((()=>{this.uploadLog(...t)}),Date.now()-tO);const r=Math.max(0,Math.min(4,t[0]));t[0]=ZN()+" Agora-SDK [".concat(nO(r),"]:"),this.appendLogToWaitingList(r,...t)}appendLogToWaitingList(e){if(!CN("UPLOAD_LOG"))return;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Array.isArray(n[0])?n[0][0]=$N()+" Agora-SDK [".concat(nO(e),"]:"):n[0]=$N()+" Agora-SDK [".concat(nO(e),"]:");let i="";n.forEach((e=>{"object"==typeof e&&(e=JSON.stringify(e)),i+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,t={sdk_version:fN,process_id:CN("PROCESS_ID"),payload:JSON.stringify(e)};return Fx((async()=>{const e=await DI.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(CN("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(CN("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if("OK"!==e.data){const t=new Error("unexpected upload log response");throw t.response=e,t}}),(()=>(this.uploadLogUploadingList=[],!1)),(t=>{const n={status:-1,message:t.message,errorRange:e.map((e=>e.log_item_id))};return t.response?(n.status=t.response.status,n.data=t.response.data,n.headers=t.response.headers):t.request&&(n.status=t.request.status),XN.reportLogUploadError(n),!0}),{timeout:CN("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:CN("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,CN("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then((()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout((()=>this.uploadLogInterval()),CN("UPLOAD_LOG_INTERVAL"))})).catch((e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout((()=>this.uploadLogInterval()),CN("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout((()=>this.uploadLogInterval()),CN("UPLOAD_LOG_RETRY_INTERVAL_V1"))})))}};var iO;function oO(e){return OR(e.reportId,"params.reportId",0,100,!1),OR(e.category,"params.category",0,100,!1),OR(e.event,"params.event",0,100,!1),OR(e.label,"params.label",0,100,!1),xR(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(iO={}).FREE="free",iO.UPLOADING="uploading",function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}({});const aO={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let sO=function(e){return e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",e.AB_TEST="ab_test",e}({}),cO=function(e){return e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",e.AB_TEST="io.agora.pb.Wrtc.ABTest",e}({});!function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}({});let lO=function(e){return e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED",e}({});function dO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){const i=r.value;if("function"==typeof i){const o=e.className||t.__className__||("AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name);r.value=function(){for(var t,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];let c=a;if(e.argsMap)try{c=e.argsMap(this,...a)}catch(e){rO.warning(e),c=[]}try{JSON.stringify(c)}catch(e){rO.warning("arguments for method ".concat(o,".").concat(String(n)," not serializable for apiInvoke.")),c=[]}const l=(e.report||uO).reportApiInvoke(this._sessionId||null,{id:this._clientId||(null===(t=this.store)||void 0===t?void 0:t.clientId)||this._ID,name:"".concat(o,".").concat(String(n)),options:c,tag:KR.TRACER,reportResult:e.reportResult},e.throttleTime);try{const t=i.apply(this,a);return t instanceof nh?t.then((t=>(l.onSuccess(e.reportResult&&t),t))).catch((e=>{throw l.onError(e),e})):(l.onSuccess(e.reportResult&&t),t)}catch(e){throw l.onError(e),e}}}return r}}const uO=new class{constructor(){WN(this,"baseInfoMap",new Map),WN(this,"proxyServer",void 0),WN(this,"eventUploadTimer",void 0),WN(this,"setSessionIdTimer",void 0),WN(this,"url",void 0),WN(this,"sids",new Set),WN(this,"backupUrl",void 0),WN(this,"_appId",void 0),WN(this,"_aid",0),WN(this,"keyEventUploadPendingItems",[]),WN(this,"normalEventUploadPendingItems",[]),WN(this,"apiInvokeUploadPendingItems",[]),WN(this,"apiInvokeCount",0),WN(this,"apiInvokeLoggedCount",0),WN(this,"ltsList",[]),WN(this,"lastSendNormalEventTime",Date.now()),WN(this,"customReportCounterTimer",void 0),WN(this,"customReportCount",0),WN(this,"extApiInvoke",(async e=>{for(const t of e){const e=YN(YN({},t),{},{sid:null,invokeId:++this.apiInvokeCount,tag:KR.TRACER});this.sendApiInvoke(e)}})),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),CN("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),CN("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(e){return this.baseInfoMap.get(e)}setAppId(e){this._appId=e,this._aid=parseInt(e.replace(/[a-fA-F0-9]{8}/g,(e=>{let[t,n]=e;return t+n})),16)||0}reportApiInvoke(e,t,n){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const r=Date.now();this.apiInvokeCount+=1;const i=this.apiInvokeCount,o=!!CN("SHOW_REPORT_INVOKER_LOG"),a=!!CN("SHOW_REPORT_USER_INVOKER_LOG"),s=o||a&&t.id;s&&(this.apiInvokeLoggedCount+=1);const c=this.apiInvokeLoggedCount;function l(e,n){if(s){let r="[apiInvoke-".concat(c,"]");if(t.id&&(r+="[".concat(t.id,"]")),t.name&&(r+="[".concat(t.name,"]"),t.name===zR.JOIN))return rO.info("".concat(r," ").concat(e));rO.info("".concat(r," ").concat(e),"start"===e?t.options:n||"")}}const d=()=>({tag:t.tag,invokeId:i,sid:e,name:t.name,apiInvokeTime:r,options:t.options,states:t.states||null});l("start");let u=!1;Ex(t.timeout).then((()=>{u||(this.sendApiInvoke(YN(YN({},d()),{},{error:CR.API_INVOKE_TIMEOUT,success:!1})),l("timeout"))}));const A=new TR(CR.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const r=()=>{if(u)throw A;return u=!0,this.sendApiInvoke(YN(YN({},d()),{},{success:!0},t.reportResult&&{result:e})),l("onSuccess"),e};return n?Tx(r,t.name+"Success",n,(()=>u=!0)):r()},onError:e=>{const r=()=>{if(u)throw e;u=!0,this.sendApiInvoke(YN(YN({},d()),{},{success:!1,error:e})),l("onFailure",e.toString())};return n?Tx(r,t.name+"Error",n,(()=>u=!0)):r()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const n=Date.now(),r=this.createBaseInfo(e,n);r.cname=t.cname;const i=Object.assign({},{willUploadConsoleLog:CN("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:mN?"global":"oversea",areas:CN("AREAS")&&CN("AREAS").join(",")},t.extend),{stringUid:o,channelProfile:a,channelMode:s,isABTestSuccess:c,lsid:l,clientRole:d}=t,u=Date.now(),A=YN(YN({},r),{},{eventType:sO.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,buildFormat:t.buildFormat,build:EN,lts:u,elapse:u-n,extend:JSON.stringify(i),mode:t.mode,process:CN("PROCESS_ID"),appType:CN("APP_TYPE"),success:!0,version:fN,stringUid:o,channelProfile:a,channelMode:s,isABTestSuccess:c,lsid:l,clientType:Br(h=window.navigator.userAgent).call(h,"AgoraWebView")?42:20,clientRole:d,serviceId:CN("PROCESS_ID"),extensionID:CN("PLUGIN_INFO").join(",")||""});var h;this.send({type:cO.SESSION,data:A},!0)}joinChooseServer(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN({},r),{},{role:t.role,eventType:sO.JOIN_CHOOSE_SERVER,lts:i,eventElapse:t.elapse||i-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:i-n.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3,corssRegionTagReq:t.corssRegionTagReq||void 0,corssRegionTagRes:t.corssRegionTagRes||void 0});this.send({type:cO.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN({},r),{},{eventType:sO.REQ_USER_ACCOUNT,lts:i,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:t.elapse||i-n.startTime,eventElapse:i-t.lts,extend:JSON.stringify(t.extend)});this.send({type:cO.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info;t.vid&&(r.vid=t.vid),r.uid=t.uid,r.cid=t.cid;const i=Date.now(),{firstSuccess:o,addr:a,isProxy:s}=t,c=i-n.startTime,l=YN(YN({},r),{},{eventType:sO.JOIN_GATEWAY,lts:i,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,errorMsg:t.errorMsg||"",elapse:c,eventElapse:i-t.lts,firstSuccess:o,signalChannel:t.signalChannel,preload:t.preload?1:0,installId:pN(),isABTestSuccess:t.isABTestSuccess?1:0}),d=l.success?1:0;if(t.succ&&(n.lastJoinSuccessTime=i),o)this.send({type:cO.JOIN_GATEWAY,data:l},!0);else{let e;if(a)if(s){const t=a.match(/h=(\d{1,3}-){3}\d{1,3}/g),n=a.match(/p=[0-9]{1,6}/g);e={isSuccess:d,gatewayIp:t&&t.length?t[0].split("=")[1].replace(/-/g,"."):"",port:n&&n.length?n[0].split("=")[1]:"",isProxy:s?1:0}}else{const t=a.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),n=a.match(/(:|p=)[0-9]{1,6}/g);e={isSuccess:d,gatewayIp:t&&t.length?t[0].split("//")[1].replace(/-/g,"."):"",port:n&&n.length?n[0].split(/:|p=/g)[1]:"",isProxy:s?1:0}}else e={isSuccess:d,gatewayIp:"",port:"",isProxy:s?1:0};delete l.success,delete l.eventType,delete l.firstSuccess,l.vid=Number(l.vid);const t=Object.assign({},l,e,{eventType:sO.REJOIN_GATEWAY});this.send({type:cO.RE_JOIN_GATEWAY,data:t},!0)}}joinChannelTimeout(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=Date.now(),i=YN(YN({},n.info),{},{lts:r,timeout:t,elapse:r-n.startTime});this.send({type:cO.JOIN_CHANNEL_TIMEOUT,data:i},!0)}publish(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN({},r),{},{eventType:sO.PUBLISH,lts:i,eventElapse:t.eventElapse,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:cO.PUBLISH,data:o},!0)}subscribe(e,t,n){const r=this.baseInfoMap.get(e);if(!r)return;const i=r.info,o=Date.now(),a=YN(YN({},i),{},{eventType:sO.SUBSCRIBE,lts:o,eventElapse:t.eventElapse,elapse:o-r.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid,preSsrc:t.preSsrc?1:0},n&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof t.peerid?a.peerSuid=t.peerid:a.peer=t.peerid,this.send({type:cO.SUBSCRIBE,data:a},!0)}wsCompressorInit(e){var t;const n=[...GN(t=this.baseInfoMap).call(t)],r=n.length?n[0]:"UnableToGetSid",i=this.baseInfoMap.get(r);if(!i)return;const o=i.info,a=Date.now(),s=YN(YN({},o),{},{eventType:sO.WS_COMPRESSOR_INIT,lts:a,eventElapse:e.eventElapse,elapse:a-i.startTime,status:e.status?1:2});this.send({type:cO.WS_COMPRESSOR_INIT,data:s},!0)}firstRemoteVideoDecode(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,a=Date.now(),s=YN(YN(YN({},o),r),{},{elapse:a-i.startTime,eventType:t,lts:a,firstDecodeFrame:Math.max((r.firstFrame||a)-i.startTime,0),apEnd:Math.max(r.apEnd-i.startTime,0),apStart:Math.max(r.apStart-i.startTime,0),joinGwEnd:Math.max(r.joinGwEnd-i.startTime,0),joinGwStart:Math.max(r.joinGwStart-i.startTime,0),pcEnd:Math.max(r.pcEnd-i.startTime,0),pcStart:Math.max(r.pcStart-i.startTime,0),subscriberEnd:Math.max(r.subscriberEnd-i.startTime,0),subscriberStart:Math.max(r.subscriberStart-i.startTime,0),videoAddNotify:Math.max(r.videoAddNotify-i.startTime,0)});this.send({type:n,data:s},!0)}firstRemoteFrame(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,a=Date.now(),s=YN(YN(YN({},o),r),{},{elapse:a-i.startTime,eventType:t,lts:a});this.send({type:n,data:s},!0)}abTest(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN(YN({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),elapse:i-n.startTime,eventType:sO.AB_TEST,lts:i});this.send({type:cO.AB_TEST,data:o},!0)}pcStats(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN(YN({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),elapse:i-n.startTime,eventType:sO.PC_STATS,lts:i,preallocation:t.preallocation?1:0});this.send({type:cO.PC_STATS,data:o},!0)}updateRemoteRTPCapabilities(e,t){if(e){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN(YN({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),eventType:sO.UPDATE_REMOTE_RTPCAPABILITIES,lts:i});this.send({type:cO.UPDATE_REMOTE_RTPCAPABILITIES,data:o},!0)}}onGatewayStream(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,a=Date.now(),s=YN(YN(YN({},o),r),{},{eventType:t,lts:a});this.send({type:n,data:s},!0)}streamSwitch(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN({},r),{},{eventType:sO.STREAM_SWITCH,lts:i,isDual:t.isdual,elapse:i-n.startTime,success:t.succ});this.send({type:cO.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN({},r),{},{eventType:sO.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:cO.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN({},r),{},{eventType:sO.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:cO.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(e){this.proxyServer=e,e?rO.debug("reportProxyServerurl: ".concat(e)):rO.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN({},r),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:cO.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now();(function(e,t,n){const r=e[t];if(!r||"string"!=typeof r)return[e];e[t]="";const i=vx(JSON.stringify(e));let o=0;const a=[];let s=0;for(let c=0;c<r.length;c++)s+=r.charCodeAt(c)<=127?1:3,s<=n-i||(a[a.length]=SR(SR({},e),{},{[t]:r.substring(o,c)}),o=c,s=r.charCodeAt(c)<=127?1:3);return o!==r.length-1&&(a[a.length]=SR(SR({},e),{},{[t]:r.substring(o)})),a})(YN(YN(YN({},r),t),{},{elapse:i-n.startTime,lts:i,productType:"WebRTC"}),"payload",1300).forEach((e=>this.send({type:cO.WORKER_EVENT,data:e},!0)))}apworkerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN(YN({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:cO.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN(YN({},r),t),{},{elapse:i-n.startTime,lts:i,extend:t.extend||void 0});this.send({type:cO.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=YN(YN(YN({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:cO.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>CN("CUSTOM_REPORT_LIMIT"))throw new TR(CR.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3));const n=Date.now(),r=t.map((t=>({type:cO.USER_ANALYTICS,data:YN(YN({sid:e},t),{},{lts:n})})));try{CN("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(r):await this.postDataToStatsCollector(r)}catch(e){throw rO.error("send custom report message failed",e.toString()),new TR(CR.CUSTOM_REPORT_SEND_FAILED,e.message)}}sendApiInvoke(e){const t=CN("NOT_REPORT_EVENT");if(e.tag&&Br(t)&&Br(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:r,uid:i,cid:o}=n.info;let a;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof TR){const{code:t,message:n}=e.error;a=t||n||e.error.toString()}else a=e.error.toString();const s={invokeId:e.invokeId,sid:e.sid,cname:r,cid:o,uid:i,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?a:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:cO.API_INVOKE,data:s},!1),!0}addSid(e){this.sids.add(e)}removeSid(e){this.sids.delete(e)}appendSessionId(){const e=this.apiInvokeUploadPendingItems;if(0===e.length)return;const t=Array.from(this.sids).find((e=>null!==e));t&&e.forEach((e=>{e&&(e.sid=t,this.sendApiInvoke(Object.assign({},e)))})),e.length=0}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>CN("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const n=[],r=[];for(;e.length;){const t=e.shift();n.length<20?n.push(t):r.push(t)}e.push(...r);for(const o of[...n]){var i;-1!==this.ltsList.indexOf(o.data.lts)?(o.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(o.data.lts)):(this.ltsList.push(o.data.lts),Yh(i=this.ltsList).call(i,((e,t)=>e-t)))}return t||(this.lastSendNormalEventTime=Date.now()),CN("ENABLE_EVENT_REPORT")?(n.length&&(CN("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((e=>n=>{CN("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(e):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(e),this.normalEventUploadPendingItems.length>CN("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-CN("NORMAL_EVENT_QUEUE_CAPACITY")),rO.warning("report: drop normal events"))))})(n)),e):e}async postDataToStatsCollector2(e){ax.networkState===ex.OFFLINE&&await nh.race([ax.onlineWaiter,Ex(2*Ux.maxRetryTimeout)]);const t=e=>{let t=new Uint8Array;return e.forEach((e=>{const n=MR(JSON.stringify(e.data)),r=new ArrayBuffer(5),i=(e=>{let t=0;return Object.entries(cO).forEach((n=>{let[r,i]=n;i===e.type&&(t=lO[r])})),t})(e),o=new DataView(r);o.setUint16(0,n.byteLength,!0),o.setUint8(2,255&i),o.setUint8(3,i>>>8&255),o.setUint8(4,i>>>16&255),t=FR(t,new Uint8Array(r)),t=FR(t,n)})),t},n="event";let r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(CN("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(n):"https://".concat(CN("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(n);for(let i=0;i<2;i+=1){1===i&&(r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(CN("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(n):"https://".concat(CN("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(n));try{await zx(r,{timeout:1e4,data:t(e),headers:YN(YN({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(e){if(1===i)throw e;continue}return}}async postDataToStatsCollector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(e[0]),r=n?void 0:this._aid,i={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:e.map((e=>JSON.stringify(e))),vid:n,aid:r};ax.networkState===ex.OFFLINE&&await nh.race([ax.onlineWaiter,Ex(2*Ux.maxRetryTimeout)]);const o=t?"/events/proto-raws":"/events/messages";let a=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(CN("EVENT_REPORT_DOMAIN"),"&p=").concat(CN("STATS_COLLECTOR_PORT"),"&d=").concat(o):"https://".concat(CN("EVENT_REPORT_DOMAIN"),":").concat(CN("STATS_COLLECTOR_PORT")).concat(o));for(let s=0;s<2;s+=1){1===s&&(a=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(CN("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(CN("STATS_COLLECTOR_PORT"),"&d=").concat(o):"https://".concat(CN("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(CN("STATS_COLLECTOR_PORT")).concat(o)));try{t?await Kx(a,{timeout:1e4,data:i}):await zx(a,{timeout:1e4,data:i})}catch(t){if(1===s)throw t;continue}return}}createBaseInfo(e,t){const n=Object.assign({},aO);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}reportResourceTiming(e,t){const n=performance.getEntriesByName(e),r=n[n.length-1];r&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:r,tag:KR.TRACER}).onSuccess()}};XN.on("REPORT_LOG_UPLOAD",(e=>{e.networkState=ax.networkState,uO.reportApiInvoke(null,{name:"logUploadError",options:e,tag:KR.TRACER}).onSuccess("logUploadError")}));class AO extends TR{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2?arguments[2]:void 0),WN(this,"name","AgoraRTCException")}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return super.print(e,rO)}throw(){super.throw(rO)}}const hO={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function pO(){return hO}function fO(){return"setSinkId"in HTMLAudioElement.prototype&&(!CN("RESTRICTION_SET_PLAYBACK_DEVICE")||(ZI()||eR())&&!vR())}function mO(){return!hO.supportUnifiedPlan||CN("CHROME_FORCE_PLAN_B")&&yR()}let gO=function(e){return e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change",e}({});function vO(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function yO(e,t,n,r,i){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:i}}function bO(e,t,n,r,i){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:i}}function EO(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}const wO={"90p":yO(160,90),"90p_1":yO(160,90),"120p":yO(160,120,15,30,65),"120p_1":yO(160,120,15,30,65),"120p_3":yO(120,120,15,30,50),"120p_4":yO(212,120),"180p":yO(320,180,15,30,140),"180p_1":yO(320,180,15,30,140),"180p_3":yO(180,180,15,30,100),"180p_4":yO(240,180,15,30,120),"240p":yO(320,240,15,40,200),"240p_1":yO(320,240,15,40,200),"240p_3":yO(240,240,15,40,140),"240p_4":yO(424,240,15,40,220),"360p":yO(640,360,15,80,400),"360p_1":yO(640,360,15,80,400),"360p_3":yO(360,360,15,80,260),"360p_4":yO(640,360,30,80,600),"360p_6":yO(360,360,30,80,400),"360p_7":yO(480,360,15,80,320),"360p_8":yO(480,360,30,80,490),"360p_9":yO(640,360,15,80,800),"360p_10":yO(640,360,24,80,800),"360p_11":yO(640,360,24,80,1e3),"480p":yO(640,480,15,100,500),"480p_1":yO(640,480,15,100,500),"480p_2":yO(640,480,30,100,1e3),"480p_3":yO(480,480,15,100,400),"480p_4":yO(640,480,30,100,750),"480p_6":yO(480,480,30,100,600),"480p_8":yO(848,480,15,100,610),"480p_9":yO(848,480,30,100,930),"480p_10":yO(640,480,10,100,400),"720p":yO(1280,720,15,120,1130),"720p_auto":yO(1280,720,30,900,3e3),"720p_1":yO(1280,720,15,120,1130),"720p_2":yO(1280,720,30,120,2e3),"720p_3":yO(1280,720,30,120,1710),"720p_5":yO(960,720,15,120,910),"720p_6":yO(960,720,30,120,1380),"1080p":yO(1920,1080,15,120,2080),"1080p_1":yO(1920,1080,15,120,2080),"1080p_2":yO(1920,1080,30,120,3e3),"1080p_3":yO(1920,1080,30,120,3150),"1080p_5":yO(1920,1080,60,120,4780),"1440p":yO(2560,1440,30,120,4850),"1440p_1":yO(2560,1440,30,120,4850),"1440p_2":yO(2560,1440,60,120,7350),"4k":yO(3840,2160,30,120,8910),"4k_1":yO(3840,2160,30,120,8910),"4k_3":yO(3840,2160,60,120,13500)},_O={"480p":bO(640,480,5),"480p_1":bO(640,480,5),"480p_2":bO(640,480,30),"480p_3":bO(640,480,15),"720p":bO(1280,720,5),"720p_auto":yO(1280,720,30,900,3e3),"720p_1":bO(1280,720,5),"720p_2":bO(1280,720,30),"720p_3":bO(1280,720,15),"1080p":bO(1920,1080,5),"1080p_1":bO(1920,1080,5),"1080p_2":bO(1920,1080,30),"1080p_3":bO(1920,1080,15)},SO={"1SL1TL":EO(1,1),"3SL3TL":EO(3,3),"2SL3TL":EO(2,3)};function CO(e){return e||(e="480p_1"),"string"==typeof e?Object.assign({},wO[e]):e}function TO(e){return"string"==typeof e?Object.assign({},_O[e]):e}function IO(e){return"string"==typeof e?Object.assign({},SO[e]):e}const RO={speech_low_quality:vO(16e3,!1),speech_standard:vO(32e3,!1,18),music_standard:vO(48e3,!1),standard_stereo:vO(48e3,!0,56),high_quality:vO(48e3,!1,128),high_quality_stereo:vO(48e3,!0,192)};function xO(e){return"string"==typeof e?Object.assign({},RO[e]):e}const NO=[];function OO(e){return RR(e,"mediaSource",["screen","window","application"]),!0}let kO=function(e){return e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track",e}({}),PO=function(e){return e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream",e.SCREEN_LOW_TRACK="screen_low_track",e}({}),BO=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),LO=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.HIGH_STREAM_LAYER1=4]="HIGH_STREAM_LAYER1",e[e.HIGH_STREAM_LAYER2=5]="HIGH_STREAM_LAYER2",e[e.HIGH_STREAM_LAYER3=6]="HIGH_STREAM_LAYER3",e[e.HIGH_STREAM_LAYER4=7]="HIGH_STREAM_LAYER4",e[e.HIGH_STREAM_LAYER5=8]="HIGH_STREAM_LAYER5",e[e.HIGH_STREAM_LAYER6=9]="HIGH_STREAM_LAYER6",e}({}),DO=function(e){return e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY",e[e.HIGH_STREAM_LAYER1=3]="HIGH_STREAM_LAYER1",e[e.HIGH_STREAM_LAYER2=4]="HIGH_STREAM_LAYER2",e[e.HIGH_STREAM_LAYER3=5]="HIGH_STREAM_LAYER3",e[e.HIGH_STREAM_LAYER4=6]="HIGH_STREAM_LAYER4",e[e.HIGH_STREAM_LAYER5=7]="HIGH_STREAM_LAYER5",e[e.HIGH_STREAM_LAYER6=8]="HIGH_STREAM_LAYER6",e}({}),UO=function(e){return e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received",e.TRACK_UPDATED="track-updated",e}({}),MO=function(e){return e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed",e}({}),FO=function(e){return e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed",e}({}),jO=function(e){return e.AUDIO="audio",e.VIDEO="video",e.DATA="data",e}({}),QO=function(e){return e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source",e}({});const VO={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},HO={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},zO={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},KO={uplinkNetworkQuality:0,downlinkNetworkQuality:0},GO={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let WO=function(e){return e.ON_TRACK="on_track",e.ON_NODE="on_node",e}({}),qO=function(e){return e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints",e}({}),YO=function(e){return e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND",e}({}),XO=function(e){return e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",e}({}),JO=function(e){return e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata",e}({}),ZO=function(e){return e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen",e}({});const $O={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};let ek=function(e){return e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error",e}({});function tk(e,t,n,r,i){var o,a,s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=ii(o=gi(a=n.slice()).call(a)).call(o,(function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}function nk(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ik(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rk(Object(n),!0).forEach((function(t){nk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class ok extends QR{set _mediaStreamTrack(e){e!==this.mediaStreamTrack&&(this.safeEmit(UO.TRACK_UPDATED,e),this.mediaStreamTrack=e)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(e,t){super(),nk(this,"trackMediaType",void 0),nk(this,"_ID",void 0),nk(this,"_rtpTransceiver",void 0),nk(this,"_lowRtpTransceiver",void 0),nk(this,"_hints",[]),nk(this,"_isClosed",!1),nk(this,"_originMediaStreamTrack",void 0),nk(this,"mediaStreamTrack",void 0),nk(this,"_external",{}),this._ID=t||wx(8,"track-"),this._originMediaStreamTrack=e,this.mediaStreamTrack=e,function(e){Br(NO).call(NO,e)||NO.push(e)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){return e||hx((()=>{var e;uO.reportApiInvoke(null,{name:zR.GET_MEDIA_STREAM_TRACK,options:[],tag:KR.TRACER}).onSuccess((null===(e=this._mediaStreamTrack)||void 0===e?void 0:e.label)||"")}),this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===BO.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){const t=NO.indexOf(e);-1!==t&&NO.splice(t,1)}(this),this.emit(MO.CLOSED),this.removeAllListeners(UO.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===BO.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(UO.TRANSCEIVER_UPDATED,e,t)}}class ak extends ok{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),nk(this,"_enabled",!0),nk(this,"_muted",!1),nk(this,"_isExternalTrack",!1),nk(this,"_isClosed",!1),nk(this,"_enabledMutex",void 0),nk(this,"processor",void 0),nk(this,"_processorContext",void 0),nk(this,"_handleTrackEnded",(()=>{this.onTrackEnded()})),this._enabledMutex=new Lx("".concat(this.getTrackId())),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,rO.debug("[".concat(this.getTrackId(),"] close")),this.emit(kO.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isExternalTrack=n,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await rx(this,kO.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){rO.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(MO.TRACK_ENDED)}stateCheck(e,t){if(rO.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),IR(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new TR(CR.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",rO);if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new TR(CR.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",rO)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():nh.resolve([])}}const sk=window.AudioContext||window.webkitAudioContext;let ck=null;const lk=new class extends QR{constructor(){super(...arguments),nk(this,"prevState",void 0),nk(this,"curState",void 0),nk(this,"currentTime",void 0),nk(this,"currentTimeStuckAt",void 0),nk(this,"interruptDetectorTrack",void 0),nk(this,"onLocalAudioTrackMute",(()=>{rO.info("ios15-interruption-start"),this.emit(gO.IOS_15_16_INTERRUPTION_START)})),nk(this,"onLocalAudioTrackUnmute",(async()=>{rO.info("ios15-interruption-end"),"running"!==this.curState||this.duringInterruption?rO.info("ios15-interruption-end-canceled"):(ck&&await ck.suspend(),this.emit(gO.IOS_15_16_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){rO.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){rO.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function dk(){if(!ck){if(function(){if(!sk)return void rO.error("your browser is not support web audio");rO.info("create audio context");const e=ik({},CN("WEBAUDIO_INIT_OPTIONS"));rO.debug("audio context init option:",JSON.stringify(e)),ck=new sk(e),lk.curState=ck.state,ck.onstatechange=()=>{lk.prevState=lk.curState,lk.curState=ck?ck.state:void 0;const{prevState:e,curState:t}=lk,n="running"===t,r="interrupted"===t,i="running"===e,o="suspended"===e,a="interrupted"===e,s=WI().osVersion;(nR()||fR())&&i&&r&&(rO.info("ios".concat(s,"-interruption-start")),lk.emit(gO.IOS_INTERRUPTION_START)),(nR()||fR())&&(o||a)&&n&&(rO.info("ios".concat(s,"-interruption-end")),lk.emit(gO.IOS_INTERRUPTION_END)),e!==t&&lk.emit(gO.STATE_CHANGE,t,e)},setInterval((()=>{var e;const t=null===(e=ck)||void 0===e?void 0:e.currentTime;lk.currentTime!==t?(lk.currentTimeStuckAt&&(rO.debug("AudioContext current time resume at ".concat(t)),lk.currentTimeStuckAt=void 0),lk.currentTime=t):(t!==lk.currentTimeStuckAt&&(uO.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:t},tag:KR.TRACER}).onSuccess(),rO.warning("AudioContext current time stuck at ".concat(t))),lk.currentTimeStuckAt=t)}),5e3),async function(e){const t=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let n,r=!1,i=!1,o=!1;function a(t){"running"===e.state?s(!1):nR()||fR()?"suspended"===e.state&&(s(!0),t&&e.resume().then(c,c)):"closed"!==e.state&&(s(!0),t&&e.resume().then(c,c))}function s(e){if(r!==e){r=e;for(let n=0,r=t;n<r.length;n+=1){const t=r[n];e?window.addEventListener(t,l,{capture:!0,passive:!0}):window.removeEventListener(t,l,{capture:!0,passive:!0})}}}function c(){a(!1)}function l(){a(!0)}function d(e){if(!o)if(n.paused)if(e){let t;u(!1),o=!0;try{t=n.play(),t?t.then(A,A):(n.addEventListener("playing",A),n.addEventListener("abort",A),n.addEventListener("error",A))}catch(e){A()}}else u(!0);else u(!1)}function u(e){if(i!==e){i=e;for(let n=0,r=t;n<r.length;n++){const t=r[n];e?window.addEventListener(t,h,{capture:!0,passive:!0}):window.removeEventListener(t,h,{capture:!0,passive:!0})}}}function A(){n.removeEventListener("playing",A),n.removeEventListener("abort",A),n.removeEventListener("error",A),o=!1,d(!1)}function h(){d(!0)}if(nR()){const t=e.createMediaStreamDestination(),r=document.createElement("div");r.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=r.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=t.stream,d(!0)}lk.on(gO.STATE_CHANGE,(function(){a(!0)})),a(!1)}(ck)}(),!ck)throw new TR(CR.NOT_SUPPORTED,"can not create audio context");return ck}return ck}function uk(e){if(function(){if(null!==Ak)return Ak;const e=dk(),t=e.createBufferSource(),n=e.createGain(),r=e.createGain();t.connect(n),t.connect(r),t.disconnect(n);let i=!1;try{t.disconnect(n)}catch(e){i=!0}return t.disconnect(),Ak=i,i}())return;const t=e.connect,n=e.disconnect;e.connect=(n,r,i)=>{var o;return e._inputNodes||(e._inputNodes=[]),Br(o=e._inputNodes).call(o,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,r,i)):t.call(e,n,r)),e},e.disconnect=(r,i,o)=>{n.call(e),r?sx(e._inputNodes,r):e._inputNodes=[];for(const n of e._inputNodes)t.call(e,n)}}let Ak=null;function hk(e,t){let n=!1;const r=1/t;if(CN("DISABLE_WEBAUDIO")){const t=window.setInterval((()=>{n?window.clearInterval(t):e(performance.now()/1e3)}),1e3*r)}else{const t=dk();let i=t.createGain();i.gain.value=0,i.connect(t.destination);const o=()=>{if(n)return void(i=null);const a=t.createOscillator();a.onended=o,a.connect(i),a.start(0),a.stop(t.currentTime+r),e(t.currentTime)};o()}return()=>{n=!0}}class pk{constructor(){nk(this,"context",void 0),nk(this,"analyserNode",void 0),nk(this,"sourceNode",void 0),this.context=dk(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode)return 0;if(!this.context||nR()||fR()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{const t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(let n=0;n<e.length;++n)e[n]=t[n]/128-1}const t=ii(e).call(e,((e,t)=>e+t*t),0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){rO.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class fk extends QR{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var n;null===(n=this.sourceNode)||void 0===n||n.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),nk(this,"outputNode",void 0),nk(this,"outputTrack",void 0),nk(this,"isPlayed",!1),nk(this,"sourceNode",void 0),nk(this,"context",void 0),nk(this,"audioBufferNode",void 0),nk(this,"destNode",void 0),nk(this,"audioOutputLevel",0),nk(this,"volumeLevelAnalyser",void 0),nk(this,"_processedNode",void 0),nk(this,"playNode",void 0),nk(this,"isDestroyed",!1),nk(this,"onNoAudioInput",void 0),nk(this,"isNoAudioInput",!1),nk(this,"_noAudioInputCount",0),this.context=dk(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),uk(this.outputNode),this.volumeLevelAnalyser=new pk}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(QO.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const n=e.outputBuffer.getChannelData(t);for(let e=0;e<n.length;e+=1)n[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!pO().webAudioMediaStreamDest)throw new TR(CR.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&lx((()=>{lk.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;nR()||fR()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume();const t=this.volumeLevelAnalyser.getAnalyserNode();let n;t.getFloatTimeDomainData?(n=new Float32Array(t.fftSize),t.getFloatTimeDomainData(n)):(n=new Uint8Array(t.fftSize),t.getByteTimeDomainData(n));let r=!1;for(let i=0;i<n.length;i++)0!==n[i]&&(r=!0);return r?(this.isNoAudioInput=!1,!0):(await Ex(200),await this.checkHasAudioInput(e?e+1:1)&&r)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class mk extends fk{get isFreeze(){return!1}constructor(e,t,n){var r;if(super(),nk(this,"sourceNode",void 0),nk(this,"track",void 0),nk(this,"clonedTrack",void 0),nk(this,"audioElement",void 0),nk(this,"isCurrentTrackCloned",!1),nk(this,"isRemoteTrack",!1),nk(this,"originVolumeLevelAnalyser",void 0),nk(this,"rebuildWebAudio",(async()=>{if(rO.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void rO.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then((()=>rO.info("resume success"))),rO.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),uk(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const n=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(n,this.context.currentTime),uk(this.outputNode),this.emit(QO.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()})),"audio"!==e.kind)throw new TR(CR.UNEXPECTED_ERROR);this.track=e;const i=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(i),uk(this.sourceNode),n){const e=n.clone();e.enabled=!0,this.clonedTrack=e,rO.debug("create an unmuted track ".concat(e.id," from the original track ").concat(n.id," to get the volume"));const t=this.context.createMediaStreamSource(new MediaStream([e]));uk(t),this.originVolumeLevelAnalyser=new pk,this.originVolumeLevelAnalyser.updateSource(t)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=i;const o=WI();t&&o.os===VI.IOS&&Number(null===(r=o.osVersion)||void 0===r?void 0:r.split(".")[0])<15&&(lk.on(gO.STATE_CHANGE,(()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()})),this.checkHasAudioInput().then((e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)})))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),uk(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(QO.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),lk.off("state-change",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){const t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),rO.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));const n=this.context.createMediaStreamSource(new MediaStream([t]));uk(n),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(n)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function gk(e,t,n){const r=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,i={audio:!!n&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:r(t.height,1080),maxWidth:r(t.width,1920)}}};return t.frameRate&&"number"!=typeof t.frameRate?(i.video.mandatory.maxFrameRate=t.frameRate.max,i.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(i.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(i)}async function vk(e,t){const n=await yk(e.mediaSource),{sourceId:r,audio:i}=await function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new nh(((n,r)=>{const i=document.createElement("div");i.innerText="share screen",i.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const o=document.createElement("div");o.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const a=document.createElement("div");a.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",a.setAttribute("style","height: 12%;");const s=document.createElement("div");s.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const c=document.createElement("div");c.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const l=document.createElement("button");l.innerHTML="cancel",l.setAttribute("style","width: 85px;"),l.onclick=()=>{document.body.removeChild(A);const e=new Error("NotAllowedError");e.name="NotAllowedError",r(e)};let d=t;const u=document.createElement("div");if(t){const e=document.createElement("input");e.setAttribute("type","checkbox");const t=document.createElement("span");e.setAttribute("style","margin-right: 6px;"),t.innerText="Share audio",e.checked=d,e.onchange=()=>{d=e.checked},u.appendChild(e),u.appendChild(t)}c.appendChild(u),c.appendChild(l),o.appendChild(a),o.appendChild(s),o.appendChild(c);const A=document.createElement("div");A.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),A.appendChild(i),A.appendChild(o),document.body.appendChild(A),e.map((e=>{if(e.id){const t=document.createElement("div");t.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let r=e.thumbnail;try{const{width:e}=r.getSize();e>1920&&(r=r.resize({width:1920}))}catch(e){throw e&&e.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),e}t.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",t.onclick=()=>{document.body.removeChild(A),n({sourceId:e.id,audio:d})},s.appendChild(t)}}))}))}(n,t);return await gk(r,e,i)}async function yk(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);const n=HR();if(!n)throw console.error("failed to fetch electron, please mount it to window"),new TR(CR.ELECTRON_IS_NULL);let r=null;try{var i;r=(null===(i=n.desktopCapturer)||void 0===i?void 0:i.getSources({types:t}))||n.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch(e){r=null}r&&r.then||(r=new nh(((e,r)=>{n.desktopCapturer.getSources({types:t},((t,n)=>{t?r(t):e(n)}))})));try{return await r}catch(e){throw new TR(CR.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}const bk=new Lx("safari");let Ek=!1,wk=!1;async function _k(e,t){let n=0,r=null;for(;n<2;)try{r=await Sk(e,t,n>0);break}catch(e){if(e instanceof TR)throw rO.error("[".concat(t,"] ").concat(e.toString())),e;const r=Ck(e.name||e.code||e,e.message);if(r.code===CR.MEDIA_OPTION_INVALID){rO.debug("[".concat(t,"] detect media option invalid, retry")),n+=1,await Ex(500);continue}throw rO.error("[".concat(t,"] ").concat(r.toString())),r}if(!r)throw new TR(CR.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return r}async function Sk(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new TR(CR.NOT_SUPPORTED,"can not find getUserMedia");n&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const r=pO(),i=new MediaStream;if(e.audioSource&&i.addTrack(e.audioSource),e.videoSource&&i.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return rO.debug("Using Video Source/ Audio Source"),i;if(e.screen)if(HR())e.screen.sourceId?Tk(i,await gk(e.screen.sourceId,e.screen,!!e.screenAudio)):Tk(i,await vk(e.screen,!!e.screenAudio));else if(ZI()&&e.screen.extensionId&&e.screen.mandatory){if(!r.getStreamFromExtension)throw new TR(CR.NOT_SUPPORTED,"This browser does not support screen sharing");rO.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));const n=await(a=e.screen.extensionId,s=t,new nh(((e,t)=>{try{chrome.runtime.sendMessage(a,{getStream:!0},(n=>{if(!n||!n.streamId)return rO.error("[".concat(s,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new TR(CR.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(e){rO.error("[".concat(s,"] AgoraRTC screensharing plugin is not accessible(").concat(a,")"),e.toString()),t(new TR(CR.CHROME_PLUGIN_NOT_INSTALL))}})));e.screen.mandatory.chromeMediaSourceId=n,Tk(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(r.getDisplayMedia){var o;e.screen.mediaSource&&OO(e.screen.mediaSource);const n={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:null!==(o=e.screen.displaySurface)&&void 0!==o?o:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource},{selfBrowserSurface:r,surfaceSwitching:a,systemAudio:s,preferCurrentTab:c}=e.screen,l={selfBrowserSurface:r,surfaceSwitching:a,systemAudio:s,preferCurrentTab:c};!r&&delete l.selfBrowserSurface,!a&&delete l.surfaceSwitching,!s&&delete l.systemAudio,!c&&delete l.preferCurrentTab,rO.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:n,audio:e.screenAudio,controls:l})),Tk(i,await navigator.mediaDevices.getDisplayMedia(ik({video:n,audio:e.screenAudio},l)))}else{if(!tR())throw rO.error("[".concat(t,"] This browser does not support screenSharing")),new TR(CR.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&OO(e.screen.mediaSource);const n={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};rO.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(n))),Tk(i,await navigator.mediaDevices.getUserMedia(n))}}var a,s;if(!e.video&&!e.audio)return i;let c={video:e.video,audio:e.audio},l=CN("MEDIA_DEVICE_CONSTRAINTS");if(l)try{"string"==typeof l&&(l=JSON.parse(l)),c=Rx(c,l)}catch(e){}rO.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(c)),WI();let d,u=null;($I()||nR()||JI())&&(u=await bk.lock());try{d=await navigator.mediaDevices.getUserMedia(c)}catch(e){throw u&&u(),e}return c.audio&&(Ek=!0),c.video&&(wk=!0),Tk(i,d),u&&u(),i}function Ck(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new TR(CR.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new TR(CR.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new TR(CR.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new TR(CR.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new TR(CR.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new TR(CR.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return rO.error("getUserMedia unexpected error",e),new TR(CR.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function Tk(e,t){const n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(r&&e.removeTrack(r),e.addTrack(o)),i&&(n&&e.removeTrack(n),e.addTrack(i))}const Ik=new class extends QR{get state(){return this._state}set state(e){e!==this._state&&(this.emit(XO.STATE_CHANGE,e),this._state=e)}constructor(){super(),nk(this,"_state",YO.IDLE),nk(this,"isAccessMicrophonePermission",!1),nk(this,"isAccessCameraPermission",!1),nk(this,"lastAccessMicrophonePermission",!1),nk(this,"lastAccessCameraPermission",!1),nk(this,"checkdeviceMatched",!1),nk(this,"deviceInfoMap",new Map),this.init().then((()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval((()=>{(CN("ENUMERATE_DEVICES_INTERVAL")||(bR()||YI()===VI.HARMONY_OS)&&yR())&&this.updateDevicesInfo()}),CN("ENUMERATE_DEVICES_INTERVAL_TIME"))})).catch((e=>rO.error(e.toString())))}async enumerateDevices(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new TR(CR.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const r=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(r);let o=!this.isAccessMicrophonePermission&&e,a=!this.isAccessCameraPermission&&t;i.audio&&(o=!1),i.video&&(a=!1);let s=null,c=null,l=null;if(!n&&(o||a)){if(bk.isLocked&&(rO.debug("[device manager] wait GUM lock"),(await bk.lock())(),rO.debug("[device manager] GUM unlock")),Ek&&(o=!1,this.isAccessMicrophonePermission=!0),wk&&(a=!1,this.isAccessCameraPermission=!0),rO.debug("[device manager] check media device permissions",e,t,o,a),o&&a){try{l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=Ck(e.name||e.code||e,e.message);if(t.code===CR.PERMISSION_DENIED)throw t;rO.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{s=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){const t=Ck(e.name||e.code||e,e.message);if(t.code===CR.PERMISSION_DENIED)throw t;rO.warning("getUserMedia failed in getDevices",t)}this.isAccessMicrophonePermission=!0}else if(a){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){const t=Ck(e.name||e.code||e,e.message);if(t.code===CR.PERMISSION_DENIED)throw t;rO.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0}rO.debug("[device manager] mic permission",e,"cam permission",t)}try{const e=await navigator.mediaDevices.enumerateDevices();return s&&s.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),l&&l.getTracks().forEach((e=>e.stop())),s=null,c=null,l=null,e}catch(e){return s&&s.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),l&&l.getTracks().forEach((e=>e.stop())),s=null,c=null,l=null,new TR(CR.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audioinput"===e.kind))}async getCamerasDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter((e=>"videoinput"===e.kind))}async getSpeakers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audiooutput"===e.kind))}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach((n=>{n.device.label===e&&(t=n.device.deviceId)})),t}async getDeviceById(e){const t=(await this.enumerateDevices(!0,!0,!0)).find((t=>t.deviceId===e));if(!t)throw new TR(CR.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=YO.INITING;try{await this.updateDevicesInfo(),this.state=YO.INITEND}catch(e){throw rO.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=YO.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new TR(CR.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),n=[];if(e[0]&&e[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const t=e.find((e=>"audioinput"===e.kind&&"default"===e.deviceId)),n=e.find((e=>"audiooutput"===e.kind&&"default"===e.deviceId));t&&n?n.groupId===t.groupId?rO.debug("[device-check] default input ".concat(t.label," and output ").concat(n.label," is the same group")):rO.debug("[device-check] default input ".concat(t.label," and output ").concat(n.label," is not the same group")):rO.debug("[device-check] default input or output not found")}const r=this.checkMediaDeviceInfoIsOk(e);if(e.forEach((e=>{if(!e.deviceId)return;const r=this.deviceInfoMap.get("".concat(e.kind,"_").concat(e.deviceId));if("ACTIVE"!==(r?r.state:"INACTIVE")){const r={initAt:t,updateAt:t,device:e,state:"ACTIVE"};this.deviceInfoMap.set("".concat(e.kind,"_").concat(e.deviceId),r),n.push(r)}r&&(r.updateAt=t)})),this.deviceInfoMap.forEach(((e,r)=>{"ACTIVE"===e.state&&e.updateAt!==t&&(e.state="INACTIVE",n.push(e))})),this.state!==YO.INITEND)return r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));n.forEach((e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(XO.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(XO.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(XO.PLAYOUT_DEVICE_CHANGED,e)}})),r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=e.filter((e=>"audioinput"===e.kind)),n=e.filter((e=>"videoinput"===e.kind)),r={audio:!1,video:!1};for(const i of t)if(i.label&&i.deviceId){r.audio=!0;break}for(const i of n)if(i.label&&i.deviceId){r.video=!0;break}return r}};let Rk=!1;const xk=new class extends QR{constructor(){super(...arguments),nk(this,"onAutoplayFailed",void 0),nk(this,"onAudioAutoplayFailed",void 0)}};function Nk(){if(WI(),!Rk){const e=t=>{t.preventDefault(),Rk=!1,ER()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};Rk=!0,ER()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),rO.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),xk.onAutoplayFailed?xk.onAutoplayFailed():xk.onAudioAutoplayFailed?rO.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):rO.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),xk.emit("autoplay-failed")}}function Ok(e,t,n,r){if(!e)return;const i=uO.getBaseInfoBySessionId(e);if(!i)return;const o=i.info,a=Date.now(),s=ik(ik({},o),{},{vid:void 0===o.vid?0:Number(o.vid),lts:a,elapse:a-i.startTime,cbRegistered:xk.onAutoplayFailed||xk.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:r,extend:void 0});uO.send({type:cO.AUTOPLAY_FAILED,data:s},!0)}const kk=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],Pk=new class{constructor(){nk(this,"onAutoplayFailed",void 0),nk(this,"elementMap",new Map),nk(this,"elementStateMap",new Map),nk(this,"elementsNeedToResume",[]),nk(this,"sinkIdMap",new Map),nk(this,"autoResumeAfterInterruption",(e=>{Array.from(this.elementMap.entries()).forEach((t=>{let[n,r]=t;const i=this.elementStateMap.get(n),o=r.srcObject.getAudioTracks()[0],a=o&&o.readyState;if(rO.debug("resume after interrupted, ele: ".concat(i," audio: ").concat(a," ").concat(e)),"live"===a){if(e)return r.pause(),void r.play();if("running"===lk.curState)return AR()?(r.pause(),void r.play()):void(i&&"paused"===i&&r.play())}}))})),nk(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{Array.from(this.elementMap.entries()).forEach((e=>{let[t,n]=e;const r=n.srcObject.getAudioTracks()[0];r&&"live"===r.readyState&&(rO.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),n.pause(),n.play())}))})),this.autoResumeAudioElement(),lk.on(gO.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),lk.on(gO.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),lk.on(gO.STATE_CHANGE,(()=>{nR()&&"suspended"===lk.prevState&&"running"===lk.curState&&this.autoResumeAfterInterruption()}))}async setSinkID(e,t){const n=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),n)try{await n.setSinkId(t)}catch(e){throw new TR(CR.PERMISSION_DENIED,"can not set sink id: "+e.toString())}}play(e,t,n,r){if(this.elementMap.has(t))return;const i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,JO.INIT),this.setVolume(t,n);const o=this.sinkIdMap.get(t);if(o)try{i.setSinkId(o).catch((e=>{rO.warning("[".concat(t,"] set sink id failed"),e.toString())}))}catch(e){rO.warning("[".concat(t,"] set sink id failed"),e.toString())}const a=i.play();a&&a.then&&a.catch((e=>{r&&Ok(r,"audio",e.message,t),rO.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(rO.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),lx((()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),Nk()})))}))}updateTrack(e,t){const n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&"playing"===this.elementStateMap.get(e)}setVolume(e,t){const n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)}stop(e){const t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;const n=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(n,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){kk.forEach((n=>{t.addEventListener(n,(n=>{const r=this.elementStateMap.get(e),i="pause"===n.type?"paused":n.type;if(rO.debug("[".concat(e,"] audio-element-status change ").concat(r," => ").concat(i)),"error"===n.type){const n=null==t?void 0:t.error;n&&rO.error("[".concat(e,"] media error, code: ").concat(n.code,", message: ").concat(n.message))}this.elementStateMap.set(e,i)}))}))}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach((e=>{e.play().then((e=>{rO.debug("Auto resume audio element success")})).catch((e=>{rO.warning("Auto resume audio element failed!",e)}))})),this.elementsNeedToResume=[]};new nh((e=>{document.body?e():window.addEventListener("load",(()=>e()))})).then((()=>{ER()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))}))}};function Bk(){return function(e,t,n){const r=n.value;return"function"==typeof r&&(n.value=function(){this._isClosed&&new TR(CR.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",rO);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=r.apply(this,t);return i instanceof nh?new nh(((e,t)=>{i.then(e).catch(t)})):i}),n}}class Lk extends QR{constructor(e){super(),nk(this,"name","VideoProcessorDestination"),nk(this,"ID","0"),nk(this,"_source",void 0),nk(this,"videoContext",void 0),nk(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new TR(CR.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new TR(CR.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(WO.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(WO.ON_TRACK,void 0)}}class Dk extends QR{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),nk(this,"constraintsMap",new Map),nk(this,"statsRegistry",[]),nk(this,"usageRegistry",[]),nk(this,"trackId",void 0),nk(this,"direction",void 0),nk(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await nx(this,qO.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var n;return rO.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),rx(this,qO.REQUEST_UPDATE_CONSTRAINTS,Array.from(uh(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return rO.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),rx(this,qO.REQUEST_UPDATE_CONSTRAINTS,Array.from(uh(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:r,cb:i}of this.statsRegistry)try{const o=i();e.push({processorID:t,processorName:n,type:r,stats:o})}catch(e){rO.error(new TR(CR.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof nh&&(n=await n),e.push(ik(ik({},n),{},{direction:this.direction}))}catch(e){rO.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class Uk extends QR{constructor(e){super(),nk(this,"name","AudioProcessorDestination"),nk(this,"ID","0"),nk(this,"inputTrack",void 0),nk(this,"inputNode",void 0),nk(this,"audioProcessorContext",void 0),nk(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new TR(CR.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new TR(CR.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(WO.ON_TRACK,void 0),this.emit(WO.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(WO.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(WO.ON_NODE,this.inputNode))}}class Mk extends QR{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,n){super(),nk(this,"constraintsMap",new Map),nk(this,"statsRegistry",[]),nk(this,"audioContext",void 0),nk(this,"trackId",void 0),nk(this,"direction",void 0),nk(this,"usageRegistry",[]),nk(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=n}async getConstraints(){return nx(this,qO.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var n;return rO.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),rx(this,qO.REQUEST_UPDATE_CONSTRAINTS,Array.from(uh(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),rx(this,qO.REQUEST_UPDATE_CONSTRAINTS,Array.from(uh(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:r,cb:i}of this.statsRegistry)try{const o=i();e.push({processorID:t,processorName:n,type:r,stats:o})}catch(e){rO.error(new TR(CR.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof nh&&(n=await n),e.push(ik(ik({},n),{},{direction:this.direction}))}catch(e){rO.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class Fk extends QR{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),nk(this,"context",void 0),nk(this,"processSourceNode",void 0),nk(this,"outputTrack",void 0),nk(this,"processedNode",void 0),nk(this,"clonedTrack",void 0),nk(this,"outputNode",void 0),this.outputNode=new jk}setVolume(){}createOutputTrack(){throw new TR(CR.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class jk{disconnect(){}connect(){}}function Qk(e){return new nh(((t,n)=>{let r=!1;const i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);const o=nR()?"canplay":"playing";i.addEventListener(o,(()=>{const e=i.videoWidth,n=i.videoHeight;!e&&tR()||(r=!0,i.srcObject=null,i.remove(),t([e,n]))})),i.srcObject=new MediaStream([e]),i.play().catch(Sx),setTimeout((()=>{r||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))}),4e3)}))}function Vk(e){const t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});const n=CO(e.encoderConfig);return null!=n.width&&(t.width=n.width),null!=n.height&&(t.height=n.height),!gR()&&n.frameRate&&(t.frameRate=n.frameRate),eR()&&"object"==typeof t.frameRate&&(t.frameRate.max=60),tR()&&(t.frameRate={ideal:30,max:30}),t}function Hk(e){const t={};return gR()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,ZI()&&e.ANS&&(t.googHighpassFilter=e.ANS))),t}function zk(e){const t=Hk(e);if(e.encoderConfig){const n=xO(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),bR()&&(t.sampleRate=void 0),t}const Kk=e=>{const t=e._encoderConfig;if(!t)return;const{frameRate:n,width:r,height:i}=e.getMediaStreamTrackSettings();let{frameRate:o=n,width:a=r,height:s=i}=t;if(!o||!a||!s)return;a=Nx(a),s=Nx(s),o=Nx(o);const{max:c,min:l}=function(e,t,n){const r=200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75);return{min:Math.floor(r),max:Math.floor(4*r)}}(a,s,o),{bitrateMax:d,bitrateMin:u}=t||{};d||rO.debug("calculate bitrate: [w: ".concat(a,", h: ").concat(s,", fps: ").concat(o,"] => [brMax: ").concat(d,", brMin: ").concat(u,"]"));const{maxFramerate:A}=CN("ENCODER_CONFIG_LIMIT");return A&&"number"==typeof A&&(o=Math.min(o,A)),{frameRate:o,bitrateMax:d||c,bitrateMin:u||l,scaleResolutionDownBy:1,scale:0}},Gk=async(e,t,n)=>await(async(e,t,n)=>{const r=function(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.slice(n,n+2),16));return Uint8Array.from(t)}(kx(""+t+n)).slice(0,16),i=r.slice(0,12),o=await window.crypto.subtle.importKey("raw",r,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},o,e))})(e.buffer,t,n),Wk=e=>{const t=document.createElement("canvas");return t.width=2,t.height=2,new nh(((n,r)=>{t.toBlob((async e=>{if(t.remove(),e){const r=await qk(e);n({buffer:r,width:t.width,height:t.height})}else r(new TR(CR.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,1)}))},qk=async e=>{const t=await e.arrayBuffer();return new Uint8Array(t)};var Yk,Xk,Jk,Zk,$k,eP,tP,nP,rP,iP,oP,aP,sP,cP,lP,dP,uP,AP,hP,pP,fP,mP,gP,vP,yP,bP,EP,wP,_P,SP,CP,TP,IP,RP,xP,NP,OP,kP,PP,BP;let LP=(Yk=dO({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),Xk=dO({argsMap:(e,t)=>[e.getTrackId(),t]}),Jk=Bk(),Zk=Dx("LocalAudioTrack","_enabledMutex"),$k=dO({argsMap:(e,t)=>[e.getTrackId(),t]}),eP=Bk(),tP=Dx("LocalAudioTrack","_enabledMutex"),nP=dO({argsMap:(e,t)=>[e.getTrackId(),t]}),rP=Bk(),iP=Bk(),oP=Bk(),aP=dO({argsMap:e=>[e.getTrackId()]}),sP=Bk(),cP=dO({argsMap:e=>[e.getTrackId()]}),lP=Bk(),dP=dO({argsMap:e=>[e.getTrackId()]}),uP=dO({argsMap:(e,t)=>[e.getTrackId(),t.name]}),AP=dO({argsMap:e=>[e.getTrackId()]}),tk((hP=class extends ak{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?Pk.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,n,r){super(e,n),nk(this,"trackMediaType",jO.AUDIO),nk(this,"_encoderConfig",void 0),nk(this,"_trackSource",void 0),nk(this,"metadata",[]),nk(this,"_enabled",!0),nk(this,"_volume",100),nk(this,"_useAudioElement",!0),nk(this,"_bypassWebAudio",!1),nk(this,"processor",void 0),nk(this,"_processorContext",void 0),nk(this,"_processorDestination",void 0),nk(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!r,this._trackSource=new Fk,CN("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),CN("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),$I()&&!ck?setTimeout((()=>this.initWebAudio())):this.initWebAudio()}setVolume(e){xR(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Pk.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void rO.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,rx(this,kO.NEED_REPLACE_TRACK,this).then((()=>{rO.debug("[".concat(this.getTrackId(),"] replace web audio track success"))})).catch((e=>{rO.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)})))}catch(e){}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!fO())throw new TR(CR.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Pk.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,n){return this._setEnabled(e,t,n)}async _setEnabled(e,t,n){if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(rO.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{n||(this._enabled=!0),await rx(this,kO.NEED_ENABLE_TRACK,this),rO.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(e){throw n||(this._enabled=!1),rO.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}}else{this._originMediaStreamTrack.enabled=!1,n||(this._enabled=!1);try{await rx(this,kO.NEED_DISABLE_TRACK,this)}catch(e){throw n||(this._enabled=!0),rO.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,rO.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await rx(this,kO.NEED_MUTE_TRACK,this):await rx(this,kO.NEED_UNMUTE_TRACK,this))}getStats(){return hx((()=>{rO.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),ix(this,kO.GET_STATS)||ik({},VO)}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(QO.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(QO.ON_AUDIO_BUFFER),this._source.on(QO.ON_AUDIO_BUFFER,(t=>e(t)))}play(){rO.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(rO.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Pk.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){rO.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Pk.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];rO.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Pk.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await rx(this,kO.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return nh.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new TR(CR.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new TR(CR.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(WO.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e),await rx(this,kO.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await rx(this,kO.NEED_REPLACE_TRACK,this))})),e.on(WO.ON_NODE,(e=>{this._source.processedNode=e}))}unbindProcessorDestinationEvents(e){e.removeAllListeners(WO.ON_TRACK),e.removeAllListeners(WO.ON_NODE)}bindProcessorContextEvents(e){e.on(qO.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}unbindProcessorContextEvents(e){e.removeAllListeners(qO.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof Fk&&(this._trackSource=new mk(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const e=new Mk(this._source.context,this.getTrackId(),"local"),t=new Uk(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(QO.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})})),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(Pk.stop(this.getTrackId()),this._source.play()),rx(this,kO.NEED_REPLACE_MIXING_TRACK,this).then((()=>{rO.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))})).catch((e=>{rO.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),e)}))),{processorContext:e,processorDestination:t}}}).prototype,"setVolume",[Yk],Object.getOwnPropertyDescriptor(hP.prototype,"setVolume"),hP.prototype),tk(hP.prototype,"setPlaybackDevice",[Xk,Jk],Object.getOwnPropertyDescriptor(hP.prototype,"setPlaybackDevice"),hP.prototype),tk(hP.prototype,"setEnabled",[Zk,$k,eP],Object.getOwnPropertyDescriptor(hP.prototype,"setEnabled"),hP.prototype),tk(hP.prototype,"setMuted",[tP,nP,rP],Object.getOwnPropertyDescriptor(hP.prototype,"setMuted"),hP.prototype),tk(hP.prototype,"getStats",[iP],Object.getOwnPropertyDescriptor(hP.prototype,"getStats"),hP.prototype),tk(hP.prototype,"setAudioFrameCallback",[oP],Object.getOwnPropertyDescriptor(hP.prototype,"setAudioFrameCallback"),hP.prototype),tk(hP.prototype,"play",[aP,sP],Object.getOwnPropertyDescriptor(hP.prototype,"play"),hP.prototype),tk(hP.prototype,"stop",[cP,lP],Object.getOwnPropertyDescriptor(hP.prototype,"stop"),hP.prototype),tk(hP.prototype,"close",[dP],Object.getOwnPropertyDescriptor(hP.prototype,"close"),hP.prototype),tk(hP.prototype,"pipe",[uP],Object.getOwnPropertyDescriptor(hP.prototype,"pipe"),hP.prototype),tk(hP.prototype,"unpipe",[AP],Object.getOwnPropertyDescriptor(hP.prototype,"unpipe"),hP.prototype),hP),DP=(pP=dO({argsMap:(e,t)=>[e.getTrackId(),t]}),fP=Bk(),mP=Dx("MicrophoneAudioTrack","_enabledMutex"),gP=dO({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),vP=Bk(),yP=dO({argsMap:e=>[e.getTrackId()]}),tk((bP=class extends LP{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,n,r){super(e,t.encoderConfig?xO(t.encoderConfig):{},r,CN("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),nk(this,"_config",void 0),nk(this,"_deviceName","default"),nk(this,"_constraints",void 0),nk(this,"_originalConstraints",void 0),nk(this,"_enabled",!0),this._config=t,this._constraints=n,this._originalConstraints=n,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),(AR()||hR())&&lk.bindInterruptDetectorTrack(this)}async setDevice(e){if(rO.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{const t=await Ik.getDeviceById(e),n={};n.audio=ik({},this._constraints),n.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let r=null;try{r=await _k(n,this.getTrackId())}catch(e){throw rO.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await _k({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw rO.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await Ik.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw rO.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}rO.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,n){if(t)return rO.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(rO.info("[".concat(this.getTrackId(),"] start setEnabled"),e),CN("AUTO_RESET_AUDIO_ROUTE")&&(nR()||fR())){const t=navigator.audioSession;t&&(e||(t.type="playback"),t.type="auto")}if(!e){var r;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(r=this._source.clonedTrack)||void 0===r||r.stop(),n||(this._enabled=!1);try{await rx(this,kO.NEED_DISABLE_TRACK,this)}catch(e){throw rO.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),e}return}const i=ik({},this._constraints),o=Ik.searchDeviceIdByName(this._deviceName);o&&!i.deviceId&&(i.deviceId=o);try{n||(this._enabled=!0);const e=await _k({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await rx(this,kO.NEED_ENABLE_TRACK,this)}catch(e){throw n||(this._enabled=!1),rO.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}rO.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(AR()||hR())&&lk.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((nR()||fR())&&this._enabled&&!this._isClosed&&lk.duringInterruption){const e=async()=>{lk.off(gO.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(rO.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};lk.on(gO.IOS_INTERRUPTION_END,e)}else rO.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(MO.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=Ik.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId=n),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();const e=await _k({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(qO.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}}))}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(qO.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[pP,fP],Object.getOwnPropertyDescriptor(bP.prototype,"setDevice"),bP.prototype),tk(bP.prototype,"setEnabled",[mP,gP,vP],Object.getOwnPropertyDescriptor(bP.prototype,"setEnabled"),bP.prototype),tk(bP.prototype,"close",[yP],Object.getOwnPropertyDescriptor(bP.prototype,"close"),bP.prototype),bP),UP=(EP=dO({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),wP=Bk(),_P=dO({argsMap:e=>[e.getTrackId()]}),SP=Bk(),CP=dO({argsMap:e=>[e.getTrackId()]}),TP=Bk(),IP=dO({argsMap:e=>[e.getTrackId()]}),RP=Bk(),xP=dO({argsMap:e=>[e.getTrackId()]}),NP=Bk(),OP=dO({argsMap:e=>[e.getTrackId()]}),kP=dO({argsMap:e=>[e.getTrackId()]}),PP=Bk(),tk((BP=class extends LP{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,n,r){super(t.createOutputTrack(),n,r),nk(this,"source",void 0),nk(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(QO.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.safeEmit(MO.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){xR(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}).prototype,"startProcessAudioBuffer",[EP,wP],Object.getOwnPropertyDescriptor(BP.prototype,"startProcessAudioBuffer"),BP.prototype),tk(BP.prototype,"pauseProcessAudioBuffer",[_P,SP],Object.getOwnPropertyDescriptor(BP.prototype,"pauseProcessAudioBuffer"),BP.prototype),tk(BP.prototype,"seekAudioBuffer",[CP,TP],Object.getOwnPropertyDescriptor(BP.prototype,"seekAudioBuffer"),BP.prototype),tk(BP.prototype,"resumeProcessAudioBuffer",[IP,RP],Object.getOwnPropertyDescriptor(BP.prototype,"resumeProcessAudioBuffer"),BP.prototype),tk(BP.prototype,"stopProcessAudioBuffer",[xP,NP],Object.getOwnPropertyDescriptor(BP.prototype,"stopProcessAudioBuffer"),BP.prototype),tk(BP.prototype,"close",[OP],Object.getOwnPropertyDescriptor(BP.prototype,"close"),BP.prototype),tk(BP.prototype,"setAudioBufferPlaybackSpeed",[kP,PP],Object.getOwnPropertyDescriptor(BP.prototype,"setAudioBufferPlaybackSpeed"),BP.prototype),BP);class MP extends LP{get __className__(){return"MixingAudioTrack"}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}constructor(){const e=dk().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,wx(8,"track-mix-")),nk(this,"trackList",void 0),nk(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}hasAudioTrack(e){return-1!==this.trackList.indexOf(e)}addAudioTrack(e){-1===this.trackList.indexOf(e)?(rO.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):rO.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){if(-1!==this.trackList.indexOf(e)){rO.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}sx(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){const e={};this.trackList.forEach((t=>{t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}_updateRtpTransceiver(e){this._rtpTransceiver!==e&&(this._rtpTransceiver=e,this.trackList.forEach((t=>{t instanceof MP?t.emit(UO.TRANSCEIVER_UPDATED,e):t._updateRtpTransceiver(e)})))}}class FP extends fk{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(QO.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),nk(this,"audioBuffer",void 0),nk(this,"sourceNode",void 0),nk(this,"startPlayTime",0),nk(this,"startPlayOffset",0),nk(this,"pausePlayTime",0),nk(this,"options",void 0),nk(this,"currentLoopCount",0),nk(this,"currentPlaybackSpeed",100),nk(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):rO.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&("playing"===this.currentState&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const jP=new Map;function QP(e,t){if(0===e.length||0===t.length)return 1/0;const n=Ox(e),r=Ox(t);return Math.floor(r/n)}class VP{get rendFrameRate(){const e=Math.max(1,QP(this._render_interframe_delays_sizes,this._render_interframe_delays));return Math.floor(1e3/e)}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(rO.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(this._videoState=e,null===(t=this.onVideoStateChanged)||void 0===t||t.call(this,this.videoState))}constructor(e){nk(this,"trackId",void 0),nk(this,"config",void 0),nk(this,"onFirstVideoFrameDecoded",void 0),nk(this,"onVideoStateChanged",void 0),nk(this,"freezeTimeCounterList",[]),nk(this,"renderFreezeAccTime",0),nk(this,"renderFreezeAccTime2",0),nk(this,"isKeepLastFrame",!1),nk(this,"timeUpdatedCount",0),nk(this,"freezeTime",0),nk(this,"playbackTime",0),nk(this,"lastTimeUpdatedTime",0),nk(this,"autoplayFailed",!1),nk(this,"videoTrack",void 0),nk(this,"videoElement",void 0),nk(this,"cacheVideoElement",void 0),nk(this,"_render_interframe_delays",[]),nk(this,"_render_interframe_delays_sizes",[]),nk(this,"_videoState",ZO.VideoStateStopped),nk(this,"videoElementCheckInterval",void 0),nk(this,"videoElementFreezeTimeout",void 0),nk(this,"_videoElementStatus",JO.NONE),nk(this,"isGettingVideoDimensions",!1),nk(this,"startGetVideoDimensions",(()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return rO.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(e,500)};!this.isGettingVideoDimensions&&e()})),nk(this,"autoResumeAfterInterruption",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===lk.curState&&(rO.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(XI())),pR()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),nk(this,"handleVideoEvents",(e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=JO.PLAYING;break;case"loadeddata":if(this.videoState=ZO.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch(e){}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=JO.CANPLAY;break;case"stalled":this.videoElementStatus=JO.STALLED;break;case"suspend":this.videoElementStatus=JO.SUSPEND;break;case"pause":this.videoElementStatus=JO.PAUSED,nR()||fR()||$I()&&this.autoplayFailed||!this.videoTrack||"live"!==this.videoTrack.readyState||(rO.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=JO.WAITING;break;case"abort":this.videoElementStatus=JO.ABORT;break;case"ended":this.videoElementStatus=JO.ENDED;break;case"emptied":this.videoElementStatus=JO.EMPTIED;break;case"error":{const e=this.videoElement.error;e&&(this.videoElementStatus=JO.ERROR,rO.error("[".concat(this.trackId,"] media error: ").concat(e.message," (").concat(e.code,")")));break}case"timeupdate":{const e=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime,n=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=e,KB.lastVisibleTime<KB.lastHiddenTime||n<KB.lastHiddenTime||n<KB.lastVisibleTime)return;for(t>CN("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;){this.playbackTime-=6e3;const e=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(e),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}})),nk(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&(rO.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(XI())),pR()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),lk.on(gO.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),lk.on(gO.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return null!==(e=this.videoElement.parentElement)&&void 0!==e?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){const t=this.videoElement.play();t&&t.catch&&t.catch((t=>{e&&Ok(e,"video",t.message,this.trackId),"NotAllowedError"===t.name?(rO.warning("detected video element autoplay failed",t),this.autoplayFailed=!0,this.handleAutoPlayFailed()):rO.warning("[".concat(this.trackId,"] play warning: "),t)}));const n=WI();if(("Safari"===n.name&&15===Number(n.version)||AR())&&t&&t.then){const e=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(e).catch(e)}}getCurrentFrame(){const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext("2d");if(!t)return rO.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const n=t.getImageData(0,0,e.width,e.height);return e.remove(),n}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const r=n.getContext("2d");return r?(r.drawImage(this.videoElement,0,0,n.width,n.height),new nh(((r,i)=>{n.toBlob((async e=>{if(n.remove(),e){const t=await qk(e);r({buffer:t,width:n.width,height:n.height})}else i(new TR(CR.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,t<0?.1:t>1?1:t)}))):await Wk(e)}destroy(){lk.off(gO.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),lk.off(gO.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=ZO.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=JO.INIT,!this.videoElementCheckInterval&&(HP.forEach((e=>{this.videoElement.addEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((()=>{(function(e){return e!==document.body&&document.body.contains(e)})(this.videoElement)||(this.videoElementStatus=JO.DESTROYED)}),1e3),CN("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let n;const r=()=>{"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",r),this.videoElementFreezeTimeout=window.setTimeout(i,CN("VIDEO_FREEZE_DURATION")))},i=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===ZO.VideoStateDecoding&&("visible"===document.visibilityState?this.videoState=ZO.VideoStateFrozen:document.addEventListener("visibilitychange",r))},o=(e,t)=>{if(this.videoElementStatus===JO.PLAYING){if(n){const e=t.presentationTime-n.presentationTime,r=t.presentedFrames-n.presentedFrames;this._render_interframe_delays_sizes.push(r),this._render_interframe_delays.push(e);const o=Ox(this._render_interframe_delays_sizes),a=o-this._render_interframe_delays_sizes[0];if(o>30&&a>5&&(this._render_interframe_delays_sizes.shift(),this._render_interframe_delays.shift()),this.videoState===ZO.VideoStateStarting&&(this.videoState=ZO.VideoStateDecoding),this.videoState===ZO.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(i,CN("VIDEO_FREEZE_DURATION"))),e<CN("VIDEO_FREEZE_DURATION")&&this.videoState===ZO.VideoStateFrozen&&(this.videoState=ZO.VideoStateDecoding),e>CN("VIDEO_FREEZE_DURATION")&&KB.lastVisibleTime>=KB.lastHiddenTime&&n.timestamp>KB.lastVisibleTime&&n.timestamp>KB.lastHiddenTime){const t=Math.min(66,QP(this._render_interframe_delays_sizes,this._render_interframe_delays)),n=Math.max(0,e-(r-1)*t);this.renderFreezeAccTime2+=n>t?n:0,this.renderFreezeAccTime+=e}}n=ik(ik({},t),{},{timestamp:e})}var r,a;CN("ENABLE_VIDEO_FRAME_CALLBACK")&&(null===(r=(a=this.videoElement).requestVideoFrameCallback)||void 0===r||r.call(a,o))};null===(e=(t=this.videoElement).requestVideoFrameCallback)||void 0===e||e.call(t,o)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),bR()&&!CN("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");const n=WI();"Safari"===n.name&&15===Number(n.version)||AR()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,tR()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,tR()&&this.videoElement.load());const r=this.videoElement.play();void 0!==r&&r.catch((e=>{rO.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())}))}resetVideoElement(){HP.forEach((e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=JO.NONE}handleAutoPlayFailed(){const e=t=>{t.preventDefault(),this.videoElement.play().then((()=>{rO.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))})).catch((e=>{rO.error(e)})),this.autoplayFailed=!1,ER()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};ER()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),Nk()}}const HP=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class zP extends VP{constructor(e){super(e),nk(this,"container",void 0),nk(this,"slot",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,n):await Wk(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",CN("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var e;if(null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=document.createElement("video")}}resetVideoElement(){var e;null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}var KP,GP,WP,qP,YP,XP,JP,ZP,$P,eB,tB,nB,rB,iB,oB,aB,sB,cB,lB,dB,uB,AB,hB,pB,fB,mB,gB,vB,yB,bB,EB,wB,_B,SB,CB,TB;let IB=(KP=dO({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),GP=Bk(),WP=dO({argsMap:e=>[e.getTrackId()]}),qP=Dx("LocalVideoTrack","_enabledMutex"),YP=dO({argsMap:(e,t)=>[e.getTrackId(),t]}),XP=Bk(),JP=Dx("LocalVideoTrack","_enabledMutex"),ZP=dO({argsMap:(e,t)=>[e.getTrackId(),t]}),$P=Bk(),eB=dO({argsMap:(e,t)=>[e.getTrackId(),t,e._saveEncodeBitrateRatio]}),tB=Bk(),nB=dO({argsMap:(e,t)=>[e.getTrackId(),t]}),rB=Bk(),iB=Bk(),oB=dO({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),aB=Bk(),sB=Bk(),cB=Bk(),lB=Bk(),dB=Bk(),uB=Bk(),AB=Bk(),hB=dO({argsMap:(e,t)=>[e.getTrackId(),t.name]}),pB=dO({argsMap:e=>[e.getTrackId()]}),fB=dO({argsMap:e=>[e.getTrackId()]}),mB=dO({argsMap:(e,t,n)=>[e.getTrackId(),t.label,n]}),gB=class e extends ak{get videoHeight(){if($I()){const{height:e}=this._mediaStreamTrack.getSettings();return this._videoHeight=e,this._videoHeight}return this._videoHeight}get videoWidth(){if($I()){const{width:e}=this._mediaStreamTrack.getSettings();return this._videoWidth=e,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==JO.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(e){this._processorContext=e}get __className__(){return"LocalVideoTrack"}constructor(e,t,n,r,i,o){if(super(e,i),nk(this,"trackMediaType",jO.VIDEO),nk(this,"_player",void 0),nk(this,"isUseScaleResolutionDownBy",!1),nk(this,"_videoVisibleTimer",null),nk(this,"_previousVideoVisibleStatus",void 0),nk(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),nk(this,"_encoderConfig",void 0),nk(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),nk(this,"_optimizationMode",void 0),nk(this,"_saveEncodeBitrateRatio",1),nk(this,"_videoHeight",void 0),nk(this,"_videoWidth",void 0),nk(this,"_forceBitrateLimit",void 0),nk(this,"_enabled",!0),nk(this,"_processorDestination",void 0),nk(this,"_processorContext",void 0),$I()){const{width:t,height:n}=e.getSettings();this._videoWidth=t,this._videoHeight=n}else this.updateMediaStreamTrackResolution();if(this._scalabilityMode=n,this._optimizationMode=r,this._hints=o||[],t&&-1!==this._hints.indexOf(PO.CUSTOM_TRACK)?this._encoderConfig=dx(t):this._encoderConfig=t,-1===this._hints.indexOf(PO.SCREEN_TRACK))this.updateBitrateFromProfile();else if(oR(HI.CHROME,115)&&-1!==YI().indexOf("Windows")){const t=function(e,t){if("VideoFrame"in window&&"TransformStream"in window&&pO().supportWebRTCInsertableStream){const n=new MediaStreamTrackProcessor(e),r=new MediaStreamTrackGenerator({kind:"video"});let i,o,a=Date.now();const s=()=>{c&&(clearInterval(c),c=void 0),i&&(i.close(),i=void 0),e.stop(),o=void 0,r.removeEventListener("ended",s)};let c=window.setInterval((()=>{if(o&&i&&Date.now()-a>(null!=t?t:1e3))try{"live"===r.readyState?o.enqueue(i.clone()):s()}catch(e){s()}}),null!=t?t:1e3);const l=new TransformStream({transform:(e,t)=>{"live"===r.readyState?(o=t,a=Date.now(),void 0===i?(i=e,t.enqueue(e.clone())):(t.enqueue(i),i=e)):e.close()}});return r.addEventListener("ended",s),n.readable.pipeThrough(l).pipeTo(r.writable),r}}(e);t&&(rO.info("local screen video track begin to inject frame"),this._mediaStreamTrack=t)}t&&-1!==this._hints.indexOf(PO.CUSTOM_TRACK)&&this.setEncoderConfiguration(t),this._processorContext=new Dk(this.getTrackId(),"local"),this._processorDestination=new Lk(this.processorContext),this.bindProcessorDestinationEvents()}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(rO.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}rO.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=ik(ik(ik({},this._getDefaultPlayerConfig()),t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new VP(n):this._player=new zP(n),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(MO.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),CN("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,rO.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(rO.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await rx(this,kO.NEED_DISABLE_TRACK,this)}catch(e){throw rO.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}return t||(this._enabled=!1),void rO.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await rx(this,kO.NEED_ENABLE_TRACK,this)}catch(e){throw rO.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}rO.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,rO.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await rx(this,kO.NEED_MUTE_TRACK,this):await rx(this,kO.NEED_UNMUTE_TRACK,this))}async setSaveEncodeBitrateRatio(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._saveEncodeBitrateRatio;if(1!==this._saveEncodeBitrateRatio&&this._encoderConfig&&this._encoderConfig.bitrateMax&&this._encoderConfig.bitrateMin){this._encoderConfig.bitrateMin=Math.floor(this._encoderConfig.bitrateMin*e),this._encoderConfig.bitrateMax=Math.floor(this._encoderConfig.bitrateMax*e),rO.debug("[".concat(this.getTrackId(),"] set save encode bitrate ratio, ").concat(e)),this._saveEncodeBitrateRatio=1;try{await rx(this,kO.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(rO)}}}async setEncoderConfiguration(e,t){if(!this._enabled)throw new TR(CR.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(e=CO(e),CN("USE_STANDARD_BITRATE_DEFAULT")&&(delete e.bitrateMax,delete e.bitrateMin),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),e.width||e.height||e.frameRate){const t=Vk({encoderConfig:e});($I()||nR()||fR())&&(t.deviceId=void 0),rO.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(t));try{await this._originMediaStreamTrack.applyConstraints(t),this.updateMediaStreamTrackResolution()}catch(e){const t=new TR(CR.UNEXPECTED_ERROR,e.toString());throw rO.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}}this._encoderConfig=e,-1===this._hints.indexOf(PO.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await rx(this,kO.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(rO)}}getStats(){return hx((()=>{rO.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),ix(this,kO.GET_STATS)||ik({},HO)}async setBeautyEffect(e){rO.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(e,t):await Wk(e)}async setBitrateLimit(e){rO.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(e))),e&&(this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate))}async setOptimizationMode(e){if("motion"!==e&&"detail"!==e&&"balanced"!==e)return void rO.error(CR.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const t=this._optimizationMode;try{this._optimizationMode=e,await rx(this,kO.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(e){throw this._optimizationMode=t,rO.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}rO.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(e,")"))}setScalabiltyMode(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return rO.error(CR.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=e,rO.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")"))}updateMediaStreamTrackResolution(){Qk(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(Sx)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(e){if(!this._enabled)throw new TR(CR.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");rO.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(e)),e=CO(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),this._encoderConfig=e,-1===this._hints.indexOf(PO.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await rx(this,kO.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(rO)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:e,height:t,frameRate:n}=this.getMediaStreamTrackSettings();if(!e||!t||!n)return;const{bitrateMax:r,bitrateMin:i}=this._encoderConfig;if(null==i||null==r){const{max:o,min:a}=function(e,t,n,r,i){const o=CN("BITRATE_ADAPTER_TYPE");if("DEFAULT_BITRATE"===o)return{min:r,max:i};if(void 0===i){const a=Math.floor(200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75));i="STANDARD_BITRATE"===o?4*a:2*a,r=null!=r?r:a}else r=null!=r?r:Math.floor(i/10);return{min:r,max:i}}(e,t,n,i,r);if(this._encoderConfig.bitrateMin=a,this._encoderConfig.bitrateMax=o,CN("VIDEO_STANDARD_BITRATE_VERSION")&&null==i&&null==r){const[r,i]=function(e,t,n){const r=4*Math.floor(2e5*Math.pow(n/15,.6)*Math.pow(e*t/230400,.75)),i=e*t,o=new Map([[19200,.9],[230400,.85],[518400,.75],[921600,.7],[2073600,.6],[3686400,.5]]),a=new Map([[230400,.95],[518400,.9],[921600,.85],[2073600,.8]]);let s=uh(o).call(o).next().value,c=1;if(o.has(i))s=o.get(i);else{var l;const e=Yh(l=Array.from(o.entries())).call(l,((e,t)=>{let[n]=e,[r]=t;return n-r})),t=e.find((e=>{let[t]=e;return t>i}));if(t){const n=e.indexOf(t);if(n>0){const r=e[n-1],o=(i-r[0])/(t[0]-r[0]);s=r[1]+o*(t[1]-r[1])}else s=t[1]}else s=e[e.length-1][1]}if(a.has(i))c=a.get(i);else{var d;const e=Yh(d=Array.from(a.entries())).call(d,((e,t)=>{let[n]=e,[r]=t;return n-r})),t=e.find((e=>{let[t]=e;return t>i}));if(t){const n=e.indexOf(t);if(n>0){const r=e[n-1],o=(i-r[0])/(t[0]-r[0]);c=r[1]+o*(t[1]-r[1])}else c=t[1]}else c=e[e.length-1][1]}const u=CN("VIDEO_NEW_BITRATE_RATIO");u&&u>0&&(s=u/100);const A=Math.floor(r*s),h=Math.floor(65e4*Math.pow(e*t/230400,.5)*Math.pow(n/15,.69));let p=A;const f=CN("VIDEO_STANDARD_BITRATE_VERSION");return f&&f>0&&(1===f?p=r:2===f?p=A:3===f&&(p=h)),[Math.floor(p/1e3),c]}(e,t,n);this._encoderConfig.bitrateMax=r,this._encoderConfig.bitrateMin=a?Math.min(a,r):r,this._saveEncodeBitrateRatio=i,rO.debug("[".concat(this.getTrackId(),"] update new bitrate from profile, [w: ").concat(e,", h: ").concat(t,", fps: ").concat(n,"] => [brMax: ").concat(this._encoderConfig.bitrateMax,", brMin: ").concat(this._encoderConfig.bitrateMin,", save_bitrate_ratio: ").concat(this._saveEncodeBitrateRatio,"]"))}else rO.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(e,", h: ").concat(t,", fps: ").concat(n,"] => [brMax: ").concat(o,", brMin: ").concat(a,"]")),this._saveEncodeBitrateRatio=1}}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=UR.checkOneElementVisible(i),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=uO.reportApiInvoke(null,{tag:KR.TRACER,name:zR.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new TR(CR.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}async renewMediaStreamTrack(e){}pipe(e){if(this.processor===e)return e;if(e._source)throw new TR(CR.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._encoderConfig;t&&(r=ik(ik({},r),CO(t))),r=ux(r);const i=wx(8,"track-video-cloned-"),o=new e(n?this._mediaStreamTrack.clone():this._mediaStreamTrack,r,ux(this._scalabilityMode),this._optimizationMode,i,ux(this._hints));return t&&r&&o.setEncoderConfiguration(r),rO.debug("clone video track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(n)),o}async replaceTrack(e,t){if(!(e instanceof MediaStreamTrack))throw new TR(CR.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if("video"!==e.kind)throw new TR(CR.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(e,t,!0),this.updateMediaStreamTrackResolution()}sendSeiData(e){if(hx((()=>{uO.reportApiInvoke(null,{name:zR.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:KR.TRACER}).onSuccess("")}),this._mediaStreamTrack.id||this.getTrackId()),!CN("ENABLE_VIDEO_SEI")||!CN("ENABLE_ENCODED_TRANSFORM"))return void rO.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(e instanceof Uint8Array==0)return new TR(CR.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const t=this.getRTCRtpTransceiver();if(!t)return void rO.warning("Video track is not published, SEI can not be send");const n=t.sender.getParameters();if(0===n.codecs.length)return;const r=n.codecs[0].mimeType.toLocaleLowerCase();"video/h264"===r?this.safeEmit("sei-to-send",e):rO.warning("SEI is not supported by ".concat(r))}bindProcessorDestinationEvents(){this.processorDestination.on(WO.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(),await rx(this,kO.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await rx(this,kO.NEED_REPLACE_TRACK,this))}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(WO.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(qO.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(qO.REQUEST_CONSTRAINTS)}},tk(gB.prototype,"play",[KP,GP],Object.getOwnPropertyDescriptor(gB.prototype,"play"),gB.prototype),tk(gB.prototype,"stop",[WP],Object.getOwnPropertyDescriptor(gB.prototype,"stop"),gB.prototype),tk(gB.prototype,"setEnabled",[qP,YP,XP],Object.getOwnPropertyDescriptor(gB.prototype,"setEnabled"),gB.prototype),tk(gB.prototype,"setMuted",[JP,ZP,$P],Object.getOwnPropertyDescriptor(gB.prototype,"setMuted"),gB.prototype),tk(gB.prototype,"setSaveEncodeBitrateRatio",[eB,tB],Object.getOwnPropertyDescriptor(gB.prototype,"setSaveEncodeBitrateRatio"),gB.prototype),tk(gB.prototype,"setEncoderConfiguration",[nB,rB],Object.getOwnPropertyDescriptor(gB.prototype,"setEncoderConfiguration"),gB.prototype),tk(gB.prototype,"getStats",[iB],Object.getOwnPropertyDescriptor(gB.prototype,"getStats"),gB.prototype),tk(gB.prototype,"setBeautyEffect",[oB,aB],Object.getOwnPropertyDescriptor(gB.prototype,"setBeautyEffect"),gB.prototype),tk(gB.prototype,"getCurrentFrameData",[sB],Object.getOwnPropertyDescriptor(gB.prototype,"getCurrentFrameData"),gB.prototype),tk(gB.prototype,"getCurrentFrameImage",[cB],Object.getOwnPropertyDescriptor(gB.prototype,"getCurrentFrameImage"),gB.prototype),tk(gB.prototype,"setBitrateLimit",[lB],Object.getOwnPropertyDescriptor(gB.prototype,"setBitrateLimit"),gB.prototype),tk(gB.prototype,"setOptimizationMode",[dB],Object.getOwnPropertyDescriptor(gB.prototype,"setOptimizationMode"),gB.prototype),tk(gB.prototype,"setScalabiltyMode",[uB],Object.getOwnPropertyDescriptor(gB.prototype,"setScalabiltyMode"),gB.prototype),tk(gB.prototype,"updateMediaStreamTrackResolution",[AB],Object.getOwnPropertyDescriptor(gB.prototype,"updateMediaStreamTrackResolution"),gB.prototype),tk(gB.prototype,"pipe",[hB],Object.getOwnPropertyDescriptor(gB.prototype,"pipe"),gB.prototype),tk(gB.prototype,"unpipe",[pB],Object.getOwnPropertyDescriptor(gB.prototype,"unpipe"),gB.prototype),tk(gB.prototype,"close",[fB],Object.getOwnPropertyDescriptor(gB.prototype,"close"),gB.prototype),tk(gB.prototype,"replaceTrack",[mB],Object.getOwnPropertyDescriptor(gB.prototype,"replaceTrack"),gB.prototype),gB),RB=(vB=dO({argsMap:(e,t)=>[e.getTrackId(),t]}),yB=Bk(),bB=Dx("CameraVideoTrack","_enabledMutex"),EB=dO({argsMap:(e,t)=>[e.getTrackId(),t]}),wB=Bk(),_B=dO({argsMap:(e,t)=>[e.getTrackId(),t]}),SB=Bk(),CB=dO({argsMap:e=>[e.getTrackId()]}),TB=class e extends IB{get __className__(){return"CameraVideoTrack"}constructor(e,t,n,r,i,o){super(e,CO(t.encoderConfig),r,i,o),nk(this,"_config",void 0),nk(this,"_originalConstraints",void 0),nk(this,"_constraints",void 0),nk(this,"_enabled",!0),nk(this,"_deviceName","default"),nk(this,"tryResumeVideoForIOS15_16WeChat",(async()=>{(AR()||hR())&&!function(){const e=WI();if(e.os!==VI.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=2}()&&mR()&&this._enabled&&!this._isClosed&&(rO.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())})),this._config=t,this._originalConstraints=n,this._constraints=n,this._deviceName=e.label,this._encoderConfig=CO(this._config.encoderConfig),lk.on(gO.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),lk.on(gO.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(e){return"string"==typeof e?this._setDeviceById(e):e.deviceId?this._setDeviceById(e.deviceId):e.facingMode?this._setDeviceByFacingModel(e.facingMode):void 0}async _setDeviceById(e){if(rO.info("[".concat(this.getTrackId(),"] set device to ").concat(e)),this._enabled)try{const t=await Ik.getDeviceById(e),n={};n.video=ik({},this._constraints),n.video.deviceId={exact:e},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let r=null;try{r=await _k(n,this.getTrackId())}catch(e){throw rO.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await _k({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw rO.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await Ik.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw rO.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}rO.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(e){rO.info("[".concat(this.getTrackId(),"] set facingMode ").concat(e));const t={video:ik(ik({},this._constraints),{},{deviceId:void 0,facingMode:{exact:e}})};if(this._enabled){this._originMediaStreamTrack.stop();let e=null;try{e=await _k(t,this.getTrackId())}catch(t){throw rO.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),t.toString()),e=await _k({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),t}await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=e,this._config.cameraId=void 0,this._constraints=ik({},t.video),rO.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(rO.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const e=await _k({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1)}await rx(this,kO.NEED_ENABLE_TRACK,this)}catch(e){throw rO.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),e}this.updateMediaStreamTrackResolution(),rO.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),t||(this._enabled=!1);try{await rx(this,kO.NEED_DISABLE_TRACK,this)}catch(e){throw rO.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}rO.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(e,t){if(!this._enabled)throw new TR(CR.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");e=CO(e),CN("USE_STANDARD_BITRATE_DEFAULT")&&(delete e.bitrateMax,delete e.bitrateMin),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate||e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate||e.bitrateMin);const n=dx(this._config);n.encoderConfig=e;const r=Vk(n);($I()||nR()||fR())&&(r.deviceId=void 0),rO.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(r));try{await this._originMediaStreamTrack.applyConstraints(r),this.updateMediaStreamTrackResolution()}catch(e){const t=new TR(CR.UNEXPECTED_ERROR,e.toString());throw rO.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}this._config=n,this._constraints=r,this._originalConstraints=r,this._encoderConfig=e,-1===this._hints.indexOf(PO.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await rx(this,kO.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(rO)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((nR()||fR())&&this._enabled&&!this._isClosed&&lk.duringInterruption){const e=async()=>{lk.off(gO.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(rO.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};lk.on(gO.IOS_INTERRUPTION_END,e)}else rO.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(MO.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=Ik.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId={exact:n}),this._enabled){const e=await _k({video:t},this.getTrackId());this._constraints=t,await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),lk.off(gO.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),lk.off(gO.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._encoderConfig;t&&(r=ik(ik({},r),CO(t))),r=ux(r);const i=wx(8,"track-cam-cloned-"),o=new e(n?this._mediaStreamTrack.clone():this._mediaStreamTrack,ux(ik(ik({},this._config),{},{encoderConfig:r})),ux(this._constraints),ux(this._scalabilityMode),this._optimizationMode,i);return t&&r&&o.setEncoderConfiguration(r),rO.debug("clone track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(n)),o}bindProcessorContextEvents(){this.processorContext.on(qO.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}})),this.processorContext.on(qO.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}},tk(TB.prototype,"setDevice",[vB,yB],Object.getOwnPropertyDescriptor(TB.prototype,"setDevice"),TB.prototype),tk(TB.prototype,"setEnabled",[bB,EB,wB],Object.getOwnPropertyDescriptor(TB.prototype,"setEnabled"),TB.prototype),tk(TB.prototype,"setEncoderConfiguration",[_B,SB],Object.getOwnPropertyDescriptor(TB.prototype,"setEncoderConfiguration"),TB.prototype),tk(TB.prototype,"close",[CB],Object.getOwnPropertyDescriptor(TB.prototype,"close"),TB.prototype),TB);function xB(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=ik(ik({},r),{},{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?rO.debug("[".concat(e,"] set content hint to"),n.optimizationMode):rO.debug("[".concat(e,"] set content hint failed")))):rO.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var NB,OB,kB,PB,BB,LB,DB,UB,MB,FB,jB,QB;class VB extends ok{getUserId(){return this._userId}constructor(e,t,n,r){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(r.clientId,"_").concat(wx(5,""))),nk(this,"_userId",void 0),nk(this,"_uintId",void 0),nk(this,"_isDestroyed",!1),nk(this,"store",void 0),nk(this,"processor",void 0),nk(this,"processorContext",void 0),this._userId=t,this._uintId=n,this.store=r}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,rO.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let HB=(NB=dO({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),OB=dO({argsMap:e=>[e.getTrackId()]}),kB=dO({argsMap:(e,t)=>[e.getTrackId(),t.name]}),PB=dO({argsMap:e=>[e.getTrackId()]}),tk((BB=class extends VB{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==JO.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,n,r){super(e,t,n,r),nk(this,"_videoVisibleTimer",null),nk(this,"_previousVideoVisibleStatus",void 0),nk(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),nk(this,"trackMediaType",jO.VIDEO),nk(this,"_videoWidth",void 0),nk(this,"_videoHeight",void 0),nk(this,"_player",void 0),nk(this,"processorDestination",void 0),nk(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new Dk(this.getTrackId(),"remote"),this.processorDestination=new Lk(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return hx((()=>{rO.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),ix(this,kO.GET_STATS)||ik({},GO)}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(rO.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}rO.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=ik(ik({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new VP(n):this._player=new zP(n),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(FO.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=e=>{this.safeEmit(FO.VIDEO_STATE_CHANGED,e)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(FO.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),CN("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,rO.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Qk(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(Sx)}_updatePlayerSource(){rO.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=UR.checkOneElementVisible(i),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=uO.reportApiInvoke(null,{tag:KR.TRACER,name:zR.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new TR(CR.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new TR(CR.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(WO.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(WO.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(UO.SEI_RECEIVED,e)}}).prototype,"play",[NB],Object.getOwnPropertyDescriptor(BB.prototype,"play"),BB.prototype),tk(BB.prototype,"stop",[OB],Object.getOwnPropertyDescriptor(BB.prototype,"stop"),BB.prototype),tk(BB.prototype,"pipe",[kB],Object.getOwnPropertyDescriptor(BB.prototype,"pipe"),BB.prototype),tk(BB.prototype,"unpipe",[PB],Object.getOwnPropertyDescriptor(BB.prototype,"unpipe"),BB.prototype),BB),zB=(LB=dO({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),DB=dO({argsMap:(e,t)=>[e.getTrackId(),t]}),UB=dO({argsMap:e=>[e.getTrackId()]}),MB=dO({argsMap:e=>[e.getTrackId()]}),FB=dO({argsMap:(e,t)=>[e.getTrackId(),t.name]}),jB=dO({argsMap:e=>[e.getTrackId()]}),tk((QB=class extends VB{get isPlaying(){return this._useAudioElement?Pk.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,n,r){super(e,t,n,r),nk(this,"trackMediaType",jO.AUDIO),nk(this,"_source",void 0),nk(this,"_useAudioElement",!0),nk(this,"_volume",100),nk(this,"processorContext",void 0),nk(this,"processorDestination",void 0),nk(this,"_played",!1),nk(this,"_bypassWebAudio",!1),CN("DISABLE_WEBAUDIO")?(this._source=new Fk,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new mk(e,!0),CN("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(QO.RECEIVE_TRACK_BUFFER,(()=>{this.safeEmit(FO.FIRST_FRAME_DECODED)})),this.processorContext=new Mk(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new Uk(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(QO.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})}))}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(QO.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(QO.ON_AUDIO_BUFFER),this._source.on(QO.ON_AUDIO_BUFFER,(t=>e(t)))}setVolume(e){this._volume=e,this._useAudioElement?Pk.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!fO())throw new TR(CR.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Pk.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return hx((()=>{rO.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),ix(this,kO.GET_STATS)||ik({},zO)}play(){rO.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(rO.debug("[".concat(this.getTrackId(),"] use audio element to play")),Pk.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){rO.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?Pk.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];rO.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Pk.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new TR(CR.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new TR(CR.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new TR(CR.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(WO.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})),this.processorDestination.on(WO.ON_NODE,(e=>{this._source.processedNode=e;const t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(WO.ON_TRACK),this.processorDestination.removeAllListeners(WO.ON_NODE)}}).prototype,"setVolume",[LB],Object.getOwnPropertyDescriptor(QB.prototype,"setVolume"),QB.prototype),tk(QB.prototype,"setPlaybackDevice",[DB],Object.getOwnPropertyDescriptor(QB.prototype,"setPlaybackDevice"),QB.prototype),tk(QB.prototype,"play",[UB],Object.getOwnPropertyDescriptor(QB.prototype,"play"),QB.prototype),tk(QB.prototype,"stop",[MB],Object.getOwnPropertyDescriptor(QB.prototype,"stop"),QB.prototype),tk(QB.prototype,"pipe",[FB],Object.getOwnPropertyDescriptor(QB.prototype,"pipe"),QB.prototype),tk(QB.prototype,"unpipe",[jB],Object.getOwnPropertyDescriptor(QB.prototype,"unpipe"),QB.prototype),QB);const KB=new class extends QR{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),nk(this,"_lastHiddenTime",0),nk(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),rO.debug("current web page is ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)}))}};class GB extends QR{constructor(e,t){super(),nk(this,"trackMediaType",jO.DATA),nk(this,"_version",1),nk(this,"_type",3),nk(this,"_config",void 0),nk(this,"_originDataChannel",void 0),nk(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),nk(this,"_dataStreamPacketHandler",{serialize:e=>e,deserialize:e=>e}),nk(this,"_datachannelEventMap",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader()}useDataStream(e){this._dataStreamPacketHandler=e}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return CN("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.readyState)&&void 0!==e?e:"connecting"}get _originDataChannelId(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.id)&&void 0!==e?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new nh(((e,t)=>{if(this._originDataChannel){"open"===this._originDataChannel.readyState&&e();const n=setTimeout((()=>{var e;t(new TR(CR.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat(null===(e=this._originDataChannel)||void 0===e?void 0:e.id)))}),1e4);this._originDataChannel.onopen=()=>{clearTimeout(n),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(n),new TR(CR.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new TR(CR.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))}))}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){const e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[ek.OPEN,ek.CLOSE,ek.ERROR].forEach((t=>{const n=()=>{this.emit(t)};this._datachannelEventMap.set(t,n),e.addEventListener(t,n)}))}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach((t=>{let[n,r]=t;e.removeEventListener(n,r)})),this._datachannelEventMap.clear()}}class WB extends GB{constructor(e){super(e),nk(this,"_messageListener",void 0),this._messageListener=e=>{if(e.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const t=e.data.slice(0,this._dataStreamPacketHeader.byteLength),n=new DataView(t).getUint8(3);if(n!==this.id)return void(CN("SHOW_DATASTREAM2_LOG")&&rO.debug("invalid datachannel id: ".concat(n," !== ").concat(this.id)));let r=e.data.slice(this._dataStreamPacketHeader.byteLength);r=this._dataStreamPacketHandler.deserialize(r),this.emit(ek.MESSAGE,r)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class qB extends GB{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);const n=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);n.set(new Uint8Array(this._dataStreamPacketHeader),0),n.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(n.buffer)}}}function YB(){const e=new Blob([atob("ZnVuY3Rpb24gdCh0LGUsbil7bGV0IGE9bmV3IFVpbnQ4QXJyYXkodCxlLG4pLG89W10scj0wO2Zvcig7by5sZW5ndGg8bjspciszPG4mJjA9PT1hW3JdJiYwPT09YVtyKzFdJiYzPT09YVtyKzJdJiYoMD09PWFbciszXXx8MT09PWFbciszXXx8Mj09PWFbciszXXx8Mz09PWFbciszXSk/KG8ucHVzaChhW3JdLGFbcisxXSxhW3IrM10pLHIrPTQpOihvLnB1c2goYVtyXSkscisrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobyl9ZnVuY3Rpb24gZSh0LGUpe2NvbnN0IG49ZnVuY3Rpb24odCl7Y29uc3QgZT10Lmxlbmd0aDtsZXQgbj1bXSxhPTA7Zm9yKDthPGU7KWErMjxlJiYwPT09dFthXSYmMD09PXRbYSsxXSYmKDA9PT10W2ErMl18fDE9PT10W2ErMl18fDI9PT10W2ErMl18fDM9PT10W2ErMl0pPyhuLnB1c2godFthXSx0W2ErMV0sMyx0W2ErMl0pLGErPTMpOihuLnB1c2godFthXSksYSsrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9KGUpLGE9bi5sZW5ndGgsbz1NYXRoLmZsb29yKGEvMjU1KSxyPWElMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNitvKzErYSt0LmJ5dGVMZW5ndGgpO3NbMF09MCxzWzFdPTAsc1syXT0wLHNbM109MSxzWzRdPTYsc1s1XT0xMDE7bGV0IGk9MDtmb3IoO2k8bzspc1s2K2ldPTI1NSxpKys7cmV0dXJuIHNbNitpXT1yLGkrKyxzLnNldChuLDYraSkscy5zZXQobmV3IFVpbnQ4QXJyYXkodCksNitpK2EpLHMuYnVmZmVyfWNvbnN0IG49NzEsYT0xLG89MixyPTEscz0yO3ZhciBpOyFmdW5jdGlvbih0KXt0W3QuQVVESU9fTEVWRUw9MV09IkFVRElPX0xFVkVMIix0W3QuTUVUQURBVEE9Ml09Ik1FVEFEQVRBIix0W3QuQVVESU9fNjRfQklUX1BUUz0zXT0iQVVESU9fNjRfQklUX1BUUyJ9KGl8fChpPXt9KSk7bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJTYWZhcmkiKT4tMSYmLTE9PT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkNocm9tZSIpJiYoc2VsZi5vbnJ0Y3RyYW5zZm9ybT1mPT57Y29uc3QgdT1mLnRyYW5zZm9ybWVyO2xldCBkPVtdLGw9W107dS5vcHRpb25zLnBvcnQub25tZXNzYWdlPXQ9Pnt0LmRhdGEuc2VpJiZkLnB1c2godC5kYXRhLnNlaSksdC5kYXRhLm1ldGFkYXRhJiZsLnB1c2godC5kYXRhLm1ldGFkYXRhKX0sc2VsZi5wb3N0TWVzc2FnZSgic3RhcnRlZCIpO2NvbnN0IGc9dS5yZWFkYWJsZS5nZXRSZWFkZXIoKSxjPXUud3JpdGFibGUuZ2V0V3JpdGVyKCk7InNlaS1yeCI9PT11Lm9wdGlvbnMubmFtZT9mdW5jdGlvbiBlKG4pe2cucmVhZCgpLnRoZW4oKGE9PntpZighYS5kb25lKXtpZihhLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpe2NvbnN0IGU9ZnVuY3Rpb24oZSl7Y29uc3Qgbj1uZXcgRGF0YVZpZXcoZS5kYXRhKTtsZXQgYT0wO2Zvcig7YSs0PGUuZGF0YS5ieXRlTGVuZ3RoOyl7aWYoMD09PW4uZ2V0VWludDgoYSswKSYmMD09PW4uZ2V0VWludDgoYSsxKSYmMD09PW4uZ2V0VWludDgoYSsyKSYmMT09PW4uZ2V0VWludDgoYSszKSYmNj09PW4uZ2V0VWludDgoYSs0KSl7bGV0IG89YSs2LHI9MCxzPTA7Zm9yKDsyNTU9PT0ocz1uLmdldFVpbnQ4KG8rKykpOylyKz0yNTU7cis9cztjb25zdCBpPXQoZS5kYXRhLG8scik7cmV0dXJuIG5ldyBVaW50OEFycmF5KGkpfWErK31yZXR1cm4gbnVsbH0oYS52YWx1ZSk7ZSYmbi5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe3NlaTplfSl9Yy53cml0ZShhLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0odSk6InNlaS10eCI9PT11Lm9wdGlvbnMubmFtZT9mdW5jdGlvbiB0KG4pe2cucmVhZCgpLnRoZW4oKGE9PntpZighYS5kb25lKXtpZihhLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpe2NvbnN0IHQ9ZC5zaGlmdCgpO3QmJihhLnZhbHVlLmRhdGE9ZShhLnZhbHVlLmRhdGEsdCkpfWMud3JpdGUoYS52YWx1ZSksbi5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe3RyYW5zZm9ybWVkOiEwfSksdChuKX19KSl9KHUpOiJhdWRpby1tZXRhZGF0YS1yeCI9PT11Lm9wdGlvbnMubmFtZT9mdW5jdGlvbiB0KGUpe2cucmVhZCgpLnRoZW4oKGY9PntpZighZi5kb25lKXtpZihmLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZEF1ZGlvRnJhbWUpe2NvbnN0IHQ9ZnVuY3Rpb24odCxlPSExKXtjb25zdCBmPXQuZ2V0VWludDgoMCk7aWYoZiE9PW4pcmV0dXJuO2NvbnN0IHU9dC5nZXRVaW50MTYoMSksZD1hK28rdSxsPW5ldyBVaW50OEFycmF5KHQuYnl0ZUxlbmd0aC1kKTtsLnNldChuZXcgVWludDhBcnJheSh0LmJ1ZmZlcixkLHQuYnl0ZUxlbmd0aC1kKSk7Y29uc3QgZz17bTpmLHRsdkxlbjp1LHRsdjpbXSxmcmFtZTpsfTtsZXQgYz1hK287Zm9yKDtjPGQ7KXtjb25zdCBuPXQuZ2V0VWludDgoYyksYT10LmdldFVpbnQxNihjK3IpLG89citzO2lmKG49PT1pLkFVRElPX0xFVkVMKXtsZXQgcj10LmdldFVpbnQ4KGMrbyk7Zm9yKGxldCBlPTE7ZTxhO2UrKylyPXI8PDh8dC5nZXRVaW50OChjK28rZSk7Zy50bHYucHVzaCh7dGFnOm4sbGVuZ3RoOmEsdmFsdWU6ZT8xMjdecj4+MToxMjcmcn0pfWVsc2UgaWYobj09PWkuTUVUQURBVEF8fG49PT1pLkFVRElPXzY0X0JJVF9QVFMpe2NvbnN0IGU9bmV3IFVpbnQ4QXJyYXkoYSk7Zm9yKGxldCBuPTA7bjxhO24rKyllW25dPXQuZ2V0VWludDgoYytvK24pO2cudGx2LnB1c2goe3RhZzpuLGxlbmd0aDphLHZhbHVlOmV9KX1jKz1vK2F9cmV0dXJuIGd9KG5ldyBEYXRhVmlldyhmLnZhbHVlLmRhdGEpKTtpZih0KXtjb25zdCBuPXQudGx2LmZpbmQoKHQ9PnQudGFnPT09aS5NRVRBREFUQXx8dC50YWc9PT1pLkFVRElPXzY0X0JJVF9QVFMpKTtuJiZuLnZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSYmZS5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe21ldGFkYXRhOm4udmFsdWV9KSxmLnZhbHVlLmRhdGE9dC5mcmFtZS5idWZmZXJ9fWMud3JpdGUoZi52YWx1ZSksZS5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe3RyYW5zZm9ybWVkOiEwfSksdChlKX19KSl9KHUpOiJhdWRpby1tZXRhZGF0YS10eCI9PT11Lm9wdGlvbnMubmFtZSYmZnVuY3Rpb24gdChlKXtnLnJlYWQoKS50aGVuKChmPT57aWYoIWYuZG9uZSl7aWYoZS5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe2dldE1ldGFkYXRhOiEwfSksZi52YWx1ZSBpbnN0YW5jZW9mIFJUQ0VuY29kZWRBdWRpb0ZyYW1lKXtjb25zdCB0PWwuc2hpZnQoKTt0JiYoZi52YWx1ZS5kYXRhPWZ1bmN0aW9uKHQsZSxpKXtjb25zdCBmPWkuYnl0ZUxlbmd0aCx1PWYrcitzLGQ9YStvK3UsbD1uZXcgQXJyYXlCdWZmZXIodC5ieXRlTGVuZ3RoK2QpLGc9bmV3IERhdGFWaWV3KGwpO2cuc2V0VWludDgoMCxuKSxnLnNldFVpbnQxNigxLHUpLGcuc2V0VWludDgoMyxlKSxnLnNldFVpbnQxNig0LGYpO2ZvcihsZXQgdD0wO3Q8Zjt0KyspZy5zZXRVaW50OCg2K3QsaVt0XSk7Y29uc3QgYz1uZXcgVWludDhBcnJheShnLmJ1ZmZlcik7cmV0dXJuIGMuc2V0KG5ldyBVaW50OEFycmF5KHQpLGQpLGMuYnVmZmVyfShmLnZhbHVlLmRhdGEsaS5BVURJT182NF9CSVRfUFRTLHQpKX1jLndyaXRlKGYudmFsdWUpLGUub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQoZSl9fSkpfSh1KX0sc2VsZi5wb3N0TWVzc2FnZSgicmVnaXN0ZXJlZCIpKTsK")],{type:"text/javascript"});return setTimeout((()=>Ev.revokeObjectURL(e)),0),new Worker(Ev.createObjectURL(e))}const XB=71,JB=1,ZB=2,$B=1,eL=2;var tL=function(e){return e[e.AUDIO_LEVEL=1]="AUDIO_LEVEL",e[e.METADATA=2]="METADATA",e[e.AUDIO_64_BIT_PTS=3]="AUDIO_64_BIT_PTS",e}(tL||{});function nL(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.getUint8(0);if(n!==XB)return;const r=e.getUint16(1),i=JB+ZB+r,o=new Uint8Array(e.byteLength-i);o.set(new Uint8Array(e.buffer,i,e.byteLength-i));const a={m:n,tlvLen:r,tlv:[],frame:o};let s=JB+ZB;for(;s<i;){const n=e.getUint8(s),r=e.getUint16(s+$B),i=$B+eL;if(n===tL.AUDIO_LEVEL){let o=e.getUint8(s+i);for(let t=1;t<r;t++)o=o<<8|e.getUint8(s+i+t);a.tlv.push({tag:n,length:r,value:t?127^o>>1:127&o})}else if(n===tL.METADATA||n===tL.AUDIO_64_BIT_PTS){const t=new Uint8Array(r);for(let n=0;n<r;n++)t[n]=e.getUint8(s+i+n);a.tlv.push({tag:n,length:r,value:t})}s+=i+r}return a}const rL=new Map,iL=127,oL=1e-10,aL=139/13,sL=new Map;function cL(e,t,n){const r="".concat(e,"-").concat(t,"-").concat(n);let i=0;if(sL.has(r))i=sL.get(r);else{const o=.5;i=Math.log(function(e,t){const n=e-t;t<n&&(t=n);let r=1;for(let i=e,o=1;i>t;i--,o++)r=r*i/o;return r}(t,e))+e*Math.log(o)+(t-e)*Math.log(1-o)-Math.log(n)+n*e,sL.set(r,i)}return i<oL&&(i=oL),i}function lL(e,t,n){const r=t.length,i=e.length/r;let o=!1;for(let a=0,s=0;a<r;a++){let r=0;for(let t=s+i;s<t;s++)e[s]>n&&r++;t[a]!==r&&(t[a]=r,o=!0)}return o}window.cache=sL;let dL=0;class uL{constructor(e){nk(this,"id",void 0),nk(this,"immediates",[]),nk(this,"lastNonSilence",-1),nk(this,"immediateSpeechActivityScore",oL),nk(this,"lastLevelChangedTime",Date.now()),nk(this,"levels",[]),nk(this,"longs",[]),nk(this,"longSpeechActivityScore",oL),nk(this,"mediums",[]),nk(this,"mediumSpeechActivityScore",oL),nk(this,"minLevel",0),nk(this,"nextMinLevel",0),nk(this,"nextMinLevelWindowLength",0),nk(this,"energyScore",0),this.id=e||"".concat(dL++),this.immediates.length=50,this.mediums.length=10,this.longs.length=1,this.levels.length=this.immediates.length}computeImmediates(){const e=this.immediates,t=this.levels,n=this.minLevel+aL;let r=!1;for(let i=0;i<e.length;++i){let o=t[i];o<n&&(o=0);const a=Math.floor(o/aL);e[i]!==a&&(e[i]=a,r=!0)}return r}computeLongs(){return lL(this.mediums,this.longs,4)}computeMediums(){return lL(this.immediates,this.mediums,7)}evaluateImmediateSpeechActivityScore(){this.immediateSpeechActivityScore=cL(this.immediates[0],13,.78)}evaluateLongSpeechActivityScore(e){this.longSpeechActivityScore=cL(this.longs[0],10,47),this.longSpeechActivityScore>oL&&(this.lastNonSilence=e)}evaluateMediumSpeechActivityScore(){this.mediumSpeechActivityScore=cL(this.mediums[0],5,24)}evaluateSpeechActivityScores(e){this.computeImmediates()&&(this.evaluateImmediateSpeechActivityScore(),this.computeMediums()&&(this.evaluateMediumSpeechActivityScore(),this.computeLongs()&&this.evaluateLongSpeechActivityScore(e)))}getLastLevelChangedTime(){return this.lastLevelChangedTime}getLevels(){var e;return"[".concat(gi(e=[...this.levels]).call(e).join(),"]")}getSpeechActivityScore(e){switch(e){case 0:return this.immediateSpeechActivityScore;case 1:return this.mediumSpeechActivityScore;case 2:return this.longSpeechActivityScore;default:throw new Error("interval "+e)}}levelChanged(e,t){if(this.lastLevelChangedTime<=t){this.lastLevelChangedTime=t;let n=e;return e<0&&(n=0),e>iL&&(n=iL),this.levels.unshift(n),this.levels.length>this.immediates.length&&this.levels.pop(),this.updateMinLevel(n),n>=this.minLevel+aL?n:n/2}return-1}levelTimedOut(){this.levelChanged(0,this.lastLevelChangedTime)}updateMinLevel(e){if(0!==e){if(0===this.minLevel||this.minLevel>e)return this.minLevel=e,this.nextMinLevel=0,void(this.nextMinLevelWindowLength=0);if(0===this.nextMinLevel)return this.nextMinLevel=e,void(this.nextMinLevelWindowLength=1);if(this.nextMinLevel>e&&(this.nextMinLevel=e),this.nextMinLevelWindowLength++,this.nextMinLevelWindowLength>=750){let e=Math.sqrt(this.minLevel*this.nextMinLevel);e<0?e=0:e>iL&&(e=iL),this.minLevel=e,this.nextMinLevel=0,this.nextMinLevelWindowLength=0}}}}class AL{constructor(e){nk(this,"algorithm",void 0),this.algorithm=e}execute(){let e=!this.algorithm;if(!e)try{const t=this.algorithm.runInDecisionMaker(this);t<=0?e=!0:setTimeout(this.execute.bind(this),t)}catch(t){e=!0}e&&this.algorithm&&this.algorithm.decisionMakerExited(this)}}class hL{constructor(e,t,n){nk(this,"isDominant",void 0),nk(this,"energyRanking",void 0),nk(this,"energyScore",void 0),this.isDominant=e,this.energyRanking=t,this.energyScore=n}}class pL extends QR{constructor(e){super(),nk(this,"dominantId",null),nk(this,"lastDecisionTime",0),nk(this,"lastLevelChangedTime",0),nk(this,"lastLevelIdleTime",0),nk(this,"relativeSpeechActivities",[]),nk(this,"speakers",new Map),nk(this,"enableSilence",!1),nk(this,"timeoutToSilenceInterval",0),nk(this,"decisionMaker",null),nk(this,"loudest",[]),nk(this,"numLoudestToTrack",3),nk(this,"energyExpireTimeMs",250),nk(this,"energyAlphaPct",50),this.timeoutToSilenceInterval=e,this.enableSilence=e>0,this.relativeSpeechActivities.length=3}setLoudestConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;this.numLoudestToTrack=e,null!=t&&(this.energyExpireTimeMs=t),null!=n&&(this.energyAlphaPct=n),this.loudest.length>e&&this.loudest.splice(e)}getDominantSpeaker(){return this.dominantId}isAmongLoudest(e){return this.loudest.some((t=>t.id===e))}levelChanged(e,t){const n=Date.now(),r=this.getOrCreateSpeaker(e);this.lastLevelChangedTime<n&&(this.lastLevelChangedTime=n,this.maybeStartDecisionMaker());const i=r.levelChanged(t,n);return this.updateLoudestList(r,i,n)}runInDecisionMaker(e){return this.decisionMaker!==e||this.lastDecisionTime>0&&this.lastDecisionTime-this.lastLevelChangedTime>=15e3?-1:this._runInDecisionMaker()}decisionMakerExited(e){this.decisionMaker===e&&(this.decisionMaker=null)}destroy(){this.decisionMaker=null,this.loudest.length=0,this.speakers.clear(),this.removeAllListeners()}addSpeakers(e){e.forEach((e=>{this.speakers.has(e.id)||this.speakers.set(e.id,e)}))}removeSpeakers(e){e.forEach((e=>{this.speakers.delete(e.id)}))}getOrCreateSpeaker(e){let t=this.speakers.get(e);return t||(t=new uL(e),this.speakers.set(e,t),this.maybeStartDecisionMaker()),t}updateLoudestList(e,t,n){const r=e.id===this.dominantId;if(t<0){let t=0;for(;t<this.loudest.length&&this.loudest[t]!==e;)++t;return new hL(r,t,e.energyScore)}if(e.energyScore=Math.floor((this.energyAlphaPct*t+(100-this.energyAlphaPct)*e.energyScore+50)/100),0===this.numLoudestToTrack)return new hL(r,0,e.energyScore);const i=n-this.energyExpireTimeMs;let o=0;for(;o<this.loudest.length;){const t=this.loudest[o];if(t.getLastLevelChangedTime()<i&&this.loudest.length>=this.numLoudestToTrack)this.loudest.splice(o,1);else if(t.id!==e.id)++o;else if(this.loudest.splice(o,1),this.loudest.length<this.numLoudestToTrack)break}let a=0;for(;a<this.loudest.length&&!(this.loudest[a].energyScore<e.energyScore);)++a;return a<this.numLoudestToTrack&&(this.loudest.splice(a,0,e),this.loudest.length>this.numLoudestToTrack&&this.loudest.splice(this.numLoudestToTrack,1)),new hL(r,a,e.energyScore)}maybeStartDecisionMaker(){!this.decisionMaker&&this.speakers.size>0&&(this.decisionMaker=new AL(this),this.decisionMaker.execute())}makeDecision(e){let t=null,n=null;const r=this.speakers.size;let i=null;if(0===r)i=null;else if(1===r){var o;const t=uh(o=this.speakers).call(o).next().value;this.enableSilence&&t&&(i=t.id,t.evaluateSpeechActivityScores(e),e-t.lastNonSilence>this.timeoutToSilenceInterval&&(i=null))}else{let t=null==this.dominantId?null:this.speakers.get(this.dominantId);if(null==t){const e=this.speakers.entries().next();e.value&&(i=e.value[0],t=e.value[1])}else i=t.id;null!=t&&t.evaluateSpeechActivityScores(e);const n=this.relativeSpeechActivities;let r=2;for(const o of this.speakers.entries()){const[a,s]=o;if(s===t)continue;s.evaluateSpeechActivityScores(e);for(let e=0;e<n.length;++e){const r=null==t?oL:t.getSpeechActivityScore(e);n[e]=Math.log(s.getSpeechActivityScore(e)/r)}const c=n[0],l=n[1],d=n[2];c>3&&l>2&&d>0&&l>r&&(r=l,i=a)}this.enableSilence&&null!=t&&i===t.id&&e-t.lastNonSilence>this.timeoutToSilenceInterval&&(i=null)}null==i&&!this.enableSilence||i===this.dominantId||(t=this.dominantId,this.dominantId=i,n=this.dominantId),null==n&&!this.enableSilence||n===t||this.emit("ActiveSpeakerChanged",n)}_runInDecisionMaker(){const e=Date.now(),t=300-(e-this.lastLevelIdleTime);let n=0;t<=0?(0!==this.lastLevelIdleTime&&this.timeoutIdleLevels(e),this.lastLevelIdleTime=e):n=t;let r=300-(e-this.lastDecisionTime);return r<=0&&(this.lastDecisionTime=e,this.makeDecision(e),r=300-(Date.now()-e)),r>0&&n>r&&(n=r),n}timeoutIdleLevels(e){const t=[];for(const r of uh(n=this.speakers).call(n)){var n;const i=e-r.getLastLevelChangedTime();36e5<i&&(null==this.dominantId||r.id!==this.dominantId)?t.push(r.id):300<i&&r.levelTimedOut()}t.forEach((e=>this.speakers.delete(e)))}}const fL=new Map;let mL=null,gL=null;const vL=3;let yL=[];const bL=new Map,EL=new Map;class wL{get samples(){return this.actives+this.inactives}get activeRate(){return this.actives/this.samples}constructor(e,t){nk(this,"id",void 0),nk(this,"track",void 0),nk(this,"score",0),nk(this,"active",!0),nk(this,"muted",!1),nk(this,"timer",0),nk(this,"actives",0),nk(this,"inactives",0),this.id=e,this.track=t,this.setActive(bL.size<3)}autoCheckActive(){this.autoSetActive(),this.autoAdjustActive(),this.resetTimer(),this.actives=0,this.inactives=0}autoSetActive(){const e=this.active;this.active=this.activeRate>=.8;const{actives:t,inactives:n}=function(){const e=[],t=[];return Array.from(uh(bL).call(bL)).forEach((n=>{n.active?e.push(n):t.push(n)})),{actives:e,inactives:t}}();if(t.length>3){let e;t.forEach((t=>{(!e||e.score>t.score)&&(e=t)})),e&&e.setActive(!1)}if(t.length<3&&n.length>0){let t;n.forEach((e=>{(!t||t.score<e.score)&&e.id!==this.id&&(t=e)})),t&&e&&!this.active&&(t.samples>40&&t.activeRate-this.activeRate>.4?t.setActive(!0):this.active=!0)}this.setMuted(!this.active)}setActive(e){this.active=e,this.resetTimer(),this.setMuted(!e)}autoAdjustActive(){this.active?this.autoSwitchToInactive():this.autoSwitchToActive()}autoSwitchToActive(){const e=function(e){let t;return Array.from(uh(bL).call(bL)).forEach((n=>{!n.active||n.id===e||n.samples<40||(!t||n.score<t.score)&&(t=n)})),t}(this.id);e&&this.activeRate-e.activeRate>.4&&(e.setActive(!1),this.setActive(!0))}autoSwitchToInactive(){const e=function(e){let t;return Array.from(uh(bL).call(bL)).forEach((n=>{n.active||n.id===e||n.samples<40||(!t||n.score>t.score)&&(t=n)})),t}(this.id);e&&e.activeRate-this.activeRate>.4&&(e.setActive(!0),this.setActive(!1))}addSample(e){e?this.actives+=1:this.inactives+=1,this.samples>66.66666666666667&&this.autoCheckActive()}setMuted(e){this.track&&(this.track.enabled=!e,this.muted=e)}resetTimer(){this.clearTimer(),this.timer=window.setTimeout((()=>{if(0!==this.samples)return this.samples<50?this.resetTimer():void this.autoCheckActive()}),1e3)}clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=0)}}let _L;function SL(e){const t=bL.get(e);t&&(bL.delete(e),t.clearTimer())}const CL=new Map,TL=new Map;function IL(e,t,n){let r=new Uint8Array(e,t,n),i=[],o=0;for(;i.length<n;)o+3<n&&0===r[o]&&0===r[o+1]&&3===r[o+2]&&(0===r[o+3]||1===r[o+3]||2===r[o+3]||3===r[o+3])?(i.push(r[o],r[o+1],r[o+3]),o+=4):(i.push(r[o]),o++);return new Uint8Array(i)}const RL=new Map,xL=new Map;!function(){const e=WI();hO.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),hO.getStreamFromExtension=e.name===HI.CHROME&&Number(e.version)>34,hO.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),hO.supportMinBitrate=e.name===HI.CHROME||e.name===HI.EDGE,hO.supportSetRtpSenderParameters=function(){const e=WI();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!yR()||!(!$I()&&!JI())||e.name===HI.FIREFOX&&Number(e.version)>=64)}(),e.name===HI.SAFARI&&(Number(e.version)>=14?hO.supportDualStream=!0:hO.supportDualStream=!1),hO.webAudioMediaStreamDest=function(){const e=WI();return!(e.name===HI.SAFARI&&Number(e.version)<12)}(),hO.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,hO.supportWebGL="undefined"!=typeof WebGLRenderingContext,hO.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,yR()||(hO.webAudioWithAEC=!0),hO.supportShareAudio=function(){const e=WI();return(e.os===VI.WIN_10||e.os===VI.WIN_81||e.os===VI.WIN_7||e.os===VI.LINUX||e.os===VI.MAC_OS||e.os===VI.CHROMIUM_OS)&&e.name===HI.CHROME&&Number(e.version)>=74}(),hO.supportDataChannel=!!(rR(76)||function(e){const t=WI();return!(t.name!==HI.FIREFOX||!t.osVersion)&&Number(t.version)>=e}(68)||sR(14)),hO.supportPCSetConfiguration=function(){const e=window.RTCPeerConnection;return!tR()&&!!e&&e.prototype.setConfiguration instanceof Function}(),hO.supportWebRTCEncodedTransform=function(){const e=WI();return"Chrome"===e.name&&Number(e.version)>=87||"Safari"===e.name&&Number(e.version)>=15}(),hO.supportWebRTCInsertableStream=function(){const e=WI();return(e.name===HI.CHROME||e.name===HI.EDGE)&&Number(e.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),hO.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,hO.supportWebCrypto="undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.subtle,lx((()=>{hO.supportDualStreamEncoding=function(){const e=WI();return!!CN("DISABLE_WEBAUDIO")||"Safari"===e.name&&Number(e.version)>=14||!!("Chrome"===e.name&&/Windows/i.test(e.os||"")&&Number(e.version)>=100&&CN("CHROME_DUAL_STREAM_USE_ENCODING"))}(),rO.debug("browser ua: ",navigator.userAgent),rO.info("browser info: ",e),rO.info("browser compatibility: ",hO)}))}();const NL=["CHINA","GLOBAL"],OL=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],kL=[],PL=[];function BL(e,t){return!!t&&kL.some((n=>n.uid===e&&n.channelName===t))}function LL(){return PL.length>0}var DL=Iw.forEach,UL=zr("forEach")?[].forEach:function(e){return DL(this,e,arguments.length>1?arguments[1]:void 0)};On({target:"Array",proto:!0,forced:[].forEach!==UL},{forEach:UL});var ML=er("Array","forEach"),FL=mr,jL=et,QL=u,VL=ML,HL=Array.prototype,zL={DOMTokenList:!0,NodeList:!0},KL=function(e){var t=e.forEach;return e===HL||QL(HL,e)&&t===HL.forEach||jL(zL,FL(e))?VL:t},GL=r(KL),WL=Je,qL=ho;On({target:"Object",stat:!0,forced:i((function(){qL(1)}))},{keys:function(e){return qL(WL(e))}});var YL=r(ee.Object.keys),XL=r(ri),JL=r(mi),ZL=On,$L=ai,eD=Jc,tD=$,nD=jn,rD=Kn,iD=J,oD=Wf,aD=pt,sD=al,cD=QE("slice"),lD=aD("species"),dD=Array,uD=Math.max;ZL({target:"Array",proto:!0,forced:!cD},{slice:function(e,t){var n,r,i,o=iD(this),a=rD(o),s=nD(e,a),c=nD(void 0===t?a:t,a);if($L(o)&&(n=o.constructor,(eD(n)&&(n===dD||$L(n.prototype))||tD(n)&&null===(n=n[lD]))&&(n=void 0),n===dD||void 0===n))return sD(o,s,c);for(r=new(void 0===n?dD:n)(uD(c-s,0)),i=0;s<c;s++,i++)s in o&&oD(r,i,o[s]);return r.length=i,r}});var AD=er("Array","slice"),hD=u,pD=AD,fD=Array.prototype,mD=function(e){var t=e.slice;return e===fD||hD(fD,e)&&t===fD.slice?pD:t},gD=r(mD);function vD(e,t,n,r,i){var o,a,s,c={};return GL(o=YL(r)).call(o,(function(e){c[e]=r[e]})),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=XL(a=JL(s=gD(n).call(n)).call(s)).call(a,(function(n,r){return r(e,t,n)||n}),c),i&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(i):void 0,c.initializer=void 0),void 0===c.initializer?(xE(e,t,c),null):c}let yD=function(e){return e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",e}({}),bD=function(e){return e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR",e}({}),ED=function(e){return e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",e}({}),wD=function(e){return e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",e}({}),_D=function(e){return e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.DATASTREAM2_NOT_AVAILABLE=27]="DATASTREAM2_NOT_AVAILABLE",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",e}({}),SD=function(e){return e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed",e}({}),CD=function(e){return e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.PRE_CONNECT_PC="pre_connect_pc",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",e.RECOVER_NOTIFICATION="recover_notification",e}({}),TD=function(e){return e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag",e}({}),ID=function(e){return e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats",e}({}),RD=function(e){return e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list",e}({}),xD=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({}),ND=function(e){return e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",e}({});function OD(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw rO.error("Invalid Channel Name ".concat(e)),new AO(CR.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function kD(e){if(!("number"==typeof(t=e)&&Math.floor(t)===t&&0<=t&&t<=4294967295||BR(e,1,255)))throw new AO(CR.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var t;"string"==typeof e&&rO.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}let PD=function(e){return e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e}({});const BD={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},LD={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function DD(e,t){OR(e.url,"".concat(t,".url"),1,1e3,!1),PR(e.x)||xR(e.x,"".concat(t,".x"),0,1e4),PR(e.y)||xR(e.y,"".concat(t,".y"),0,1e4),PR(e.width)||xR(e.width,"".concat(t,".width"),0,1e4),PR(e.height)||xR(e.height,"".concat(t,".height"),0,1e4),PR(e.zOrder)||xR(e.zOrder,"".concat(t,".zOrder"),0,255),PR(e.alpha)||xR(e.alpha,"".concat(t,".alpha"),0,1,!1)}const UD={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""};let MD=function(e){return e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address",e}({}),FD=function(e){return e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",e}({}),jD=function(e){return e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",e}({});function QD(e){if(!e.channelName)throw new AO(CR.INVALID_PARAMS,"invalid channelName in info");if("number"!=typeof e.uid)throw new AO(CR.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&OR(e.token,"info.token",1,2047),kD(e.uid),OD(e.channelName),!0}let VD=function(e){return e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile",e}({}),HD=function(e){return e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",e}({}),zD=function(e){return e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",e}({}),KD=function(e){return e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",e}({}),GD=function(e){return e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low",e}({}),WD=function(e){return e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.PRE_CONNECT_PC="pre-connect_pc",e.UPDATE_GATEWAY_CONFIG="update-gateway-config",e}({}),qD=function(e){return e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON",e}({}),YD=function(e){return e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7",e}({}),XD=function(e){return e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS",e}({});const JD=[XD.AFRICA,XD.ASIA,XD.CHINA,XD.EUROPE,XD.GLOBAL,XD.INDIA,XD.JAPAN,XD.NORTH_AMERICA,XD.OCEANIA,XD.OVERSEA,XD.SOUTH_AMERICA];let ZD=function(e){return e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL",e}({});const $D={CHINA:{},ASIA:{CODE:ZD.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:ZD.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:ZD.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:ZD.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:ZD.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:ZD.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:ZD.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:ZD.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:ZD.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:ZD.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:ZD.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:ZD.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:ZD.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};mN&&($D.CHINA={CODE:ZD.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});let eU=function(e){return e.UPDATE_BITRATE_LIMIT="update_bitrate_limit",e.UPDATE_CLIENT_ROLE_OPTIONS="update_client_role_options",e}({});function tU(e){return!!e&&!(!e.uplink||!e.id)&&void 0!==e.uplink.max_bitrate&&void 0!==e.uplink.min_bitrate}class nU extends QR{constructor(e,t){super(),uC(this,"onICEConnectionStateChange",void 0),uC(this,"onConnectionStateChange",void 0),uC(this,"onDTLSTransportStateChange",void 0),uC(this,"onDTLSTransportError",void 0),uC(this,"onICETransportStateChange",void 0),uC(this,"onFirstAudioReceived",void 0),uC(this,"onFirstVideoReceived",void 0),uC(this,"onFirstAudioDecoded",void 0),uC(this,"onFirstVideoDecoded",void 0),uC(this,"onFirstVideoDecodedTimeout",void 0),uC(this,"onSelectedLocalCandidateChanged",void 0),uC(this,"onSelectedRemoteCandidateChanged",void 0),uC(this,"onICECandidateError",void 0),uC(this,"getLocalVideoStats",void 0)}}class rU extends nU{constructor(e,t){super(e,t),uC(this,"establishPromise",void 0)}}let iU=function(e){return e.VIDEO="video",e.AUDIO="audio",e}({}),oU=function(e){return e.UDP_RELAY="udp_relay",e.UDP_TCP_RELAY="udp_tcp_relay",e.TCP_RELAY="tcp_relay",e.RELAY="relay",e}({}),aU=function(e){return e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.UDP_TCP_RESTART=1]="UDP_TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.TCP_RESTART=3]="TCP_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",e}({});const sU=["disconnected","failed"];let cU=function(e){return e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack",e}({}),lU=function(e){return e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected",e}({}),dU=function(e){return e.AudioMetadata="audioMetadata",e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE",e}({}),uU=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),AU=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),hU=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),pU=function(e){return e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback",e.PRE_CONNECT_PC="transmitter:pre_connect_pc",e}({}),fU=function(e){return e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation",e}({}),mU=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),gU=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),vU=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),yU=function(e){return e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check",e}({}),bU=function(e){return e.ABORT="abort",e}({}),EU=function(e){return e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e}({}),wU=function(e){return e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed",e}({});const _U={[yD.ACCESS_POINT]:{[wD.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[wD.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[wD.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[wD.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[wD.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[wD.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[wD.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[wD.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[wD.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[wD.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[wD.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[wD.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[wD.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[wD.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[wD.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[wD.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[wD.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[wD.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[yD.UNILBS]:{[ED.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[ED.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[ED.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[ED.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[ED.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[ED.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[ED.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[ED.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[ED.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[ED.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[ED.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[ED.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[yD.STRING_UID_ALLOCATOR]:{[bD.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[bD.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[bD.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function SU(e){const t=_U[Math.floor(e/1e4)];if(!t)return{desc:"unknown error",retry:!1};const n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===yD.ACCESS_POINT){const t=e%1e4;if("1"===t.toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return n}const CU={[_D.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[_D.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[_D.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[_D.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[_D.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[_D.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[_D.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[_D.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[_D.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[_D.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[_D.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[_D.DATASTREAM2_NOT_AVAILABLE]:{desc:"DATASTREAM2_NOT_AVAILABLE",action:"quit"},[_D.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[_D.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[_D.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[_D.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[_D.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[_D.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[_D.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[_D.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[_D.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[_D.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[_D.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[_D.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[_D.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[_D.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[_D.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[_D.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[_D.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[_D.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[_D.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[_D.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[_D.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[_D.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[_D.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[_D.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[_D.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[_D.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[_D.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[_D.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[_D.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[_D.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[_D.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[_D.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[_D.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[_D.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[_D.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[_D.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[_D.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[_D.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[_D.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[_D.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[_D.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[_D.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[_D.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[_D.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[_D.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[_D.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[_D.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[_D.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[_D.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[_D.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[_D.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[_D.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function TU(e){return CU[e]||{desc:"UNKNOWN_ERROR_".concat(e),action:"failed"}}function IU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IU(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xU(e,t){if("string"==typeof e)return e;const{proxy:n,host:r,port:i}=e;if(t){const e=CN("JOIN_GATEWAY_FALLBACK_PORT")||443;return 443===e?"wss://".concat(r,"/ws/?p=").concat(Number(i)+150):"wss://".concat(r,":").concat(e,"/ws/?p=").concat(Number(i)+150)}return n?"wss://".concat(n,"/ws/?h=").concat(r,"&p=").concat(i):"wss://".concat(r,":").concat(i)}const NU=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,OU=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,kU=/wss:\/\/(.+):([0-9]+)\/?/,PU=/wss:\/\/(.[^\/]+)\/?/;let BU=0;class LU{constructor(e,t){uC(this,"id",0),uC(this,"store",void 0),uC(this,"recordIndex",void 0),uC(this,"websockets",[]),uC(this,"try443PortDuration",2e3),uC(this,"forceCloseWSDuration",5e3),uC(this,"try443PortTimeout",null),uC(this,"forceCloseTimeout",null),uC(this,"isTry443PortFailed",!1),uC(this,"isNormalPortFailed",!1),uC(this,"useDoubleDomain",!1),uC(this,"useProxy",!1),uC(this,"startTime",Date.now()),this.id=++BU,this.try443PortDuration=CN("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach((e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()})),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout),this.forceCloseTimeout=null,this.try443PortTimeout=null}logger(){var e;const t=Date.now()-this.startTime;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];rO.debug("[choose-best-ws ".concat(null===(e=this.store)||void 0===e?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:"),...r)}createWebSocket(e,t,n){this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:n});const r=CN("GATEWAY_DOMAINS"),i=Date.now(),o=[],a=r.find((t=>{var n;return Br(n=e.host).call(n,t)}));a||(this.useDoubleDomain=!1);const s=[];if(this.useDoubleDomain)r.forEach((n=>{s.push(xU(RU(RU({},e),{},{host:e.host.replace(a,n)}),t))}));else{const n=RU({},e);if(t&&a){const e=r.find((e=>e!==a));e&&(n.host=n.host.replace(a,e))}s.push(xU(n,t))}try{s.forEach((e=>{const t=new WebSocket(e);t.binaryType="arraybuffer",o.push(t),this.logger("ws is connecting:",t.url)}))}catch(r){if(this.logger("ws create failed"),o.forEach((e=>e.close())),o.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,n);if(!t&&443!==Number(e.port))return this.createWebSocket(e,!0,n);throw new AO(CR.WS_ERR,"init websocket failed! Error: ".concat(r.toString()))}const c=MI();this.store&&this.store.recordJoinChannelService({urls:o.map((e=>e.url)),service:"gateway"},this.recordIndex),o.forEach((e=>{e.onopen=()=>{this.logger("onopen: ws ".concat(e.url," open cost ").concat(Date.now()-i,"ms")),this.websockets.forEach((t=>{t!==e&&(t.onopen=null,t.onclose=null,t.onmessage=null,t.close(),this.logger("close backup websocket: ".concat(t.url)))})),this.websockets.length=0,c.resolve(e)},e.onclose=n=>{this.logger("onclose: ws ".concat(e.url," closed cost ").concat(Date.now()-i,"ms state: ").concat(e.readyState));const r=o.every((e=>e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING));this.logger("".concat(t?"443":"47xx"," websocket closed, all failed: ").concat(r)),r&&(t||this.isTry443PortFailed||this.useProxy)?(this.logger("onclose: all websocket is closed, ".concat(n.reason)),c.reject({code:n.code,reason:qD.A_ROUND_WS_FAILED})):!t&&r&&!this.isNormalPortFailed&&this.try443PortTimeout&&(this.logger("all 47xx websocket is closed, try 443 port"),this.clearTimeout(),d()),t?this.isTry443PortFailed=r:this.isNormalPortFailed=r},e.onmessage=t=>this.logger("".concat(e.url," onmessage: ").concat(t.data))})),this.websockets.push(...o);const l=()=>{this.websockets.forEach((e=>e.readyState!==WebSocket.OPEN&&e.close()))},d=()=>{if(c.isResolved)return l();WI().os===VI.MAC_OS&&tR()&&l(),this.createWebSocket(e,!0,!0).then((e=>{c.resolve(e)})).catch((e=>{this.isNormalPortFailed&&c.reject(e),this.logger("try 443 port to create ws failed")})),this.forceCloseTimeout=window.setTimeout((()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",c.isResolved),this.forceCloseTimeout=null,l()}),this.forceCloseWSDuration)};return n||(()=>{if(t||this.useProxy)return this.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout((()=>{this.forceCloseTimeout=null,l()}),this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout((()=>{this.logger("2s timeout, isWebsocket created: ",c.isResolved),this.try443PortTimeout=null,d()}),this.try443PortDuration)})(),c.promise}chooseBestWebsocket(e,t,n,r){return this.useDoubleDomain=!!t,"string"==typeof e&&(e=function(e){let t,n,r;return[,t,n,r]=e.match(NU)||[],t||([,n,r]=e.match(OU)||[]),n&&r||([,n,r]=e.match(kU)||[]),n&&r||([,n]=e.match(PU)||[]),n||rO.warning("un-destructible url: ",e),{proxy:t,host:n,port:r||"443"}}(e)),this.recordIndex=r,this.useProxy=!!e.proxy,n&&this.useProxy&&(rO.warn("cannot use 443 only when use proxy"),n=!1),this.createWebSocket(e,!!n,!1).finally((()=>this.clearTimeout()))}}function DU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class UU extends QR{get url(){return this.websocket&&this.websocket.url||this._websocketUrl}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Br(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(ND.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(ND.CONNECTED):"closed"===this._state?this.emit(ND.CLOSED):"failed"===this._state&&this.emit(ND.FAILED))}resetReconnectCount(e){rO.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;super(),uC(this,"_websocketUrl",null),uC(this,"connectionID",0),uC(this,"currentURLIndex",0),uC(this,"urls",[]),uC(this,"_reconnectMode","tryNext"),uC(this,"reconnectReason",void 0),uC(this,"_initMutex",void 0),uC(this,"name",void 0),uC(this,"_state","closed"),uC(this,"reconnectInterrupter",void 0),uC(this,"websocket",void 0),uC(this,"retryConfig",void 0),uC(this,"reconnectCount",0),uC(this,"forceCloseTimeout",5e3),uC(this,"onlineReconnectListener",void 0),uC(this,"useCompress",void 0),uC(this,"tryDoubleDomain",!1),uC(this,"use443PortOnly",!1),uC(this,"wsInflateLength",0),uC(this,"wsDeflateLength",0),uC(this,"closeEstablishingWs",(()=>{})),uC(this,"store",void 0),uC(this,"joinGatewayRecordIndex",void 0),this.store=o,this.name=e,this.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DU(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this.useCompress=n,this.tryDoubleDomain=r,this.use443PortOnly=i,this._initMutex=new Lx("websocket",o?o.clientId:void 0);const{timeout:a,timeoutFactor:s}=t,c=Math.max(300,Math.floor(3*a/5)),l=Math.max(1.2,Math.floor(8*s)/10);ex.ONLINE&&(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l),ax.on(tx.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===ex.ONLINE?(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l):(this.retryConfig.timeout=a,this.retryConfig.timeoutFactor=s))}))}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=await this._initMutex.lock();this._reconnectMode="tryNext",this.forceCloseTimeout=t,this.urls=e,this.state="connecting";try{const e=MI(),t=this.urls[this.currentURLIndex];CN("ENABLE_PREALLOC_PC")&&this.emit(pU.PRE_CONNECT_PC),this.createWebSocketConnection(t).then(e.resolve).catch(e.reject),this.once(ND.CLOSED,(()=>{e.reject(new TR(CR.WS_DISCONNECT))})),this.once(ND.CONNECTED,e.resolve),await e.promise}catch(e){}finally{n()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?setTimeout((()=>e.close()),500):e.close(),this.websocket=void 0,this._websocketUrl=null}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void rO.warning("[".concat(this.name,"] can not reconnect, no websocket"));void 0!==e&&(this.reconnectMode=e),rO.debug("[".concat(this.name,"] reconnect is triggered initiative")),"number"==typeof this.joinGatewayRecordIndex&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);const n=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),n&&n.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new TR(CR.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new TR(CR.WS_ERR,"send websocket message error"+e.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;const n=MI();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const r=e=>{var t;null===(t=this.store)||void 0===t||t.signalChannelOpen(),rO.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),n.resolve()},i=async e=>{var t;if(rO.debug("[".concat(this.name,"] websocket close ").concat(null===(t=this.websocket)||void 0===t?void 0:t.url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)n.reject(new TR(CR.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close();else{"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const t=ix(this,ND.WILL_RECONNECT,this.reconnectMode,e.reason)||this.reconnectMode,r=await this.reconnectWithAction(t);if("closed"===this.state)return void rO.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!r)return n.reject(new TR(CR.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),this.close(!0);n.resolve()}},o=e=>{this.emit(ND.ON_MESSAGE,e)},a=e=>{rO.warn("[".concat(this.connectionID,"] ws open error ").concat(e))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),CN("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=CN("GATEWAY_WSS_ADDRESS")),rO.debug("[".concat(this.name,"] start connect, url:"),e);const s=null===(t=this.store)||void 0===t?void 0:t.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var c;this._websocketUrl=xU(e);const t=await this.chooseBestWebsocketConnection(e);this.websocket=t,r&&r(this.websocket.url),this.websocket.onclose=i,this.websocket.onmessage=o,this.websocket.onerror=a,null===(c=this.store)||void 0===c||c.recordJoinChannelService({endTs:Date.now(),status:"success"},s),this.joinGatewayRecordIndex=s}catch(e){const t="closed"===this.state,r=e instanceof TR,o=r&&e.code===CR.WS_ABORT,a=r&&e.code===CR.WS_ERR,c=r?e.message:e&&(e.reason||e.toString());rO.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(c)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:o?"aborted":"error",errors:[e]},s),t||a?(n.reject(t?new TR(CR.WS_DISCONNECT,"websocket is closed: ".concat(c)):new TR(CR.WS_ERR,"init websocket failed: ".concat(c))),a&&rO.error("[".concat(this.name,"] init websocket failed: ").concat(c))):i&&i(e)}return n.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(0===this.urls.length)return!1;if("closed"===this.state)return!1;rO.warning("[choose-best-ws] action: =>",e),this.onlineReconnectListener||ax.isOnline||!ax.onlineWaiter||(this.onlineReconnectListener=ax.onlineWaiter.then((()=>{this.onlineReconnectListener=void 0})));let n=!0;if(this.reconnectInterrupter=()=>n=!1,t){const t=Mx(this.reconnectCount,this.retryConfig);rO.debug("[".concat(this.name,"] wait ").concat(t,"ms to reconnect websocket, mode: ").concat(e)),await nh.race([Ex(t),this.onlineReconnectListener||new nh((()=>{}))])}if("closed"===this._state||!n)return!1;this.reconnectCount+=1;const r=async(e,t)=>{this.emit(ND.RECONNECT_CREATE_CONNECTION,t),await this.createWebSocketConnection(e)};try{if("retry"===e)await r(this.urls[this.currentURLIndex],e);else if("tryNext"===e){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);rO.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),await r(this.urls[this.currentURLIndex],e)}else"recover"===e&&(rO.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.urls=await nx(this,ND.REQUEST_NEW_URLS),this.currentURLIndex=0,await r(this.urls[this.currentURLIndex],e))}catch(n){var i;rO.error("[".concat(this.name,"] reconnect failed ").concat(n&&n.toString()));const r=null==n||null===(i=n.data)||void 0===i?void 0:i.desc;return Array.isArray(r)&&Br(r).call(r,"dynamic key expired")?(this.emit(ND.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}}class MU extends UU{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){const n=MI(),r=function(e,t){return new LU(e,t)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{rO.debug("[choose-best-ws] close establishing websockets"),r.closeAllWebsockets(),n.reject(new TR(CR.WS_ABORT,"choose best websocket aborted"))};const i=CN("GATEWAY_DOMAINS");return rO.debug("[choose-best-ws] currentDomain: ",e,", domains: ",i,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),r.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(n.resolve).catch(n.reject),n.promise.finally((()=>{this.closeEstablishingWs=void 0}))}}class FU extends UU{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new nh(((n,r)=>{let i=!1;const o=[];this.closeEstablishingWs=()=>{rO.debug("[choose-best-ws] close establishing websockets"),o.forEach((e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),r(new TR(CR.WS_ABORT,"choose best websocket aborted"))};const a=CN("GATEWAY_DOMAINS");let s;const c=e.indexOf("?h="),l=a.find((t=>-1!==c?Br(e).call(e,t,c):Br(e).call(e,t)));rO.debug("[choose-best-ws] currentDomain: ",l,", domains: ",a);let d=!this.tryDoubleDomain||!l;if(!d&&l){var u;const A=Date.now();try{a.forEach((t=>{const n=-1===c?e.replace(l,t):e.substr(0,c)+e.substr(c).replace(l,t),r=new WebSocket(n);r.binaryType="arraybuffer",o.push(r),rO.debug("[choose-best-ws] ws is connecting:",r.url)}))}catch(e){for(rO.debug("[choose-best-ws] ws create failed, fallback to single url"),o.forEach((e=>e.close()));o.length;)o.pop();d=!0}null===(u=this.store)||void 0===u||u.recordJoinChannelService({urls:o.map((e=>e.url)),service:"gateway"},t),o.forEach((e=>{e.onopen=()=>{if(i)return;const t=Date.now()-A;rO.debug("[choose-best-ws] ws open cost ".concat(t,"ms")),o.filter((t=>t!==e)).forEach((e=>{rO.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()})),i=!0,n(e)},e.onclose=e=>{s=e,i||o.find((e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)))||(rO.debug("[choose-best-ws] all websocket is closed"),i=!0,r(s))},e.onmessage=t=>{rO.debug("[choose-best-ws]".concat(e.url," onmessage: ").concat(t.data))}})),Ex(this.forceCloseTimeout).then((()=>{o.forEach((e=>{e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(d){var A;let i;rO.debug("[choose-best-ws] use single url: ",e),null===(A=this.store)||void 0===A||A.recordJoinChannelService({urls:[e],service:"gateway"},t);try{i=new WebSocket(e),o.push(i),i.binaryType="arraybuffer"}catch(e){const n=new TR(CR.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return rO.error("[".concat(this.name,"]").concat(n)),void r(n)}i.onopen=()=>{n(i)},i.onclose=e=>{r(e)},i.onmessage=e=>{rO.debug("[choose-best-ws]".concat(i.url," onmessage: ").concat(e.data))},Ex(this.forceCloseTimeout).then((()=>{i&&i.readyState!==WebSocket.OPEN&&i.close()}))}})).then((e=>(this.closeEstablishingWs=void 0,e))).catch((e=>{throw this.closeEstablishingWs=void 0,e}))}}class jU extends QR{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===SD.CONNECTED?this.emit(CD.WS_CONNECTED):e===SD.RECONNECTING?this.emit(CD.WS_RECONNECTING,this._websocketReconnectReason):e===SD.CLOSED&&this.emit(CD.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),uC(this,"_disconnectedReason",void 0),uC(this,"_websocketReconnectReason",void 0),uC(this,"_connectionState",SD.CLOSED),uC(this,"reconnectToken",void 0),uC(this,"websocket",void 0),uC(this,"openConnectionTime",void 0),uC(this,"clientId",void 0),uC(this,"lastMsgTime",Date.now()),uC(this,"uploadCache",[]),uC(this,"uploadCacheInterval",void 0),uC(this,"rttRolling",new Qx(5)),uC(this,"pingpongTimer",void 0),uC(this,"wsInflateDataTimer",void 0),uC(this,"pingpongTimeoutCount",0),uC(this,"joinResponse",void 0),uC(this,"multiIpOption",void 0),uC(this,"initError",void 0),uC(this,"spec",void 0),uC(this,"store",void 0),uC(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(CD.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){if(this.emit(t._type,t._message),t._type===RD.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===RD.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(qR.UID_BANNED);break;case 15:this.close(qR.IP_BANNED);break;case 16:this.close(qR.CHANNEL_BANNED)}if(t._type===RD.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case _D.ERR_LICENSE_MISSING:this.close(qR.LICENSE_MISSING);break;case _D.ERR_LICENSE_EXPIRED:this.close(qR.LICENSE_EXPIRED);break;case _D.ERR_LICENSE_MINUTES_EXCEEDED:this.close(qR.LICENSE_MINUTES_EXCEEDED);break;case _D.ERR_LICENSE_PERIOD_INVALID:this.close(qR.LICENSE_PERIOD_INVALID);break;case _D.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(qR.LICENSE_MULTIPLE_SDK_SERVICE);break;case _D.ERR_LICENSE_ILLEGAL:this.close(qR.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new MU("gateway-".concat(this.clientId),this.spec.retryConfig,!0,CN("JOIN_GATEWAY_USE_DUAL_DOMAIN"),CN("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===SD.CONNECTED&&this.reconnect("retry",$R.OFFLINE)}))}async request(e,t,n,r){const i=wx(6,""),o={_id:i,_type:e,_message:t},a=this.websocket.connectionID,s=()=>new nh(((t,n)=>{if(this.connectionState===SD.CONNECTED)return t();const r=()=>{this.off(CD.WS_CLOSED,i),t()},i=()=>{this.off(CD.WS_CONNECTED,r),n(new AO(CR.WS_ABORT))};this.once(CD.WS_CONNECTED,r),this.once(CD.WS_CLOSED,i),e!==TD.PUBLISH&&e!==TD.PUBLISH_DATASTREAM&&e!==TD.SUBSCRIBE&&e!==TD.SUBSCRIBE_DATASTREAM&&e!==TD.UNSUBSCRIBE&&e!==TD.UNSUBSCRIBE_DATASTREAM&&e!==TD.UNPUBLISH&&e!==TD.UNPUBLISH_DATASTREAM&&e!==TD.CONTROL&&e!==TD.RESTART_ICE||this.once(CD.DISCONNECT_P2P,(()=>{n(new AO(CR.DISCONNECT_P2P))})),e!==TD.PUBLISH&&e!==TD.RESTART_ICE||this.once(CD.ABORT_P2P_EXECUTION,(()=>{n(new AO(CR.DISCONNECT_P2P))}))}));if(this.connectionState!==SD.CONNECTING&&this.connectionState!==SD.RECONNECTING||e===TD.JOIN||e===TD.REJOIN||await s(),this.websocket.sendMessage(o,!0),r)return;const c=new nh(((n,r)=>{let o=!1;const s=(r,i)=>{o=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(CD.WS_CLOSED,c),this.off(CD.WS_RECONNECTING,c),this.emit(CD.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),s);const c=()=>{r(new AO(CR.WS_ABORT,"type: ".concat(e))),this.off(CD.WS_CLOSED,c),this.off(CD.WS_RECONNECTING,c),this.off("res-@".concat(i),s)};this.once(CD.WS_CLOSED,c),this.once(CD.WS_RECONNECTING,c),Ex(CN("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==a||o||(rO.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(CD.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===SD.CLOSED||e===TD.LEAVE)throw new AO(CR.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===TD.JOIN||e===TD.REJOIN?null:(await s(),await this.request(e,t))}if(l.isSuccess)return l.message;const d=Number(l.message.error_code||l.message.code),u=TU(d),A=new AO(CR.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(l.message.error_str),{code:d,data:l.message,desc:u.desc});return"success"===u.action?l.message:(rO.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(d,", message: ").concat(u.desc,", action: ").concat(u.action)),d===_D.ERR_TOO_MANY_BROADCASTERS?e===TD.JOIN||e===TD.REJOIN?(this.initError=A,this.close(),A.throw()):A.throw():"failed"===u.action?A.throw():"quit"===u.action?(this.initError=A,this.close(),A.throw()):(d===_D.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,rO.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",$R.MULTI_IP)):this.reconnect(u.action,$R.SERVER_ERROR),e===TD.JOIN||e===TD.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new nh((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void rO.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(ID.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=CN("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==SD.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),CN("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new nh(((t,n)=>{this.once(CD.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(CD.WS_CLOSED,(e=>n(this.initError||new AO(CR.WS_ABORT,e)))),this.connectionState=SD.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval((()=>{this.handleWsInflateData()}),2e4)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||qR.LEAVE,this.connectionState=SD.CLOSED,rO.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(CD.ABORT_P2P_EXECUTION);const e=await nx(this,CD.REQUEST_JOIN_INFO),t=await this.request(TD.JOIN,e);if(!t)return this.emit(CD.REPORT_JOIN_GATEWAY,qD.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(CD.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=SD.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new AO(CR.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=ox(this,CD.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(TD.REJOIN,e);return!!t&&(this.connectionState=SD.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(RD.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(RD.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(RD.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(RD.MUTE_AUDIO,{uid:e.uid}):this.emit(RD.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(RD.MUTE_VIDEO,{uid:e.uid}):this.emit(RD.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(RD.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(RD.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(RD.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(RD.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(RD.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){rO.debug("[".concat(this.clientId,"] receive notification: "),e);const t=TU(e.code);if(28===e.code&&"detail"in e&&(rO.info("[".concat(this.clientId,"] receive recover notification: "),e.detail),this.emit(CD.RECOVER_NOTIFICATION,e.detail)),"success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(qR.UID_BANNED),void this.close()):void this.reconnect(t.action,$R.SERVER_ERROR);rO.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=CN("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(rO.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>CN("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",$R.TIMEOUT):this.request(TD.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),CN("REPORT_STATS")&&this.send(TD.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(ID.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(ND.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(CD.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(ND.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ND.CLOSED,(()=>{this.connectionState=SD.CLOSED})),this.websocket.on(ND.FAILED,(()=>{this._disconnectedReason=qR.NETWORK_ERROR,this.connectionState=SD.CLOSED})),this.websocket.on(ND.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===SD.CONNECTED?this.connectionState=SD.RECONNECTING:this.connectionState=SD.CONNECTING})),this.websocket.on(ND.WILL_RECONNECT,((e,t,n)=>{const r=ox(this,CD.IS_P2P_DISCONNECTED),i=r||"retry"!==e;r&&"retry"===e&&(rO.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e="tryNext",t=qD.P2P_DISCONNECTED),i&&(rO.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(e)),this.emit(CD.REPORT_JOIN_GATEWAY,t||qD.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(CD.DISCONNECT_P2P)),n(e)})),this.websocket.on(ND.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{rO.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",$R.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(CD.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof AO){if(e.code===CR.UNEXPECTED_RESPONSE&&e.data.code===_D.ERR_NO_AUTHORIZED)return this.initError=new AO(CR.TOKEN_EXPIRE,"dynamic key expired"),void this.close(qR.TOKEN_EXPIRE);rO.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",$R.SERVER_ERROR):(this.initError=e,this.close())}}))})),this.websocket.on(ND.REQUEST_NEW_URLS,((e,t)=>{nx(this,CD.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(ND.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(RD.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on(pU.PRE_CONNECT_PC,(()=>{this.emit(CD.PRE_CONNECT_PC)}))}}let QU=function(e){return e.NATIVE_RTC="native_rtc",e.NATIVE_RTM="native_rtm",e.WEB_RTC="web_rtc",e.WEB_RTM="web_rtm",e}({}),VU=function(e){return e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",e}({});function HU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HU(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KU(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(CN("TURN_DOMAIN")):(rO.debug("Cannot recognized as ip address: ".concat(e,", use as host")),e)}function GU(e,t){e.addresses||(e.addresses=[]);const n=function(e,t){if(CN("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return e.map((e=>{let{ip:t,port:n}=e;return{address:"".concat(t,":").concat(n)}}));const n=CN("GATEWAY_DOMAINS");let r=n[1]&&Br(t).call(t,n[1])?1:0;return e.map((e=>{let{domain_prefix:t,port:i,ip:o}=e;if(t)return{address:"".concat(t,".").concat(n[r++%n.length],":").concat(i)};const a=/^[\.\:\d]+$/.test(o),s=a?"".concat(o.replace(/[^\d]/g,"-"),".").concat(n[r++%n.length],":").concat(i):"".concat(o,":").concat(i);return a||rO.debug("Cannot recognized as ip address: ".concat(o,", use as host")),{ip:o,port:i,address:s}}))}(e.addresses,t),r=Array.isArray(e.detail)&&e.detail[18];if(r&&"string"==typeof r){const e=r.split(";");for(let t=0;t<e.length;t++){var i;const r=ky(i=e[t]).call(i);n[t]&&r&&(n[t].ip6=r)}}const o=e.detail&&e.detail.candidate;let a;if(o){const[e,t]=o.split(":");e&&t&&(a={port:Number(t),ip:e,address:"".concat(e,":").concat(t)})}return{gatewayAddrs:n,apGatewayAddress:a,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function WU(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function qU(e){const t=e._encoderConfig;if(!t)return{};const n={resolution:t.width&&t.height?"".concat(WU(t.width),"x").concat(WU(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return"number"==typeof t.frameRate?(n.maxFrameRate=t.frameRate,n.minFrameRate=t.frameRate):t.frameRate&&(n.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,n.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),n}function YU(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function XU(e,t){let n,r,i;switch(t){case VU.CHOOSE_SERVER:r=4096,i="choose server";break;case VU.CLOUD_PROXY:r=1048576,i="proxy";break;case VU.CLOUD_PROXY_5:r=4194304,i="proxy5";break;case VU.CLOUD_PROXY_FALLBACK:r=4194310,i="proxy fallback";break;default:throw new AO(CR.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((t=>{t.buffer&&t.buffer.flag===r&&(n={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((e=>zU(zU({},e),{},{ticket:t.buffer.cert}))),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:zU(zU({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!n)throw new AO(CR.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return n}async function JU(e,t){return await nh.all(e.addresses.map((async e=>({address:CN("USE_TURN_IP")?e.ip:KU(e.ip),tcpport:e.port,udpport:e.port,username:t&&CN("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():vN.username,password:t&&CN("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await jR(t.toString()):vN.password}))))}function ZU(e,t){const n=t.getMediaStreamTrack(!0).getSettings(),r=t.videoHeight||n.height,i=t.videoWidth||n.width;return r&&i?Math.max(Math.min(r,i)/Math.min(WU(e.height),WU(e.width)),1):(rO.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function $U(e){let{candidateType:t,relayProtocol:n,type:r,address:i,port:o,protocol:a}=e;const s={candidateType:t,relayProtocol:n,protocol:a};if("local-candidate"!==r){const e=i.split(".");e.length>=4&&(e[1]="*",e[2]="*"),s.address=e.join("."),s.port=o}return s}function eM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:CN("SVC_MODE");if(CN("ENABLE_SVC"))return function(e){return e in oN}(e)?e:oN.L1T3}const tM={[iU.VIDEO]:[{key:"abs-send-time",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"},{key:"video-orientation",extensionName:"urn:3gpp:video-orientation"},{key:"draft-holmer-rmcat-transport-wide-cc-extensions-01",extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"},{key:"playout-delay",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/playout-delay"},{key:"video-content-type",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/video-content-type"},{key:"color-space",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/color-space"},{key:"video-timing",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/video-timing"}],[iU.AUDIO]:[{key:"ssrc-audio-level",extensionName:"urn:ietf:params:rtp-hdrext:ssrc-audio-level"},{key:"draft-holmer-rmcat-transport-wide-cc-extensions-01",extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"},{key:"abs-send-time",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}]};function nM(e,t,n){t.forEach((t=>{var r;const i=tM[e].find((e=>{var n;let{key:r}=e;return Br(n=t.extensionName).call(n,r)}));if(!i)return;const o=n.find((e=>{let{extensionName:t}=e;return Br(t).call(t,i.key)}));o&&Br(r=o.extensionName).call(r,"gdpr_forbidden")&&(t.extensionName=o.extensionName)}))}function rM(e,t){t.forEach((t=>{var n;const r=tM[e].find((e=>{var n;let{key:r}=e;return Br(n=t.extensionName).call(n,r)}));Br(n=t.extensionName).call(n,"gdpr_forbidden")&&r&&(t.extensionName=r.extensionName)}))}function iM(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e||Br(e).call(e,"abs-send-time")}function oM(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e||Br(e).call(e,"draft-holmer-rmcat-transport-wide-cc-extensions-01")}function aM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aM(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;const{filterRTX:i,filterVideoFec:o,filterAudioFec:a,filterAudioCodec:s,filterVideoCodec:c}=t,{useXR:l}=n;let d=[],u=[],A=[],h=[],p=!1,f=!1;if(DN(e).mediaDescriptions.forEach((e=>{r&&r!==e.attributes.direction||("video"!==e.media.mediaType||p||(u=e.attributes.payloads,h=e.attributes.extmaps,p=!0),"audio"!==e.media.mediaType||f||(d=e.attributes.payloads,A=e.attributes.extmaps,f=!0))})),!h||0===u.length)throw new Error("Cannot get video capabilities from SDP.");if(!A||0===d.length)throw new Error("Cannot get audio capabilities from SDP.");if(u.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),l&&e.rtcpFeedbacks.push({type:"rrtr"})})),d.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),l&&e.rtcpFeedbacks.push({type:"rrtr"})})),i&&(d=d.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),u=u.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),o&&(u=u.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),a&&(d=d.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),s&&(null==s?void 0:s.length)>0&&(d=d.filter((e=>{var t;return Br(s).call(s,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),c&&(null==c?void 0:c.length)>0){const e=u.filter((e=>{var t;return Br(c).call(c,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}));u=e.concat(i?[]:TM(e,u))}const m=CN("UNSUPPORTED_VIDEO_CODEC");return m&&m.length>0&&(u=u.filter((e=>!(e.rtpMap&&Br(m).call(m,e.rtpMap.encodingName.toLowerCase()))))),{audioCodecs:d,videoCodecs:u,audioExtensions:A,videoExtensions:h}}function lM(e){const t=DN(e);let n,r;for(const i of t.mediaDescriptions){if(!n){const e=i.attributes.iceUfrag,t=i.attributes.icePwd;if(!e||!t)throw new Error("Cannot get iceUfrag or icePwd from SDP.");n={iceUfrag:e,icePwd:t}}if(!r){const e=i.attributes.fingerprints;e.length>0&&(r={fingerprints:e})}}if(!r&&t.attributes.fingerprints.length>0&&(r={fingerprints:t.attributes.fingerprints}),!r||!n)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:n,dtlsParameters:r}}function dM(e,t){const n=[],r=e.attributes.ssrcGroups.filter((e=>"FID"===e.semantic)),i=e.attributes.ssrcGroups.find((e=>"SIM"===e.semantic)),o=e.attributes.ssrcs;if(i)i.ssrcIds.forEach((e=>{var i;const o=null===(i=r.find((t=>t.ssrcIds[0]===e)))||void 0===i?void 0:i.ssrcIds[1];n.push({ssrcId:e,rtx:t?o:void 0})}));else if(r.length>0){const e=r[0].ssrcIds[0],i=r[0].ssrcIds[1];n.push({ssrcId:e,rtx:t?i:void 0})}else{if(0===o.length)throw new Error("No ssrcs found on local media description.");n.push({ssrcId:o[0].ssrcId})}return n}function uM(e,t,n){const{cname:r}=e;let i=[];t&&(i=AM(t)),0===i.length&&(i=e.iceParameters.candidates.map((e=>({foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}}))),rO.debug("Using candidates from gateway."));const o={fingerprints:e.dtlsParameters.fingerprints.map((e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint})))},a={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let s;switch(e.dtlsParameters.role){case"server":s="passive";break;case"client":s="active";break;case"auto":s="actpass"}const c=_M(e.rtpCapabilities),l=[];return Array.isArray(n)&&n.length>0&&n.forEach((e=>{l.push({kind:iU.VIDEO,ssrcId:e.v,rtx:e.v_rtx,mslabel:"".concat(e.v,"_").concat(e.a)},{kind:iU.AUDIO,ssrcId:e.a,mslabel:"".concat(e.v,"_").concat(e.a)})})),{dtlsParameters:o,iceParameters:a,candidates:i,rtpCapabilities:c,setup:s,cname:r,preSSRCs:l}}function AM(e){let t=[];return e.ip&&"number"==typeof e.port&&(t=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],rO.debug("Using remote candidate from AP ".concat(e.ip,":").concat(e.port)),e.ip6&&(t.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip6,port:e.port.toString(),type:"host",extension:{}}),rO.debug("Using IPV6 remote candidate from AP ".concat(e.ip6,":").concat(e.port)))),t}function hM(e,t,n){const r=[],i=[];return e.forEach((e=>{let{ssrcId:o,rtx:a}=e;const s=wx(8,"track-"),c={ssrcId:o,attributes:sM({label:s,mslabel:n=n||wx(10,""),msid:"".concat(n," ").concat(s)},t&&{cname:t})};if(r.push(c),void 0!==a){const e={ssrcId:a,attributes:sM({label:s,mslabel:n,msid:"".concat(n," ").concat(s)},t&&{cname:t})};r.push(e),i.push({semantic:"FID",ssrcIds:[o,a]})}})),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map((e=>{let{ssrcId:t}=e;return t}))}),{ssrcs:r,ssrcGroups:i}}function pM(e,t){t instanceof LP&&e.attributes.payloads.forEach((e=>{var n;const r=null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase();if(!r||-1===["opus","pcmu","pcma","g722"].indexOf(r))return;e.fmtp||(e.fmtp={parameters:{}}),"opus"===r&&"number"==typeof CN("OPUS_PTIME")?e.fmtp.parameters.ptime=CN("OPUS_PTIME"):e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";const i=t._encoderConfig;i&&("pcmu"!==r&&"pcma"!==r&&"g722"!==r&&(i.bitrate&&!tR()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*i.bitrate))),i.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(i.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(i.sampleRate)),i.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1")),t instanceof DP&&"opus"===r&&t._config.DTX&&(e.fmtp.parameters.usedtx="1"))}))}function fM(e){const t=e.attributes.unrecognized.findIndex((e=>"x-google-flag"===e.attField&&"conference"===e.attValue));-1!==t&&e.attributes.unrecognized.splice(t,1)}function mM(e,t){var n;if(!(t instanceof IB&&t._encoderConfig&&-1===t._hints.indexOf(PO.SCREEN_TRACK)))return;const r=t._encoderConfig;pO().supportMinBitrate&&r.bitrateMin&&e.attributes.payloads.forEach((e=>{var t,n;Br(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(r.bitrateMin))})),pO().supportMinBitrate&&!Br(n=t._hints).call(n,PO.LOW_STREAM)&&r.bitrateMax&&e.attributes.payloads.forEach((e=>{var t,n;Br(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(CN("X_GOOGLE_START_BITRATE")||Math.floor(r.bitrateMax)))}))}function gM(e){if("video"!==e.media.mediaType)return;const t=WI();if(t.name!==HI.SAFARI&&t.os!==VI.IOS)return;const n=e.attributes.extmaps.findIndex((e=>/video-orientation/g.test(e.extensionName)));-1!==n&&e.attributes.extmaps.splice(n,1)}function vM(e,t,n){if(!t)return;let r,i;if("video"===e.media.mediaType?(r=n.videoExtensions,i=n.videoCodecs):(r=n.audioExtensions,i=n.audioCodecs),!0===t.twcc){const t=r.find((e=>oM(e.extensionName)));if(t){const n=t.extensionName;e.attributes.extmaps.find((e=>oM(e.extensionName)))||e.attributes.extmaps.push({entry:t.entry,extensionName:n});const r=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))))))}(i,e.attributes.payloads);r.forEach((e=>{e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))||e.rtcpFeedbacks.push({type:"transport-cc"})}))}}else if(!1===t.twcc){const t=e.attributes.extmaps.findIndex((e=>oM(e.extensionName)));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}if(!0===t.remb){const t=r.find((e=>iM(e.extensionName)));if(t){const n=t.extensionName;e.attributes.extmaps.find((e=>e.extensionName===n))||e.attributes.extmaps.push({entry:t.entry,extensionName:n});const r=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))))))}(i,e.attributes.payloads);r.forEach((e=>{e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))||e.rtcpFeedbacks.push({type:"goog-remb"})}))}}else if(!1===t.remb){const t=e.attributes.extmaps.findIndex((e=>iM(e.extensionName)));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"goog-remb"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}function yM(e,t,n){if(tR())return;if("video"!==e.media.mediaType)return;if(!(t instanceof IB))return;if("vp9"!==n&&"vp8"!==n)return;if("vp8"===n&&!CN("SIMULCAST"))return;if("vp9"===n&&CN("ENABLE_SVC"))return;if(void 0===t._scalabilityMode||t._scalabilityMode.numSpatialLayers<=1)return;const r="vp8"===n?2:t._scalabilityMode.numSpatialLayers,i=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find((e=>"FID"===e.semantic&&e.ssrcIds[0]===i.ssrcId)),a={semantic:"SIM",ssrcIds:[i.ssrcId]};for(let s=1;s<r;s++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+s,attributes:dx(i.attributes)}),a.ssrcIds.push(i.ssrcId+s),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+s,attributes:dx(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+s,o.ssrcIds[1]+s]}));e.attributes.ssrcGroups.unshift(a)}async function bM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new RTCPeerConnection;n.addTransceiver("video",{direction:"sendonly"}),n.addTransceiver("audio",{direction:"sendonly"}),n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"});const r=(await n.createOffer()).sdp,{send:i,recv:o,sendrecv:a}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=cM(n,e,t,"sendonly"),i=cM(n,e,t,"recvonly"),o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},s={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(wM(r,i,"videoExtensions",o,a,s),wM(r,i,"videoCodecs",o,a,s),wM(r,i,"audioExtensions",o,a,s),wM(r,i,"audioCodecs",o,a,s),CN("RAISE_H264_BASELINE_PRIORITY")){const e=[],t=[];s.videoCodecs.forEach(((n,r)=>{var i;if("h264"===(null===(i=n.rtpMap)||void 0===i?void 0:i.encodingName.toLocaleLowerCase())){var o,a;const i=s.videoCodecs[r+1],c=i&&OM(n,i),l=null===(o=n.fmtp)||void 0===o?void 0:o.parameters["profile-level-id"],d=null===(a=n.fmtp)||void 0===a?void 0:a.parameters["packetization-mode"];!l||l!==CN("FIRST_H264_PROFILE_LEVEL_ID")||CN("FIRST_PACKETIZATION_MODE")&&d!==CN("FIRST_PACKETIZATION_MODE")?c?t.push([n,i]):t.push([n]):c?e.push([n,i]):e.push([n])}})),e.length>0&&t.length>0&&(rO.debug("raising H264 baseline profile priority"),s.videoCodecs.forEach(((n,r)=>{var i;if("h264"===(null===(i=n.rtpMap)||void 0===i?void 0:i.encodingName.toLocaleLowerCase())){const i=OM(n,s.videoCodecs[r+1]),o=e.shift()||t.shift()||[];o.length>0&&(i?s.videoCodecs.splice(r,2,...o):s.videoCodecs.splice(r,1,...o))}})),a.videoCodecs=a.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])!==CN("FIRST_H264_PROFILE_LEVEL_ID"))})),CN("FILTER_SEND_H264_BASELINE")&&(o.videoCodecs=o.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])!==CN("FIRST_H264_PROFILE_LEVEL_ID"))}))))}return{send:o,recv:a,sendrecv:s}}(e,t,r);try{n.close()}catch(e){}return{send:i,recv:o,sendrecv:a}}function EM(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=cM(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"recvonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(wM(e,t,"videoExtensions",n,r,i),wM(e,t,"videoCodecs",n,r,i),wM(e,t,"audioExtensions",n,r,i),wM(e,t,"audioCodecs",n,r,i),CN("RAISE_H264_BASELINE_PRIORITY")){const e=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){rO.debug("raising H264 baseline profile priority");const n=i.videoCodecs[e];i.videoCodecs.splice(e,1),i.videoCodecs.splice(t,0,n)}-1!==t&&(r.videoCodecs=r.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:i}}function wM(e,t,n,r,i,o){if("videoExtensions"===n||"audioExtensions"===n){const a=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.entry===t.entry&&e.extensionName===t.extensionName)return a.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===a.indexOf(t)&&i[n].push(e)}))}if("videoCodecs"===n||"audioCodecs"===n){const a=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return a.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===a.indexOf(t)&&i[n].push(e)}))}}function _M(e){const{send:t,recv:n,sendrecv:r}=e;if(!r){if(!t||!n)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:n}}let i,o;return t?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...t.audioCodecs,...r.audioCodecs],i.videoCodecs=[...t.videoCodecs,...r.videoCodecs],i.audioExtensions=[...t.audioExtensions,...r.audioExtensions],i.videoExtensions=[...t.videoExtensions,...r.videoExtensions]):i=r,n?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...n.audioCodecs,...r.audioCodecs],o.videoCodecs=[...n.videoCodecs,...r.videoCodecs],o.audioExtensions=[...n.audioExtensions,...r.audioExtensions],o.videoExtensions=[...n.videoExtensions,...r.videoExtensions]):o=r,{send:i,recv:o}}function SM(e){"audio"===e.media.mediaType&&e.attributes.payloads.filter((e=>{var t;return"opus"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((e=>{e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"}))}function CM(e,t,n,r){let i=[];if(e===iU.VIDEO){if(CN("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(i=t.videoCodecs.filter((e=>{var t;return Br(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)&&e&&e.fmtp&&e.fmtp.parameters["profile-level-id"]===CN("H264_PROFILE_LEVEL_ID")}))),!Array.isArray(i)||0===i.length){let e=[];const o=[],a=[],s=[];if(n.videoCodecs.forEach((t=>{const n=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"";Br(n).call(n,r)?e.push(t):Br(n).call(n,"vp9")?o.push(t):Br(n).call(n,"vp8")?a.push(t):Br(n).call(n,"h264")&&s.push(t)})),0===e.length){let t="";0!==o.length?(e=o,t="vp9"):0!==a.length?(e=a,t="vp8"):0!==s.length&&(e=s,t="h264"),rO.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t))}0!==e.length&&(i=t.videoCodecs.filter((t=>e.some((e=>e.payloadType===t.payloadType)))))}if(0===i.length&&(rO.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),i=t.videoCodecs),CN("USE_PUB_RTX")||CN("USE_SUB_RTX")){const e=TM(i,t.videoCodecs);i=[...i,...e]}}else{i=t.audioCodecs.filter((e=>{var t;return Br(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)}));const e=t.audioCodecs.filter((e=>{var t;return Br(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,"red")}));0===i.length&&(rO.warning("codec ".concat(r," not included in rtpCapabilities, fallback to opus")),i=t.audioCodecs.filter((e=>{var t;return Br(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,"opus")}))),CN("ENABLE_AUDIO_RED")&&0!==e.length&&(i=[...e,...i])}return i}function TM(e,t){const n=e.map((e=>e.payloadType.toString()));return t.filter((e=>e.rtpMap&&"rtx"===e.rtpMap.encodingName&&e.fmtp&&e.fmtp.parameters.apt&&Br(n).call(n,e.fmtp&&e.fmtp.parameters.apt)))}async function IM(e,t,n){const r=t.toString(),i=xM(r,"offer","remote","exchangeSDP");await e.setRemoteDescription({type:"offer",sdp:r});const o=await e.createAnswer();if(!o.sdp)throw new Error("cannot get answer sdp");let a=o.sdp;a=RM(a,n||{}),null==i||i(a||""),await e.setLocalDescription({type:"answer",sdp:a})}function RM(e,t,n){const r=DN(e),{useXR:i}=t;return r.mediaDescriptions.forEach((e=>{var t;e.attributes.mid&&(Array.isArray(n)&&!Br(n).call(n,e.attributes.mid)||("audio"===e.media.mediaType&&SM(e),i&&Br(t=["audio","video"]).call(t,e.media.mediaType)&&e.attributes.payloads.forEach((e=>{-1===e.rtcpFeedbacks.findIndex((e=>"rrtr"===e.type))&&e.rtcpFeedbacks.push({type:"rrtr"})}))))})),UN(r)}function xM(e,t,n,r){if(CN("SDP_LOGGING"))return rO.upload("exchanging ".concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{xM(e,"answer","local"===n?"remote":"local",r)}:void 0}function NM(e){const t=CN("COMPATIBLE_SDP_EXTENSION");return!!(Array.isArray(t)&&t.length>0)&&t.some((t=>Br(e).call(e,t)))}function OM(e,t){try{var n;return(null===(n=e.fmtp)||void 0===n?void 0:n.parameters.apt)===t.payloadType.toString()}catch(e){return!1}}function kM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PM(e,t){return typeof CN(e)===t?CN(e):void 0}function BM(){try{const e=CN("EXPERIMENTS")||{};return"string"==typeof e||Array.isArray(e)?{}:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kM(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}catch(e){return rO.debug("handle gateway attributes failed: ",e),{}}}const LM={};function DM(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&rO.debug("install service ".concat(e.name)),LM[e.name]=e}function UM(e){const t=LM[e];if(!t)throw new TR(CR.INVALID_OPERATION,"".concat(e," not found, please use AgoraRTC.use(").concat(e,"Service) to load it first"));return t}function MM(e,t){return UM("DataStream").create(e,t)}function FM(){return UM("InterceptFrame").create()}function jM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jM(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const VM=new Map;class HM extends QR{get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(WD.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(WD.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){rO.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){var n,r,i;super(),uC(this,"store",void 0),uC(this,"joinInfo",void 0),uC(this,"key",void 0),uC(this,"ntpOffset",0),uC(this,"signal",void 0),uC(this,"role",void 0),uC(this,"inChannelInfo",{joinAt:null,duration:0}),uC(this,"spec",void 0),uC(this,"_state","DISCONNECTED"),uC(this,"_statsCollector",void 0),uC(this,"_disconnectedReason",void 0),uC(this,"isSignalRecover",!1),uC(this,"hasChangeBGPAddress",!1),uC(this,"trafficStatsInterval",void 0),uC(this,"networkQualityInterval",void 0),uC(this,"_joinGatewayStartTime",0),uC(this,"_signalTimeout",!1),uC(this,"_clientRoleOptions",void 0),uC(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?(n={spec:QM(QM({},t),{},{retryConfig:t.websocketRetryConfig}),store:e},null===(r=(i=UM("P2PChannel")).createSubmodule)||void 0===r?void 0:r.call(i,n)):new jU(QM(QM({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,n){this.store.joinGatewayStart(),"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const r=Date.now();let i=VM.get(e.cname);if(i||(i=new Map,VM.set(e.cname,i)),this._isProactiveJoin=!0,i.has(e.uid)){const t=new AO(CR.UID_CONFLICT);throw uO.joinGateway(e.sid,{lts:r,succ:!1,ec:t.code,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,isProxy:!!e.proxyServer,signalChannel:"0",preload:e.preload}),t}i.set(e.uid,!0),this.joinInfo=e,this.key=t;let o=0;this.joinGatewayStartTime=r;const a=e.proxyServer;try{rO.debug("[".concat(this.store.clientId,"] use websocket join uid ").concat(o));const t=e.gatewayAddrs.map((t=>{let{address:n}=t;const[r,i]=n.split(":"),o={host:r,port:i};return e.proxyServer&&(o.proxy=e.proxyServer),o}));o=(await this.signal.init(t)).uid,rO.debug("[".concat(this.store.clientId,"] websocket join uid ").concat(o," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(t){var s;throw rO.error("[".concat(this.store.clientId,"] User join failed"),t.toString()),uO.joinGateway(e.sid,{lts:r,succ:!1,ec:(null===(s=t.data)||void 0===s?void 0:s.desc)||t.code,errorMsg:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,isProxy:!!a,signalChannel:"0",preload:e.preload}),i.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),rO.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((()=>{this.updateTrafficStats().catch((e=>{rO.warning("[".concat(this.store.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(WD.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(WD.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(WD.NETWORK_QUALITY,{uplinkNetworkQuality:YU(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:YU(this._statsCollector.trafficStats.B_dnq)}):this.emit(WD.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),o}async leave(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if("DISCONNECTED"!==this.state){t!==qR.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==SD.CONNECTED||await function(e,t){return t===1/0?e:nh.race([e,bx(t)])}(this.signal.request(TD.LEAVE,void 0,!0),3e3)}catch(e){rO.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e)}this.signal.close(t),t!==qR.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new AO(CR.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const r={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:CN("PUB_EXTEND"),twcc:!!CN("PUBLISH_TWCC"),rtx:!!CN("USE_PUB_RTX")};try{return(await this.signal.request(TD.PUBLISH,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===_D.ERR_PUBLISH_REQUEST_INVALID)return rO.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),r.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw r}}async publishDataChannel(e,t,n){var r;if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new AO(CR.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const i={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:null!==(r=t.maxRetransmits)&&void 0!==r?r:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(TD.PUBLISH_DATASTREAM,i,!0)}catch(r){if(n&&r.data&&r.data.code===_D.ERR_PUBLISH_REQUEST_INVALID)return rO.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),r.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw r}}async unpublish(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new AO(CR.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(TD.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(e){rO.warning("[".concat(this.store.clientId,"] unpublish warning: "),e)}}async unpublishDataChannel(e){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new AO(CR.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await nh.all(e.map((e=>this.signal.request(TD.UNPUBLISH_DATASTREAM,{channel_id:e},!0))))}catch(e){rO.warning("unpublish datachannels warning: ",e)}}async presubscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new AO(CR.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!CN("SUBSCRIBE_TWCC"),rtx:!!CN("USE_SUB_RTX")||void 0,extend:CN("SUB_EXTEND"),svc:Array.isArray(CN("SVC"))&&0!==CN("SVC").length?CN("SVC"):void 0};try{return await this.signal.request(TD.PRE_SUBSCRIBE,r,!0)}catch(r){if(n&&r.data&&r.data.code===_D.ERR_SUBSCRIBE_REQUEST_INVALID)return rO.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),r.toString()),this.presubscribe(e,t,!1);throw r}}async subscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new AO(CR.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!CN("SUBSCRIBE_TWCC"),rtx:!!CN("USE_SUB_RTX"),extend:CN("SUB_EXTEND"),ssrcId:t.ssrcId,svc:Array.isArray(CN("SVC"))&&0!==CN("SVC").length?CN("SVC"):void 0};try{return(await this.signal.request(TD.SUBSCRIBE,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===_D.ERR_SUBSCRIBE_REQUEST_INVALID)return rO.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),r.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw r}}async subscribeDataChannel(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new AO(CR.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const r={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(TD.SUBSCRIBE_DATASTREAM,r,!0)}catch(r){if(n&&r.data&&r.data.code===_D.ERR_SUBSCRIBE_REQUEST_INVALID)return rO.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),r.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw r}}async subscribeAll(e,t){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new AO(CR.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const n={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!CN("USE_SUB_RTX"),twcc:!!CN("SUBSCRIBE_TWCC"),svc:Array.isArray(CN("SVC"))&&0!==CN("SVC").length?CN("SVC"):void 0};try{return await this.signal.request(TD.SUBSCRIBE_STREAMS,n,!0)}catch(n){if(t&&n.data&&n.data.code===_D.ERR_SUBSCRIBE_REQUEST_INVALID)return rO.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),n.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw n}}async setVideoProfile(e){const t=function(e){if(!(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width))return;let t=e.frameRate,n=e.width,r=e.height,i=!0;return"number"!=typeof t&&(t=t.exact||t.ideal||t.max||t.min||0,t||(i=!1)),"number"!=typeof n&&(n=n.exact||n.ideal||n.max||n.min||0,n||(i=!1)),"number"!=typeof r&&(r=r.exact||r.ideal||r.max||r.min||0,t||(i=!1)),i?{stream_type:0,width:n,height:r,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}(e);if(t)return this.signal.request(TD.SET_VIDEO_PROFILE,t);rO.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(TD.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(e){rO.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),e)}}async unsubscribeDataChannel(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new AO(CR.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await nh.all(e.map((e=>this.signal.request(TD.UNSUBSCRIBE_DATASTREAM,{stream_id:e,uid:t},!0))))}catch(e){rO.warning("unsubscribeDataChannel warning: ",e)}}async massUnsubscribe(e){try{await this.signal.request(TD.UNSUBSCRIBE_STREAMS,e,!0)}catch(e){rO.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),e)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=e;return{gatewayEstablishParams:await this.signal.request(TD.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(TD.GATEWAY_INFO)}async renewToken(e){await this.signal.request(TD.RENEW_TOKEN,e),this.key=e.token}updateClientRole(e,t){t&&(this._clientRoleOptions=Object.assign({},t)),CN("CLIENT_ROLE_OPTIONS")&&(rO.debug("[".concat(this.store.clientId,"] Set roleOptions for ").concat(JSON.stringify(CN("CLIENT_ROLE_OPTIONS"))," instead of ").concat(JSON.stringify(this._clientRoleOptions)," ")),this._clientRoleOptions=Object.assign({},CN("CLIENT_ROLE_OPTIONS"))),this.role=e}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),CN("CLIENT_ROLE_OPTIONS")&&(this._clientRoleOptions=Object.assign({},CN("CLIENT_ROLE_OPTIONS")),rO.debug("[".concat(this.store.clientId,"] Set roleOptions for ").concat(JSON.stringify(CN("CLIENT_ROLE_OPTIONS"))," instead of ").concat(JSON.stringify(this._clientRoleOptions)," "))),"CONNECTED"!==this.state)return void(this.role=e);let n,r=0;"audience"===e?this._clientRoleOptions&&this._clientRoleOptions.delay?(n=this._clientRoleOptions.delay,r=1):r=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:r=0,await this.signal.request(TD.SET_CLIENT_ROLE,{role:e,level:r,delay:n,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(TD.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(TD.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(TD.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(TD.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(TD.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,n){if(this.store.useP2P)return this.signal.sendExtensionMessage(e,t,n)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),QM({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(TD.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=VM.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){let t;return t=e.startsWith("dc")?e.match(/(dc\:\/\/)?([^:]+):(\d+)/):e.match(/(wss\:\/\/)?([^:]+):(\d+)/),t?{username:vN.username,password:vN.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(QM(QM({},vN),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if("CONNECTED"!==this.state)return;const e=await this.signal.request(TD.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),null!=e.ntp_offset&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach((e=>{const t=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find((t=>t.peer_uid===e.peer_uid));t&&t.B_st!==e.B_st&&lx((()=>{this.emit(WD.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){var t;if(!this.joinInfo||!this.key)throw new AO(CR.UNEXPECTED_ERROR,"can not generate join message, no join info");const n=Object.assign({},this.joinInfo.apResponse);let r=CN("REPORT_APP_SCENARIO");if("string"!=typeof r)try{r=JSON.stringify(r)}catch(e){r=void 0}var i;r&&r.length>128&&(r=void 0),this.store.hasStartJoinChannel=!0,this.store.isABTestSuccess||this.emit(WD.UPDATE_GATEWAY_CONFIG),i=this.store.clientId,Br(PL).call(PL,i)||PL.push(i);const o=!(tR()||iR(87)||mO())&&"boolean"==typeof CN("ENABLE_PRE_SUB")&&CN("ENABLE_PRE_SUB"),a=!mO()&&PM("ENABLE_PREALLOC_PC","boolean"),s=BM(),c=rR(87)||function(){const e=WI();if(e.name!==HI.SAFARI||!e.browserVersion)return!1;const t=e.browserVersion.split(".");return Number(t[0])>15||15===Number(t[0])&&Number(t[1])>=4}(),l=QM({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:fN,browser:navigator.userAgent,process_id:CN("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:n,extend:CN("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:r,attributes:{userAttributes:QM(QM({enableEncodedTransform:!!CN("ENABLE_AUDIO_METADATA")&&c||!!CN("ENABLE_AUDIO_TOPN")&&oR(HI.CHROME,87,116)||void 0,enableAudioMetadata:!!CN("ENABLE_AUDIO_METADATA")&&c,enableAudioPts:!!CN("ENABLE_AUDIO_PTS_METADATA")&&c,topnSmoothLevel:CN("TOPN_SMOOTH_LEVEL"),topnNewSpeakerDelay:CN("TOPN_NEW_SPEAKER_DELAY"),topnSwitchHoldMs:CN("TOPN_SWITCH_HOLD_MS"),topnAudioGain:CN("TOPN_AUDIO_GAIN"),enablePublishedUserList:CN("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:CN("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:PM("SUBSCRIBE_AUDIO_FILTER_TOPN","number"),enablePublishAudioFilter:PM("ENABLE_PUBLISH_AUDIO_FILTER","boolean"),enableUserLicenseCheck:PM("ENABLE_USER_LICENSE_CHECK","boolean"),enableRTX:!0===CN("USE_PUB_RTX")||!0===CN("USE_SUB_RTX")||void 0,disableFEC:CN("DISABLE_FEC"),enableNTPReport:!!CN("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!CN("ENABLE_INSTANT_VIDEO")||void 0,enableFulllinkAvSync:!!CN("ENABLE_FULL_LINK_AV_SYNC")||void 0,enableDataStream2:PM("ENABLE_DATASTREAM_2","boolean"),enableAutFeedback:!!CN("ENABLE_AUT_FEEDBACK")||void 0,rtm2Flag:"number"==typeof this.joinInfo.rtmFlag?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!CN("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:PM("USE_XR","boolean"),enableLossbasedBwe:PM("ENABLE_LOSSBASED_BWE","boolean"),enableAutCC:!!CN("ENABLE_AUT_CC")||void 0,enableCCFallback:PM("ENABLE_CC_FALLBACK","boolean"),enablePreallocPC:a,preSubNum:o?PM("PRE_SUB_NUM","number"):void 0,enablePubTWCC:PM("PUBLISH_TWCC","boolean"),enableSubTWCC:PM("SUBSCRIBE_TWCC","boolean"),enablePubRTX:PM("USE_PUB_RTX","boolean"),enableSubRTX:PM("USE_SUB_RTX","boolean"),enableSubSVC:CN("ENABLE_SVC")?CN("ENABLE_SVC_DEFAULT_CODECS"):Array.isArray(CN("SVC"))&&0!==CN("SVC").length?CN("SVC"):void 0,enableSvcExtended:CN("ENABLE_SVC")&&Array.isArray(CN("SVC_EXTENDED"))&&0!==CN("SVC_EXTENDED").length?CN("SVC_EXTENDED"):void 0},s),{},{audioDuplicate:PM("ENABLE_AUDIO_RED","boolean")?null!==(t=PM("AUDIO_DUPLICATE_NUM","number"))&&void 0!==t?t:2:void 0})},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(l.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(l.aes_mode=this.joinInfo.aesmode,CN("ENCRYPT_AES")?(l.aes_secret=this.joinInfo.aespassword,l.aes_encrypt=!0):l.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(l.aes_salt=this.joinInfo.aessalt)),n.addresses[this.signal.websocket.currentURLIndex]&&(l.ap_response.ticket=n.addresses[this.signal.websocket.currentURLIndex].ticket,delete n.addresses),void 0!==this.joinInfo.defaultVideoStream&&(l.default_video_stream=this.joinInfo.defaultVideoStream),l}getRejoinMessage(){if(!this.joinInfo)throw new AO(CR.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(CD.WS_RECONNECT_CREATE_CONNECTION,(e=>{this.joinGatewayStartTime=Date.now()})),this.signal.on(CD.WS_RECONNECTING,(e=>{this.joinInfo&&uO.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||$R.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",uO.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:"live"===this.spec.mode?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:"audience"===this.role?2:1,buildFormat:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())})),this.signal.on(CD.WS_CLOSED,(e=>{let t;switch(e){case qR.LEAVE:t=$R.LEAVE;break;case qR.UID_BANNED:case qR.IP_BANNED:case qR.CHANNEL_BANNED:case qR.SERVER_ERROR:t=$R.SERVER_ERROR;break;case qR.FALLBACK:t=$R.FALLBACK;break;case qR.LICENSE_MISSING:case qR.LICENSE_EXPIRED:case qR.LICENSE_MINUTES_EXCEEDED:case qR.LICENSE_PERIOD_INVALID:case qR.LICENSE_MULTIPLE_SDK_SERVICE:case qR.LICENSE_ILLEGAL:case qR.TOKEN_EXPIRE:t=e;break;default:t=$R.NETWORK_ERROR}rO.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(t||"undefined -> "+$R.NETWORK_ERROR)),this.joinInfo&&uO.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===qR.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==qR.FALLBACK&&(this.state="DISCONNECTED"),this.reset()})),this.signal.on(CD.WS_CONNECTED,(()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo){if("audience"===this.role){const e=CN("CLIENT_ROLE_OPTIONS")||this._clientRoleOptions;e&&(e.level||e.delay)&&(rO.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(e.level,", delay: ").concat(e.delay)),this.setClientRole(this.role,e))}if(uO.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload,isABTestSuccess:this.store.isABTestSuccess}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&1===this.joinInfo.setLocalAPVersion){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void rO.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));SN("EVENT_REPORT_DOMAIN",e[1]),SN("EVENT_REPORT_BACKUP_DOMAIN",e[1]),SN("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}}})),this.signal.on(RD.ON_UPLINK_STATS,(e=>{this._statsCollector.updateUplinkStats(e)})),this.signal.on(CD.REQUEST_RECOVER,((e,t,n)=>{if(!this.joinInfo)return n(new AO(CR.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,nx(this,WD.REQUEST_NEW_GATEWAY_LIST).then(t).catch(n)})),this.signal.on(CD.REQUEST_JOIN_INFO,(async(e,t,n)=>{var r;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));const i=dx(null===(r=this.joinInfo)||void 0===r?void 0:r.turnServer);if(CN("NEW_TURN_MODE")&&i){let e=i.servers,t=i.serversFromGateway;const n=this.signal.currentURLIndex;e.length>0&&(e=[e[n%e.length]],i.servers=e),Array.isArray(t)&&t.length>0&&(t=[t[0]],i.serversFromGateway=t),rO.debug("[".concat(this.store.clientId,"] use single turn, use turn server index: ").concat(n))}const{iceParameters:o,dtlsParameters:a,rtpCapabilities:s}=await nx(this,WD.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:i});try{e(this.getJoinMessage({ortc:{iceParameters:o,dtlsParameters:a,rtpCapabilities:s,version:"2"}}))}catch(e){t(e)}})),this.signal.on(CD.REQUEST_REJOIN_INFO,(e=>{e(this.getRejoinMessage())})),this.signal.on(CD.REPORT_JOIN_GATEWAY,((e,t)=>{if(!this.joinInfo)return;let n,r="";var i;e instanceof AO?(n=(null===(i=e.data)||void 0===i?void 0:i.desc)||e.code,r=e.message):n=e,uO.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:n,errorMsg:r,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload})})),this.signal.on(CD.IS_P2P_DISCONNECTED,(e=>{e(ox(this,WD.IS_P2P_DISCONNECTED))})),this.signal.on(CD.DISCONNECT_P2P,(()=>{this.emit(WD.DISCONNECT_P2P)})),this.signal.on(CD.REQUEST_SUCCESS,(()=>{this._signalTimeout=!1})),this.signal.on(CD.REQUEST_TIMEOUT,(()=>{this._signalTimeout=!0})),this.signal.on(CD.JOIN_RESPONSE,(e=>{const t=this.getCurrentGatewayAddress();this.emit(WD.JOIN_RESPONSE,e,t)})),this.signal.on(CD.PRE_CONNECT_PC,(async()=>{if(this.joinInfo){this.updateTurnConfigFromSignal();const e=this.getCurrentGatewayAddress(),t=CN("FINGERPRINT")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(e&&t){const n=AM(e);this.emit(WD.PRE_CONNECT_PC,{candidates:n,fingerprint:t})}}})),this.signal.on(CD.RECOVER_NOTIFICATION,(e=>{this.joinInfo&&"string"==typeof CN("AP_REQUEST_DETAIL")&&(this.joinInfo.apRequestDetail="".concat(CN("AP_REQUEST_DETAIL"),";").concat(e))}))}async tryUnsubBeforeResub(e,t){try{await this.signal.request(TD.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(e){throw rO.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),e),e}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(TD.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(e){throw rO.warning("unsubscribe datachannel warning",e),e}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(TD.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(e){throw rO.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),e),e}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(TD.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(e){throw rO.warning("unpublish datastream warning: ",e),e}}async tryMassUnsubBeforeResub(e){const t={users:e.map((e=>({stream_id:e.stream_id,stream_type:e.stream_type})))};try{await this.signal.request(TD.UNSUBSCRIBE_STREAMS,t,!0)}catch(e){throw rO.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),e),e}}async muteLocal(e,t){const n={action:e.find((e=>e.stream_type===GD.Audio))?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(TD.CONTROL,n,!0,!0)}catch(e){throw rO.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),e),e}}async unmuteLocal(e,t){const n={action:e.find((e=>e.stream_type===GD.Audio))?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(TD.CONTROL,n,!0,!0)}catch(e){throw rO.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),e),e}}async muteRemote(e,t){const n={action:e===iU.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(TD.CONTROL,n,!0,!0)}catch(e){throw rO.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),e),e}}async unmuteRemote(e,t){const n={action:e===iU.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(TD.CONTROL,n,!0,!0)}catch(e){throw rO.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),e),e}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(TD.RESTART_ICE,t,!0)}catch(e){throw rO.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),e),e}}reconnect(e,t){"CONNECTED"===this.state&&this.signal.reconnect(e||void 0,t||$R.P2P_FAILED)}getCurrentGatewayAddress(){var e,t;if(!CN("GATEWAY_WSS_ADDRESS"))return CN("USE_CANDIDATE_FROM_AP_DETAIL")&&null!==(e=this.joinInfo)&&void 0!==e&&e.apGatewayAddress?(rO.debug("[".concat(this.store.clientId,"] use candidate from ap detail, ").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):null!==(t=this.joinInfo)&&void 0!==t&&t.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(TD.SET_PARAMETER,{enablePublishAudioFilter:e})}}let zM=0,KM=0;function GM(e,t,n,r){return new nh(((i,o)=>{t.timeout=t.timeout||CN("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),zM+=vx(t.data)):n&&(t.data.size?zM+=t.data.size:t.data instanceof FormData?zM+=yx(t.data):zM+=vx(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,DI.request(t).then((e=>{"string"==typeof e.data?KM+=vx(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?KM+=e.data.byteLength:KM+=vx(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((e=>{DI.isCancel(e)?o(new AO(CR.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new AO(CR.NETWORK_TIMEOUT,e.message)):e.response?o(new AO(CR.NETWORK_RESPONSE_ERROR,e.response.status)):o(new AO(CR.NETWORK_ERROR,e.message))}))}))}!function(){var e;function n(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},o=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function a(e,t){if(t)e:{var n=o;e=e.split(".");for(var r=0;r<e.length-1;r++){var a=e[r];if(!(a in n))break e;n=n[a]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}function s(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:n(e)}}if(a("Symbol",(function(e){function t(e,t){this.A=e,i(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),a("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var a=o[t[r]];"function"==typeof a&&"function"!=typeof a.prototype[e]&&i(a.prototype,e,{configurable:!0,writable:!0,value:function(){return s(n(this))}})}return e})),"function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var l;e:{var d={};try{d.__proto__={a:!0},l=d.a;break e}catch(e){}l=!1}r=l?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var u=r;function A(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function h(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function p(e,t){return e.h=3,{value:t}}function f(e){this.g=new A,this.G=e}function m(e,t,n,r){try{var i=t.call(e.g.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.m=!1,i;var o=i.value}catch(t){return e.g.j=null,e.g.s(t),g(e)}return e.g.j=null,r.call(e.g,o),g(e)}function g(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function v(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){h(e.g);var n=e.g.j;return n?m(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),g(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function y(e,t){return t=new v(new f(t)),u&&e.prototype&&u(t,e.prototype),t}if(A.prototype.o=function(e){this.v=e},A.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},A.prototype.return=function(e){this.l={return:e},this.h=this.u},f.prototype.o=function(e){return h(this.g),this.g.j?m(this,this.g.j.next,e,this.g.o):(this.g.o(e),g(this))},f.prototype.s=function(e){return h(this.g),this.g.j?m(this,this.g.j.throw,e,this.g.o):(this.g.s(e),g(this))},a("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var b=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},E=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},w=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},_=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},S="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,C=S.FormData,T=S.XMLHttpRequest&&S.XMLHttpRequest.prototype.send,I=S.Request&&S.fetch,R=S.navigator&&S.navigator.sendBeacon,x=S.Element&&S.Element.prototype,N=S.Symbol&&Symbol.toStringTag;N&&(Blob.prototype[N]||(Blob.prototype[N]="Blob"),"File"in S&&!File.prototype[N]&&(File.prototype[N]="File"));try{new File([],"")}catch(e){S.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),N&&Object.defineProperty(e,N,{value:"File"}),e}}var O=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},k=function(e){this.i=[];var t=this;e&&b(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];b(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?b(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?E(e.value):e.value,t.append(e.name,n))}))};if((e=k.prototype).append=function(e,t,n){_(arguments,2),this.i.push(w(e,t,n))},e.delete=function(e){_(arguments,1);var t=[];e=String(e),b(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},e.entries=function e(){var t,n=this;return y(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=p(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){_(arguments,1);for(var n=c(this),r=n.next();!r.done;r=n.next()){var i=c(r.value);r=i.next().value,i=i.next().value,e.call(t,i,r,this)}},e.get=function(e){_(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},e.getAll=function(e){_(arguments,1);var t=[];return e=String(e),b(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},e.has=function(e){_(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,n,r,i=this;return y(e,(function(e){if(1==e.h&&(t=c(i),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,p(e,c(r).next().value));n=t.next(),e.h=2}))},e.set=function(e,t,n){_(arguments,2),e=String(e);var r=[],i=w(e,t,n),o=!0;b(this.i,(function(t){t[0]===e?o&&(o=!r.push(i)):r.push(t)})),o&&r.push(i),this.i=r},e.values=function e(){var t,n,r,i,o=this;return y(e,(function(e){if(1==e.h&&(t=c(o),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,(i=c(r)).next(),p(e,i.next().value));n=t.next(),e.h=2}))},k.prototype._asNative=function(){for(var e=new C,t=c(this),n=t.next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.append(n,r)}return e},k.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,r){return"string"==typeof e?t.push(n+O(E(r))+'"\r\n\r\n'+E(e)+"\r\n"):t.push(n+O(E(r))+'"; filename="'+O(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},k.prototype[Symbol.iterator]=function(){return this.entries()},k.prototype.toString=function(){return"[object FormData]"},x&&!x.matches&&(x.matches=x.matchesSelector||x.mozMatchesSelector||x.msMatchesSelector||x.oMatchesSelector||x.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),N&&(k.prototype[N]="FormData"),T){var P=S.XMLHttpRequest.prototype.setRequestHeader;S.XMLHttpRequest.prototype.setRequestHeader=function(e,t){P.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},S.XMLHttpRequest.prototype.send=function(e){e instanceof k?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),T.call(this,e)):T.call(this,e)}}I&&(S.fetch=function(e,t){return t&&t.body&&t.body instanceof k&&(t.body=t.body._blob()),I.call(this,e,t)}),R&&(S.navigator.sendBeacon=function(e,t){return t instanceof k&&(t=t._asNative()),R.call(this,e,t)}),S.FormData=k}}();const WM=()=>{const e=CN("AREAS");return 0===e.length&&e.push(XD.GLOBAL),ii(e).call(e,((e,t,n)=>{const r=qM(t);return r?0===n?r:"".concat(e,",").concat(r):e}),"")},qM=e=>e===XD.OVERSEA?"".concat(ZD.ASIA,",").concat(ZD.EUROPE,",").concat(ZD.AFRICA,",").concat(ZD.NORTH_AMERICA,",").concat(ZD.SOUTH_AMERICA,",").concat(ZD.OCEANIA):ZD[e],YM=e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((e=>{const n=$D[e],r=Object.keys(n);r&&r.map((e=>{"CODE"!==e&&(t[e]=t[e].concat(n[e]))}))})),t},XM={GLOBAL:{ASIA:[XD.CHINA,XD.JAPAN,XD.INDIA,XD.KOREA,XD.HKMC],EUROPE:[],NORTH_AMERICA:[XD.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},JM=Object.keys(XM[XD.GLOBAL]),ZM=[XD.CHINA,XD.NORTH_AMERICA,XD.EUROPE,XD.ASIA,XD.JAPAN,XD.INDIA,XD.OCEANIA,XD.SOUTH_AMERICA,XD.AFRICA,XD.KOREA,XD.HKMC,XD.US],$M=function(e,t){let n=[];if(Br(e).call(e,XD.GLOBAL)){const o=[XD.GLOBAL,XD.OVERSEA],a=Object.keys($D);if(t===XD.GLOBAL)throw new AO(CR.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===XD.CHINA)n=[XD.OVERSEA];else if(i=t,Br(JM).call(JM,i)){const e=(r=t,XM[XD.GLOBAL][r]||[]),i=[...o,t,...e];n=a.filter((e=>!Br(i).call(i,e)))}else if(function(e){let t=!1;return JM.forEach((n=>{var r;Br(r=XM[XD.GLOBAL][n]).call(r,e)&&(t=!0)})),t}(t)){const e=function(e){let t;return JM.forEach((n=>{var r;Br(r=XM[XD.GLOBAL][n]).call(r,e)&&(t=n)})),t}(t),r=[...o,e,t];n=a.filter((e=>!Br(r).call(r,e)))}else n=e;n=function(e){const t=[];return ZM.forEach((n=>{Br(e).call(e,n)&&t.push(n)})),t.concat(e.filter((e=>!Br(ZM).call(ZM,e))))}(n)}else n=e;var r,i;return n};function eF(e){var t,n;if(!e&&Br(t=CN("AREAS")).call(t,XD.EXTENSIONS))return rO.debug("update area from ap : reset"),void tF(NL,!0);if(!Br(n=CN("AREAS")).call(n,XD.GLOBAL)||!e)return;let r=$D.EXTENSIONS;r&&(r={CODE:qM(XD.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},rO.debug("update area from ap success: ".concat(e,",config is "),r),SN("AREAS",[XD.EXTENSIONS],!0),Object.keys(r).map((e=>{SN(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?r[e][0]:r[e])})))}function tF(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=uO.reportApiInvoke(null,{name:zR.SET_AREA,options:e,tag:KR.TRACER});try{let r=[];if("string"==typeof e&&(r=[e]),Array.isArray(e)&&(e.forEach((e=>{if(!Br(JD).call(JD,e))throw new AO(CR.INVALID_PARAMS,"invalid area code")})),r=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:t,excludedArea:n}=e;if(!t)throw new AO(CR.INVALID_PARAMS,"area code is needed");let i=t;"string"==typeof t&&(i=[t]),r=n?$M(i,n):i}if(!t){if(IN.AREAS){const e=new AO(CR.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return n.onError(e),void rO.warning("setArea is prohibited because of config-distribute")}if(Br(r).call(r,XD.GLOBAL)&&CN("AREAS")===XD.EXTENSIONS){const e=new AO(CR.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return n.onError(e),void rO.warning("setArea is prohibited because of ap extensions")}}SN("AREAS",r,t);const i=YM(r);Object.keys(i).map((e=>{SN(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?i[e][0]:i[e])})),rO.debug("set area success:",r.join(","))}catch(e){throw n.onError(e),e}n.onSuccess()}function nF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nF(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let iF=1;function oF(e,t,n,r,i){iF+=1;const o={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:iF,requestId:iF,version:fN,cname:n.cname},a={service_name:t,json_body:JSON.stringify(o)};let s,c,l=e[0];return Fx((async()=>{s=Date.now();const e=await GM(l,{data:a,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Date.now()-s,0!==e.code){const t=new AO(CR.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw rO.error(t.toString()),t}const n=JSON.parse(e.json_body);if(200!==n.code){const e=new AO(CR.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(n.code,", reason: ").concat(n.reason),{code:n.code,responseTime:c});throw rO.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new AO(CR.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:n.code,responseTime:c});throw rO.error(e.toString()),e}const i=function(e,t){return{addressList:e.servers.map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(CN("WORKER_DOMAIN"),":").concat(e.wss,"?serviceName=").concat(encodeURIComponent(t)))),workerToken:e.workerToken,vid:e.vid}}(n,t);return CN("LIVE_STREAMING_ADDRESS")&&(i.addressList=CN("LIVE_STREAMING_ADDRESS")instanceof Array?CN("LIVE_STREAMING_ADDRESS"):[CN("LIVE_STREAMING_ADDRESS")]),rF(rF({},i),{},{responseTime:c})}),((r,i)=>(uO.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(r.addressList),firstSuccess:0===i,responseTime:c,serverIp:e[i%e.length]}),!1)),((r,i)=>(uO.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:c,serverIp:e[i%e.length]}),!!(r.code!==CR.OPERATION_ABORTED&&r.code!==CR.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(l=e[(i+1)%e.length],!0))),i)}let aF=1;function sF(e,t,n,r){let{url:i,areaCode:o}=e;const{clientId:a,sid:s}=t,c=Date.now();let l;const d=t.role,[u,A]=AF(t,o,[VU.CHOOSE_SERVER]);let h=ax.networkState;return Fx((async()=>{h&&ax.networkState===ex.OFFLINE&&ax.onlineWaiter&&await nh.race([ax.onlineWaiter,Ex(r&&r.maxRetryTimeout||Ux.maxRetryTimeout)]),h=ax.networkState;const{data:e,headers:o}=await GM(i,{data:u,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l="1"===o.http3?1:-1,uO.reportResourceTiming(i,s),lF(e,i,t,c,[VU.CHOOSE_SERVER],l);const a=XU(e,VU.CHOOSE_SERVER);return dF(a),GU(a,i)}),(e=>(e&&uO.joinChooseServer(s,{role:d,lts:c,succ:!0,csAddr:i,opid:A,serverList:e.gatewayAddrs.map((e=>e.address)),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[VU.CHOOSE_SERVER].toString(),isHttp3:l,corssRegionTagReq:t.apRequestDetail,corssRegionTagRes:e.res.detail&&e.res.detail[38]}),!1)),(e=>e.code!==CR.OPERATION_ABORTED&&(e.code===CR.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(uO.joinChooseServer(s,{role:d,lts:c,succ:!1,csAddr:i,serverList:null,opid:A,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[VU.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:h}),isHttp3:l,corssRegionTagReq:t.apRequestDetail}),rO.warning("[".concat(a||"sid-".concat(s.slice(0,6)),"] Choose server network error, retry"),e),!0))),r)}function cF(e,t,n,r){let i,{url:o,areaCode:a,serviceIds:s}=e;const c=Date.now(),l=t.role,[d,u]=AF(t,a,s);let A;return Fx((async()=>{A&&ax.networkState===ex.OFFLINE&&ax.onlineWaiter&&await nh.race([ax.onlineWaiter,Ex(r&&r.maxRetryTimeout||Ux.maxRetryTimeout)]),A=ax.networkState;const{data:e,headers:a}=await GM(o,{data:d,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);i="1"===a.http3?1:-1,uO.reportResourceTiming(o,t.sid),lF(e,o,t,c,s,i);const l=XU(e,VU.CHOOSE_SERVER),u=XU(e,"proxy5"===t.cloudProxyServer?VU.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?VU.CLOUD_PROXY:VU.CLOUD_PROXY_FALLBACK);return dF(l),{gatewayInfo:GU(l,o),proxyInfo:u,url:o}}),(e=>(e.gatewayInfo&&uO.joinChooseServer(t.sid,{role:l,lts:c,succ:!0,csAddr:o,serverList:e.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,opid:u,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:s.toString(),isHttp3:i,corssRegionTagReq:t.apRequestDetail,corssRegionTagRes:e.gatewayInfo.res.detail&&e.gatewayInfo.res.detail[38]}),e.proxyInfo&&uO.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:o,turnServerAddrList:e.proxyInfo.addresses.map((e=>e.ip)).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:s.toString()}),!1)),(e=>e.code!==CR.OPERATION_ABORTED&&(e.code===CR.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(uO.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:s.toString(),extend:JSON.stringify({networkState:A})}),rO.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),e),!0))),r)}const lF=(e,t,n,r,i,o)=>{const{sid:a,clientId:s,cloudProxyServer:c}=n,l=[],d=s=>{4096===s.flag?uO.joinChooseServer(a,{role:n.role,lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:s.error.message,csIp:s.error.data&&s.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:o,corssRegionTagReq:n.apRequestDetail}):1048576!==s.flag&&4194304!==s.flag&&4194310!==s.flag||uO.joinWebProxyAP(a,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:s.error.code,eventType:c,unilbsServerIds:i.toString()})};if(e.response_body.forEach((t=>{const n=t.buffer.code;if(23===t.uri&&0===n&&!t.buffer.edges_services)if(4194310===t.buffer.flag)rO.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),t.buffer.edges_services=[];else{const n={error:new AO(CR.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};l.push(n),d(n)}if(0!==n){const r=SU(n),i={error:new AO(CR.CAN_NOT_GET_GATEWAY_SERVER,r.desc,{desc:r.desc,retry:r.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?rO.warning(i.error.toString()):l.push(i),d(i)}})),l.length)throw rO.warning("[".concat(s||"sid-".concat(a.slice(0,6)),"] multi unilbs ").concat(t," failed, ").concat(l.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message,", retry: ").concat(e.error.data.retry))).join(" | "))),new AO(CR.CAN_NOT_GET_GATEWAY_SERVER,l.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message))).join(" | "),{retry:!!l.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(l.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})},dF=e=>{var t,n,r,i;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new AO(CR.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(CN("AP_AREA")&&(null!==(r=e.detail)&&void 0!==r&&r[23]&&"string"==typeof(null===(i=e.detail)||void 0===i?void 0:i[23])?eF(e.detail[23].toLowerCase()):eF()),null!==(t=e.detail)&&void 0!==t&&t[19]&&"string"==typeof(null===(n=e.detail)||void 0===n?void 0:n[19])){const t=e.detail[19],n=null==t?void 0:t.split(";");for(let r=0;r<n.length;r++){var o;const t=ky(o=n[r]).call(o);e.addresses[r]&&n&&(e.addresses[r].fingerprint=t)}}if(CN("GATEWAY_ADDRESS")&&CN("GATEWAY_ADDRESS").length>0){rO.debug("assign gateway address to",CN("GATEWAY_ADDRESS"));const t=CN("GATEWAY_ADDRESS").map((t=>{var n,r;const i=null!==(n=null===(r=e.addresses.find((e=>e.ip===t.ip&&e.port===t.port)))||void 0===r?void 0:r.fingerprint)&&void 0!==n?n:"";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:i}}));e.addresses=t}},uF=(e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){const e=SU(t.buffer.code);throw new AO(CR.UPDATE_TICKET_FAILED,"[".concat(t.buffer.code,"]: ").concat(e.desc),{retry:e.retry})}return t.buffer.ticket}throw rO.debug("update ticket request received ap response without response body:",t),new AO(CR.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},AF=(e,t,n)=>{const r=Math.floor(Math.random()*10**12),i="host"===e.role?"1":"audience"===e.role?"2":void 0,o={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:rF(rF(rF({6:e.stringUid,11:t,12:CN("USE_NEW_TOKEN")?"1":void 0},i?{17:i}:{}),{},{22:t},e.apRequestDetail?{33:e.apRequestDetail}:{}),e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:n,uid:e.uid||0}}]};o.request_bodies.forEach((t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));const a=new FormData;return a.append("request",JSON.stringify(o)),[a,r]},hF=(e,t)=>{const n=Math.floor(Math.random()*10**12),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((e=>({ip:e.ip,port:e.port})))}}]},i=new FormData;return i.append("request",JSON.stringify(r)),[i,n]};let pF=0;function fF(e){return nh.all(e.map((e=>e.then((e=>{throw e}),(e=>e))))).then((e=>{throw e}),(e=>e))}const mF=async e=>{let{fragementLength:t,referenceList:n,asyncMapHandler:r,allFailedhandler:i,promisesCollector:o}=e,a=0;const s=t;let c,l=0;const d=async()=>{const e=(()=>{const e=a*s,t=e+s;return n.slice(e,t).map(r)})();o&&o.push(...e);try{c=await fF(e)}catch(e){if(l+=s,a++,!(l>=n.length))return void await d();i(e)}e.forEach((e=>e.cancel()))};return await d(),c},gF=async e=>{let{referenceList:t,asyncMapHandler:n,closeFn:r}=e;const i=t.length;let o=0;const a=async()=>{const e=n(t.shift());try{return await e}catch(e){if(o++,o>=i||null!=r&&r(e))throw e;return a()}};return a()};async function vF(e,t,n,r){const i=async function(e,t,n,r){let i=null;const o=[],a=async()=>{const i=CN("WEBCS_DOMAIN").slice(0,CN("AJAX_REQUEST_CONCURRENT")).map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:WM()}))),a=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),s=await mF({fragementLength:CN("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(rO.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),sF(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},a),e[0]},promisesCollector:o});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},a),s},s=async()=>{if(await Ex(1e3),null!==i)return i;const a=CN("WEBCS_DOMAIN_BACKUP_LIST").map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:WM()}))),s=r.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:a.map((e=>e.url))}),c=await mF({fragementLength:CN("FRAGEMENT_LENGTH"),referenceList:a,asyncMapHandler:r=>(rO.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),sF(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:o});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},s),c};try{return i=await fF([a(),s()]),o.length&&o.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),i}catch(e){throw e[0]}}(e,t,n,r);return{gatewayInfo:await i}}async function yF(e,t,n,r,i){const o=e.cloudProxyServer;if("disabled"===o){if(!r)return;if(e.useLocalAccessPoint)return await vF(e,t,n,i);if(CN("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:r,proxyInfo:o}=await SF(e,t,n,i);if(e.turnServer&&"auto"!==e.turnServer.mode)return{gatewayInfo:r};const s=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||vN.tcpport,udpport:e.udpport||vN.udpport,username:e.username||vN.username,password:e.password||vN.password,forceturn:!1,security:!0})));if(i.useP2P){var a;const t=null!==(a=e.uid)&&void 0!==a?a:r.uid,n="glb:".concat(t.toString()),i=await jR(n),c=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||vN.tcpport,udpport:e.udpport||vN.udpport,username:n,password:i,forceturn:!1,security:!0})));s.push(...c)}return e.turnServer={mode:"manual",servers:s},{gatewayInfo:r}}return await vF(e,t,n,i)}const{proxyInfo:s,gatewayInfo:c}=await SF(e,t,n,i),l={gatewayInfo:c},d=s.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===o?void 0:e.tcpport?e.tcpport:vN.tcpport,udpport:"proxy4"===o?void 0:e.udpport?e.udpport:vN.udpport,username:e.username||vN.username,password:e.password||vN.password,forceturn:"proxy4"!==o,security:"proxy5"===o})));if(i.useP2P){var u;const t=null!==(u=e.uid)&&void 0!==u?u:c.uid,n="glb:".concat(t.toString()),r=await jR(n),i=s.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===o?void 0:e.tcpport||vN.tcpport,udpport:"proxy4"===o?void 0:e.udpport||vN.udpport,username:n,password:r,forceturn:"proxy4"!==o,security:"proxy5"===o})));d.push(...i)}return e.turnServer={mode:"manual",servers:d},rO.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(o)),l}async function bF(e,t,n,r,i){const o=CN("ACCOUNT_REGISTER").slice(0,CN("AJAX_REQUEST_CONCURRENT"));let a=[];a=t.proxyServer?o.map((e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"))):o.map((e=>"https://".concat(e,"/api/v1")));const s=null==i?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:a});try{const o=await async function(e,t,n,r,i){const o=Date.now(),a={sid:n.sid,opid:10,appid:n.appId,string_uid:t};let s=e[0];const c=await Fx((()=>GM(s+"".concat(-1===s.indexOf("?")?"?":"&","action=stringuid"),{data:a,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})),((n,r)=>{if(0===n.code){if(n.uid<=0||n.uid>=Math.pow(2,32))throw rO.error("Invalid Uint Uid ".concat(t," => ").concat(n.uid),n),uO.reqUserAccount(a.sid,{lts:o,success:!1,serverAddr:s,stringUid:a.string_uid,uid:n.uid,errorCode:CR.INVALID_UINT_UID_FROM_STRING_UID,extend:a}),new AO(CR.INVALID_UINT_UID_FROM_STRING_UID);return uO.reqUserAccount(a.sid,{lts:o,success:!0,serverAddr:s,stringUid:a.string_uid,uid:n.uid,errorCode:null,extend:a}),!1}const i=SU(n.code);return i.retry&&(s=e[(r+1)%e.length]),uO.reqUserAccount(a.sid,{lts:o,success:!1,serverAddr:s,stringUid:a.string_uid,uid:n.uid,errorCode:i.desc,extend:a}),i.retry}),((t,n)=>t.code!==CR.OPERATION_ABORTED&&(uO.reqUserAccount(a.sid,{lts:o,success:!1,serverAddr:s,stringUid:a.string_uid,uid:null,errorCode:t.code,extend:a}),s=e[(n+1)%e.length],!0)),i);if(0!==c.code){const e=SU(c.code);throw new AO(CR.UNEXPECTED_RESPONSE,e.desc)}return c}(a,e,t,n,r);return null==i||i.recordJoinChannelService({status:"success",endTs:Date.now()},s),o.uid}catch(e){throw null==i||i.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[e]},s),e}}async function EF(e,t,n){const r=CN("ACCOUNT_REGISTER");let i=[];i=t.proxyServer?r.map((e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"))):r.map((e=>"https://".concat(e,"/api/v1")));try{const r=await gF({referenceList:i,asyncMapHandler:r=>async function(e,t,n,r){const i=Date.now(),o={sid:n.sid,opid:10,appid:n.appId,string_uid:t};try{const t=await GM(e+"".concat(-1===e.indexOf("?")?"?":"&","action=stringuid"),{data:o,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(0!==t.code){const e=SU(t.code);throw new AO(CR.UNEXPECTED_RESPONSE,"preload sua error:".concat(e.desc),e)}if(t.uid<=0||t.uid>=Math.pow(2,32))throw new AO(CR.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:i,url:e,req:o,uid:t.uid,elapse:Date.now()-i}}catch(e){throw e}}(r,e,t,n),closeFn:e=>e.code===CR.OPERATION_ABORTED||e.code===CR.UNEXPECTED_RESPONSE&&!e.data.retry});return r}catch(e){throw e}}async function wF(e,t,n){const r=CN("CDS_AP").slice(0,CN("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1"):"https://".concat(t,"/api/v1?action=config"))),i=r.map((r=>function(e,t,n,r){const i=WI(),o={flag:64,cipher_method:0,features:rF(rF(rF(rF(rF({install_id:pN(),device:i.name,system:i.os,system_general:navigator.userAgent,vendor:t.appId,version:fN,cname:t.cname,session_id:t.sid,proxyServer:t.proxyServer,sdk_type:QU.WEB_RTC,browser_name:i.name,browser_version:i.version,user_agent:navigator.userAgent,channel_name:t.cname},t.stringUid&&{string_uid:t.stringUid}),t.uid&&{uid:t.uid+""}),i.os&&{os_name:i.os}),i.osVersion&&{os_version:i.osVersion}),{},{detail:""})};return Fx((()=>GM(e,{data:o,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})),void 0,(e=>e.code!==CR.OPERATION_ABORTED),r)}(r,e,t,n)));let o=null,a=null,s={};try{o=await fF(i)}catch(e){if(e.code===CR.OPERATION_ABORTED)throw e;a=e}if(i.forEach((e=>e.cancel())),uO.reportApiInvoke(e.sid,{name:zR.REQUEST_CONFIG_DISTRIBUTE,options:{error:a,res:o}}).onSuccess(),o&&o.test_tags)try{s=function(e){if(!e.test_tags)return{};const t=e.test_tags,n=Object.keys(t),r={};return n.forEach((e=>{var n;const i=ky(n=e.slice(4)).call(n),o=JSON.parse(t[e]),a=o[1];r[i]={tag:o[0]||"",value:a}})),r}(o)}catch(e){}return s}async function _F(e,t){const n=CN("WEBCS_DOMAIN").concat(CN("WEBCS_DOMAIN_BACKUP_LIST")).map((e=>({url:"https://".concat(e,"/api/v2/transpond/webrtc?v=2"),areaCode:WM(),serviceIds:[VU.CHOOSE_SERVER,VU.CLOUD_PROXY_FALLBACK]})));try{const r=await gF({referenceList:n,asyncMapHandler:n=>async function(e,t,n){let r,{url:i,areaCode:o,serviceIds:a}=e;const s=Date.now(),[c,l]=AF(t,o,a);let d=ax.networkState;try{d&&ax.networkState===ex.OFFLINE&&ax.onlineWaiter&&await nh.race([ax.onlineWaiter,Ex(Ux.maxRetryTimeout)]),d=ax.networkState;const{data:e,headers:t}=await GM(i,{data:c,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);r="1"===t.http3?1:-1;const o=e=>{const t=[];if(e.response_body.forEach((n=>{const r=n.buffer.code;if(23===n.uri&&0===r&&!n.buffer.edges_services)if(4194310===n.buffer.flag)n.buffer.edges_services=[];else{const r={error:new AO(CR.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:n.buffer.flag};t.push(r)}if(0!==r){const i=SU(r),o={error:new AO(CR.CAN_NOT_GET_GATEWAY_SERVER,i.desc,{desc:i.desc,retry:i.retry,csIp:e.detail[502]}),flag:n.buffer.flag};4194310===n.buffer.flag?rO.warning(o.error.toString()):t.push(o)}})),t.length)throw new AO(CR.CAN_NOT_GET_GATEWAY_SERVER,t.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message))).join(" | "),{retry:!!t.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(t.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})};o(e);const a=XU(e,VU.CHOOSE_SERVER),u=XU(e,VU.CLOUD_PROXY_FALLBACK);return dF(a),{gatewayInfo:GU(a,i),proxyInfo:u,opid:l,requestTime:s,url:i,isHttp3:r,elapse:Date.now()-s}}catch(e){throw e}}(n,e,t),closeFn:e=>e.code===CR.OPERATION_ABORTED||e.code===CR.CAN_NOT_GET_GATEWAY_SERVER&&!e.data.retry});return r}catch(e){throw e}}async function SF(e,t,n,r){const i=CN("PROXY_SERVER_TYPE3"),o=(e,t,n)=>{let r=n||i;return Array.isArray(r)&&(r=t%2==0?i[1]:i[0]),"https://".concat(r,"/ap/?url=").concat(e)};let a=null;const s=[],c=async()=>{const i=CN("WEBCS_DOMAIN").slice(0,CN("AJAX_REQUEST_CONCURRENT")).map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:WM(),serviceIds:[VU.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?VU.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?VU.CLOUD_PROXY:VU.CLOUD_PROXY_FALLBACK]}})),a=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),c=await mF({fragementLength:CN("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(rO.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),cF(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},a),e[0]},promisesCollector:s});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},a),c},l=async()=>{if(await Ex(1e3),null!==a)return a;const i=CN("WEBCS_DOMAIN_BACKUP_LIST").map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:WM(),serviceIds:[VU.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?VU.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?VU.CLOUD_PROXY:VU.CLOUD_PROXY_FALLBACK]}})),c=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),l=await mF({fragementLength:CN("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(rO.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),cF(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},c),e[0]},promisesCollector:s});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},c),l};let d,u,A;try{({gatewayInfo:d,proxyInfo:u,url:A}=await fF([c(),l()]))}catch(e){throw e[0]}if(s.length&&s.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),!d||!u)throw new AO(CR.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=A,"disabled"!==e.cloudProxyServer&&Array.isArray(i)&&A){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(A)[1];Br(i).call(i,t)&&(e.proxyServer=t,rO.setProxyServer(t),uO.setProxyServer(t))}return a={gatewayInfo:d,proxyInfo:await JU(u,d.uid)},a}async function CF(e,t,n){const r=CN("UAP_AP").slice(0,CN("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap"))),i=r.map((r=>function(e,t,n,r){const i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:fN,cname:t.cname,uid:t.uid.toString(),requestId:aF,seq:aF};aF+=1;const o={service_name:"tele_channel",json_body:JSON.stringify(i)};return Fx((async()=>{const t=await GM(e,{data:o,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==t.code){const e=new AO(CR.UNEXPECTED_RESPONSE,"cross channel ap error, code"+t.code,{retry:!0});throw rO.error(e.toString()),e}const r=JSON.parse(t.json_body);if(200!==r.code){const e=new AO(CR.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(r.code,", reason: ").concat(r.reason));throw rO.error(e.toString()),e}if(!r.servers||0===r.servers.length){const e=new AO(CR.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw rO.error(e.toString()),e}return{vid:r.vid,workerToken:r.workerToken,addressList:(CN("CHANNEL_MEDIA_RELAY_SERVERS")||r.servers).map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(CN("WORKER_DOMAIN"),":").concat(e.wss)))}}),void 0,(e=>!!(e.code!==CR.OPERATION_ABORTED&&e.code!==CR.UNEXPECTED_RESPONSE||e.data&&e.data.retry)),r)}(r,e,t,n)));try{const e=await fF(i);return i.forEach((e=>e.cancel())),e}catch(e){throw e[0]}}async function TF(e,t,n){let r=null;const i=[],o=async o=>{const a=CN(o?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2")));return o&&(await Ex(1e3),null!==r)?r:await mF({fragementLength:CN("FRAGEMENT_LENGTH"),referenceList:a,asyncMapHandler:r=>(rO.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(o?"backup":""," choose_server:"),r),function(e,t,n,r){const[i]=hF(t,[VU.CHOOSE_SERVER]);let o=ax.networkState;return Fx((async()=>{o&&ax.networkState===ex.OFFLINE&&ax.onlineWaiter&&await nh.race([ax.onlineWaiter,Ex(r&&r.maxRetryTimeout||Ux.maxRetryTimeout)]),o=ax.networkState;const t=await GM(e,{data:i,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);return uF(t,e)}),(()=>!1),(e=>e.code!==CR.OPERATION_ABORTED&&(e.code===CR.UPDATE_TICKET_FAILED?e.data.retry:(rO.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0))),r)}(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:i})};try{return r=await fF([o(!1),o(!0)]),i.length&&i.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),r}catch(e){throw e[0]}}function IF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IF(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class xF extends QR{get isSuccess(){return!!this.configs}constructor(e,t){super(),uC(this,"configs",void 0),uC(this,"store",void 0),uC(this,"joinInfo",void 0),uC(this,"cancelToken",void 0),uC(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),uC(this,"interval",void 0),uC(this,"mutex",void 0),uC(this,"mutableParamsRead",!1),uC(this,"configCache",{}),uC(this,"limit_bitrate",void 0),this.mutex=new Lx("config-distribute",e),this.store=t}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),CN("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval((()=>{this.updateConfigDistribute()}),CN("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0,this.configs=void 0,this.limit_bitrate=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,uO.reportApiInvoke(null,{options:void 0,name:zR.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:KR.TRACER}).onSuccess(JSON.stringify(IN))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void rO.debug("[config-distribute] get config distribute interrupted have no joininfo");let e;const t=await this.mutex.lock();try{e=await wF(this.joinInfo,this.cancelToken,this.retryConfig),rO.debug("[config-distribute] get config distribute",JSON.stringify(e));const t=function(e){var t;const n=Yh(t=Object.keys(e).filter((e=>/^webrtc_ng_global_parameter/.test(e)))).call(t);for(let o=0;o<n.length;o++)for(let t=n.length-1;t>o;t--){const r=n[t],i=e[r].value;if("number"==typeof i.__priority){const o=i.__priority,a=n[t-1],s=e[a].value;if("number"==typeof s.__priority){if(!(o>s.__priority))continue;{const e=r;n[t]=n[t-1],n[t-1]=e}}else{const e=r;n[t]=n[t-1],n[t-1]=e}}}const r=Date.now();let i={};return n.forEach((t=>{const n=e[t].value.__expires;n&&n<=r||(i[t]=e[t])})),i}(e);this.cacheGlobalParameterConfig(t),this.store.hasStartJoinChannel||(this.store.isABTestSuccess=!0),this.configs=t}catch(e){const t=new AO(CR.NETWORK_RESPONSE_ERROR,e);rO.warning("[config-distribute] ".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.limit_bitrate||void 0}handleBitrateLimit(e){tU(e)&&(this.limit_bitrate?this.limit_bitrate&&this.limit_bitrate.id!==e.id&&this.emit(eU.UPDATE_BITRATE_LIMIT,e):this.emit(eU.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.limit_bitrate&&RF({},this.limit_bitrate.low_stream_uplink)}handleABTestConfigDistribute(e){try{const t={},n=Object.keys(e),r=[];n.forEach((n=>{const i=e[n].value;t[n]=i;const o=i.__id;if(o&&this.configCache[n]&&this.configCache[n].__id===o)return;const a=i.__type,s=e[n].value,c=e[n].tag;let l=0;a?a===TN.REALTIME&&(l=1):Object.keys(s).some((e=>Object.prototype.hasOwnProperty.call(wN,e)||!LL()&&Object.prototype.hasOwnProperty.call(yN,e)?(l=1,!0):void 0)),r.push({tag:c,isApplied:l,feature:n,params:JSON.stringify(i)})})),r.forEach((e=>{let{tag:t,feature:n,params:r,isApplied:i}=e;this.store.sessionId&&uO.abTest(this.store.sessionId,{intSucc:1,isApplied:i,tag:t,feature:n,params:r,cid:this.store.cid,uid:this.store.intUid})})),this.configCache=t}catch(e){rO.debug("handleABTestConfigDistribute error",e)}}cacheGlobalParameterConfig(e){const t=function(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n].value,i=r.__expires,o=r.__type;Object.keys(r).forEach((e=>{"__id"===e||"__type"===e||"__priority"===e||"__expires"===e||Object.prototype.hasOwnProperty.call(t,e)||(t[e]=RF(RF({value:r[e]},i&&{expires:i}),o&&{type:o}))}))})),t}(e);try{var n;const r=null===(n=t.LIMIT_BITRATE)||void 0===n?void 0:n.value;delete t.LIMIT_BITRATE,r&&tU(r)&&this.handleBitrateLimit(r),this.limit_bitrate=r,this.handleGlobalParameterConfig(t),this.handleABTestConfigDistribute(e),function(e){try{const t=Date.now();Object.keys(e).forEach((n=>{const{value:r,type:i,expires:o}=e[n];o&&o<=t||((i===TN.REALTIME||Object.prototype.hasOwnProperty.call(wN,n))&&(IN[n]=r,_N[n]=r,rO.debug("Update realtime parameters from config distribute",n,r)),i||LL()||!Object.prototype.hasOwnProperty.call(yN,n)||(IN[n]=r,_N[n]=r,rO.debug("Update gateway parameters from config distribute",n,r)))}))}catch(t){rO.error("Error update config immediately: ".concat(e),t.message)}}(t);const i=JSON.stringify(t),o=window.btoa(i);window.localStorage.setItem("websdk_ng_global_parameter",o),rO.debug("Caching global parameters ".concat(i))}catch(e){rO.error("Error caching global parameters:",e.message)}}handleGlobalParameterConfig(e){try{const t=Date.now();Object.keys(e).forEach((n=>{if("CLIENT_ROLE_OPTIONS"===n&&Object.prototype.hasOwnProperty.call(_N,n)){const{value:r,expires:i}=e[n];if(i&&i<=t)return;(function(e,t){try{return"object"==typeof e&&"object"==typeof t&&JSON.stringify(e)===JSON.stringify(t)}catch(e){return!1}})(_N[n],r)||(IN[n]=r,_N[n]=r,this.emit(eU.UPDATE_CLIENT_ROLE_OPTIONS,r),rO.debug("Updating client role options: ".concat(JSON.stringify(r))))}}))}catch(e){rO.error("Error handling global parameter config:",e.message)}}}class NF extends QR{constructor(){super(...arguments),uC(this,"resultStorage",new Map)}setLocalAudioStats(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}setLocalVideoStats(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}setRemoteAudioStats(e,t){const n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))}record(e,t,n){if(CN("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const r=this.resultStorage.get(e);if(r&&(r.result.push(n),r.result.length>=5)){var i;const n=Br(i=r.result).call(i,!0);r.isPrevNormal&&!n&&this.emit("exception",OF[e],e,t),!r.isPrevNormal&&n&&this.emit("exception",OF[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=n,r.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof MP&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=WU(t._encoderConfig.frameRate));const r=e.captureFrameRate;return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof MP&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const OF={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},kF=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}measureFromPublishStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}};function PF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PF(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class LF{constructor(e){uC(this,"store",void 0),uC(this,"onStatsException",void 0),uC(this,"onUploadPublishDuration",void 0),uC(this,"onStatsChanged",void 0),uC(this,"onVideoCodecChanged",void 0),uC(this,"localStats",new Map),uC(this,"remoteStats",new Map),uC(this,"updateStatsInterval",void 0),uC(this,"trafficStats",void 0),uC(this,"trafficStatsPeerList",[]),uC(this,"uplinkStats",void 0),uC(this,"exceptionMonitor",void 0),uC(this,"p2pChannel",void 0),uC(this,"scalabilityMode",oN.L1T1),uC(this,"updateStats",(()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))})),this.store=e,this.exceptionMonitor=new NF,this.exceptionMonitor.on("exception",((e,t,n)=>{this.onStatsException&&this.onStatsException(e,t,n)}))}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(cU.LocalAudioTrack)||BF({},VO)}getLocalVideoTrackStats(){return this.localStats.get(cU.LocalVideoTrack)||BF({},HO)}getRemoteAudioTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppad+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.audioStats;i&&(n[e]=t(e,i))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{audioStats:i}]=e;i&&(n[r]=t(r,i))}));return n}getRemoteNetworkQualityStats(e){const t={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.networkStats;r&&(t[e]=r)}else Array.from(this.remoteStats.entries()).forEach((e=>{let[n,{networkStats:r}]=e;r&&(t[n]=r)}));return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppvd+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.videoStats;i&&(n[e]=t(e,i))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{videoStats:i}]=e;i&&(n[r]=t(r,i))}));return n}getRTCStats(){let e=0,t=0,n=0,r=0;const i=this.localStats.get(cU.LocalAudioTrack);i&&(e+=i.sendBytes,t+=i.sendBitrate);const o=this.localStats.get(cU.LocalVideoTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate);const a=this.localStats.get(cU.LocalVideoLowTrack);a&&(e+=a.sendBytes,t+=a.sendBitrate),this.remoteStats.forEach((e=>{let{audioStats:t,videoStats:i}=e;t&&(n+=t.receiveBytes,r+=t.receiveBitrate),i&&(n+=i.receiveBytes,r+=i.receiveBitrate)}));let s=1;return this.trafficStats&&(s+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:s,SendBitrate:t,SendBytes:e,RecvBytes:n,RecvBitrate:r,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){e.peer_delay=e.peer_delay.filter((e=>void 0!==e.B_ppad||void 0!==e.B_ppvd)),e.peer_delay.filter((e=>-1===this.trafficStatsPeerList.indexOf(e.peer_uid))).forEach((e=>{var t;const n=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),r=null!=n&&n.videoSSRC?kF.measureFromSubscribeStart(this.store.clientId,n.videoSSRC):0,i=null!=n&&n.audioSSRC?kF.measureFromSubscribeStart(this.store.clientId,n.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,r>i?r:i),this.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}updateUplinkStats(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&rO.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,n){if(!e)return!1;const r=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,i=!n||t.framesDecodeCount>n.framesDecodeCount;return r||!i}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}updateLocalStats(e){Array.from(this.localStats.entries()).forEach((t=>{let[n,r]=t;switch(n){case cU.LocalVideoTrack:case cU.LocalVideoLowTrack:{const t=r,a=BF({},HO),s=e.getStats(),c=e.getLocalMedia(n);if(s){const n=s.videoSend.find((e=>e.ssrc===(null==c?void 0:c.ssrcs[0].ssrcId)));if(n){const r=e.getLocalVideoSize(),o=e.getEncoderConfig(cU.LocalVideoTrack);var i;"H264"!==n.codec&&"H265"!==n.codec&&"VP8"!==n.codec&&"VP9"!==n.codec&&"AV1X"!==n.codec&&"AV1"!==n.codec||(a.codecType=n.codec,(null==t?void 0:t.codecType)!==n.codec&&(null===(i=this.onVideoCodecChanged)||void 0===i||i.call(this,n.codec.toLocaleLowerCase()))),a.sendBytes=n.bytes,a.sendBitrate=t?8*Math.max(0,a.sendBytes-t.sendBytes):0,n.inputFrame?(a.captureFrameRate=n.inputFrame.frameRate,a.captureResolutionHeight=n.inputFrame.height,a.captureResolutionWidth=n.inputFrame.width):r&&(a.captureResolutionWidth=r.width,a.captureResolutionHeight=r.height),n.sentFrame?(a.sendFrameRate=n.sentFrame.frameRate,a.sendResolutionHeight=n.sentFrame.height,a.sendResolutionWidth=n.sentFrame.width):r&&(a.sendResolutionWidth=r.width,a.sendResolutionHeight=r.height),n.avgEncodeMs&&(a.encodeDelay=n.avgEncodeMs),o&&o.bitrateMax?a.targetSendBitrate=1e3*o.bitrateMax:n.targetBitrate&&(a.targetSendBitrate=n.targetBitrate),a.sendPackets=n.packets,a.sendPacketsLost=n.packetsLost,a.sendJitterMs=n.jitterMs,a.sendRttMs=n.rttMs,a.totalDuration=t?t.totalDuration+1:1,a.totalFreezeTime=t?t.totalFreezeTime:0,this.isLocalVideoFreeze(n)&&(a.totalFreezeTime+=1),n.scalabilityMode&&this.scalabilityMode!==n.scalabilityMode&&(rO.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(n.scalabilityMode)),this.scalabilityMode=n.scalabilityMode)}this.trafficStats&&(a.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var o;this.localStats.set(n,a),((null==t?void 0:t.sendResolutionWidth)!==a.sendResolutionWidth||(null==t?void 0:t.sendResolutionHeight)!==a.sendResolutionHeight)&&(null===(o=this.onStatsChanged)||void 0===o||o.call(this,"resolution",{width:a.sendResolutionWidth,height:a.sendResolutionHeight})),a&&c&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,c.track,a);break}case cU.LocalAudioTrack:{const t=r,i=BF({},VO),o=e.getStats(),a=e.getLocalMedia(n);if(o){const n=o.audioSend.find((e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId)));if(n){if("opus"!==n.codec&&"aac"!==n.codec&&"PCMU"!==n.codec&&"PCMA"!==n.codec&&"G722"!==n.codec||(i.codecType=n.codec),n.inputLevel)i.sendVolumeLevel=Math.round(32767*n.inputLevel);else{const t=e.getLocalAudioVolume();t&&(i.sendVolumeLevel=Math.round(32767*t))}i.sendBytes=n.bytes,i.sendPackets=n.packets,i.sendPacketsLost=n.packetsLost,i.sendJitterMs=n.jitterMs,i.sendRttMs=n.rttMs,i.sendBitrate=t?8*Math.max(0,i.sendBytes-t.sendBytes):0}}this.trafficStats&&(i.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(cU.LocalAudioTrack,i),i&&a&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,a.track,i);break}}}))}updateRemoteStats(e){Array.from(this.remoteStats.entries()).forEach((t=>{var n,r;let[i,{videoStats:o,audioStats:a,videoPcStats:s}]=t;const c=a,l=o,d=s,u=BF({},zO),A=BF({},GO),h=BF({},KO),{audioTrack:p,videoTrack:f,audioSSRC:m,videoSSRC:g}=e.getRemoteMedia(i);let v;v=this.store.useP2P?e.getStats(!0):e.getStats();const y=null===(n=v)||void 0===n?void 0:n.audioRecv.find((e=>e.ssrc===m)),b=null===(r=v)||void 0===r?void 0:r.videoRecv.find((e=>e.ssrc===g)),E=this.trafficStats&&this.trafficStats.peer_delay.find((e=>e.peer_uid===i));if(y&&("opus"!==y.codec&&"aac"!==y.codec&&"PCMU"!==y.codec&&"PCMA"!==y.codec&&"G722"!==y.codec||(u.codecType=y.codec),y.outputLevel?u.receiveLevel=Math.round(32767*y.outputLevel):p&&(u.receiveLevel=Math.round(32767*p.getVolumeLevel())),u.receiveBytes=y.bytes,u.receivePackets=y.packets,u.receivePacketsLost=y.packetsLost,u.receivePacketsDiscarded=y.packetsDiscarded,u.packetLossRate=u.receivePacketsLost/(u.receivePackets+u.receivePacketsLost),u.receiveBitrate=c?8*Math.max(0,u.receiveBytes-c.receiveBytes):0,u.totalDuration=c?c.totalDuration+1:1,u.totalFreezeTime=c?c.totalFreezeTime:0,u.freezeRate=u.totalFreezeTime/u.totalDuration,u.receiveDelay=y.jitterBufferMs,u.totalDuration>10&&LF.isRemoteAudioFreeze(p)&&(u.totalFreezeTime+=1)),b){var w;"H264"!==b.codec&&"H265"!==b.codec&&"VP8"!==b.codec&&"VP9"!==b.codec&&"AV1X"!==b.codec&&"AV1"!==b.codec||(A.codecType=b.codec),A.receiveBytes=b.bytes,A.receiveBitrate=l?8*Math.max(0,A.receiveBytes-l.receiveBytes):0,A.decodeFrameRate=b.decodeFrameRate<0?0:b.decodeFrameRate,A.renderFrameRate=b.decodeFrameRate<0?0:b.decodeFrameRate,b.outputFrame&&(A.renderFrameRate=b.outputFrame.frameRate),b.receivedFrame?(A.receiveFrameRate=b.receivedFrame.frameRate,A.receiveResolutionHeight=b.receivedFrame.height,A.receiveResolutionWidth=b.receivedFrame.width):f&&(A.receiveResolutionHeight=f._videoHeight||0,A.receiveResolutionWidth=f._videoWidth||0),void 0!==b.framesRateFirefox&&(A.receiveFrameRate=Math.round(b.framesRateFirefox)),A.receivePackets=b.packets,A.receivePacketsLost=b.packetsLost,A.packetLossRate=A.receivePacketsLost/(A.receivePackets+A.receivePacketsLost);const t=l?l.totalFreezeTime:0,n=l?l.totalDuration:0;A.totalDuration=l?l.totalDuration+1:1,A.totalFreezeTime=null!==(w=b.totalFreezesDuration)&&void 0!==w?w:t||0,A.receiveDelay=b.jitterBufferMs||0;const r=!!g&&e.getRemoteVideoIsReady(g);void 0===b.totalFreezesDuration&&f&&r&&LF.isRemoteVideoFreeze(f,b,d)&&(A.totalFreezeTime+=1),A.freezeRate=Math.max(0,Math.min((A.totalFreezeTime-t)/(A.totalDuration-n),1))}E&&(u.end2EndDelay=E.B_ad,A.end2EndDelay=E.B_vd,u.transportDelay=E.B_ed,A.transportDelay=E.B_ed,u.currentPacketLossRate=E.B_ealr4/100,A.currentPacketLossRate=E.B_evlr4/100,h.uplinkNetworkQuality=E.B_punq?E.B_punq:0,h.downlinkNetworkQuality=E.B_pdnq?E.B_pdnq:0),this.remoteStats.set(i,{audioStats:u,videoStats:A,videoPcStats:b,networkStats:h}),p&&this.exceptionMonitor.setRemoteAudioStats(p,u),f&&this.exceptionMonitor.setRemoteVideoStats(f,A)}))}}class DF{constructor(){uC(this,"destChannelMediaInfos",new Map),uC(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){QD(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){QD(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){OD(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function UF(e){if(!(e instanceof DF))return new AO(CR.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();return t?0===n.size?new AO(CR.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new AO(CR.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class MF{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){uC(this,"uid",void 0),uC(this,"_uintid",void 0),uC(this,"_trust_in_room_",!0),uC(this,"_trust_audio_enabled_state_",!0),uC(this,"_trust_video_enabled_state_",!0),uC(this,"_trust_audio_mute_state_",!0),uC(this,"_trust_video_mute_state_",!0),uC(this,"_audio_muted_",!1),uC(this,"_video_muted_",!1),uC(this,"_audio_enabled_",!0),uC(this,"_video_enabled_",!0),uC(this,"_audio_added_",!1),uC(this,"_video_added_",!1),uC(this,"_is_pre_created",!1),uC(this,"_video_pre_subscribed",!1),uC(this,"_audio_pre_subscribed",!1),uC(this,"_trust_video_stream_added_state_",!0),uC(this,"_trust_audio_stream_added_state_",!0),uC(this,"_audioTrack",void 0),uC(this,"_videoTrack",void 0),uC(this,"_dataChannels",[]),uC(this,"_audioSSRC",void 0),uC(this,"_videoSSRC",void 0),uC(this,"_audioOrtc",void 0),uC(this,"_videoOrtc",void 0),uC(this,"_cname",void 0),uC(this,"_rtxSsrcId",void 0),uC(this,"_videoMid",void 0),uC(this,"_audioMid",void 0),this.uid=e,this._uintid=t}}function FF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FF(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const QF="9",VF=4e4;function HF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HF(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var KF=function(e){return e[e.DOWN=0]="DOWN",e[e.UP=1]="UP",e}(KF||{});const GF=new Map;function WF(e,t,n,r){let{scale:i}=e;if(0===i&&r===KF.UP||i>=t.length-1&&r===KF.DOWN)return e;let o=zF(zF({},e),{},{scale:r===KF.DOWN?++i:--i});switch(n){case"maintain-framerate":o=zF(zF({},o),t[i].motion);break;case"maintain-resolution":o=zF(zF({},o),t[i].detail);break;case"balanced":o=zF(zF({},o),t[i].balanced)}return o}function qF(e,t){if(t){const n={overUse:0,underUse:0,adaptationList:YF(t)};GF.set(e,n)}else GF.delete(e)}function YF(e){const t=zF({},e),{bitrateMax:n,frameRate:r,scaleResolutionDownBy:i,bitrateMin:o}=t,{MIN_FRAME_RATE:a,MAX_THRESHOLD_FRAMERATE:s,MAX_SCALE:c,BITRATE_MIN_THRESHOLD:l,BITRATE_MAX_THRESHOLD:d,BWE_SCALE_UP_THRESHOLD:u,BWE_SCALE_DOWN_THRESHOLD:A,PERF_SCALE_DOWN_THRESHOLD:h,PERF_SCALE_UP_THRESHOLD:p,BALANCE_BITRATE_FACTOR:f,BALANCE_FRAMERATE_FACTOR:m,BALANCE_RESOLUTION_FACTOR:g,MOTION_RESOLUTION_FACTOR:v,MOTION_BITRATE_FACTOR:y,DETAIL_FRAMERATE_FACTOR:b,DETAIL_BITRATE_FACTOR:E}=bN,w=Math.min(t.frameRate,s),_=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(A,1)*n),bwe_up:n,fps_down:Math.round(Math.pow(h,1)*w),fps_up:r},balanced:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:o},motion:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:o},detail:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:o}}];for(let S=1;S<=c;S++){const e={bwe_up:Math.round(Math.pow(u,S)*n),bwe_down:Math.round(Math.pow(A,S+1)*n),fps_up:Math.round(Math.pow(p,S)*w),fps_down:Math.round(Math.pow(h,S+1)*w)},t={scaleResolutionDownBy:i/Math.pow(g,S),frameRate:Math.max(Math.round(Math.pow(m,S)*r),a),bitrateMax:Math.max(Math.round(Math.pow(f,S)*n),d),bitrateMin:Math.max(Math.round(Math.pow(f,S)*o),l)},s={scaleResolutionDownBy:i/Math.pow(v,S),frameRate:r,bitrateMax:Math.max(Math.round(Math.pow(y,S)*n),d),bitrateMin:Math.max(Math.round(Math.pow(y,S)*o),l)},c={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(b,S)*r),a),bitrateMax:Math.max(Math.round(Math.pow(E,S)*n),d),bitrateMin:Math.max(Math.round(Math.pow(E,S)*o),l)};_.push({scale:S,threshold:e,balanced:t,motion:s,detail:c})}return _}function XF(e,t,n,r,i,o){const a=GF.get(e)||{overUse:0,underUse:0,adaptationList:YF(i)},{adaptationList:s}=a;GF.set(e,a);const{OVERUSE_TIMES_THRESHOLD:c,UNDERUSE_TIMES_THRESHOLD:l}=bN,{scale:d}=r;let u,A;return"number"==typeof t&&t>0&&function(e,t,n,r){if(t>=n.length)return!1;let{threshold:{fps_down:i}}=n[t];return CN("FORCE_AG_HIGH_FRAMERATE")&&"maintain-framerate"===r&&(i=n[0].threshold.fps_down),e<i}(t,d,s,o)&&(a.overUse++,A=iN.CPU,a.overUse>c)||"number"==typeof n&&n>0&&function(e,t,n){if(t>=n.length)return!1;const{threshold:{bwe_down:r}}=n[t];return e<r}(n,d,s)&&(a.overUse++,A=iN.BANDWIDTH,a.overUse>c)?(a.overUse=0,a.underUse=0,u=WF(r,s,o,KF.DOWN),[u,A]):("number"==typeof t&&t>0&&"number"==typeof n&&n>0&&function(e,t,n,r){if(0===t)return;let{threshold:{fps_up:i}}=n[t];return CN("FORCE_AG_HIGH_FRAMERATE")&&"maintain-framerate"===r&&(i=n[1].threshold.fps_up),e>i}(t,d,s,o)&&function(e,t,n){if(0===t)return;const{threshold:{bwe_up:r}}=n[t];return e>r}(n,d,s)&&(a.underUse++,a.underUse>l&&(a.overUse=0,a.underUse=0,u=WF(r,s,o,KF.UP),0===u.scale&&(A=iN.NONE))),[u,A])}function JF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JF(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $F(e){var t;return!!CN("ENABLE_AG_ADAPTATION")&&!!(e instanceof RB||Br(t=e._hints).call(t,PO.CUSTOM_TRACK))&&(!!CN("FORCE_SUPPORT_AG_ADAPTATION")||!!(function(e){const t=WI();if(t.os!==VI.IOS||!t.osVersion)return!1;const n=t.osVersion.split(".");return Number(n[0])>=e}(14)&&cR(17,4,!0)||sR(14)&&lR(17,4,!0)))}const ej=new Map;function tj(e,t){const n=ej.get(e);if(n){const{timer:t}=n;window.clearTimeout(t),ej.delete(e)}t.qualityLimitationReason=iN.NONE,qF(e)}function nj(e,t){var n;let r;switch(t){case cU.LocalAudioTrack:r=GD.Audio;break;case cU.LocalVideoTrack:r=Br(n=e._hints).call(n,PO.SCREEN_TRACK)?GD.Screen:GD.High;break;case cU.LocalVideoLowTrack:r=GD.Low}return r}function rj(e){const t=pO();if(e.some((e=>e._bypassWebAudio)))throw new TR(CR.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new TR(CR.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function ij(e,t){rj(e);const n=t||new MP;return e.forEach((e=>n.addAudioTrack(e))),n}const oj=!pO().supportUnifiedPlan||CN("CHROME_FORCE_PLAN_B")&&yR();function aj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return oj?(n={spec:t,store:e},UM("PlanBConnection").create(n)):new Aj(t,e)}function sj(e){return e&&("disconnected"===e.iceConnectionState||"checking"===e.iceConnectionState||"failed"===e.iceConnectionState)}function cj(e){try{if(e.iceServers)return!1;if(e.turnServer&&"off"!==e.turnServer.mode){if(YR(e.turnServer.servers))return!1;if(CN("FORCE_TURN_TCP")||e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).some((e=>e.forceturn)))return!0}return!1}catch(e){return!1}}var lj;function dj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dj(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Aj=(lj=class e extends rU{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Br(t=Object.keys(xN)).call(t,e)})))]}constructor(t,n){super(t,n),uC(this,"id",wx(5,"connection-")),uC(this,"store",void 0),uC(this,"peerConnection",void 0),uC(this,"forceTurn",!1),uC(this,"remoteSDP",void 0),uC(this,"initialOffer",void 0),uC(this,"transportEventReceiver",void 0),uC(this,"statsFilter",void 0),uC(this,"extension",{useXR:CN("USE_XR")}),uC(this,"localCapabilities",void 0),uC(this,"remoteCodecs",void 0),uC(this,"localCandidateCount",0),uC(this,"allCandidatesReceived",!1),uC(this,"isPreallocation",!1),uC(this,"preSSRCMap",new Map),uC(this,"dataStreamChannelMap",new Map),uC(this,"establishPromise",void 0),uC(this,"recoveredDataChannelIds",[]),uC(this,"currentDataChannelId",1),uC(this,"supportAV1RtpSpec",!1),uC(this,"mutex",void 0),uC(this,"qualityLimitationReason",iN.NONE),uC(this,"isFirstConnected",!1),this.store=n,this.forceTurn=cj(t),this.mutex=new Lx("P2PConnection-mutex",n.clientId),this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.isFirstConnected=!1,this.statsFilter=AN(this.peerConnection,CN("STATS_UPDATE_INTERVAL"),void 0,tR()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}getPreMedia(e){const t=this.preSSRCMap.get(e);if(void 0!==t){const e=this.peerConnection.getTransceivers().find((e=>e.mid===t));if(e)return{transceiver:e,track:e.receiver.track,id:t}}}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,this.remoteSDP)if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(e);const n=this.remoteSDP.toString();null==t||t(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}else rO.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");else rO.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(t))}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const n=await this.peerConnection.createOffer();if(!n.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const r=lM(n.sdp),i=await bM({filterRTX:!CN("USE_PUB_RTX")&&!CN("USE_SUB_RTX"),filterVideoFec:CN("FILTER_VIDEO_FEC"),filterAudioFec:CN("FILTER_AUDIO_FEC"),filterVideoCodec:CN("FILTER_VIDEO_CODEC")},this.extension);if(this.localCapabilities=_M(i),this.initialOffer=n,CN("ENABLE_SVC")&&"av1"==this.store.codec){const t=await async function(){try{const e=new RTCPeerConnection;e.addTransceiver("video",{direction:"sendonly",sendEncodings:[{scalabilityMode:oN.L1T3}]});const t=await e.createOffer();if(!t.sdp)return void e.close();const n=DN(t.sdp).mediaDescriptions[0];if(!n)return;const r=n.attributes.extmaps.find((e=>"https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension"===e.extensionName));return e.close(),r}catch(e){return}}();var e;t&&(this.supportAV1RtpSpec=!0,null===(e=i.send)||void 0===e||e.videoExtensions.push(t))}let o;return n.sdp&&NM(n.sdp)&&(o=dx(i),(t=o).send&&(rM(iU.VIDEO,t.send.videoExtensions),rM(iU.AUDIO,t.send.audioExtensions)),t.recv&&(rM(iU.VIDEO,t.recv.videoExtensions),rM(iU.AUDIO,t.recv.audioExtensions)),t.sendrecv&&(rM(iU.VIDEO,t.sendrecv.videoExtensions),rM(iU.AUDIO,t.sendrecv.audioExtensions))),uj(uj({},r),{},{rtpCapabilities:o||i,offerSDP:n.sdp})}catch(e){throw new TR(CR.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}var t}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.initialOffer.sdp&&NM(this.initialOffer.sdp)&&(t=e.rtpCapabilities,n=this.localCapabilities,t.send&&(nM(iU.VIDEO,t.send.videoExtensions,n.send.videoExtensions),nM(iU.AUDIO,t.send.audioExtensions,n.send.audioExtensions)),t.recv&&(nM(iU.VIDEO,t.recv.videoExtensions,n.recv.videoExtensions),nM(iU.AUDIO,t.recv.audioExtensions,n.recv.audioExtensions))),this.remoteSDP=new class{get localCapabilities(){return dx(this._localCapabilities)}get rtpCapabilities(){return dx(this._rtpCapabilities)}get candidates(){return dx(this._candidates)}get iceParameters(){return dx(this._iceParameters)}get dtlsParameters(){return dx(this._dtlsParameters)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];uC(this,"sessionDesc",void 0),uC(this,"_localCapabilities",void 0),uC(this,"_rtpCapabilities",void 0),uC(this,"_candidates",void 0),uC(this,"_originCandidates",void 0),uC(this,"_iceParameters",void 0),uC(this,"_isUseExtmapAllowMixed",void 0),uC(this,"_dtlsParameters",void 0),uC(this,"setup",void 0),uC(this,"currentMidIndex",void 0),uC(this,"cname",void 0),uC(this,"firefoxSsrcMidMap",new Map),this._isUseExtmapAllowMixed=t,e=dx(e);const{iceParameters:n,dtlsParameters:r,candidates:i,rtpCapabilities:o,setup:a,localCapabilities:s,cname:c}=e;this._rtpCapabilities=o,this._candidates=i,this._originCandidates=dx(i),this._iceParameters=n,this._dtlsParameters=r,this._localCapabilities=s,this.setup=a,this.cname=c,this.sessionDesc=this.updateRemoteRTPCapabilities(o),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}preloadRemoteMedia(e){const t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send;let o=this.sessionDesc.mediaDescriptions.length-1;for(let a=1;a<e;a++){const e=2*a+2e4,s=2*a+VF,{ssrcs:c,ssrcGroups:l}=hM([{ssrcId:e}],this.cname),{ssrcs:d,ssrcGroups:u}=hM([{ssrcId:s,rtx:CN("USE_SUB_RTX")?s+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:QF,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:QF,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:l,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++o)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return UN(this.sessionDesc)}send(e,t,n,r){const{ssrcs:i,ssrcGroups:o}=hM(t,this.cname,CN("SYNC_GROUP")?n:void 0),a=this.findPreloadMediaDesc(i);if(a){if(tR()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,a.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(a,r),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,i);let n;return-1===t||1===t&&($I()||function(){const e=WI();return!(e.name!==HI.CHROME||!e.osVersion)&&Number(e.version)<=90}()||CN("ENABLE_ENCODED_TRANSFORM")&&ZI())||0===t&&CN("USE_SUB_RTX")||uR()?(n=this.createOrRecycleSendMedia(e,i,o,"sendonly",r),this.updateBundleMids()):(n=dx(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=i,n.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,r)),tR()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,n.attributes.mid),{mid:n.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:n,mslabel:r}=e;return this.send(t,n,r)})),n=[];let r=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:i}=e;i&&(r=!0),n.push(t)})),{mids:n,needExchangeSDP:r}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{"0"===e.attributes.mid||tR()||uR()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Br(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Br(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}receive(e,t,n,r){e.forEach(((e,i)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[i])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}updateRemoteRTPCapabilities(e){const t=this.sessionDesc||DN((n=this._isUseExtmapAllowMixed,"v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite".concat(n?"\na=extmap-allow-mixed":"","\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n")));var n;this._rtpCapabilities=e;const r=this.rtpCapabilities.send,i=this.localCapabilities.send;for(const o of t.mediaDescriptions){if(o.attributes.iceUfrag=this._iceParameters.iceUfrag,o.attributes.icePwd=this._iceParameters.icePwd,o.attributes.fingerprints=this._dtlsParameters.fingerprints,o.attributes.candidates=this._candidates,o.attributes.setup=this.setup,"application"===o.media.mediaType&&(o.attributes.sctpPort="5000"),"video"===o.media.mediaType)if(0===r.videoCodecs.length){const e=i.videoCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Br(n=t.encodingName.toLowerCase()).call(n,"vp8")}))||[i.videoCodecs[0]];o.media.fmts=e.map((e=>e.payloadType.toString(10))),o.attributes.payloads=e,o.attributes.extmaps=[]}else if(o.media.fmts=r.videoCodecs.map((e=>e.payloadType.toString(10))),o.attributes.payloads=r.videoCodecs,o.attributes.extmaps=r.videoExtensions,CN("PRELOAD_MEDIA_COUNT")>0){const{ssrcs:e,ssrcGroups:t}=hM([{ssrcId:VF,rtx:CN("USE_SUB_RTX")?40001:void 0}],this.cname);o.attributes.ssrcs=e,o.attributes.ssrcGroups=t}if("audio"===o.media.mediaType)if(0===r.audioCodecs.length){const e=i.audioCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Br(n=t.encodingName.toLowerCase()).call(n,"opus")}))||[i.audioCodecs[0]];o.media.fmts=e.map((e=>e.payloadType.toString(10))),o.attributes.payloads=e,o.attributes.extmaps=[]}else if(o.media.fmts=r.audioCodecs.map((e=>e.payloadType.toString(10))),o.attributes.payloads=r.audioCodecs,o.attributes.extmaps=r.audioExtensions,SM(o),CN("PRELOAD_MEDIA_COUNT")>0){const{ssrcs:e,ssrcGroups:t}=hM([{ssrcId:2e4}],this.cname);o.attributes.ssrcs=e,o.attributes.ssrcGroups=t}}return this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1,this.sessionDesc}updateCandidates(e){const t=this._originCandidates.filter((e=>"udp"===e.transport)),n=[];if(t.forEach((e=>{n.push(jF(jF({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})),0!==t.length){switch(e){case oU.TCP_RELAY:this._candidates=n;break;case oU.UDP_TCP_RELAY:case oU.RELAY:this._candidates=[...t,...n];break;default:this._candidates=t}for(const e of this.sessionDesc.mediaDescriptions)e.attributes.candidates=this.candidates}}restartICE(e){e=dx(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const r=n.media.mediaType===e&&"0"!==n.media.port&&("sendonly"===n.attributes.direction||"sendrecv"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(tR()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==n.attributes.mid&&"1"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return r}))}createOrRecycleDataChannel(){for(const n of this.sessionDesc.mediaDescriptions)if("application"===n.media.mediaType)return{mediaDesc:n,needExchangeSDP:!1};this.currentMidIndex+=1;const e="".concat(this.currentMidIndex),t={media:{mediaType:"application",port:QF,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(e),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,n,r,i,o){const a=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,c=CM(a,s,this.localCapabilities.send,a===iU.VIDEO?r:i),l=a===iU.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;const d="".concat(this.currentMidIndex);let u={media:{mediaType:a,port:QF,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(d)}};u=this.mungRecvMediaDsec(u,e,o);const A=this.findFirstClosedMedia(a);if(A){const e=this.sessionDesc.mediaDescriptions.indexOf(A);this.sessionDesc.mediaDescriptions[e]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}updateRemoteCodec(e,t,n){const r=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Br(t=Object.keys(xN)).call(t,e)})))],i=new Set(t);if(r.every((e=>i.has(e))))return rO.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;const o=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var n;return Br(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))));if(0===o.length)return rO.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(r," codecs: ").concat(t)),!1;const a=[...new Set(o.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")))];let s;if(rO.debug("updateRemoteCodec, from ".concat(r," to ").concat(a)),0===e.length)s=this.sessionDesc.mediaDescriptions.filter((e=>"video"===e.media.mediaType&&"recvonly"===e.attributes.direction));else if(s=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&"video"===t.media.mediaType&&Br(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction)),s.length!==e.length)return rO.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;if(CN("USE_PUB_RTX")||CN("USE_SUB_RTX")){const e=TM(o,this.rtpCapabilities.recv.videoCodecs);o.push(...e)}this._rtpCapabilities.recv.videoCodecs=o;const c=this.localCapabilities.send,l=this.rtpCapabilities.recv,d=CM(iU.VIDEO,l,c,n);return s.forEach((e=>{const t=d.map((e=>e.payloadType.toString(10)));rO.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from"),e.attributes.payloads,"to",d),e.attributes.payloads=d,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,n,r,i){const o=this.rtpCapabilities.send,a=e===iU.VIDEO?o.videoCodecs:o.audioCodecs,s=e===iU.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let l={media:{mediaType:e,port:QF,protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};l=this.mungSendMediaDesc(l,i);const d=this.findFirstClosedMedia(e);if(d){const e=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,n){const r=dx(e);return fM(r),pM(r,t),mM(r,t),gM(r),vM(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=dx(e);return vM(n,t,this.localCapabilities.recv),SM(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>tR()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}(uj(uj({},e),{},{localCapabilities:this.localCapabilities}),this.supportAV1RtpSpec),e.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const r=this.remoteSDP.toString(),i=RM(this.initialOffer.sdp,this.extension),o=this.logSDPExchange(i||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),null==o||o(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r});const a=this.peerConnection.getTransceivers()[0];if(null!=a&&a.receiver&&this.tryBindTransportEvents(a.receiver),CN("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia(CN("PRELOAD_MEDIA_COUNT"));const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}const{preSSRCs:s}=e;if(Array.isArray(s)&&s.length>0){const{mids:e}=this.remoteSDP.batchSend(s.map((e=>({kind:e.kind,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtx}],mslabel:e.mslabel}))));e.forEach(((e,t)=>{this.preSSRCMap.set(s[t].ssrcId,e)})),await IM(this.peerConnection,this.remoteSDP,this.extension),rO.debug("[".concat(this.store.clientId,"] [P2PConnection] pre-batchReceive exchange SDP."))}}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}var t,n}async updateRemoteConnect(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateRemoteConnect before remote SDP created");const{rtpCapabilities:t}=e;this.remoteSDP.updateRemoteRTPCapabilities(t),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const{preSSRCs:n}=e;if(Array.isArray(n)&&n.length>0){const{mids:e}=this.remoteSDP.batchSend(n.map((e=>Object.assign({},{kind:e.kind,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtx}],mslabel:e.mslabel}))));e.forEach(((e,t)=>{this.preSSRCMap.set(n[t].ssrcId,e)}))}await IM(this.peerConnection,this.remoteSDP,this.extension),rO.debug("[P2PConnection] updateRemoteRTPCapabilities by exchanging SDP.")}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.updateRemoteConnect failed; ".concat(e.toString()))}}send(e,t,n){var r=this;return qT((function*(){const i=yield XT(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const o=[],a=eM();e.forEach((e=>{const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,uj({direction:"sendonly"},"video"===e.trackMediaType&&r.supportAV1RtpSpec&&a?{sendEncodings:[{scalabilityMode:a}]}:{}));o.push(t),e._updateRtpTransceiver(t)})),tR()&&!0===CN("SIMULCAST")&&(yield XT(r.applySimulcastForFirefox(o,e)));const s=yield XT(r.peerConnection.createOffer()),c=r.remoteSDP.predictReceivingMids(e.length),l=r.mungSendOfferSDP(s.sdp,e,c),d=DN(l),u=c.map((e=>{const t=d.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return dM(t,CN("USE_PUB_RTX"))}));let A;try{A=yield u}catch(i){A=[],r.remoteSDP.receive(e,t,n,A);const o=r.remoteSDP.toString();throw yield XT(r.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield XT(r.peerConnection.setRemoteDescription({type:"answer",sdp:o})),yield XT(r.stopSending(c,!0)),i}r.remoteSDP.receive(e,t,n,A);const h=r.remoteSDP.toString(),p=r.logSDPExchange(l,"offer","local","send");return yield XT(r.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield XT(r.applySimulcastEncodings(o,e)),yield XT(r.applySendEncodings(o,e)),null==p||p(h),yield XT(r.peerConnection.setRemoteDescription({type:"answer",sdp:h})),o.map(((e,t)=>{const n=c[t];return{localSSRC:u[t],id:n,transceiver:e}}))}catch(e){throw e instanceof TR?e:new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(e);if(n&&"open"===n.readyState)rO.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const t=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if("number"!=typeof t)throw new Error("create DataChannel error, because cannot get dc id");n=this.peerConnection.createDataChannel("datastream-channel",{id:t,negotiated:!0,ordered:!1,maxRetransmits:CN("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(e,n)}t.forEach((e=>{e._updateOriginDataChannel(n)}));const{needExchangeSDP:r}=this.remoteSDP.sendDataChannel();if(r){const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),rO.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else rO.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(e){throw e instanceof TR?e:new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return t&&(t.id&&this.recoveredDataChannelIds.push(t.id),t.close()),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof TR?e:new TR(CR.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(e.toString()))}}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{var t;tj(this.id+e.mid,this),e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);o&&(await IM(this.peerConnection,this.remoteSDP,this.extension),rO.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP.")));const a=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!a)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:a.receiver.track,id:i,transceiver:a}}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:n}=this.remoteSDP.batchSend(e);return n&&(await IM(this.peerConnection,this.remoteSDP,this.extension),rO.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))),t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e,transceiver:t}}))}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");e.forEach((e=>{Array.from(this.preSSRCMap.entries()).some((t=>{let[n,r]=t;if(r===e)return this.preSSRCMap.delete(n),!0}))})),this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async(e,t)=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec(e,this.remoteCodecs,this.store.codec);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return qT((function*(){const n=yield XT(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");const n=pO().supportPCSetConfiguration,r=CN("FORCE_TURN_TCP")||t.forceTurn;if(e===oU.RELAY&&!n)return;if(n&&!r){const n=e===oU.RELAY?"relay":"all",r=t.peerConnection.getConfiguration();r.iceTransportPolicy!==n&&(rO.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(r.iceTransportPolicy,"] to [").concat(n,"]")),r.iceTransportPolicy=n,t.peerConnection.setConfiguration(r))}t.remoteSDP.updateCandidates(e);const i=yield XT(t.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const o=lM(i.sdp),{remoteIceParameters:a}=yield o.iceParameters;t.remoteSDP.restartICE(a);const s=t.remoteSDP.toString(),c=t.logSDPExchange(i.sdp||"","offer","local","restartICE");t.store.descriptionStart(),yield XT(t.peerConnection.setLocalDescription(i)),null==c||c(s),yield XT(t.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(e){rO.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}async extendCandidate(){if(!this.remoteSDP||this.isFirstConnected)return;const e=await this.mutex.lock("From P2PConnection.extendCandidate");try{this.remoteSDP.updateCandidates(oU.TCP_RELAY),await IM(this.peerConnection,this.remoteSDP,this.extension)}catch(e){rO.warning("[".concat(this.store.clientId,"] extend candidate failed, abort operation"),e)}finally{e()}}close(){var e;this.peerConnection.getTransceivers().forEach((e=>{tj(this.id+e.mid,this)})),this.preSSRCMap.clear(),this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return uj(uj({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?tR()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:uj(uj({},Xx),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:uj(uj({},Xx),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;"connected"===this.peerConnection.connectionState&&(this.isFirstConnected=!0),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidateerror=e=>{if(e&&(e.errorCode||e.errorText)){var t;const n="code: ".concat(e.errorCode,", message: ").concat(e.errorText),r=e.port?"local: ".concat(e.port):"";rO.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICECandidateError(").concat(n,"), url: ").concat(e.url||"",", host_candidate:").concat(r)),null===(t=this.onICECandidateError)||void 0===t||t.call(this,n)}},this.peerConnection.onicegatheringstatechange=e=>{e&&e.target&&"iceGatheringState"in e.target&&rO.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] RTCPeerConnection.onicegatheringstatechange(").concat(e.target.iceGatheringState,")"))},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,rO.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,rO.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),CN("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const n={iceServers:[]};return t.iceServers?n.iceServers=t.iceServers:t.turnServer&&(YR(t.turnServer.servers)?n.iceServers=t.turnServer.servers:CN("NEW_TURN_MODE")&&n.iceServers?(CN("USE_TURN_SERVER_OF_GATEWAY")?t.turnServer.serversFromGateway&&n.iceServers.push(...e.newTurnServerConfigToIceServers(t.turnServer.serversFromGateway)):n.iceServers.push(...e.newTurnServerConfigToIceServers(t.turnServer.servers)),CN("NEW_FORCE_TURN")&&(n.iceTransportPolicy="relay")):"off"!==t.turnServer.mode&&(n.iceServers&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),CN("USE_TURN_SERVER_OF_GATEWAY")&&n.iceServers&&t.turnServer.serversFromGateway&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),CN("FORCE_TURN_TCP")?n.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(n.iceTransportPolicy="relay")})))),CN("ENABLE_ENCODED_TRANSFORM")&&pO().supportWebRTCEncodedTransform&&(n.encodedInsertableStreams=!0),n}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(KU(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!CN("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}static newTurnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{const n=CN("NEW_TURN_MODE");1===n?t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":3478?transport=udp")}):2===n?t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":3478?transport=tcp")}):3===n?t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(KU(e.turnServerURL),":443?transport=tcp")}):4===n&&(t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":3478?transport=udp")}),t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":3478?transport=tcp")}),t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(KU(e.turnServerURL),":443?transport=tcp")}))})),t}tryBindTransportEvents(e){const t=e.transport;if(t){this.transportEventReceiver=e,t.onstatechange=()=>{var e;null!=t&&t.state&&(null===(e=this.onDTLSTransportStateChange)||void 0===e||e.call(this,t.state))},t.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const n=t.iceTransport;n&&(n.onstatechange=()=>{const e=null==t?void 0:t.iceTransport.state;var n;e&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,e))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){const{local:e,remote:t}=n.getSelectedCandidatePair();rO.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:t.type,protocol:t.protocol,address:t.address,port:t.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n,r;if(!t){const n=this.peerConnection.getSenders();t=n.find((t=>t.track===e._mediaStreamTrack))}if(!t)return rO.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return rO.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!pO().supportSetRtpSenderParameters)return rO.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const i={},o={};switch(e._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;case"balanced":i.degradationPreference="balanced"}const a=function(e,t){return e.getTransceivers().find((e=>e.sender.track===t||e.receiver.track===t))}(this.peerConnection,e._mediaStreamTrack),s=Kk(e);if($F(e)&&a&&t&&s&&this.getLocalVideoStats&&Br(n=["vp8","vp9"]).call(n,this.store.codec)){var c;const n=i.degradationPreference||(Br(c=e._hints).call(c,PO.CUSTOM_TRACK)?CN("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");!function(e,t,n,r,i,o){if(tj(e,n),i(t),"balanced"!==r&&"maintain-framerate"!==r&&"maintain-resolution"!==r)return;let a=-1;qF(e,t);const s=window.setInterval((()=>{const s=ej.get(e);if(!CN("ENABLE_AG_ADAPTATION")||!s)return tj(e,n),void i(t);const c=o();if(c.sendPackets>0&&c.OutgoingAvailableBandwidth>0){if(-1===a)return void(a=Date.now());if(Date.now()-a<1e3)return;const o=c.sendFrameRate,l=c.OutgoingAvailableBandwidth,[d,u]=XF(e,o,l,s.adaptationConfig,t,r);u&&(n.qualityLimitationReason=u),d&&s.adaptationConfig.scale!==d.scale&&(rO.debug("[".concat(e,"] applyAdaptation: ").concat(n.qualityLimitationReason,"\n           sendFps ").concat(o,", bwe ").concat(l,", switch from ").concat(s.adaptationConfig.scale," to ").concat(d.scale," ")),s.adaptationConfig=ZF(ZF({},s.adaptationConfig),d),i(d))}}),CN("CHECK_LOCAL_STATS_INTERVAL")),c=ZF({},t);ej.set(e,{timer:s,adaptationConfig:c,originConfig:t,adaptationFunc:i}),rO.debug("[".concat(e,"] start adaptation, originConfig: ").concat(JSON.stringify(t),", degradationPreference: ").concat(r))}(this.id+a.mid,s,this,n,(e=>{t&&this.updateAdaptation(t,e)}),this.getLocalVideoStats.bind(this))}if(e._encoderConfig){var l;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(o.maxBitrate=1e3*t),(Br(l=e._hints).call(l,PO.LOW_STREAM)||e.isUseScaleResolutionDownBy)&&(n&&(o.maxFramerate=WU(n)),r&&r>=1&&(o.scaleResolutionDownBy=r))}const{maxFramerate:d}=CN("ENCODER_CONFIG_LIMIT");if(d&&"number"==typeof d&&(o.maxFramerate=o.maxFramerate?Math.min(o.maxFramerate,d):d),CN("DSCP_TYPE")&&yR()){var u;const e=CN("DSCP_TYPE");Br(u=["very-low","low","medium","high"]).call(u,e)&&(o.networkPriority=e)}const A=t.getParameters(),h=null===(r=A.encodings)||void 0===r?void 0:r[0];tR()&&!h&&(i.encodings=[o]),h&&Object.assign(h,o),Object.assign(A,i),rO.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(A.encodings))),await t.setParameters(A),await async function(e,t,n){try{var r;if(!pO().supportSetRtpSenderParameters)return;if(!function(e){return"vp9"===e||"av1"===e}(e)||!CN("ENABLE_SVC"))return;const i={},o={},a=t.getParameters(),s=null===(r=a.encodings)||void 0===r?void 0:r[0];o.scalabilityMode=eM(n),s&&Object.assign(s,o),Object.assign(a,i),await t.setParameters(a),rO.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: ".concat(JSON.stringify(a.encodings)))}catch(e){rO.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed",e)}}(this.store.codec,t,CN("SVC_MODE"))}async updateAdaptation(e,t){var n,r;if(!e)return rO.debug("[updateAdaptation] no rtpSender found");if(!pO().supportSetRtpSenderParameters)return rO.debug("[updateAdaptation] Browser not support set rtp-sender parameters");const i={},{bitrateMax:o,frameRate:a,scaleResolutionDownBy:s}=t;o&&(i.maxBitrate=1e3*o),a&&(i.maxFramerate=WU(a)),s&&s>=1&&Br(n=["vp8","vp9"]).call(n,this.store.codec)&&(i.scaleResolutionDownBy=s);const c=e.getParameters(),l=null===(r=c.encodings)||void 0===r?void 0:r[0];l&&Object.assign(l,i),Object.assign(c,{});try{await e.setParameters(c),rO.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(c.encodings)))}catch(t){!("transport"in e)||e.transport&&"connected"===e.transport.state?"connected"!==this.peerConnectionState?rO.debug("[updateAdaptation] peerConnection not connected}"):rO.debug("[updateAdaptation] updateRtpSenderEncodings failed",t):rO.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(e,t){try{if(!pO().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];i instanceof IB&&!this.isVP8Simulcast(i)&&await this.updateRtpSenderEncodings(i,r.sender)}}catch(e){rO.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=DN(e);return t.forEach(((e,t)=>{const i=n[t],o=r.mediaDescriptions.find((e=>e.attributes.mid===i));o&&(pM(o,e),yM(o,e,this.store.codec))})),UN(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let s=0;s<e.length;s++){var n,r,i,o,a;const c=e[s],l=t[s];if(l instanceof IB&&!Br(n=l._hints).call(n,PO.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=l._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(a=l._scalabilityMode)||void 0===a?void 0:a.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!tR()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof IB&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const a=t.sender.getParameters();await t.sender.setParameters(Object.assign(a,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return!!(e instanceof IB&&CN("SIMULCAST")&&"vp8"===this.store.codec&&!Br(t=e._hints).call(t,PO.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(CN("SDP_LOGGING"))return rO.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return t&&0!==t.length?t[0].ssrcId:void 0}setConfiguration(t){if(pO().supportPCSetConfiguration){const n=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(n)}}},vD(lj.prototype,"updateRemoteRTPCapabilities",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"updateRemoteRTPCapabilities"),lj.prototype),vD(lj.prototype,"connect",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"connect"),lj.prototype),vD(lj.prototype,"updateRemoteConnect",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"updateRemoteConnect"),lj.prototype),vD(lj.prototype,"createDataChannels",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"createDataChannels"),lj.prototype),vD(lj.prototype,"receive",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"receive"),lj.prototype),vD(lj.prototype,"batchReceive",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"batchReceive"),lj.prototype),vD(lj.prototype,"stopReceiving",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"stopReceiving"),lj.prototype),vD(lj.prototype,"muteRemote",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"muteRemote"),lj.prototype),vD(lj.prototype,"unmuteRemote",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"unmuteRemote"),lj.prototype),vD(lj.prototype,"muteLocal",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"muteLocal"),lj.prototype),vD(lj.prototype,"unmuteLocal",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"unmuteLocal"),lj.prototype),vD(lj.prototype,"close",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"close"),lj.prototype),vD(lj.prototype,"updateEncoderConfig",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"updateEncoderConfig"),lj.prototype),vD(lj.prototype,"updateSendParameters",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"updateSendParameters"),lj.prototype),vD(lj.prototype,"replaceTrack",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"replaceTrack"),lj.prototype),vD(lj.prototype,"updateAdaptation",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"updateAdaptation"),lj.prototype),vD(lj.prototype,"getRemoteSSRC",[hj],Object.getOwnPropertyDescriptor(lj.prototype,"getRemoteSSRC"),lj.prototype),lj);function hj(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return await r.apply(this,o)}finally{n()}},n}function pj(e,t){let n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=WU(t.width),r.height=WU(t.height);const i=WU(t.framerate||15);document.body.append(n),document.body.append(r);let o=e._mediaStreamTrack;n.srcObject=new MediaStream([o]),n.play();const a=r.getContext("2d");if(!a)throw new AO(CR.UNEXPECTED_ERROR,"can not get canvas context");const s=pO(),c=r.captureStream(s.supportRequestFrame?0:i).getVideoTracks()[0];c.canvas||(c.canvas=r),r.startCapture=()=>{if(!n)return r.stopCapture&&r.stopCapture();if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){const e=n.videoWidth,t=n.videoHeight/e,i=r.width*t;Math.abs(i-r.height)>=2&&(rO.debug("adjust low stream resolution","".concat(r.width,"x").concat(r.height," -> ").concat(r.width,"x").concat(i)),r.height=i)}a.drawImage(n,0,0,r.width,r.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,n.srcObject=new MediaStream([o]))},r.stopCapture=hk((()=>r.startCapture&&r.startCapture()),i);const l=c.stop;return c.stop=()=>{l.call(c),n&&(n.remove(),n.srcObject=null,n=null),r&&(r.width=0,r.remove(),r.stopCapture&&r.stopCapture(),r.startCapture=void 0,r.stopCapture=void 0,r=null),rO.debug("clean low stream renderer")},c}var fj=function(e){return e[e.Video_Send_Qp_Sum=2143]="Video_Send_Qp_Sum",e[e.Video_Send_Freeze=2082]="Video_Send_Freeze",e[e.Video_Recv_Qp_Sum=2144]="Video_Recv_Qp_Sum",e[e.Video_Recv_Freeze=2084]="Video_Recv_Freeze",e[e.Video_Render_Freeze_Time=2109]="Video_Render_Freeze_Time",e[e.Video_Render_Freeze_Time_Render=2147]="Video_Render_Freeze_Time_Render",e[e.Video_Render_Freeze_Time_Render2=2223]="Video_Render_Freeze_Time_Render2",e[e.Audio_Recv_Freeze=2083]="Audio_Recv_Freeze",e[e.Video_Send_Type=2225]="Video_Send_Type",e}(fj||{}),mj=function(e){return e[e.Video_Send_Retransmit=2062]="Video_Send_Retransmit",e[e.Video_Send_Target_Encoded=2064]="Video_Send_Target_Encoded",e[e.Video_Send_Actual_Encoded=2060]="Video_Send_Actual_Encoded",e[e.Video_Send_Transmit=2066]="Video_Send_Transmit",e[e.Video_Send_Bandwidth=2061]="Video_Send_Bandwidth",e[e.Video_Capture_Height=2033]="Video_Capture_Height",e[e.Video_Capture_Width=2035]="Video_Capture_Width",e[e.Video_Capture_Frame_Rate=2034]="Video_Capture_Frame_Rate",e[e.Video_Send_Low_Height=2073]="Video_Send_Low_Height",e[e.Video_Send_Low_Frame_Rate=2075]="Video_Send_Low_Frame_Rate",e[e.Video_Send_Low_Width=2077]="Video_Send_Low_Width",e[e.Video_Send_Low_Bitrate=2069]="Video_Send_Low_Bitrate",e[e.Video_Send_Low_Package_Lost=2070]="Video_Send_Low_Package_Lost",e[e.Video_Send_Low_Package_Rate=2071]="Video_Send_Low_Package_Rate",e[e.Video_Send_Frame_Rate=2002]="Video_Send_Frame_Rate",e[e.Video_Send_Width=2003]="Video_Send_Width",e[e.Video_Send_Height=2004]="Video_Send_Height",e[e.Video_Send_Disabled=2095]="Video_Send_Disabled",e[e.Video_Send_Adaptation=2032]="Video_Send_Adaptation",e[e.Video_Send_Player_Status=2128]="Video_Send_Player_Status",e[e.Video_Send_Nacks=2009]="Video_Send_Nacks",e[e.Video_Send_Plis=2010]="Video_Send_Plis",e[e.Video_Send_Firs=2011]="Video_Send_Firs",e[e.Video_Send_Avg_Encode=2007]="Video_Send_Avg_Encode",e[e.Video_Send_Huge_Frame_Sent=2174]="Video_Send_Huge_Frame_Sent",e[e.Video_Send_Bytes_Retransmit=2173]="Video_Send_Bytes_Retransmit",e[e.Video_Send_Packages_Retransmit=2172]="Video_Send_Packages_Retransmit",e[e.Video_Send_Key_Frames_Encoded=2207]="Video_Send_Key_Frames_Encoded",e[e.Video_Send_Bitrate=2012]="Video_Send_Bitrate",e[e.Video_Send_Package_Rate=2031]="Video_Send_Package_Rate",e[e.Video_Send_Package_Lost=2005]="Video_Send_Package_Lost",e[e.Audio_Capture_PCM_Level=2104]="Audio_Capture_PCM_Level",e[e.Audio_Send_Level=2038]="Audio_Send_Level",e[e.Audio_Send_Bitrate=2039]="Audio_Send_Bitrate",e[e.Audio_Send_Package_Rate=2040]="Audio_Send_Package_Rate",e[e.Audio_Send_AEC_Return_Loss=2041]="Audio_Send_AEC_Return_Loss",e[e.Audio_Send_AEC_Return_Loss_Enhancement=2042]="Audio_Send_AEC_Return_Loss_Enhancement",e[e.Audio_Send_Freeze=2081]="Audio_Send_Freeze",e[e.Audio_Send_Disabled=2096]="Audio_Send_Disabled",e[e.Audio_Send_Bytes_Retransmit=2179]="Audio_Send_Bytes_Retransmit",e[e.Audio_Send_Packages_Retransmit=2180]="Audio_Send_Packages_Retransmit",e[e.Video_Recv_Height=2019]="Video_Recv_Height",e[e.Video_Recv_Width=2018]="Video_Recv_Width",e[e.Video_Recv_Frame_Rate_Output=2155]="Video_Recv_Frame_Rate_Output",e[e.Video_Recv_Jitter_Buffer=2023]="Video_Recv_Jitter_Buffer",e[e.Video_Recv_Current_Delay=2024]="Video_Recv_Current_Delay",e[e.Video_Recv_Nacks=2026]="Video_Recv_Nacks",e[e.Video_Recv_Plis=2027]="Video_Recv_Plis",e[e.Video_Recv_Firs=2028]="Video_Recv_Firs",e[e.Video_Recv_Disabled=2101]="Video_Recv_Disabled",e[e.Video_Recv_Player_Status=2129]="Video_Recv_Player_Status",e[e.Video_Recv_I_Frame_Delay=2149]="Video_Recv_I_Frame_Delay",e[e.Video_Render_Frame_Rate_Render=2022]="Video_Render_Frame_Rate_Render",e[e.Video_Render_Freeze_Duration=2156]="Video_Render_Freeze_Duration",e[e.Audio_Render_Level=2043]="Audio_Render_Level",e[e.Audio_Render_Freeze_Time_80ms=2226]="Audio_Render_Freeze_Time_80ms",e[e.Audio_Render_Freeze_Time_200ms=2227]="Audio_Render_Freeze_Time_200ms",e[e.Audio_Render_Freeze_Samples_80ms=2228]="Audio_Render_Freeze_Samples_80ms",e[e.Audio_Render_Freeze_Samples_200ms=2229]="Audio_Render_Freeze_Samples_200ms",e[e.Audio_Recv_PCM_Level=2105]="Audio_Recv_PCM_Level",e[e.Audio_Recv_Disabled=2102]="Audio_Recv_Disabled",e[e.Audio_Recv_Jitter_Buffer=2054]="Audio_Recv_Jitter_Buffer",e[e.Audio_Recv_Current_Delay=2047]="Audio_Recv_Current_Delay",e[e.Audio_Recv_Player_Status=2130]="Audio_Recv_Player_Status",e[e.Audio_Recv_Bitrate=2044]="Audio_Recv_Bitrate",e[e.Audio_Recv_Concealed_Samples=2148]="Audio_Recv_Concealed_Samples",e[e.Audio_Recv_Total_Samples_Received=2224]="Audio_Recv_Total_Samples_Received",e}(mj||{}),gj=function(e){return e[e.Video_Render_Frame_Rate_Decode=2021]="Video_Render_Frame_Rate_Decode",e[e.Video_Recv_Frame_Rate=2020]="Video_Recv_Frame_Rate",e[e.Video_Recv_Frame_Dropped=2181]="Video_Recv_Frame_Dropped",e[e.Video_Recv_Bytes_Retransmit=2175]="Video_Recv_Bytes_Retransmit",e[e.Video_Recv_Packages_Retransmit=2176]="Video_Recv_Packages_Retransmit",e[e.Video_Recv_Packages_Discarded=2198]="Video_Recv_Packages_Discarded",e[e.Video_Recv_Avg_Decode=2200]="Video_Recv_Avg_Decode",e[e.Video_Recv_Avg_Processing_Delay=2202]="Video_Recv_Avg_Processing_Delay",e[e.Video_Recv_Avg_Assembly_Time=2203]="Video_Recv_Avg_Assembly_Time",e[e.Video_Recv_Avg_Inter_Frame_Delay=2204]="Video_Recv_Avg_Inter_Frame_Delay",e[e.Video_Recv_Key_Frames_Decoded=2206]="Video_Recv_Key_Frames_Decoded",e[e.Video_Recv_Package_Lost=2014]="Video_Recv_Package_Lost",e[e.Video_Recv_Bitrate=2029]="Video_Recv_Bitrate",e[e.Video_Recv_Package_Rate=2078]="Video_Recv_Package_Rate",e[e.Audio_Recv_Jitter=2055]="Audio_Recv_Jitter",e[e.Audio_Recv_Bytes_Retransmit=2178]="Audio_Recv_Bytes_Retransmit",e[e.Audio_Recv_Packages_Retransmit=2177]="Audio_Recv_Packages_Retransmit",e[e.Audio_Recv_Packages_Discarded=2199]="Audio_Recv_Packages_Discarded",e[e.Audio_Recv_Avg_Processing_Delay=2201]="Audio_Recv_Avg_Processing_Delay",e[e.Audio_Recv_Package_Rate=2046]="Audio_Recv_Package_Rate",e[e.Audio_Recv_Package_Lost=2045]="Audio_Recv_Package_Lost",e}(gj||{}),vj=function(e){return e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE",e[e.STATS_UPDATE_INTERVAL=2205]="STATS_UPDATE_INTERVAL",e}(vj||{}),yj=function(e){return e[e.RTC_PEER_CONNECTION_STATE=2219]="RTC_PEER_CONNECTION_STATE",e}(yj||{});const bj=1e3,Ej=6,wj=3,_j=Math.max(Ej,wj);function Sj(e,t,n){null!=n&&Number.isFinite(n)&&(e[t]=Math.round(Math.max(0,n)))}function Cj(e){const t={[vj.CONN_TYPE]:0,[vj.RTT]:e.rtt,[vj.STATS_UPDATE_INTERVAL]:e.updateInterval?Math.round(Math.max(0,e.updateInterval)):void 0};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{const n=e.selectedCandidatePair.localCandidate.relayProtocol;"udp"===n&&(t[vj.CONN_TYPE]=1),"tcp"===n&&(t[vj.CONN_TYPE]=3),"tls"===n&&(t[vj.CONN_TYPE]=4);break}case"srflx":t[vj.CONN_TYPE]=2;break;case"unknown":t[vj.CONN_TYPE]=5;break;default:t[vj.CONN_TYPE]=0}return t}function Tj(e){let t=0;switch(e){case"none":t=0;break;case"cpu":t=1;break;case"bandwidth":t=2;break;case"other":t=3}return t}class Ij extends QR{constructor(e){super(),uC(this,"store",void 0),uC(this,"uploadWRTCStatsTimer",void 0),uC(this,"uploadOutboundDenoiserStatsTimer",void 0),uC(this,"uploadExtStatsTimer",void 0),uC(this,"uploadExtUsageStatsTimer",void 0),uC(this,"uploadInboundExtStatsTimer",void 0),uC(this,"requestStats",void 0),uC(this,"requestTransportStats",void 0),uC(this,"requestLocalMedia",void 0),uC(this,"requestRemoteMedia",void 0),uC(this,"requestAllTracks",void 0),uC(this,"requestVideoIsReady",void 0),uC(this,"requestUploadStats",void 0),uC(this,"requestUpload",void 0),uC(this,"uploadOutboundStarted",!1),uC(this,"uploadInboundStarted",!1),uC(this,"uploadTransportStarted",!1),uC(this,"uploadBaseStatsStarted",!1),uC(this,"uploadExtensionUsageStarted",!1),uC(this,"lastRecvStats",void 0),uC(this,"lastSendStats",void 0),uC(this,"lastRefRecvStats",void 0),uC(this,"lastRefSendStats",void 0),uC(this,"lastNormalRecvStats",void 0),uC(this,"lastNormalSendStats",void 0),uC(this,"needUploadRenderFreezeTime",!0),uC(this,"lastUploadCompensateTime",-1),uC(this,"uploadCompensateDeltaTime",0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;const t=e%wj==0,n=e%Ej==0;let r,i;if(this.uploadTransportStarted&&(r=this.requestStats(),this.store.useP2P&&(i=this.requestStats(!0))),!r&&this.uploadOutboundStarted&&(r=this.requestStats()),!i&&this.uploadInboundStarted&&(i=this.requestStats(!0)),r||i){var o;const a={};if(this.uploadTransportStarted&&r){const e=this.getTransportStats(r,i,t);e&&(a.misc=[e])}if(this.uploadOutboundStarted&&r){const e=this.getOutboundStats(r,n?this.lastNormalSendStats:void 0,t?this.lastRefSendStats:void 0,this.lastSendStats);e&&(a.outbound=[e])}if(this.uploadInboundStarted&&i){this.uploadCompensateStats(e);const r=this.getInboundStats(i,n?this.lastNormalRecvStats:void 0,t?this.lastRefRecvStats:void 0,this.lastRecvStats);r&&(a.inbound=r)}const s=null===(o=this.requestTransportStats)||void 0===o?void 0:o.call(this).connectState;s&&(Array.isArray(a.misc)?a.misc[0]&&a.misc[0].addition&&(a.misc[0].addition[yj.RTC_PEER_CONNECTION_STATE]=aN[s]):a.misc=[{addition:{[yj.RTC_PEER_CONNECTION_STATE]:aN[s]}}]),this.requestUploadStats(a)}this.lastRecvStats=i,this.lastSendStats=r,n&&(this.lastNormalRecvStats=i,this.lastNormalSendStats=r),t&&(this.lastRefRecvStats=i,this.lastRefSendStats=r)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;this.uploadBaseStatsStarted=!0;let e=1;this.uploadWRTCStatsTimer=window.setInterval((()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted){if(this.uploadBaseStatsStarted){var t,n;const e=null===(t=this.requestTransportStats)||void 0===t?void 0:t.call(this);return void(e&&(null===(n=this.requestUploadStats)||void 0===n||n.call(this,{misc:[{addition:{[yj.RTC_PEER_CONNECTION_STATE]:aN[e.connectState]}}]})))}return this.stopUploadWRTCStats()}this.uploadWRTCStats(e),++e===_j+1&&(e=1)}),bj)}uploadCompensateStats(e){if(!this.requestStats||!this.requestUploadStats||!this.requestRemoteMedia)return;const t=e%wj==0&&this.needUploadRenderFreezeTime;if(!this.uploadInboundStarted||!t)return;if(-1===this.lastUploadCompensateTime)return void(this.lastUploadCompensateTime=Date.now());const n=Math.max(-6e3,Date.now()-this.lastUploadCompensateTime-6e3);if(this.uploadCompensateDeltaTime+=n,this.lastUploadCompensateTime=Date.now(),this.uploadCompensateDeltaTime<6e3)return;const r=Math.min(Math.floor(this.uploadCompensateDeltaTime/6e3),10);this.uploadCompensateDeltaTime-=6e3*r;const i=this.requestStats(!0);new Array(r).fill(0).forEach((()=>{if(!this.requestStats||!this.requestUploadStats||!this.requestRemoteMedia)return;const e={};if(this.uploadInboundStarted&&i){const t=this.requestRemoteMedia()||[],n=[];t.forEach((e=>{let[t,r]=e;const o={peer:t.uid};if(t._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(t._videoSSRC)&&r.has(iU.VIDEO)&&t.videoTrack){const e=function(e,t,n){if(!t.videoRecv.find((t=>t.ssrc===e)))return;const r={};if(n&&n._player){const e=n._player,{renderFreezeAccTime2:t,videoElementStatus:i}=e;if("visible"===KB.visibility&&i===JO.PLAYING&&pO().supportRequestVideoFrameCallback){const n=Math.min(6e3,t);e.renderFreezeAccTime2=Math.max(0,t-n),Sj(r,fj.Video_Render_Freeze_Time_Render2,n),CN("USE_NEW_RENDER_FREEZE_TIME")&&Sj(r,fj.Video_Render_Freeze_Time_Render,n)}}return r}(t._videoSSRC,i,t.videoTrack);e&&(o.video=e)}o.video&&n.push(o)})),n.length>0&&(e.inbound=n,this.requestUploadStats(e))}}))}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0),this.lastRefSendStats&&(this.lastRefSendStats.videoSend=[],this.lastRefSendStats.audioSend=[],this.lastRefSendStats=void 0),this.lastRefRecvStats&&(this.lastRefRecvStats.videoRecv=[],this.lastRefRecvStats.audioRecv=[],this.lastRefRecvStats=void 0),this.lastNormalSendStats&&(this.lastNormalSendStats.videoSend=[],this.lastNormalSendStats.audioSend=[],this.lastNormalSendStats=void 0),this.lastNormalRecvStats&&(this.lastNormalRecvStats.videoRecv=[],this.lastNormalRecvStats.audioRecv=[],this.lastNormalRecvStats=void 0),this.lastUploadCompensateTime=-1,this.uploadCompensateDeltaTime=0,this.needUploadRenderFreezeTime=!0}getTransportStats(e,t,n){if(!this.requestStats)return;if(!n)return null==e.rtt?void 0:{addition:{[vj.RTT]:e.rtt,[vj.CONN_TYPE]:void 0,[vj.STATS_UPDATE_INTERVAL]:e.updateInterval||void 0}};const r=Cj(e);if(this.store.useP2P){if(t){const e=Cj(t);r[vj.CONN_TYPE]+=e[vj.CONN_TYPE]<<3}r[vj.CONN_TYPE]+=110}else r[vj.CONN_TYPE]+=100;return{addition:r}}getOutboundStats(e,t,n,r){if(!this.requestUploadStats||!this.requestLocalMedia)return;const i=this.requestLocalMedia();if(!i||0===i.length)return;let o,a,s;return i.forEach((r=>{let[i,{track:c,ssrcs:l}]=r;switch(i){case cU.LocalVideoLowTrack:case cU.LocalVideoTrack:if(i===cU.LocalVideoTrack){const r=function(e,t,n,r,i){const o=t.videoSend.find((t=>t.ssrc===e));if(!o)return;const a={},{sentFrame:s,inputFrame:c}=o;if(r&&(Sj(a,fj.Video_Send_Qp_Sum,o.qpSumPerFrame),c&&s)){var l;const e=c.frameRate,t=s.frameRate;a[fj.Video_Send_Freeze]=function(e,t){let n=!0;return n=!(e<=5)&&(e<=10?t<3:e<=20?t<4:t<5),n}(e,t)?1:0,a[fj.Video_Send_Type]="CameraVideoTrack"===n.__className__?0:Br(l=n._hints).call(l,PO.SCREEN_TRACK)?1:2}if(i){switch(s&&(Sj(a,mj.Video_Send_Height,s.height),Sj(a,mj.Video_Send_Width,s.width),Sj(a,mj.Video_Send_Frame_Rate,s.frameRate)),a[mj.Video_Send_Disabled]=n._originMediaStreamTrack&&!n._originMediaStreamTrack.enabled||n._mediaStreamTrack&&!n._mediaStreamTrack.enabled?1:0,o.adaptionChangeReason){case"none":a[mj.Video_Send_Adaptation]=0;break;case"cpu":a[mj.Video_Send_Adaptation]=1;break;case"bandwidth":a[mj.Video_Send_Adaptation]=2;break;case"other":a[mj.Video_Send_Adaptation]=3}let r=0;o.adaptionChangeReason&&(r+=Tj(o.adaptionChangeReason)),t.qualityLimitationReason&&(r+=Tj(t.qualityLimitationReason)<<3),a[mj.Video_Send_Adaptation]=r,a[mj.Video_Send_Player_Status]=$O[n._player?n._player.videoElementStatus:"uninit"],Sj(a,mj.Video_Send_Nacks,o.nacksCount),Sj(a,mj.Video_Send_Plis,o.plisCount),Sj(a,mj.Video_Send_Firs,o.firsCount),Sj(a,mj.Video_Send_Avg_Encode,o.avgEncodeMs),Sj(a,mj.Video_Send_Huge_Frame_Sent,o.hugeFramesSent),Sj(a,mj.Video_Send_Bytes_Retransmit,o.retransmittedBytesSent),Sj(a,mj.Video_Send_Packages_Retransmit,o.retransmittedPacketsSent),Sj(a,mj.Video_Send_Key_Frames_Encoded,o.keyFramesEncoded);const c=i.videoSend.find((t=>t.ssrc===e));if(c){let e=bj*wj;c.timestamp&&o.timestamp&&(e=o.timestamp-c.timestamp),null!=c.packets&&null!=o.packets&&Sj(a,mj.Video_Send_Package_Rate,1e3*(o.packets-c.packets)/e),null!=o.packetsLost&&null!=c.packetsLost&&Sj(a,mj.Video_Send_Package_Lost,o.packetsLost-c.packetsLost),null!=c.bytes&&null!=o.bytes&&Sj(a,mj.Video_Send_Bitrate,8*(o.bytes-c.bytes)/e)}}return a}(l[0].ssrcId,e,c,t,n),i=c&&function(e,t,n,r){const i=t.videoSend.find((t=>t.ssrc===e));if(!i)return null;const o={};if(r){const e=i.inputFrame,t=e&&e.height||n.videoHeight||0,r=e&&e.width||n.videoWidth||0,a=e&&e.frameRate||0;Sj(o,mj.Video_Capture_Height,t),Sj(o,mj.Video_Capture_Width,r),Sj(o,mj.Video_Capture_Frame_Rate,a)}return o}(l[0].ssrcId,e,c,!!n),o=function(e,t){const n={};return t&&(Sj(n,mj.Video_Send_Retransmit,e.bitrate.retransmit),Sj(n,mj.Video_Send_Target_Encoded,e.bitrate.targetEncoded),Sj(n,mj.Video_Send_Actual_Encoded,e.bitrate.actualEncoded),Sj(n,mj.Video_Send_Transmit,e.bitrate.transmit),Sj(n,mj.Video_Send_Bandwidth,e.sendBandwidth)),n}(e,!!n);a=Object.assign({},r,i,o)}else s=function(e,t,n,r){const i=t.videoSend.find((t=>t.ssrc===e));if(!i)return;const o={};if(r){const t=i.sentFrame;t&&(Sj(o,mj.Video_Send_Low_Height,t.height),Sj(o,mj.Video_Send_Low_Width,t.width),Sj(o,mj.Video_Send_Low_Frame_Rate,t.frameRate));const n=r.videoSend.find((t=>t.ssrc===e));if(n){let e=bj*Ej;n.timestamp&&i.timestamp&&(e=i.timestamp-n.timestamp),null!=n.packets&&null!=i.packets&&Sj(o,mj.Video_Send_Low_Package_Rate,1e3*(i.packets-n.packets)/e),null!=i.packetsLost&&null!=n.packetsLost&&Sj(o,mj.Video_Send_Low_Package_Lost,i.packetsLost-n.packetsLost),null!=n.bytes&&null!=i.bytes&&Sj(o,mj.Video_Send_Low_Bitrate,8*(i.bytes-n.bytes)/e)}}return o}(l[0].ssrcId,e,0,n);break;case cU.LocalAudioTrack:o=c&&function(e,t,n,r,i){const o=t.audioSend.find((t=>t.ssrc===e));if(!o)return;const a={};if(i){a[mj.Audio_Send_Disabled]=n._originMediaStreamTrack&&!n._originMediaStreamTrack.enabled||n._mediaStreamTrack&&!n._mediaStreamTrack.enabled?1:0;const t=100*n._source.getAccurateVolumeLevel(),r=o.inputLevel;if(null!=r){const e=Math.ceil(50*Math.log10(100*r+1));Sj(a,mj.Audio_Send_Level,e)}Sj(a,mj.Audio_Capture_PCM_Level,t),Sj(a,mj.Audio_Send_AEC_Return_Loss,o.aecReturnLoss),Sj(a,mj.Audio_Send_AEC_Return_Loss_Enhancement,o.aecReturnLossEnhancement),Sj(a,mj.Audio_Send_Bytes_Retransmit,o.retransmittedBytesSent),Sj(a,mj.Audio_Send_Packages_Retransmit,o.retransmittedPacketsSent),a[mj.Audio_Send_Freeze]=0;const s=i.audioSend.find((t=>t.ssrc===e));if(s){let e=bj*Ej;s.timestamp&&o.timestamp&&(e=o.timestamp-s.timestamp),null!=s.bytes&&null!=o.bytes&&Sj(a,mj.Audio_Send_Bitrate,8*(o.bytes-s.bytes)/e),null!=s.packets&&null!=o.packets&&Sj(a,mj.Audio_Send_Package_Rate,1e3*(o.packets-s.packets)/e)}}return a}(l[0].ssrcId,e,c,0,n)}})),{high:a,low:s,audio:o}}getInboundStats(e,t,n,r){if(!this.requestRemoteMedia)return;const i=this.requestRemoteMedia()||[],o=[];return i.forEach((i=>{let[a,s]=i;const c={peer:a.uid};if(s.has(iU.VIDEO)&&a.videoTrack){const i=a._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(a._videoSSRC)||!1,o=a.videoTrack?function(e,t,n,r,i,o,a,s){const c=t.videoRecv.find((t=>t.ssrc===e));if(!c)return;const l={},{receivedFrame:d,outputFrame:u,decodeFrameRate:A}=c;Sj(l,gj.Video_Render_Frame_Rate_Decode,A),c.framesRateFirefox&&Sj(l,gj.Video_Recv_Frame_Rate,c.framesRateFirefox),d&&Sj(l,gj.Video_Recv_Frame_Rate,d.frameRate),Sj(l,gj.Video_Recv_Frame_Dropped,c.framesDroppedCount),Sj(l,gj.Video_Recv_Bytes_Retransmit,c.retransmittedBytesReceived),Sj(l,gj.Video_Recv_Packages_Retransmit,c.retransmittedPacketsReceived),Sj(l,gj.Video_Recv_Packages_Discarded,c.packetsDiscarded),Sj(l,gj.Video_Recv_Avg_Decode,c.avgDecodeMs),Sj(l,gj.Video_Recv_Avg_Processing_Delay,c.avgProcessingDelayMs),Sj(l,gj.Video_Recv_Avg_Assembly_Time,c.avgFramesAssembledFromMultiplePacketsMs),Sj(l,gj.Video_Recv_Avg_Inter_Frame_Delay,c.avgInterFrameDelayMs),Sj(l,gj.Video_Recv_Key_Frames_Decoded,c.keyFramesDecoded);const h=s&&s.videoRecv.find((t=>t.ssrc===e));if(h){const e=t.timestamp-s.timestamp||bj;null!=c.packetsLost&&null!=h.packetsLost&&Sj(l,gj.Video_Recv_Package_Lost,c.packetsLost-h.packetsLost),null!=h.bytes&&null!=c.bytes&&Sj(l,gj.Video_Recv_Bitrate,8*(c.bytes-h.bytes)/e),null!=h.packets&&null!=c.packets&&Sj(l,gj.Video_Recv_Package_Rate,1e3*(c.packets-h.packets)/e)}const p=o&&o.videoRecv.find((t=>t.ssrc===e));if(p&&(Sj(l,fj.Video_Recv_Qp_Sum,c.qpSumPerFrame),l[fj.Video_Recv_Freeze]=r&&LF.isRemoteVideoFreeze(n,c,p)?1:0),a){var f;const t=a.videoRecv.find((t=>t.ssrc===e));d?(Sj(l,mj.Video_Recv_Height,d.height),Sj(l,mj.Video_Recv_Width,d.width)):n&&(Sj(l,mj.Video_Recv_Height,n._videoHeight||0),Sj(l,mj.Video_Recv_Width,n._videoWidth||0)),u&&Sj(l,mj.Video_Recv_Frame_Rate_Output,u.frameRate);const r=null===(f=n._player)||void 0===f?void 0:f.rendFrameRate.toFixed(0);if(r&&Sj(l,mj.Video_Render_Frame_Rate_Render,+r),Sj(l,mj.Video_Recv_Jitter_Buffer,c.jitterBufferMs),Sj(l,mj.Video_Recv_Current_Delay,c.currentDelayMs),Sj(l,mj.Video_Recv_Firs,c.firsCount),Sj(l,mj.Video_Recv_Nacks,c.nacksCount),Sj(l,mj.Video_Recv_Plis,c.plisCount),n){l[mj.Video_Recv_Disabled]=n._originMediaStreamTrack.enabled&&n._mediaStreamTrack.enabled?0:1;const e=n._player;if(e){const{freezeTimeCounterList:n,renderFreezeAccTime:r,renderFreezeAccTime2:o,videoElementStatus:a}=e;if(n&&n.length>0&&Sj(l,fj.Video_Render_Freeze_Time,n.splice(0,1)[0]),i&&"visible"===KB.visibility&&a===JO.PLAYING&&pO().supportRequestVideoFrameCallback){const t=Math.min(6e3,o);e.renderFreezeAccTime2=Math.max(0,o-t),Sj(l,fj.Video_Render_Freeze_Time_Render2,t);const n=Math.min(6e3,r);e.renderFreezeAccTime=Math.max(0,r-n),Sj(l,fj.Video_Render_Freeze_Time_Render,CN("USE_NEW_RENDER_FREEZE_TIME")?t:n)}if("number"==typeof c.totalFreezesDuration){const e=t&&t.totalFreezesDuration?c.totalFreezesDuration-t.totalFreezesDuration:c.totalFreezesDuration;Sj(l,mj.Video_Render_Freeze_Duration,1e3*e)}}}if(l[mj.Video_Recv_Player_Status]=$O[n._player?n._player.videoElementStatus:"uninit"],t&&void 0!==c.totalInterFrameDelay&&void 0!==c.totalSquaredInterFrameDelay&&void 0!==t.totalInterFrameDelay&&void 0!==t.totalSquaredInterFrameDelay){const e=c.totalInterFrameDelay-t.totalInterFrameDelay,n=c.totalSquaredInterFrameDelay-t.totalSquaredInterFrameDelay,r=c.framesDecodeCount-t.framesDecodeCount,i=e/r*1e3,o=Math.round(1e3*Math.sqrt((n-Math.pow(e,2)/r)/r));!isNaN(o)&&i+o>Math.max(3*i,i+150)&&(l[mj.Video_Recv_I_Frame_Delay]=o)}}return l}(a._videoSSRC,e,a.videoTrack,!0===i,this.needUploadRenderFreezeTime,t,n,r):void 0;o&&(c.video=o)}if(s.has(iU.AUDIO)&&a.audioTrack){const i=a.audioTrack?function(e,t,n,r,i,o){const a=t.audioRecv.find((t=>t.ssrc===e));if(!a)return;const s={};Sj(s,gj.Audio_Recv_Jitter,a.jitterMs),Sj(s,gj.Audio_Recv_Bytes_Retransmit,a.retransmittedBytesReceived),Sj(s,gj.Audio_Recv_Packages_Retransmit,a.retransmittedPacketsReceived),Sj(s,gj.Audio_Recv_Packages_Discarded,a.packetsDiscarded),Sj(s,gj.Audio_Recv_Avg_Processing_Delay,a.avgProcessingDelayMs);const c=o&&o.audioRecv.find((t=>t.ssrc===e));if(c){const e=bj;null!=a.packets&&null!=c.packets&&Sj(s,gj.Audio_Recv_Package_Rate,1e3*(a.packets-c.packets)/e),null!=a.packetsLost&&null!=c.packetsLost&&Sj(s,gj.Audio_Recv_Package_Lost,a.packetsLost-c.packetsLost)}if(r){const{receivedFrames:e,droppedFrames:t}=a;null!=e&&null!=t&&(s[fj.Audio_Recv_Freeze]=0===(l=e)||100*t/l>20?1:0)}var l;if(i){const t=100*n._source.getAccurateVolumeLevel(),r=a.outputLevel;if(null!=r){const e=Math.ceil(50*Math.log10(100*r+1));Sj(s,mj.Audio_Render_Level,e)}Sj(s,mj.Audio_Recv_PCM_Level,t),n&&(s[mj.Audio_Recv_Disabled]=n._originMediaStreamTrack.enabled&&n._mediaStreamTrack.enabled?0:1),Sj(s,mj.Audio_Recv_Jitter_Buffer,a.jitterBufferMs),Sj(s,mj.Audio_Recv_Current_Delay,a.jitterBufferMs),s[mj.Audio_Recv_Player_Status]=$O[Pk.getPlayerState(n.getTrackId())];const o=i.audioRecv.find((t=>t.ssrc===e));if(o){null!=o.bytes&&null!=a.bytes&&Sj(s,mj.Audio_Recv_Bitrate,8*(a.bytes-o.bytes)/(bj*wj));const e=a.concealedSamples-o.concealedSamples;e>0&&Sj(s,mj.Audio_Recv_Concealed_Samples,e);const t=a.totalSamplesReceived-o.totalSamplesReceived;t>0&&Sj(s,mj.Audio_Recv_Total_Samples_Received,t);const n=a.freezeSamples80-o.freezeSamples80;n>0&&Sj(s,mj.Audio_Render_Freeze_Samples_80ms,n);const r=a.freezeSamples200-o.freezeSamples200;r>0&&Sj(s,mj.Audio_Render_Freeze_Samples_200ms,r);const i=a.freezeMs80-o.freezeMs80;Sj(s,mj.Audio_Render_Freeze_Time_80ms,i<0?0:i);const c=a.freezeMs200-o.freezeMs200;Sj(s,mj.Audio_Render_Freeze_Time_200ms,c<0?0:c)}}return s}(a._audioSSRC,e,a.audioTrack,t,n,r):void 0;i&&(c.audio=i)}(c.video||c.audio)&&o.push(c)})),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,o}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval((()=>{if(!this.requestAllTracks||!this.requestUpload)return;const e=(this.requestAllTracks()||[]).find((e=>e instanceof DP));if(e&&e._external.getDenoiserStats){const t=e._external.getDenoiserStats();t&&this.requestUpload(ID.DENOISER_STATS,t)}}),2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval((()=>{this.requestAllTracks&&this.requestUpload&&this.requestAllTracks().forEach((e=>{e.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRefSendStats&&(this.lastRefSendStats.videoSend=[],this.lastRefSendStats.audioSend=[],this.lastRefSendStats=void 0),this.lastNormalSendStats&&(this.lastNormalSendStats.videoSend=[],this.lastNormalSendStats.audioSend=[],this.lastNormalSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0,this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval((()=>{this.requestUpload&&this.requestRemoteMedia&&(this.requestRemoteMedia()||[]).forEach((e=>{let[t,n]=e;n.has(iU.VIDEO)&&t.videoTrack&&t.videoTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)})),n.has(iU.AUDIO)&&t.audioTrack&&t.audioTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0),this.lastRefRecvStats&&(this.lastRefRecvStats.videoRecv=[],this.lastRefRecvStats.audioRecv=[],this.lastRefRecvStats=void 0),this.lastNormalRecvStats&&(this.lastNormalRecvStats.videoRecv=[],this.lastNormalRecvStats.audioRecv=[],this.lastNormalRecvStats=void 0),this.lastUploadCompensateTime=-1,this.uploadCompensateDeltaTime=0,this.needUploadRenderFreezeTime=!0,this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=void 0)}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const e=new Map;this.uploadExtUsageStatsTimer=window.setInterval((async()=>{const t=Date.now(),n={connectionInterval:CN("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:t};let r=[];const i=this.requestAllTracks&&this.requestAllTracks()||[];for(const e of i)!e.muted&&e.enabled&&(r=r.concat(await e.getProcessorUsage()));const o=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[e,c]of o)c.has(iU.VIDEO)&&e.videoTrack&&(r=r.concat(await e.videoTrack.getProcessorUsage())),c.has(iU.AUDIO)&&e.audioTrack&&(r=r.concat(await e.audioTrack.getProcessorUsage()));if(0===r.length)return;n.details=function(e,t){const n={};for(const{id:a,value:s,level:c,direction:l}of e){var r;const e=null!==(r=t.get(a))&&void 0!==r?r:0,d=2===s?e+CN("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:e;var i,o;t.set(a,d),n[a]?(2===s&&(n[a].value=s),c>n[a].level&&(n[a].level=c),"remote"===l&&(n[a].remoteUidCount+=1),n[a].totalTs=null!==(i=t.get(a))&&void 0!==i?i:0):n[a]={value:s,level:c,remoteUidCount:"local"===l?0:1,totalTs:null!==(o=t.get(a))&&void 0!==o?o:0}}return Object.keys(n).map((e=>{const{level:t,value:r,totalTs:i}=n[e];return{id:e,level:t,value:r,totalTs:i}}))}(r,e);const a=Date.now(),s=a>t?a:t+1;this.requestUpload&&this.requestUpload(ID.EXTENSION_USAGE_STATS,{usageStats:n,sendTs:s})}),CN("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}stopUploadBaseStats(){this.uploadBaseStatsStarted=!1}}const Rj=CN("ICE_RESTART_INTERVAL");let xj=new Map,Nj=new Map,Oj=[oU.UDP_TCP_RELAY,oU.TCP_RELAY,oU.RELAY],kj=CN("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&pO().supportPCSetConfiguration;function Pj(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=xj.get(e.id);n&&(window.clearTimeout(n),xj.delete(e.id));const r=Nj.get(e.id);t&&r&&r.index===Oj.length-1&&(rO.debug("[".concat(e.id,"] reset ICE restart policy")),Nj.delete(e.id))}function Bj(e,t,n){if(0===xj.size&&0===Nj.size&&(Array.isArray(CN("RESTART_SEQUENCE"))&&CN("RESTART_SEQUENCE").length>0&&!function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1){const r=e[n];if(e.filter((e=>e===r)).length!==t.filter((e=>e===r)).length)return!1}return!0}(Oj,CN("RESTART_SEQUENCE"))&&(Oj=CN("RESTART_SEQUENCE").filter((e=>{var t;if(Br(t=Object.values(oU)).call(t,e))return!0})),rO.debug("use reconnection policy from config distribution, queues: ".concat(Oj.join(" => ")))),kj=CN("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&pO().supportPCSetConfiguration),0===Oj.length)return void n();let r,{index:i=0,type:o}=Nj.get(e.id)||{};if(kj&&o===oU.RELAY)return void n();let a=o&&i>=Oj.length-1;if(kj)o=oU.RELAY;else{if(a)return void n();o?(i++,o=Oj[i]):(o=Oj[0],i=0)}rO.debug("[".concat(e.id,"] choose ICE restart policy: ").concat(o,", index: ").concat(i)),t(o),Nj.set(e.id,{index:i,type:o}),r=window.setTimeout((()=>Bj(e,t,n)),Rj),xj.set(e.id,r)}var Lj;function Dj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dj(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mj(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=ZT,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Fj(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Fj(e){function t(e){if(Object(e)!==e)return nh.reject(new TypeError(e+" is not an object."));var t=e.done;return nh.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Fj=function(e){this.s=e,this.n=e.next},Fj.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?nh.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?nh.reject(e):t(n.apply(this.s,arguments))}},new Fj(e)}let jj=(Lj=class extends QR{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(dU.StateChange,t,this._state)}constructor(e,t){super(),uC(this,"isPlanB",void 0),uC(this,"store",void 0),uC(this,"statsUploader",void 0),uC(this,"connection",void 0),uC(this,"localTrackMap",new Map),uC(this,"remoteUserMap",new Map),uC(this,"localDataChannels",[]),uC(this,"remoteDataChannelMap",new Map),uC(this,"pendingLocalTracks",[]),uC(this,"pendingRemoteTracks",[]),uC(this,"pendingLocalDataChannels",[]),uC(this,"pendingRemoteDataChannels",[]),uC(this,"statsCollector",void 0),uC(this,"shouldForwardP2PCreation",void 0),uC(this,"iceFailedCount",0),uC(this,"dtlsFailedCount",0),uC(this,"mutex",void 0),uC(this,"_state",lU.Disconnected),uC(this,"_pcStatsUploadType",CN("NEW_ICE_RESTART")?aU.FIRST_CONNECTION:aU.OLD_FIRST_CONNECTION),uC(this,"_isStartRestartIce",!1),uC(this,"_restartTimer",void 0),uC(this,"_isTryConnecting",!1),uC(this,"_iceError",null),uC(this,"_forceTurn",!1),uC(this,"_isWaitPcToRePub",!1),uC(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==lU.Connected)return void n(new TR(CR.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const i=r.find((e=>"videoLowTrack"===e[0]));i&&i[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createMuteMessage(r);await rx(this,dU.RequestMuteLocal,o),t()}catch(e){n(e)}finally{r()}})),uC(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==lU.Connected)return void n(new TR(CR.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();const i=r.find((e=>"videoLowTrack"===e[0]));if(i){const t=i[1];if(t.track._originMediaStreamTrack.stop(),!CN("DISABLE_DUAL_STREAM_USE_ENCODING")&&pO().supportDualStreamEncoding){const n=e._mediaStreamTrack.clone();t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}else{const n=pj(e,ox(this,dU.RequestLowStreamParameter));t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}await new nh(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}await this.connection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnmuteMessage(r);await rx(this,dU.RequestUnmuteLocal,o),t()}catch(e){n(e)}finally{r()}})),uC(this,"handleUpdateVideoEncoder",(async(e,t,n,r)=>{let i;r||(i=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoEncoder"));try{const n=this.localTrackMap.get(cU.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==lU.Connected)return void t();const{id:r,track:i}=n;await this.connection.updateSendParameters(r,i),await this.connection.updateEncoderConfig(r,i),this.emit(dU.UpdateVideoEncoder,i),t()}catch(e){n(e)}finally{var o;null===(o=i)||void 0===o||o()}})),uC(this,"handleUpdateVideoSendParameters",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{const n=this.localTrackMap.get(cU.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==lU.Connected)return void t();const{id:r,track:i}=n;await this.connection.updateSendParameters(r,i),t()}catch(e){n(e)}finally{r()}})),uC(this,"handleReplaceMixingTrack",(async(e,t,n,r)=>{if(!this.connection||this.state!==lU.Connected)return void t();const i=ij([e]);let o;rO.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(i.getTrackId(),"]")),"boolean"==typeof r&&r||(o=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(e,i),t()}catch(e){n(e)}finally{var a;null===(a=o)||void 0===a||a()}})),uC(this,"handleReplaceTrack",(async(e,t,n,r)=>{let i;rO.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var o;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.connection||!n||this.state!==lU.Connected)return void t();if(await(null===(o=this.connection)||void 0===o?void 0:o.replaceTrack(e,n[1].id)),this.isPlanB){const t=n[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(n[0],t)}if(n[0]===cU.LocalVideoTrack&&!CN("DISABLE_DUAL_STREAM_USE_ENCODING")&&pO().supportDualStreamEncoding){const t=this.localTrackMap.get(cU.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new nh(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var a;null===(a=i)||void 0===a||a()}})),uC(this,"handleGetRTCStats",(e=>{e(this.statsCollector.getRTCStats())})),uC(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),uC(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),uC(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),uC(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new Ij(this.store),this.bindStatsUploaderEvents(),this.mutex=new Lx("P2PChannel-mutex",this.store.clientId),this.isPlanB=!pO().supportUnifiedPlan||CN("CHROME_FORCE_PLAN_B")&&yR(),this.shouldForwardP2PCreation=CN("FORWARD_P2P_CREATION")&&pO().supportPCSetConfiguration&&vR(),this.shouldForwardP2PCreation&&(this.connection=aj(this.store),this.emit(dU.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection))}async startP2PConnection(e){var t;this.state=lU.New,this._forceTurn=cj(e),rO.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] forceTurn: ").concat(this._forceTurn));const n=this.shouldForwardP2PCreation&&"closed"===(null===(t=this.connection)||void 0===t?void 0:t.peerConnectionState);if(this.shouldForwardP2PCreation&&!n||(n&&this.connection&&(rO.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.resetConnection(this.connection)),this.connection=aj(this.store,e),this.emit(dU.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),!this.connection)throw new TR(CR.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=CN("NEW_ICE_RESTART")?aU.FIRST_CONNECTION:aU.OLD_FIRST_CONNECTION,this._isTryConnecting=!0,this._isStartRestartIce=!1,this._iceError=null,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e){if(!this.connection)throw new TR(CR.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");CN("ENABLE_PREALLOC_PC")&&this.state===lU.Connected?await this.connection.updateRemoteConnect(e):(this.store.peerConnectionStart(),await this.connection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=lU.Connected)}updateRemoteRTPCapabilities(e){const t=Array.from(this.localTrackMap.entries()).filter((e=>{var t;let[n]=e;return Br(t=[cU.LocalVideoLowTrack,cU.LocalVideoTrack]).call(t,n)})),n=t.map((e=>{let[,{id:t}]=e;return t})),r=t.map((e=>{let[t]=e;return t}));if(this.connection instanceof Aj){if(uO.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(r),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!Br(e).call(e,this.store.codec)){const t=["vp9","vp8","h264"].find((t=>Br(e).call(e,t)));t&&(this.store.codec=t,rO.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(t,".")))}this.connection.updateRemoteRTPCapabilities(n,e)}}async getEstablishParams(){var e;if(this.connection instanceof Aj&&"closed"!==this.connection.peerConnectionState&&Br(e=[lU.New,lU.Connected]).call(e,this.state))return this.connection.establishPromise}async publishDataChannel(e){if(!this.connection||this.state!==lU.Connected){if(this.state===lU.Disconnected)throw new TR(CR.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return e.forEach((e=>{var t;Br(t=this.pendingLocalDataChannels).call(t,e)||this.pendingLocalDataChannels.push(e)})),[]}const t=this.filterTobePublishedDataChannels(e);return 0===t.length?[]:(t.forEach((e=>{const t=Date.now();this.store.publish(e.id.toString(),"datachannel",t)})),await this.connection.createDataChannels(this.store.uid,t),t.forEach((e=>{this.localDataChannels.push(e);const t=Date.now();this.store.publish(e.id+"","datachannel",void 0,t)})),e.map((e=>({streamId:e.id,ordered:e.ordered,maxRetransmits:e.maxRetransmits,metadata:e.metadata,channelId:e._originDataChannelId}))))}publish(e,t,n){var r=this;return qT((function*(){const i=yield XT(r.mutex.lock("From P2PChannel.publish"));try{var o;const i=r.connection&&Br(o=["disconnected","failed"]).call(o,r.connection.peerConnectionState);if(!r.connection||r.state!==lU.Connected||i){if(r.state===lU.Disconnected)throw new TR(CR.UNEXPECTED_ERROR,"PeerConnection already disconnected.");r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return r.pendingLocalTracks=r.pendingLocalTracks.concat(t),void(i&&(r._isWaitPcToRePub=!0))}r.store.pubId=r.store.pubId+1,kF.markPublishStart(r.store.clientId,r.store.pubId);const a=r.filterTobePublishedTracks(e,t,n);if(0===a.length)return void(yield XT(r.tryToUnmuteAudio(e)));yield*JT(Mj(r.doPublish(r.connection,a)))}finally{i()}}))()}doPublish(e,t){var n=this;return qT((function*(){t.forEach((e=>{let{track:t,type:r}=e;const i=Date.now();n.store.publish(t.getTrackId(),r===cU.LocalAudioTrack?"audio":"video",i)})),n.bindLocalTrackEvents(t);const r=t.map((e=>{let{track:t}=e;return t})),i=yield XT(e.send(r,n.store.codec,n.store.audioCodec)),o=(yield XT(i.next())).value,a=n.createGatewayPublishMessage(t,o);let s;try{s=yield a}catch(e){throw i.throw(e),(null==e?void 0:e.code)===CR.WS_ABORT&&t.forEach((e=>{let{track:t}=e;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(t),e}const c=n.mapPubResToRemoteConfig(a,s,r),l=(yield XT(i.next(c))).value;if(n.state===lU.Disconnected)throw new TR(CR.UNEXPECTED_ERROR,"PeerConnection already disconnected.");CN("ENABLE_VIDEO_SEI");const d=CN("ENABLE_ENCODED_TRANSFORM"),u=CN("ENABLE_AUDIO_METADATA");r.forEach((async e=>{const t=e.getRTCRtpTransceiver();if(!t||!d)return;const{interceptLocalVideoFrame:n,interceptLocalAudioFrame:r}=FM();e.trackMediaType===iU.VIDEO?await n(t.sender,e):e.trackMediaType===iU.AUDIO&&await r(t.sender,{metadata:u?()=>{const t=e.metadata.shift();return t&&t.value}:void 0})})),t.forEach((e=>{let{type:t}=e;n.statsCollector.addLocalStats(t)})),n.assignLocalTracks(t,l),n.statsUploader.startUploadOutboundStats(),t.forEach((e=>{let{track:t,type:r}=e;const i=Date.now();n.store.publish(t.getTrackId(),r===cU.LocalAudioTrack?"audio":"video",void 0,i)}))}))()}async updateVideoStreamParameter(e,t){const n=this.localTrackMap.get(t);if(!n||!this.connection)return;if(!(n.track instanceof IB))return rO.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");const{track:r}=n,i=function(e,t){const n={};return e.height&&e.width&&(n.scaleResolutionDownBy=ZU(e,t)),n.maxFramerate=e.framerate?WU(e.framerate):void 0,n.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,n}(e,r);if(r._encoderConfig||(r._encoderConfig={}),t!==cU.LocalVideoLowTrack||!CN("DISABLE_DUAL_STREAM_USE_ENCODING")&&pO().supportDualStreamEncoding)null!=i.scaleResolutionDownBy&&(r._encoderConfig.scaleResolutionDownBy=i.scaleResolutionDownBy);else{const t=r._originMediaStreamTrack;if(!t.canvas)return rO.warn("[".concat(r.getTrackId(),"] no canvas on track"));!function(e,t){const n=e.canvas;t.width&&(n.width=WU(t.width)),t.height&&(n.height=WU(t.height)),t.framerate&&(n.stopCapture&&n.stopCapture(),n.stopCapture=hk((()=>{!n.startCapture&&n.stopCapture&&n.stopCapture(),n.startCapture&&n.startCapture()}),WU(t.framerate)))}(t,e)}null!=i.maxBitrate&&(r._encoderConfig.bitrateMax=i.maxBitrate/1e3),null!=i.maxFramerate&&(r._encoderConfig.frameRate&&"object"==typeof r._encoderConfig.frameRate?r._encoderConfig.frameRate.max=i.maxFramerate:r._encoderConfig.frameRate={max:i.maxFramerate}),rO.debug("[".concat(r.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(r._encoderConfig))),await this.connection.updateRtpSenderEncodings(r)}publishLowStream(e){var t=this;return qT((function*(){if(!t.connection||t.state!==lU.Connected)return;const n=yield XT(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const n=t.localTrackMap.get(cU.LocalVideoTrack);if(!n)throw new TR(CR.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(cU.LocalVideoLowTrack))throw new TR(CR.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));const i=[{track:t.getLowVideoTrack(n.track,e),type:cU.LocalVideoLowTrack}];if(yield*JT(Mj(t.doPublish(t.connection,i))),n.track.muted||!n.track.enabled){var r;const e=null===(r=t.localTrackMap.get(cU.LocalVideoLowTrack))||void 0===r?void 0:r.id;void 0!==e&&(yield XT(t.connection.muteLocal([e])))}}finally{n()}}))()}async republish(){this.pendingLocalTracks.length>0&&(rO.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await nx(this,dU.RequestRePublish,this.pendingLocalTracks),this.emit(dU.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(rO.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await nx(this,dU.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[]),this._isWaitPcToRePub=!1}async reSubscribe(e){for(let t=this.pendingRemoteTracks.length-1;t>=0;t--){const{user:e,kind:n}=this.pendingRemoteTracks[t];(n!==iU.AUDIO||e._audio_added_&&e._audioSSRC)&&(n!==iU.VIDEO||e._video_added_&&e._videoSSRC)||this.pendingRemoteTracks.splice(t,1)}if(e)await nx(this,dU.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:t,kind:n}of this.pendingRemoteTracks)await this.subscribe(t,n,n===iU.VIDEO?t._videoSSRC:t._audioSSRC);this.pendingRemoteTracks.forEach((e=>{let{user:t}=e;this.emit(dU.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==lU.Connected)return void e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));return n&&n[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==lU.Connected)return void e.forEach((e=>{const t=this.pendingLocalDataChannels.indexOf(e);-1!==t&&this.pendingLocalDataChannels.splice(t,1)}));const t=this.filterTobeUnpublishedDataChannels(e);return 0!==t.length?(t.forEach((e=>{const t=this.localDataChannels.indexOf(e);-1!==t&&this.localDataChannels.splice(t,1)})),0===this.localDataChannels.length&&await this.connection.stopDataChannels(this.store.uid),t.map((e=>e.id))):void 0}async unpublishLowStream(){if(!this.connection||this.state!==lU.Connected)return;const e=this.localTrackMap.get(cU.LocalVideoLowTrack);if(!e)return;e.track.close();const t=[[cU.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const n=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadOutboundStats(),n}async subscribeDataChannel(e,t){if(!this.connection||this.state!==lU.Connected)throw new TR(CR.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const n=t.filter((t=>{var n;return!(null!==(n=this.remoteDataChannelMap.get(e))&&void 0!==n&&n.get(t.id))}));if(0!==n.length)return await this.connection.createDataChannels(e.uid,n),n.forEach((t=>{var n;this.remoteDataChannelMap.has(e)?null===(n=this.remoteDataChannelMap.get(e))||void 0===n||n.set(t.id,t):this.remoteDataChannelMap.set(e,new Map([[t.id,t]]));const r=this.pendingRemoteDataChannels.findIndex((n=>{let{user:r,id:i}=n;return r.uid===e.uid&&i===t.id}));-1!==r&&this.pendingRemoteDataChannels.splice(r,1)})),n.map((e=>e.id))}async subscribe(e,t,n,r,i){var o;if(!this.connection||this.state!==lU.Connected)throw new TR(CR.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(null!==(o=this.remoteUserMap.get(e))&&void 0!==o&&o.has(t))return;let a,s,c;const l=this.connection.getPreMedia(n);if(l)rO.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] preSSRCMap has ssrcId: ").concat(n,", no need to send sub to gateway.")),c=l.transceiver,a=l.track,s=l.id;else if(i){const n=i.find((e=>{let{stream_type:n}=e;return n===t}));if(!n)throw new TR(CR.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));const r=await this.connection.receive(t,n.ssrcs,String(e._uintid),n.attributes);this.connection instanceof Aj&&(c=r.transceiver),a=r.track,s=r.id}else{const i=await this.connection.receive(t,[{ssrcId:n,rtx:r}],String(e._uintid),void 0);this.connection instanceof Aj&&(c=i.transceiver),a=i.track,s=i.id}if(t===iU.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(a):(e._audioTrack=new zB(a,e.uid,e._uintid,this.store),rO.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(a):(e._videoTrack=new HB(a,e.uid,e._uintid,this.store),rO.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),c&&CN("ENABLE_ENCODED_TRANSFORM")){const{interceptRemoteVideoFrame:n,interceptRemoteAudioFrame:r}=FM();t==iU.VIDEO?await n(c.receiver,{onSei:CN("ENABLE_VIDEO_SEI")&&(t=>{var n;return null===(n=e._videoTrack)||void 0===n?void 0:n._onSei(t)})}):t==iU.AUDIO&&await r(c.receiver,{enableTopn:!!CN("ENABLE_AUDIO_TOPN"),enableMetadata:!!CN("ENABLE_AUDIO_METADATA"),onMetadata:e=>{this.safeEmit(dU.AudioMetadata,e)}})}const d=this.remoteUserMap.get(e);d?d.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();const u=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:i}=n;return r.uid===e.uid&&t===i}));-1!==u&&(this.pendingRemoteTracks.splice(u,1),this.emit(dU.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==lU.Connected)throw new TR(CR.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter((e=>{var t;let{user:n,mediaType:r}=e;return!(null!==(t=this.remoteUserMap.get(n))&&void 0!==t&&t.has(r))}));const t=[],n=new Map;e.forEach((e=>{if(!this.connection)return;const r=this.connection.getPreMedia(e.ssrcId);r?n.set(e.ssrcId,r):t.push(e)}));const r=await this.connection.batchReceive(t.map((e=>{let{user:t,mediaType:n,ssrcId:r,rtxSsrcId:i}=e;return{kind:n,ssrcMsg:[{ssrcId:r,rtx:i}],mslabel:String(t._uintid)}})));t.forEach(((e,t)=>{n.set(e.ssrcId,r[t])}));for(const{user:i,mediaType:o,ssrcId:a}of e){const e=n.get(a);if(!e)return void rO.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] cannot find ").concat(i.uid," subscribe data,").concat(o,", ").concat(a));const{track:t,id:r,transceiver:s}=e;if(s&&CN("ENABLE_ENCODED_TRANSFORM")){const{interceptRemoteVideoFrame:e,interceptRemoteAudioFrame:t}=FM();o==iU.VIDEO?await e(s.receiver,{onSei:CN("ENABLE_VIDEO_SEI")&&(e=>{var t;return null===(t=i._videoTrack)||void 0===t?void 0:t._onSei(e)})}):o==iU.AUDIO&&await t(s.receiver,{enableTopn:!!CN("ENABLE_AUDIO_TOPN"),enableMetadata:!!CN("ENABLE_AUDIO_METADATA"),onMetadata:e=>{this.safeEmit(dU.AudioMetadata,e)}})}if(o===iU.AUDIO?(i._audioTrack?i._audioTrack._updateOriginMediaStreamTrack(t):(i._audioTrack=new zB(t,i.uid,i._uintid,this.store),rO.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(i._audioTrack.getTrackId()))),s&&i._audioTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(i,i._audioTrack)):(i._videoTrack?i._videoTrack._updateOriginMediaStreamTrack(t):(i._videoTrack=new HB(t,i.uid,i._uintid,this.store),rO.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(i._videoTrack.getTrackId()))),s&&i._videoTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(i,i._videoTrack)),CN("ENABLE_VIDEO_SEI")&&s){const{interceptRemoteVideoFrame:e,interceptRemoteAudioFrame:t}=FM();o==iU.VIDEO?await e(s.receiver,{onSei:e=>{var t;null===(t=i._videoTrack)||void 0===t||t._onSei(e)}}):o==iU.AUDIO&&await t(s.receiver)}const c=this.remoteUserMap.get(i);c?c.set(o,r):this.remoteUserMap.set(i,new Map([[o,r]])),this.statsCollector.addRemoteStats(i.uid),this.statsUploader.startUploadInboundStats();const l=this.pendingRemoteTracks.findIndex((e=>{let{user:t,kind:n}=e;return t.uid===i.uid&&o===n}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(dU.MediaReconnectEnd,i.uid))}}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:i}=n;return void 0!==t?r.uid===e.uid&&t===i:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===lU.Connected||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===iU.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===iU.VIDEO){var i;null===(i=e._videoTrack)||void 0===i||i._destroy(),e._videoTrack=void 0}})),!this.connection||this.state!==lU.Connected)return;const i=this.filterTobeUnSubscribedTracks(e,t);if(0===i.length)return;await this.connection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnsubscribeMessage(i);return this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),i.forEach((e=>{let[t,{kind:r}]=e;var i,o;if(r===iU.VIDEO&&t._videoSSRC&&(null===(i=this.connection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===iU.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(r===iU.AUDIO){var a;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(a=t._audioTrack)||void 0===a||a._destroy(),t._audioTrack=void 0)}})),o}async unsubscribeDataChannel(e,t){if(t.forEach((e=>{const t=this.pendingRemoteDataChannels.findIndex((t=>t.id===e.id));-1!==t&&this.pendingRemoteDataChannels.splice(t,1)})),!this.connection)return;const n=this.filterTobeUnSubscribedDataChannels(e,t);if(0===n.length)return;t.forEach((e=>{e._close()}));const r=this.remoteDataChannelMap.get(e);return n.forEach((e=>{r&&r.delete(e.id)})),r&&0===r.size&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),n.map((e=>e.id))}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(const{user:i,mediaType:o}of e){const e=this.pendingRemoteTracks.filter((e=>{let{user:t,kind:n}=e;return void 0!==o?t.uid===i.uid&&o===n:t.uid===i.uid}));e.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),t=t.concat(e)}if(!this.connection||this.state!==lU.Connected)return void t.forEach((e=>{let{user:t,kind:n}=e;var r;if(n===iU.AUDIO)null===(r=t._audioTrack)||void 0===r||r._destroy(),t._audioTrack=void 0;else if(n===iU.VIDEO){var i;null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0}}));const n=ii(e).call(e,((e,t)=>{let{user:n,mediaType:r}=t;const i=this.filterTobeUnSubscribedTracks(n,r);return e.concat(i)}),[]);if(0===n.length)return;await this.connection.stopReceiving(n.map((e=>{let[,{id:t}]=e;return t})));const r=this.createUnsubscribeAllMessage(n);return this.withdrawRemoteTracks(n),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),n.forEach((e=>{let[t,{kind:n}]=e;var r,i;if(n===iU.VIDEO&&t._videoSSRC&&(null===(r=this.connection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),n===iU.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0;else if(n===iU.AUDIO){var o;this.unbindRemoteTrackEvents(t._audioTrack),null===(o=t._audioTrack)||void 0===o||o._destroy(),t._audioTrack=void 0}})),r}isPreSubScribe(e){return!(!this.connection||this.state!==lU.Connected)&&!!this.connection.getPreMedia(e)}async muteRemote(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);if(!n)return void rO.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void rO.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===iU.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.connection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||rO.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):rO.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."))}addAudioMetadata(e){const t=this.localTrackMap.get(cU.LocalAudioTrack),n=t&&t.track;n&&n.metadata.push(e)}getAllTracks(e){const t=this.localTrackMap.get(cU.LocalAudioTrack);if((null==t?void 0:t.track)instanceof MP){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==cU.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===cU.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===cU.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,n,r,i){if(e){const n=this.localTrackMap.get(cU.LocalAudioTrack),o=r?this.localTrackMap.get(cU.LocalVideoLowTrack):this.localTrackMap.get(cU.LocalVideoTrack);uO.publish(this.store.sessionId,{eventElapse:kF.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(PO.SCREEN_TRACK)),audio:!!n,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;n||(n=[]);const a=n.find((e=>e instanceof LP)),s=r?null===(o=this.localTrackMap.get(cU.LocalVideoTrack))||void 0===o?void 0:o.track:n.find((e=>e instanceof IB));uO.publish(this.store.sessionId,{eventElapse:kF.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==a?void 0:a.getTrackLabel(),videoName:null==s?void 0:s.getTrackLabel(),screenshare:-1!==(null==s?void 0:s._hints.indexOf(PO.SCREEN_TRACK)),audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===iU.VIDEO?n._videoSSRC:n._audioSSRC;i&&uO.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===iU.VIDEO,audio:r===iU.AUDIO,peerid:n.uid,subscribeRequestid:i,p2pid:this.store.p2pId,eventElapse:kF.measureFromSubscribeStart(this.store.clientId,i),preSsrc:this.isPreSubScribe(i)})}reset(){rO.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new Lx("P2PChannel-mutex",this.store.clientId),this.connection&&(this.resetConnection(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=aj(this.store),this.emit(dU.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.statsUploader.stopUploadBaseStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(cU.LocalAudioTrack);if((null==e?void 0:e.track)instanceof MP){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=lU.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(cU.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(cU.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof IB||t&&t.track instanceof LP?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(GN(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(cU.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Yh(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.connection&&(rO.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=lU.Reconnecting,CN("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.resetConnection(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=aj(this.store),this.emit(dU.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case cU.LocalVideoTrack:Br(t=r._hints).call(t,PO.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case cU.LocalAudioTrack:r instanceof MP?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case cU.LocalVideoLowTrack:}})),this.emit(dU.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(GN(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(dU.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),0!==this.localDataChannels.length&&(this.localDataChannels.forEach((e=>{this.pendingLocalDataChannels.push(e)})),this.localDataChannels.length=0),0!==this.remoteDataChannelMap.size&&(Array.from(this.remoteDataChannelMap.entries()).forEach((e=>{let[t,n]=e;Array.from(GN(n).call(n)).forEach((e=>{this.setPendingRemoteDataChannel(t,e)}))})),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),rO.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(const n of this.pendingRemoteDataChannels){const{user:r,id:i}=n;if((e instanceof MF?e.uid:e)===r.uid&&i===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof MF?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return qT((function*(){if(!t.connection||t.state!==lU.Connected)return;const n=yield XT(t.mutex.lock("From P2PChannel.restartICE"));let r;try{r=yield XT(t.connection.restartICE(e));const n=yield XT(r.next());if(n.done)return;const i=n.value,o=yield i;switch(sj(t.connection)&&t.reportPCStats(Date.now(),!1,t._pcStatsUploadType),e){case oU.UDP_TCP_RELAY:t._pcStatsUploadType=aU.UDP_TCP_RESTART;break;case oU.TCP_RELAY:t._pcStatsUploadType=aU.TCP_RESTART;break;case oU.RELAY:t._pcStatsUploadType=aU.RELAY_RESTART;break;default:t._pcStatsUploadType=aU.OLD_RESTART}t._isTryConnecting=!0,r.next(o)}catch(e){var i;null===(i=r)||void 0===i||i.throw(e)}finally{n()}}))()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),t=this.localTrackMap.get(cU.LocalVideoTrack),n=this.localTrackMap.get(cU.LocalAudioTrack),r=e.videoSend.find((e=>e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId))),i=e.audioSend.find((e=>e.ssrc===(null==n?void 0:n.ssrcs[0].ssrcId)));if(!r||!i)return 1;const o=ix(this,dU.NeedSignalRTT),a=r?r.rttMs:void 0,s=i?i.rttMs:void 0,c=a&&s?(a+s)/2:a||s,l=(c&&o?(c+o)/2:c||o)||0,d=100*e.sendPacketLossRate*.7/50+.3*l/1500,u=d<.17?1:d<.36?2:d<.59?3:d<.1?4:5,A=null==t?void 0:t.track;if(A&&A._encoderConfig&&-1===A._hints.indexOf(PO.SCREEN_TRACK)){const t=A._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return OL[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const i=r._audioSSRC,o=r._videoSSRC,a=e.audioRecv.find((e=>e.ssrc===i)),s=e.videoRecv.find((e=>e.ssrc===o));if(!a&&!s)return void(t+=1);const c=ix(this,dU.NeedSignalRTT),l=e.rtt,d=(l&&c?(l+c)/2:l||c)||0,u=a?a.jitterMs:void 0,A=e.recvPacketLossRate;let h=.7*A*100/50+.3*d/1500;u&&(h=.6*A*100/50+.2*d/1500+.2*u/400),t+=h<.1?1:h<.17?2:h<.36?3:h<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new nh(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}async replaceTrack(e,t){var n;if(rO.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==lU.Connected)return;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!r)return;const i=r[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:i}]),this.bindLocalTrackEvents([{track:t,type:i}]),r[1].track=t),await(null===(n=this.connection)||void 0===n?void 0:n.replaceTrack(t,r[1].id)),this.isPlanB){const e=r[1];e.id=t._mediaStreamTrack.id,this.localTrackMap.set(i,e)}if(i===cU.LocalVideoTrack&&!CN("DISABLE_DUAL_STREAM_USE_ENCODING")&&pO().supportDualStreamEncoding){const t=this.localTrackMap.get(cU.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new nh(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}}filterTobePublishedTracks(e,t,n){const r=[],i=this.getAllTracks();e=cx(e=e.filter((e=>-1===i.indexOf(e))));let o,a=!1;const s=this.localTrackMap.get(cU.LocalAudioTrack);for(const c of e){if(c instanceof IB&&(this.localTrackMap.has(cU.LocalVideoTrack)||a?new TR(CR.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:cU.LocalVideoTrack}),a=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:cU.LocalVideoLowTrack})}if(c instanceof LP)if(s){const e=s.track;if(e instanceof MP)rj([c]),e.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0);else{const t=ij([e,c]);rO.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(t.getTrackId(),"]")),this.replaceTrack(e,t)}}else o instanceof MP?(rj([c]),o.addAudioTrack(c)):o=o||!c._useAudioElement&&pO().webAudioMediaStreamDest&&!c._bypassWebAudio?ij(o?[c,o]:[c]):c}return o&&(rO.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(o.getTrackId(),"]")),r.push({track:o,type:cU.LocalAudioTrack})),r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=cx(e=e.filter((e=>-1!==n.indexOf(e))));for(const r of e){if(r instanceof LP){const e=this.localTrackMap.get(cU.LocalAudioTrack);if(!e)continue;e.track instanceof MP?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([cU.LocalAudioTrack,e]),e.track.close())):t.push([cU.LocalAudioTrack,e])}if(r instanceof IB){const e=this.localTrackMap.get(cU.LocalVideoTrack);if(!e)continue;t.push([cU.LocalVideoTrack,e]);const n=this.localTrackMap.get(cU.LocalVideoLowTrack);n&&t.push([cU.LocalVideoLowTrack,n])}}return t}filterTobePublishedDataChannels(e){return(e=cx(e)).filter((e=>-1===this.localDataChannels.findIndex((t=>t.id===e.id))))}filterTobeUnpublishedDataChannels(e){return(e=(e=cx(e)).filter((e=>-1!==this.localDataChannels.indexOf(e)))).filter((e=>e._originDataChannel))}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case cU.LocalVideoTrack:t.addListener(kO.GET_STATS,this.handleGetLocalVideoStats),t.addListener(kO.GET_RTC_STATS,this.handleGetRTCStats),t.addListener(kO.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(kO.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(kO.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(kO.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.addListener(kO.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(kO.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(kO.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case cU.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case cU.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof MP?e.trackList.forEach((e=>{e.addListener(kO.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(kO.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(kO.GET_STATS,this.handleGetLocalAudioStats),e.addListener(kO.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(kO.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(kO.GET_STATS,this.handleGetLocalAudioStats),e.addListener(kO.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(kO.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(kO.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(kO.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(kO.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(kO.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case cU.LocalVideoTrack:t.off(kO.GET_STATS,this.handleGetLocalVideoStats),t.off(kO.GET_RTC_STATS,this.handleGetRTCStats),t.off(kO.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(kO.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(kO.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(kO.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.off(kO.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(kO.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(kO.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case cU.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case cU.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof MP?e.trackList.forEach((e=>{e.off(kO.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(kO.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(kO.GET_STATS,this.handleGetLocalAudioStats),e.off(kO.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(kO.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(kO.GET_STATS,this.handleGetLocalAudioStats),e.off(kO.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(kO.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(kO.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(kO.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(kO.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(kO.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof HB&&t.addListener(kO.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof zB&&t.addListener(kO.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(kO.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(iU.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(iU.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let i,o,{track:a,type:s}=e;switch(s){case cU.LocalAudioTrack:i=GD.Audio,o={dtx:a instanceof DP&&a._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case cU.LocalVideoTrack:i=Br(r=a._hints).call(r,PO.SCREEN_TRACK)?GD.Screen:GD.High,o=Uj(Uj({},qU(a)),{},{codec:this.store.codec,svc_mode:eM()});break;case cU.LocalVideoLowTrack:i=GD.Low,o=Uj(Uj({},qU(a)),{},{codec:this.store.codec,svc_mode:eM()})}return{stream_type:i,attributes:o,ssrcs:t[n]}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:a}]=e;switch(r){case cU.LocalVideoTrack:n=Br(t=i._hints).call(t,PO.SCREEN_TRACK)?GD.Screen:GD.High;break;case cU.LocalAudioTrack:n=GD.Audio;break;case cU.LocalVideoLowTrack:n=GD.Low}return{stream_type:n,ssrcs:o,mid:a}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:i}=e;this.localTrackMap.set(i,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(dU.PeerConnectionStateChange,t),"connecting"===t&&e instanceof Aj&&!tR()&&CN("FIRST_TCP_CANDIDATE")&&window.setTimeout((()=>{"connecting"===t&&e.extendCandidate()}),CN("FIRST_TCP_CANDIDATE_INTERVAL")),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(this._restartTimer&&(window.clearTimeout(this._restartTimer),this._restartTimer=void 0),e instanceof Aj&&Pj(e,!0),this._isTryConnecting&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isTryConnecting=!1,this._isStartRestartIce=!1,this._pcStatsUploadType=aU.DISCONNECTED_OR_FAILED,"CONNECTED"===ix(this,dU.QueryClientConnectionState)&&this._isWaitPcToRePub)){const e=this.pendingLocalTracks.map((e=>e.getTrackId())),t=this.pendingLocalDataChannels.map((e=>"dc_".concat(e.id)));uO.reportApiInvoke(this.store.sessionId,{name:zR.REPUB_AFTER_PC_CONNECTED,options:e.concat(t),tag:KR.TRACER}).onSuccess(),this.republish()}if(CN("NEW_ICE_RESTART")&&e instanceof Aj&&!tR()&&!this._forceTurn){if(Br(sU).call(sU,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const t=t=>{sj(e)&&(rO.debug("[".concat(this.store.clientId,"] [P2PChannel] try to restartICE, type is ").concat(t)),"CONNECTED"===ix(this,dU.QueryClientConnectionState)&&this.emit(dU.RequestRestartICE,t))},n=()=>{sj(e)&&(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),rO.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout((()=>this.emit(dU.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())};return void(this._restartTimer=window.setTimeout((()=>{Bj(e,t,n)}),800))}}else{if("disconnected"===t&&"disconnected"===e.iceConnectionState)return setTimeout((()=>{"disconnected"===e.iceConnectionState&&CN("ICE_RESTART")&&"CONNECTED"===ix(this,dU.QueryClientConnectionState)&&this.emit(dU.RequestRestartICE)}),800),void setTimeout((()=>{"disconnected"===e.peerConnectionState&&(rO.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isTryConnecting=!1,setTimeout((()=>this.emit(dU.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())}),4e3);"failed"===t&&(rO.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),setTimeout((()=>this.emit(dU.P2PLost)),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),uO.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:KR.TRACER}).onSuccess(),this.emit(dU.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(GN(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(FO.FIRST_FRAME_DECODED),uO.firstRemoteFrame(this.store.sessionId,sO.FIRST_AUDIO_DECODE,cO.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:kF.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(GN(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&uO.firstRemoteFrame(this.store.sessionId,sO.FIRST_AUDIO_RECEIVED,cO.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:kF.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(GN(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&uO.firstRemoteFrame(this.store.sessionId,sO.FIRST_VIDEO_RECEIVED,cO.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:kF.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(dU.ConnectionTypeChange,n),rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify($U(t))," -> ").concat(JSON.stringify($U(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify($U(t))," -> ").concat(JSON.stringify($U(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.getLocalVideoStats=()=>{const e=this.statsCollector.getLocalVideoTrackStats(),t=this.statsCollector.getRTCStats();return Uj(Uj({},e),t)},e.onICECandidateError=e=>{this._iceError=e}}resetConnection(e){e instanceof Aj&&function(e){Nj.delete(e.id),Pj(e)}(e),e.close(),this.emit(dU.PeerConnectionStateChange,"closed"),function(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.getLocalVideoStats=void 0}(e),this._isWaitPcToRePub=!1}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(cU.LocalAudioTrack);if(e instanceof LP&&(null==n?void 0:n.track)instanceof MP)return n.track.isActive||t.push([cU.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===cU.LocalVideoTrack)){const e=this.localTrackMap.get(cU.LocalVideoLowTrack);e&&t.push([cU.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(cU.LocalAudioTrack);if(e instanceof LP&&(null==n?void 0:n.track)instanceof MP)return n.track.isActive&&t.push([cU.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===cU.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(cU.LocalVideoLowTrack);e&&t.push([cU.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:a}]=e;switch(r){case cU.LocalAudioTrack:n=GD.Audio;break;case cU.LocalVideoTrack:n=Br(t=i._hints).call(t,PO.SCREEN_TRACK)?GD.Screen:GD.High;break;case cU.LocalVideoLowTrack:n=GD.Low}return{stream_type:n,ssrcs:o,mid:a}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:a}]=e;switch(r){case cU.LocalAudioTrack:n=GD.Audio;break;case cU.LocalVideoTrack:n=Br(t=i._hints).call(t,PO.SCREEN_TRACK)?GD.Screen:GD.High;break;case cU.LocalVideoLowTrack:n=GD.Low}return{stream_type:n,ssrcs:o,mid:a}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((t=>{let[r,i]=t;n.push([e,{kind:r,id:i}])}));return n}filterTobeUnSubscribedDataChannels(e,t){const n=[];return t.forEach((t=>{var r;null!==(r=this.remoteDataChannelMap.get(e))&&void 0!==r&&r.has(t.id)&&n.push(t)})),n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:i}]=e;switch(r){case iU.VIDEO:return void(n._videoSSRC&&t.push({stream_type:iU.VIDEO,ssrcId:n._videoSSRC}));case iU.AUDIO:return void(n._audioSSRC&&t.push({stream_type:iU.AUDIO,ssrcId:n._audioSSRC}))}})),t}createUnsubscribeAllMessage(e){const t=new Map;return e.forEach((e=>{let[n,{kind:r}]=e;if(t.has(n)){let e=t.get(n);r===iU.VIDEO?e|=YD.Video:e|=YD.Audio,t.set(n,e)}else r===iU.VIDEO?t.set(n,YD.Video):t.set(n,YD.Audio)})),{users:Array.from(t.entries()).map((e=>{let[t,n]=e;return{stream_id:t.uid,stream_type:n}}))}}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(cU.LocalVideoTrack),n=this.localTrackMap.get(cU.LocalVideoLowTrack);t&&(await t.track.setBitrateLimit(e.uplink),await new nh(((e,n)=>{this.handleUpdateVideoEncoder(t.track,e,n,!0)}))),n&&e.low_stream_uplink&&(await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0}),await new nh(((e,t)=>{this.handleUpdateVideoEncoder(n.track,e,t,!0)})))}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(e,t,n){return e.map(((e,r)=>{var i;let{stream_type:o}=e;const a=null===(i=t.find((e=>{let{stream_type:t}=e;return o===t})))||void 0===i?void 0:i.attributes;if(a&&CN("DISABLE_SCREEN_SHARE_REMB")){const e=n[r]._hints;(Br(e).call(e,PO.SCREEN_TRACK)||Br(e).call(e,PO.SCREEN_LOW_TRACK))&&(a.remb=!1,rO.debug("disable remb for screen share, hints:",e))}return a}))}async tryToUnmuteAudio(e){for(let n=0;n<e.length;n++)if(e[n]instanceof LP){var t;const r=this.filterTobeUnmutedTracks(e[n]);if(0===r.length)continue;await(null===(t=this.connection)||void 0===t?void 0:t.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t}))));const i=this.createUnmuteMessage(r);return void await rx(this,dU.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(dU.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(dU.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks(),this.statsUploader.requestTransportStats=()=>{var e;return{connectState:(null===(e=this.connection)||void 0===e?void 0:e.peerConnectionState)||"closed"}}}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Ex(Mx(this.dtlsFailedCount,Ux)),this.emit(dU.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await nx(this,dU.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(dU.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(cU.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof IB))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof IB)).length>1)throw new TR(CR.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof LP)).length>1&&(e.some((e=>e instanceof LP&&e._bypassWebAudio))||!pO().webAudioMediaStreamDest))throw new TR(CR.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof IB&&this.pendingLocalTracks.some((e=>e instanceof IB)))throw new TR(CR.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof LP&&this.pendingLocalTracks.some((e=>e instanceof LP))&&(!pO().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof LP&&e._bypassWebAudio))))throw new TR(CR.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){var n;const r=!CN("DISABLE_DUAL_STREAM_USE_ENCODING")&&pO().supportDualStreamEncoding,i=Uj(Uj({},{width:160,height:120,framerate:15,bitrate:50}),t);let o;o=r?e._mediaStreamTrack.clone():pj(e,i);const a=wx(8,"track-low-"),s=new IB(o,Uj(Uj({},r&&{scaleResolutionDownBy:ZU(i,e)}),{},{frameRate:i.framerate,bitrateMax:i.bitrate,bitrateMin:i.bitrate}),void 0,void 0,a);return s.on(UO.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,BO.LOW_STREAM)})),s._hints.push(PO.LOW_STREAM),Br(n=e._hints).call(n,PO.SCREEN_TRACK)&&s._hints.push(PO.SCREEN_LOW_TRACK),e.on("sei-to-send",(e=>{s.emit("sei-to-send",e)})),e.addListener(kO.NEED_CLOSE,(()=>{s.close()})),s}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.connection&&this.connection instanceof Aj){var i,o,a,s;const c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:l,dtlsTransportState:d,peerConnectionState:u}=this.connection,{local:A,remote:h}=await this.connection.getSelectedCandidatePair();uO.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:l,dtlsstate:d,connectionstate:u,intSucc:t?1:2,error:this._iceError||r||"",selectedLocalCandidateProtocol:null!==(i=null==A?void 0:A.protocol)&&void 0!==i?i:"",selectedLocalCandidateType:null!==(o=A.candidateType)&&void 0!==o?o:"",selectedLocalCandidateAddress:"".concat(A.address,":").concat(A.port),selectedRemoteCandidateProtocol:null!==(a=h.protocol)&&void 0!==a?a:"",selectedRemoteCandidateType:null!==(s=h.candidateType)&&void 0!==s?s:"",selectedRemoteCandidateAddress:"".concat(h.address,":").concat(h.port),restartCnt:n,preallocation:this.connection.isPreallocation}),this._iceError=null}}reportVideoFirstFrameDecoded(e,t,n,r){var i;const o=Array.from(GN(i=this.remoteUserMap).call(i)).find((t=>t._videoSSRC===e));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const i=this.store.keyMetrics,a=i.subscribe.find((e=>e.userId===o.uid&&"video"===e.type));uO.firstRemoteVideoDecode(this.store.sessionId,sO.FIRST_VIDEO_DECODE,cO.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:kF.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:i.requestAPEnd||0,apStart:i.requestAPStart||0,joinGwEnd:i.joinGatewayEnd||0,joinGwStart:i.joinGatewayStart||0,pcEnd:i.peerConnectionEnd||0,pcStart:i.peerConnectionStart||0,subscriberEnd:(null==a?void 0:a.subscribeEnd)||0,subscriberStart:(null==a?void 0:a.subscribeStart)||0,videoAddNotify:(null==a?void 0:a.streamAdded)||0,state:r?1:0,firstFrame:(null==a?void 0:a.firstFrame)||0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.connection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const o=await this.connection.getRemoteSSRC(i);return void 0!==o&&o!==n}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===cU.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,BO.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}},vD(Lj.prototype,"startP2PConnection",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"startP2PConnection"),Lj.prototype),vD(Lj.prototype,"connect",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"connect"),Lj.prototype),vD(Lj.prototype,"updateRemoteRTPCapabilities",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"updateRemoteRTPCapabilities"),Lj.prototype),vD(Lj.prototype,"publishDataChannel",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"publishDataChannel"),Lj.prototype),vD(Lj.prototype,"unpublish",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"unpublish"),Lj.prototype),vD(Lj.prototype,"unpublishDataChannel",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"unpublishDataChannel"),Lj.prototype),vD(Lj.prototype,"unpublishLowStream",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"unpublishLowStream"),Lj.prototype),vD(Lj.prototype,"subscribeDataChannel",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"subscribeDataChannel"),Lj.prototype),vD(Lj.prototype,"subscribe",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"subscribe"),Lj.prototype),vD(Lj.prototype,"massSubscribe",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"massSubscribe"),Lj.prototype),vD(Lj.prototype,"unsubscribe",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"unsubscribe"),Lj.prototype),vD(Lj.prototype,"unsubscribeDataChannel",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"unsubscribeDataChannel"),Lj.prototype),vD(Lj.prototype,"massUnsubscribe",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"massUnsubscribe"),Lj.prototype),vD(Lj.prototype,"muteRemote",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"muteRemote"),Lj.prototype),vD(Lj.prototype,"unmuteRemote",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"unmuteRemote"),Lj.prototype),vD(Lj.prototype,"hasRemoteMediaWithLock",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"hasRemoteMediaWithLock"),Lj.prototype),vD(Lj.prototype,"disconnectForReconnect",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"disconnectForReconnect"),Lj.prototype),vD(Lj.prototype,"updateBitrateLimit",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"updateBitrateLimit"),Lj.prototype),vD(Lj.prototype,"remoteMediaSsrcChanged",[Qj],Object.getOwnPropertyDescriptor(Lj.prototype,"remoteMediaSsrcChanged"),Lj.prototype),Lj);function Qj(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PChannel.".concat(t));try{for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return await r.apply(this,o)}finally{n()}},n}function Vj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vj(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const zj=Date.now(),Kj=20,Gj=new Map,Wj=new Map;async function qj(e){const t=Gj.get(e),n=Array.isArray(t)&&t[t.length-1],r=Wj.get(e);if(!n)return void(r.isSyncing=!1);const i={uid:n.uid,payload:n.payload};0===r.firstRecvTs&&(r.firstRecvTs=n.recvTs,r.firstSendTs=n.sendTs);const o=n.sendTs-r.firstSendTs,a=o-(Date.now()-r.firstRecvTs);a>0&&(r.firstRecvTs=Date.now()-o);let s=n.mediaDelay+a;s<=0?(t.pop(),Yj(n.context,i),s=0):s=Math.min(s,Kj),setTimeout((()=>t.length&&qj(e)),s)}function Yj(e,t){e.safeEmit(ZR.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function Xj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return Yj(n,{uid:e.uid,payload:e.payload});const r="".concat(n.id,"-").concat(e.uid),i=Gj.get(r)||[],o=i.findIndex((t=>e.sendTs>=t.sendTs)),a=Hj(Hj({},e),{},{context:n,mediaDelay:t,recvTs:Date.now()});-1===o?i.push(a):i.splice(o,0,a),Gj.set(r,i);let s=!1;var c;Wj.has(r)?s=!(null===(c=Wj.get(r))||void 0===c||!c.isSyncing):Wj.set(r,{isSyncing:s,firstRecvTs:0,firstSendTs:0}),s||qj(r)}const Jj=WI().name;function Zj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zj(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const eQ="websdk_ng_cache_parameter",tQ=CN("MAX_PRELOAD_ASYNC_LENGTH"),nQ=1e4,rQ=new Map,iQ=[];let oQ=null,aQ=0,sQ=0;const cQ=new Map,lQ=function(e,t){const n=[];let r=0;const i=async()=>{const e=n.shift();e&&await e(),n.length>0&&r<t?i():r--};return async function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return new nh((async(o,s)=>{n.push((async()=>{try{const t=await e(...a);o(t)}catch(e){s(e)}})),r<t&&(r++,i())}))}}(uQ,tQ),dQ=DI.CancelToken.source();async function uQ(e,t,n,r,i,o){try{if(!CN("ENABLE_PRELOAD"))return;if(!pO().supportWebCrypto)return void hx((()=>{rO.warn("Your browser does not support preloading, this feature  be run in a secure environment")}),"preload_webcrypto_not_supported");if(!n&&null!==n)throw new TR(CR.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&OR(n,"token",1,2047),OR(e,"appid",1,2047),OD(t),r&&kD(r);const a=_x();rO.debug("preload channel ".concat(t,", uid is ").concat(r));const s={appId:e,cname:t,token:n||e,uid:"string"!=typeof r?r:null,sid:a,proxyServer:i};let c,l;"string"==typeof r?(s.stringUid=r,[l,c]=await nh.all([EF(r,{sid:a,appId:e},dQ.token),_F($j($j({},s),{},{token:n||e,uid:0}),dQ.token)]),s.uid=l.uid,c.gatewayInfo.uid=s.uid,c.gatewayInfo.res.uid=s.uid):(o&&(s.stringUid=o),c=await _F(s,dQ.token));const d={sid:a,appId:e,cname:t,token:n||e,uid:s.stringUid||r,intUid:s.uid||c.gatewayInfo.uid,stringUid:s.stringUid,ts:Date.now(),sua:l,ap:c};await async function(e){let t;try{e.uid&&hQ({appId:e.appId,cname:e.cname,token:e.token,uid:e.uid,stringUid:e.stringUid});const n=yQ(e),r=await async function(e,t){try{const n=await window.crypto.subtle.importKey("raw",mx(t),"AES-GCM",!1,["encrypt"]),r=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},n,px(window.btoa(JSON.stringify(e))));return fx(new Uint8Array(r))}catch(e){return}}(e,e.token||e.appId);if(!r)return;t=gQ(eQ);const i=t?JSON.parse(t):[];i.push({[n]:r}),i.length>CN("AP_CACHE_NUM")&&i.shift(),vQ(eQ,JSON.stringify(i))}catch(e){rO.warn("Error caching server parameters:",e.message),vQ(eQ,"")}}(d),aQ++}catch(e){throw sQ++,function(e){oQ||(oQ=window.setTimeout((()=>{let t="";cQ.forEach(((e,n)=>{t+="".concat(n,": ").concat(e," ;")})),uO.reportApiInvoke(null,{name:zR.PRELOAD,options:{success:aQ,failed:sQ,err:t}}).onError(e),aQ=0,sQ=0,cQ.clear(),oQ=null}),nQ));const t=cQ.get(e.code)||0;cQ.set(e.code,t+1)}(e),e}}async function AQ(e){try{if(CN("AP_REQUEST_DETAIL")||CN("ENABLE_ROLE_SELECT_EDGE"))return;const t=hQ(e);if(!t||"disabled"!==e.cloudProxyServer)return;const n=await async function(e,t){try{const n=await window.crypto.subtle.importKey("raw",mx(t),"AES-GCM",!1,["decrypt"]),r=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},n,px(e));return JSON.parse(window.atob(fx(new Uint8Array(r))))}catch(e){return}}(t,e.token||e.appId);if(!n)return;if(!function(e,t){return!(e.cname!==t.cname||e.appId!==t.appId||e.token!==t.token)&&(t.stringUid?e.stringUid===t.stringUid:"number"==typeof t.uid?e.uid===t.uid:e.uid==t.uid)}(n,e))return;if(n&&Date.now()-n.ts<CN("AP_CACHE_LIFETIME"))return n}catch(e){rO.warn("Error get preloadInfo",e.message)}}function hQ(e){let t;try{if(t=gQ(eQ),!t)return;const n=JSON.parse(t),r=yQ(e),i=function(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1}(n,(e=>r in e));if(-1===i)return;const o=n.splice(i,1)[0];return vQ(eQ,JSON.stringify(n)),o[r]}catch(e){rO.warn("Error delete preload info: ".concat(t),e.message),vQ(eQ,"")}}function pQ(e){if(e){let t=rQ.get(e);t&&(window.clearTimeout(t),t=null,rQ.delete(e)),Br(iQ).call(iQ,e)||"disabled"!==e.cloudProxyServer||iQ.push(e)}if(rQ.size<CN("AP_CACHE_NUM")&&iQ.length>0){const e=iQ.shift();rQ.set(e,window.setTimeout((async()=>{const{appId:t,cname:n,token:r,stringUid:i,uid:o,proxyServer:a}=e;try{await lQ(t,n,r,o,a,i),rQ.has(e)&&pQ(e)}catch(t){rO.warn("update preload failed",t.message),fQ(e)}}),CN("AP_UPDATE_INTERVAL")))}}function fQ(e){const t=iQ.indexOf(e);-1!==t&&iQ.splice(t,1);let n=rQ.get(e);n&&(window.clearTimeout(n),n=null,rQ.delete(e),pQ())}function mQ(e,t){const n=e.sua,r=e.ap;t&&n&&uO.reqUserAccount(e.sid,{lts:n.requestTime,elapse:n.elapse,success:!0,serverAddr:n.url,stringUid:t,uid:e.intUid,errorCode:null,extend:n.req}),uO.reportResourceTiming(e.ap.url,e.sid),uO.joinWebProxyAP(e.sid,{lts:r.requestTime,elapse:r.elapse,sucess:1,apServerAddr:r.url,turnServerAddrList:r.proxyInfo.addresses.map((e=>e.ip)).join(","),eventType:"disabled",unilbsServerIds:[VU.CHOOSE_SERVER,VU.CLOUD_PROXY_FALLBACK].toString()}),uO.joinChooseServer(e.sid,{lts:r.requestTime,elapse:r.elapse,succ:!0,csAddr:r.url,opid:r.opid,serverList:r.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,cid:r.gatewayInfo.cid.toString(),uid:r.gatewayInfo.uid.toString(),csIp:r.gatewayInfo.csIp,unilbsServerIds:[VU.CHOOSE_SERVER].toString(),isHttp3:r.isHttp3})}function gQ(e){return window.atob(window.localStorage.getItem(e)||"")}function vQ(e,t){window.localStorage.setItem(e,window.btoa(t))}function yQ(e){let t="".concat(e.appId,"_").concat(e.cname);return"string"==typeof e.uid&&(t+="_s_".concat(e.uid)),"number"==typeof e.uid&&(t+="_".concat(e.uid)),e.token&&(t+="_".concat(e.token)),kx(t)}function bQ(e){let t=function(){const e=SQ.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(e,t){let n=e.appId;void 0!==n&&(LQ(t,10),OQ(t,n));let r=e.cid;void 0!==r&&(LQ(t,16),LQ(t,r));let i=e.cname;void 0!==i&&(LQ(t,26),OQ(t,i));let o=e.deviceId;void 0!==o&&(LQ(t,34),OQ(t,o));let a=e.elapse;void 0!==a&&(LQ(t,40),UQ(t,a));let s=e.fileSize;void 0!==s&&(LQ(t,48),UQ(t,_Q(s)));let c=e.height;void 0!==c&&(LQ(t,56),UQ(t,_Q(c)));let l=e.jpg;void 0!==l&&(LQ(t,66),LQ(t,l.length),xQ(t,l));let d=e.networkType;void 0!==d&&(LQ(t,72),UQ(t,_Q(d)));let u=e.osType;void 0!==u&&(LQ(t,80),UQ(t,_Q(u)));let A=e.requestId;void 0!==A&&(LQ(t,90),OQ(t,A));let h=e.sdkVersion;void 0!==h&&(LQ(t,98),OQ(t,h));let p=e.sequence;void 0!==p&&(LQ(t,104),UQ(t,_Q(p)));let f=e.sid;void 0!==f&&(LQ(t,114),OQ(t,f));let m=e.timestamp;void 0!==m&&(LQ(t,120),UQ(t,m));let g=e.uid;void 0!==g&&(LQ(t,128),LQ(t,g));let v=e.vid;void 0!==v&&(LQ(t,136),LQ(t,v));let y=e.width;void 0!==y&&(LQ(t,144),UQ(t,_Q(y)));let b=e.service;void 0!==b&&(LQ(t,152),LQ(t,b));let E=e.callbackData;void 0!==E&&(LQ(t,162),LQ(t,E.length),xQ(t,E));let w=e.ticket;void 0!==w&&(LQ(t,170),OQ(t,w));let _=e.vendorConfigs;void 0!==_&&(LQ(t,178),OQ(t,_))}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function EQ(e){return function(e){let t={};e:for(;!TQ(e);){let n=BQ(e);switch(n>>>3){case 0:break e;case 1:t.code=BQ(e);break;case 2:t.msg=NQ(e,BQ(e));break;case 3:t.requestId=NQ(e,BQ(e));break;case 4:t.timestamp=DQ(e,!1);break;default:wQ(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function wQ(e,t){switch(t){case 0:for(;128&kQ(e););break;case 2:CQ(e,BQ(e));break;case 5:CQ(e,4);break;case 1:CQ(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function _Q(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let SQ=[];function CQ(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function TQ(e){return e.offset>=e.limit}function IQ(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let t=new Uint8Array(2*o);t.set(n),e.bytes=t}return e.offset=o,o>i&&(e.limit=o),r}function RQ(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function xQ(e,t){let n=IQ(e,t.length);e.bytes.set(t,n)}function NQ(e,t){let n=RQ(e,t),r=String.fromCharCode,i=e.bytes,o="\ufffd",a="";for(let s=0;s<t;s++){let e,c,l,d,u=i[s+n];0==(128&u)?a+=r(u):192==(224&u)?s+1>=t?a+=o:(e=i[s+n+1],128!=(192&e)?a+=o:(d=(31&u)<<6|63&e,d<128?a+=o:(a+=r(d),s++))):224==(240&u)?s+2>=t?a+=o:(e=i[s+n+1],c=i[s+n+2],32896!=(49344&(e|c<<8))?a+=o:(d=(15&u)<<12|(63&e)<<6|63&c,d<2048||d>=55296&&d<=57343?a+=o:(a+=r(d),s+=2))):240==(248&u)?s+3>=t?a+=o:(e=i[s+n+1],c=i[s+n+2],l=i[s+n+3],8421504!=(12632256&(e|c<<8|l<<16))?a+=o:(d=(7&u)<<18|(63&e)<<12|(63&c)<<6|63&l,d<65536||d>1114111?a+=o:(d-=65536,a+=r(55296+(d>>10),56320+(1023&d)),s+=3))):a+=o}return a}function OQ(e,t){let n=t.length,r=0;for(let a=0;a<n;a++){let e=t.charCodeAt(a);e>=55296&&e<=56319&&a+1<n&&(e=(e<<10)+t.charCodeAt(++a)-56613888),r+=e<128?1:e<2048?2:e<65536?3:4}LQ(e,r);let i=IQ(e,r),o=e.bytes;for(let a=0;a<n;a++){let e=t.charCodeAt(a);e>=55296&&e<=56319&&a+1<n&&(e=(e<<10)+t.charCodeAt(++a)-56613888),e<128?o[i++]=e:(e<2048?o[i++]=e>>6&31|192:(e<65536?o[i++]=e>>12&15|224:(o[i++]=e>>18&7|240,o[i++]=e>>12&63|128),o[i++]=e>>6&63|128),o[i++]=63&e|128)}}function kQ(e){return e.bytes[RQ(e,1)]}function PQ(e,t){let n=IQ(e,1);e.bytes[n]=t}function BQ(e){let t,n=0,r=0;do{t=kQ(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function LQ(e,t){for(t>>>=0;t>=128;)PQ(e,127&t|128),t>>>=7;PQ(e,t)}function DQ(e,t){let n,r=0,i=0,o=0;return n=kQ(e),r=127&n,128&n&&(n=kQ(e),r|=(127&n)<<7,128&n&&(n=kQ(e),r|=(127&n)<<14,128&n&&(n=kQ(e),r|=(127&n)<<21,128&n&&(n=kQ(e),i=127&n,128&n&&(n=kQ(e),i|=(127&n)<<7,128&n&&(n=kQ(e),i|=(127&n)<<14,128&n&&(n=kQ(e),i|=(127&n)<<21,128&n&&(n=kQ(e),o=127&n,128&n&&(n=kQ(e),o|=(127&n)<<7))))))))),{low:r|i<<28,high:i>>>4|o<<24,unsigned:t}}function UQ(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,a=IQ(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=9!==o?128|i:127&i;case 8:s[a+7]=8!==o?r>>>21|128:r>>>21&127;case 7:s[a+6]=7!==o?r>>>14|128:r>>>14&127;case 6:s[a+5]=6!==o?r>>>7|128:r>>>7&127;case 5:s[a+4]=5!==o?128|r:127&r;case 4:s[a+3]=4!==o?n>>>21|128:n>>>21&127;case 3:s[a+2]=3!==o?n>>>14|128:n>>>14&127;case 2:s[a+1]=2!==o?n>>>7|128:n>>>7&127;case 1:s[a]=1!==o?128|n:127&n}}const MQ={},FQ={},jQ=4294967296,QQ=jQ*jQ,VQ=QQ/2,HQ=qQ(0,!0),zQ=qQ(0),KQ=YQ(0,-2147483648,!1),GQ=YQ(-1,2147483647,!1),WQ=YQ(-1,-1,!0);function qQ(e,t){let n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=FQ[e],r)?r:(n=YQ(e,0,!0),i&&(FQ[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=MQ[e],r)?r:(n=YQ(e,e<0?-1:0,!1),i&&(MQ[e]=n),n)}function YQ(e,t,n){return{low:0|e,high:0|t,unsigned:!!n}}function XQ(e,t){if(isNaN(e))return t?HQ:zQ;if(t){if(e<0)return HQ;if(e>=QQ)return WQ}else{if(e<=-VQ)return KQ;if(e+1>=VQ)return GQ}return e<0?t?HQ:zQ:YQ(e%jQ|0,e/jQ|0,t)}function JQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class ZQ extends QR{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(gU.CONNECTION_STATE_CHANGE,e,t)}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this._qualityRatio}),6e4))}constructor(e){var t;super(),uC(this,"name","AgoraRTCImageModeration"),uC(this,"_connectionState",mU.CONNECTING),uC(this,"_sequence",0),uC(this,"_moderationStartTime",void 0),uC(this,"_workerConnection",void 0),uC(this,"_workerMessageLengthLimit",void 0),uC(this,"_qualityRatio",void 0),uC(this,"_connectInfo",void 0),uC(this,"_cancelTokenSource",DI.CancelToken.source()),uC(this,"_retryConfig",void 0),uC(this,"_moderationInterval",void 0),uC(this,"_moderationTimer",null),uC(this,"_moderationMode",1),uC(this,"_quality",1),uC(this,"_qualityTimer",null),uC(this,"_ticket",void 0),uC(this,"_moderationIntervalMinimum",void 0),uC(this,"_uploadFailedNum",0),uC(this,"_uploadNum",0),uC(this,"_uploadTimer",null),uC(this,"_extraInfo",void 0),uC(this,"_vendor",""),uC(this,"_encoder",new TextEncoder),uC(this,"_moderationId",void 0),uC(this,"inspectImage",(()=>{if(this.connectionState!==mU.CONNECTED)throw new AO(CR.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval((()=>{this.connectionState===mU.CONNECTED?this.requestToInspectImage():rO.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)}),this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()})),this._moderationId=wx(5,"image-moderation-"),this._workerMessageLengthLimit=CN("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=CN("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),this._qualityRatio=CN("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new FU("worker-"+this._moderationId,Ux),this.on(gU.STATE_CHANGE,((e,t)=>{rO.debug("[".concat(this._moderationId,"] Moderation operation :").concat(vU[e]," ").concat(t||""))})),this.handleWorkerEvents()}async init(e,t){this.emit(gU.STATE_CHANGE,vU.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new nh(((r,i)=>{this.on(gU.CONNECTION_STATE_CHANGE,((e,t)=>{e===mU.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorker(e)})).catch((e=>{i(e)}))}))}updateConfig(e){var t;this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),rO.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(e))),this.connectionState===mU.CONNECTED&&this.inspectImage()}async requestAP(e,t,n){const r=CN("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),i=await function(e,t,n,r){let{appId:i,areaCode:o,cname:a,sid:s,token:c,uid:l}=t;pF++;const d="moderation_plugin",u={service_name:d,json_body:JSON.stringify({appId:i,areaCode:o,cname:a,command:"allocateEdge",requestId:pF,seq:pF,sid:s,appToken:c,ts:Date.now(),uid:l+""})};let A,h,p=e[0];return Fx((async()=>{A=Date.now();const e=await GM(p,{data:u,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(h=Date.now()-A,0!==e.code){const t=new AO(CR.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+e.code,{retry:!0,responseTime:h});throw rO.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new AO(CR.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:h});throw rO.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new AO(CR.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:t.code,responseTime:h});throw rO.error(e.toString()),e}if(!t.servers.some((e=>!!e.wss))){const e=new AO(CR.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:t.code,responseTime:h});throw rO.error(e.toString()),e}const r=CN("IMAGE_MODERATION_WORKER_HOST");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(n,"/moderation")})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,ticket:t.appTicket,responseTime:h}}),((t,n)=>(uO.apworkerEvent(s,{success:!0,sc:200,serviceName:d,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:h,serverIp:e[n%e.length]}),!1)),((t,n)=>(uO.apworkerEvent(s,{success:!1,sc:t.data&&t.data.code||200,serviceName:d,responseTime:h,serverIp:e[n%e.length]}),!!(t.code!==CR.OPERATION_ABORTED&&t.code!==CR.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(p=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(gU.STATE_CHANGE,vU.AP_CONNECTED);const{addressList:o,ticket:a}=i;return this._ticket=a,o}async connectWorker(e){this.emit(gU.STATE_CHANGE,vU.CONNECT_WORKER),await this._workerConnection.init(e,1e4)}handleWorkerEvents(){this._workerConnection.on(ND.CONNECTED,(async()=>{this.emit(gU.STATE_CHANGE,vU.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=mU.CONNECTED})),this._workerConnection.on(ND.CLOSED,(()=>{this.connectionState=mU.CLOSED})),this._workerConnection.on(ND.FAILED,(()=>{this.connectionState=mU.CLOSED})),this._workerConnection.on(ND.RECONNECTING,(()=>{this.connectionState=this.connectionState===mU.CONNECTED?mU.RECONNECTING:mU.CONNECTING})),this._workerConnection.on(ND.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const t=EQ(new Uint8Array(e.data));CN("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&rO.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(t)),this._uploadNum++,void 0===t.code||0===t.code||(this._uploadFailedNum++,rO.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(t.code,", msg is ").concat(t.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout((()=>{uO.reportApiInvoke(this._connectInfo.sid||null,{name:zR.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,t.code],tag:KR.TRACER}).onError(new AO(CR.IMAGE_MODERATION_UPLOAD_FAILED,t.msg)),this._uploadTimer=null}),CN("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else rO.error("[".concat(this._moderationId,"] Unexpected message type from worker"))})),this._workerConnection.on(ND.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this._workerConnection.on(ND.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){const e=ix(this,gU.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void(CN("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&rO.debug("Only the track being played can be inspected"));this._sequence++;const n=await this.generateRequestData(e,t);this._workerConnection.sendMessage(n,!0,!0)}else CN("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&rO.debug("Only the track being published can be inspected")}async generateRequestData(e,t){let{appId:n,cname:r,cid:i,vid:o,sid:a,uid:s}=t;const c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),d=await Gk(l,n,r),u=this._sequence+"-"+i+"-"+s+"-"+c+"-"+wx(12,""),A={appId:n,cid:i,cname:r,deviceId:"",elapse:ZQ.intToLong(Number(c-this._moderationStartTime)),fileSize:l.buffer.byteLength,height:l.height,width:l.width,jpg:d,networkType:6,osType:7,requestId:u,sdkVersion:"4.23.4",sequence:this._sequence,sid:a,timestamp:XQ(c),uid:s,vid:o,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};void 0===this._extraInfo&&delete A.callbackData;const h=bQ(A);if(h.byteLength<this._workerMessageLengthLimit){if(CN("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JQ(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},A);delete e.jpg,rO.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(e))}return h}{const t=this.quality*this._qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:i,vid:o,sid:a,uid:s})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=DI.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=mU.CLOSED,this.emit(gU.STATE_CHANGE,vU.CLOSED)}}function $Q(e){if(xR(e.interval,"interval",1e3,1/0),e&&e.extraInfo&&e.extraInfo.length>1024)throw new AO(CR.INVALID_PARAMS,"config.extraInfo length cannot exceed 1024 bytes");if(e&&e.vendor&&e.vendor.length>1024)throw new AO(CR.INVALID_PARAMS,"config.vendor length cannot exceed 1024 bytes")}const eV={name:"ImageModeration",create:function(e){let{config:t}=e;return $Q(t),new ZQ(t)}};var tV,nV,rV,iV,oV,aV,sV,cV,lV,dV,uV,AV,hV,pV,fV,mV,gV,vV,yV,bV,EV,wV,_V,SV,CV,TV,IV,RV,xV,NV,OV,kV,PV,BV,LV,DV,UV,MV,FV,jV,QV,VV;function HV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HV(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Lx.setLogger(rO);let KV=(tV=dO(),nV=dO({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof ak))return[t];t=[t]}return t.map((e=>e?Object(e).toString():"null"))}}),rV=dO({argsMap:(e,t)=>(t||(t=[]),Array.isArray(t)||t.trackMediaType!==jO.DATA?(Array.isArray(t)||(t=[t]),t.map((e=>e.getTrackId()))):[t.getChannelId()])}),iV=dO({argsMap:(e,t,n,r)=>["object"==typeof t?t.uid:t,n,r]}),oV=dO({argsMap:(e,t,n)=>[t,n]}),aV=dO({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return[null==t?void 0:t.uid,n]}))}),sV=dO({argsMap:(e,t,n,r)=>["object"==typeof t?t.uid:t,n,r]}),cV=dO({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return{uid:null==t?void 0:t.uid,mediaType:n}}))}),lV=dO(),dV=dO(),uV=dO(),AV=dO(),hV=dO(),pV=dO(),fV=dO(),mV=dO(),gV=dO(),vV=dO(),yV=dO(),bV=dO(),EV=dO(),wV=dO(),_V=dO(),SV=dO({argsMap:(e,t)=>[t]}),CV=dO(),TV=dO(),IV=dO(),RV=dO(),xV=dO(),NV=dO(),OV=dO(),kV=dO(),PV=dO({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),BV=dO(),LV=dO(),DV=dO(),UV=dO(),MV=dO(),FV=dO(),jV=dO({reportResult:!0}),QV=dO(),VV=class extends QR{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return(null===(e=this._config)||void 0===e?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e,t){let n;if(super(),uC(this,"store",void 0),uC(this,"_uid",void 0),uC(this,"_channelName",void 0),uC(this,"_uintUid",void 0),uC(this,"_users",[]),uC(this,"_config",void 0),uC(this,"_clientId",void 0),uC(this,"_appId",void 0),uC(this,"_sessionId",null),uC(this,"_key",void 0),uC(this,"_rtmConfig",{}),uC(this,"_joinInfo",void 0),uC(this,"_gateway",void 0),uC(this,"_statsCollector",void 0),uC(this,"_configDistribute",void 0),uC(this,"_leaveMutex",void 0),uC(this,"_publishMutex",void 0),uC(this,"_renewTokenMutex",void 0),uC(this,"_subscribeMutex",void 0),uC(this,"_encryptionMode","none"),uC(this,"_encryptionSecret",null),uC(this,"_encryptionSalt",null),uC(this,"_encryptDataStream",!1),uC(this,"_encryptDataStreamKey",null),uC(this,"_encryptDataStreamIv",null),uC(this,"_proxyServer",void 0),uC(this,"_turnServer",{servers:[],mode:"auto"}),uC(this,"_cloudProxyServerMode","disabled"),uC(this,"_isDualStreamEnabled",!1),uC(this,"_defaultStreamFallbackType",void 0),uC(this,"_lowStreamParameter",void 0),uC(this,"_streamFallbackTypeCacheMap",new Map),uC(this,"_remoteStreamTypeCacheMap",new Map),uC(this,"_axiosCancelSource",DI.CancelToken.source()),uC(this,"_audioVolumeIndicationInterval",void 0),uC(this,"_networkQualityInterval",void 0),uC(this,"_userOfflineTimeout",void 0),uC(this,"_streamRemovedTimeout",void 0),uC(this,"_liveTranscodeStreamingClient",void 0),uC(this,"_liveRawStreamingClient",void 0),uC(this,"_channelMediaRelayClient",void 0),uC(this,"_networkQualitySensitivity","normal"),uC(this,"_p2pChannel",void 0),uC(this,"_useLocalAccessPoint",!1),uC(this,"_setLocalAPVersion",void 0),uC(this,"_joinAndNotLeaveYet",!1),uC(this,"_numberOfJoinCount",0),uC(this,"_remoteDefaultVideoStreamType",void 0),uC(this,"_inspect",void 0),uC(this,"_moderation",void 0),uC(this,"_license",void 0),uC(this,"_pendingPublishedUsers",[]),uC(this,"ntpAlignErrorCount",0),uC(this,"remoteInboundOffset",0),uC(this,"_peerConnectionState",void 0),uC(this,"_handleLocalTrackEnable",((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),uC(this,"_handleLocalTrackDisable",((e,t,n)=>{this.unpublish(e).then(t).catch(n)})),uC(this,"_handleUserOnline",(e=>{if(CN("BLOCK_LOCAL_CLIENT")&&BL(e.uid,this.channelName))return void rO.debug("[".concat(e.uid,"] will be ignored in local"));this.isStringUID&&"string"!=typeof e.uid&&rO.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const t=this._users.find((t=>t.uid===e.uid));if(t)t._trust_in_room_=!0,t._is_pre_created&&(t._is_pre_created=!1,this.safeEmit(ZR.USER_JOINED,t));else{const t=new MF(e.uid,e.uint_id||e.uid);this._users.push(t),rO.debug("[".concat(this._clientId,"] user online"),e.uid),this.safeEmit(ZR.USER_JOINED,t)}})),uC(this,"_handleUserOffline",(e=>{if(CN("BLOCK_LOCAL_CLIENT")&&BL(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));t&&(this._handleRemoveStream(e),this._handleRemoveDataChannels(e),t._audio_pre_subscribed||t._video_pre_subscribed?t._is_pre_created=!0:sx(this._users,t),this._remoteStreamTypeCacheMap.delete(t.uid),this._streamFallbackTypeCacheMap.delete(t.uid),rO.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.safeEmit(ZR.USER_LEAVED,t,e.reason))})),uC(this,"_handleAddAudioOrVideoStream",((e,t,n,r,i,o,a)=>{if(CN("BLOCK_LOCAL_CLIENT")&&BL(t,this.channelName))return;const s=this._users.find((e=>e.uid===t));if(!s)return void rO.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));rO.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(s.uid,e,void 0,void 0,void 0,Date.now());const c="audio"===e?s.hasAudio:s.hasVideo;s._uintid||(s._uintid=i||t),"audio"===e?s._trust_audio_stream_added_state_=!0:s._trust_video_stream_added_state_=!0,"audio"===e?(s._audio_added_=!0,void 0!==n&&(s._audioSSRC=n),void 0!==r&&(s._cname=r),o&&(s._audioOrtc=o)):(s._video_added_=!0,void 0!==n&&(s._videoSSRC=n),void 0!==r&&(s._cname=r),void 0!==a&&(s._rtxSsrcId=a),o&&(s._videoOrtc=o)),("audio"===e?s.hasAudio:s.hasVideo)&&!c&&(rO.info("[".concat(this._clientId,"] remote user ").concat(s.uid," published ").concat(e)),this.safeEmit(ZR.USER_PUBLISHED,s,e)),"video"===e?uO.onGatewayStream(this._sessionId,sO.ON_ADD_VIDEO_STREAM,cO.ON_ADD_VIDEO_STREAM,{peer:i||t,ssrc:s._videoSSRC}):uO.onGatewayStream(this._sessionId,sO.ON_ADD_AUDIO_STREAM,cO.ON_ADD_AUDIO_STREAM,{peer:i||t,ssrc:s._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(s,e,n).then((t=>{if(t&&(rO.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(s.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof jj))return this._p2pChannel.unsubscribe(s,e,!0).then((()=>this._subscribe(s,e,!0).catch((e=>{rO.error("[".concat(this._clientId,"] resubscribe error"),e.toString())}))))})),this._p2pChannel.hasPendingRemoteMedia(s,e)&&(rO.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(s.uid," after reconnect.")),this._subscribe(s,e,!0).catch((e=>{rO.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),uC(this,"_handleRemoveStream",(e=>{if(CN("BLOCK_LOCAL_CLIENT")&&BL(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));if(!t)return void rO.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));rO.debug("[".concat(this._clientId,"] stream removed with uid ").concat(e.uid));let n=()=>{};t.hasAudio&&t.hasVideo?n=()=>{rO.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(ZR.USER_UNPUBLISHED,t,"audio"),rO.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(ZR.USER_UNPUBLISHED,t,"video")}:t.hasVideo?n=()=>{rO.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(ZR.USER_UNPUBLISHED,t,"video")}:t.hasAudio&&(n=()=>{rO.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(ZR.USER_UNPUBLISHED,t,"audio")}),t._video_pre_subscribed||t._audio_pre_subscribed||(t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,this._p2pChannel instanceof jj&&this._p2pChannel.unsubscribe(t).then((e=>{if(e)return this._gateway.unsubscribe(e,t.uid)})),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0),uO.onGatewayStream(this._sessionId,sO.ON_REMOVE_STREAM,cO.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),n()})),uC(this,"_handleSetStreamLocalEnable",((e,t,n)=>{if(CN("BLOCK_LOCAL_CLIENT")&&BL(t,this.channelName))return;const r=this._users.find((e=>e.uid===t));if(!r)return void rO.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));rO.debug("[".concat(this._clientId,"] local ").concat(e," ").concat(n?"enabled":"disabled"," with uid ").concat(t));const i="audio"===e?r.hasAudio:r.hasVideo;if("audio"===e){r._trust_audio_enabled_state_=!0;const e=r._audio_enabled_;if(r._audio_enabled_=n,r._audio_enabled_===e)return;{const e=r._audio_enabled_?"enable-local-audio":"disable-local-audio";rO.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(ZR.USER_INFO_UPDATED,t,e)}}else{r._trust_video_enabled_state_=!0;const e=r._video_enabled_;if(r._video_enabled_=n,r._video_enabled_===e)return;{const e=r._video_enabled_?"enable-local-video":"disable-local-video";rO.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(ZR.USER_INFO_UPDATED,t,e)}}const o="audio"===e?r.hasAudio:r.hasVideo;return i!==o?!i&&o?(rO.info("[".concat(this._clientId,"] remote user ").concat(t," published ").concat(e)),void this.safeEmit(ZR.USER_PUBLISHED,r,e)):("video"===e&&r._videoTrack&&r._videoTrack._destroy(),"audio"===e&&r._audioTrack,this._p2pChannel.muteRemote(r,e),rO.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished ").concat(e)),void this.safeEmit(ZR.USER_UNPUBLISHED,r,e)):void 0})),uC(this,"_handleMuteStream",((e,t,n)=>{if(CN("BLOCK_LOCAL_CLIENT")&&BL(e,this.channelName))return;rO.debug("[".concat(this._clientId,"] receive mute message"),e,t,n);const r=this._users.find((t=>t.uid===e));if(!r)return void rO.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(e));const i="audio"===t?r.hasAudio:r.hasVideo;if("audio"===t){r._trust_audio_mute_state_=!0;const t=r._audio_muted_;if(r._audio_muted_=n,r._audio_muted_===t)return;{const t=r._audio_muted_?"mute-audio":"unmute-audio";rO.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(ZR.USER_INFO_UPDATED,e,t)}}else{r._trust_video_mute_state_=!0;const t=r._video_muted_;if(r._video_muted_=n,r._video_muted_===t)return;{const t=r._video_muted_?"mute-video":"unmute-video";rO.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(ZR.USER_INFO_UPDATED,e,t)}}const o="audio"===t?r.hasAudio:r.hasVideo;if(i!==o){if(!i&&o)return("audio"===t?r._audioSSRC:r._videoSSRC)?(rO.info("[".concat(this._clientId,"] remote user ").concat(e," published ").concat(t)),void this.safeEmit(ZR.USER_PUBLISHED,r,t)):void rO.warning("[".concat(this._clientId,"] remote user ").concat(e," receive ").concat(t," unmute message  before add stream message, ").concat(t," SSRC doesn't exist yet."));"video"===t&&r._videoTrack&&!r._video_pre_subscribed&&r._videoTrack._destroy(),"audio"===t&&r._audioTrack,this._p2pChannel.muteRemote(r,t),rO.info("[".concat(this._clientId,"] remote user ").concat(e," unpublished ").concat(t)),this.safeEmit(ZR.USER_UNPUBLISHED,r,t)}})),uC(this,"_handleP2PLost",(async e=>{rO.debug("[".concat(this._clientId,"] receive p2p lost"),e),parseInt(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():rO.warning("[".concat(this._clientId,"] P2PLost stream not found"),e)})),uC(this,"_handleTokenWillExpire",(()=>{rO.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(ZR.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),uC(this,"_handleBeforeUnload",(e=>{"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),rO.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))})),uC(this,"_handleUpdateNetworkQuality",(()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.safeEmit(ZR.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(ZR.NETWORK_QUALITY,e)})),uC(this,"_handleP2PAddAudioOrVideoStream",((e,t,n,r)=>{const i=this._users.find((e=>e.uid===t));if(!i)return void rO.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));rO.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(i.uid,e,void 0,void 0,void 0,Date.now());const o="audio"===e?i.hasAudio:i.hasVideo;"audio"===e?i._trust_audio_stream_added_state_=!0:i._trust_video_stream_added_state_=!0,"audio"===e?(i._audio_added_=!0,void 0!==n&&(i._audioSSRC=n),void 0!==r&&(i._audioMid=r)):(i._video_added_=!0,void 0!==n&&(i._videoSSRC=n),void 0!==r&&(i._videoMid=r)),("audio"===e?i.hasAudio:i.hasVideo)&&!o&&(rO.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published ").concat(e)),this.safeEmit(ZR.USER_PUBLISHED,i,e)),this._p2pChannel.hasPendingRemoteMedia(i,e)&&(rO.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(i.uid," after reconnect.")),this._subscribe(i,e,!0).catch((e=>{rO.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),this._config=e,this._clientId=t||wx(5,"client-"),this.store=new class{constructor(e,t,n,r){wR(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:n,clientId:r,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useP2P:!1,p2pTransport:gN.Default,hasStartJoinChannel:!1,isABTestSuccess:!1}}dispatch(e){this.state=function(e,t){switch(t.type){case RN.SET_SESSION_ID:return SR(SR({},e),{},{sessionId:t.sessionId});case RN.SET_P2P_ID:return SR(SR({},e),{},{p2pId:t.p2pId});case RN.SET_UID:return SR(SR({},e),{},{uid:t.uid});case RN.SET_INT_UID:return SR(SR({},e),{},{intUid:t.intUid});case RN.SET_PUB_ID:return SR(SR({},e),{},{pubId:t.pubId});case RN.KEY_METRIC_CLIENT_CREATED:return SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{clientCreated:t.metric})});case RN.KEY_METRIC_JOIN_START:return SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{joinStart:t.metric})});case RN.KEY_METRIC_JOIN_END:return SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{joinEnd:t.metric})});case RN.KEY_METRIC_REQUEST_AP_START:return SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{requestAPStart:t.metric})});case RN.KEY_METRIC_REQUEST_AP_END:return SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{requestAPEnd:t.metric})});case RN.KEY_METRIC_JOIN_GATEWAY_START:return SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case RN.KEY_METRIC_JOIN_GATEWAY_END:return SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case RN.KEY_METRIC_PEER_CONNECTION_START:return SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case RN.KEY_METRIC_PEER_CONNECTION_END:return SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case RN.KEY_METRIC_DESCRIPTION_START:return SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{descriptionStart:t.metric})});case RN.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case RN.KEY_METRIC_ICE_CONNECTION_END:return SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case RN.KEY_METRIC_PUBLISH:{const n=e.keyMetrics.publish,r=n.findIndex((e=>e.trackId===t.metric.trackId));return-1!==r?(n[r]=SR(SR({},n[r]),t.metric),SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{publish:[...n]})})):SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{publish:[...e.keyMetrics.publish,t.metric]})})}case RN.KEY_METRIC_SUBSCRIBE:{const n=e.keyMetrics.subscribe,r=n.findIndex((e=>e.userId===t.metric.userId&&e.type===t.metric.type));return-1!==r?(n[r]=SR(SR({},n[r]),t.metric),SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{subscribe:[...n]})})):SR(SR({},e),{},{keyMetrics:SR(SR({},e.keyMetrics),{},{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}case RN.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case RN.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof t.index?e.joinChannelServiceRecords=[...e.joinChannelServiceRecords,t.record]:(e.joinChannelServiceRecords[t.index]=SR(SR({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=[...e.joinChannelServiceRecords]),e;case RN.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case RN.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case RN.SET_USE_P2P:return SR(SR({},e),{},{useP2P:t.val});case RN.SET_TRANSPORT_TYPE:return SR(SR({},e),{},{p2pTransport:t.val});default:return e}}(this.state,e)}set sessionId(e){this.dispatch({type:RN.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set cid(e){this.state.cid=e}get cid(){return this.state.cid}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:RN.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:RN.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:RN.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:RN.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:RN.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:RN.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(e){this.dispatch({type:RN.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:RN.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}set hasStartJoinChannel(e){this.state.hasStartJoinChannel=e}get hasStartJoinChannel(){return this.state.hasStartJoinChannel}set isABTestSuccess(e){this.state.isABTestSuccess=e}get isABTestSuccess(){return this.state.isABTestSuccess}clientCreated(){this.dispatch({type:RN.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:RN.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:RN.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:RN.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:RN.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:RN.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:RN.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:RN.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:RN.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:RN.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:RN.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:RN.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,n,r){this.dispatch({type:RN.KEY_METRIC_PUBLISH,metric:SR(SR({trackId:e,type:t},n&&{publishStart:n}),r&&{publishEnd:r})})}subscribe(e,t,n,r,i,o,a){this.dispatch({type:RN.KEY_METRIC_SUBSCRIBE,metric:SR(SR(SR(SR(SR({userId:e,type:t},n&&{subscribeStart:n}),r&&{subscribeEnd:r}),i&&{firstFrame:i}),o&&{streamAdded:o}),a&&{firstDecoded:a})})}massSubscribe(e,t,n,r){e.forEach((e=>{this.dispatch({type:RN.KEY_METRIC_SUBSCRIBE,metric:SR(SR(SR({userId:e.userId,type:e.type},t&&{subscribeStart:t}),n&&{subscribeEnd:n}),r&&{firstFrame:r})})}))}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){"gateway"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((e=>e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2"))));try{return"number"!=typeof t?(this.dispatch({type:RN.RECORD_JOIN_CHANNEL_SERVICE,record:SR(SR({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:RN.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:RN.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:RN.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch(e){return[]}}}(e.codec,e.audioCodec,e.mode,this._clientId),this._leaveMutex=new Lx("client-leave",this._clientId),this._publishMutex=new Lx("client-publish",this._clientId),this._renewTokenMutex=new Lx("client-renewtoken",this._clientId),this._subscribeMutex=new Lx("client-subscribe",this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),rO.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(fN," build: ").concat(EN,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{JR(e.clientRoleOptions),n=Object.assign({},e.clientRoleOptions)}catch(e){rO.warning("[".concat(this._clientId,"] ").concat(e.toString()))}var r;this._statsCollector=new LF(this.store),this._statsCollector.onStatsException=(e,t,n)=>{rO.warn("[".concat(this._clientId,"] receive exception msg, code: ").concat(e,", msg: ").concat(t,", uid: ").concat(n)),this.safeEmit(ZR.EXCEPTION,{code:e,msg:t,uid:n})},this._statsCollector.onUploadPublishDuration=(e,t,n,r)=>{const i=this._users.find((t=>t.uid===e));i&&uO.peerPublishStatus(this._sessionId,{subscribeElapse:r,audioPublishDuration:t,videoPublishDuration:n,peer:i._uintid})},this._statsCollector.onVideoCodecChanged=e=>{if(CN("VIDEO_STANDARD_BITRATE_VERSION")&&("av1"===e||"h265"===e||"h264"===e)){const t=this.localTracks.find((e=>e instanceof IB));t&&1!==t._saveEncodeBitrateRatio&&t.setSaveEncodeBitrateRatio("h264"===e?CN("BASELINE_MORE_H264_BITRATE_RATIO"):void 0)}},this.store.useP2P="p2p"===e.mode,this._gateway=new HM(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||Ux,httpRetryConfig:e.httpRetryConfig||Ux,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:n}),this._configDistribute=new xF(this._clientId,this.store),this.store.useP2P?(this._p2pChannel=(r={store:this.store,statsCollector:this._statsCollector},UM("P2PChannel").create(r)),this._handleP2PEvents()):this._p2pChannel=new jj(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,n,r,i){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];SN("JOIN_GATEWAY_USE_443PORT_ONLY",o),SN("JOIN_GATEWAY_USE_DUAL_DOMAIN",a);const s=this._gateway.signal.websocket;return s instanceof MU&&(s.use443PortOnly=o,s.tryDoubleDomain=a),async function(e,t,n){FI.get(e)||FI.set(e,[]),jI.get(e)||jI.set(e,t),QI.get(e)||QI.set(e,0);const r=FI.get(e),i=jI.get(e);if(!r||!i)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(QI.get(e)===i){const e=MI();r.push(e),await e.promise}QI.set(e,QI.get(e)+1);for(var o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];const c=await n(...a);return QI.set(e,QI.get(e)-1),QI.get(e)===i-1&&r.length>0&&(r[0].resolve(),r.shift()),0===QI.get(e)&&(FI.set(e,[]),jI.set(e,0),QI.set(e,0)),c}("client.join",CN("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,n,r,i)}async join(e,t,n,r,i){const o=++this._numberOfJoinCount;this.store.joinStart(),r&&(this.store.uid=r);const a="HTTPS"===(jx||jx||(jx=(window.location.protocol.split(":")[0]||"").toUpperCase(),jx)),s=Gx()?window.isSecureContext:"Browser Not Support";if(!Gx()&&!a||!window.isSecureContext){const e="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";rO.warning(e)}uO.setAppId(e);try{if(!n&&null!==n)throw new AO(CR.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&OR(n,"token",1,2047),OR(e,"appid",1,2047),OD(t),r&&kD(r),i&&OR(i,"optionalInfo",1,2047)}catch(i){throw uO.reportApiInvoke(_x(),{name:zR.JOIN,options:[e,t,n,r],states:{isHttps:a,isSecureContext:s},tag:KR.TRACER}).onError(i),i}if(this._leaveMutex.isLocked&&(rO.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),rO.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,"DISCONNECTED"!==this.connectionState){const i=new AO(CR.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw uO.reportApiInvoke(_x(),{name:zR.JOIN,options:[e,t,n,r],states:{isHttps:a,isSecureContext:s},tag:KR.TRACER}).onError(i),i}this._gateway.state="CONNECTING";const c=await AQ({appId:e,cname:t,uid:r,stringUid:"string"==typeof r?r:void 0,token:n||e,cloudProxyServer:this._cloudProxyServerMode});if(!this._joinAndNotLeaveYet)throw new AO(CR.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));const l=(null==c?void 0:c.sid)||_x();rO.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(o)),this._sessionId||(this._sessionId=l,this.store.sessionId=this._sessionId);const d=uO.reportApiInvoke(l,{id:this._clientId,name:zR.JOIN,options:[e,t,n,r],states:{isHttps:a,isSecureContext:s},tag:KR.TRACER}),u=zV(zV(zV({},this._rtmConfig),{},{role:this.role,clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof r?r:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!c},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType}),{},{apRequestDetail:CN("AP_REQUEST_DETAIL")||void 0});if(this._useLocalAccessPoint&&(u.setLocalAPVersion=this._setLocalAPVersion),"string"==typeof r&&(u.stringUid=r,this._uintUid?(u.uid=this._uintUid,this._uintUid=void 0):u.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret){if(u.aesmode=this._encryptionMode,u.aespassword=await(async e=>{const t=function(){const e=window.atob("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t}(),n=await window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),r=MR(e),i=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r);return function(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}(new Uint8Array(i))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new AO(CR.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(u.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&("aes-128-gcm2"===this._encryptionMode||"aes-256-gcm2"===this._encryptionMode))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const e=new TextEncoder,t=CN("USE_PURE_ENCRYPTION_MASTER_KEY")?e.encode(u.appId+this._encryptionSecret+this._encryptionSecret):e.encode(u.appId+u.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),i="aes-128-gcm2"===e?128:256,o=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:kN,hash:"SHA-256",salt:n},r,i+ON);return new Uint8Array(o).subarray(i/8)}(this._encryptionMode,t,px(this._encryptionSalt)),this._encryptDataStreamKey=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),i="aes-128-gcm2"===e?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:kN,hash:"SHA-256",salt:n},r,{name:"AES-GCM",length:i},!0,["encrypt","decrypt"])}(this._encryptionMode,t,px(this._encryptionSalt))}else s?rO.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):rO.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,rO.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:u.stringUid});const A=this._sessionId;setTimeout((()=>{"CONNECTING"===this.connectionState&&A===this._sessionId&&uO.joinChannelTimeout(this._sessionId,5)}),5e3);try{var h;let r;const i=u.cloudProxyServer;if(Br(h=["proxy3","proxy4","proxy5"]).call(h,i)){const e=CN("PROXY_SERVER_TYPE3");Array.isArray(e)?u.proxyServer=e[0]:u.proxyServer=e}if(uO.setProxyServer(u.proxyServer),rO.setProxyServer(u.proxyServer),this.store.requestAPStart(),c){if(rO.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(u.stringUid?", ".concat(u.stringUid," => ").concat(c.intUid):""," ")),u.stringUid&&!u.uid&&(u.uid=c.intUid),r={gatewayInfo:c.ap.gatewayInfo},CN("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&"auto"===u.turnServer.mode)if(0===c.ap.proxyInfo.addresses.length)rO.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{const e=(await JU(c.ap.proxyInfo,c.ap.gatewayInfo.uid)).map((e=>({turnServerURL:e.address,tcpport:e.tcpport||vN.tcpport,udpport:e.udpport||vN.udpport,username:e.username||vN.username,password:e.password||vN.password,forceturn:!1,security:!0})));u.turnServer={mode:"manual",servers:e}}mQ(c,u.stringUid)}else{if(u.stringUid&&!u.uid){let e;[e,r]=await nh.all([bF(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||Ux,this.store),yF(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Ux,!0,this.store)]),rO.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(u.stringUid," => ").concat(e)),u.uid=e,r.gatewayInfo.uid=e,r.gatewayInfo.res.uid=e}else r=await yF(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Ux,!0,this.store);if(!this._joinAndNotLeaveYet)throw new AO(CR.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout((()=>{this._configDistribute.startGetConfigDistribute(u,this._axiosCancelSource.token),this._configDistribute.on(eU.UPDATE_BITRATE_LIMIT,(e=>{this._p2pChannel.updateBitrateLimit(e)})),this._configDistribute.on(eU.UPDATE_CLIENT_ROLE_OPTIONS,(e=>{this._setClientRoleOptions(e)}))}),0),this._key=n||e;const o=r.gatewayInfo,a=u.uid?u.uid:o.uid;this._joinInfo=zV(zV({},u),{},{cid:o.cid,uid:a,vid:o.vid,apResponse:o.res,apGatewayAddress:o.apGatewayAddress,uni_lbs_ip:o.uni_lbs_ip,gatewayAddrs:o.gatewayAddrs}),this.store.intUid=a,this.store.cid=o.cid;const s=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new AO(CR.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));d.onSuccess(s),this._appId=e,this._channelName=u.cname,this._uid=s,this.store.uid=s,setTimeout((()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener($I()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()}),0);const l=u.stringUid?"string uid: ".concat(u.stringUid,",uid: ").concat(u.uid):"uid: ".concat(this._uid);return rO.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(l)),setTimeout((()=>{rO.startUpload()}),5e3),this.store.joinEnd(),p=this,Br(kL).call(kL,p)||kL.push(p),"disabled"===this._cloudProxyServerMode&&pO().supportWebCrypto&&CN("ENABLE_PRELOAD")&&pQ(this._joinInfo),s}catch(e){const t=Array.isArray(e)?e[0]:e;throw t&&t.code===CR.OPERATION_ABORTED?rO.warning("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),t):rO.error("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),t),t.code!==CR.OPERATION_ABORTED&&this._numberOfJoinCount===o&&(this._gateway.state="DISCONNECTED",this._reset()),d.onError(t),t}var p}_joinGateway(){if(!this._joinInfo||!this._key)throw new AO(CR.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!CN("JOIN_WITH_FALLBACK_SIGNAL_PROXY")))}async leave(){rO.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener($I()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(e){const t=kL.indexOf(e);-1!==t&&kL.splice(t,1)}(this),this._statsCollector.stopUpdateStats();const e=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return rO.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave("CONNECTED"!==this.connectionState,qR.LEAVE),rO.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(e)){if(!(e instanceof ak))return this._publishDataChannel(e);e=[e]}if(0===e.length)throw new AO(CR.INVALID_PARAMS,"param list is empty");const n=e;if("audience"===this._gateway.role)throw new AO(CR.INVALID_OPERATION,"audience can not publish stream");for(const i of n){if(!(i instanceof ak))throw new AO(CR.INVALID_PARAMS,"parameter is not local track");if(!i._enabled&&t)throw new AO(CR.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()))}rO.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))));const r=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&n.forEach((e=>{const t=this._configDistribute.getBitrateLimit();e instanceof IB&&t&&e.setBitrateLimit(t.uplink)}));try{await this._publishHighStream(n),rO.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))))}catch(e){throw rO.error("[".concat(this._clientId,"] publish error"),e.toString()),e}finally{r()}}async _publishDataChannel(e){xR(e.id,"id",0,65535,!0),IR(e.ordered,"ordered"),OR(e.metadata,"metadata",0,512),rO.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));const t=await this._publishMutex.lock();try{if(-1!==this._p2pChannel.getAllDataChannels().findIndex((t=>t.id===e.id)))throw new AO(CR.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||void 0===this._uid)throw new AO(CR.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&CN("FORCE_TURN")&&!CN("TURN_ENABLE_TCP")&&!CN("TURN_ENABLE_UDP"))throw new AO(CR.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const t=function(e){return MM(e,!1)}(e),n=await this._p2pChannel.publishDataChannel([t]);if(n.length>0){if("number"!=typeof t._originDataChannelId)throw rO.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new AO(CR.CREATE_DATACHANNEL_ERROR);try{await nh.all(n.map((e=>this._uid&&this._gateway.publishDataChannel(this._uid,e,!0)))),await t._waitTillOpen()}catch(e){if(e.code!==CR.DISCONNECT_P2P)throw e}}return rO.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(t.id)),t}catch(e){throw rO.error("[".concat(this._clientId,"] publish datachannels error"),e.toString()),e}finally{t()}}async unpublish(e){if(!this._joinInfo||void 0===this._uid)throw new AO(CR.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof ak))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);rO.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map((e=>"".concat(e.getTrackId()," ")))," "));const n=await this._publishMutex.lock();try{if(this.store.useP2P){const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.sendExtensionMessage(yU.UNPUBLISH,{unpubMsg:e},!0)}else{const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.unpublish(e,this._uid),rO.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map((e=>"".concat(e.getTrackId())))))}}catch(e){throw rO.error("[".concat(this._clientId,"] unpublish error"),e.toString()),e}finally{n&&n()}}async _unpublishDataChannel(e){void 0!==e&&0!==e.length||(e=this._p2pChannel.getAllDataChannels()),rO.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map((e=>"".concat(e.id," ")))," "));const t=await this._publishMutex.lock();try{const t=await this._p2pChannel.unpublishDataChannel(e);t&&await this._gateway.unpublishDataChannel(t),rO.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map((e=>"".concat(e.id)))))}catch(e){throw rO.error("[".concat(this._clientId,"] unpublish dataChannel error"),e.toString()),e}finally{t&&t()}}async subscribe(e,t,n){if(!(e instanceof MF)){const t=this.remoteUsers.find((t=>t.uid===e));if(!t)throw new AO(CR.INVALID_REMOTE_USER,"user is not in the channel");e=t}return"datachannel"===t?this._subscribeDataChannel(e,n):this._subscribe(e,t)}async presubscribe(e,t){if(RR(t,"mediaType",["audio","video"]),this.store.useP2P)throw new AO(CR.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"can't presub when not join");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const n=t===iU.AUDIO,r=t===iU.VIDEO,i=await this._subscribeMutex.lock();try{const{ssrcId:i,ortc:o,rtxSsrcId:a,cname:s,uint_id:c}=await this._gateway.presubscribe(e,t,!0);if(null==i)throw new AO(CR.UNEXPECTED_RESPONSE,"no ssrc id");let l=this._users.find((t=>t.uid===e));l||(l=new MF(e,c||e),l._is_pre_created=!0,this._users.push(l)),s&&(l._cname=s),l._uintid||(l._uintid=c||e),n&&(l._audioSSRC=i,l._audio_pre_subscribed=!0,o&&(l._audioOrtc=o)),r&&(l._videoSSRC=i,l._video_pre_subscribed=!0,o&&(l._videoOrtc=o),null!=a&&(l._rtxSsrcId=a)),rO.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(i)),await this._p2pChannel.subscribe(l,t,i,a,o);const d=n?l._audioTrack:l._videoTrack;if(!d)throw new AO(CR.UNEXPECTED_ERROR,"can not find remote track in user");return n&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0),r&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0),d}catch(t){throw rO.error("[".concat(this._clientId,"] presub user ").concat(e," error"),t),t}finally{i()}}async _subscribeDataChannel(e,t){var n;if(xR(t,"channelId",0,65535,!0),!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));const r=this._users.find((t=>t===e));if(!r)throw rO.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new AO(CR.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&0===e._dataChannels.length)throw rO.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new AO(CR.INVALID_REMOTE_USER,"user is not published");const i=null===(n=e._dataChannels)||void 0===n?void 0:n.find((e=>e.id===t));if(!i)throw rO.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new AO(CR.REMOTE_USER_IS_NOT_PUBLISHED);const o=await this._subscribeMutex.lock();rO.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{const n=await this._p2pChannel.subscribeDataChannel(e,[i]);if(n&&Br(n).call(n,i.id))try{var a;if("number"!=typeof i._originDataChannelId)throw rO.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new AO(CR.CREATE_DATACHANNEL_ERROR);const t={id:i.id,datachannelId:i._originDataChannelId,ordered:i.ordered,maxRetransmits:i.maxRetransmits,metadata:null!==(a=i.metadata)&&void 0!==a?a:""};await this._gateway.subscribeDataChannel(e.uid,t,!0),await i._waitTillOpen()}catch(t){if((null==t?void 0:t.code)!==CR.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[i]),t;await this._p2pChannel.unsubscribeDataChannel(e,[i]),this._p2pChannel.setPendingRemoteDataChannel(e,i.id)}return rO.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),i}finally{o()}}async _p2pSubscribe(e,t,n){if(RR(t,"mediaType",["audio","video"]),!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const r=this._users.find((t=>t===e));if(!r){const t=new AO(CR.INVALID_REMOTE_USER,"user is not in the channel");throw rO.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new AO(CR.INVALID_REMOTE_USER,"user is not published");throw rO.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!n&&("audio"===t&&!e.hasAudio||"video"===t&&!e.hasVideo)){const n=new AO(CR.REMOTE_USER_IS_NOT_PUBLISHED);throw rO.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}const i=await this._subscribeMutex.lock();rO.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const n="audio"===t?e._audioSSRC:e._videoSSRC,r="audio"===t?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this.store.useP2P&&await this._p2pChannel.subscribe(e,t,n,r)}catch(e){throw e}rO.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{rO.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const n="audio"===t?e._audioTrack:e._videoTrack;if(!n)throw new AO(CR.UNEXPECTED_ERROR,"can not find remote track in user object");return n}catch(t){throw rO.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{i()}}async _subscribe(e,t,n){if(this.store.useP2P)return this._p2pSubscribe(e,t);if(RR(t,"mediaType",["audio","video"]),!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const r=this._users.find((t=>t===e));if(!r){const t=new AO(CR.INVALID_REMOTE_USER,"user is not in the channel");throw rO.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new AO(CR.INVALID_REMOTE_USER,"user is not published");throw rO.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!(n||("audio"!==t||e.hasAudio&&void 0!==e._audioSSRC)&&("video"!==t||e.hasVideo&&void 0!==e._videoSSRC))){const n=new AO(CR.REMOTE_USER_IS_NOT_PUBLISHED);throw rO.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}let i="audio"===t?e._audioSSRC:e._videoSSRC,o="audio"===t?e._audioOrtc:e._videoOrtc,a="video"===t?e._rtxSsrcId:void 0,s={stream_type:"audio"===t?iU.AUDIO:iU.VIDEO,ssrcId:i};const c=await this._subscribeMutex.lock();rO.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const r="audio"===t?e._audioSSRC:e._videoSSRC;void 0!==r&&r!==i&&(i=r,o="audio"===t?e._audioOrtc:e._videoOrtc,a="video"===t?e._rtxSsrcId:void 0,s={stream_type:"audio"===t?iU.AUDIO:iU.VIDEO,ssrcId:i}),kF.markSubscribeStart(this.store.clientId,i),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,i,a,o);try{this._p2pChannel.isPreSubScribe(i)||await this._gateway.subscribe(e.uid,s,!0)}catch(n){if((null==n?void 0:n.code)!==CR.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),n;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(n){throw this._p2pChannel.reportSubscribeEvent(!1,null==n?void 0:n.code,e,t),n}rO.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{rO.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const r="audio"===t?e._audioTrack:e._videoTrack;if(!r)throw new AO(CR.UNEXPECTED_ERROR,"can not find remote track in user object");return r}catch(t){throw rO.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{c()}}async massSubscribe(e){if(kR(e,"subscribeList"),!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const t=Date.now(),n=new Map,r=await this._subscribeMutex.lock();rO.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; ")));const i=(e=[...e]).map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n}})),o=await this._p2pChannel.globalLock();try{var a;for(let t=e.length-1;t>=0;t--){const r=e[t],{user:o,mediaType:a}=r;if(RR(a,"mediaType",["audio","video"]),!o){const e=new AO(CR.INVALID_PARAMS,"user property does not exist in subscribeList item");throw rO.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),e}const s=this._users.find((e=>e===o));if(!s){const n=new AO(CR.INVALID_REMOTE_USER,"user is not in the channel");rO.error("[".concat(this._clientId,"] can not massSubscribe ").concat(o.uid,", this user is not in the channel")),i[t].error=n,e.splice(t,1);continue}if("audio"===a&&(!o.hasAudio||void 0===o._audioSSRC)||"video"===a&&(!o.hasVideo||void 0===o._videoSSRC)){const n=new AO(CR.REMOTE_USER_IS_NOT_PUBLISHED);rO.error("[".concat(this._clientId,"] can not subscribe ").concat(o.uid," with mediaType ").concat(a,", remote user is not published")),i[t].error=n,e.splice(t,1);continue}const c=YD.Video|YD.LwoVideo,l=n.get(o);if(l){if("video"===a?l&c:l&YD.Audio){e.splice(t,1),rO.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(o.uid,", mediaType:").concat(a," twice"));continue}n.set(o,l|("video"===a?c:YD.Audio))}else n.set(o,"video"===a?c:YD.Audio)}for(let t=e.length-1;t>=0;t--){const r=e[t],{user:i,mediaType:o}=r,a=YD.Video|YD.LwoVideo;if(this._p2pChannel.hasRemoteMedia(i,o)){await this._p2pChannel.unmuteRemoteNoLock(i,o);const r=n.get(i);n.set(i,"video"===o?r^a:r^YD.Audio),e.splice(t,1)}}this.store.massSubscribe(e.map((e=>({userId:e.user.uid,type:e.mediaType}))),t);let r=ii(a=Array.from(n.entries())).call(a,((e,t)=>{let[n,r]=t;if(0===r)return e;const i={stream_id:n.uid,stream_type:r};return r&YD.Audio&&(i.audio_ssrc=n._audioSSRC),r&YD.Video&&(i.video_ssrc=n._videoSSRC),e.push(i),e}),[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n,ssrcId:n===iU.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:n===iU.VIDEO?t._rtxSsrcId:void 0}})));const n=new Map;if(r=r.filter((e=>e.video_ssrc&&!this._p2pChannel.isPreSubScribe(e.video_ssrc)||e.audio_ssrc&&!this._p2pChannel.isPreSubScribe(e.audio_ssrc)||!e.video_ssrc&&!e.audio_ssrc)),r.length>0){const e=await this._gateway.subscribeAll(r,!0);((null==e?void 0:e.users)||[]).forEach((e=>{let{stream_id:t,video_error_code:r,audio_error_code:i,error_code:o}=e;(r||i||o)&&n.set(t,{video_error_code:r,audio_error_code:i,error_code:o})}))}if(Array.from(n.entries()).length>0){const e=[];Array.from(n.entries()).forEach((t=>{let[n,r]=t;const i=this.remoteUsers.find((e=>e.uid===n));if(i){let t;r.error_code||r.video_error_code&&r.audio_error_code?t=void 0:r.video_error_code?t=iU.VIDEO:r.audio_error_code&&(t=iU.AUDIO),e.push({user:i,mediaType:t})}})),e.length>0&&await this._p2pChannel.massUnsubscribeNoLock(e)}for(const e of i){const t=n.get(e.user.uid);if(t){const n=t.error_code||"audio"===e.mediaType&&t.audio_error_code||"video"===e.mediaType&&t.video_error_code;if(n){const t=TU(n);rO.error("user:".concat(e.user.uid," mediaType:").concat(e.mediaType," has massSubscribe error ").concat(t.desc)),e.error=new AO(CR.SUBSCRIBE_FAILED,"code ".concat(n,": ").concat(t.desc))}}e.error||("video"===e.mediaType?e.track=e.user.videoTrack:e.track=e.user.audioTrack)}return this.store.massSubscribe(i.filter((e=>!e.error)).map((e=>({userId:e.user.uid,type:e.mediaType}))),void 0,Date.now()),i.forEach((e=>{var n;uO.subscribe(this.store.sessionId,{succ:!!e.error,ec:(null===(n=e.error)||void 0===n?void 0:n.code)||null,video:e.mediaType===iU.VIDEO,audio:e.mediaType===iU.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===iU.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t),preSsrc:this._p2pChannel.isPreSubScribe(e.user._videoSSRC)},!0)})),rO.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),i}catch(t){throw await this._p2pChannel.massUnsubscribeNoLock(e),t}}finally{o(),r()}}async unsubscribe(e,t,n){if(!(e instanceof MF)){const t=this.remoteUsers.find((t=>t.uid===e));if(!t)throw new AO(CR.INVALID_REMOTE_USER,"user is not in the channel");e=t}if(t||this.store.useP2P){if("datachannel"===t)return this._unsubscribeDataChannel(e,n)}else await this._unsubscribeDataChannel(e,n);if(t&&RR(t,"mediaType",["audio","video"]),!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const r=this._users.find((t=>t===e));if(!r){const t=new AO(CR.INVALID_REMOTE_USER,"user is not in the channel");throw rO.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}rO.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));const i=await this._subscribeMutex.lock();try{if(this.store.useP2P)await this._p2pChannel.unsubscribe(e,t);else{const n=await this._p2pChannel.unsubscribe(e,t);n&&await this._gateway.unsubscribe(n,e.uid),t&&"audio"!==t||(e._audio_pre_subscribed=!1),t&&"video"!==t||(e._video_pre_subscribed=!1),e._is_pre_created&&sx(this._users,e),rO.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(t){if(t.code===CR.DISCONNECT_P2P)return void rO.warning("disconnecting p2p, abort unsubscribe request.");throw rO.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}finally{i()}}async _unsubscribeDataChannel(e,t){if(t&&xR(t,"id",0,65535,!0),!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");const n=this._users.find((t=>t===e));if(!n){const t=new AO(CR.INVALID_REMOTE_USER,"user is not in the channel");throw rO.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}let r;if("number"==typeof t){const n=e._dataChannels.find((e=>e.id===t));n&&(r=[n])}else r=e._dataChannels;if(void 0===r){const n=new AO(CR.REMOTE_USER_IS_NOT_PUBLISHED);throw rO.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),n}rO.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(r.map((e=>e.id))));try{const t=await this._p2pChannel.unsubscribeDataChannel(e,r);t&&await this._gateway.unsubscribeDataChannel(t,e.uid),rO.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(t))}catch(t){if(t.code===CR.DISCONNECT_P2P)return void rO.warning("disconnecting p2p, abort unsubscribe request.");throw rO.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}}async massUnsubscribe(e){if(kR(e,"unsubscribeList"),!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");rO.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),e=[...e];const t=new Map;for(let n=e.length-1;n>=0;n--){const{user:r,mediaType:i}=e[n];if(!r){const e=new AO(CR.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw rO.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),e}RR(i,"mediaType",["video","audio",void 0]);const o=this._users.find((e=>e===r));if(!o){rO.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(r.uid,", user is not in the channel")),e.splice(n,1);continue}const a=YD.Video|YD.LwoVideo;if(t.has(r)){const o=t.get(r);let s;switch(i){case"video":s=o&a;break;case"audio":s=o&YD.Audio;break;default:s=o&(YD.Audio|a)}if(s){rO.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(r.uid,",mediaType:").concat(i," twice.")),e.splice(n,1);continue}i?"audio"===i?t.set(r,o|YD.Audio):"video"===i&&t.set(r,o|a):t.set(r,o|YD.Audio|a)}else i?"audio"===i?t.set(r,YD.Audio):"video"===i&&t.set(r,a):t.set(r,YD.Audio|a)}try{const t=await this._p2pChannel.massUnsubscribe(e);t&&await this._gateway.massUnsubscribe(t),rO.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join()))}catch(e){if(e.code===CR.DISCONNECT_P2P)return void rO.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw rO.error("[".concat(this._clientId,"] massUnsubscribe error"),e.toString()),e}}async setLowStreamParameter(e){!function(e){if(!e)throw new TR(CR.INVALID_PARAMS);PR(e.width)||NR(e.width,"streamParameter.width"),PR(e.height)||NR(e.height,"streamParameter.height"),PR(e.framerate)||NR(e.framerate,"streamParameter.framerate"),PR(e.bitrate)||xR(e.bitrate,"streamParameter.bitrate")}(e),(!e.width&&e.height||e.width&&!e.height)&&rO.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),rO.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));const t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,cU.LocalVideoLowTrack)}async enableDualStream(){if(!pO().supportDualStream)throw uO.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new AO(CR.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new AO(CR.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw uO.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,uO.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),rO.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(cU.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw uO.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,uO.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),rO.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(e){RR(e,"role",["audience","host"])}(e),t&&JR(t),"rtc"===this.mode||"p2p"===this.mode)throw rO.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new AO(CR.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&"host"===e)throw new AO(CR.INVALID_OPERATION,"host mode can not set audience latency level");if("audience"===e&&this._p2pChannel.hasLocalMedia())throw new AO(CR.INVALID_OPERATION,"can not set client role to audience when publishing stream");const n=this._config.role;this._joinInfo&&(this._joinInfo.role=e),e!==n&&CN("ENABLE_ROLE_SELECT_EDGE")?(this._gateway.updateClientRole(e,t),this._config.role=e,this._gateway.reconnect("recover",$R.REGIONAL_DISTRIBUTION)):(await this._gateway.setClientRole(e,t),this._config.role=e),rO.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}async _setClientRoleOptions(e){if("rtc"===this.mode||"p2p"===this.mode)return;if("audience"!==this._config.role||this._p2pChannel.hasLocalMedia())return;let t=!1;try{e&&JR(e),await this._gateway.setClientRole(this._config.role,e),t=!0}catch(e){}finally{rO.info("[".concat(this._clientId,"] set client role options ").concat(t?"succeed":"failed",", options is ").concat(e))}}getRemoteInboundOffset(){var e;const t=null===(e=this._p2pChannel.getStats())||void 0===e?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;const n=t.timestamp-Date.now();return Math.abs(n)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?n:0}getNtpWallTimeInMs(){return"visible"===document.visibilityState&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(OR(e,"proxyServer"),!t){if("DISCONNECTED"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new AO(CR.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,uO.setProxyServer(this._proxyServer),rO.setProxyServer(this._proxyServer),rO.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if("DISCONNECTED"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new AO(CR.INVALID_OPERATION,"You have already set the proxy")}if(YR(e))return this._turnServer={servers:e,mode:"original-manual"},void rO.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map((e=>e.urls)).join(","),"."));e.forEach((e=>XR(e))),this._turnServer={servers:e,mode:"manual"},rO.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if("DISCONNECTED"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"you should set license before join channel");if(OR(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new AO(CR.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,rO.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if("DISCONNECTED"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw new AO(CR.INVALID_OPERATION,"You have already set the proxy");const t=[3,4,5];let n;switch(void 0===e&&(e=3),e){case 1:case 2:throw new AO(CR.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:n="proxy3";break;case 4:n="proxy4";break;case 5:n="proxy5";break;default:throw new AO(CR.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=n,this.store.cloudProxyServerMode=n,rO.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if("DISCONNECTED"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"Stop proxy server after leave channel");uO.setProxyServer(),rO.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",rO.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new AO(CR.INVALID_PARAMS,"accessPoints is required.");kR(e.accessPoints.serverList,"accessPoints.serverList"),OR(e.accessPoints.domain,"accessPoints.domain");const t=(e,t)=>{xR(e,t,0,65535,!0)};let n=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),n=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new AO(CR.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");CN("CLOSE_AFB_FOR_LOCAL_AP")&&(SN("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),SN("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const r=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,o=e.accessPoints.serverList.map((e=>r.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(i):e)),a=o.map((e=>"".concat(e,":").concat(n)));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,SN("WEBCS_DOMAIN",a),SN("WEBCS_DOMAIN_BACKUP_LIST",a),SN("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(kR(e.report.hostname,"report.hostname"),SN("EVENT_REPORT_DOMAIN",e.report.hostname[0]),SN("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(SN("EVENT_REPORT_DOMAIN",o[0]),SN("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));let s=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),s=e.report.port),SN("STATS_COLLECTOR_PORT",s),e.report?SN("ENABLE_EVENT_REPORT",!0):SN("ENABLE_EVENT_REPORT",!1);let c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(kR(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=o[0];let l=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),l=e.log.port),SN("LOG_UPLOAD_SERVER","".concat(c,":").concat(l));let d=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(kR(e.cds.hostname,"cds.hostname"),d=e.cds.hostname):d=o;let u=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),u=e.cds.port),SN("CDS_AP",d.map((e=>"".concat(e,":").concat(u)))),e.cds?SN("ENABLE_CONFIG_DISTRIBUTE",!0):SN("ENABLE_CONFIG_DISTRIBUTE",!1),rO.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(kR(e,"serverList"),OR(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new AO(CR.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map((e=>n.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(t):e)),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,SN("WEBCS_DOMAIN",e),SN("WEBCS_DOMAIN_BACKUP_LIST",e),SN("GATEWAY_DOMAINS",[t]),SN("EVENT_REPORT_DOMAIN",e[0]),SN("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),SN("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),rO.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(RR(e,"streamType",[0,1,4,5,6,7,8,9]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(e){throw rO.error("[".concat(this._clientId,"] set default remote video stream type error"),e.toString()),e}else rO.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){RR(t,"streamType",[0,1,4,5,6,7,8,9]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout((()=>{const t=this._users.find((t=>t.uid===e));t&&t.videoTrack&&t.videoTrack.updateMediaStreamTrackResolution()}),2e3)}catch(e){throw rO.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}rO.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){RR(t,"fallbackType",[0,1,2,3,4,5,6,7,8]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw rO.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}rO.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,n,r){!function(e){RR(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),OR(t,"secret");const i=["aes-128-gcm2","aes-256-gcm2"];if(Br(i).call(i,e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new AO(CR.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new AO(CR.INVALID_PARAMS,"current encrypt mode does not need salt");if(r){if(IR(r,"encryptDataStream"),!Br(i).call(i,e))throw new AO(CR.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||rO.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=fx(n))}async renewToken(e){if(OR(e,"token",1,2047),!this._key||!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"renewToken should not be called before user join");const t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const n=await this._renewTokenMutex.lock();try{if(CN("USE_NEW_TOKEN")){rO.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const t=await TF(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Ux);rO.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:t})}else rO.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});rO.debug("[".concat(this._clientId,"] renewToken success"))}catch(e){throw this._key=t,this._joinInfo.token=t,rO.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}finally{n()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?rO.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval((()=>{const e=this._p2pChannel.getAudioLevels();this.safeEmit(ZR.VOLUME_INDICATOR,e)}),CN("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if("h264"!==this.codec)throw new AO(CR.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new AO(CR.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new AO(CR.LIVE_STREAMING_TASK_CONFLICT);const n=t?PD.TRANSCODE:PD.RAW;return this._createLiveStreamingClient(n).startLiveStreamingTask(e,n)}setLiveTranscoding(e){return this._createLiveStreamingClient(PD.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((t=>t&&t.hasUrl(e)));if(!t.length)throw new AO(CR.INVALID_PARAMS,"can not find live streaming url to stop");await nh.all(t.map((t=>t&&t.stopLiveStreamingTask(e))))}async startChannelMediaRelay(e){UF(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}async updateChannelMediaRelay(e){UF(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}async stopChannelMediaRelay(){const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}sendAudioMetadata(e){this._p2pChannel instanceof jj&&this._p2pChannel.addAudioMetadata(e)}async sendStreamMessage(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"can not send data stream, not joined");if(("string"==typeof e||e instanceof Uint8Array)&&(e={payload:e}),"string"==typeof e.payload){const t=new TextEncoder;e.payload=t.encode(e.payload)}let r=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Br(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(r=!0,e.payload=await async function(e,t,n){var r;const i=ii(r=Array.from(n)).call(r,((e,t)=>e+t),0),o={serverTs:0,seq:BN++,length:n.length,checkSum:i},a=new Uint8Array(xx(i,2)),s=new ArrayBuffer(PN),c=new DataView(s);c.setUint32(0,o.serverTs),c.setUint16(4,o.seq),c.setUint16(6,o.length),c.setUint16(8,o.checkSum);const l=16-n.length%16;n=gx(n,new Uint8Array(l));const d=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:e,tagLength:NN,additionalData:a},t,n);return gx(new Uint8Array(s),new Uint8Array(d))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new AO(CR.INVALID_PARAMS,r?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(TD.DATA_STREAM,{payload:fx(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-zj},!n)}sendMetadata(e){if(!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new AO(CR.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(TD.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:fx(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(oO),!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"can not send custom report, not joined");await uO.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){RR(t.spatialLayer,"spatialLayer",[0,1,2,3]),RR(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw rO.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}async setRTMConfig(e){const{apRTM:t=!1,rtmFlag:n}=e;if(IR(t,"apRTM"),xR(n,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=n,rO.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState)&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=n,this._gateway.setRTM2Flag(n)}_reset(){if(rO.debug("[".concat(this._clientId,"] reset client")),function(e){const t=PL.indexOf(e);-1!==t&&PL.splice(t,1)}(this._clientId),this.store.hasStartJoinChannel=!1,this.store.isABTestSuccess=!1,this._axiosCancelSource.cancel(),this._axiosCancelSource=DI.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&fQ(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId&&uO.removeSid(this._sessionId),this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach((e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach((e=>e._close())),e._dataChannels.length=0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Lx("client-publish",this._clientId),this._subscribeMutex=new Lx("client-subscribe",this._clientId),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(e){}if(this._moderation)try{this.setImageModeration(!1)}catch(e){}}_startSession(e,t){var n;const r=e||_x();e?rO.debug("[".concat(this._clientId,"] new Session ").concat(r)):rO.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(r));const i=e?"":this._sessionId||"";this._sessionId=r,this.store.sessionId=r,uO.addSid(r);const o={lts:(new Date).getTime(),mode:this.mode,buildFormat:1,stringUid:(null==t?void 0:t.stringUid)||(null===(n=this._joinInfo)||void 0===n?void 0:n.stringUid),channelProfile:"live"===this.mode?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:i,clientRole:"audience"===this.role?2:1};uO.sessionInit(this._sessionId,zV({cname:t.channel,appid:t.appId},o)),this._joinInfo&&(this._joinInfo.sid=r),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=r)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new AO(CR.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&CN("FORCE_TURN")&&!CN("TURN_ENABLE_TCP")&&!CN("TURN_ENABLE_UDP"))throw new AO(CR.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");rO.debug("[".concat(this._clientId,"] publish high stream"));try{const n=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this.store.useP2P){const t=(await n.next()).value;if(t){try{await this._gateway.sendExtensionMessage(yU.PUBLISH,t,!0)}catch(e){throw n.throw(e),e}await n.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const r=(await n.next()).value;if(r){var t;let i;try{i=await this._gateway.publish(this._uid,r,!0)}catch(e){if(e.code!==CR.DISCONNECT_P2P)throw n.throw(e),e}await n.next((null===(t=i)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t instanceof IB&&t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig).catch((e=>{rO.debug("[".concat(this._clientId,"] stop setVideoProfile, because websocket is closed"))})),!t.muted&&t.enabled||await this._p2pChannel.muteLocalTrack(t)}}catch(t){if(this._p2pChannel.reportPublishEvent(!1,null==t?void 0:t.code,e),(null==t?void 0:t.code)===CR.WS_ABORT)return;throw t}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new AO(CR.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));rO.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),n=(await e.next()).value;if(n){var t;let r;try{r=await this._gateway.publish(this._uid,n,!0)}catch(t){if(t.code!==CR.DISCONNECT_P2P)throw e.throw(t),t}e.next((null===(t=r)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(e){if(this._p2pChannel.reportPublishEvent(!1,null==e?void 0:e.code,void 0,!0),(null==e?void 0:e.code)===CR.WS_ABORT)return;throw e}}_createLiveStreamingClient(e){const t=()=>{if(!this._joinInfo||!this._appId)return new AO(CR.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const e=(t={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},UM("LiveStreaming").create(t));var t;return e.onLiveStreamError=(e,t)=>{uO.reportApiInvoke(this._sessionId,{name:zR.ON_LIVE_STREAM_ERROR,options:[e,t],tag:KR.TRACER}).onSuccess(),this.safeEmit(ZR.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{uO.reportApiInvoke(this._sessionId,{name:zR.ON_LIVE_STREAM_WARNING,options:[e,t],tag:KR.TRACER}).onSuccess(),this.safeEmit(ZR.LIVE_STREAMING_WARNING,e,t)},e.on(FD.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new AO(CR.INVALID_OPERATION,"can not find join info to get worker manager"));(async function(e,t,n,r){const i=CN("UAP_AP").slice(0,CN("AJAX_REQUEST_CONCURRENT")).map((e=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")));return await oF(i,e,t,n,r)})(e,this._joinInfo,this._axiosCancelSource.token,Ux).then(t).catch(n)})),e};return e===PD.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||t(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||t(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo)return new AO(CR.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:t,sendResolutionHeight:n}=this.getLocalVideoStats(),r=(e={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:t,height:n}},UM("ChannelMediaRelay").create(e));r.on("state",(e=>{e===zD.RELAY_STATE_FAILURE&&r&&r.dispose(),this.safeEmit(ZR.CHANNEL_MEDIA_RELAY_STATE,e)})),r.on("event",(e=>{this.safeEmit(ZR.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._channelMediaRelayClient=r,this._statsCollector.onStatsChanged=(e,t)=>{var n;"resolution"===e&&(null===(n=this._channelMediaRelayClient)||void 0===n||n.setVideoProfile(t))}}var e;return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){const{added:n,deleted:r}=e,i=[];if(t){const e=[];this._users.forEach((t=>{t._dataChannels.forEach((r=>{n.every((e=>e.uid!==t._uintid||e.stream_id!==r.id))&&e.push({uid:t._uintid,stream_id:r.id,ordered:r.ordered,max_retrans_times:r.maxRetransmits,metadata:r.metadata})}))})),e.length>0&&this._handleUpdateDataChannel({added:[],deleted:e})}Array.isArray(n)&&n.length>0&&n.forEach((e=>{const{uid:n,stream_id:r,ordered:o,max_retrans_times:a,metadata:s}=e,c=this._users.find((e=>e._uintid===n));if(c){if(rO.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(n)),Br(i).call(i,c)||i.push(c),c._uintid||(c._uintid=n),-1===c._dataChannels.findIndex((t=>t.id===e.stream_id))){const e={id:r,ordered:!!o,maxRetransmits:a,metadata:s},n=function(e){return MM(e,!0)}(e);c._dataChannels.push(n),rO.info("[".concat(this._clientId,"] remote user ").concat(c.uid," published datachannel")),t||this.safeEmit(ZR.USER_PUBLISHED,c,"datachannel",e)}this._p2pChannel.hasPendingRemoteDataChannel(c,e.stream_id)&&(rO.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(c.uid," after reconnect.")),this._subscribeDataChannel(c,e.stream_id).catch((e=>{rO.error("[".concat(this._clientId,"] resubscribe datachannel error"),e.toString())})))}else rO.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"))})),t&&(this.safeEmit(ZR.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(r)&&r.length>0&&r.forEach((e=>{const{uid:t,stream_id:n}=e,r=this._users.find((e=>e._uintid===t));if(!r)return void rO.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const i=r._dataChannels.find((t=>t.id===e.stream_id));i&&(rO.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(t)),this._p2pChannel.unsubscribeDataChannel(r,[i]).then((e=>{if(r._dataChannels=r._dataChannels.filter((e=>e!==i)),e)return this._gateway.unsubscribeDataChannel(e,r.uid)})),rO.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished datachannel ,id:").concat(i.id)),this.safeEmit(ZR.USER_UNPUBLISHED,r,"datachannel",i._config))}))}_handleRemoveDataChannels(e){const t=this._users.find((t=>t.uid===e.uid));if(t){if(void 0!==t._dataChannels&&t._dataChannels.length>0){rO.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));const n=()=>{rO.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach((e=>{this.safeEmit(ZR.USER_UNPUBLISHED,t,"datachannel",e._config)}))};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then((e=>{if(e)return this._gateway.unsubscribeDataChannel(e,t.uid)})),n()}}else rO.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(WD.UPDATE_GATEWAY_CONFIG,(()=>{!function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void rO.error("Error loading sdk config",e.message)}if(e)try{const t=JSON.parse(window.atob(e)),n=Date.now();Object.keys(t).forEach((e=>{const{value:r,type:i,expires:o}=t[e];o&&o<=n||i||LL()||!Object.prototype.hasOwnProperty.call(yN,e)||(IN[e]=r,_N[e]=r,rO.debug("Update gateway parameters from config distribute",e,r))}))}catch(e){rO.error("Error update config from local cache",e.message)}}()})),this._gateway.on(WD.DISCONNECT_P2P,(async()=>{await this._p2pChannel.disconnectForReconnect()})),this._gateway.on(WD.CONNECTION_STATE_CHANGE,((e,t,n)=>{var r;if(n===qR.FALLBACK)return;const i=()=>{this.safeEmit(ZR.CONNECTION_STATE_CHANGE,e,t,n)};if(uO.reportApiInvoke(this._sessionId||(null===(r=this._gateway.joinInfo)||void 0===r?void 0:r.sid)||null,{name:zR.CONNECTION_STATE_CHANGE,options:[e,t,n],tag:KR.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:n})),rO.info("[".concat(this._clientId,"] signal connection state change: ").concat(t," -> ").concat(e)),"DISCONNECTED"===e)return this._reset(),void i();if("RECONNECTING"===e)this._users.forEach((e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._is_pre_created||(e._audio_pre_subscribed||(e._audioSSRC=void 0,e._audioOrtc=void 0),e._video_pre_subscribed||(e._videoSSRC=void 0,e._videoOrtc=void 0,e._rtxSsrcId=void 0),e._cname=void 0)})),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var o;this._streamFallbackTypeCacheMap.forEach(((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch((e=>{rO.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e)}))})),this._remoteStreamTypeCacheMap.forEach(((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch((e=>{rO.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e)}))})),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(o=this._joinInfo)||void 0===o?void 0:o.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then((()=>{rO.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))})).catch((e=>{rO.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(e))})),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter((e=>!e._trust_in_room_)).forEach((e=>{rO.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(e.uid)),this._handleUserOffline({uid:e.uid})})))}),3e3),this._streamRemovedTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach((e=>{e._trust_audio_mute_state_||(rO.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,iU.AUDIO,!1)),e._trust_video_mute_state_||(rO.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,iU.VIDEO,!1)),e._trust_audio_enabled_state_||(rO.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),e._trust_video_enabled_state_||(rO.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_video_stream_added_state_||(rO.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(e.uid)),this._handleResetAddStream(e,"video")),e._trust_audio_stream_added_state_||(rO.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(e.uid)),this._handleResetAddStream(e,"audio")),e._video_added_||e._audio_added_||(rO.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))})))}),1e3))}i()})),this._gateway.on(WD.REQUEST_NEW_GATEWAY_LIST,(async(e,t)=>{if(!this._joinInfo)return t(new AO(CR.UNEXPECTED_ERROR,"can not recover, no join info"));try{let t;const n=await AQ(zV(zV({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));n?(t=n.ap,mQ(n),this._joinInfo.preload=!0):(t=await vF(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Ux,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res,this._joinInfo.gatewayAddrs=t.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=t.gatewayInfo.uni_lbs_ip);const r=[];t.gatewayInfo.gatewayAddrs.forEach((e=>{let{address:t}=e;const[n,i]=t.split(":");this._joinInfo&&this._joinInfo.proxyServer?r.push({proxy:this._joinInfo.proxyServer,host:n,port:i}):r.push({host:n,port:i})})),e(r)}catch(e){t(e)}})),this._gateway.on(WD.NETWORK_QUALITY,(e=>{"normal"===this._networkQualitySensitivity&&this.safeEmit(ZR.NETWORK_QUALITY,e)})),this._gateway.on(WD.STREAM_TYPE_CHANGE,((e,t)=>{this.safeEmit(ZR.STREAM_TYPE_CHANGED,e,t),uO.reportApiInvoke(this._sessionId,{name:zR.STREAM_TYPE_CHANGE,options:[e,t],tag:KR.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))})),this._gateway.on(WD.IS_P2P_DISCONNECTED,(e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)})),this._gateway.on(WD.REQUEST_P2P_CONNECTION_PARAMS,(async(e,t,n)=>{try{let n=await this._p2pChannel.getEstablishParams();CN("ENABLE_PREALLOC_PC")&&n||(n=await this._p2pChannel.startP2PConnection(e)),t(n)}catch(e){n(e)}})),this._gateway.on(WD.JOIN_RESPONSE,((e,t)=>{if(this.store.useP2P)return;let n;e.attributes?n=e.attributes.userAttributes.preSubSsrcs:rO.debug("no attributes in joinResponse");const r=uM(e.ortc,t,n);this._p2pChannel.connect(r)})),this._gateway.on(WD.PRE_CONNECT_PC,(async e=>{const{candidates:t,fingerprint:n}=e;if(this._joinInfo&&t.length>0&&!this._p2pChannel.isPlanB){var r;await this._p2pChannel.startP2PConnection({turnServer:this._joinInfo.turnServer});const{cert:e,cid:i}=this._joinInfo.apResponse;await this._p2pChannel.connect({iceParameters:{iceUfrag:"".concat(i,"_").concat(e),icePwd:"".concat(i,"_").concat(e)},dtlsParameters:{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(r=CN("FINGERPRINT"))&&void 0!==r?r:n}]},candidates:t,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:"active",cname:"o/i14u9pJrxRKAsu",preallocation:!0})}}))}_handleGatewaySignalEvents(){this._gateway.signal.on(RD.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(RD.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(RD.ON_ADD_AUDIO_STREAM,(e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc))),this._gateway.signal.on(RD.ON_ADD_VIDEO_STREAM,(e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId))),this._gateway.signal.on(RD.ON_REMOTE_DATASTREAM_UPDATE,(e=>{this._handleUpdateDataChannel(e)})),this._gateway.signal.on(RD.ON_REMOTE_FULL_DATASTREAM_INFO,(e=>{this._handleUpdateDataChannel({added:e.datastreams||[],deleted:[]},!0)})),this._gateway.signal.on(RD.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(RD.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(RD.MUTE_AUDIO,(e=>this._handleMuteStream(e.uid,iU.AUDIO,!0))),this._gateway.signal.on(RD.UNMUTE_AUDIO,(e=>this._handleMuteStream(e.uid,iU.AUDIO,!1))),this._gateway.signal.on(RD.MUTE_VIDEO,(e=>this._handleMuteStream(e.uid,iU.VIDEO,!0))),this._gateway.signal.on(RD.UNMUTE_VIDEO,(e=>this._handleMuteStream(e.uid,iU.VIDEO,!1))),this._gateway.signal.on(RD.RECEIVE_METADATA,(e=>{const t=px(e.metadata);this.safeEmit(ZR.RECEIVE_METADATA,e.uid,t)})),this._gateway.signal.on(RD.ON_DATA_STREAM,(async e=>{var t;if(!e)return;let n=px(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Br(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<PN)throw new AO(CR.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(PN));const t=await async function(e,t,n){const r=n.subarray(0,PN),i=r.slice(8,PN),o=(i[0]<<8)+i[1],a=(r[6]<<8)+r[7],s=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:e,tagLength:NN,additionalData:new Uint8Array(xx(o,2))},t,n.subarray(PN));return new Uint8Array(s).subarray(0,a)}(this._encryptDataStreamIv,this._encryptDataStreamKey,n);n=t}let r=0;if(e.ordered||e.syncWithAudio){const t=this._p2pChannel.getStats(),n=this.remoteUsers.find((t=>t.uid===e.uid)),i=null==t?void 0:t.audioRecv.find((e=>e.ssrc===(null==n?void 0:n._audioSSRC)));r=null==i?void 0:i.jitterBufferMs}(null==r||Number.isNaN(r))&&(r=0),Xj(zV(zV({},e),{},{payload:n}),r,{id:this._clientId,onStreamMessage:"function"==typeof this.onStreamMessage?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})})),this._gateway.signal.on(RD.ON_CRYPT_ERROR,(()=>{hx((()=>{rO.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(ZR.CRYPT_ERROR)}),this._sessionId)})),this._gateway.signal.on(RD.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(RD.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{rO.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,qR.TOKEN_EXPIRE),this.safeEmit(ZR.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()})),this._gateway.signal.on(RD.ON_STREAM_FALLBACK_UPDATE,(e=>{rO.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(ZR.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")})),this._gateway.signal.on(RD.ON_PUBLISH_STREAM,(e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),rO.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))})),this._gateway.signal.on(RD.ENABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)})),this._gateway.signal.on(RD.DISABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)})),this._gateway.signal.on(CD.REQUEST_TIMEOUT,((e,t)=>{if(this._joinInfo)switch(e){case TD.PUBLISH:{if(!t)return;const e=t.ortc;if(e){var n,r;const i=e.some((e=>{let{stream_type:t}=e;return t===GD.Audio})),o=e.some((e=>{let{stream_type:t}=e;return t!==GD.Audio})),a=e.some((e=>{let{stream_type:t}=e;return t===GD.Screen||t===GD.ScreenLow}));"offer"===t.state&&uO.publish(this._joinInfo.sid,{eventElapse:kF.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:CR.TIMEOUT,audio:i,video:o,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:a,audioName:i?null===(n=e.find((e=>{let{stream_type:t}=e;return t===GD.Audio})))||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId.toString():void 0,videoName:o?null===(r=e.find((e=>{let{stream_type:t}=e;return t!==GD.Audio})))||void 0===r||null===(r=r.ssrcs[0])||void 0===r?void 0:r.ssrcId.toString():void 0})}break}case TD.SUBSCRIBE:t&&uO.subscribe(this._joinInfo.sid,{succ:!1,ec:CR.TIMEOUT,audio:t.stream_type===iU.AUDIO,video:t.stream_type===iU.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:kF.measureFromSubscribeStart(this.store.clientId,t.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(t.ssrcId)})}})),this._gateway.signal.on(RD.ON_P2P_OK,(e=>{this.uid,this._uid})),this._gateway.signal.on(RD.ON_PUBLISHED_USER_LIST,(e=>{if(null==e||!e.users)return;CN("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter((e=>!BL(e.string_id||e.stream_id,this.channelName))));const t=[],n=[];for(const r of e.users){let e=this._users.find((e=>e._uintid===r.stream_id));e?e._trust_in_room_=!0:(e=new MF(r.string_id||r.stream_id,r.stream_id),this._users.push(e),0===this.getListeners(ZR.PUBLISHED_USER_LIST).length&&(rO.debug("[".concat(this._clientId,"] user online"),r.stream_id),this.safeEmit(ZR.USER_JOINED,e)));const i=YD.Audio&r.stream_type,o=(YD.Video|YD.LwoVideo)&r.stream_type,a=0!=(65280&r.stream_type),s=i&&e.hasAudio,c=o&&e.hasVideo;o&&(e._trust_video_stream_added_state_=!0,e._video_added_=!0,e._videoSSRC=r.video_ssrc,e._rtxSsrcId=r.video_rtx),i&&(e._trust_audio_stream_added_state_=!0,e._audio_added_=!0,e._audioSSRC=r.audio_ssrc),i&&!s&&0===this.getListeners(ZR.PUBLISHED_USER_LIST).length&&(rO.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published audio")),this.safeEmit(ZR.USER_PUBLISHED,e,"audio")),o&&!c&&0===this.getListeners(ZR.PUBLISHED_USER_LIST).length&&(rO.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published video")),this.safeEmit(ZR.USER_PUBLISHED,e,"video")),(i&&!s||o&&!c||a)&&t.push(e),o&&this._p2pChannel.hasPendingRemoteMedia(e,"video")&&n.push({user:e,mediaType:"video"}),i&&this._p2pChannel.hasPendingRemoteMedia(e,"audio")&&n.push({user:e,mediaType:"audio"})}n.length>0&&(rO.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(n.map((e=>"user: ".concat(e.user.uid,", mediaType: ").concat(e.mediaType))).join("; ")," ")),this.massSubscribe(n).catch((e=>{rO.error("[".concat(this._clientId,"] mass resubscribe error"),e.toString())}))),this.getListeners(ZR.PUBLISHED_USER_LIST).length>0?CN("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(rO.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map((e=>e.uid)).join(", "))),this.safeEmit(ZR.PUBLISHED_USER_LIST,t)):rO.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map((e=>e.uid)).join(", ")))})),this._gateway.signal.on(RD.ON_RTP_CAPABILITY_CHANGE,(e=>{const{video_codec:t}=e;this._p2pChannel instanceof jj&&this._p2pChannel.updateRemoteRTPCapabilities(t.map((e=>e.toLowerCase())).filter((e=>{var t;return Br(t=Object.keys(xN)).call(t,e)})))}))}_handleP2PEvents(){this._gateway.signal.on(RD.ON_USER_OFFLINE,(()=>{this._p2pChannel.disconnectForReconnect()})),this._gateway.signal.on(yU.PUBLISH,((e,t,n)=>{const{uid:r}=e;e.forEach((e=>{const{kind:i,ssrcs:o,mid:a,isMuted:s}=e;this._handleP2PAddAudioOrVideoStream(i,r,o[0].ssrcId,a);const c=this._users.find((e=>e.uid===r));return c&&this.store.useP2P?this._p2pChannel.mockSubscribe(c,i,o[0].ssrcId,a).then((()=>{t()})).catch(n):t(),this._handleMuteStream(r,i,!!s)}))})),this._gateway.signal.on(yU.CALL,(async(e,t,n)=>{if(this.store.useP2P)try{var r;t(await this._p2pChannel.startP2P({turnServer:null===(r=this._joinInfo)||void 0===r?void 0:r.turnServer},e))}catch(e){n(e)}})),this._gateway.signal.on(CD.P2P_CONNECTION,(async e=>{this.store.useP2P&&(await this._p2pChannel).p2pConnect(e)})),this._gateway.signal.on(yU.UNPUBLISH,(async(e,t,n)=>{if(this.store.useP2P){const{unpubMsg:r,uid:i}=e,o=this._users.find((e=>e.uid===i));if(!o)return rO.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i)),void t();try{r.forEach((async e=>{let{stream_type:t}=e;const n=t===GD.Audio?iU.AUDIO:iU.VIDEO;await this._p2pChannel.unsubscribe(o,n),this._handleMuteStream(i,n,!0)})),t()}catch(e){n(e)}}})),this._gateway.signal.on(yU.CONTROL,(async(e,t)=>{const{action:n}=e;switch(n){case EU.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,iU.VIDEO,!0);break;case EU.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,iU.AUDIO,!0);break;case EU.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,iU.VIDEO,!1);break;case EU.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,iU.AUDIO,!1)}})),this._gateway.signal.on(yU.RESTART_ICE,(async(e,t,n)=>{if(this.store.useP2P)try{const{direction:n,iceParameter:r}=e;n!==xD.SEND_ONLY||r?t(await this._p2pChannel.restartICE(n,r)):(this._p2pChannel.handleDisconnect(n),t())}catch(e){n(e)}})),this._gateway.signal.on(yU.CANDIDATE,(e=>{if(this.store.useP2P){const{candidate:t,direction:n}=e;this._p2pChannel.addRemoteCandidate(t,n)}})),this._p2pChannel.on(dU.RequestP2PRestartICE,(async(e,t,n)=>{try{const{direction:n}=e;t(await this._gateway.sendExtensionMessage(yU.RESTART_ICE,e,n===xD.SEND_ONLY))}catch(e){n(e)}})),this._p2pChannel.on(dU.LocalCandidate,(e=>{this._gateway.sendExtensionMessage(yU.CANDIDATE,JSON.stringify(e),!0)})),this._p2pChannel.on(dU.RequestP2PMuteLocal,(async(e,t,n)=>{try{await this._gateway.sendExtensionMessage(yU.CONTROL,e,!0),t()}catch(e){n(e)}})),this._p2pChannel.on(dU.RequestP2PUnmuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===CR.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(dU.RequestP2PMuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===CR.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(dU.StateChange,((e,t)=>{t===lU.Connected&&this._p2pChannel.republish()}))}_handleP2PChannelEvents(){this._p2pChannel.on(dU.PeerConnectionStateChange,(e=>{const t=this._peerConnectionState;e!==t&&(this.safeEmit(ZR.PEERCONNECTION_STATE_CHANGE,e,t),this._peerConnectionState=e)})),this._p2pChannel.on(dU.RequestMuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===CR.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(dU.RequestUnmuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===CR.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(dU.RequestRePublish,((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),this._p2pChannel.on(dU.RequestRePublishDataChannel,((e,t,n)=>{nh.all(e.map((async e=>{const t=await this._p2pChannel.publishDataChannel([e]);try{t.forEach((e=>{this._uid&&this._gateway.publishDataChannel(this._uid,e,!0)}))}catch(e){if(e.code!==CR.DISCONNECT_P2P)throw e}}))).then(t).catch(n)})),this._p2pChannel.on(dU.RequestReSubscribe,(async(e,t,n)=>{try{for(const{user:t,kind:n}of e)n===iU.VIDEO?await this.subscribe(t,"video"):await this.subscribe(t,"audio");t()}catch(e){n(e)}})),this._p2pChannel.on(dU.RequestUpload,((e,t)=>{this._gateway.upload(e,t)})),this._p2pChannel.on(dU.RequestUploadStats,(e=>{this._gateway.uploadWRTCStats(e)})),this._p2pChannel.on(dU.MediaReconnectStart,(e=>{this.safeEmit(ZR.MEDIA_RECONNECT_START,e)})),this._p2pChannel.on(dU.MediaReconnectEnd,(e=>{this.safeEmit(ZR.MEDIA_RECONNECT_END,e)})),this._p2pChannel.on(dU.NeedSignalRTT,(e=>{e(this._gateway.getSignalRTT())})),this._p2pChannel.on(dU.RequestRestartICE,(async e=>{if(this.store.useP2P)return;const t=await this._p2pChannel.restartICE(e),n=await t.next();if(n.done)return;const r=n.value;let i;try{i=await this._gateway.restartICE({iceParameters:r})}catch(e){return void t.throw(e)}const{iceParameters:o}=function(e){const t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(i);await t.next({remoteIceParameters:o})})),this._p2pChannel.on(dU.RequestReconnect,(async()=>{this._gateway.reconnect()})),this._p2pChannel.on(dU.RequestReconnectPC,(async()=>{var e;const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:i,gatewayAddress:o}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:n,rtpCapabilities:r}),a=uM(i,o);await this._p2pChannel.connect(a),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()})),this._p2pChannel.on(dU.RequestUnpublishForReconnectPC,(async(e,t,n)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):n()})),this._p2pChannel.on(dU.P2PLost,(()=>{this.safeEmit(ZR.P2P_LOST,this.store.uid)})),this._p2pChannel.on(dU.UpdateVideoEncoder,(e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)})),this._p2pChannel.on(dU.ConnectionTypeChange,(e=>{this.safeEmit(ZR.IS_USING_CLOUD_PROXY,e)})),this._p2pChannel.on(dU.RequestLowStreamParameter,(e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(dU.QueryClientConnectionState,(e=>{e(this.connectionState)})),this._p2pChannel.on(dU.AudioMetadata,(e=>{this.safeEmit(ZR.AUDIO_METADATA,e)}))}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if(!this._joinInfo||"CONNECTED"!==this.connectionState)throw new AO(CR.INVALID_OPERATION,"[".concat(this._clientId,"] can not create content inspect, please join channel first"));if(this._inspect)throw new AO(CR.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));try{const n=(t={config:e},UM("ContentInspect").create(t));this._inspect=n,this.handleVideoInspectEvents(n);const{appId:r,cname:i,sid:o,token:a,uid:s,cid:c,vid:l}=this._joinInfo;await n.init({appId:r,areaCode:"",cname:i,sid:o,token:a,uid:s,cid:c,vid:l?Number(l):0},Ux)}catch(e){throw Array.isArray(e)?e[0]:e}var t}handleVideoInspectEvents(e){e.on(hU.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(ZR.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,n),n===uU.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.safeEmit(ZR.CONTENT_INSPECT_ERROR,new AO(CR.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}})),e.on(hU.INSPECT_RESULT,((e,t)=>{var n;if((null==t?void 0:t.code)===CR.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return rO.debug("Stop inspect content because that has left channel"),null==this||null===(n=this._inspect)||void 0===n||n.close(),void(this._inspect=void 0);this.safeEmit(ZR.CONTENT_INSPECT_RESULT,e,t)})),e.on(hU.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}async disableContentInspect(){if(!this._inspect)throw new AO(CR.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(IR(e,"enabled"),e){if(!t)throw new AO(CR.INVALID_PARAMS,"config is required");if($Q(t),!this._joinInfo)throw new AO(CR.INVALID_OPERATION,"can not create image moderation, please join channel first");try{if(this._moderation)this._moderation.updateConfig(t);else{const e=(n={config:t},UM("ImageModeration").create(n));this._moderation=e,this.handleImageModerationEvents(e);const{appId:r,cname:i,sid:o,token:a,uid:s,cid:c,vid:l}=this._joinInfo;await e.init({appId:r,areaCode:"",cname:i,sid:o,token:a,uid:s,cid:c,vid:l?Number(l):0},Ux)}}catch(e){throw Array.isArray(e)?e[0]:e}}else{var n;if(!this._moderation)throw new AO(CR.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}}handleImageModerationEvents(e){e.on(gU.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(ZR.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,n),t===mU.CONNECTED){if("CONNECTED"!==this.connectionState)throw this.setImageModeration(!1),new AO(CR.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}})),e.on(gU.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}setP2PTransport(e){if(function(e){RR(e,"transport",["default","auto","relay","sd-rtn"])}(e),"p2p"!==this.mode)throw new AO(CR.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,rO.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}getJoinChannelServiceRecords(){return rO.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){IR(e,"enabled"),SN("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}},vD(VV.prototype,"leave",[tV],Object.getOwnPropertyDescriptor(VV.prototype,"leave"),VV.prototype),vD(VV.prototype,"publish",[nV],Object.getOwnPropertyDescriptor(VV.prototype,"publish"),VV.prototype),vD(VV.prototype,"unpublish",[rV],Object.getOwnPropertyDescriptor(VV.prototype,"unpublish"),VV.prototype),vD(VV.prototype,"subscribe",[iV],Object.getOwnPropertyDescriptor(VV.prototype,"subscribe"),VV.prototype),vD(VV.prototype,"presubscribe",[oV],Object.getOwnPropertyDescriptor(VV.prototype,"presubscribe"),VV.prototype),vD(VV.prototype,"massSubscribe",[aV],Object.getOwnPropertyDescriptor(VV.prototype,"massSubscribe"),VV.prototype),vD(VV.prototype,"unsubscribe",[sV],Object.getOwnPropertyDescriptor(VV.prototype,"unsubscribe"),VV.prototype),vD(VV.prototype,"massUnsubscribe",[cV],Object.getOwnPropertyDescriptor(VV.prototype,"massUnsubscribe"),VV.prototype),vD(VV.prototype,"setLowStreamParameter",[lV],Object.getOwnPropertyDescriptor(VV.prototype,"setLowStreamParameter"),VV.prototype),vD(VV.prototype,"enableDualStream",[dV],Object.getOwnPropertyDescriptor(VV.prototype,"enableDualStream"),VV.prototype),vD(VV.prototype,"disableDualStream",[uV],Object.getOwnPropertyDescriptor(VV.prototype,"disableDualStream"),VV.prototype),vD(VV.prototype,"setClientRole",[AV],Object.getOwnPropertyDescriptor(VV.prototype,"setClientRole"),VV.prototype),vD(VV.prototype,"_setClientRoleOptions",[hV],Object.getOwnPropertyDescriptor(VV.prototype,"_setClientRoleOptions"),VV.prototype),vD(VV.prototype,"setProxyServer",[pV],Object.getOwnPropertyDescriptor(VV.prototype,"setProxyServer"),VV.prototype),vD(VV.prototype,"setTurnServer",[fV],Object.getOwnPropertyDescriptor(VV.prototype,"setTurnServer"),VV.prototype),vD(VV.prototype,"setLicense",[mV],Object.getOwnPropertyDescriptor(VV.prototype,"setLicense"),VV.prototype),vD(VV.prototype,"startProxyServer",[gV],Object.getOwnPropertyDescriptor(VV.prototype,"startProxyServer"),VV.prototype),vD(VV.prototype,"stopProxyServer",[vV],Object.getOwnPropertyDescriptor(VV.prototype,"stopProxyServer"),VV.prototype),vD(VV.prototype,"setLocalAccessPointsV2",[yV],Object.getOwnPropertyDescriptor(VV.prototype,"setLocalAccessPointsV2"),VV.prototype),vD(VV.prototype,"setLocalAccessPoints",[bV],Object.getOwnPropertyDescriptor(VV.prototype,"setLocalAccessPoints"),VV.prototype),vD(VV.prototype,"setRemoteDefaultVideoStreamType",[EV],Object.getOwnPropertyDescriptor(VV.prototype,"setRemoteDefaultVideoStreamType"),VV.prototype),vD(VV.prototype,"setRemoteVideoStreamType",[wV],Object.getOwnPropertyDescriptor(VV.prototype,"setRemoteVideoStreamType"),VV.prototype),vD(VV.prototype,"setStreamFallbackOption",[_V],Object.getOwnPropertyDescriptor(VV.prototype,"setStreamFallbackOption"),VV.prototype),vD(VV.prototype,"setEncryptionConfig",[SV],Object.getOwnPropertyDescriptor(VV.prototype,"setEncryptionConfig"),VV.prototype),vD(VV.prototype,"renewToken",[CV],Object.getOwnPropertyDescriptor(VV.prototype,"renewToken"),VV.prototype),vD(VV.prototype,"enableAudioVolumeIndicator",[TV],Object.getOwnPropertyDescriptor(VV.prototype,"enableAudioVolumeIndicator"),VV.prototype),vD(VV.prototype,"startLiveStreaming",[IV],Object.getOwnPropertyDescriptor(VV.prototype,"startLiveStreaming"),VV.prototype),vD(VV.prototype,"setLiveTranscoding",[RV],Object.getOwnPropertyDescriptor(VV.prototype,"setLiveTranscoding"),VV.prototype),vD(VV.prototype,"stopLiveStreaming",[xV],Object.getOwnPropertyDescriptor(VV.prototype,"stopLiveStreaming"),VV.prototype),vD(VV.prototype,"startChannelMediaRelay",[NV],Object.getOwnPropertyDescriptor(VV.prototype,"startChannelMediaRelay"),VV.prototype),vD(VV.prototype,"updateChannelMediaRelay",[OV],Object.getOwnPropertyDescriptor(VV.prototype,"updateChannelMediaRelay"),VV.prototype),vD(VV.prototype,"stopChannelMediaRelay",[kV],Object.getOwnPropertyDescriptor(VV.prototype,"stopChannelMediaRelay"),VV.prototype),vD(VV.prototype,"sendCustomReportMessage",[PV],Object.getOwnPropertyDescriptor(VV.prototype,"sendCustomReportMessage"),VV.prototype),vD(VV.prototype,"pickSVCLayer",[BV],Object.getOwnPropertyDescriptor(VV.prototype,"pickSVCLayer"),VV.prototype),vD(VV.prototype,"setRTMConfig",[LV],Object.getOwnPropertyDescriptor(VV.prototype,"setRTMConfig"),VV.prototype),vD(VV.prototype,"enableContentInspect",[DV],Object.getOwnPropertyDescriptor(VV.prototype,"enableContentInspect"),VV.prototype),vD(VV.prototype,"disableContentInspect",[UV],Object.getOwnPropertyDescriptor(VV.prototype,"disableContentInspect"),VV.prototype),vD(VV.prototype,"setImageModeration",[MV],Object.getOwnPropertyDescriptor(VV.prototype,"setImageModeration"),VV.prototype),vD(VV.prototype,"setP2PTransport",[FV],Object.getOwnPropertyDescriptor(VV.prototype,"setP2PTransport"),VV.prototype),vD(VV.prototype,"getJoinChannelServiceRecords",[jV],Object.getOwnPropertyDescriptor(VV.prototype,"getJoinChannelServiceRecords"),VV.prototype),vD(VV.prototype,"setPublishAudioFilterEnabled",[QV],Object.getOwnPropertyDescriptor(VV.prototype,"setPublishAudioFilterEnabled"),VV.prototype),VV);class GV{constructor(e,t){uC(this,"id",0),uC(this,"element",void 0),uC(this,"peerPair",void 0),uC(this,"context",void 0),uC(this,"audioPlayerElement",void 0),uC(this,"audioTrack",void 0),GV.count+=1,this.id=GV.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const n="offer"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(n),"complete"===e.iceGatheringState?e.localDescription:new nh((t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}}))},t=async(e,t)=>await e.setRemoteDescription(t);try{const n=await e(this.peerPair[0],"offer");await t(this.peerPair[1],n);const r=await e(this.peerPair[1],"answer");await t(this.peerPair[0],r)}catch(e){throw new AO(CR.LOCAL_AEC_ERROR,e.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(t)}catch(e){throw new AO(CR.LOCAL_AEC_ERROR,e.toString()).print()}if(!t)throw new AO(CR.LOCAL_AEC_ERROR,"no dest node when local aec").print();const n=t.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){rO.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((e=>{e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0}}var WV,qV;uC(GV,"count",0);const YV=window.AudioContext||window.webkitAudioContext,XV=new(WV=dO({report:uO}),vD((qV=class{constructor(){uC(this,"units",[]),uC(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return rO.debug("the system does not need to process local aec"),-1;this.context||(this.context=new YV);let t=this.units.find((t=>t&&t.getElement()===e));return t||(t=new GV(e,this.context),this.units.push(t)),t.startEchoCancellation(),rO.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return WI().name!==HI.SAFARI}}).prototype,"processExternalMediaAEC",[WV],Object.getOwnPropertyDescriptor(qV.prototype,"processExternalMediaAEC"),qV.prototype),qV);function JV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JV(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const $V=window||document;function eH(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!$V)return;const n=bq._cspEventHandlerPointer;if(n&&t)return void console.error(n,t);const r=e=>{if(!(e&&e.blockedURI&&(bq.onSecurityPolicyViolation||bq.getListeners(fU.SECURITY_POLICY_VIOLATION).length>0)))return;const t=e.blockedURI;CN("CSP_DETECTED_HOSTNAME_LIST").some((e=>Br(t).call(t,e)))&&(bq.onSecurityPolicyViolation&&"function"==typeof bq.onSecurityPolicyViolation&&bq.onSecurityPolicyViolation(e),bq.getListeners(fU.SECURITY_POLICY_VIOLATION).length>0&&bq.safeEmit(fU.SECURITY_POLICY_VIOLATION,e))};n&&$V.removeEventListener("securitypolicyviolation",n),(t||e&&"function"==typeof e||bq.getListeners(fU.SECURITY_POLICY_VIOLATION).length>0)&&$V.addEventListener("securitypolicyviolation",r),bq._cspEventHandlerPointer=r}var tH=u,nH=RC,rH=RegExp.prototype,iH=function(e){return e===rH||tH(rH,e)?nH(e):e.flags},oH=r(iH);function aH(e){let t=e.length;for(;--t>=0;)e[t]=0}const sH=256,cH=286,lH=30,dH=15,uH=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),AH=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),hH=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),pH=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fH=new Array(576);aH(fH);const mH=new Array(60);aH(mH);const gH=new Array(512);aH(gH);const vH=new Array(256);aH(vH);const yH=new Array(29);aH(yH);const bH=new Array(lH);function EH(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let wH,_H,SH;function CH(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}aH(bH);const TH=e=>e<256?gH[e]:gH[256+(e>>>7)],IH=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},RH=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,IH(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},xH=(e,t,n)=>{RH(e,n[2*t],n[2*t+1])},NH=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},OH=(e,t,n)=>{const r=new Array(16);let i,o,a=0;for(i=1;i<=dH;i++)a=a+n[i-1]<<1,r[i]=a;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=NH(r[t]++,t))}},kH=e=>{let t;for(t=0;t<cH;t++)e.dyn_ltree[2*t]=0;for(t=0;t<lH;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},PH=e=>{e.bi_valid>8?IH(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},BH=(e,t,n,r)=>{const i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},LH=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&BH(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!BH(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},DH=(e,t,n)=>{let r,i,o,a,s=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+s++],r+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],0===r?xH(e,i,t):(o=vH[i],xH(e,o+sH+1,t),a=uH[o],0!==a&&(i-=yH[o],RH(e,i,a)),r--,o=TH(r),xH(e,o,n),a=AH[o],0!==a&&(r-=bH[o],RH(e,r,a)))}while(s<e.sym_next);xH(e,256,t)},UH=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let a,s,c,l=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<o;a++)0!==n[2*a]?(e.heap[++e.heap_len]=l=a,e.depth[a]=0):n[2*a+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[2*c+1]);for(t.max_code=l,a=e.heap_len>>1;a>=1;a--)LH(e,n,a);c=o;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],LH(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,n[2*c]=n[2*a]+n[2*s],e.depth[c]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,n[2*a+1]=n[2*s+1]=c,e.heap[1]=c++,LH(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,d,u,A,h,p,f=0;for(A=0;A<=dH;A++)e.bl_count[A]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)d=e.heap[l],A=n[2*n[2*d+1]+1]+1,A>c&&(A=c,f++),n[2*d+1]=A,d>r||(e.bl_count[A]++,h=0,d>=s&&(h=a[d-s]),p=n[2*d],e.opt_len+=p*(A+h),o&&(e.static_len+=p*(i[2*d+1]+h)));if(0!==f){do{for(A=c-1;0===e.bl_count[A];)A--;e.bl_count[A]--,e.bl_count[A+1]+=2,e.bl_count[c]--,f-=2}while(f>0);for(A=c;0!==A;A--)for(d=e.bl_count[A];0!==d;)u=e.heap[--l],u>r||(n[2*u+1]!==A&&(e.opt_len+=(A-n[2*u+1])*n[2*u],n[2*u+1]=A),d--)}})(e,t),OH(n,l,e.bl_count)},MH=(e,t,n)=>{let r,i,o=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<c&&i===a||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,0===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4))},FH=(e,t,n)=>{let r,i,o=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<l)do{xH(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(xH(e,i,e.bl_tree),s--),xH(e,16,e.bl_tree),RH(e,s-3,2)):s<=10?(xH(e,17,e.bl_tree),RH(e,s-3,3)):(xH(e,18,e.bl_tree),RH(e,s-11,7));s=0,o=i,0===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4)}};let jH=!1;const QH=(e,t,n,r)=>{RH(e,0+(r?1:0),3),PH(e),IH(e,n),IH(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var VH=e=>{jH||((()=>{let e,t,n,r,i;const o=new Array(16);for(n=0,r=0;r<28;r++)for(yH[r]=n,e=0;e<1<<uH[r];e++)vH[n++]=r;for(vH[n-1]=r,i=0,r=0;r<16;r++)for(bH[r]=i,e=0;e<1<<AH[r];e++)gH[i++]=r;for(i>>=7;r<lH;r++)for(bH[r]=i<<7,e=0;e<1<<AH[r]-7;e++)gH[256+i++]=r;for(t=0;t<=dH;t++)o[t]=0;for(e=0;e<=143;)fH[2*e+1]=8,e++,o[8]++;for(;e<=255;)fH[2*e+1]=9,e++,o[9]++;for(;e<=279;)fH[2*e+1]=7,e++,o[7]++;for(;e<=287;)fH[2*e+1]=8,e++,o[8]++;for(OH(fH,287,o),e=0;e<lH;e++)mH[2*e+1]=5,mH[2*e]=NH(e,5);wH=new EH(fH,uH,257,cH,dH),_H=new EH(mH,AH,0,lH,dH),SH=new EH(new Array(0),hH,0,19,7)})(),jH=!0),e.l_desc=new CH(e.dyn_ltree,wH),e.d_desc=new CH(e.dyn_dtree,_H),e.bl_desc=new CH(e.bl_tree,SH),e.bi_buf=0,e.bi_valid=0,kH(e)},HH=(e,t,n,r)=>{let i,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<sH;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),UH(e,e.l_desc),UH(e,e.d_desc),a=(e=>{let t;for(MH(e,e.dyn_ltree,e.l_desc.max_code),MH(e,e.dyn_dtree,e.d_desc.max_code),UH(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*pH[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?QH(e,t,n,r):4===e.strategy||o===i?(RH(e,2+(r?1:0),3),DH(e,fH,mH)):(RH(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(RH(e,t-257,5),RH(e,n-1,5),RH(e,r-4,4),i=0;i<r;i++)RH(e,e.bl_tree[2*pH[i]+1],3);FH(e,e.dyn_ltree,t-1),FH(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),DH(e,e.dyn_ltree,e.dyn_dtree)),kH(e),r&&PH(e)},zH=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(vH[n]+sH+1)]++,e.dyn_dtree[2*TH(t)]++),e.sym_next===e.sym_end),KH=e=>{RH(e,2,3),xH(e,256,fH),(e=>{16===e.bi_valid?(IH(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},GH={_tr_init:VH,_tr_stored_block:QH,_tr_flush_block:HH,_tr_tally:zH,_tr_align:KH},WH=(e,t,n,r)=>{let i=65535&e,o=e>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{i=i+t[r++]|0,o=o+i|0}while(--a);i%=65521,o%=65521}return i|o<<16};const qH=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var YH=(e,t,n,r)=>{const i=qH,o=r+n;e^=-1;for(let a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},XH={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},JH={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ZH,_tr_stored_block:$H,_tr_flush_block:ez,_tr_tally:tz,_tr_align:nz}=GH,{Z_NO_FLUSH:rz,Z_PARTIAL_FLUSH:iz,Z_FULL_FLUSH:oz,Z_FINISH:az,Z_BLOCK:sz,Z_OK:cz,Z_STREAM_END:lz,Z_STREAM_ERROR:dz,Z_DATA_ERROR:uz,Z_BUF_ERROR:Az,Z_DEFAULT_COMPRESSION:hz,Z_FILTERED:pz,Z_HUFFMAN_ONLY:fz,Z_RLE:mz,Z_FIXED:gz,Z_DEFAULT_STRATEGY:vz,Z_UNKNOWN:yz,Z_DEFLATED:bz}=JH,Ez=286,wz=30,_z=19,Sz=2*Ez+1,Cz=15,Tz=258,Iz=262,Rz=42,xz=113,Nz=666,Oz=(e,t)=>(e.msg=XH[t],t),kz=e=>2*e-(e>4?9:0),Pz=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Bz=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let Lz=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Dz=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Uz=(e,t)=>{ez(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Dz(e.strm)},Mz=(e,t)=>{e.pending_buf[e.pending++]=t},Fz=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},jz=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=WH(e.adler,t,i,n):2===e.state.wrap&&(e.adler=YH(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Qz=(e,t)=>{let n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match;const c=e.strstart>e.w_size-Iz?e.strstart-(e.w_size-Iz):0,l=e.window,d=e.w_mask,u=e.prev,A=e.strstart+Tz;let h=l[o+a-1],p=l[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,l[n+a]===p&&l[n+a-1]===h&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<A);if(r=Tz-(A-o),o=A-Tz,r>a){if(e.match_start=t,a=r,r>=s)break;h=l[o+a-1],p=l[o+a]}}}while((t=u[t&d])>c&&0!=--i);return a<=e.lookahead?a:e.lookahead},Vz=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Iz)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Bz(e),r+=t),0===e.strm.avail_in)break;if(n=jz(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Lz(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Lz(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Iz&&0!==e.strm.avail_in)},Hz=(e,t)=>{let n,r,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<o&&(0===n&&t!==az||t===rz||n!==r+e.strm.avail_in))break;a=t===az&&n===r+e.strm.avail_in?1:0,$H(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Dz(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(jz(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===a);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==rz&&t!==az&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(jz(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,o=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=o||(r||t===az)&&t!==rz&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,a=t===az&&0===e.strm.avail_in&&n===r?1:0,$H(e,e.block_start,n,a),e.block_start+=n,Dz(e.strm)),a?3:1)},zz=(e,t)=>{let n,r;for(;;){if(e.lookahead<Iz){if(Vz(e),e.lookahead<Iz&&t===rz)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Lz(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Iz&&(e.match_length=Qz(e,n)),e.match_length>=3)if(r=tz(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Lz(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Lz(e,e.ins_h,e.window[e.strstart+1]);else r=tz(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Uz(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===az?(Uz(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Uz(e,!1),0===e.strm.avail_out)?1:2},Kz=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Iz){if(Vz(e),e.lookahead<Iz&&t===rz)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Lz(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Iz&&(e.match_length=Qz(e,n),e.match_length<=5&&(e.strategy===pz||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=tz(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Lz(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Uz(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=tz(e,0,e.window[e.strstart-1]),r&&Uz(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=tz(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===az?(Uz(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Uz(e,!1),0===e.strm.avail_out)?1:2};function Gz(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Wz=[new Gz(0,0,0,0,Hz),new Gz(4,4,8,4,zz),new Gz(4,5,16,8,zz),new Gz(4,6,32,32,zz),new Gz(4,4,16,16,Kz),new Gz(8,16,32,32,Kz),new Gz(8,16,128,128,Kz),new Gz(8,32,128,256,Kz),new Gz(32,128,258,1024,Kz),new Gz(32,258,258,4096,Kz)];function qz(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=bz,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*Sz),this.dyn_dtree=new Uint16Array(2*(2*wz+1)),this.bl_tree=new Uint16Array(2*(2*_z+1)),Pz(this.dyn_ltree),Pz(this.dyn_dtree),Pz(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Cz+1),this.heap=new Uint16Array(2*Ez+1),Pz(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Ez+1),Pz(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Yz=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Rz&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==xz&&t.status!==Nz?1:0},Xz=e=>{if(Yz(e))return Oz(e,dz);e.total_in=e.total_out=0,e.data_type=yz;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Rz:xz,e.adler=2===t.wrap?0:1,t.last_flush=-2,ZH(t),cz},Jz=e=>{const t=Xz(e);return t===cz&&(e=>{e.window_size=2*e.w_size,Pz(e.head),e.max_lazy_match=Wz[e.level].max_lazy,e.good_match=Wz[e.level].good_length,e.nice_match=Wz[e.level].nice_length,e.max_chain_length=Wz[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},Zz=(e,t,n,r,i,o)=>{if(!e)return dz;let a=1;if(t===hz&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||n!==bz||r<8||r>15||t<0||t>9||o<0||o>gz||8===r&&1!==a)return Oz(e,dz);8===r&&(r=9);const s=new qz;return e.state=s,s.strm=e,s.status=Rz,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=n,Jz(e)};var $z=(e,t)=>{if(Yz(e)||t>sz||t<0)return e?Oz(e,dz):dz;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Nz&&t!==az)return Oz(e,0===e.avail_out?Az:dz);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Dz(e),0===e.avail_out)return n.last_flush=-1,cz}else if(0===e.avail_in&&kz(t)<=kz(r)&&t!==az)return Oz(e,Az);if(n.status===Nz&&0!==e.avail_in)return Oz(e,Az);if(n.status===Rz&&0===n.wrap&&(n.status=xz),n.status===Rz){let t=bz+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=fz||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Fz(n,t),0!==n.strstart&&(Fz(n,e.adler>>>16),Fz(n,65535&e.adler)),e.adler=1,n.status=xz,Dz(e),0!==n.pending)return n.last_flush=-1,cz}if(57===n.status)if(e.adler=0,Mz(n,31),Mz(n,139),Mz(n,8),n.gzhead)Mz(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Mz(n,255&n.gzhead.time),Mz(n,n.gzhead.time>>8&255),Mz(n,n.gzhead.time>>16&255),Mz(n,n.gzhead.time>>24&255),Mz(n,9===n.level?2:n.strategy>=fz||n.level<2?4:0),Mz(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Mz(n,255&n.gzhead.extra.length),Mz(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=YH(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Mz(n,0),Mz(n,0),Mz(n,0),Mz(n,0),Mz(n,0),Mz(n,9===n.level?2:n.strategy>=fz||n.level<2?4:0),Mz(n,3),n.status=xz,Dz(e),0!==n.pending)return n.last_flush=-1,cz;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=YH(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,Dz(e),0!==n.pending)return n.last_flush=-1,cz;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=YH(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=YH(e.adler,n.pending_buf,n.pending-r,r)),Dz(e),0!==n.pending)return n.last_flush=-1,cz;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Mz(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=YH(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=YH(e.adler,n.pending_buf,n.pending-r,r)),Dz(e),0!==n.pending)return n.last_flush=-1,cz;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Mz(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=YH(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Dz(e),0!==n.pending))return n.last_flush=-1,cz;Mz(n,255&e.adler),Mz(n,e.adler>>8&255),e.adler=0}if(n.status=xz,Dz(e),0!==n.pending)return n.last_flush=-1,cz}if(0!==e.avail_in||0!==n.lookahead||t!==rz&&n.status!==Nz){let r=0===n.level?Hz(n,t):n.strategy===fz?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Vz(e),0===e.lookahead)){if(t===rz)return 1;break}if(e.match_length=0,n=tz(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Uz(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===az?(Uz(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Uz(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===mz?((e,t)=>{let n,r,i,o;const a=e.window;for(;;){if(e.lookahead<=Tz){if(Vz(e),e.lookahead<=Tz&&t===rz)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+Tz;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=Tz-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=tz(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=tz(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Uz(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===az?(Uz(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Uz(e,!1),0===e.strm.avail_out)?1:2})(n,t):Wz[n.level].func(n,t);if(3!==r&&4!==r||(n.status=Nz),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),cz;if(2===r&&(t===iz?nz(n):t!==sz&&($H(n,0,0,!1),t===oz&&(Pz(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Dz(e),0===e.avail_out))return n.last_flush=-1,cz}return t!==az?cz:n.wrap<=0?lz:(2===n.wrap?(Mz(n,255&e.adler),Mz(n,e.adler>>8&255),Mz(n,e.adler>>16&255),Mz(n,e.adler>>24&255),Mz(n,255&e.total_in),Mz(n,e.total_in>>8&255),Mz(n,e.total_in>>16&255),Mz(n,e.total_in>>24&255)):(Fz(n,e.adler>>>16),Fz(n,65535&e.adler)),Dz(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?cz:lz)},eK=(e,t)=>{let n=t.length;if(Yz(e))return dz;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==Rz||r.lookahead)return dz;if(1===i&&(e.adler=WH(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(Pz(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Vz(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=Lz(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,Vz(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,r.wrap=i,cz},tK={deflateInit:(e,t)=>Zz(e,t,bz,15,8,vz),deflateInit2:Zz,deflateReset:Jz,deflateResetKeep:Xz,deflateSetHeader:(e,t)=>Yz(e)||2!==e.state.wrap?dz:(e.state.gzhead=t,cz),deflate:$z,deflateEnd:e=>{if(Yz(e))return dz;const t=e.state.status;return e.state=null,t===xz?Oz(e,uz):cz},deflateSetDictionary:eK,deflateInfo:"pako deflate (from Nodeca project)"};const nK=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var rK={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)nK(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,o=e.length;r<o;r++){let t=e[r];n.set(t,i),i+=t.length}return n}};let iK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){iK=!1}const oK=new Uint8Array(256);for(let n=0;n<256;n++)oK[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;oK[254]=oK[254]=1;var aK={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<a&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<a&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const o=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){o[i++]=t;continue}let a=oK[t];if(a>4)o[i++]=65533,r+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&r<n;)t=t<<6|63&e[r++],a--;a>1?o[i++]=65533:t<65536?o[i++]=t:(t-=65536,o[i++]=55296|t>>10&1023,o[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&iK)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(o,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+oK[e[n]]>t?n:t}},sK=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const cK=Object.prototype.toString,{Z_NO_FLUSH:lK,Z_SYNC_FLUSH:dK,Z_FULL_FLUSH:uK,Z_FINISH:AK,Z_OK:hK,Z_STREAM_END:pK,Z_DEFAULT_COMPRESSION:fK,Z_DEFAULT_STRATEGY:mK,Z_DEFLATED:gK}=JH;function vK(e){this.options=rK.assign({level:fK,method:gK,chunkSize:16384,windowBits:15,memLevel:8,strategy:mK},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sK,this.strm.avail_out=0;let n=tK.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==hK)throw new Error(XH[n]);if(t.header&&tK.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?aK.string2buf(t.dictionary):"[object ArrayBuffer]"===cK.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=tK.deflateSetDictionary(this.strm,e),n!==hK)throw new Error(XH[n]);this._dict_set=!0}}function yK(e,t){const n=new vK(t);if(n.push(e,!0),n.err)throw n.msg||XH[n.err];return n.result}vK.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?AK:lK,"string"==typeof e?n.input=aK.string2buf(e):"[object ArrayBuffer]"===cK.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===dK||o===uK)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=tK.deflate(n,o),i===pK)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=tK.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===hK;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},vK.prototype.onData=function(e){this.chunks.push(e)},vK.prototype.onEnd=function(e){e===hK&&(this.result=rK.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var bK={Deflate:vK,deflate:yK,deflateRaw:function(e,t){return(t=t||{}).raw=!0,yK(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,yK(e,t)},constants:JH};const EK=16209;var wK=function(e,t){let n,r,i,o,a,s,c,l,d,u,A,h,p,f,m,g,v,y,b,E,w,_,S,C;const T=e.state;n=e.next_in,S=e.input,r=n+(e.avail_in-5),i=e.next_out,C=e.output,o=i-(t-e.avail_out),a=i+(e.avail_out-257),s=T.dmax,c=T.wsize,l=T.whave,d=T.wnext,u=T.window,A=T.hold,h=T.bits,p=T.lencode,f=T.distcode,m=(1<<T.lenbits)-1,g=(1<<T.distbits)-1;e:do{h<15&&(A+=S[n++]<<h,h+=8,A+=S[n++]<<h,h+=8),v=p[A&m];t:for(;;){if(y=v>>>24,A>>>=y,h-=y,y=v>>>16&255,0===y)C[i++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=p[(65535&v)+(A&(1<<y)-1)];continue t}if(32&y){T.mode=16191;break e}e.msg="invalid literal/length code",T.mode=EK;break e}b=65535&v,y&=15,y&&(h<y&&(A+=S[n++]<<h,h+=8),b+=A&(1<<y)-1,A>>>=y,h-=y),h<15&&(A+=S[n++]<<h,h+=8,A+=S[n++]<<h,h+=8),v=f[A&g];n:for(;;){if(y=v>>>24,A>>>=y,h-=y,y=v>>>16&255,!(16&y)){if(0==(64&y)){v=f[(65535&v)+(A&(1<<y)-1)];continue n}e.msg="invalid distance code",T.mode=EK;break e}if(E=65535&v,y&=15,h<y&&(A+=S[n++]<<h,h+=8,h<y&&(A+=S[n++]<<h,h+=8)),E+=A&(1<<y)-1,E>s){e.msg="invalid distance too far back",T.mode=EK;break e}if(A>>>=y,h-=y,y=i-o,E>y){if(y=E-y,y>l&&T.sane){e.msg="invalid distance too far back",T.mode=EK;break e}if(w=0,_=u,0===d){if(w+=c-y,y<b){b-=y;do{C[i++]=u[w++]}while(--y);w=i-E,_=C}}else if(d<y){if(w+=c+d-y,y-=d,y<b){b-=y;do{C[i++]=u[w++]}while(--y);if(w=0,d<b){y=d,b-=y;do{C[i++]=u[w++]}while(--y);w=i-E,_=C}}}else if(w+=d-y,y<b){b-=y;do{C[i++]=u[w++]}while(--y);w=i-E,_=C}for(;b>2;)C[i++]=_[w++],C[i++]=_[w++],C[i++]=_[w++],b-=3;b&&(C[i++]=_[w++],b>1&&(C[i++]=_[w++]))}else{w=i-E;do{C[i++]=C[w++],C[i++]=C[w++],C[i++]=C[w++],b-=3}while(b>2);b&&(C[i++]=C[w++],b>1&&(C[i++]=C[w++]))}break}}break}}while(n<r&&i<a);b=h>>3,n-=b,h-=b<<3,A&=(1<<h)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<a?a-i+257:257-(i-a),T.hold=A,T.bits=h};const _K=15,SK=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),CK=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),TK=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),IK=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var RK=(e,t,n,r,i,o,a,s)=>{const c=s.bits;let l,d,u,A,h,p,f=0,m=0,g=0,v=0,y=0,b=0,E=0,w=0,_=0,S=0,C=null;const T=new Uint16Array(16),I=new Uint16Array(16);let R,x,N,O=null;for(f=0;f<=_K;f++)T[f]=0;for(m=0;m<r;m++)T[t[n+m]]++;for(y=c,v=_K;v>=1&&0===T[v];v--);if(y>v&&(y=v),0===v)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(g=1;g<v&&0===T[g];g++);for(y<g&&(y=g),w=1,f=1;f<=_K;f++)if(w<<=1,w-=T[f],w<0)return-1;if(w>0&&(0===e||1!==v))return-1;for(I[1]=0,f=1;f<_K;f++)I[f+1]=I[f]+T[f];for(m=0;m<r;m++)0!==t[n+m]&&(a[I[t[n+m]]++]=m);if(0===e?(C=O=a,p=20):1===e?(C=SK,O=CK,p=257):(C=TK,O=IK,p=0),S=0,m=0,f=g,h=o,b=y,E=0,u=-1,_=1<<y,A=_-1,1===e&&_>852||2===e&&_>592)return 1;for(;;){R=f-E,a[m]+1<p?(x=0,N=a[m]):a[m]>=p?(x=O[a[m]-p],N=C[a[m]-p]):(x=96,N=0),l=1<<f-E,d=1<<b,g=d;do{d-=l,i[h+(S>>E)+d]=R<<24|x<<16|N}while(0!==d);for(l=1<<f-1;S&l;)l>>=1;if(0!==l?(S&=l-1,S+=l):S=0,m++,0==--T[f]){if(f===v)break;f=t[n+a[m]]}if(f>y&&(S&A)!==u){for(0===E&&(E=y),h+=g,b=f-E,w=1<<b;b+E<v&&(w-=T[b+E],!(w<=0));)b++,w<<=1;if(_+=1<<b,1===e&&_>852||2===e&&_>592)return 1;u=S&A,i[u]=y<<24|b<<16|h-o}}return 0!==S&&(i[h+S]=f-E<<24|64<<16),s.bits=y,0};const{Z_FINISH:xK,Z_BLOCK:NK,Z_TREES:OK,Z_OK:kK,Z_STREAM_END:PK,Z_NEED_DICT:BK,Z_STREAM_ERROR:LK,Z_DATA_ERROR:DK,Z_MEM_ERROR:UK,Z_BUF_ERROR:MK,Z_DEFLATED:FK}=JH,jK=16180,QK=16190,VK=16191,HK=16192,zK=16194,KK=16199,GK=16200,WK=16206,qK=16209,YK=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function XK(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const JK=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<jK||t.mode>16211?1:0},ZK=e=>{if(JK(e))return LK;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=jK,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,kK},$K=e=>{if(JK(e))return LK;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ZK(e)},eG=(e,t)=>{let n;if(JK(e))return LK;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?LK:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,$K(e))},tG=(e,t)=>{if(!e)return LK;const n=new XK;e.state=n,n.strm=e,n.window=null,n.mode=jK;const r=eG(e,t);return r!==kK&&(e.state=null),r};let nG,rG,iG=!0;const oG=e=>{if(iG){nG=new Int32Array(512),rG=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(RK(1,e.lens,0,288,nG,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;RK(2,e.lens,0,32,rG,0,e.work,{bits:5}),iG=!1}e.lencode=nG,e.lenbits=9,e.distcode=rG,e.distbits=5},aG=(e,t,n,r)=>{let i;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),(r-=i)?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var sG=(e,t)=>{let n,r,i,o,a,s,c,l,d,u,A,h,p,f,m,g,v,y,b,E,w,_,S=0;const C=new Uint8Array(4);let T,I;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(JK(e)||!e.output||!e.input&&0!==e.avail_in)return LK;n=e.state,n.mode===VK&&(n.mode=HK),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,l=n.hold,d=n.bits,u=s,A=c,_=kK;e:for(;;)switch(n.mode){case jK:if(0===n.wrap){n.mode=HK;break}for(;d<16;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&l,C[1]=l>>>8&255,n.check=YH(n.check,C,2,0),l=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=qK;break}if((15&l)!==FK){e.msg="unknown compression method",n.mode=qK;break}if(l>>>=4,d-=4,w=8+(15&l),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=qK;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:VK,l=0,d=0;break;case 16181:for(;d<16;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}if(n.flags=l,(255&oH(n))!==FK){e.msg="unknown compression method",n.mode=qK;break}if(57344&oH(n)){e.msg="unknown header flags set",n.mode=qK;break}n.head&&(n.head.text=l>>8&1),512&oH(n)&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,n.check=YH(n.check,C,2,0)),l=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}n.head&&(n.head.time=l),512&oH(n)&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,C[2]=l>>>16&255,C[3]=l>>>24&255,n.check=YH(n.check,C,4,0)),l=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&oH(n)&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,n.check=YH(n.check,C,2,0)),l=0,d=0,n.mode=16184;case 16184:if(1024&oH(n)){for(;d<16;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}n.length=l,n.head&&(n.head.extra_len=l),512&oH(n)&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,n.check=YH(n.check,C,2,0)),l=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&oH(n)&&(h=n.length,h>s&&(h=s),h&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+h),w)),512&oH(n)&&4&n.wrap&&(n.check=YH(n.check,r,h,o)),s-=h,o+=h,n.length-=h),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&oH(n)){if(0===s)break e;h=0;do{w=r[o+h++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&h<s);if(512&oH(n)&&4&n.wrap&&(n.check=YH(n.check,r,h,o)),s-=h,o+=h,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&oH(n)){if(0===s)break e;h=0;do{w=r[o+h++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&h<s);if(512&oH(n)&&4&n.wrap&&(n.check=YH(n.check,r,h,o)),s-=h,o+=h,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&oH(n)){for(;d<16;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=qK;break}l=0,d=0}n.head&&(n.head.hcrc=oH(n)>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=VK;break;case 16189:for(;d<32;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}e.adler=n.check=YK(l),l=0,d=0,n.mode=QK;case QK:if(0===n.havedict)return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=l,n.bits=d,BK;e.adler=n.check=1,n.mode=VK;case VK:if(t===NK||t===OK)break e;case HK:if(n.last){l>>>=7&d,d-=7&d,n.mode=WK;break}for(;d<3;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}switch(n.last=1&l,l>>>=1,d-=1,3&l){case 0:n.mode=16193;break;case 1:if(oG(n),n.mode=KK,t===OK){l>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=qK}l>>>=2,d-=2;break;case 16193:for(l>>>=7&d,d-=7&d;d<32;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=qK;break}if(n.length=65535&l,l=0,d=0,n.mode=zK,t===OK)break e;case zK:n.mode=16195;case 16195:if(h=n.length,h){if(h>s&&(h=s),h>c&&(h=c),0===h)break e;i.set(r.subarray(o,o+h),a),s-=h,o+=h,c-=h,a+=h,n.length-=h;break}n.mode=VK;break;case 16196:for(;d<14;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}if(n.nlen=257+(31&l),l>>>=5,d-=5,n.ndist=1+(31&l),l>>>=5,d-=5,n.ncode=4+(15&l),l>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=qK;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}n.lens[R[n.have++]]=7&l,l>>>=3,d-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},_=RK(0,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,_){e.msg="invalid code lengths set",n.mode=qK;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[l&(1<<n.lenbits)-1],m=S>>>24,g=S>>>16&255,v=65535&S,!(m<=d);){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}if(v<16)l>>>=m,d-=m,n.lens[n.have++]=v;else{if(16===v){for(I=m+2;d<I;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}if(l>>>=m,d-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=qK;break}w=n.lens[n.have-1],h=3+(3&l),l>>>=2,d-=2}else if(17===v){for(I=m+3;d<I;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}l>>>=m,d-=m,w=0,h=3+(7&l),l>>>=3,d-=3}else{for(I=m+7;d<I;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}l>>>=m,d-=m,w=0,h=11+(127&l),l>>>=7,d-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=qK;break}for(;h--;)n.lens[n.have++]=w}}if(n.mode===qK)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=qK;break}if(n.lenbits=9,T={bits:n.lenbits},_=RK(1,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,_){e.msg="invalid literal/lengths set",n.mode=qK;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},_=RK(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,_){e.msg="invalid distances set",n.mode=qK;break}if(n.mode=KK,t===OK)break e;case KK:n.mode=GK;case GK:if(s>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=l,n.bits=d,wK(e,A),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,l=n.hold,d=n.bits,n.mode===VK&&(n.back=-1);break}for(n.back=0;S=n.lencode[l&(1<<n.lenbits)-1],m=S>>>24,g=S>>>16&255,v=65535&S,!(m<=d);){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}if(g&&0==(240&g)){for(y=m,b=g,E=v;S=n.lencode[E+((l&(1<<y+b)-1)>>y)],m=S>>>24,g=S>>>16&255,v=65535&S,!(y+m<=d);){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}l>>>=y,d-=y,n.back+=y}if(l>>>=m,d-=m,n.back+=m,n.length=v,0===g){n.mode=16205;break}if(32&g){n.back=-1,n.mode=VK;break}if(64&g){e.msg="invalid literal/length code",n.mode=qK;break}n.extra=15&g,n.mode=16201;case 16201:if(n.extra){for(I=n.extra;d<I;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;S=n.distcode[l&(1<<n.distbits)-1],m=S>>>24,g=S>>>16&255,v=65535&S,!(m<=d);){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}if(0==(240&g)){for(y=m,b=g,E=v;S=n.distcode[E+((l&(1<<y+b)-1)>>y)],m=S>>>24,g=S>>>16&255,v=65535&S,!(y+m<=d);){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}l>>>=y,d-=y,n.back+=y}if(l>>>=m,d-=m,n.back+=m,64&g){e.msg="invalid distance code",n.mode=qK;break}n.offset=v,n.extra=15&g,n.mode=16203;case 16203:if(n.extra){for(I=n.extra;d<I;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=qK;break}n.mode=16204;case 16204:if(0===c)break e;if(h=A-c,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=qK;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),f=n.window}else f=i,p=a-n.offset,h=n.length;h>c&&(h=c),c-=h,n.length-=h;do{i[a++]=f[p++]}while(--h);0===n.length&&(n.mode=GK);break;case 16205:if(0===c)break e;i[a++]=n.length,c--,n.mode=GK;break;case WK:if(n.wrap){for(;d<32;){if(0===s)break e;s--,l|=r[o++]<<d,d+=8}if(A-=c,e.total_out+=A,n.total+=A,4&n.wrap&&A&&(e.adler=n.check=oH(n)?YH(n.check,i,A,a-A):WH(n.check,i,A,a-A)),A=c,4&n.wrap&&(oH(n)?l:YK(l))!==n.check){e.msg="incorrect data check",n.mode=qK;break}l=0,d=0}n.mode=16207;case 16207:if(n.wrap&&oH(n)){for(;d<32;){if(0===s)break e;s--,l+=r[o++]<<d,d+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=qK;break}l=0,d=0}n.mode=16208;case 16208:_=PK;break e;case qK:_=DK;break e;case 16210:return UK;default:return LK}return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=l,n.bits=d,(n.wsize||A!==e.avail_out&&n.mode<qK&&(n.mode<WK||t!==xK))&&aG(e,e.output,e.next_out,A-e.avail_out),u-=e.avail_in,A-=e.avail_out,e.total_in+=u,e.total_out+=A,n.total+=A,4&n.wrap&&A&&(e.adler=n.check=oH(n)?YH(n.check,i,A,e.next_out-A):WH(n.check,i,A,e.next_out-A)),e.data_type=n.bits+(n.last?64:0)+(n.mode===VK?128:0)+(n.mode===KK||n.mode===zK?256:0),(0===u&&0===A||t===xK)&&_===kK&&(_=MK),_},cG={inflateReset:$K,inflateReset2:eG,inflateResetKeep:ZK,inflateInit:e=>tG(e,15),inflateInit2:tG,inflate:sG,inflateEnd:e=>{if(JK(e))return LK;let t=e.state;return t.window&&(t.window=null),e.state=null,kK},inflateGetHeader:(e,t)=>{if(JK(e))return LK;const n=e.state;return 0==(2&n.wrap)?LK:(n.head=t,t.done=!1,kK)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,o;return JK(e)?LK:(r=e.state,0!==r.wrap&&r.mode!==QK?LK:r.mode===QK&&(i=1,i=WH(i,t,n,0),i!==r.check)?DK:(o=aG(e,t,n,n),o?(r.mode=16210,UK):(r.havedict=1,kK)))},inflateInfo:"pako inflate (from Nodeca project)"},lG=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const dG=Object.prototype.toString,{Z_NO_FLUSH:uG,Z_FINISH:AG,Z_OK:hG,Z_STREAM_END:pG,Z_NEED_DICT:fG,Z_STREAM_ERROR:mG,Z_DATA_ERROR:gG,Z_MEM_ERROR:vG}=JH;function yG(e){this.options=rK.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sK,this.strm.avail_out=0;let n=cG.inflateInit2(this.strm,t.windowBits);if(n!==hG)throw new Error(XH[n]);if(this.header=new lG,cG.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=aK.string2buf(t.dictionary):"[object ArrayBuffer]"===dG.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=cG.inflateSetDictionary(this.strm,t.dictionary),n!==hG)))throw new Error(XH[n])}function bG(e,t){const n=new yG(t);if(n.push(e),n.err)throw n.msg||XH[n.err];return n.result}yG.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(a=t===~~t?t:!0===t?AG:uG,"[object ArrayBuffer]"===dG.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=cG.inflate(n,a),o===fG&&i&&(o=cG.inflateSetDictionary(n,i),o===hG?o=cG.inflate(n,a):o===gG&&(o=fG));n.avail_in>0&&o===pG&&n.state.wrap>0&&0!==e[n.next_in];)cG.inflateReset(n),o=cG.inflate(n,a);switch(o){case mG:case gG:case fG:case vG:return this.onEnd(o),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||o===pG))if("string"===this.options.to){let e=aK.utf8border(n.output,n.next_out),t=n.next_out-e,i=aK.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==hG||0!==s){if(o===pG)return o=cG.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},yG.prototype.onData=function(e){this.chunks.push(e)},yG.prototype.onEnd=function(e){e===hG&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=rK.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var EG={Inflate:yG,inflate:bG,inflateRaw:function(e,t){return(t=t||{}).raw=!0,bG(e,t)},ungzip:bG,constants:JH};const{Deflate:wG,deflate:_G,deflateRaw:SG,gzip:CG}=bK,{Inflate:TG,inflate:IG,inflateRaw:RG,ungzip:xG}=EG;var NG=_G,OG=IG,kG=function(e){return e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE",e}(kG||{});class PG{constructor(){uC(this,"_sequence",0),uC(this,"_startTime",Date.now()),uC(this,"isUseOneByte",!0)}get startTime(){const e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){const t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){const n=new Uint8Array(4);n.set([1,0,0,0]);const r={id:0,length:4,data:n.buffer},i={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[r]};t.commonPacketHeader.extension=1,t.extension=i,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;CN("SHOW_DATASTREAM2_LOG")&&rO.debug("send data header: ".concat(JSON.stringify(t.commonPacketHeader)));const n=new ArrayBuffer(t.commonPacketHeader.length),r=new Uint8Array(n),i=new DataView(n);let o=0;if(i.setUint16(o,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),o+=2,i.setUint32(o,t.commonPacketHeader.sequence,!0),o+=4,i.setUint16(o,t.commonStreamHeader,!0),o+=2,t.extension){const e=this.serializeExtension(t.extension);r.set(new Uint8Array(e),o),o+=e.byteLength}if(r.set(new Uint8Array(t.payload),o),o+=t.payload.byteLength,o!==t.commonPacketHeader.length)throw Error("serialize error!");return n}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);const t=new DataView(e);let n=0;const r=t.getUint16(n,!0);n+=2;const i={length:16383&r,reserved:(16384&r)>>14,extension:(32768&r)>>15,sequence:t.getUint16(n+2,!0)<<16|t.getUint16(n,!0)};let o,a;if(n+=4,CN("SHOW_DATASTREAM2_LOG")&&rO.debug("receive data header: ".concat(JSON.stringify(i))),t.getUint16(n,!0),n+=2,i.extension){a=this.deserializeExtension(e.slice(n)),n+=2+a.length,o=e.slice(n);let t=!1;if(a.datas.length>0){const e=a.datas.find((e=>0===e.id));e&&(t=1==(1&new DataView(e.data).getUint32(0,!0)))}o=t?this.decompress(o):o}else o=e.slice(8);return o}serializeExtension(e){const{profile:t,length:n,datas:r}=e,i=new ArrayBuffer(n+2),o=new Uint8Array(i),a=new DataView(i);let s=0;if(a.setUint8(s++,t),a.setUint8(s++,n),r.forEach((e=>{t?(a.setUint8(s++,e.id),a.setUint8(s++,e.length),o.set(new Uint8Array(e.data),s),s+=e.data.byteLength):(a.setUint8(s++,e.id|e.length<<4),o.set(new Uint8Array(e.data),s),s+=e.data.byteLength)})),s!==n+2)throw Error("serialize extension error, is ".concat(s,"!==").concat(n+2));return i}deserializeExtension(e){const t=new DataView(e);let n=0;const r=t.getUint8(n);n++;const i=t.getUint8(n);n++;const o=r===kG.TWO_BYTE,a=[],s=new DataView(e,2);let c=0;for(;c<i;){let e=0,t=0,n=new ArrayBuffer(0);o?(e=s.getUint8(c),c++,t=s.getUint8(c),c++):(e=15&s.getUint8(c),t=s.getUint8(c)>>4,c++),t>0&&(n=s.buffer.slice(c+2,c+2+t),c+=n.byteLength),a.push({id:e,length:t,data:n})}if(c!==i)throw Error("parse error");return{profile:r,length:i,datas:a}}decompress(e){return OG(new Uint8Array(e))}compress(e){return NG(new Uint8Array(e))}}const BG={name:"DataStream",create:(e,t)=>{const n=t?new WB(e):new qB(e);return n.useDataStream(new PG),n}};class LG extends QR{constructor(e,t,n){super(),uC(this,"ws",void 0),uC(this,"requestId",1),uC(this,"heartBeatTimer",void 0),uC(this,"joinInfo",void 0),uC(this,"clientId",void 0),uC(this,"onOpen",(()=>{this.emit("open"),this.startHeartBeatCheck()})),uC(this,"onClose",(e=>{this.emit("close"),this.dispose()})),uC(this,"onMessage",(e=>{const t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit("status",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit("req_".concat(t.requestId),t)})),this.joinInfo=e,this.clientId=t,this.ws=new FU("cross-channel-".concat(this.clientId),n),this.ws.on(ND.RECONNECTING,(()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")})),this.ws.on(ND.CONNECTED,this.onOpen),this.ws.on(ND.ON_MESSAGE,this.onMessage),this.ws.on(ND.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new nh(((t,n)=>{const r=window.setTimeout((()=>{n(new AO(CR.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);this.once(e,(i=>{window.clearTimeout(r),i.state&&0!==i.state?n(new AO(CR.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)})),this.once("dispose",(()=>{window.clearTimeout(r),n(new AO(CR.WS_ABORT))}))}))}async request(e){if("closed"===this.ws.state)throw new AO(CR.WS_DISCONNECT);const t=()=>new nh(((e,t)=>{this.ws.once(ND.CLOSED,(()=>t(new AO(CR.WS_ABORT)))),this.ws.once(ND.CONNECTED,e)}));"connected"!==this.ws.state&&await t();const n=this.sendMessage(e),r=new nh(((e,t)=>{const r=()=>{t(new AO(CR.WS_ABORT))};this.ws.once(ND.RECONNECTING,r),this.ws.once(ND.CLOSED,r),this.once("req_".concat(n),e),Ex(3e3).then((()=>{this.removeAllListeners("req_".concat(n)),this.ws.off(ND.RECONNECTING,r),this.ws.off(ND.CLOSED,r),t(new AO(CR.TIMEOUT,"cross channel ws request timeout"))}))})),i=await r;if(!i||200!==i.code)throw new AO(CR.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(i)));return i}async connect(e){this.ws.removeAllListeners(ND.REQUEST_NEW_URLS),this.ws.on(ND.REQUEST_NEW_URLS,(t=>{t(e)})),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class DG extends QR{set state(e){e!==this._state&&(e!==zD.RELAY_STATE_FAILURE&&(this.errorCode=KD.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,n,r,i){super(),uC(this,"joinInfo",void 0),uC(this,"sid",void 0),uC(this,"clientId",void 0),uC(this,"cancelToken",DI.CancelToken.source()),uC(this,"workerToken",void 0),uC(this,"requestId",0),uC(this,"signal",void 0),uC(this,"prevChannelMediaConfig",void 0),uC(this,"httpRetryConfig",void 0),uC(this,"_resolution",void 0),uC(this,"_state",zD.RELAY_STATE_IDLE),uC(this,"errorCode",KD.RELAY_OK),uC(this,"onStatus",(e=>{rO.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event",HD.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&this.emit("event",HD.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode=KD.SRC_TOKEN_EXPIRED,this.state=zD.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode=KD.DEST_TOKEN_EXPIRED,this.state=zD.RELAY_STATE_FAILURE))})),uC(this,"onReconnect",(async()=>{rO.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",HD.NETWORK_DISCONNECTED),this.state=zD.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch((e=>{this.state!==zD.RELAY_STATE_IDLE&&(rO.error("auto restart channel media relay failed",e.toString()),this.errorCode=KD.SERVER_CONNECTION_LOST,this.state=zD.RELAY_STATE_FAILURE)}))})),this.joinInfo=e,this.clientId=t,this.sid=_x(),this.signal=new LG(this.joinInfo,this.clientId,n),this.httpRetryConfig=r,this._resolution=i}async startChannelMediaRelay(e){if(this.state!==zD.RELAY_STATE_IDLE)throw new AO(CR.INVALID_OPERATION);this.state=zD.RELAY_STATE_CONNECTING,await this.connect(),rO.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&"SetSourceChannel"===e.data.serverResponse.command)throw new AO(CR.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&"SetDestChannelStatus"===e.serverResponse.command)throw new AO(CR.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&"StartPacketTransfer"===e.serverResponse.command)throw new AO(CR.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==zD.RELAY_STATE_RUNNING)throw new AO(CR.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==zD.RELAY_STATE_RUNNING)throw new AO(CR.INVALID_OPERATION);const t=this.genMessage(VD.SetVideoProfile);await this.signal.request(t),rO.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),rO.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=zD.RELAY_STATE_IDLE,this.dispose()}dispose(){rO.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=DI.CancelToken.source(),this.state=zD.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await CF(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",HD.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(VD.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),rO.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const n=this.genMessage(VD.SetSdkProfile,e);await this.signal.request(n),rO.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const r=this.genMessage(VD.SetSourceChannel,e);await this.signal.request(r),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",HD.PACKET_JOINED_SRC_CHANNEL),rO.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const i=this.genMessage(VD.SetSourceUserId,e);await this.signal.request(i),rO.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const o=this.genMessage(VD.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",HD.PACKET_JOINED_DEST_CHANNEL),rO.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const a=this.genMessage(VD.StartPacketTransfer,e);await this.signal.request(a),this.emit("event",HD.PACKET_SENT_TO_DEST_CHANNEL),this.state=zD.RELAY_STATE_RUNNING,rO.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){const t=this.genMessage(VD.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",HD.PACKET_UPDATE_DEST_CHANNEL),rO.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const e=this.genMessage(VD.StopPacketTransfer);await this.signal.request(e),rO.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){const n=[],r=[],i=[];this.requestId+=1;const o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:fN,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.23.4"===o.sdkVersion&&(o.sdkVersion="0.0.1");let a=null,s=null;switch(e){case VD.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case VD.SetSourceChannel:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new AO(CR.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceChannel",uid:"0",channelName:s.channelName,token:s.token||this.joinInfo.appId},o;case VD.SetSourceUserId:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new AO(CR.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceUserId",uid:s.uid+""},o;case VD.SetDestChannel:if(a=t&&t.getDestChannelMediaInfo(),!a)throw new AO(CR.UNEXPECTED_ERROR,"can not find dest config");return a.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:"SetDestChannel",channelName:n,uid:r,token:i},o;case VD.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case VD.Reconnect:return o.clientRequest={command:"Reconnect"},o;case VD.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case VD.UpdateDestChannel:if(a=t&&t.getDestChannelMediaInfo(),!a)throw new AO(CR.UNEXPECTED_ERROR,"can not find dest config");return a.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:"UpdateDestChannel",channelName:n,uid:r,token:i},o;case VD.SetVideoProfile:o.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return o}}const UG={name:"ChannelMediaRelay",create:function(e){return new DG(e.joinInfo,e.clientId,e.websocketRetryConfig||Ux,e.httpRetryConfig||Ux,e.resolution)}};function MG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MG(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class jG extends QR{constructor(e,t,n,r){super(),uC(this,"spec",void 0),uC(this,"token",void 0),uC(this,"websocket",void 0),uC(this,"pingpongTimer",void 0),uC(this,"reconnectMode","retry"),uC(this,"serviceMode",void 0),uC(this,"reqId",0),uC(this,"commandReqId",0),uC(this,"handleWebSocketOpen",(()=>{this.reconnectMode="retry",this.startPingPong()})),uC(this,"handleWebSocketMessage",(e=>{if(!e.data)return;const t=JSON.parse(e.data);t.requestId?this.emit("@".concat(t.requestId,"-").concat(t.sid),t):(uO.workerEvent(this.spec.sid,{actionType:"status",serverCode:t.code,workerType:this.serviceMode===PD.TRANSCODE?1:2}),this.emit(MD.PUBLISH_STREAM_STATUS,t))})),this.spec=t,this.token=e,this.serviceMode=r,this.websocket=new FU("live-streaming",n),this.websocket.on(ND.CONNECTED,this.handleWebSocketOpen),this.websocket.on(ND.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(ND.REQUEST_NEW_URLS,((e,t)=>{nx(this,MD.REQUEST_NEW_ADDRESS).then(e).catch(t)})),this.websocket.on(ND.RECONNECTING,(()=>{this.websocket.reconnectMode=this.reconnectMode}))}init(e){return this.websocket.init(e)}async request(e,t,n,r){this.reqId+=1,"request"===e&&(this.commandReqId+=1);const i=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new AO(CR.UNEXPECTED_ERROR);const a=FG({command:e,sdkVersion:"4.23.4"===fN?"0.0.1":fN,seq:o,requestId:o,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if("closed"===this.websocket.state)throw new AO(CR.WS_DISCONNECT);const s=()=>new nh(((e,t)=>{this.websocket.once(ND.CLOSED,(()=>t(new AO(CR.WS_ABORT)))),this.websocket.once(ND.CONNECTED,e)}));"connected"!==this.websocket.state&&await s(),a.clientRequest&&(a.clientRequest.workerToken=this.token);const c=new nh(((e,t)=>{const n=()=>{t(new AO(CR.WS_ABORT))};this.websocket.once(ND.RECONNECTING,n),this.websocket.once(ND.CLOSED,n),this.once("@".concat(o,"-").concat(this.spec.sid),(t=>{e(t)}))}));r&&uO.workerEvent(this.spec.sid,FG(FG({},r),{},{requestId:i,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));const l=Date.now();this.websocket.sendMessage(a);let d=null;try{d=await c}catch(r){if("closed"===this.websocket.state)throw r;return await s(),await this.request(e,t,n)}return r&&uO.workerEvent(this.spec.sid,FG(FG({},r),{},{requestId:i,actionType:"response",payload:JSON.stringify(d.serverResponse),serverCode:d.code,success:200===d.code,responseTime:Date.now()-l})),200!==d.code&&this.handleResponseError(d),d}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const e="4.23.4"===fN?"0.0.1":fN;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case jD.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void rO.warning("live stream response already exists stream");case jD.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case jD.LIVE_STREAM_RESPONSE_BAD_STREAM:case jD.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new AO(CR.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case jD.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command)return;throw new AO(CR.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case jD.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new AO(CR.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case jD.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new AO(CR.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(MD.WARNING,t,e.serverResponse.url)}case jD.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new AO(CR.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(MD.WARNING,t,e.serverResponse.url)}case jD.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new AO(CR.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case jD.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new AO(CR.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case jD.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new AO(CR.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(MD.WARNING,t,e.serverResponse.url)}case jD.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new AO(CR.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case jD.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new AO(CR.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case jD.LIVE_STREAM_RESPONSE_WORKER_LOST:case jD.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command)return;throw new AO(CR.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case jD.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new AO(CR.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new AO(CR.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case jD.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case jD.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case jD.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case jD.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new AO(CR.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(Sx)}),6e3)}}function QG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QG(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class HG extends QR{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ux,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ux;super(),uC(this,"onLiveStreamWarning",void 0),uC(this,"onLiveStreamError",void 0),uC(this,"spec",void 0),uC(this,"retryTimeout",1e4),uC(this,"connection",void 0),uC(this,"httpRetryConfig",void 0),uC(this,"wsRetryConfig",void 0),uC(this,"streamingTasks",new Map),uC(this,"isStartingStreamingTask",!1),uC(this,"taskMutex",new Lx("live-streaming")),uC(this,"cancelToken",DI.CancelToken.source()),uC(this,"transcodingConfig",void 0),uC(this,"uapResponse",void 0),uC(this,"lastTaskId",1),uC(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=n,this.wsRetryConfig=t}async setTranscodingConfig(e){const t=VG(VG({},UD),e);66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(rO.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((e=>VG(VG(VG({},BD),e),{},{zOrder:e.zOrder?e.zOrder+1:1})))),function(e){PR(e.width)||xR(e.width,"config.width",0,1e4),PR(e.height)||xR(e.height,"config.height",0,1e4),PR(e.videoBitrate)||xR(e.videoBitrate,"config.videoBitrate",1,1e6),PR(e.videoFrameRate)||xR(e.videoFrameRate,"config.videoFrameRate"),PR(e.lowLatency)||IR(e.lowLatency,"config.lowLatency"),PR(e.audioSampleRate)||RR(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),PR(e.audioBitrate)||xR(e.audioBitrate,"config.audioBitrate",1,128),PR(e.audioChannels)||RR(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),PR(e.videoGop)||xR(e.videoGop,"config.videoGop"),PR(e.videoCodecProfile)||RR(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),PR(e.userCount)||xR(e.userCount,"config.userCount",0,17),PR(e.backgroundColor)||xR(e.backgroundColor,"config.backgroundColor",0,16777215),PR(e.userConfigExtraInfo)||OR(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!PR(e.transcodingUsers)&&(kR(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach(((e,t)=>{kD(e.uid),PR(e.x)||xR(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),PR(e.y)||xR(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),PR(e.width)||xR(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),PR(e.height)||xR(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),PR(e.zOrder)||xR(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),PR(e.alpha)||xR(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),PR(e.watermark)||DD(e.watermark,"watermark"),PR(e.backgroundImage)||DD(e.backgroundImage,"backgroundImage"),e.images&&!PR(e.images)&&(kR(e.images,"config.images"),e.images.forEach(((e,t)=>{DD(e,"images[".concat(t,"]"))})))}(t);const n=[];t.images&&n.push(...t.images.map((e=>VG(VG(VG({},LD),e),{},{zOrder:255})))),t.backgroundImage&&(n.push(VG(VG(VG({},LD),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(n.push(VG(VG(VG({},LD),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=n,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((e=>VG({},e))),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);const r=(t.userConfigs||[]).map((e=>"number"==typeof e.uid?nh.resolve(e.uid):bF(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig)));if((await nh.all(r)).forEach(((e,n)=>{t.userConfigs&&t.userConfigs[n]&&(t.userConfigs[n].uid=e)})),this.transcodingConfig=t,this.connection)try{var i;const e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(uh(i=this.streamingTasks).call(i)).map((e=>e.taskId)).join("#")});rO.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(e.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(e){if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((t=>{rO.warning("[".concat(this.spec.clientId,"] live streaming receive error"),e.toString(),"try to republish",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then((()=>{rO.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(t.url," success"))})).catch((e=>{rO.error("[".concat(this.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)}))}))}}async startLiveStreamingTask(e,t,n){if(!this.transcodingConfig&&t===PD.TRANSCODE)throw new AO(CR.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");const r={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};rO.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));const i=await this.taskMutex.lock();if(!this.connection&&n)return void i();if(this.streamingTasks.get(e)&&!n)return i(),new AO(CR.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw i(),e}switch(t){case PD.TRANSCODE:r.transcodingConfig=VG({},this.transcodingConfig);case PD.RAW:}this.uapResponse&&this.uapResponse.vid&&(r.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const o=this.lastTaskId++;try{const a=new nh(((t,r)=>{Ex(this.retryTimeout).then((()=>{if(n)return r(n);const t=this.statusError.get(e);return t?(this.statusError.delete(e),r(t)):void 0}))})),s=await nh.race([this.connection.request("request",{clientRequest:r},!0,{url:e,command:"PublishStream",workerType:t===PD.TRANSCODE?1:2,requestByUser:!n,tid:o.toString()}),a]);this.isStartingStreamingTask=!1,rO.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(s.code)),this.streamingTasks.set(e,{clientRequest:r,mode:t,url:e,taskId:o}),i()}catch(r){if(i(),this.isStartingStreamingTask=!1,!r.data||!r.data.retry||n)throw r;return r.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,r)):await this.startLiveStreamingTask(e,t,r)}}stopLiveStreamingTask(e){return new nh(((t,n)=>{const r=this.streamingTasks.get(e);if(!r||!this.connection)return new AO(CR.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const i=r.mode;r.abortTask=()=>{rO.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:"UnpublishStream",url:r.url}},!1,{url:e,command:"UnPublishStream",workerType:i===PD.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then((n=>{rO.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(n.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&(this.connection&&this.connection.close(),this.connection=void 0),t()})).catch(n)}))}resetAllTask(){var e;const t=Array.from(uh(e=this.streamingTasks).call(e));this.terminate();for(const n of t)this.startLiveStreamingTask(n.url,n.mode).catch((e=>{this.onLiveStreamError&&this.onLiveStreamError(n.url,e)}))}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=DI.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new AO(CR.UNEXPECTED_ERROR,"live streaming connection has already connected");const t=await nx(this,FD.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new jG(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(MD.WARNING,((e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e))),this.connection.on(MD.PUBLISH_STREAM_STATUS,(e=>this.handlePublishStreamServer(e))),this.connection.on(MD.REQUEST_NEW_ADDRESS,((t,n)=>{if(!this.connection)return n(new AO(CR.UNEXPECTED_ERROR,"can not get new live streaming address list"));nx(this,FD.REQUEST_WORKER_MANAGER_LIST,e).then((e=>{this.uapResponse=e,t(e.addressList)})).catch(n)})),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||"empty_url",n=this.streamingTasks.get(t),r=e.reason;switch(e.code){case jD.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case jD.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case jD.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case jD.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const r=new AO(CR.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(n)return rO.error(r.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,r);if(!this.isStartingStreamingTask)return;this.statusError.set(t,r)}case jD.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new AO(CR.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,r);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case jD.LIVE_STREAM_RESPONSE_WORKER_LOST:case jD.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var i;if(!this.connection)return;this.connection.tryNextAddress();const t=Array.from(uh(i=this.streamingTasks).call(i));for(const n of t)n.abortTask?n.abortTask():(rO.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),this.startLiveStreamingTask(n.url,n.mode,new AO(CR.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((()=>{rO.debug("[".concat(this.spec.clientId,"] republish live stream success"),n.url)})).catch((e=>{rO.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(n.url,e)})));return}}}hasUrl(e){return this.streamingTasks.has(e)}}const zG={name:"LiveStreaming",create:function(e){return new HG(e.joinInfo,e.websocketRetryConfig||Ux,e.httpRetryConfig||Ux)}};function KG(e){let t=nW();return function(e,t){let n=e.appId;void 0!==n&&(mW(t,10),lW(t,n));let r=e.cid;void 0!==r&&(mW(t,16),mW(t,r));let i=e.cname;void 0!==i&&(mW(t,26),lW(t,i));let o=e.deviceId;void 0!==o&&(mW(t,34),lW(t,o));let a=e.elapse;void 0!==a&&(mW(t,40),gW(t,a));let s=e.fileSize;void 0!==s&&(mW(t,48),gW(t,eW(s)));let c=e.height;void 0!==c&&(mW(t,56),gW(t,eW(c)));let l=e.jpg;void 0!==l&&(mW(t,66),mW(t,l.length),function(e,t){let n=aW(e,t.length);e.bytes.set(t,n)}(t,l));let d=e.networkType;void 0!==d&&(mW(t,72),gW(t,eW(d)));let u=e.osType;void 0!==u&&(mW(t,80),gW(t,eW(u)));let A=e.requestId;void 0!==A&&(mW(t,90),lW(t,A));let h=e.sdkVersion;void 0!==h&&(mW(t,98),lW(t,h));let p=e.sequence;void 0!==p&&(mW(t,104),gW(t,eW(p)));let f=e.sid;void 0!==f&&(mW(t,114),lW(t,f));let m=e.timestamp;void 0!==m&&(mW(t,120),gW(t,m));let g=e.uid;void 0!==g&&(mW(t,128),mW(t,g));let v=e.vid;void 0!==v&&(mW(t,136),mW(t,v));let y=e.width;void 0!==y&&(mW(t,144),gW(t,eW(y)));let b=e.service;void 0!==b&&(mW(t,152),mW(t,b));let E=e.callbackData;void 0!==E&&(mW(t,162),lW(t,E));let w=e.jpgEncryption;void 0!==w&&(mW(t,168),mW(t,w));let _=e.requestType;void 0!==_&&(mW(t,176),mW(t,_));let S=e.scorePorn;void 0!==S&&(mW(t,185),pW(t,S));let C=e.scoreSexy;void 0!==C&&(mW(t,193),pW(t,C));let T=e.scoreNeutral;void 0!==T&&(mW(t,201),pW(t,T));let I=e.scene;void 0!==I&&(mW(t,208),mW(t,I));let R=e.ossFilePrefix;void 0!==R&&(mW(t,218),lW(t,R));let x=e.serviceVendor;if(void 0!==x)for(let N of x){mW(t,226);let e=nW();qG(N,e),mW(t,e.limit),dW(t,e),rW(e)}}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function GG(e){return function(e){let t={};e:for(;!oW(e);){let n=fW(e);switch(n>>>3){case 0:break e;case 1:t.code=fW(e);break;case 2:t.msg=cW(e,fW(e));break;case 3:{let n=YG(e);t.data=WG(e),e.limit=n;break}default:XG(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function WG(e){let t={};e:for(;!oW(e);){let n=fW(e);switch(n>>>3){case 0:break e;case 1:t.requestId=cW(e,fW(e));break;case 2:t.requestType=fW(e)>>>0;break;case 3:t.scorePorn=hW(e);break;case 4:t.scoreSexy=hW(e);break;case 5:t.scoreNeutral=hW(e);break;case 6:t.requestScene=fW(e)>>>0;break;case 7:t.scene=fW(e)>>>0;break;default:XG(e,7&n)}}return t}function qG(e,t){let n=e.service;void 0!==n&&(mW(t,8),mW(t,n));let r=e.vendor;void 0!==r&&(mW(t,16),mW(t,r));let i=e.token;void 0!==i&&(mW(t,26),lW(t,i));let o=e.callbackUrl;void 0!==o&&(mW(t,34),lW(t,o))}function YG(e){let t=fW(e),n=e.limit;return e.limit=e.offset+t,n}function XG(e,t){switch(t){case 0:for(;128&uW(e););break;case 2:iW(e,fW(e));break;case 5:iW(e,4);break;case 1:iW(e,8);break;default:throw new Error("Unimplemented type: "+t)}}let JG=new Float32Array(1);new Uint8Array(JG.buffer);let ZG=new Float64Array(1),$G=new Uint8Array(ZG.buffer);function eW(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let tW=[];function nW(){const e=tW.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function rW(e){tW.push(e)}function iW(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function oW(e){return e.offset>=e.limit}function aW(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let t=new Uint8Array(2*o);t.set(n),e.bytes=t}return e.offset=o,o>i&&(e.limit=o),r}function sW(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function cW(e,t){let n=sW(e,t),r=String.fromCharCode,i=e.bytes,o="\ufffd",a="";for(let s=0;s<t;s++){let e,c,l,d,u=i[s+n];0==(128&u)?a+=r(u):192==(224&u)?s+1>=t?a+=o:(e=i[s+n+1],128!=(192&e)?a+=o:(d=(31&u)<<6|63&e,d<128?a+=o:(a+=r(d),s++))):224==(240&u)?s+2>=t?a+=o:(e=i[s+n+1],c=i[s+n+2],32896!=(49344&(e|c<<8))?a+=o:(d=(15&u)<<12|(63&e)<<6|63&c,d<2048||d>=55296&&d<=57343?a+=o:(a+=r(d),s+=2))):240==(248&u)?s+3>=t?a+=o:(e=i[s+n+1],c=i[s+n+2],l=i[s+n+3],8421504!=(12632256&(e|c<<8|l<<16))?a+=o:(d=(7&u)<<18|(63&e)<<12|(63&c)<<6|63&l,d<65536||d>1114111?a+=o:(d-=65536,a+=r(55296+(d>>10),56320+(1023&d)),s+=3))):a+=o}return a}function lW(e,t){let n=t.length,r=0;for(let a=0;a<n;a++){let e=t.charCodeAt(a);e>=55296&&e<=56319&&a+1<n&&(e=(e<<10)+t.charCodeAt(++a)-56613888),r+=e<128?1:e<2048?2:e<65536?3:4}mW(e,r);let i=aW(e,r),o=e.bytes;for(let a=0;a<n;a++){let e=t.charCodeAt(a);e>=55296&&e<=56319&&a+1<n&&(e=(e<<10)+t.charCodeAt(++a)-56613888),e<128?o[i++]=e:(e<2048?o[i++]=e>>6&31|192:(e<65536?o[i++]=e>>12&15|224:(o[i++]=e>>18&7|240,o[i++]=e>>12&63|128),o[i++]=e>>6&63|128),o[i++]=63&e|128)}}function dW(e,t){let n=aW(e,t.limit),r=e.bytes,i=t.bytes;for(let o=0,a=t.limit;o<a;o++)r[o+n]=i[o]}function uW(e){return e.bytes[sW(e,1)]}function AW(e,t){let n=aW(e,1);e.bytes[n]=t}function hW(e){let t=sW(e,8),n=e.bytes;return $G[0]=n[t++],$G[1]=n[t++],$G[2]=n[t++],$G[3]=n[t++],$G[4]=n[t++],$G[5]=n[t++],$G[6]=n[t++],$G[7]=n[t++],ZG[0]}function pW(e,t){let n=aW(e,8),r=e.bytes;ZG[0]=t,r[n++]=$G[0],r[n++]=$G[1],r[n++]=$G[2],r[n++]=$G[3],r[n++]=$G[4],r[n++]=$G[5],r[n++]=$G[6],r[n++]=$G[7]}function fW(e){let t,n=0,r=0;do{t=uW(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function mW(e,t){for(t>>>=0;t>=128;)AW(e,127&t|128),t>>>=7;AW(e,t)}function gW(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,a=aW(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=9!==o?128|i:127&i;case 8:s[a+7]=8!==o?r>>>21|128:r>>>21&127;case 7:s[a+6]=7!==o?r>>>14|128:r>>>14&127;case 6:s[a+5]=6!==o?r>>>7|128:r>>>7&127;case 5:s[a+4]=5!==o?128|r:127&r;case 4:s[a+3]=4!==o?n>>>21|128:n>>>21&127;case 3:s[a+2]=3!==o?n>>>14|128:n>>>14&127;case 2:s[a+1]=2!==o?n>>>7|128:n>>>7&127;case 1:s[a]=1!==o?128|n:127&n}}function vW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const yW=new Map([["moderation",1],["supervise",2]]);class bW extends QR{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(hU.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=ii(t=e.map((e=>yW.get(e)||0))).call(t,((e,t)=>e+t)),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this.qualityRatio}),6e4))}constructor(e){super(),uC(this,"name","AgoraRTCVideoContentInspect"),uC(this,"_connectionState",uU.CONNECTING),uC(this,"_innerConnectionState",void 0),uC(this,"sequence",0),uC(this,"inspectStartTime",void 0),uC(this,"workerManagerConnection",void 0),uC(this,"workerConnection",void 0),uC(this,"workerMessageLengthLimit",void 0),uC(this,"inspectIntervalMinimum",void 0),uC(this,"qualityRatio",void 0),uC(this,"_connectInfo",void 0),uC(this,"_cancelTokenSource",DI.CancelToken.source()),uC(this,"_retryConfig",void 0),uC(this,"wmSequence",0),uC(this,"inspectInterval",void 0),uC(this,"inspectTimer",null),uC(this,"ossFilePrefix",void 0),uC(this,"extraInfo",void 0),uC(this,"_inspectType",void 0),uC(this,"_inspectMode",void 0),uC(this,"_quality",1),uC(this,"qualityTimer",null),uC(this,"_inspectId",void 0),uC(this,"_needWorkUrlOnly",!1),uC(this,"inspectImage",(()=>{if(this.connectionState!==uU.CONNECTED)throw new AO(CR.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval((()=>{this.connectionState===uU.CONNECTED?this.requestToInspectImage():rO.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)}),this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()})),this._inspectId=wx(5,"inspect-"),this.workerMessageLengthLimit=CN("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=CN("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=CN("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new FU("worker-manager-"+this._inspectId,Ux),this.on(hU.STATE_CHANGE,((e,t)=>{this._innerConnectionState=e,rO.debug("[".concat(this._inspectId,"] Inspect operation :").concat(AU[e]," ").concat(t||""))})),this.handleWorkerManagerEvents(),this.workerConnection=new FU("worker-"+this._inspectId,Ux),this.handleWorkerEvents()}async init(e,t){this.emit(hU.STATE_CHANGE,AU.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new nh(((r,i)=>{this.on(hU.CONNECTION_STATE_CHANGE,((e,t)=>{t===uU.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorkerManager(e)})).catch((e=>{i(e)}))}))}async requestAP(e,t,n){const r=CN("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),i=await function(e,t,n,r){let{appId:i,areaCode:o,cname:a,sid:s,token:c,uid:l}=t;pF++;const d="image_moderation_api",u={service_name:d,json_body:JSON.stringify({appId:i,areaCode:o,cname:a,command:"allocateEdge",requestId:pF,seq:pF,sid:s,token:c,ts:Date.now(),uid:l+""})};let A,h,p=e[0];return Fx((async()=>{A=Date.now();const e=await GM(p,{data:u,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(h=Date.now()-A,0!==e.code){const t=new AO(CR.UNEXPECTED_RESPONSE,"image inspect ap error, code"+e.code,{retry:!0,responseTime:h});throw rO.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new AO(CR.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:h});throw rO.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new AO(CR.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:t.code,responseTime:h});throw rO.error(e.toString()),e}const r=CN("VIDEO_INSPECT_WORKER_MANAGER_HOST"),i=CN("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(i||n)})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,responseTime:h}}),((t,n)=>(uO.apworkerEvent(s,{success:!0,sc:200,serviceName:d,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:h,serverIp:e[n%e.length]}),!1)),((t,n)=>(uO.apworkerEvent(s,{success:!1,sc:t.data&&t.data.code||200,serviceName:d,responseTime:h,serverIp:e[n%e.length]}),!!(t.code!==CR.OPERATION_ABORTED&&t.code!==CR.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(p=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(hU.STATE_CHANGE,AU.AP_CONNECTED);const{addressList:o}=i;return this.wmSequence++,o}async connectWorkerManager(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._needWorkUrlOnly=t,this.emit(hU.STATE_CHANGE,AU.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(ND.CONNECTED,(async()=>{this.emit(hU.STATE_CHANGE,AU.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.23.4",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(ND.CLOSED,(()=>{this._innerConnectionState<AU.GET_WORKER_MANAGER_RESPONSE&&rO.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))})),this.workerManagerConnection.on(ND.FAILED,(()=>{this._innerConnectionState<AU.GET_WORKER_MANAGER_RESPONSE&&rO.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))})),this.workerManagerConnection.on(ND.RECONNECTING,(()=>{this._innerConnectionState<AU.GET_WORKER_MANAGER_RESPONSE&&rO.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))})),this.workerManagerConnection.on(ND.ON_MESSAGE,(async e=>{this.emit(hU.STATE_CHANGE,AU.GET_WORKER_MANAGER_RESPONSE);const t=this.workerManagerConnection.url;this.workerManagerConnection.close();const n=JSON.parse(e.data);if(200!==n.code)throw rO.error("[".concat(this._inspectId,"] Unexpected code ").concat(n.code," from worker manager")),new AO(CR.UNEXPECTED_RESPONSE,"response code of worker is unexpected",n);if(!(n.serverResponse&&n.serverResponse.portWss&&t))throw rO.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(n))),new AO(CR.UNEXPECTED_RESPONSE,"response content of worker is unexpected",n);{const e=CN("VIDEO_INSPECT_WORKER_PORT")||n.serverResponse.portWss,r=t.replace(/:\d+\/?$/,":".concat(e));this.emit(hU.STATE_CHANGE,AU.CONNECT_WORKER,r),this._needWorkUrlOnly?this.emit(hU.REQUEST_NEW_WORKER_URL,r):await this.connectWorker(r)}})),this.workerManagerConnection.on(ND.WILL_RECONNECT,((e,t,n)=>{n(e)})),this.workerManagerConnection.on(ND.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}handleWorkerEvents(){this.workerConnection.on(ND.CONNECTED,(async()=>{this.emit(hU.STATE_CHANGE,AU.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=uU.CONNECTED})),this.workerConnection.on(ND.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const n=GG(new Uint8Array(e.data));if(CN("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&rO.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(n)),200===n.code){if(Array.isArray(this.inspectType)&&1===this.inspectType.length&&"supervise"===this.inspectType[0])return void this.emit(hU.INSPECT_RESULT,void 0,void 0);if(n.data&&n.data.scorePorn&&n.data.scoreSexy&&n.data.scoreNeutral){var t;const e={porn:n.data.scorePorn,sexy:n.data.scoreSexy,neutral:n.data.scoreNeutral},r=ii(t=Object.keys(e)).call(t,((t,n)=>e[t]>e[n]?t:n),"porn"),i=Object.keys(e).find((e=>e===r));this.emit(hU.INSPECT_RESULT,i)}else this.emit(hU.INSPECT_RESULT,void 0,new AO(CR.UNEXPECTED_RESPONSE,n.code+"","There is an unexpected data on message"))}else this.emit(hU.INSPECT_RESULT,void 0,new AO(CR.UNEXPECTED_RESPONSE,n.code+"",n.msg))}else rO.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(hU.INSPECT_RESULT,void 0,new AO(CR.UNEXPECTED_RESPONSE,"invalid worker message type"))})),this.workerConnection.on(ND.CLOSED,(()=>{this.connectionState=uU.CLOSED})),this.workerConnection.on(ND.FAILED,(()=>{this.connectionState=uU.CLOSED})),this.workerConnection.on(ND.RECONNECTING,(()=>{this.connectionState=this.connectionState===uU.CONNECTED?uU.RECONNECTING:uU.CONNECTING})),this.workerConnection.on(ND.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this.workerConnection.on(ND.REQUEST_NEW_URLS,((e,t)=>{this.workerManagerConnection.close(),this.once(hU.REQUEST_NEW_WORKER_URL,(t=>{e([t])})),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then((e=>{this.connectWorkerManager(e,!0)})).catch((e=>{t(e)}))}))}async requestToInspectImage(){this.sequence++;const e=ix(this,hU.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(hU.INSPECT_RESULT,void 0,new AO(CR.INVALID_OPERATION,"Only the track being played can be inspected"));const n=await this.generateRequestData(e,t);this.workerConnection.sendMessage(n,!0,!0)}else this.emit(hU.INSPECT_RESULT,void 0,new AO(CR.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:n,cname:r,cid:i,vid:o,sid:a,uid:s}=t;const c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),d=await Gk(l,n,r),u=this.sequence+"-"+i+"-"+s+"-"+c+"-"+wx(12,""),A={appId:n,cid:i,cname:r,deviceId:"",elapse:(h=Number(c-this.inspectStartTime),{low:h|=0,high:h>>31,unsigned:h>=0}),fileSize:d.byteLength,jpgEncryption:2,height:l.height,width:l.width,jpg:d,networkType:6,osType:7,requestId:u,sdkVersion:"4.23.4",sequence:this.sequence,sid:a,timestamp:XQ(c),uid:s,vid:o,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};var h;void 0===this.extraInfo&&delete A.callbackData,void 0===this.ossFilePrefix&&delete A.ossFilePrefix;const p=KG(A);if(p.byteLength<this.workerMessageLengthLimit){if(CN("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vW(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},A);delete e.jpg,rO.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(e))}return p}{const t=this.quality*this.qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:i,vid:o,sid:a,uid:s})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=DI.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=uU.CLOSED,this.emit(hU.STATE_CHANGE,AU.CLOSED)}}const EW={name:"ContentInspect",create:function(e){let{config:t}=e;return function(e){if(!e)throw new AO(CR.INVALID_PARAMS,"inspectConfig is necessary.");if(!e.inspectType||!Array.isArray(e.inspectType))throw new AO(CR.INVALID_PARAMS,"inspectConfig.inspectType is necessary and is an instance of Array.");{const t=[...new Set(e.inspectType)];t.forEach((e=>{var t;if(!Br(t=["supervise","moderation"]).call(t,e))throw new AO(CR.INVALID_PARAMS,"".concat(e," is not a valid inspect type."))})),e.inspectType=t}if(e&&e.extraInfo&&e.extraInfo.length>1024)throw new AO(CR.INVALID_PARAMS,"inspectConfig.extraInfo length cannot exceed 1024 bytes")}(t),new bW(t)}};var wW=r(ee.Object.getOwnPropertySymbols),_W=On,SW=Xn.indexOf,CW=zr,TW=C([].indexOf),IW=!!TW&&1/TW([1],1,-0)<0;_W({target:"Array",proto:!0,forced:IW||!CW("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return IW?TW(this,e,t)||0:SW(this,e,t)}});var RW=er("Array","indexOf"),xW=u,NW=RW,OW=Array.prototype,kW=function(e){var t=e.indexOf;return e===OW||xW(OW,e)&&t===OW.indexOf?NW:t},PW=r(kW);function BW(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==PW(t).call(t,r))continue;n[r]=e[r]}return n}(e,t);if(wW){var o=wW(e);for(r=0;r<o.length;r++)n=o[r],-1===PW(t).call(t,n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}let LW=class{get localCapabilities(){return dx(this._localCapabilities)}get rtpCapabilities(){return dx(this._rtpCapabilities)}get candidates(){return dx(this._candidates)}get iceParameters(){return dx(this._iceParameters)}get dtlsParameters(){return dx(this._dtlsParameters)}constructor(e){uC(this,"sessionDesc",void 0),uC(this,"_localCapabilities",void 0),uC(this,"_rtpCapabilities",void 0),uC(this,"_candidates",void 0),uC(this,"_iceParameters",void 0),uC(this,"_dtlsParameters",void 0),uC(this,"setup",void 0),uC(this,"currentMidIndex",void 0),uC(this,"cname","o/i14u9pJrxRKAsu"),uC(this,"firefoxSsrcMidMap",new Map),e=dx(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,localCapabilities:o,direction:a,setup:s,videoCodec:c,audioCodec:l}=e;let d;this.setup=s,d=a===xD.RECEIVE_ONLY?DN("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"):DN("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"),this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=o;const u=a===xD.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,A=a===xD.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,h=a===xD.RECEIVE_ONLY?i.send.videoCodecs:CM(iU.VIDEO,u,A,c),p=a===xD.RECEIVE_ONLY?i.send.audioCodecs:CM(iU.AUDIO,u,A,l);for(const f of d.mediaDescriptions)f.attributes.iceUfrag=t.iceUfrag,f.attributes.icePwd=t.icePwd,f.attributes.fingerprints=n.fingerprints,f.attributes.candidates=r,f.attributes.setup=this.setup,"application"===f.media.mediaType&&(f.attributes.sctpPort="5000"),"video"===f.media.mediaType&&(f.media.fmts=h.map((e=>e.payloadType.toString(10))),f.attributes.payloads=h,f.attributes.extmaps=u.videoExtensions),"audio"===f.media.mediaType&&(f.media.fmts=p.map((e=>e.payloadType.toString(10))),f.attributes.payloads=p,f.attributes.extmaps=u.audioExtensions,SM(f));this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}toString(){return UN(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every((e=>this.hasMid(e))):this.sessionDesc.mediaDescriptions.some((t=>t.attributes.mid===e))}send(e,t,n,r,i){n=n.replace(/ /g,"-");const{ssrcs:o,ssrcGroups:a}=hM(t,this.cname,CN("SYNC_GROUP")?n:void 0),s=this.findPreloadMediaDesc(o);if(s){if(tR()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,s.attributes.mid),i&&(i.twcc||i.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,i),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,o,r);let n;return-1===t?(n=this.createOrRecycleSendMedia(e,o,a,"sendonly",r,i),this.updateBundleMids()):(n=dx(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=o,n.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,i)),tR()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,n.attributes.mid),{needExchangeSDP:!0,mid:n.attributes.mid}}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{e.attributes.ssrcs=[]})),this.updateBundleMids()}receive(e,t,n){const r=[];return e.forEach((e=>{const i=e._mediaStreamTrack.kind,o=this.findAvailableRecvMediaIndex(i);let a,s=!1;-1===o?(s=!0,a=this.createOrRecycleRecvMedia(e,[],"recvonly",t,n),this.updateBundleMids()):(a=dx(this.sessionDesc.mediaDescriptions[o]),a.attributes.direction="recvonly"),r.push({mid:a.attributes.mid,needCreateTransceiver:s})})),r}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}addRemoteCandidate(e){const{foundation:t,protocol:n,address:r,port:i,type:o,relatedAddress:a,relatedPort:s,priority:c}=new RTCIceCandidate(e),l={foundation:null!=t?t:"",componentId:"1",transport:null!=n?n:"",priority:c?c+"":"",connectionAddress:null!=r?r:"",port:i?i+"":"",type:o?o+"":"",relAddr:null!=a?a:"",relPort:s?s+"":"",extension:{}};this.candidates.some((e=>e.priority===l.priority&&e.connectionAddress===l.connectionAddress&&e.port===l.port))||(this._candidates.push(l),this.sessionDesc.mediaDescriptions.forEach((e=>{e.attributes.candidates=this.candidates})))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,n,r,i){const o=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,s=CM(o,a,this.localCapabilities.send,o===iU.AUDIO?i:r),c=o===iU.VIDEO?a.videoExtensions:a.audioExtensions,l="".concat(++this.currentMidIndex);let d={media:{mediaType:o,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};d=this.mungRecvMediaDsec(d,e);const u=this.findFirstClosedMedia(o);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Br(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Br(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}findAvailableMediaIndex(e,t,n){return this.sessionDesc.mediaDescriptions.findIndex((r=>{const i=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if(tR()){if(i){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!e||e!==r.attributes.mid)}return!1}return i&&r.attributes.mid===n}))}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex((t=>{const n=t.media.mediaType===e&&"0"!==t.media.port&&("recvonly"===t.attributes.direction||"sendrecv"===t.attributes.direction);return"0"!==t.attributes.mid&&"1"!==t.attributes.mid&&n}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}restartICE(e){e=dx(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}createOrRecycleSendMedia(e,t,n,r,i,o){const a=this.rtpCapabilities.send,s=e===iU.VIDEO?a.videoCodecs:a.audioCodecs,c=e===iU.VIDEO?a.videoExtensions:a.audioExtensions;tR()&&(i="".concat(++this.currentMidIndex));let l={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:i}};l=this.mungSendMediaDesc(l,o);const d=this.findFirstClosedMedia(e);if(d){const e=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}mungRecvMediaDsec(e,t,n){const r=dx(e);return fM(r),pM(r,t),mM(r,t),gM(r),vM(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=dx(e);return vM(n,t,this.localCapabilities.recv),SM(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>tR()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}};const DW=["sdp"];var UW;function MW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MW(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let jW=(UW=class e extends nU{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[]}set isInRestartIce(e){this._isInRestartIce=e}get isInRestartIce(){return this._isInRestartIce}constructor(t,n,r){super(t,n),uC(this,"direction",void 0),uC(this,"name",void 0),uC(this,"store",void 0),uC(this,"spec",void 0),uC(this,"peerConnection",void 0),uC(this,"initialOffer",void 0),uC(this,"transport",void 0),uC(this,"statsFilter",void 0),uC(this,"localCandidateCount",0),uC(this,"_isInRestartIce",!1),uC(this,"mutex",void 0),uC(this,"onLocalCandidate",void 0),uC(this,"remoteSDP",void 0),uC(this,"pendingCandidates",[]),uC(this,"localCapabilities",void 0),uC(this,"isReady",!1),uC(this,"restartCnt",0),uC(this,"curTurnServerIndex",0),this.store=n,this.spec=t,this.mutex=new Lx("P2PConnection-mutex",n.clientId),this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t,n.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=null!=r?r:xD.SEND_ONLY,this.name=this.direction===xD.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=AN(this.peerConnection,CN("STATS_UPDATE_INTERVAL"),void 0,tR()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(e){try{const t=await bM();if(this.localCapabilities=_M(t),e){const{sdp:t}=e,n=BW(e,DW),r=function(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=cM(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"sendonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(wM(t,e,"videoExtensions",n,r,i),wM(t,e,"videoCodecs",n,r,i),wM(t,e,"audioExtensions",n,r,i),wM(t,e,"audioCodecs",n,r,i),CN("RAISE_H264_BASELINE_PRIORITY")){const e=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){rO.debug("raising H264 baseline profile priority");const n=i.videoCodecs[e];i.videoCodecs.splice(e,1),i.videoCodecs.splice(t,0,n)}-1!==t&&CN("FILTER_SEND_H264_BASELINE")&&(n.videoCodecs=n.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:i}}({},{},t);this.remoteSDP=new LW({remoteIceParameters:n.iceParameters,remoteDtlsParameters:n.dtlsParameters,candidates:[],remoteRTPCapabilities:r,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const i=await this.peerConnection.createAnswer();if(!i.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const o=lM(i.sdp);await this.peerConnection.setLocalDescription(i);const a=await EM({},{},i.sdp);this.localCapabilities=_M(a);const s=this.peerConnection.getTransceivers()[0];return null!=s&&s.receiver&&s.receiver.transport&&this.tryBindTransportEvents(s.receiver.transport),FW(FW({},o),{},{sdp:i.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=lM(e.sdp);return this.initialOffer=e,FW(FW({},t),{},{sdp:e.sdp})}}catch(e){throw new TR(CR.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:t,iceParameters:n,dtlsParameters:r}=e,i=await EM({},{},t);this.remoteSDP=new LW({remoteIceParameters:n,remoteDtlsParameters:r,candidates:[],remoteRTPCapabilities:i,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const o=this.peerConnection.getTransceivers()[0];null!=o&&o.sender&&o.sender.transport&&this.tryBindTransportEvents(o.sender.transport)}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async addRemoteCandidate(e){try{e&&this.pendingCandidates.push(e),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach((e=>{this.peerConnection.addIceCandidate(e)})),this.pendingCandidates=[])}catch(e){throw new TR(CR.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(e.toString()))}}send(e,t,n){var r=this;return qT((function*(){const i=yield XT(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const i=[],o=r.remoteSDP.receive(e,t,n);e.forEach(((e,t)=>{if(o[t].needCreateTransceiver){const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});i.push(t),e._updateRtpTransceiver(t)}else{const n=r.peerConnection.getTransceivers().find((e=>e.mid===o[t].mid));if(!n)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(o[t].mid));i.push(n),e._updateRtpTransceiver(n)}})),tR()&&!0===CN("SIMULCAST")&&(yield XT(r.applySimulcastForFirefox(i,e)));const a=o.map((e=>e.mid)),s=yield XT(r.peerConnection.createOffer()),c=r.mungSendOfferSDP(s.sdp,e,a),l=DN(c),d=a.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return dM(t,CN("USE_PUB_RTX"))})),u=i.map(((e,t)=>{const n=a[t];return{localSSRC:d[t],id:n}}));yield XT(r.peerConnection.setLocalDescription({type:"offer",sdp:c}));try{yield u}catch(e){const n=r.remoteSDP.toString();throw yield XT(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield XT(r.peerConnection.setRemoteDescription({type:"answer",sdp:n})),yield XT(r.stopSending(a,!0)),e}yield XT(r.applySimulcastEncodings(i,e)),yield XT(r.applySendEncodings(i,e));const A=r.remoteSDP.toString(),h=r.logSDPExchange(c,"offer","local","send");return null==h||h(A),yield XT(r.setRemoteDescription({type:"answer",sdp:A})),i.map(((e,t)=>{const n=a[t];return{localSSRC:d[t],id:n}}))}catch(e){throw e instanceof TR?e:new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length (".concat(t.length,") doesn't match mids' length (").concat(e.length,") when trying to call P2PConnection.stopSending."));t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),rO.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else rO.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."));const a=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!a||null===a.mid)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:a.receiver.track,mid:a.mid,transceiver:a}}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async mockReceive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),rO.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else rO.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."))}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===gN.Auto&&(this.store.p2pTransport=gN.SdRtn,pO().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,pO().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:t}=lM(e.sdp);return this.store.descriptionStart(),this.direction===xD.SEND_ONLY&&await this.peerConnection.setLocalDescription(e),t}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===xD.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const e=await this.peerConnection.createAnswer();if(!e.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:t}=lM(e.sdp);return await this.peerConnection.setLocalDescription(e),t}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}close(){var e;this.peerConnection.close(),this.peerConnection.onicecandidate=null,null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?tR()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:FW(FW({},Xx),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:FW(FW({},Xx),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e,t;Br(e=["connected","completed"]).call(e,this.peerConnection.iceConnectionState)&&(this.isReady=!1),null===(t=this.onICEConnectionStateChange)||void 0===t||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;"connected"===this.peerConnection.connectionState&&(this.restartCnt=0),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=e=>{var t;e.candidate?(e.candidate.candidate&&(null===(t=this.onLocalCandidate)||void 0===t||t.call(this,e.candidate.toJSON())),this.localCandidateCount+=1):rO.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i={iceServers:[]};var o;return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(YR(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers,n,r)),CN("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway,n,r)),Br(o=[gN.Relay,gN.SdRtn]).call(o,n)&&(i.iceTransportPolicy="relay"),CN("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(i.iceTransportPolicy="relay")})))),CN("ENABLE_ENCODED_TRANSFORM")&&pO().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),rO.debug("P2PConnection p2pTransport is ".concat(n)),i}static turnServerConfigToIceServers(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[],i=e.filter((e=>e.tcpport));rO.debug("P2PConnection turnServers is ".concat(i,", current index is ").concat(n));const o=i.length>n?i[n]:i[0];switch(t){case gN.SdRtn:const t=e.filter((e=>{var t;return Br(t=e.username).call(t,"glb:")&&e.turnServerURL==e.turnServerURL})),i=t.length>n?t[n]:t[0];i&&(r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turn:".concat(KU(i.turnServerURL),":").concat(i.tcpport,"?transport=udp")}),r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turns:".concat(KU(i.turnServerURL),":").concat(i.tcpport,"?transport=tcp")}));break;case gN.Relay:o&&(r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(o.turnServerURL,":").concat(o.tcpport,"?transport=udp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(KU(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}));break;default:o&&(r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(o.turnServerURL,":").concat(o.tcpport,"?transport=udp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(KU(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"stun:".concat(o.turnServerURL,":").concat(o.tcpport)}))}return r}tryBindTransportEvents(e){if(e){this.transport=e,e.onstatechange=()=>{var t;null!=e&&e.state&&(null===(t=this.onDTLSTransportStateChange)||void 0===t||t.call(this,e.state))},e.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const t=e.iceTransport;t&&(t.onstatechange=()=>{const t=null==e?void 0:e.iceTransport.state;var n;t&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,t))},t.getSelectedCandidatePair&&(t.onselectedcandidatepairchange=()=>{if(t.getSelectedCandidatePair()){const{local:e,remote:n}=t.getSelectedCandidatePair();rO.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))),!t)return rO.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return rO.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!pO().supportSetRtpSenderParameters)return rO.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const r={},i={};switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(e._encoderConfig){var o;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(i.maxBitrate=1e3*t),Br(o=e._hints).call(o,PO.LOW_STREAM)&&(n&&(i.maxFramerate=WU(n)),r&&r>=1&&(i.scaleResolutionDownBy=r))}if(CN("DSCP_TYPE")&&yR()){var a;const e=CN("DSCP_TYPE");Br(a=["very-low","low","medium","high"]).call(a,e)&&(i.networkPriority=e)}const s=t.getParameters(),c=null===(n=s.encodings)||void 0===n?void 0:n[0];tR()&&!c&&(r.encodings=[i]),c&&Object.assign(c,i),Object.assign(s,r),rO.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(s.encodings))),await t.setParameters(s)}async applySendEncodings(e,t){try{if(!pO().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];i instanceof IB&&!this.isVP8Simulcast(i)&&await this.updateRtpSenderEncodings(i,r.sender)}}catch(e){rO.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=DN(e);return t.forEach(((e,t)=>{const i=n[t],o=r.mediaDescriptions.find((e=>e.attributes.mid===i));o&&(pM(o,e),yM(o,e,this.store.codec))})),UN(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let s=0;s<e.length;s++){var n,r,i,o,a;const c=e[s],l=t[s];if(l instanceof IB&&!Br(n=l._hints).call(n,PO.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=l._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(a=l._scalabilityMode)||void 0===a?void 0:a.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!tR()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof IB&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const a=t.sender.getParameters();await t.sender.setParameters(Object.assign(a,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return!!(e instanceof IB&&CN("SIMULCAST")&&"vp8"===this.store.codec&&!Br(t=e._hints).call(t,PO.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(CN("SDP_LOGGING"))return rO.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async e=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}async getRemoteSSRC(e,t){var n;if(t=null!=t?t:null===(n=this.currentRemoteDescription)||void 0===n?void 0:n.sdp){var r;const n=null===(r=DN(t).mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===r?void 0:r.attributes.ssrcs;return null==n?void 0:n[0].ssrcId}}async setRemoteDescription(e){var t;await this.peerConnection.setRemoteDescription(e),Br(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(e,t,n){const r=DN(e),i=r.mediaDescriptions.find((e=>e.attributes.mid===t));return i&&n===iU.AUDIO&&"audio"===i.media.mediaType&&SM(i),UN(r)}},vD(UW.prototype,"establish",[QW],Object.getOwnPropertyDescriptor(UW.prototype,"establish"),UW.prototype),vD(UW.prototype,"connect",[QW],Object.getOwnPropertyDescriptor(UW.prototype,"connect"),UW.prototype),vD(UW.prototype,"receive",[QW],Object.getOwnPropertyDescriptor(UW.prototype,"receive"),UW.prototype),vD(UW.prototype,"mockReceive",[QW],Object.getOwnPropertyDescriptor(UW.prototype,"mockReceive"),UW.prototype),vD(UW.prototype,"stopReceiving",[QW],Object.getOwnPropertyDescriptor(UW.prototype,"stopReceiving"),UW.prototype),vD(UW.prototype,"restartICE",[QW],Object.getOwnPropertyDescriptor(UW.prototype,"restartICE"),UW.prototype),vD(UW.prototype,"close",[QW],Object.getOwnPropertyDescriptor(UW.prototype,"close"),UW.prototype),vD(UW.prototype,"updateEncoderConfig",[QW],Object.getOwnPropertyDescriptor(UW.prototype,"updateEncoderConfig"),UW.prototype),vD(UW.prototype,"updateSendParameters",[QW],Object.getOwnPropertyDescriptor(UW.prototype,"updateSendParameters"),UW.prototype),vD(UW.prototype,"replaceTrack",[QW],Object.getOwnPropertyDescriptor(UW.prototype,"replaceTrack"),UW.prototype),vD(UW.prototype,"muteLocal",[QW],Object.getOwnPropertyDescriptor(UW.prototype,"muteLocal"),UW.prototype),vD(UW.prototype,"unmuteLocal",[QW],Object.getOwnPropertyDescriptor(UW.prototype,"unmuteLocal"),UW.prototype),UW);function QW(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return await r.apply(this,o)}finally{n()}},n}let VW=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({});var HW,zW,KW,GW,WW,qW,YW,XW,JW,ZW,$W,eq;function tq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tq(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let rq=(HW=iq(VW.SEND_ONLY),zW=iq(VW.SEND_ONLY),KW=iq(),GW=iq(VW.RECEIVE_ONLY),WW=iq(VW.RECEIVE_ONLY),qW=iq(VW.RECEIVE_ONLY),YW=iq(VW.RECEIVE_ONLY),XW=iq(VW.RECEIVE_ONLY),JW=iq(VW.RECEIVE_ONLY),ZW=iq(),$W=iq(VW.RECEIVE_ONLY),eq=class extends QR{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(dU.StateChange,t,this._state)}constructor(e,t){super(),uC(this,"isPlanB",!1),uC(this,"store",void 0),uC(this,"statsUploader",void 0),uC(this,"sendConnection",void 0),uC(this,"recvConnection",void 0),uC(this,"localTrackMap",new Map),uC(this,"remoteUserMap",new Map),uC(this,"localDataChannels",[]),uC(this,"pendingLocalTracks",[]),uC(this,"pendingRemoteTracks",[]),uC(this,"statsCollector",void 0),uC(this,"dtlsFailedCount",0),uC(this,"sendMutex",void 0),uC(this,"recvMutex",void 0),uC(this,"_state",lU.Disconnected),uC(this,"_restartStates",["disconnected","failed"]),uC(this,"reconnectInterval",void 0),uC(this,"uploadUnplinkStarted",!1),uC(this,"uploadDownlinkStarted",!1),uC(this,"uplinkStateUploadInterval",void 0),uC(this,"downlinkStatsUploadInterval",void 0),uC(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==lU.Connected)return void n(new TR(CR.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const a=r.find((e=>"videoLowTrack"===e[0]));a&&a[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));let s=!1;var i,o;s="video"===e.trackMediaType?!(null===(i=this.localTrackMap.get(cU.LocalAudioTrack))||void 0===i||!i.track._muted):void 0===(null===(o=this.localTrackMap.get(cU.LocalVideoTrack))||void 0===o?void 0:o.id);const c=this.createMuteMessage(r);await rx(this,dU.RequestMuteLocal,c);const l="video"===e.trackMediaType?EU.MUTE_LOCAL_VIDEO:EU.MUTE_LOCAL_AUDIO;await rx(this,dU.RequestP2PMuteLocal,{action:l,message:c,isMuteAll:s}),t()}catch(e){n(e)}finally{r()}})),uC(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==lU.Connected)return void n(new TR(CR.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();await this.sendConnection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const i=this.createUnmuteMessage(r),o="video"===e.trackMediaType?EU.UNMUTE_LOCAL_VIDEO:EU.UNMUTE_LOCAL_AUDIO;await rx(this,dU.RequestP2PMuteLocal,{action:o,message:i}),t()}catch(e){n(e)}finally{r()}})),uC(this,"handleUpdateVideoEncoder",(async(e,t,n,r)=>{let i;"boolean"==typeof r&&r||(i=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoEncoder"));try{const n=this.localTrackMap.get(cU.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==lU.Connected)return void t();const{id:r,track:i}=n;r&&(await this.sendConnection.updateSendParameters(r,i),await this.sendConnection.updateEncoderConfig(r,i),this.emit(dU.UpdateVideoEncoder,i)),t()}catch(e){n(e)}finally{var o;null===(o=i)||void 0===o||o()}})),uC(this,"handleUpdateVideoSendParameters",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{const n=this.localTrackMap.get(cU.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==lU.Connected)return void t();const{id:r,track:i}=n;r&&await this.sendConnection.updateSendParameters(r,i),t()}catch(e){n(e)}finally{r()}})),uC(this,"handleReplaceTrack",(async(e,t,n,r)=>{let i;rO.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var o;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.sendConnection||!n||void 0===n[1].id||this.state!==lU.Connected)return void t();if(await(null===(o=this.sendConnection)||void 0===o?void 0:o.replaceTrack(e,n[1].id)),n[0]===cU.LocalVideoTrack&&pO().supportDualStreamEncoding){const t=this.localTrackMap.get(cU.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new nh(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var a;null===(a=i)||void 0===a||a()}})),uC(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),uC(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),uC(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),uC(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new Ij(e),this.bindStatsUploaderEvents(),this.sendMutex=new Lx("P2PChannel2-send-mutex",e.clientId),this.recvMutex=new Lx("P2PChannel2-recv-mutex",e.clientId),this.reconnectInterval=window.setInterval((()=>{[this.sendConnection,this.recvConnection].forEach((e=>{e&&("disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))}))}),CN("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new TR(CR.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e){throw new TR(CR.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let n;try{if(t){this.recvConnection&&(rO.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),n=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new jW(e,this.store,xD.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const r=await this.recvConnection.establish(t);return{iceParameters:r.iceParameters,dtlsParameters:r.dtlsParameters,sdp:r.sdp}}{this.state=lU.New,this.sendConnection&&(rO.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),n=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new jW(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const t=await this.sendConnection.establish();return{iceParameters:t.iceParameters,dtlsParameters:t.dtlsParameters,sdp:t.sdp}}}finally{n&&n()}}async p2pConnect(e){if(!this.sendConnection)throw new TR(CR.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=lU.Connected}async addRemoteCandidate(e,t){if(t===xD.RECEIVE_ONLY){if(!this.sendConnection)throw new TR(CR.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new TR(CR.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,n){var r=this;return qT((function*(){const i=yield XT(r.sendMutex.lock("From P2PChannel.publish"));try{if(!r.sendConnection||r.state!==lU.Connected){r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(t))}r.store.pubId=r.store.pubId+1,kF.markPublishStart(r.store.clientId,r.store.pubId);const i=r.filterTobePublishedTracks(e,t,n);if(0===i.length)return void(yield XT(r.tryToUnmuteAudio(e)));i.forEach((e=>{let{track:t,type:n}=e;const i=Date.now();r.store.publish(t.getTrackId(),n===cU.LocalAudioTrack?"audio":"video",i)})),r.bindLocalTrackEvents(i);const o=yield XT(r.sendConnection.send(i.map((e=>{let{track:t}=e;return t})),r.store.codec,r.store.audioCodec)),a=(yield XT(o.next())).value,s=r.createGatewayPublishMessage(i,a);try{yield s}catch(e){throw o.throw(e),(null==e?void 0:e.code)===CR.WS_ABORT&&i.forEach((e=>{let{track:t}=e;-1===r.pendingLocalTracks.indexOf(t)&&r.pendingLocalTracks.push(t)})),r.unbindLocalTrackEvents(i),e}yield XT(o.next()),i.forEach((e=>{let{type:t}=e;r.statsCollector.addLocalStats(t)})),r.statsUploader.startUploadOutboundStats(),r.assignLocalTracks(i,a),i.forEach((e=>{let{track:t,type:n}=e;const i=Date.now();r.store.publish(t.getTrackId(),n===cU.LocalAudioTrack?"audio":"video",void 0,i)})),r.startUploadUplinkState()}finally{i()}}))()}async unpublish(e){if(!this.sendConnection||this.state!==lU.Connected)return void(0===e.length?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter((t=>!Br(e).call(e,t))));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));n&&n[1].track.close();const r=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===lU.Connected)return n&&n[1].track.close(),r;e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}))}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const e=()=>{const e=[],t=[];Array.from(this.localTrackMap.entries()).forEach((n=>{let[r,{track:i,ssrcs:o}]=n;const a={stream_type:nj(i,r),ssrcs:o};i._muted||!i._enabled?e.push(a):t.push(a)})),e.length>0&&e.forEach((e=>{rx(this,dU.RequestMuteLocal,[e])})),t.length>0&&t.forEach((e=>{rx(this,dU.RequestUnmuteLocal,[e])}))};e(),this.uplinkStateUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return qT((function*(){throw new TR(CR.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")}))()}async republish(){this.pendingLocalTracks.length>0&&(rO.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await nx(this,dU.RequestRePublish,this.pendingLocalTracks),this.emit(dU.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new TR(CR.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,n,r){var i;if(!this.recvConnection)throw new TR(CR.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if(null!==(i=this.remoteUserMap.get(e))&&void 0!==i&&i.has(t))return;const{track:o,mid:a,transceiver:s}=await this.recvConnection.receive(t,[{ssrcId:n}],String(e.uid),r);t===iU.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new zB(o,e.uid,e._uintid,this.store),rO.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),s&&e._audioTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=n,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new HB(o,e.uid,e._uintid,this.store),rO.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),s&&e._videoTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._videoTrack));const c=this.remoteUserMap.get(e);c?c.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const l=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:i}=n;return r.uid===e.uid&&t===i}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(dU.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,n,r){if(!this.recvConnection)throw new TR(CR.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:n}],String(e.uid),r)}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:i}=n;return void 0!==t?r.uid===e.uid&&t===i:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.recvConnection||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===iU.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===iU.VIDEO){var i;null===(i=e._videoTrack)||void 0===i||i._destroy(),e._videoTrack=void 0}})),!this.recvConnection)return;const i=this.filterTobeUnSubscribedTracks(e,t);0!==i.length&&(await this.recvConnection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),i.forEach((e=>{let[t,{kind:r}]=e;var i,o;if(r===iU.VIDEO&&t._videoSSRC&&(null===(i=this.recvConnection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===iU.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(r===iU.AUDIO){var a;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(a=t._audioTrack)||void 0===a||a._destroy(),t._audioTrack=void 0)}})),i.forEach((e=>{let[,{kind:t}]=e;rx(this,dU.RequestP2PMuteRemote,t)})))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const e=()=>Array.from(this.remoteUserMap.entries()).forEach((e=>{let[,t]=e;[iU.VIDEO,iU.AUDIO].forEach((e=>{t.has(e)?rx(this,dU.RequestP2PUnmuteRemote,e):rx(this,dU.RequestP2PMuteRemote,e)}))}));e(),this.downlinkStatsUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new TR(CR.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new TR(CR.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new TR(CR.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new TR(CR.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);if(!n)return void rO.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void rO.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===iU.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.recvConnection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||rO.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):rO.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(cU.LocalAudioTrack);if((null==t?void 0:t.track)instanceof MP){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==cU.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===cU.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===cU.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}reportPublishEvent(e,t,n,r,i){if(e){const n=this.localTrackMap.get(cU.LocalAudioTrack),o=r?this.localTrackMap.get(cU.LocalVideoLowTrack):this.localTrackMap.get(cU.LocalVideoTrack);uO.publish(this.store.sessionId,{eventElapse:kF.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(PO.SCREEN_TRACK)),audio:!!n,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;n||(n=[]);const a=n.find((e=>e instanceof LP)),s=r?null===(o=this.localTrackMap.get(cU.LocalVideoTrack))||void 0===o?void 0:o.track:n.find((e=>e instanceof IB));uO.publish(this.store.sessionId,{eventElapse:kF.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==a?void 0:a.getTrackLabel(),videoName:null==s?void 0:s.getTrackLabel(),screenshare:-1!==(null==s?void 0:s._hints.indexOf(PO.SCREEN_TRACK)),audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===iU.VIDEO?n._videoSSRC:n._audioSSRC;i&&uO.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===iU.VIDEO,audio:r===iU.AUDIO,peerid:n.uid,subscribeRequestid:r===iU.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:kF.measureFromSubscribeStart(this.store.clientId,i)})}reset(){rO.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new Lx("P2PChannel2-send-mutex",this.store.clientId),this.sendMutex=new Lx("P2PChannel2-recv-mutex",this.store.clientId),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(cU.LocalAudioTrack);if((null==e?void 0:e.track)instanceof MP){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=lU.Disconnected}getStats(e){var t,n;return e?null===(n=this.recvConnection)||void 0===n?void 0:n.getStats():null===(t=this.sendConnection)||void 0===t?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.recvConnection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(cU.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(cU.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof IB||t&&t.track instanceof LP?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(GN(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(cU.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Yh(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(rO.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=lU.Reconnecting,CN("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case cU.LocalVideoTrack:Br(t=r._hints).call(t,PO.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case cU.LocalAudioTrack:r instanceof MP?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case cU.LocalVideoLowTrack:}})),this.emit(dU.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(GN(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(dU.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),rO.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof MF?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let n,r;if(e===xD.SEND_ONLY){if(!this.sendConnection)throw new TR(CR.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");n=await this.sendMutex.lock("From P2PChannel.restartICE"),r=this.sendConnection}else{if(!this.recvConnection)throw new TR(CR.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");n=await this.recvMutex.lock("From P2PChannel.restartICE"),r=this.recvConnection}try{if(t){const e=await r.restartICE(t);return r.isInRestartIce=!1,e}{const e=await r.restartICE();if(e){const t=await nx(this,dU.RequestP2PRestartICE,{direction:xD.RECEIVE_ONLY,iceParameter:e});await r.restartICE(t),r.isInRestartIce=!1}}}finally{n()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const e=this.sendConnection.getStats(),t=this.localTrackMap.get(cU.LocalVideoTrack),n=this.localTrackMap.get(cU.LocalAudioTrack),r=e.videoSend.find((e=>{var n;return e.ssrc===(null==t||null===(n=t.ssrcs)||void 0===n?void 0:n[0].ssrcId)})),i=e.audioSend.find((e=>{var t;return e.ssrc===(null==n||null===(t=n.ssrcs)||void 0===t?void 0:t[0].ssrcId)}));if(!r||!i)return 1;const o=ix(this,dU.NeedSignalRTT),a=r?r.rttMs:void 0,s=i?i.rttMs:void 0,c=a&&s?(a+s)/2:a||s,l=(c&&o?(c+o)/2:c||o)||0,d=100*e.sendPacketLossRate*.7/50+.3*l/1500,u=d<.17?1:d<.36?2:d<.59?3:d<.1?4:5,A=null==t?void 0:t.track;if(A&&A._encoderConfig&&-1===A._hints.indexOf(PO.SCREEN_TRACK)){const t=A._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return OL[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const e=this.recvConnection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const i=r._audioSSRC,o=r._videoSSRC,a=e.audioRecv.find((e=>e.ssrc===i)),s=e.videoRecv.find((e=>e.ssrc===o));if(!a&&!s)return void(t+=1);const c=ix(this,dU.NeedSignalRTT),l=e.rtt,d=(l&&c?(l+c)/2:l||c)||0,u=a?a.jitterMs:void 0,A=e.recvPacketLossRate;let h=.7*A*100/50+.3*d/1500;u&&(h=.6*A*100/50+.2*d/1500+.2*u/400),t+=h<.1?1:h<.17?2:h<.36?3:h<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new nh(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}filterTobePublishedTracks(e,t,n){const r=[],i=pO(),o=this.getAllTracks();e=cx(e=e.filter((e=>-1===o.indexOf(e))));let a=!1,s=!1;for(const c of e){if(c instanceof IB&&(this.localTrackMap.has(cU.LocalVideoTrack)||a?new TR(CR.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:cU.LocalVideoTrack}),a=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:cU.LocalVideoLowTrack})}if(c instanceof LP){const e=this.localTrackMap.get(cU.LocalAudioTrack);if(e){if(!(e.track instanceof MP))throw new TR(CR.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new TR(CR.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0)}else if(s){const e=r.find((e=>{let{type:t}=e;return t===cU.LocalAudioTrack}));if(!(e.track instanceof MP))throw new TR(CR.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new TR(CR.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c)}else{if(!i.webAudioMediaStreamDest||c instanceof MP||c._bypassWebAudio)r.push({track:c,type:cU.LocalAudioTrack});else{const e=new MP;e.addAudioTrack(c),r.push({track:e,type:cU.LocalAudioTrack})}s=!0}}}return r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=cx(e=e.filter((e=>-1!==n.indexOf(e))));for(const r of e){if(r instanceof LP){const e=this.localTrackMap.get(cU.LocalAudioTrack);if(!e)continue;e.track instanceof MP?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([cU.LocalAudioTrack,e]),e.track.close())):t.push([cU.LocalAudioTrack,e])}if(r instanceof IB){const e=this.localTrackMap.get(cU.LocalVideoTrack);if(!e)continue;t.push([cU.LocalVideoTrack,e]);const n=this.localTrackMap.get(cU.LocalVideoLowTrack);n&&t.push([cU.LocalVideoLowTrack,n])}}return t}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case cU.LocalVideoTrack:t.addListener(kO.GET_STATS,this.handleGetLocalVideoStats),t.addListener(kO.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(kO.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(kO.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(kO.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.addListener(kO.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(kO.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(kO.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case cU.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case cU.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof MP?e.trackList.forEach((e=>{e.addListener(kO.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(kO.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(kO.GET_STATS,this.handleGetLocalAudioStats),e.addListener(kO.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(kO.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(kO.GET_STATS,this.handleGetLocalAudioStats),e.addListener(kO.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(kO.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(kO.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(kO.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(kO.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case cU.LocalVideoTrack:t.off(kO.GET_STATS,this.handleGetLocalVideoStats),t.off(kO.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(kO.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(kO.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(kO.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.off(kO.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(kO.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(kO.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case cU.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case cU.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof MP?e.trackList.forEach((e=>{e.off(kO.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(kO.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(kO.GET_STATS,this.handleGetLocalAudioStats),e.off(kO.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(kO.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(kO.GET_STATS,this.handleGetLocalAudioStats),e.off(kO.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(kO.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(kO.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(kO.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(kO.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof HB&&t.addListener(kO.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof zB&&t.addListener(kO.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(kO.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(iU.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(iU.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let i,{track:o,type:a}=e;switch(a){case cU.LocalAudioTrack:i=GD.Audio;break;case cU.LocalVideoTrack:i=Br(r=o._hints).call(r,PO.SCREEN_TRACK)?GD.Screen:GD.High;break;case cU.LocalVideoLowTrack:i=GD.Low}return{kind:a===cU.LocalAudioTrack?iU.AUDIO:iU.VIDEO,stream_type:i,mid:t[n].id,ssrcs:t[n].localSSRC,isMuted:o.muted||!o.enabled}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:a}]=e;switch(r){case cU.LocalVideoTrack:n=Br(t=i._hints).call(t,PO.SCREEN_TRACK)?GD.Screen:GD.High;break;case cU.LocalAudioTrack:n=GD.Audio;break;case cU.LocalVideoLowTrack:n=GD.Low}return{stream_type:n,ssrcs:o,mid:a}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:i}=e;this.localTrackMap.set(i,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var n;rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(dU.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(e.isInRestartIce=!1),Br(n=this._restartStates).call(n,t)&&!e.isInRestartIce&&("disconnected"===t&&await Ex(800),"disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),uO.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:KR.TRACER}).onSuccess(),this.emit(dU.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(GN(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(FO.FIRST_FRAME_DECODED),uO.firstRemoteFrame(this.store.sessionId,sO.FIRST_AUDIO_DECODE,cO.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:kF.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(GN(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&uO.firstRemoteFrame(this.store.sessionId,sO.FIRST_AUDIO_RECEIVED,cO.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:kF.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(GN(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&uO.firstRemoteFrame(this.store.sessionId,sO.FIRST_VIDEO_RECEIVED,cO.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:kF.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(dU.ConnectionTypeChange,n),rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify($U(t))," -> ").concat(JSON.stringify($U(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{rO.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify($U(t))," -> ").concat(JSON.stringify($U(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(dU.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){const t=e===xD.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,rO.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===xD.SEND_ONLY?this.restartICE(e):nx(this,dU.RequestP2PRestartICE,{direction:xD.SEND_ONLY}))}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(cU.LocalAudioTrack);if(e instanceof LP&&(null==n?void 0:n.track)instanceof MP)return n.track.isActive||t.push([cU.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===cU.LocalVideoTrack)){const e=this.localTrackMap.get(cU.LocalVideoLowTrack);e&&t.push([cU.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(cU.LocalAudioTrack);if(e instanceof LP&&(null==n?void 0:n.track)instanceof MP)return n.track.isActive&&t.push([cU.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===cU.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(cU.LocalVideoLowTrack);e&&t.push([cU.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:a}]=e;switch(r){case cU.LocalAudioTrack:n=GD.Audio;break;case cU.LocalVideoTrack:n=Br(t=i._hints).call(t,PO.SCREEN_TRACK)?GD.Screen:GD.High;break;case cU.LocalVideoLowTrack:n=GD.Low}return{stream_type:n,ssrcs:o,mid:a}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:a}]=e;switch(r){case cU.LocalAudioTrack:n=GD.Audio;break;case cU.LocalVideoTrack:n=Br(t=i._hints).call(t,PO.SCREEN_TRACK)?GD.Screen:GD.High;break;case cU.LocalVideoLowTrack:n=GD.Low}return{stream_type:n,ssrcs:o,mid:a}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((t=>{let[r,i]=t;n.push([e,{kind:r,id:i}])}));return n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:i}]=e;switch(r){case iU.VIDEO:return void(n._videoSSRC&&t.push({stream_type:iU.VIDEO,ssrcId:n._videoSSRC}));case iU.AUDIO:return void(n._audioSSRC&&t.push({stream_type:iU.AUDIO,ssrcId:n._audioSSRC}))}})),t}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(cU.LocalVideoTrack),n=this.localTrackMap.get(cU.LocalVideoLowTrack);t&&(await t.track.setBitrateLimit(e.uplink),await new nh(((e,n)=>{this.handleUpdateVideoEncoder(t.track,e,n,!0)}))),n&&e.low_stream_uplink&&(await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0}),await new nh(((e,t)=>{this.handleUpdateVideoEncoder(n.track,e,t,!0)})))}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return"connected"!==e&&"connected"!==t}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof LP){const n=this.filterTobeUnmutedTracks(e[t]);if(0===n.length)continue;const r=this.createUnmuteMessage(n);return void await rx(this,dU.RequestUnmuteLocal,r)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter((e=>{let[,{ssrcs:t}]=e;return!!t})),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.recvConnection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(dU.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(dU.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Ex(Mx(this.dtlsFailedCount,Ux)),this.emit(dU.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(cU.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof IB))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof IB)).length>1)throw new TR(CR.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof LP)).length>1&&(e.some((e=>e instanceof LP&&e._bypassWebAudio))||!pO().webAudioMediaStreamDest))throw new TR(CR.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof IB&&this.pendingLocalTracks.some((e=>e instanceof IB)))throw new TR(CR.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof LP&&this.pendingLocalTracks.some((e=>e instanceof LP))&&(!pO().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof LP&&e._bypassWebAudio))))throw new TR(CR.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!CN("DISABLE_DUAL_STREAM_USE_ENCODING")&&pO().supportDualStreamEncoding,r=nq(nq({},{width:160,height:120,framerate:15,bitrate:50}),t);let i;i=n?e._mediaStreamTrack.clone():pj(e,r);const o=wx(8,"track-low-"),a=new IB(i,nq(nq({},n&&{scaleResolutionDownBy:ZU(r,e)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}),void 0,void 0,o);return a.on(UO.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,BO.LOW_STREAM)})),a._hints.push(PO.LOW_STREAM),e.addListener(kO.NEED_CLOSE,(()=>{a.close()})),a}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,n,r){var i;const o=Array.from(GN(i=this.remoteUserMap).call(i)).find((t=>t._videoSSRC===e));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const i=this.store.keyMetrics,a=i.subscribe.find((e=>e.userId===o.uid&&"video"===e.type));uO.firstRemoteVideoDecode(this.store.sessionId,sO.FIRST_VIDEO_DECODE,cO.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:kF.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:i.requestAPEnd||0,apStart:i.requestAPStart||0,joinGwEnd:i.joinGatewayEnd||0,joinGwStart:i.joinGatewayStart||0,pcEnd:i.peerConnectionEnd||0,pcStart:i.peerConnectionStart||0,subscriberEnd:(null==a?void 0:a.subscribeEnd)||0,subscriberStart:(null==a?void 0:a.subscribeStart)||0,videoAddNotify:(null==a?void 0:a.streamAdded)||0,state:r?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.recvConnection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const o=await this.recvConnection.getRemoteSSRC(i);return void 0!==o&&o!==n}isPreSubScribe(e){return!1}async publishDataChannel(e){throw new TR(CR.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new TR(CR.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new TR(CR.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new TR(CR.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new TR(CR.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new TR(CR.NOT_SUPPORTED)}async preConnect(e){throw new TR(CR.NOT_SUPPORTED)}getEstablishParams(){throw new TR(CR.NOT_SUPPORTED)}async reSubscribe(e){throw new TR(CR.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new TR(CR.NOT_SUPPORTED)}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===cU.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,BO.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}},vD(eq.prototype,"p2pConnect",[HW],Object.getOwnPropertyDescriptor(eq.prototype,"p2pConnect"),eq.prototype),vD(eq.prototype,"unpublish",[zW],Object.getOwnPropertyDescriptor(eq.prototype,"unpublish"),eq.prototype),vD(eq.prototype,"unpublishLowStream",[KW],Object.getOwnPropertyDescriptor(eq.prototype,"unpublishLowStream"),eq.prototype),vD(eq.prototype,"subscribe",[GW],Object.getOwnPropertyDescriptor(eq.prototype,"subscribe"),eq.prototype),vD(eq.prototype,"mockSubscribe",[WW],Object.getOwnPropertyDescriptor(eq.prototype,"mockSubscribe"),eq.prototype),vD(eq.prototype,"unsubscribe",[qW],Object.getOwnPropertyDescriptor(eq.prototype,"unsubscribe"),eq.prototype),vD(eq.prototype,"muteRemote",[YW],Object.getOwnPropertyDescriptor(eq.prototype,"muteRemote"),eq.prototype),vD(eq.prototype,"unmuteRemote",[XW],Object.getOwnPropertyDescriptor(eq.prototype,"unmuteRemote"),eq.prototype),vD(eq.prototype,"hasRemoteMediaWithLock",[JW],Object.getOwnPropertyDescriptor(eq.prototype,"hasRemoteMediaWithLock"),eq.prototype),vD(eq.prototype,"disconnectForReconnect",[ZW],Object.getOwnPropertyDescriptor(eq.prototype,"disconnectForReconnect"),eq.prototype),vD(eq.prototype,"remoteMediaSsrcChanged",[$W],Object.getOwnPropertyDescriptor(eq.prototype,"remoteMediaSsrcChanged"),eq.prototype),eq);function iq(e){return function(t,n,r){const i=t[n];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return r.value=async function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];switch(e){case VW.SEND_ONLY:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e()}}case VW.RECEIVE_ONLY:{const e=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e()}}default:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n)),t=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e(),t()}}}},r}}class oq extends QR{constructor(e,t){super(),uC(this,"signal",void 0),uC(this,"token",void 0),uC(this,"tokenTimeout",void 0),uC(this,"tokenInterval",void 0),uC(this,"_sequence",0),uC(this,"userMap",new Map),uC(this,"encoder",new TextEncoder),this.signal=e,this.token=t;const n=()=>{this.signal.connectionState===SD.CONNECTED&&this.check(),0===this.userMap.size?this.tokenInterval=window.setTimeout(n,1e3):this.tokenInterval=window.setTimeout(n,3*CN("P2P_TOKEN_INTERVAL"))};n()}async send(e,t,n,r,i){var o;if(0===this.userMap.size)return;const a=Array.from(uh(o=this.userMap).call(o))[0].token;"string"!=typeof t&&(t=JSON.stringify(t)),r=null!=r?r:wx(6,""),i=null!=i?i:this._sequence++;const s={_id:r,_type:e,_seq:i,_message:t,token:"".concat(this.token,"_").concat(a)};CN("SHOW_P2P_LOG")&&rO.debug("send message",s,"noNeedResponse : ".concat(n)),this.splitMessage(JSON.stringify(s)).forEach((e=>{this.signal.request(TD.DATA_STREAM,{payload:fx(this.encoder.encode(e))})}));const c=new nh(((t,i)=>{const o=window.setTimeout((()=>{this.off("res-@".concat(r,"_ack"),a),this.off("res-@".concat(r),l),this.off(bU.ABORT,c),rO.debug("[external-signal] request timeout, type: ".concat(e,", requestId: ").concat(r)),0===this.userMap.size?i(new TR(CR.INVALID_REMOTE_USER)):i(new TR(CR.TIMEOUT))}),CN("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),a=()=>{o&&window.clearTimeout(o),this.off(bU.ABORT,c),n&&t()},c=()=>{o&&window.clearTimeout(o),this.off("res-@".concat(r,"_ack"),a),this.off("res-@".concat(r),l),i(new TR(CR.EXTERNAL_SIGNAL_ABORT,"type: ".concat(e,", requestId: ").concat(r)))};this.once(bU.ABORT,c),this.once("res-@".concat(r,"_ack"),a);const l=(n,s)=>{d=!0,o&&window.clearTimeout(o),this.off("res-@".concat(r,"_ack"),a),this.off(bU.ABORT,c),"success"===n?t(s):i(new TR(CR.P2P_MESSAGE_FAILED,"request ".concat(e," failed, requestId: ").concat(r)))};let d=!1;n||(this.once("res-@".concat(r),l),Ex(CN("SIGNAL_REQUEST_TIMEOUT")).then((()=>{d||rO.warning("external_signal request timeout, type: ".concat(e,", requestId: ").concat(r,", ").concat(s))})))}));try{return await c}catch(o){if(o.code===CR.TIMEOUT)return await this.send(e,t,n,r,i);throw o}}onMessage(e){var t;const{_uid:n}=e;let r,i=this.userMap.get(n);if(i)r=i.splitMessageMap;else{if(this.userMap.size>0||!("_type"in e)||e._type!==yU.CHECK)return;const{token:t}=e;r=new Map,i={uid:n,isStart:!0,token:t,splitMessageMap:r,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(n,i),this.signal.emit(RD.ON_USER_ONLINE,{uid:n}),this.handleUserOnline()}if("id"in e&&"total"in e){var o;const{id:t,total:i}=e,a=null!==(o=r.get(t))&&void 0!==o?o:[];if(a.push(e),r.has(t)||r.set(t,a),a.length!==i)return;{const i=Yh(a).call(a,((e,t)=>e.index-t.index)).map((e=>e.payload)).join("");r.delete(t),(e=JSON.parse(i))._uid=n}}const{_type:a,token:s}=e;if(Br(t=[yU.ACK,yU.CHECK]).call(t,a))return a===yU.CHECK&&this.handleCheckToken(i,s),void this.receiveMessage(e);s==="".concat(i.token,"_").concat(this.token)?this.handleReceivedMessage(e):rO.debug('Receive unexpected message", '.concat(s,", cur_token: ").concat(i.token,"_").concat(this.token),e)}check(){const e={_id:wx(6,""),token:this.token,_type:yU.CHECK};CN("SHOW_P2P_LOG")&&rO.debug("send message",e),this.signal.request(TD.DATA_STREAM,{payload:fx(this.encoder.encode(JSON.stringify(e)))})}ack(e){const t={_id:e,_type:yU.ACK,token:this.token};CN("SHOW_P2P_LOG")&&rO.debug("send message",t),this.signal.request(TD.DATA_STREAM,{payload:fx(this.encoder.encode(JSON.stringify(t)))})}response(e,t,n){this.send(yU.RESPONSE,JSON.stringify({success:!n,message:t}),!0,e)}handleReceivedMessage(e){const t=()=>{this.userMap.forEach((e=>{const{receivedMessagesMap:t,nextExpectedSequenceNumber:n}=e;for(;t.has(n);){const r=t.get(n);t.delete(n),this.receiveMessage(r),e.nextExpectedSequenceNumber++}}))};if(!e)return void t();const{_uid:n,_seq:r}=e,i=this.userMap.get(n),{receivedMessagesMap:o,isStart:a,nextExpectedSequenceNumber:s}=i;if(r<s)return this.ack(e._id),void rO.debug("[external-signal] receive old message, seq: ".concat(r,", ").concat(e._message));o.set(r,e),a&&r===s&&(this.receiveMessage(e),o.delete(s),i.nextExpectedSequenceNumber++,t())}receiveMessage(e){const{_id:t,_type:n,_message:r,_uid:i}=e;if(CN("SHOW_P2P_LOG")&&rO.debug("receive message",e),t){let o;switch(e._type!==yU.ACK&&(r&&(o=JSON.parse(r)),this.ack(e._id)),e._type){case yU.CANDIDATE:case yU.CONTROL:this.signal.emit(n,o,i);break;case yU.PUBLISH:case yU.UNPUBLISH:case yU.RESTART_ICE:case yU.CALL:o.uid=i,nx(this.signal,n,o).then((t=>{this.response(e._id,t)})).catch((()=>{this.response(e._id,void 0,!0)}));break;case yU.ACK:this.getListeners("res-@".concat(t,"_ack")).length>0&&this.emit("res-@".concat(t,"_ack"));break;case yU.RESPONSE:{const{success:e,message:n}=o;this.emit("res-@".concat(t),e?"success":"failed",n);break}}}}splitMessage(e){if(e.length<oq.MAX_MESSAGE_SIZE)return[e];const t=[],{remoteToken:n}=JSON.parse(e),r=wx(6,"");let i=0,o=800;const a=Math.ceil(e.length/o);for(;e.length>0;){i++;const s={id:r,index:i,total:a,payload:e.slice(0,o),token:"".concat(this.token,"_").concat(n)};JSON.stringify(s).length>oq.MAX_MESSAGE_SIZE?o-=50:(t.push(s),e=e.slice(o))}return t.map((e=>JSON.stringify(e)))}handleCheckToken(e,t){return e.token!==t?(rO.debug("token changed, from ".concat(e.token," to ").concat(t)),this.reset(e.uid,t),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout((()=>{rO.debug("token timeout, ".concat(t)),this.reset(e.uid)}),CN("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const e=await nx(this.signal,yU.CALL,void 0),t=await this.send(yU.CALL,e);this.signal.emit(CD.P2P_CONNECTION,t,!0)}async reset(e,t){const n=this.userMap.get(e);n&&(this.emit(bU.ABORT),this.signal.emit(RD.ON_USER_OFFLINE,{uid:n.uid,reason:wU.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),t||(rO.debug("change local token from ".concat(t," to ").concat(t)),this.token=wx(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(bU.ABORT)}}uC(oq,"MAX_SIZE",1),uC(oq,"MAX_MESSAGE_SIZE",1024);class aq extends QR{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===SD.CONNECTED?this.emit(CD.WS_CONNECTED):e===SD.RECONNECTING?this.emit(CD.WS_RECONNECTING,this._websocketReconnectReason):e===SD.CLOSED&&this.emit(CD.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),uC(this,"_disconnectedReason",void 0),uC(this,"_websocketReconnectReason",void 0),uC(this,"_connectionState",SD.CLOSED),uC(this,"reconnectToken",void 0),uC(this,"p2pToken",void 0),uC(this,"websocket",void 0),uC(this,"openConnectionTime",void 0),uC(this,"clientId",void 0),uC(this,"lastMsgTime",Date.now()),uC(this,"uploadCache",[]),uC(this,"uploadCacheInterval",void 0),uC(this,"rttRolling",new Qx(5)),uC(this,"pingpongTimer",void 0),uC(this,"pingpongTimeoutCount",0),uC(this,"joinResponse",void 0),uC(this,"multiIpOption",void 0),uC(this,"initError",void 0),uC(this,"spec",void 0),uC(this,"store",void 0),uC(this,"_external_signal",void 0),uC(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(CD.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){switch(t._type){case RD.ON_DATA_STREAM:return void this.handleDataStream(t._message);case RD.MUTE_AUDIO:case RD.MUTE_VIDEO:case RD.ON_P2P_LOST:case RD.ON_USER_ONLINE:return;case RD.ON_USER_OFFLINE:const{uid:e}=t._message;return rO.debug("[".concat(this.clientId,"] user-offline uid: ").concat(e)),void this._external_signal.reset(e)}if(this.emit(t._type,t._message),t._type===RD.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===RD.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(qR.UID_BANNED);break;case 15:this.close(qR.IP_BANNED);break;case 16:this.close(qR.CHANNEL_BANNED)}if(t._type===RD.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case _D.ERR_LICENSE_MISSING:this.close(qR.LICENSE_MISSING);break;case _D.ERR_LICENSE_EXPIRED:this.close(qR.LICENSE_EXPIRED);break;case _D.ERR_LICENSE_MINUTES_EXCEEDED:this.close(qR.LICENSE_MINUTES_EXCEEDED);break;case _D.ERR_LICENSE_PERIOD_INVALID:this.close(qR.LICENSE_PERIOD_INVALID);break;case _D.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(qR.LICENSE_MULTIPLE_SDK_SERVICE);break;case _D.ERR_LICENSE_ILLEGAL:this.close(qR.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new MU("gateway-".concat(this.clientId),this.spec.retryConfig,!0,CN("JOIN_GATEWAY_USE_DUAL_DOMAIN"),CN("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===SD.CONNECTED&&this.reconnect("retry",$R.OFFLINE)})),this.p2pToken=wx(6,""),this._external_signal=new oq(this,this.p2pToken)}async request(e,t,n,r){const i=wx(6,""),o={_id:i,_type:e,_message:t},a=this.websocket.connectionID,s=()=>new nh(((e,t)=>{if(this.connectionState===SD.CONNECTED)return e();const n=()=>{this.off(CD.WS_CLOSED,r),e()},r=()=>{this.off(CD.WS_CONNECTED,n),t(new TR(CR.WS_ABORT))};this.once(CD.WS_CONNECTED,n),this.once(CD.WS_CLOSED,r)}));if(this.connectionState!==SD.CONNECTING&&this.connectionState!==SD.RECONNECTING||e===TD.JOIN||e===TD.REJOIN||await s(),this.websocket.sendMessage(o,!0),r)return;const c=new nh(((n,r)=>{let o=!1;const s=(r,i)=>{o=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(CD.WS_CLOSED,c),this.off(CD.WS_RECONNECTING,c),this.emit(CD.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),s);const c=()=>{r(new TR(CR.WS_ABORT,"type: ".concat(e))),this.off(CD.WS_CLOSED,c),this.off(CD.WS_RECONNECTING,c),this.off("res-@".concat(i),s)};this.once(CD.WS_CLOSED,c),this.once(CD.WS_RECONNECTING,c),Ex(CN("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==a||o||(rO.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(CD.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===SD.CLOSED||e===TD.LEAVE)throw new TR(CR.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===TD.JOIN||e===TD.REJOIN?null:(await s(),await this.request(e,t))}if(l.isSuccess)return l.message;const d=Number(l.message.error_code||l.message.code),u=TU(d),A=new TR(CR.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(l.message.error_str),{code:d,data:l.message,desc:u.desc});return"success"===u.action?l.message:(rO.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(d,", message: ").concat(u.desc,", action: ").concat(u.action)),d===_D.ERR_TOO_MANY_BROADCASTERS?e===TD.JOIN||e===TD.REJOIN?(this.initError=A,this.close(),A.throw()):A.throw():"failed"===u.action?A.throw():"quit"===u.action?(this.initError=A,this.close(),A.throw()):(d===_D.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,rO.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",$R.MULTI_IP)):this.reconnect(u.action,$R.SERVER_ERROR),e===TD.JOIN||e===TD.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new nh((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void rO.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(ID.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=CN("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==SD.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),CN("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}async sendExtensionMessage(e,t,n){return await this._external_signal.send(e,t,n)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new nh(((t,n)=>{this.once(CD.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(CD.WS_CLOSED,(()=>n(this.initError||new TR(CR.WS_ABORT)))),this.connectionState=SD.CONNECTING,this.websocket.init(e).catch(n)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||qR.LEAVE,this.connectionState=SD.CLOSED,rO.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),this.p2pToken=wx(6,""),this._external_signal.clear(),this._external_signal=new oq(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(CD.ABORT_P2P_EXECUTION);const e=await nx(this,CD.REQUEST_JOIN_INFO),t=await this.request(TD.JOIN,e);if(!t)return this.emit(CD.REPORT_JOIN_GATEWAY,CR.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(CD.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=SD.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;const n=px(e.payload),r=(new TextDecoder).decode(n),i=JSON.parse(r);"total"in i&&"id"in i||Br(t=Object.values(yU)).call(t,i._type)?(i._uid=e.uid,this._external_signal.onMessage(i)):this.emit(RD.ON_DATA_STREAM,e)}catch(t){this.emit(RD.ON_DATA_STREAM,e)}}handleNotification(e){rO.debug("[".concat(this.clientId,"] receive notification: "),e);const t=TU(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(qR.UID_BANNED),void this.close()):void this.reconnect(t.action,$R.SERVER_ERROR);rO.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=CN("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(rO.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>CN("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",$R.TIMEOUT):this.request(TD.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),CN("REPORT_STATS")&&this.send(TD.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWebsocketEvents(){this.websocket.on(ND.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(CD.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(ND.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ND.CLOSED,(()=>{this.connectionState=SD.CLOSED})),this.websocket.on(ND.FAILED,(()=>{this._disconnectedReason=qR.NETWORK_ERROR,this.connectionState=SD.CLOSED})),this.websocket.on(ND.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===SD.CONNECTED?this.connectionState=SD.RECONNECTING:this.connectionState=SD.CONNECTING})),this.websocket.on(ND.WILL_RECONNECT,((e,t,n)=>{"retry"!==e?(rO.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0):rO.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),n(e)})),this.websocket.on(ND.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.join().catch((e=>{if(this.emit(CD.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof TR&&e.code===CR.UNEXPECTED_RESPONSE&&e.data.code===_D.ERR_NO_AUTHORIZED)return rO.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",$R.SERVER_ERROR);rO.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",$R.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(ND.REQUEST_NEW_URLS,((e,t)=>{nx(this,CD.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(ND.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(RD.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}const sq={name:"P2PChannel",create:function(e){let{store:t,statsCollector:n}=e;return new rq(t,n)},createSubmodule:function(e){let{store:t,spec:n}=e;return new aq(n,t)}};function cq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cq(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class dq{constructor(e){uC(this,"sessionDesc",void 0),uC(this,"localCapabilities",void 0),uC(this,"rtpCapabilities",void 0),uC(this,"candidates",void 0),uC(this,"_originCandidates",void 0),uC(this,"iceParameters",void 0),uC(this,"dtlsParameters",void 0),uC(this,"setup",void 0),uC(this,"currentMidIndex",void 0),uC(this,"cname",void 0),e=dx(e);const{iceParameters:t,dtlsParameters:n,candidates:r,rtpCapabilities:i,setup:o,localCapabilities:a,sdkCodec:s,cname:c}=e,l=DN("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=i,this.candidates=r,this._originCandidates=dx(r),this.iceParameters=t,this.dtlsParameters=n,this.setup=o,this.localCapabilities=a,this.cname=c;for(let d=0;d<l.mediaDescriptions.length;d++){const e=l.mediaDescriptions[d];if(e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=n.fingerprints,e.attributes.candidates=r,e.attributes.setup=o,"video"===e.media.mediaType){e.media.fmts=i.videoCodecs.map((e=>e.payloadType.toString(10)));let t=i.videoCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Br(n=t.encodingName.toLowerCase()).call(n,s)}));0===t.length&&(t=i.videoCodecs),e.attributes.payloads=t,e.attributes.extmaps=i.videoExtensions}"audio"===e.media.mediaType&&(e.media.fmts=i.audioCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=i.audioCodecs,e.attributes.extmaps=i.audioExtensions),l.mediaDescriptions[d]=this.mungMediaDesc(e)}this.sessionDesc=l,this.currentMidIndex=l.mediaDescriptions.length-1}toString(){return UN(this.sessionDesc)}send(e,t,n){const{ssrcs:r,ssrcGroups:i}=hM(t,this.cname),o=this.sessionDesc.mediaDescriptions.find((t=>e===iU.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType)),a=r[0].attributes.label,s=r[0].attributes.mslabel;return o.attributes.ssrcs=o.attributes.ssrcs.concat(r),o.attributes.ssrcGroups=o.attributes.ssrcGroups.concat(i),{id:a,mslabel:s}}batchSend(e){return e.map((e=>{let{kind:t,ssrcMsg:n}=e;return this.send(t,n,void 0)}))}stopSending(e){this.sessionDesc.mediaDescriptions.forEach((t=>{const n=[],r=[],i=[];t.attributes.ssrcs.forEach((t=>{Br(e).call(e,t.attributes.label||"")?i.push(t):n.push(t)})),t.attributes.ssrcGroups.forEach((e=>{var t;Br(t=i.map((e=>e.ssrcId))).call(t,e.ssrcIds[0])||r.push(e)})),t.attributes.ssrcs=n,t.attributes.ssrcGroups=r}))}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}receive(e,t,n){e.forEach(((e,t)=>{const n=e._mediaStreamTrack,r=this.sessionDesc.mediaDescriptions.findIndex((e=>e.attributes.mid===n.kind)),i=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],e);this.sessionDesc.mediaDescriptions[r]=i}))}stopReceiving(e){}updateCandidates(e){const t=this._originCandidates.filter((e=>"udp"===e.transport)),n=[];if(t.forEach((e=>{n.push(lq(lq({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})),0!==t.length){switch(e){case oU.TCP_RELAY:this.candidates=n;break;case oU.UDP_TCP_RELAY:case oU.RELAY:this.candidates=[...t,...n];break;default:this.candidates=t}for(const e of this.sessionDesc.mediaDescriptions)e.attributes.candidates=this.candidates}}restartICE(e){e=dx(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}mungRecvMediaDsec(e,t){const n=dx(e);return pM(n,t),mM(n,t),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,n){const r=this.sessionDesc.mediaDescriptions.find((t=>e===iU.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid));if(r){const e=r.attributes.ssrcs.find((e=>e.attributes.label===t));var i;e&&(e.attributes.label=n,null===(i=e.attributes.msid)||void 0===i||i.replace(t,n))}}mungMediaDesc(e){const t=dx(e);return fM(t),function(e){const t=e.attributes.extmaps.find((e=>oM(e.extensionName)));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t}getSSRC(e){for(const t of this.sessionDesc.mediaDescriptions)for(const n of t.attributes.ssrcs)if(n.attributes.label===e)return[n]}}var uq;function Aq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aq(Object(n),!0).forEach((function(t){uC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let pq=(uq=class e extends rU{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Br(t=Object.keys(xN)).call(t,e)})))]}constructor(t,n){super(t,n),uC(this,"store",void 0),uC(this,"peerConnection",void 0),uC(this,"remoteSDP",void 0),uC(this,"initialOffer",void 0),uC(this,"statsFilter",void 0),uC(this,"useRTX",!1),uC(this,"localCapabilities",void 0),uC(this,"localCandidateCount",0),uC(this,"allCandidatesReceived",!1),uC(this,"establishPromise",void 0),uC(this,"mutex",void 0),this.store=n,this.mutex=new Lx("P2PConnection-mutex",n.clientId),this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=AN(this.peerConnection,CN("STATS_UPDATE_INTERVAL"),void 0,tR()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=lM(e.sdp),n=cM(e.sdp,{filterRTX:!this.useRTX,filterVideoFec:CN("FILTER_VIDEO_FEC"),filterAudioFec:CN("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=n,this.initialOffer=e,hq(hq({},t),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:n},offerSDP:e.sdp})}catch(e){throw new TR(CR.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async updateRemoteConnect(){}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new dq(hq(hq({},e),{},{rtpCapabilities:e.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));const t=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:t})}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){throw new TR(CR.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}getPreMedia(e){}send(e,t){var n=this;return qT((function*(){const r=yield XT(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const r=e.map((e=>n.peerConnection.addTrack(e._mediaStreamTrack))),i=yield XT(n.peerConnection.createOffer()),o=DN(i.sdp),a=e.map((e=>{const t=e._mediaStreamTrack,r=o.mediaDescriptions.find((e=>e.attributes.mid===t.kind));if(!r)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,n){const r=e.attributes.ssrcs.filter((e=>e.attributes.label===t)),i=e.attributes.ssrcGroups;if(0===r.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(i&&r.length>1){const e=i.find((e=>-1!==e.ssrcIds.indexOf(r[0].ssrcId)));return e?[{ssrcId:e.ssrcIds[0],rtx:n?e.ssrcIds[1]:void 0}]:[{ssrcId:r[0].ssrcId}]}return[{ssrcId:r[0].ssrcId}]}(r,t.id,n.useRTX)}));let s;try{s=yield a}catch(e){throw r.forEach((e=>{$I()&&e.replaceTrack(null),n.peerConnection.removeTrack(e)})),e}const c=n.mungSendOfferSDP(i.sdp,e);n.remoteSDP.receive(e,t,s);const l=n.remoteSDP.toString();return yield XT(n.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield XT(n.applySendEncodings(r,e)),yield XT(n.peerConnection.setRemoteDescription({type:"answer",sdp:l})),e.map(((e,t)=>{const n=e._mediaStreamTrack.id;return{localSSRC:a[t],id:n}}))}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async stopSending(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{$I()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{id:n,mslabel:i}=this.remoteSDP.send(e,t,r),o=new nh(((t,r)=>{const o=setTimeout((()=>{r(new Error("Cannot receive track, id: ".concat(n)))}),1e4),a=r=>{const s=WI();if(("Safari"===s.name&&11===Number(s.version)||nR())&&r.track.id!==n&&r.streams[0].id===i){var c;const i=r.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,n,r.track.id),this.peerConnection.removeEventListener("track",a),clearTimeout(o),void t(i)}if(r.track.id===n)return this.peerConnection.removeEventListener("track",a),clearTimeout(o),void t(r.track)};this.peerConnection.addEventListener("track",a)})),a=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:a});const s=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(s),{track:await o,id:n}}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("sender' length doesn't match mids' length.");t.map((e=>{if($I()&&e.track)e.track.enabled=!1;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!1)),e.setParameters(t)}}))}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Senders' length doesn't match mids' length.");t.map((async e=>{if($I()&&e.track)e.track.enabled=!0;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!0)),await e.setParameters(t)}}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return qT((function*(){const n=yield XT(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");const n=pO().supportPCSetConfiguration;if(e===oU.RELAY&&!n)return;if(n){const n=t.peerConnection.getConfiguration(),r=e===oU.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(rO.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}e!==oU.RELAY&&t.remoteSDP.updateCandidates(e);const r=yield XT(t.peerConnection.createOffer({iceRestart:!0}));if(!r.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const i=lM(r.sdp),{remoteIceParameters:o}=yield i.iceParameters;t.remoteSDP.restartICE(o);const a=t.remoteSDP.toString();yield XT(t.peerConnection.setLocalDescription(r)),yield XT(t.peerConnection.setRemoteDescription({type:"answer",sdp:a}))}catch(e){rO.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const e=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const r=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getSenders().filter((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e}));1===n.length&&await this.applySendEncodings(n,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getSenders().find((e=>{var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t}));n&&await n.replaceTrack(e._mediaStreamTrack)}createDataChannels(e,t){throw new TR(CR.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(e){throw new TR(CR.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,rO.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,rO.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),CN("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const n={iceServers:[],sdpSemantics:"plan-b"};return t.iceServers?n.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(YR(t.turnServer.servers)?n.iceServers=t.turnServer.servers:(n.iceServers&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),CN("USE_TURN_SERVER_OF_GATEWAY")&&n.iceServers&&t.turnServer.serversFromGateway&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(n.iceTransportPolicy="relay")})))),n}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e._mediaStreamTrack.id}))),!t)return rO.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(!pO().supportSetRtpSenderParameters)return rO.warn("Browser not support set rtp-sender parameters");const r={},i={};if(e instanceof IB)switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(CN("DSCP_TYPE")&&yR()){var o;const e=CN("DSCP_TYPE");Br(o=["very-low","low","medium","high"]).call(o,e)&&(i.networkPriority=e)}const a=t.getParameters(),s=null===(n=a.encodings)||void 0===n?void 0:n[0];s&&Object.assign(s,i),Object.assign(a,r),rO.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!pO().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];r&&i&&await this.updateRtpSenderEncodings(i,r)}}catch(e){rO.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t){const n=DN(e);return t.forEach(((e,t)=>{const r=e._mediaStreamTrack,i=n.mediaDescriptions.find((e=>e.attributes.mid===r.kind));i&&pM(i,e)})),UN(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const t=this.remoteSDP.batchSend(e).map(((t,n)=>{let{id:r,mslabel:i}=t;const{kind:o}=e[n];return new nh(((e,t)=>{const n=setTimeout((()=>{t(new Error("Cannot receive track, id: ".concat(r)))}),1e4),a=t=>{const s=WI();if("Safari"===s.name&&11===Number(s.version)&&t.track.id!==r&&t.streams[0].id===i){var c;const i=t.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(o,r,t.track.id),this.peerConnection.removeEventListener("track",a),clearTimeout(n),void e({track:i,id:r})}if(t.track.id===r)return this.peerConnection.removeEventListener("track",a),clearTimeout(n),void e({track:t.track,id:r})};this.peerConnection.addEventListener("track",a)}))})),n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const r=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(r),await nh.all(t)}catch(e){throw new TR(CR.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(t){if(pO().supportPCSetConfiguration){const n=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(n)}}},vD(uq.prototype,"connect",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"connect"),uq.prototype),vD(uq.prototype,"stopSending",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"stopSending"),uq.prototype),vD(uq.prototype,"receive",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"receive"),uq.prototype),vD(uq.prototype,"stopReceiving",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"stopReceiving"),uq.prototype),vD(uq.prototype,"muteRemote",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"muteRemote"),uq.prototype),vD(uq.prototype,"unmuteRemote",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"unmuteRemote"),uq.prototype),vD(uq.prototype,"muteLocal",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"muteLocal"),uq.prototype),vD(uq.prototype,"unmuteLocal",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"unmuteLocal"),uq.prototype),vD(uq.prototype,"close",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"close"),uq.prototype),vD(uq.prototype,"updateEncoderConfig",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"updateEncoderConfig"),uq.prototype),vD(uq.prototype,"updateSendParameters",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"updateSendParameters"),uq.prototype),vD(uq.prototype,"replaceTrack",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"replaceTrack"),uq.prototype),vD(uq.prototype,"getRemoteSSRC",[fq],Object.getOwnPropertyDescriptor(uq.prototype,"getRemoteSSRC"),uq.prototype),uq);function fq(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("Locking from P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return await r.apply(this,o)}finally{n()}},n}const mq={name:"PlanBConnection",create:function(e){let{store:t,spec:n}=e;return new pq(n,t)}},gq={interceptLocalAudioFrame:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!pO().supportWebRTCEncodedTransform)return void rO.warning("browser not support audio encoded transform");if(rL.has(e))return;if(!e.track)return;const n={track:e.track};if(ZI()){if(!e.createEncodedStreams)return void rO.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(e){return void rO.error("create audio-encoded-streams error",e&&e.message)}const o=new TransformStream({transform(i,o){n.controller||(n.controller=o),e.track&&e.track.id!==n.track.id&&(rO.debug("audio track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const a=t.metadata&&t.metadata();a?function(e,t){const{chunk:n,controller:r}=t,i=CN("ENABLE_AUDIO_PTS_METADATA")?tL.AUDIO_64_BIT_PTS:tL.METADATA;n.data=function(e,t,n){const r=n.byteLength,i=r+$B+eL,o=JB+ZB+i,a=new ArrayBuffer(e.byteLength+o),s=new DataView(a);s.setUint8(0,XB),s.setUint16(1,i),s.setUint8(3,t),s.setUint16(4,r);for(let l=0;l<r;l++)s.setUint8(6+l,n[l]);const c=new Uint8Array(s.buffer);return c.set(new Uint8Array(e),o),c.buffer}(n.data,i,e),r.enqueue(n)}(a,{sender:e,chunk:i,controller:o}):o.enqueue(i)}});i.readable.pipeThrough(o).pipeTo(i.writable)}else if($I()){if("undefined"==typeof RTCRtpScriptTransform)return void rO.warning("browser not support RTCRtpScriptTransform");const i=YB(),o=new MessageChannel;await new nh((e=>i.onmessage=t=>{"registered"===t.data&&e(void 0)}));const a=new RTCRtpScriptTransform(i,{name:"audio-metadata-tx",port:o.port2},[o.port2]);e.transform=a,await new nh((e=>i.onmessage=t=>{"started"===t.data&&e(void 0)})),o.port1.onmessage=i=>{var a;if(i.data.transformed&&e.track&&(null===(a=e.track)||void 0===a?void 0:a.id)!==n.track.id)rO.debug("audio track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r);else if(i.data.getMetadata){const e=t.metadata&&t.metadata();e&&o.port1.postMessage({metadata:e})}},n.worker=i}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}const t=rL.get(e);if(t){rL.delete(e);try{var n,i;null===(n=t.controller)||void 0===n||n.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){rO.warning(e&&e.message)}}}rL.set(e,n),e.track.addEventListener("ended",r)},interceptRemoteAudioFrame:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!pO().supportWebRTCEncodedTransform)return void rO.warning("browser not support audio encoded transform");if(CL.has(e))return;const n={track:e.track,onMetadata:t.onMetadata};if(ZI()){if(!e.createEncodedStreams)return void rO.warning("browser not support createEncodedStreams() API");oR(HI.CHROME,87,116)||(t.enableTopn=!1);let i=null;try{i=e.createEncodedStreams()}catch(e){return void rO.error("create audio-encoded-streams error",e&&e.message)}const o=new TransformStream({transform(i,o){n.controller||(n.controller=o),e.track&&e.track.id!==n.track.id&&(rO.debug("audio track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r)),t.enableTopn?function(e,t,n){var r;const i=nL(new DataView(t.data));if(!i)return n.enqueue(t);const o=e.track.id;TL.set(o,e.track);const a=null===(r=i.tlv.find((e=>e.tag===tL.AUDIO_LEVEL)))||void 0===r?void 0:r.value;let s=0;"number"==typeof a&&(s=127-a);const c=Math.round(Math.pow(10,s/60)-1),{selected:l,speaker:d}=function(e,t){let n=fL.get(e);if(n||(n=function(e){const t=new uL;return fL.set(e,t),mL||(mL=new pL(CN("TOPN_SILENCE_THRESHOLD")||500),mL.on("ActiveSpeakerChanged",(e=>{null!=e&&(gL=e)}))),mL.addSpeakers([t]),t}(e)),fL.size<=vL)return{selected:!0,speaker:n};if(!mL)throw new Error("no active speaker detector");return mL.levelChanged(n.id,t),yL=mL.loudest.map((e=>e.id)),gL&&!Br(yL).call(yL,gL)&&yL.length>=vL&&yL.pop(),{selected:Br(yL).call(yL,n.id)||n.id===gL,speaker:n}}(e,c),u=function(e,t,n){const r=bL.get(e)||new wL(e,t);return r.score=n,bL.set(e,r),function(e){if(EL.set(e,!0),!_L)return void(_L=Date.now());const t=Date.now();t-_L>1e3&&(EL.get(e)?EL.set(e,!1):(SL(e),EL.delete(e)),_L=t)}(e),r}(o,e.track,d.energyScore);u.addSample(l),u.active&&(t.data=i.frame.buffer,n.enqueue(t))}(e,i,o):t.enableMetadata?function(e,t,n){const r=nL(new DataView(e.data));if(!r)return t.enqueue(e);const i=r.tlv.find((e=>e.tag===tL.METADATA||e.tag===tL.AUDIO_64_BIT_PTS));i&&n&&i.value instanceof Uint8Array&&n(i.value),e.data=r.frame.buffer,t.enqueue(e)}(i,o,t.onMetadata):o.enqueue(i)}});i.readable.pipeThrough(o).pipeTo(i.writable)}else if($I()){if("undefined"==typeof RTCRtpScriptTransform)return void rO.warning("browser not support RTCRtpScriptTransform");const t=YB(),i=new MessageChannel;await new nh((e=>t.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(t,{name:"audio-metadata-rx",port:i.port2},[i.port2]);e.transform=o,await new nh((e=>t.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id?(rO.debug("audio track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r)):t.data.metadata&&n.onMetadata&&n.onMetadata(t.data.metadata)},n.worker=t}function r(){e.track.removeEventListener("ended",r),function(e){const t=CL.get(e);if(t){!function(e){const t=fL.get(e);t&&(fL.delete(e),mL&&(mL.removeSpeakers([t]),0===fL.size&&(mL.destroy(),mL=null)))}(e),SL(e.track.id),CL.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){rO.warning(e&&e.message)}}}(e)}CL.set(e,n),e.track.addEventListener("ended",r)},interceptLocalVideoFrame:async function(e,t){if(!pO().supportWebRTCEncodedTransform)return void rO.warning("browser not support video encoded transform");if(RL.has(e))return;if(!e.track)return;const n={track:e.track};if(ZI()){if(!e.createEncodedStreams)return void rO.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(e){return void rO.error("create video-encoded-streams error",e&&e.message)}const o=[];t.on("sei-to-send",(e=>{o.push(e)}));const a=new TransformStream({transform(t,i){n.controller||(n.controller=i),e.track&&e.track.id!==n.track.id&&(rO.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const a=o.shift();a&&(t.data=function(e,t){const n=function(e){const t=e.length;let n=[],r=0;for(;r<t;)r+2<t&&0===e[r]&&0===e[r+1]&&(0===e[r+2]||1===e[r+2]||2===e[r+2]||3===e[r+2])?(n.push(e[r],e[r+1],3,e[r+2]),r+=3):(n.push(e[r]),r++);return new Uint8Array(n)}(t),r=n.length,i=Math.floor(r/255),o=r%255,a=new Uint8Array(6+i+1+r+e.byteLength);a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=6,a[5]=101;let s=0;for(;s<i;)a[6+s]=255,s++;return a[6+s]=o,s++,a.set(n,6+s),a.set(new Uint8Array(e),6+s+r),a.buffer}(t.data,a)),i.enqueue(t)}});i.readable.pipeThrough(a).pipeTo(i.writable)}else{if(!$I())return;{if("undefined"==typeof RTCRtpScriptTransform)return void rO.warning("browser not support RTCRtpScriptTransform");const i=YB(),o=new MessageChannel;await new nh((e=>i.onmessage=t=>{"registered"===t.data&&e(void 0)}));const a=new RTCRtpScriptTransform(i,{name:"sei-tx",port:o.port2},[o.port2]);e.transform=a,await new nh((e=>i.onmessage=t=>{"started"===t.data&&e(void 0)})),t.on("sei-to-send",(e=>{o.port1.postMessage({sei:e})})),o.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id&&(rO.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r))},n.worker=i}}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}const t=RL.get(e);if(t){RL.delete(e);try{var n,i;null===(n=t.controller)||void 0===n||n.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){rO.warning(e&&e.message)}}}RL.set(e,n),e.track.addEventListener("ended",r)},interceptRemoteVideoFrame:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!pO().supportWebRTCEncodedTransform)return void rO.warning("browser not support video encoded transform");if(!e.track)return;if(xL.has(e)){const n=xL.get(e);return void(n&&(n.onSei=t.onSei))}const n={track:e.track,onSei:t.onSei};if(ZI()){if(!e.createEncodedStreams)return void rO.warning("browser not support createEncodedStreams() API");let t=null;try{t=e.createEncodedStreams()}catch(e){return void rO.error("create video-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(t,i){n.controller||(n.controller=i),e.track&&e.track.id!==n.track.id&&(rO.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const o=function(e){const t=new DataView(e.data);let n=0;for(;n+4<e.data.byteLength;){if(0===t.getUint8(n+0)&&0===t.getUint8(n+1)&&0===t.getUint8(n+2)&&1===t.getUint8(n+3)&&6===t.getUint8(n+4)){let r=n+6,i=0,o=0;for(;255===(o=t.getUint8(r++));)i+=255;i+=o;const a=IL(e.data,r,i);return new Uint8Array(a)}n++}return null}(t);o&&n.onSei&&n.onSei(o),i.enqueue(t)}});t.readable.pipeThrough(i).pipeTo(t.writable)}else if($I()){if("undefined"==typeof RTCRtpScriptTransform)return void rO.warning("browser not support RTCRtpScriptTransform");const t=YB(),i=new MessageChannel;await new nh((e=>t.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(t,{name:"sei-rx",port:i.port2},[i.port2]);e.transform=o,await new nh((e=>t.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id?(rO.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r)):t.data.sei&&n.onSei&&n.onSei(t.data.sei)},n.worker=t}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}!function(e){const t=xL.get(e);if(t){xL.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){rO.warning(e&&e.message)}}}(e)}xL.set(e,n),e.track.addEventListener("ended",r)}},vq={name:"InterceptFrame",create:()=>gq};pN(),SN("PROCESS_ID","process-".concat(wx(8,""),"-").concat(wx(4,""),"-").concat(wx(4,""),"-").concat(wx(4,""),"-").concat(wx(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void rO.error("Error loading sdk config",e.message)}if(e)try{const t=JSON.parse(window.atob(e)),n=Date.now();rO.debug("Loading global parameters from cache",t),Object.keys(t).forEach((e=>{if(Object.prototype.hasOwnProperty.call(_N,e)){const{value:r,expires:i}=t[e];if(i&&i<=n)return;IN[e]=r,_N[e]=r}}))}catch(t){rO.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(IN.AREAS)&&IN.AREAS.length>0&&tF(IN.AREAS,!0);const yq=(e,t,n)=>{rO.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),SN(e,t,n)};DM(UG,!1),DM(zG,!1),DM(eV,!1),DM(EW,!1),DM(BG,!1),DM(sq,!1),DM(mq,!1),DM(vq,!1);const bq=function(e){const t=new QR,n=e,r={getListeners:t.getListeners.bind(t),on:(e,n)=>(function(e,t){e===fU.SECURITY_POLICY_VIOLATION&&eH(t,!0)}(e,n),t.on.bind(t)(e,n)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return ZV(ZV({},n),r)}({__TRACK_LIST__:NO,VERSION:fN,BUILD:EN,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:yq,getParameter:CN,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;const n=await async function(e){let t;return pO().supportUnifiedPlan?(e.addTransceiver("video",{direction:"recvonly"}),e.addTransceiver("audio",{direction:"recvonly"}),t=(await e.createOffer()).sdp):t=(await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,t}(t);if(!n)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ H265/i)&&t.video.push("H265"),e.match(/ opus/i)&&t.audio.push("OPUS"),e.match(/ PCMU/i)&&t.audio.push("PCMU"),e.match(/ PCMA/i)&&t.audio.push("PCMA"),e.match(/ G722/i)&&t.audio.push("G722"),t}(n)}catch(e){throw new AO(CR.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return e},checkSystemRequirements:function(){const e=uO.reportApiInvoke(null,{name:zR.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:KR.TRACER});let t=!1;try{const e=window.RTCPeerConnection,n=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket;t=!!(e&&n&&r),t&&vR()&&iR(75)&&(new e).close()}catch(e){return rO.error("check system requirement failed: ",e),!1}let n=!1;const r=WI();r.name===HI.CHROME&&Number(r.version)>=58&&("WebKit"!==KI.engine.name||function(){const e=WI();if(JI()){if(e.os===VI.MAC_OS)return!0;if(e.os===VI.IOS){const e=KI.os.version&&KI.os.version.split(".");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}())&&(n=!0),(r.name===HI.FIREFOX&&Number(r.version)>=56||r.name===HI.OPERA&&Number(r.version)>=45||r.name===HI.SAFARI&&Number(r.version)>=11||"WebKit"===r.name&&(nR()||fR())&&r.osVersion&&Number(r.osVersion.split(".")[0])>=11||mR()||WI().name===HI.QQ)&&(n=!0),rO.debug("checkSystemRequirements, api:",t,"browser",n);const i=t&&n;return e.onSuccess(i),i},getDevices:function(e){return Ik.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return Ik.getRecordingDevices(e)},getCameras:function(e){return Ik.getCamerasDevices(e)},getElectronScreenSources:yk,getPlaybackDevices:function(e){return Ik.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const n=wx(5,"client-"),r=uO.reportApiInvoke(null,{id:n,name:zR.CREATE_CLIENT,options:[t],tag:KR.TRACER});try{!function(e){RR(e.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),RR(e.mode,"config.mode",["rtc","live","p2p"]),void 0!==e.audioCodec&&RR(e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==e.proxyServer&&OR(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&XR(e.turnServer),void 0!==e.httpRetryConfig&&GR(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&GR(e.websocketRetryConfig)}(t)}catch(e){throw r.onError(e),e}return(cR(16,0,!0)||lR(16,0,!0))&&("vp9"===t.codec&&(t.codec="vp8",rO.debug("browser not support vp9, force use vp8")),SN("UNSUPPORTED_VIDEO_CODEC",["vp9"])),void 0===t.audioCodec&&(t.audioCodec="opus"),r.onSuccess(),new KV(zV(zV({forceWaitGatewayResponse:!0},t),{},{role:Br(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}),n)},createCameraVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=CN("CAMERA_CAPTURE_CONFIG"),n=wx(8,"track-cam-"),r=uO.reportApiInvoke(null,{id:n,tag:KR.TRACER,name:zR.CREATE_CAM_VIDEO_TRACK,options:[ik({},e),t]});t&&(e.encoderConfig=t);const i=Vk(e);let o=null;rO.info("start create camera video track with config",JSON.stringify(e),"trackId",n);try{o=(await _k({video:i},n)).getVideoTracks()[0]||null}catch(e){throw r.onError(e),e}if(!o){const e=new TR(CR.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(e),e.throw(rO)}if(e.optimizationMode&&xB(n,o,e,CO(e.encoderConfig)),CN("USE_STANDARD_BITRATE_DEFAULT")){const t=CO(e.encoderConfig);e.encoderConfig=t,delete t.bitrateMax,delete t.bitrateMin}const a=new RB(o,e,i,e.scalabiltyMode?IO(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,n);return r.onSuccess(a.getTrackId()),rO.info("create camera video success, trackId:",n),a},createCustomVideoTrack:function(e){const t=wx(8,"track-cus-"),n=uO.reportApiInvoke(null,{id:t,tag:KR.TRACER,name:zR.CREATE_CUSTOM_VIDEO_TRACK,options:[e]});CN("USE_STANDARD_BITRATE_DEFAULT")&&(delete e.bitrateMax,delete e.bitrateMin);const r=new IB(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?IO(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,t,[PO.CUSTOM_TRACK]);return n.onSuccess(r.getTrackId()),rO.info("create custom video track success with config",e,"trackId",r.getTrackId()),r},createScreenVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const n="object"==typeof t?function(e){return Hk(e)}(t):void 0;n&&(t="auto");const r=wx(8,"track-scr-v-"),i=uO.reportApiInvoke(null,{id:r,tag:KR.TRACER,name:zR.CREATE_SCREEN_VIDEO_TRACK,options:[ik({},e),t]});e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const o=function(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&ZI()&&(t.extensionId=e.extensionId);const{displaySurface:n,selfBrowserSurface:r,surfaceSwitching:i,systemAudio:o,preferCurrentTab:a}=e;(rR(107)||aR(107)||dR(93))&&(n&&(RR(n,"displaySurface",["browser","window","monitor"]),t.displaySurface=n),r?(RR(r,"selfBrowserSurface",["exclude","include"]),t.selfBrowserSurface=r):t.selfBrowserSurface="include",i&&(RR(i,"surfaceSwitching",["exclude","include"]),t.surfaceSwitching=i)),(rR(105)||aR(105)||dR(91))&&o&&(RR(o,"systemAudio",["exclude","include"]),t.systemAudio=o),(rR(94)||aR(94)||dR(80))&&a&&(t.preferCurrentTab=!0),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const s=e.encoderConfig?TO(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:s?s.width:void 0,maxHeight:s?s.height:void 0},s&&(s.frameRate&&("number"==typeof s.frameRate?(t.mandatory.maxFrameRate=s.frameRate,t.mandatory.minFrameRate=s.frameRate):(t.mandatory.maxFrameRate=s.frameRate.max||s.frameRate.ideal||s.frameRate.exact||void 0,t.mandatory.minFrameRate=s.frameRate.min||s.frameRate.ideal||s.frameRate.exact||void 0),t.frameRate=s.frameRate),s.width&&(t.width=s.width),s.height&&(t.height=s.height)),t}(e);let a=null,s=null;const c=pO();if(!c.supportShareAudio&&"enable"===t){const e=new TR(CR.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return i.onError(e),e.throw(rO)}rO.info("start create screen video track with config",e,"withAudio",t,"trackId",r);const l=c.supportShareAudio&&"disable"!==t;try{const e=await _k({screen:o,screenAudio:l?n||!0:void 0},r);a=e.getVideoTracks()[0]||null,s=e.getAudioTracks()[0]||null}catch(e){throw i.onError(e),e}if(!a){const e=new TR(CR.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(e),e.throw(rO)}if(!s&&"enable"===t){a&&a.stop();const e=new TR(CR.SHARE_AUDIO_NOT_ALLOWED);return i.onError(e),e.throw(rO)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(xB(r,a,e,e.encoderConfig&&TO(e.encoderConfig)||void 0),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const d=new IB(a,e.encoderConfig?TO(e.encoderConfig):{},e.scalabiltyMode?IO(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r,[PO.SCREEN_TRACK]);if(!s)return i.onSuccess(d.getTrackId()),rO.info("create screen video track success","video:",d.getTrackId()),d;const u=new LP(s,void 0,wx(8,"track-scr-a-"),!1);return i.onSuccess([d.getTrackId(),u.getTrackId()]),rO.info("create screen video track success","video:",d.getTrackId(),"audio:",u.getTrackId()),[d,u]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=CN("CAMERA_CAPTURE_CONFIG"),r=wx(8,"track-mic-"),i=wx(8,"track-cam-"),o=uO.reportApiInvoke(null,{id:"".concat(r,"-").concat(i),tag:KR.TRACER,name:zR.CREATE_MIC_AND_CAM_TRACKS,options:[e,t,n]});n&&(t.encoderConfig=n);const a=Vk(t),s=zk(e);let c=null,l=null;rO.info("start create camera video track(".concat(i,") and microphone audio track(").concat(r,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{const e=await _k({audio:s,video:a},"".concat(r,"-").concat(i));c=e.getAudioTracks()[0],l=e.getVideoTracks()[0]}catch(e){throw o.onError(e),e}if(!c||!l){const e=new TR(CR.UNEXPECTED_ERROR,"can not find tracks in media stream");return o.onError(e),e.throw(rO)}if(t.optimizationMode&&xB(i,l,t,CO(t.encoderConfig)),CN("USE_STANDARD_BITRATE_DEFAULT")){const e=CO(t.encoderConfig);t.encoderConfig=e,delete e.bitrateMax,delete e.bitrateMin}const d=new DP(c,e,s,r),u=new RB(l,t,a,t.scalabiltyMode?IO(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,i);return o.onSuccess([d.getTrackId(),u.getTrackId()]),rO.info("create camera video track(".concat(i,") and microphone audio track(").concat(r,") success")),[d,u]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=wx(8,"track-mic-"),n=uO.reportApiInvoke(null,{id:t,tag:KR.TRACER,name:zR.CREATE_MIC_AUDIO_TRACK,options:[e]}),r=zk(e);let i=null;rO.info("start create microphone audio track with config",JSON.stringify(e),"trackId",t);try{i=(await _k({audio:r},t)).getAudioTracks()[0]||null}catch(e){throw n.onError(e),e}if(!i){const e=new TR(CR.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(e),e.throw(rO)}const o=new DP(i,e,r,t);return n.onSuccess(o.getTrackId()),rO.info("create microphone audio track success, trackId:",t),o},createCustomAudioTrack:function(e){const t=wx(8,"track-cus-"),n=uO.reportApiInvoke(null,{id:t,tag:KR.TRACER,name:zR.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),r=new LP(e.mediaStreamTrack,e.encoderConfig?xO(e.encoderConfig):{},t,!1);return rO.info("create custom audio track success with config",e,"trackId",r.getTrackId()),n.onSuccess(r.getTrackId()),r},createBufferSourceAudioTrack:async function(e){var t;const{cacheOnlineFile:n,encoderConfig:r}=e;let{source:i}=e;const o={source:i instanceof AudioBuffer?"AudioBuffer":i instanceof File?null!==(t=File.name)&&void 0!==t?t:"File":i,cacheOnlineFile:n,encoderConfig:r},a=wx(8,"track-buf-"),s=uO.reportApiInvoke(null,{id:a,tag:KR.TRACER,name:zR.CREATE_BUFFER_AUDIO_TRACK,options:[o]});if(CN("DISABLE_WEBAUDIO"))throw new TR(CR.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");rO.info("start create buffer source audio track with config",JSON.stringify(o),"trackId",a);const c=i;if(!(i instanceof AudioBuffer))try{i=await async function(e,t){let n=null;if("string"==typeof e){const t=jP.get(e);if(t)return rO.debug("use cached audio resource: ",e),t;try{n=(await Fx((()=>DI.get(e,{responseType:"arraybuffer"})),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new TR(CR.FETCH_AUDIO_FILE_FAILED,e.toString())}}else{const t=new nh(((t,n)=>{const r=new FileReader;r.onload=e=>{e.target?t(e.target.result):n(new TR(CR.READ_LOCAL_AUDIO_FILE_ERROR))},r.onerror=()=>{n(new TR(CR.READ_LOCAL_AUDIO_FILE_ERROR))},r.readAsArrayBuffer(e)}));n=await t}const r=await function(e){const t=dk();return new nh(((n,r)=>{t.decodeAudioData(e,(e=>{n(e)}),(e=>{r(new TR(CR.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(n);return"string"==typeof e&&t&&jP.set(e,r),r}(i,n)}catch(e){return s.onError(e),e.throw(rO)}const l=new FP(i),d=new UP(c,l,r?xO(r):{},a);return rO.info("create buffer source audio track success, trackId:",a),s.onSuccess(d.getTrackId()),d},setAppType:function(e){if(rO.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw rO.debug("Invalid appType"),new AO(CR.INVALID_PARAMS,"invalid app type",e);SN("APP_TYPE",Math.floor(e))},setLogLevel:function(e){rO.setLogLevel(e)},enableLogUpload:function(){CN("USE_NEW_LOG")?SN("UPLOAD_LOG",!0):rO.enableLogUpload()},disableLogUpload:function(){CN("USE_NEW_LOG")?SN("UPLOAD_LOG",!1):rO.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new DF},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=uO.reportApiInvoke(null,{tag:KR.TRACER,name:zR.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof LP||e instanceof zB)){const e=new AO(CR.INVALID_TRACK,"the parameter is not a audio track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof LP?e.getTrackLabel():"remote_track",i=e.getVolumeLevel();let o=i,a=i;const s=Date.now();return new nh((i=>{const c=setInterval((()=>{const l=e.getVolumeLevel();o=l>o?l:o,a=l<a?l:a;const d=o-a>1e-4,u=Date.now()-s;if(d||u>t){clearInterval(c);const t=d,a={duration:u,deviceLabel:r,maxVolumeLevel:o,result:t};rO.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(a))),n.onSuccess(a),i(t)}}),200)}))},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=uO.reportApiInvoke(null,{tag:KR.TRACER,name:zR.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof IB||e instanceof HB)){const e=new AO(CR.INVALID_TRACK,"the parameter is not a video track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof IB?e.getTrackLabel():"remote_track",i=e.getMediaStreamTrack(!0),o=document.createElement("video");o.style.width="1px",o.style.height="1px",o.setAttribute("muted",""),o.muted=!0,o.setAttribute("playsinline",""),o.controls=!1,($I()||JI())&&(o.style.opacity="0.01",o.style.position="fixed",o.style.left="0",o.style.top="0",document.body.appendChild(o)),o.srcObject=new MediaStream([i]),o.play();const a=document.createElement("canvas");a.width=160,a.height=120;let s=0,c=0;try{const e=Date.now();s=await function(e,t,n,r){let i,o=0,a=null;return new nh(((s,c)=>{function l(){o>r&&i&&(i(),s(o));const t=n.getContext("2d");if(!t){const e=new AO(CR.UNEXPECTED_ERROR,"can not get canvas 2d context.");return rO.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const l=t.getImageData(0,0,n.width,n.height),d=Math.floor(l.data.length/3);if(a){for(let e=0;e<d;e+=3)if(l.data[e]!==a[e])return o+=1,void(a=l.data);a=l.data}else a=l.data}setTimeout((()=>{i&&(i(),s(o))}),t),i=hk((()=>{l()}),30)}))}(o,t,a,4),c=Date.now()-e}catch(e){throw n.onError(e),e}Jj===HI.SAFARI&&(o.pause(),o.remove()),o.srcObject=null;const l=s>4,d={duration:c,changedPicNum:s,deviceLabel:r,result:l};return rO.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(d))),n.onSuccess(d),l},setArea:tF,audioElementPlayCenter:Pk,resumeAudioContext:function(){Pk.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){XV.processExternalMediaAEC(e)},registerExtensions:function(e){const t=CN("PLUGIN_INFO")||[];e.forEach((e=>{"name"in e&&!Br(t).call(t,e.name)&&t.push(e.name);const n=e;n.__registered__=!0,n.logger.hookLog=rO.extLog,n.reporter.hookApiInvoke=uO.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach((e=>{n.parameters[e]=CN(e)}))})),yq("PLUGIN_INFO",t)},ChannelMediaRelayError:KD,ChannelMediaRelayEvent:HD,ChannelMediaRelayState:zD,RemoteStreamFallbackType:DO,RemoteStreamType:LO,ConnectionDisconnectedReason:qR,AudienceLatencyLevelType:WR,AREAS:XD,preload:async function(e,t,n,r){return uQ(e,t,n,r)}});return Object.defineProperties(bq,{onAudioAutoplayFailed:{get:()=>xk.onAudioAutoplayFailed,set:e=>{xk.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>xk.onAutoplayFailed,set:e=>{xk.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>bq._onSecurityPolicyViolation,set(e){bq._onSecurityPolicyViolation=e,eH(e)}},__CLIENT_LIST__:{get:()=>CN("SHOW_GLOBAL_CLIENT_LIST")?kL:[]}}),Ik.on(XO.CAMERA_DEVICE_CHANGED,(e=>{rO.info("camera device changed",JSON.stringify(e)),bq.onCameraChanged&&bq.onCameraChanged(e),bq.safeEmit(fU.CAMERA_CHANGED,e)})),Ik.on(XO.RECORDING_DEVICE_CHANGED,(e=>{rO.info("microphone device changed",JSON.stringify(e)),bq.onMicrophoneChanged&&bq.onMicrophoneChanged(e),bq.safeEmit(fU.MICROPHONE_CHANGED,e)})),Ik.on(XO.PLAYOUT_DEVICE_CHANGED,(e=>{rO.debug("playout device changed",JSON.stringify(e)),bq.onPlaybackDeviceChanged&&bq.onPlaybackDeviceChanged(e),bq.safeEmit(fU.PLAYBACK_DEVICE_CHANGED,e)})),Pk.onAutoplayFailed=()=>{rO.info("detect audio element autoplay failed"),xk.onAudioAutoplayFailed&&xk.onAudioAutoplayFailed()},lk.on("autoplay-failed",(()=>{rO.info("detect webaudio autoplay failed"),xk.onAudioAutoplayFailed&&xk.onAudioAutoplayFailed(),bq.safeEmit(fU.AUTOPLAY_FAILED)})),lk.on(gO.STATE_CHANGE,((e,t)=>{rO.info("audio context state changed: ".concat(t," => ").concat(e)),bq.onAudioContextStateChanged&&bq.onAudioContextStateChanged(e,t),bq.safeEmit(fU.AUDIO_CONTEXT_STATE_CHANGED,e,t)})),ax.on(tx.NETWORK_STATE_CHANGE,((e,t)=>{rO.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))})),window&&(window.__ARTC__=bq),bq}()},2284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},4288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=y.prototype=new v;b.constructor=y,f(b,g.prototype),b.isPureReactComponent=!0;var E=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function S(e,t,r,i,o,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(){}function x(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c,l,d=!1;if(null===e)d=!0;else switch(s){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case n:case r:d=!0;break;case A:return x((d=e._init)(e._payload),t,i,o,a)}}if(d)return a=a(e),d=""===o?"."+I(e,0):o,E(a)?(i="",null!=d&&(i=d.replace(T,"$&/")+"/"),x(a,t,i,"",(function(e){return e}))):null!=a&&(C(a)&&(c=a,l=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+d,a=S(c.type,l,void 0,0,0,c.props)),t.push(a)),1;d=0;var u,p=""===o?".":o+":";if(E(e))for(var f=0;f<e.length;f++)d+=x(o=e[f],t,i,s=p+I(o,f),a);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=h&&u[h]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(o=e.next()).done;)d+=x(o=o.value,t,i,s=p+I(o,f++),a);else if("object"===s){if("function"===typeof e.then)return x(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(R,R):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,o,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function N(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function P(){}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=a,t.PureComponent=y,t.StrictMode=o,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=f({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!_.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];r.children=a}return S(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var s=Array(a),c=0;c<a;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return S(e,o,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:A,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(P,k)}catch(o){k(o)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=w.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return w.H.useTransition()},t.version="19.1.0"},4358:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,o=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,s=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function c(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function l(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function d(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},4391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},4467:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(816);function i(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,A=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function E(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case u:case o:case s:case a:case h:return e;default:switch(e=e&&e.$$typeof){case l:case A:case m:case f:case c:return e;default:return t}}case i:return t}}}function w(e){return E(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=A,t.Fragment=o,t.Lazy=m,t.Memo=f,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=h,t.isAsyncMode=function(e){return w(e)||E(e)===d},t.isConcurrentMode=w,t.isContextConsumer=function(e){return E(e)===l},t.isContextProvider=function(e){return E(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return E(e)===A},t.isFragment=function(e){return E(e)===o},t.isLazy=function(e){return E(e)===m},t.isMemo=function(e){return E(e)===f},t.isPortal=function(e){return E(e)===i},t.isProfiler=function(e){return E(e)===s},t.isStrictMode=function(e){return E(e)===a},t.isSuspense=function(e){return E(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===u||e===s||e===a||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===f||e.$$typeof===c||e.$$typeof===l||e.$$typeof===A||e.$$typeof===v||e.$$typeof===y||e.$$typeof===b||e.$$typeof===g)},t.typeOf=E},5043:(e,t,n)=>{"use strict";e.exports=n(4288)},5173:(e,t,n)=>{e.exports=n(1497)()},5239:function(e){e.exports=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};function r(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(Ut){o(Ut)}}function s(e){try{c(r.throw(e))}catch(Ut){o(Ut)}}function c(e){e.done?n(e.value):i(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(Ut){o=[6,Ut],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function o(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||t)}for(var a=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,i){return new e(this.left+t,this.top+n,this.width+r,this.height+i)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find((function(e){return 0!==e.width}));return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),s=function(e,t){return a.fromClientRect(e,t.getBoundingClientRect())},c=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),i=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new a(0,0,r,i)},l=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320===(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t},d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],i=-1,o="";++i<n;){var a=e[i];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(i+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A="undefined"===typeof Uint8Array?[]:new Uint8Array(256),h=0;h<u.length;h++)A[u.charCodeAt(h)]=h;for(var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="undefined"===typeof Uint8Array?[]:new Uint8Array(256),m=0;m<p.length;m++)f[p.charCodeAt(m)]=m;for(var g=function(e){var t,n,r,i,o,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),d=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<s;t+=4)n=f[e.charCodeAt(t)],r=f[e.charCodeAt(t+1)],i=f[e.charCodeAt(t+2)],o=f[e.charCodeAt(t+3)],d[c++]=n<<2|r>>4,d[c++]=(15&r)<<4|i>>2,d[c++]=(3&i)<<6|63&o;return l},v=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},y=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},b=5,E=11,w=2,_=65536>>b,S=(1<<b)-1,C=_+(1024>>b)+32,T=65536>>E,I=(1<<E-b)-1,R=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},x=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},N=function(e,t){var n=g(e),r=Array.isArray(n)?y(n):new Uint32Array(n),i=Array.isArray(n)?v(n):new Uint16Array(n),o=24,a=R(i,o/2,r[4]/2),s=2===r[5]?R(i,(o+r[4])/2):x(r,Math.ceil((o+r[4])/4));return new O(r[0],r[1],r[2],r[3],a,s)},O=function(){function e(e,t,n,r,i,o){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=o}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>b])<<w)+(e&S),this.data[t];if(e<=65535)return t=((t=this.index[_+(e-55296>>b)])<<w)+(e&S),this.data[t];if(e<this.highStart)return t=C-T+(e>>E),t=this.index[t],t+=e>>b&I,t=((t=this.index[t])<<w)+(e&S),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P="undefined"===typeof Uint8Array?[]:new Uint8Array(256),B=0;B<k.length;B++)P[k.charCodeAt(B)]=B;var L=50,D=1,U=2,M=3,F=4,j=5,Q=7,V=8,H=9,z=10,K=11,G=12,W=13,q=14,Y=15,X=16,J=17,Z=18,$=19,ee=20,te=21,ne=22,re=23,ie=24,oe=25,ae=26,se=27,ce=28,le=29,de=30,ue=31,Ae=32,he=33,pe=34,fe=35,me=36,ge=37,ve=38,ye=39,be=40,Ee=41,we=42,_e=43,Se=[9001,65288],Ce="!",Te="\xd7",Ie="\xf7",Re=N("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),xe=[de,me],Ne=[D,U,M,j],Oe=[z,V],ke=[se,ae],Pe=Ne.concat(Oe),Be=[ve,ye,be,pe,fe],Le=[Y,W],De=function(e,t){void 0===t&&(t="strict");var n=[],r=[],i=[];return e.forEach((function(e,o){var a=Re.get(e);if(a>L?(i.push(!0),a-=L):i.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(o),n.push(X);if(a===F||a===K){if(0===o)return r.push(o),n.push(de);var s=n[o-1];return-1===Pe.indexOf(s)?(r.push(r[o-1]),n.push(s)):(r.push(o),n.push(de))}return r.push(o),a===ue?n.push("strict"===t?te:ge):a===we||a===le?n.push(de):a===_e?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(ge):n.push(de):void n.push(a)})),[r,n,i]},Ue=function(e,t,n,r){var i=r[n];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var o=n;o<=r.length;){if((c=r[++o])===t)return!0;if(c!==z)break}if(i===z)for(o=n;o>0;){var a=r[--o];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var s=n;s<=r.length;){var c;if((c=r[++s])===t)return!0;if(c!==z)break}if(a!==z)break}return!1},Me=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==z)return r;n--}return 0},Fe=function(e,t,n,r,i){if(0===n[r])return Te;var o=r-1;if(Array.isArray(i)&&!0===i[o])return Te;var a=o-1,s=o+1,c=t[o],l=a>=0?t[a]:0,d=t[s];if(c===U&&d===M)return Te;if(-1!==Ne.indexOf(c))return Ce;if(-1!==Ne.indexOf(d))return Te;if(-1!==Oe.indexOf(d))return Te;if(Me(o,t)===V)return Ie;if(Re.get(e[o])===K)return Te;if((c===Ae||c===he)&&Re.get(e[s])===K)return Te;if(c===Q||d===Q)return Te;if(c===H)return Te;if(-1===[z,W,Y].indexOf(c)&&d===H)return Te;if(-1!==[J,Z,$,ie,ce].indexOf(d))return Te;if(Me(o,t)===ne)return Te;if(Ue(re,ne,o,t))return Te;if(Ue([J,Z],te,o,t))return Te;if(Ue(G,G,o,t))return Te;if(c===z)return Ie;if(c===re||d===re)return Te;if(d===X||c===X)return Ie;if(-1!==[W,Y,te].indexOf(d)||c===q)return Te;if(l===me&&-1!==Le.indexOf(c))return Te;if(c===ce&&d===me)return Te;if(d===ee)return Te;if(-1!==xe.indexOf(d)&&c===oe||-1!==xe.indexOf(c)&&d===oe)return Te;if(c===se&&-1!==[ge,Ae,he].indexOf(d)||-1!==[ge,Ae,he].indexOf(c)&&d===ae)return Te;if(-1!==xe.indexOf(c)&&-1!==ke.indexOf(d)||-1!==ke.indexOf(c)&&-1!==xe.indexOf(d))return Te;if(-1!==[se,ae].indexOf(c)&&(d===oe||-1!==[ne,Y].indexOf(d)&&t[s+1]===oe)||-1!==[ne,Y].indexOf(c)&&d===oe||c===oe&&-1!==[oe,ce,ie].indexOf(d))return Te;if(-1!==[oe,ce,ie,J,Z].indexOf(d))for(var u=o;u>=0;){if((A=t[u])===oe)return Te;if(-1===[ce,ie].indexOf(A))break;u--}if(-1!==[se,ae].indexOf(d))for(u=-1!==[J,Z].indexOf(c)?a:o;u>=0;){var A;if((A=t[u])===oe)return Te;if(-1===[ce,ie].indexOf(A))break;u--}if(ve===c&&-1!==[ve,ye,pe,fe].indexOf(d)||-1!==[ye,pe].indexOf(c)&&-1!==[ye,be].indexOf(d)||-1!==[be,fe].indexOf(c)&&d===be)return Te;if(-1!==Be.indexOf(c)&&-1!==[ee,ae].indexOf(d)||-1!==Be.indexOf(d)&&c===se)return Te;if(-1!==xe.indexOf(c)&&-1!==xe.indexOf(d))return Te;if(c===ie&&-1!==xe.indexOf(d))return Te;if(-1!==xe.concat(oe).indexOf(c)&&d===ne&&-1===Se.indexOf(e[s])||-1!==xe.concat(oe).indexOf(d)&&c===Z)return Te;if(c===Ee&&d===Ee){for(var h=n[o],p=1;h>0&&t[--h]===Ee;)p++;if(p%2!==0)return Te}return c===Ae&&d===he?Te:Ie},je=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=De(e,t.lineBreak),r=n[0],i=n[1],o=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(i=i.map((function(e){return-1!==[oe,de,we].indexOf(e)?ge:e})));var a="keep-all"===t.wordBreak?o.map((function(t,n){return t&&e[n]>=19968&&e[n]<=40959})):void 0;return[r,i,a]},Qe=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===Ce,this.start=n,this.end=r}return e.prototype.slice=function(){return d.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Ve=function(e,t){var n=l(e),r=je(n,t),i=r[0],o=r[1],a=r[2],s=n.length,c=0,d=0;return{next:function(){if(d>=s)return{done:!0,value:null};for(var e=Te;d<s&&(e=Fe(n,o,i,++d,a))===Te;);if(e!==Te||d===s){var t=new Qe(n,e,c,d);return c=d,{value:t,done:!1}}return{done:!0,value:null}}}},He=1,ze=2,Ke=4,Ge=8,We=10,qe=47,Ye=92,Xe=9,Je=32,Ze=34,$e=61,et=35,tt=36,nt=37,rt=39,it=40,ot=41,at=95,st=45,ct=33,lt=60,dt=62,ut=64,At=91,ht=93,pt=61,ft=123,mt=63,gt=125,vt=124,yt=126,bt=128,Et=65533,wt=42,_t=43,St=44,Ct=58,Tt=59,It=46,Rt=0,xt=8,Nt=11,Ot=14,kt=31,Pt=127,Bt=-1,Lt=48,Dt=97,Ut=101,Mt=102,Ft=117,jt=122,Qt=65,Vt=69,Ht=70,zt=85,Kt=90,Gt=function(e){return e>=Lt&&e<=57},Wt=function(e){return e>=55296&&e<=57343},qt=function(e){return Gt(e)||e>=Qt&&e<=Ht||e>=Dt&&e<=Mt},Yt=function(e){return e>=Dt&&e<=jt},Xt=function(e){return e>=Qt&&e<=Kt},Jt=function(e){return Yt(e)||Xt(e)},Zt=function(e){return e>=bt},$t=function(e){return e===We||e===Xe||e===Je},en=function(e){return Jt(e)||Zt(e)||e===at},tn=function(e){return en(e)||Gt(e)||e===st},nn=function(e){return e>=Rt&&e<=xt||e===Nt||e>=Ot&&e<=kt||e===Pt},rn=function(e,t){return e===Ye&&t!==We},on=function(e,t,n){return e===st?en(t)||rn(t,n):!!en(e)||!(e!==Ye||!rn(e,t))},an=function(e,t,n){return e===_t||e===st?!!Gt(t)||t===It&&Gt(n):Gt(e===It?t:e)},sn=function(e){var t=0,n=1;e[t]!==_t&&e[t]!==st||(e[t]===st&&(n=-1),t++);for(var r=[];Gt(e[t]);)r.push(e[t++]);var i=r.length?parseInt(d.apply(void 0,r),10):0;e[t]===It&&t++;for(var o=[];Gt(e[t]);)o.push(e[t++]);var a=o.length,s=a?parseInt(d.apply(void 0,o),10):0;e[t]!==Vt&&e[t]!==Ut||t++;var c=1;e[t]!==_t&&e[t]!==st||(e[t]===st&&(c=-1),t++);for(var l=[];Gt(e[t]);)l.push(e[t++]);var u=l.length?parseInt(d.apply(void 0,l),10):0;return n*(i+s*Math.pow(10,-a))*Math.pow(10,c*u)},cn={type:2},ln={type:3},dn={type:4},un={type:13},An={type:8},hn={type:21},pn={type:9},fn={type:10},mn={type:11},gn={type:12},vn={type:14},yn={type:23},bn={type:1},En={type:25},wn={type:24},_n={type:26},Sn={type:27},Cn={type:28},Tn={type:29},In={type:31},Rn={type:32},xn=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(l(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Rn;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Ze:return this.consumeStringToken(Ze);case et:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(tn(t)||rn(n,r)){var i=on(t,n,r)?ze:He;return{type:5,value:this.consumeName(),flags:i}}break;case tt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),un;break;case rt:return this.consumeStringToken(rt);case it:return cn;case ot:return ln;case wt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),vn;break;case _t:if(an(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case St:return dn;case st:var o=e,a=this.peekCodePoint(0),s=this.peekCodePoint(1);if(an(o,a,s))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(on(o,a,s))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===st&&s===dt)return this.consumeCodePoint(),this.consumeCodePoint(),wn;break;case It:if(an(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case qe:if(this.peekCodePoint(0)===wt)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===wt&&(c=this.consumeCodePoint())===qe)return this.consumeToken();if(c===Bt)return this.consumeToken()}break;case Ct:return _n;case Tt:return Sn;case lt:if(this.peekCodePoint(0)===ct&&this.peekCodePoint(1)===st&&this.peekCodePoint(2)===st)return this.consumeCodePoint(),this.consumeCodePoint(),En;break;case ut:var l=this.peekCodePoint(0),u=this.peekCodePoint(1),A=this.peekCodePoint(2);if(on(l,u,A))return{type:7,value:this.consumeName()};break;case At:return Cn;case Ye:if(rn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ht:return Tn;case pt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),An;break;case ft:return mn;case gt:return gn;case Ft:case zt:var h=this.peekCodePoint(0),p=this.peekCodePoint(1);return h!==_t||!qt(p)&&p!==mt||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case vt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),pn;if(this.peekCodePoint(0)===vt)return this.consumeCodePoint(),hn;break;case yt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),fn;break;case Bt:return Rn}return $t(e)?(this.consumeWhiteSpace(),In):Gt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):en(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:d(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return"undefined"===typeof e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();qt(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===mt&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(d.apply(void 0,e.map((function(e){return e===mt?Lt:e}))),16),end:parseInt(d.apply(void 0,e.map((function(e){return e===mt?Ht:e}))),16)};var r=parseInt(d.apply(void 0,e),16);if(this.peekCodePoint(0)===st&&qt(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var i=[];qt(t)&&i.length<6;)i.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(d.apply(void 0,i),16)}}return{type:30,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===it?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===it?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Bt)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===rt||t===Ze){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Bt||this.peekCodePoint(0)===ot)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),yn)}for(;;){var r=this.consumeCodePoint();if(r===Bt||r===ot)return{type:22,value:d.apply(void 0,e)};if($t(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Bt||this.peekCodePoint(0)===ot?(this.consumeCodePoint(),{type:22,value:d.apply(void 0,e)}):(this.consumeBadUrlRemnants(),yn);if(r===Ze||r===rt||r===it||nn(r))return this.consumeBadUrlRemnants(),yn;if(r===Ye){if(!rn(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),yn;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;$t(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ot||e===Bt)return;rn(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var r=Math.min(t,e);n+=d.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===Bt||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(r===We)return this._value.splice(0,n),bn;if(r===Ye){var i=this._value[n+1];i!==Bt&&void 0!==i&&(i===We?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):rn(r,i)&&(t+=this.consumeStringSlice(n),t+=d(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=Ke,n=this.peekCodePoint(0);for(n!==_t&&n!==st||e.push(this.consumeCodePoint());Gt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===It&&Gt(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ge;Gt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===Vt||n===Ut)&&((r===_t||r===st)&&Gt(i)||Gt(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ge;Gt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[sn(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);return on(r,i,o)?{type:15,number:t,flags:n,unit:this.consumeName()}:r===nt?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(qt(e)){for(var t=d(e);qt(this.peekCodePoint(0))&&t.length<6;)t+=d(this.consumeCodePoint());$t(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||Wt(n)||n>1114111?Et:n}return e===Bt?Et:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(tn(t))e+=d(t);else{if(!rn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=d(this.consumeEscapedCodePoint())}}},e}(),Nn=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new xn;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||Fn(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return"undefined"===typeof e?Rn:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),On=function(e){return 15===e.type},kn=function(e){return 17===e.type},Pn=function(e){return 20===e.type},Bn=function(e){return 0===e.type},Ln=function(e,t){return Pn(e)&&e.value===t},Dn=function(e){return 31!==e.type},Un=function(e){return 31!==e.type&&4!==e.type},Mn=function(e){var t=[],n=[];return e.forEach((function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)})),n.length&&t.push(n),t},Fn=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},jn=function(e){return 17===e.type||15===e.type},Qn=function(e){return 16===e.type||jn(e)},Vn=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Hn={type:17,number:0,flags:Ke},zn={type:16,number:50,flags:Ke},Kn={type:16,number:100,flags:Ke},Gn=function(e,t,n){var r=e[0],i=e[1];return[Wn(r,t),Wn("undefined"!==typeof i?i:r,n)]},Wn=function(e,t){if(16===e.type)return e.number/100*t;if(On(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},qn="deg",Yn="grad",Xn="rad",Jn="turn",Zn={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case qn:return Math.PI*t.number/180;case Yn:return Math.PI/200*t.number;case Xn:return t.number;case Jn:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},$n=function(e){return 15===e.type&&(e.unit===qn||e.unit===Yn||e.unit===Xn||e.unit===Jn)},er=function(e){switch(e.filter(Pn).map((function(e){return e.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Hn,Hn];case"to top":case"bottom":return tr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Hn,Kn];case"to right":case"left":return tr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Kn,Kn];case"to bottom":case"top":return tr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Kn,Hn];case"to left":case"right":return tr(270)}return 0},tr=function(e){return Math.PI*e/180},nr={name:"color",parse:function(e,t){if(18===t.type){var n=dr[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),i=t.value.substring(1,2),o=t.value.substring(2,3);return or(parseInt(r+r,16),parseInt(i+i,16),parseInt(o+o,16),1)}if(4===t.value.length){r=t.value.substring(0,1),i=t.value.substring(1,2),o=t.value.substring(2,3);var a=t.value.substring(3,4);return or(parseInt(r+r,16),parseInt(i+i,16),parseInt(o+o,16),parseInt(a+a,16)/255)}if(6===t.value.length)return r=t.value.substring(0,2),i=t.value.substring(2,4),o=t.value.substring(4,6),or(parseInt(r,16),parseInt(i,16),parseInt(o,16),1);if(8===t.value.length)return r=t.value.substring(0,2),i=t.value.substring(2,4),o=t.value.substring(4,6),a=t.value.substring(6,8),or(parseInt(r,16),parseInt(i,16),parseInt(o,16),parseInt(a,16)/255)}if(20===t.type){var s=Ar[t.value.toUpperCase()];if("undefined"!==typeof s)return s}return Ar.TRANSPARENT}},rr=function(e){return 0===(255&e)},ir=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,i=255&e>>24;return t<255?"rgba("+i+","+r+","+n+","+t/255+")":"rgb("+i+","+r+","+n+")"},or=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r))>>>0},ar=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},sr=function(e,t){var n=t.filter(Un);if(3===n.length){var r=n.map(ar),i=r[0],o=r[1],a=r[2];return or(i,o,a,1)}if(4===n.length){var s=n.map(ar),c=(i=s[0],o=s[1],a=s[2],s[3]);return or(i,o,a,c)}return 0};function cr(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var lr=function(e,t){var n=t.filter(Un),r=n[0],i=n[1],o=n[2],a=n[3],s=(17===r.type?tr(r.number):Zn.parse(e,r))/(2*Math.PI),c=Qn(i)?i.number/100:0,l=Qn(o)?o.number/100:0,d="undefined"!==typeof a&&Qn(a)?Wn(a,1):1;if(0===c)return or(255*l,255*l,255*l,1);var u=l<=.5?l*(c+1):l+c-l*c,A=2*l-u,h=cr(A,u,s+1/3),p=cr(A,u,s),f=cr(A,u,s-1/3);return or(255*h,255*p,255*f,d)},dr={hsl:lr,hsla:lr,rgb:sr,rgba:sr},ur=function(e,t){return nr.parse(e,Nn.create(t).parseComponentValue())},Ar={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},hr={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(Pn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},pr={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fr=function(e,t){var n=nr.parse(e,t[0]),r=t[1];return r&&Qn(r)?{color:n,stop:r}:{color:n,stop:null}},mr=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=Hn),null===r.stop&&(r.stop=Kn);for(var i=[],o=0,a=0;a<e.length;a++){var s=e[a].stop;if(null!==s){var c=Wn(s,t);c>o?i.push(c):i.push(o),o=c}else i.push(null)}var l=null;for(a=0;a<i.length;a++){var d=i[a];if(null===d)null===l&&(l=a);else if(null!==l){for(var u=a-l,A=(d-i[l-1])/(u+1),h=1;h<=u;h++)i[l+h-1]=A*h;l=null}}return e.map((function(e,n){return{color:e.color,stop:Math.max(Math.min(1,i[n]/t),0)}}))},gr=function(e,t,n){var r=t/2,i=n/2,o=Wn(e[0],t)-r,a=i-Wn(e[1],n);return(Math.atan2(a,o)+2*Math.PI)%(2*Math.PI)},vr=function(e,t,n){var r="number"===typeof e?e:gr(e,t,n),i=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),o=t/2,a=n/2,s=i/2,c=Math.sin(r-Math.PI/2)*s,l=Math.cos(r-Math.PI/2)*s;return[i,o-l,o+l,a-c,a+c]},yr=function(e,t){return Math.sqrt(e*e+t*t)},br=function(e,t,n,r,i){return[[0,0],[0,t],[e,0],[e,t]].reduce((function(e,t){var o=t[0],a=t[1],s=yr(n-o,r-a);return(i?s<e.optimumDistance:s>e.optimumDistance)?{optimumCorner:t,optimumDistance:s}:e}),{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},Er=function(e,t,n,r,i){var o=0,a=0;switch(e.size){case 0:0===e.shape?o=a=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-i)):1===e.shape&&(o=Math.min(Math.abs(t),Math.abs(t-r)),a=Math.min(Math.abs(n),Math.abs(n-i)));break;case 2:if(0===e.shape)o=a=Math.min(yr(t,n),yr(t,n-i),yr(t-r,n),yr(t-r,n-i));else if(1===e.shape){var s=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(t),Math.abs(t-r)),c=br(r,i,t,n,!0),l=c[0],d=c[1];a=s*(o=yr(l-t,(d-n)/s))}break;case 1:0===e.shape?o=a=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-i)):1===e.shape&&(o=Math.max(Math.abs(t),Math.abs(t-r)),a=Math.max(Math.abs(n),Math.abs(n-i)));break;case 3:if(0===e.shape)o=a=Math.max(yr(t,n),yr(t,n-i),yr(t-r,n),yr(t-r,n-i));else if(1===e.shape){s=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(t),Math.abs(t-r));var u=br(r,i,t,n,!1);l=u[0],d=u[1],a=s*(o=yr(l-t,(d-n)/s))}}return Array.isArray(e.size)&&(o=Wn(e.size[0],r),a=2===e.size.length?Wn(e.size[1],i):o),[o,a]},wr=function(e,t){var n=tr(180),r=[];return Mn(t).forEach((function(t,i){if(0===i){var o=t[0];if(20===o.type&&-1!==["top","left","right","bottom"].indexOf(o.value))return void(n=er(t));if($n(o))return void(n=(Zn.parse(e,o)+tr(270))%tr(360))}var a=fr(e,t);r.push(a)})),{angle:n,stops:r,type:1}},_r="closest-side",Sr="farthest-side",Cr="closest-corner",Tr="farthest-corner",Ir="circle",Rr="ellipse",xr="cover",Nr="contain",Or=function(e,t){var n=0,r=3,i=[],o=[];return Mn(t).forEach((function(t,a){var s=!0;if(0===a?s=t.reduce((function(e,t){if(Pn(t))switch(t.value){case"center":return o.push(zn),!1;case"top":case"left":return o.push(Hn),!1;case"right":case"bottom":return o.push(Kn),!1}else if(Qn(t)||jn(t))return o.push(t),!1;return e}),s):1===a&&(s=t.reduce((function(e,t){if(Pn(t))switch(t.value){case Ir:return n=0,!1;case Rr:return n=1,!1;case Nr:case _r:return r=0,!1;case Sr:return r=1,!1;case Cr:return r=2,!1;case xr:case Tr:return r=3,!1}else if(jn(t)||Qn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),s)),s){var c=fr(e,t);i.push(c)}})),{size:r,shape:n,stops:i,position:o,type:2}},kr=function(e){return 1===e.type},Pr=function(e){return 2===e.type},Br={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=Ur[t.name];if("undefined"===typeof r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Lr(e){return!(20===e.type&&"none"===e.value)&&(18!==e.type||!!Ur[e.name])}var Dr,Ur={"linear-gradient":function(e,t){var n=tr(180),r=[];return Mn(t).forEach((function(t,i){if(0===i){var o=t[0];if(20===o.type&&"to"===o.value)return void(n=er(t));if($n(o))return void(n=Zn.parse(e,o))}var a=fr(e,t);r.push(a)})),{angle:n,stops:r,type:1}},"-moz-linear-gradient":wr,"-ms-linear-gradient":wr,"-o-linear-gradient":wr,"-webkit-linear-gradient":wr,"radial-gradient":function(e,t){var n=0,r=3,i=[],o=[];return Mn(t).forEach((function(t,a){var s=!0;if(0===a){var c=!1;s=t.reduce((function(e,t){if(c)if(Pn(t))switch(t.value){case"center":return o.push(zn),e;case"top":case"left":return o.push(Hn),e;case"right":case"bottom":return o.push(Kn),e}else(Qn(t)||jn(t))&&o.push(t);else if(Pn(t))switch(t.value){case Ir:return n=0,!1;case Rr:return n=1,!1;case"at":return c=!0,!1;case _r:return r=0,!1;case xr:case Sr:return r=1,!1;case Nr:case Cr:return r=2,!1;case Tr:return r=3,!1}else if(jn(t)||Qn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),s)}if(s){var l=fr(e,t);i.push(l)}})),{size:r,shape:n,stops:i,position:o,type:2}},"-moz-radial-gradient":Or,"-ms-radial-gradient":Or,"-o-radial-gradient":Or,"-webkit-radial-gradient":Or,"-webkit-gradient":function(e,t){var n=tr(180),r=[],i=1,o=0,a=3,s=[];return Mn(t).forEach((function(t,n){var o=t[0];if(0===n){if(Pn(o)&&"linear"===o.value)return void(i=1);if(Pn(o)&&"radial"===o.value)return void(i=2)}if(18===o.type)if("from"===o.name){var a=nr.parse(e,o.values[0]);r.push({stop:Hn,color:a})}else if("to"===o.name)a=nr.parse(e,o.values[0]),r.push({stop:Kn,color:a});else if("color-stop"===o.name){var s=o.values.filter(Un);if(2===s.length){a=nr.parse(e,s[1]);var c=s[0];kn(c)&&r.push({stop:{type:16,number:100*c.number,flags:c.flags},color:a})}}})),1===i?{angle:(n+tr(180))%tr(360),stops:r,type:i}:{size:a,shape:o,stops:r,position:s,type:i}}},Mr={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter((function(e){return Un(e)&&Lr(e)})).map((function(t){return Br.parse(e,t)}))}},Fr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(Pn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},jr={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Mn(t).map((function(e){return e.filter(Qn)})).map(Vn)}},Qr={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Mn(t).map((function(e){return e.filter(Pn).map((function(e){return e.value})).join(" ")})).map(Vr)}},Vr=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Dr||(Dr={}));var Hr,zr={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Mn(t).map((function(e){return e.filter(Kr)}))}},Kr=function(e){return Pn(e)||Qn(e)},Gr=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Wr=Gr("top"),qr=Gr("right"),Yr=Gr("bottom"),Xr=Gr("left"),Jr=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Vn(t.filter(Qn))}}},Zr=Jr("top-left"),$r=Jr("top-right"),ei=Jr("bottom-right"),ti=Jr("bottom-left"),ni=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ri=ni("top"),ii=ni("right"),oi=ni("bottom"),ai=ni("left"),si=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return On(t)?t.number:0}}},ci=si("top"),li=si("right"),di=si("bottom"),ui=si("left"),Ai={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},hi={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},pi={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Pn).reduce((function(e,t){return e|fi(t.value)}),0)}},fi=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},mi={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},gi={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(Hr||(Hr={}));var vi,yi={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?Hr.STRICT:Hr.NORMAL}},bi={name:"line-height",initialValue:"normal",prefix:!1,type:4},Ei=function(e,t){return Pn(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:Qn(e)?Wn(e,t):t},wi={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Br.parse(e,t)}},_i={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},Si={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Ci=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Ti=Ci("top"),Ii=Ci("right"),Ri=Ci("bottom"),xi=Ci("left"),Ni={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Pn).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Oi={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},ki=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Pi=ki("top"),Bi=ki("right"),Li=ki("bottom"),Di=ki("left"),Ui={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Mi={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Fi={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Ln(t[0],"none")?[]:Mn(t).map((function(t){for(var n={color:Ar.TRANSPARENT,offsetX:Hn,offsetY:Hn,blur:Hn},r=0,i=0;i<t.length;i++){var o=t[i];jn(o)?(0===r?n.offsetX=o:1===r?n.offsetY=o:n.blur=o,r++):n.color=nr.parse(e,o)}return n}))}},ji={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Qi={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=Vi[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Vi={matrix:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},matrix3d:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number})),n=t[0],r=t[1];t[2],t[3];var i=t[4],o=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var a=t[12],s=t[13];return t[14],t[15],16===t.length?[n,r,i,o,a,s]:null}},Hi={type:16,number:50,flags:Ke},zi=[Hi,Hi],Ki={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Qn);return 2!==n.length?zi:[n[0],n[1]]}},Gi={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(vi||(vi={}));for(var Wi={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return vi.BREAK_ALL;case"keep-all":return vi.KEEP_ALL;default:return vi.NORMAL}}},qi={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(kn(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Yi={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Xi={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return kn(t)?t.number:1}},Ji={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Zi={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Pn).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},$i={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach((function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}})),n.length&&r.push(n.join(" ")),r.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},eo={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},to={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return kn(t)?t.number:Pn(t)&&"bold"===t.value?700:400}},no={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Pn).map((function(e){return e.value}))}},ro={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},io=function(e,t){return 0!==(e&t)},oo={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},ao={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],i=t.filter(Dn),o=0;o<i.length;o++){var a=i[o],s=i[o+1];if(20===a.type){var c=s&&kn(s)?s.number:1;r.push({counter:a.value,increment:c})}}return r}},so={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(Dn),i=0;i<r.length;i++){var o=r[i],a=r[i+1];if(Pn(o)&&"none"!==o.value){var s=a&&kn(a)?a.number:0;n.push({counter:o.value,reset:s})}}return n}},co={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(On).map((function(t){return Yi.parse(e,t)}))}},lo={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],i=t.filter(Bn);if(i.length%2!==0)return null;for(var o=0;o<i.length;o+=2){var a=i[o].value,s=i[o+1].value;r.push({open:a,close:s})}return r}},uo=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},Ao={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Ln(t[0],"none")?[]:Mn(t).map((function(t){for(var n={color:255,offsetX:Hn,offsetY:Hn,blur:Hn,spread:Hn,inset:!1},r=0,i=0;i<t.length;i++){var o=t[i];Ln(o,"inset")?n.inset=!0:jn(o)?(0===r?n.offsetX=o:1===r?n.offsetY=o:2===r?n.blur=o:n.spread=o,r++):n.color=nr.parse(e,o)}return n}))}},ho={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(Pn).forEach((function(e){switch(e.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2)}})),n.forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),r}},po={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fo={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return On(t)?t.number:0}},mo=function(){function e(e,t){var n,r;this.animationDuration=yo(e,co,t.animationDuration),this.backgroundClip=yo(e,hr,t.backgroundClip),this.backgroundColor=yo(e,pr,t.backgroundColor),this.backgroundImage=yo(e,Mr,t.backgroundImage),this.backgroundOrigin=yo(e,Fr,t.backgroundOrigin),this.backgroundPosition=yo(e,jr,t.backgroundPosition),this.backgroundRepeat=yo(e,Qr,t.backgroundRepeat),this.backgroundSize=yo(e,zr,t.backgroundSize),this.borderTopColor=yo(e,Wr,t.borderTopColor),this.borderRightColor=yo(e,qr,t.borderRightColor),this.borderBottomColor=yo(e,Yr,t.borderBottomColor),this.borderLeftColor=yo(e,Xr,t.borderLeftColor),this.borderTopLeftRadius=yo(e,Zr,t.borderTopLeftRadius),this.borderTopRightRadius=yo(e,$r,t.borderTopRightRadius),this.borderBottomRightRadius=yo(e,ei,t.borderBottomRightRadius),this.borderBottomLeftRadius=yo(e,ti,t.borderBottomLeftRadius),this.borderTopStyle=yo(e,ri,t.borderTopStyle),this.borderRightStyle=yo(e,ii,t.borderRightStyle),this.borderBottomStyle=yo(e,oi,t.borderBottomStyle),this.borderLeftStyle=yo(e,ai,t.borderLeftStyle),this.borderTopWidth=yo(e,ci,t.borderTopWidth),this.borderRightWidth=yo(e,li,t.borderRightWidth),this.borderBottomWidth=yo(e,di,t.borderBottomWidth),this.borderLeftWidth=yo(e,ui,t.borderLeftWidth),this.boxShadow=yo(e,Ao,t.boxShadow),this.color=yo(e,Ai,t.color),this.direction=yo(e,hi,t.direction),this.display=yo(e,pi,t.display),this.float=yo(e,mi,t.cssFloat),this.fontFamily=yo(e,$i,t.fontFamily),this.fontSize=yo(e,eo,t.fontSize),this.fontStyle=yo(e,ro,t.fontStyle),this.fontVariant=yo(e,no,t.fontVariant),this.fontWeight=yo(e,to,t.fontWeight),this.letterSpacing=yo(e,gi,t.letterSpacing),this.lineBreak=yo(e,yi,t.lineBreak),this.lineHeight=yo(e,bi,t.lineHeight),this.listStyleImage=yo(e,wi,t.listStyleImage),this.listStylePosition=yo(e,_i,t.listStylePosition),this.listStyleType=yo(e,Si,t.listStyleType),this.marginTop=yo(e,Ti,t.marginTop),this.marginRight=yo(e,Ii,t.marginRight),this.marginBottom=yo(e,Ri,t.marginBottom),this.marginLeft=yo(e,xi,t.marginLeft),this.opacity=yo(e,Xi,t.opacity);var i=yo(e,Ni,t.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=yo(e,Oi,t.overflowWrap),this.paddingTop=yo(e,Pi,t.paddingTop),this.paddingRight=yo(e,Bi,t.paddingRight),this.paddingBottom=yo(e,Li,t.paddingBottom),this.paddingLeft=yo(e,Di,t.paddingLeft),this.paintOrder=yo(e,ho,t.paintOrder),this.position=yo(e,Mi,t.position),this.textAlign=yo(e,Ui,t.textAlign),this.textDecorationColor=yo(e,Ji,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=yo(e,Zi,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=yo(e,Fi,t.textShadow),this.textTransform=yo(e,ji,t.textTransform),this.transform=yo(e,Qi,t.transform),this.transformOrigin=yo(e,Ki,t.transformOrigin),this.visibility=yo(e,Gi,t.visibility),this.webkitTextStrokeColor=yo(e,po,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=yo(e,fo,t.webkitTextStrokeWidth),this.wordBreak=yo(e,Wi,t.wordBreak),this.zIndex=yo(e,qi,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return rr(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return io(this.display,4)||io(this.display,33554432)||io(this.display,268435456)||io(this.display,536870912)||io(this.display,67108864)||io(this.display,134217728)},e}(),go=function(){function e(e,t){this.content=yo(e,oo,t.content),this.quotes=yo(e,lo,t.quotes)}return e}(),vo=function(){function e(e,t){this.counterIncrement=yo(e,ao,t.counterIncrement),this.counterReset=yo(e,so,t.counterReset)}return e}(),yo=function(e,t,n){var r=new xn,i=null!==n&&"undefined"!==typeof n?n.toString():t.initialValue;r.write(i);var o=new Nn(r.read());switch(t.type){case 2:var a=o.parseComponentValue();return t.parse(e,Pn(a)?a.value:t.initialValue);case 0:return t.parse(e,o.parseComponentValue());case 1:return t.parse(e,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(t.format){case"angle":return Zn.parse(e,o.parseComponentValue());case"color":return nr.parse(e,o.parseComponentValue());case"image":return Br.parse(e,o.parseComponentValue());case"length":var s=o.parseComponentValue();return jn(s)?s:Hn;case"length-percentage":var c=o.parseComponentValue();return Qn(c)?c:Hn;case"time":return Yi.parse(e,o.parseComponentValue())}}},bo="data-html2canvas-debug",Eo=function(e){switch(e.getAttribute(bo)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},wo=function(e,t){var n=Eo(e);return 1===n||t===n},_o=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,wo(t,3),this.styles=new mo(e,window.getComputedStyle(t,null)),ds(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=s(this.context,t),wo(t,4)&&(this.flags|=16)}return e}(),So="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",To="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Io=0;Io<Co.length;Io++)To[Co.charCodeAt(Io)]=Io;for(var Ro=function(e){var t,n,r,i,o,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),d=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<s;t+=4)n=To[e.charCodeAt(t)],r=To[e.charCodeAt(t+1)],i=To[e.charCodeAt(t+2)],o=To[e.charCodeAt(t+3)],d[c++]=n<<2|r>>4,d[c++]=(15&r)<<4|i>>2,d[c++]=(3&i)<<6|63&o;return l},xo=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},No=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Oo=5,ko=11,Po=2,Bo=65536>>Oo,Lo=(1<<Oo)-1,Do=Bo+(1024>>Oo)+32,Uo=65536>>ko,Mo=(1<<ko-Oo)-1,Fo=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},jo=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Qo=function(e,t){var n=Ro(e),r=Array.isArray(n)?No(n):new Uint32Array(n),i=Array.isArray(n)?xo(n):new Uint16Array(n),o=24,a=Fo(i,o/2,r[4]/2),s=2===r[5]?Fo(i,(o+r[4])/2):jo(r,Math.ceil((o+r[4])/4));return new Vo(r[0],r[1],r[2],r[3],a,s)},Vo=function(){function e(e,t,n,r,i,o){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=o}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>Oo])<<Po)+(e&Lo),this.data[t];if(e<=65535)return t=((t=this.index[Bo+(e-55296>>Oo)])<<Po)+(e&Lo),this.data[t];if(e<this.highStart)return t=Do-Uo+(e>>ko),t=this.index[t],t+=e>>Oo&Mo,t=((t=this.index[t])<<Po)+(e&Lo),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Ho="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zo="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Ko=0;Ko<Ho.length;Ko++)zo[Ho.charCodeAt(Ko)]=Ko;var Go,Wo=1,qo=2,Yo=3,Xo=4,Jo=5,Zo=7,$o=8,ea=9,ta=10,na=11,ra=12,ia=13,oa=14,aa=15,sa=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320===(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t},ca=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],i=-1,o="";++i<n;){var a=e[i];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(i+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},la=Qo(So),da="\xd7",ua="\xf7",Aa=function(e){return la.get(e)},ha=function(e,t,n){var r=n-2,i=t[r],o=t[n-1],a=t[n];if(o===qo&&a===Yo)return da;if(o===qo||o===Yo||o===Xo)return ua;if(a===qo||a===Yo||a===Xo)return ua;if(o===$o&&-1!==[$o,ea,na,ra].indexOf(a))return da;if((o===na||o===ea)&&(a===ea||a===ta))return da;if((o===ra||o===ta)&&a===ta)return da;if(a===ia||a===Jo)return da;if(a===Zo)return da;if(o===Wo)return da;if(o===ia&&a===oa){for(;i===Jo;)i=t[--r];if(i===oa)return da}if(o===aa&&a===aa){for(var s=0;i===aa;)s++,i=t[--r];if(s%2===0)return da}return ua},pa=function(e){var t=sa(e),n=t.length,r=0,i=0,o=t.map(Aa);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=da;r<n&&(e=ha(t,o,++r))===da;);if(e!==da||r===n){var a=ca.apply(null,t.slice(i,r));return i=r,{value:a,done:!1}}return{done:!0,value:null}}}},fa=function(e){for(var t,n=pa(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r},ma=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var i=n.getBoundingClientRect(),o=Math.round(i.height);if(e.body.removeChild(r),o===t)return!0}}return!1},ga=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,i=l(r.data).map((function(e){return d(e)})),o=0,a={},s=i.every((function(e,t){n.setStart(r,o),n.setEnd(r,o+e.length);var i=n.getBoundingClientRect();o+=e.length;var s=i.x>a.x||i.y>a.y;return a=i,0===t||s}));return e.body.removeChild(t),s},va=function(){return"undefined"!==typeof(new Image).crossOrigin},ya=function(){return"string"===typeof(new XMLHttpRequest).responseType},ba=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(Ut){return!1}return!0},Ea=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},wa=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var i=new Image,o=t.toDataURL();i.src=o;var a=_a(n,n,0,0,i);return r.fillStyle="red",r.fillRect(0,0,n,n),Sa(a).then((function(t){r.drawImage(t,0,0);var i=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var a=e.createElement("div");return a.style.backgroundImage="url("+o+")",a.style.height=n+"px",Ea(i)?Sa(_a(n,n,0,0,a)):Promise.reject(!1)})).then((function(e){return r.drawImage(e,0,0),Ea(r.getImageData(0,0,n,n).data)})).catch((function(){return!1}))},_a=function(e,t,n,r,i){var o="http://www.w3.org/2000/svg",a=document.createElementNS(o,"svg"),s=document.createElementNS(o,"foreignObject");return a.setAttributeNS(null,"width",e.toString()),a.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",n.toString()),s.setAttributeNS(null,"y",r.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(s),s.appendChild(i),a},Sa=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},Ca={get SUPPORT_RANGE_BOUNDS(){var e=ma(document);return Object.defineProperty(Ca,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Ca.SUPPORT_RANGE_BOUNDS&&ga(document);return Object.defineProperty(Ca,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=ba(document);return Object.defineProperty(Ca,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"===typeof Array.from&&"function"===typeof window.fetch?wa(document):Promise.resolve(!1);return Object.defineProperty(Ca,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=va();return Object.defineProperty(Ca,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=ya();return Object.defineProperty(Ca,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ca,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(Ca,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Ta=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Ia=function(e,t,n,r){var i=ka(t,n),o=[],s=0;return i.forEach((function(t){if(n.textDecorationLine.length||t.trim().length>0)if(Ca.SUPPORT_RANGE_BOUNDS){var i=xa(r,s,t.length).getClientRects();if(i.length>1){var c=Na(t),l=0;c.forEach((function(t){o.push(new Ta(t,a.fromDOMRectList(e,xa(r,l+s,t.length).getClientRects()))),l+=t.length}))}else o.push(new Ta(t,a.fromDOMRectList(e,i)))}else{var d=r.splitText(t.length);o.push(new Ta(t,Ra(e,r))),r=d}else Ca.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));s+=t.length})),o},Ra=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var i=t.parentNode;if(i){i.replaceChild(r,t);var o=s(e,r);return r.firstChild&&i.replaceChild(r.firstChild,r),o}}return a.EMPTY},xa=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(e,t),i.setEnd(e,t+n),i},Na=function(e){if(Ca.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return fa(e)},Oa=function(e,t){if(Ca.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map((function(e){return e.segment}))}return Ba(e,t)},ka=function(e,t){return 0!==t.letterSpacing?Na(e):Oa(e,t)},Pa=[32,160,4961,65792,65793,4153,4241],Ba=function(e,t){for(var n,r=Ve(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),i=[],o=function(){if(n.value){var e=n.value.slice(),t=l(e),r="";t.forEach((function(e){-1===Pa.indexOf(e)?r+=d(e):(r.length&&i.push(r),i.push(d(e)),r="")})),r.length&&i.push(r)}};!(n=r.next()).done;)o();return i},La=function(){function e(e,t,n){this.text=Da(t.data,n.textTransform),this.textBounds=Ia(e,this.text,n,t)}return e}(),Da=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Ua,Ma);case 2:return e.toUpperCase();default:return e}},Ua=/(^|\s|:|-|\(|\))([a-z])/g,Ma=function(e,t,n){return e.length>0?t+n.toUpperCase():e},Fa=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return t(n,e),n}(_o),ja=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return t(n,e),n}(_o),Qa=function(e){function n(t,n){var r=e.call(this,t,n)||this,i=new XMLSerializer,o=s(t,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t(n,e),n}(_o),Va=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(_o),Ha=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"===typeof n.reversed&&!0===n.reversed,r}return t(n,e),n}(_o),za=[{type:15,flags:0,unit:"px",number:3}],Ka=[{type:16,flags:0,number:50}],Ga=function(e){return e.width>e.height?new a(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new a(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Wa=function(e){var t=e.type===Xa?new Array(e.value.length+1).join("\u2022"):e.value;return 0===t.length?e.placeholder||"":t},qa="checkbox",Ya="radio",Xa="password",Ja=707406591,Za=function(e){function n(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=Wa(n),r.type!==qa&&r.type!==Ya||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=Ga(r.bounds)),r.type){case qa:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=za;break;case Ya:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Ka}return r}return t(n,e),n}(_o),$a=function(e){function n(t,n){var r=e.call(this,t,n)||this,i=n.options[n.selectedIndex||0];return r.value=i&&i.text||"",r}return t(n,e),n}(_o),es=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(_o),ts=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=os(t,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?ur(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Ar.TRANSPARENT,o=n.contentWindow.document.body?ur(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):Ar.TRANSPARENT;r.backgroundColor=rr(i)?rr(o)?r.styles.backgroundColor:o:i}}catch(Ut){}return r}return t(n,e),n}(_o),ns=["OL","UL","MENU"],rs=function(e,t,n,r){for(var i=t.firstChild,o=void 0;i;i=o)if(o=i.nextSibling,cs(i)&&i.data.trim().length>0)n.textNodes.push(new La(e,i,n.styles));else if(ls(i))if(Ts(i)&&i.assignedNodes)i.assignedNodes().forEach((function(t){return rs(e,t,n,r)}));else{var a=is(e,i);a.styles.isVisible()&&(as(i,a,r)?a.flags|=4:ss(a.styles)&&(a.flags|=2),-1!==ns.indexOf(i.tagName)&&(a.flags|=8),n.elements.push(a),i.slot,i.shadowRoot?rs(e,i.shadowRoot,a,r):Ss(i)||ms(i)||Cs(i)||rs(e,i,a,r))}},is=function(e,t){return bs(t)?new Fa(e,t):vs(t)?new ja(e,t):ms(t)?new Qa(e,t):As(t)?new Va(e,t):hs(t)?new Ha(e,t):ps(t)?new Za(e,t):Cs(t)?new $a(e,t):Ss(t)?new es(e,t):Es(t)?new ts(e,t):new _o(e,t)},os=function(e,t){var n=is(e,t);return n.flags|=4,rs(e,t,n,n),n},as=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||gs(e)&&n.styles.isTransparent()},ss=function(e){return e.isPositioned()||e.isFloating()},cs=function(e){return e.nodeType===Node.TEXT_NODE},ls=function(e){return e.nodeType===Node.ELEMENT_NODE},ds=function(e){return ls(e)&&"undefined"!==typeof e.style&&!us(e)},us=function(e){return"object"===typeof e.className},As=function(e){return"LI"===e.tagName},hs=function(e){return"OL"===e.tagName},ps=function(e){return"INPUT"===e.tagName},fs=function(e){return"HTML"===e.tagName},ms=function(e){return"svg"===e.tagName},gs=function(e){return"BODY"===e.tagName},vs=function(e){return"CANVAS"===e.tagName},ys=function(e){return"VIDEO"===e.tagName},bs=function(e){return"IMG"===e.tagName},Es=function(e){return"IFRAME"===e.tagName},ws=function(e){return"STYLE"===e.tagName},_s=function(e){return"SCRIPT"===e.tagName},Ss=function(e){return"TEXTAREA"===e.tagName},Cs=function(e){return"SELECT"===e.tagName},Ts=function(e){return"SLOT"===e.tagName},Is=function(e){return e.tagName.indexOf("-")>0},Rs=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,i=!0;null!==n&&n.forEach((function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(i=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)}));var o=[];return i&&r.forEach((function(e){var n=t.counters[e.counter];o.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)})),o},e}(),xs={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Ns={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},Os={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},ks={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},Ps=function(e,t,n,r,i,o){return e<t||e>n?Gs(e,i,o.length>0):r.integers.reduce((function(t,n,i){for(;e>=n;)e-=n,t+=r.values[i];return t}),"")+o},Bs=function(e,t,n,r){var i="";do{n||e--,i=r(e)+i,e/=t}while(e*t>=t);return i},Ls=function(e,t,n,r,i){var o=n-t+1;return(e<0?"-":"")+(Bs(Math.abs(e),o,r,(function(e){return d(Math.floor(e%o)+t)}))+i)},Ds=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return Bs(Math.abs(e),r,!1,(function(e){return t[Math.floor(e%r)]}))+n},Us=1,Ms=2,Fs=4,js=8,Qs=function(e,t,n,r,i,o){if(e<-9999||e>9999)return Gs(e,4,i.length>0);var a=Math.abs(e),s=i;if(0===a)return t[0]+s;for(var c=0;a>0&&c<=4;c++){var l=a%10;0===l&&io(o,Us)&&""!==s?s=t[l]+s:l>1||1===l&&0===c||1===l&&1===c&&io(o,Ms)||1===l&&1===c&&io(o,Fs)&&e>100||1===l&&c>1&&io(o,js)?s=t[l]+(c>0?n[c-1]:"")+s:1===l&&c>0&&(s=n[c-1]+s),a=Math.floor(a/10)}return(e<0?r:"")+s},Vs="\u5341\u767e\u5343\u842c",Hs="\u62fe\u4f70\u4edf\u842c",zs="\u30de\u30a4\u30ca\u30b9",Ks="\ub9c8\uc774\ub108\uc2a4",Gs=function(e,t,n){var r=n?". ":"",i=n?"\u3001":"",o=n?", ":"",a=n?" ":"";switch(t){case 0:return"\u2022"+a;case 1:return"\u25e6"+a;case 2:return"\u25fe"+a;case 5:var s=Ls(e,48,57,!0,r);return s.length<4?"0"+s:s;case 4:return Ds(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",i);case 6:return Ps(e,1,3999,xs,3,r).toLowerCase();case 7:return Ps(e,1,3999,xs,3,r);case 8:return Ls(e,945,969,!1,r);case 9:return Ls(e,97,122,!1,r);case 10:return Ls(e,65,90,!1,r);case 11:return Ls(e,1632,1641,!0,r);case 12:case 49:return Ps(e,1,9999,Ns,3,r);case 35:return Ps(e,1,9999,Ns,3,r).toLowerCase();case 13:return Ls(e,2534,2543,!0,r);case 14:case 30:return Ls(e,6112,6121,!0,r);case 15:return Ds(e,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",i);case 16:return Ds(e,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",i);case 17:case 48:return Qs(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Vs,"\u8ca0",i,Ms|Fs|js);case 47:return Qs(e,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",Hs,"\u8ca0",i,Us|Ms|Fs|js);case 42:return Qs(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Vs,"\u8d1f",i,Ms|Fs|js);case 41:return Qs(e,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",Hs,"\u8d1f",i,Us|Ms|Fs|js);case 26:return Qs(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",zs,i,0);case 25:return Qs(e,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",zs,i,Us|Ms|Fs);case 31:return Qs(e,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Ks,o,Us|Ms|Fs);case 33:return Qs(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Ks,o,0);case 32:return Qs(e,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Ks,o,Us|Ms|Fs);case 18:return Ls(e,2406,2415,!0,r);case 20:return Ps(e,1,19999,ks,3,r);case 21:return Ls(e,2790,2799,!0,r);case 22:return Ls(e,2662,2671,!0,r);case 22:return Ps(e,1,10999,Os,3,r);case 23:return Ds(e,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return Ds(e,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return Ls(e,3302,3311,!0,r);case 28:return Ds(e,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",i);case 29:return Ds(e,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",i);case 34:return Ls(e,3792,3801,!0,r);case 37:return Ls(e,6160,6169,!0,r);case 38:return Ls(e,4160,4169,!0,r);case 39:return Ls(e,2918,2927,!0,r);case 40:return Ls(e,1776,1785,!0,r);case 43:return Ls(e,3046,3055,!0,r);case 44:return Ls(e,3174,3183,!0,r);case 45:return Ls(e,3664,3673,!0,r);case 46:return Ls(e,3872,3881,!0,r);default:return Ls(e,48,57,!0,r)}},Ws="data-html2canvas-ignore",qs=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new Rs,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,o=Xs(e,t);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,s=e.defaultView.pageYOffset,c=o.contentWindow,l=c.document,d=$s(o).then((function(){return r(n,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return this.scrolledElements.forEach(ic),c&&(c.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||c.scrollY===t.top&&c.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(c.scrollX-t.left,c.scrollY-t.top,0,0))),e=this.options.onclone,"undefined"===typeof(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Zs(l)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"===typeof e?[2,Promise.resolve().then((function(){return e(l,n)})).then((function(){return o}))]:[2,o]}}))}))}));return l.open(),l.write(nc(document.doctype)+"<html></html>"),rc(this.referenceElement.ownerDocument,a,s),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),d},e.prototype.createElementClone=function(e){if(wo(e,2),vs(e))return this.createCanvasClone(e);if(ys(e))return this.createVideoClone(e);if(ws(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return bs(t)&&(bs(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),Is(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return tc(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"===typeof t.cssText?e+t.cssText:e}),""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(Ut){if(this.context.logger.error("Unable to access cssRules property",Ut),"SecurityError"!==Ut.name)throw Ut}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(Ut){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var i=e.getContext("2d"),o=r.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var a=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(a){var s=a.getContextAttributes();!1===(null===s||void 0===s?void 0:s.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return r}catch(Ut){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(Ut){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){ls(t)&&(_s(t)||t.hasAttribute(Ws)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&ls(t)&&ws(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(ls(i)&&Ts(i)&&"function"===typeof i.assignedNodes){var o=i.assignedNodes();o.length&&o.forEach((function(e){return r.appendChildNode(t,e,n)}))}else this.appendChildNode(t,i,n)},e.prototype.cloneNode=function(e,t){if(cs(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&ls(e)&&(ds(e)||us(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var i=n.getComputedStyle(e),o=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&ds(r)&&(this.clonedReferenceElement=r),gs(r)&&dc(r);var s=this.counters.parse(new vo(this.context,i)),c=this.resolvePseudoContent(e,r,o,Go.BEFORE);Is(e)&&(t=!0),ys(e)||this.cloneChildNodes(e,r,t),c&&r.insertBefore(c,r.firstChild);var l=this.resolvePseudoContent(e,r,a,Go.AFTER);return l&&r.appendChild(l),this.counters.pop(s),(i&&(this.options.copyStyles||us(e))&&!Es(e)||t)&&tc(i,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(Ss(e)||Cs(e))&&(Ss(r)||Cs(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var i=this;if(n){var o=n.content,a=t.ownerDocument;if(a&&o&&"none"!==o&&"-moz-alt-content"!==o&&"none"!==n.display){this.counters.parse(new vo(this.context,n));var s=new go(this.context,n),c=a.createElement("html2canvaspseudoelement");tc(n,c),s.content.forEach((function(t){if(0===t.type)c.appendChild(a.createTextNode(t.value));else if(22===t.type){var n=a.createElement("img");n.src=t.value,n.style.opacity="1",c.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(Pn);r.length&&c.appendChild(a.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var o=t.values.filter(Un),l=o[0],d=o[1];if(l&&Pn(l)){var u=i.counters.getCounterValue(l.value),A=d&&Pn(d)?Si.parse(i.context,d.value):3;c.appendChild(a.createTextNode(Gs(u,A,!1)))}}else if("counters"===t.name){var h=t.values.filter(Un),p=(l=h[0],h[1]);if(d=h[2],l&&Pn(l)){var f=i.counters.getCounterValues(l.value),m=d&&Pn(d)?Si.parse(i.context,d.value):3,g=p&&0===p.type?p.value:"",v=f.map((function(e){return Gs(e,m,!1)})).join(g);c.appendChild(a.createTextNode(v))}}}else if(20===t.type)switch(t.value){case"open-quote":c.appendChild(a.createTextNode(uo(s.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(a.createTextNode(uo(s.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(a.createTextNode(t.value))}})),c.className=sc+" "+cc;var l=r===Go.BEFORE?" "+sc:" "+cc;return us(t)?t.className.baseValue+=l:t.className+=l,c}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Go||(Go={}));var Ys,Xs=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Ws,"true"),e.body.appendChild(n),n},Js=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},Zs=function(e){return Promise.all([].slice.call(e.images,0).map(Js))},$s=function(e){return new Promise((function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var i=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval((function(){i.body.childNodes.length>0&&"complete"===i.readyState&&(clearInterval(n),t(e))}),50)}}))},ec=["all","d","content"],tc=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===ec.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},nc=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},rc=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},ic=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},oc=":before",ac=":after",sc="___html2canvas___pseudoelement_before",cc="___html2canvas___pseudoelement_after",lc='{\n    content: "" !important;\n    display: none !important;\n}',dc=function(e){uc(e,"."+sc+oc+lc+"\n         ."+cc+ac+lc)},uc=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},Ac=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),hc=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:bc(e)||gc(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,a=this;return i(this,(function(i){switch(i.label){case 0:return t=Ac.isSameOrigin(e),n=!vc(e)&&!0===this._options.useCORS&&Ca.SUPPORT_CORS_IMAGES&&!t,r=!vc(e)&&!t&&!bc(e)&&"string"===typeof this._options.proxy&&Ca.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||vc(e)||bc(e)||r||n?(o=e,r?[4,this.proxy(o)]:[3,2]):[2];case 1:o=i.sent(),i.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(yc(o)||n)&&(r.crossOrigin="anonymous"),r.src=o,!0===r.complete&&setTimeout((function(){return e(r)}),500),a._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+a._options.imageTimeout+"ms) loading image")}),a._options.imageTimeout)}))];case 3:return[2,i.sent()]}}))}))},e.prototype.has=function(e){return"undefined"!==typeof this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise((function(i,o){var a=Ca.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(200===s.status)if("text"===a)i(s.response);else{var e=new FileReader;e.addEventListener("load",(function(){return i(e.result)}),!1),e.addEventListener("error",(function(e){return o(e)}),!1),e.readAsDataURL(s.response)}else o("Failed to proxy resource "+r+" with status code "+s.status)},s.onerror=o;var c=n.indexOf("?")>-1?"&":"?";if(s.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+a),"text"!==a&&s instanceof XMLHttpRequest&&(s.responseType=a),t._options.imageTimeout){var l=t._options.imageTimeout;s.timeout=l,s.ontimeout=function(){return o("Timed out ("+l+"ms) proxying "+r)}}s.send()}))},e}(),pc=/^data:image\/svg\+xml/i,fc=/^data:image\/.*;base64,/i,mc=/^data:image\/.*/i,gc=function(e){return Ca.SUPPORT_SVG_DRAWING||!Ec(e)},vc=function(e){return mc.test(e)},yc=function(e){return fc.test(e)},bc=function(e){return"blob"===e.substr(0,4)},Ec=function(e){return"svg"===e.substr(-3).toLowerCase()||pc.test(e)},wc=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),_c=function(e,t,n){return new wc(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},Sc=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=_c(this.start,this.startControl,t),i=_c(this.startControl,this.endControl,t),o=_c(this.endControl,this.end,t),a=_c(r,i,t),s=_c(i,o,t),c=_c(a,s,t);return n?new e(this.start,r,a,c):new e(c,s,o,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Cc=function(e){return 1===e.type},Tc=function(){function e(e){var t=e.styles,n=e.bounds,r=Gn(t.borderTopLeftRadius,n.width,n.height),i=r[0],o=r[1],a=Gn(t.borderTopRightRadius,n.width,n.height),s=a[0],c=a[1],l=Gn(t.borderBottomRightRadius,n.width,n.height),d=l[0],u=l[1],A=Gn(t.borderBottomLeftRadius,n.width,n.height),h=A[0],p=A[1],f=[];f.push((i+s)/n.width),f.push((h+d)/n.width),f.push((o+p)/n.height),f.push((c+u)/n.height);var m=Math.max.apply(Math,f);m>1&&(i/=m,o/=m,s/=m,c/=m,d/=m,u/=m,h/=m,p/=m);var g=n.width-s,v=n.height-u,y=n.width-d,b=n.height-p,E=t.borderTopWidth,w=t.borderRightWidth,_=t.borderBottomWidth,S=t.borderLeftWidth,C=Wn(t.paddingTop,e.bounds.width),T=Wn(t.paddingRight,e.bounds.width),I=Wn(t.paddingBottom,e.bounds.width),R=Wn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?Ic(n.left+S/3,n.top+E/3,i-S/3,o-E/3,Ys.TOP_LEFT):new wc(n.left+S/3,n.top+E/3),this.topRightBorderDoubleOuterBox=i>0||o>0?Ic(n.left+g,n.top+E/3,s-w/3,c-E/3,Ys.TOP_RIGHT):new wc(n.left+n.width-w/3,n.top+E/3),this.bottomRightBorderDoubleOuterBox=d>0||u>0?Ic(n.left+y,n.top+v,d-w/3,u-_/3,Ys.BOTTOM_RIGHT):new wc(n.left+n.width-w/3,n.top+n.height-_/3),this.bottomLeftBorderDoubleOuterBox=h>0||p>0?Ic(n.left+S/3,n.top+b,h-S/3,p-_/3,Ys.BOTTOM_LEFT):new wc(n.left+S/3,n.top+n.height-_/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?Ic(n.left+2*S/3,n.top+2*E/3,i-2*S/3,o-2*E/3,Ys.TOP_LEFT):new wc(n.left+2*S/3,n.top+2*E/3),this.topRightBorderDoubleInnerBox=i>0||o>0?Ic(n.left+g,n.top+2*E/3,s-2*w/3,c-2*E/3,Ys.TOP_RIGHT):new wc(n.left+n.width-2*w/3,n.top+2*E/3),this.bottomRightBorderDoubleInnerBox=d>0||u>0?Ic(n.left+y,n.top+v,d-2*w/3,u-2*_/3,Ys.BOTTOM_RIGHT):new wc(n.left+n.width-2*w/3,n.top+n.height-2*_/3),this.bottomLeftBorderDoubleInnerBox=h>0||p>0?Ic(n.left+2*S/3,n.top+b,h-2*S/3,p-2*_/3,Ys.BOTTOM_LEFT):new wc(n.left+2*S/3,n.top+n.height-2*_/3),this.topLeftBorderStroke=i>0||o>0?Ic(n.left+S/2,n.top+E/2,i-S/2,o-E/2,Ys.TOP_LEFT):new wc(n.left+S/2,n.top+E/2),this.topRightBorderStroke=i>0||o>0?Ic(n.left+g,n.top+E/2,s-w/2,c-E/2,Ys.TOP_RIGHT):new wc(n.left+n.width-w/2,n.top+E/2),this.bottomRightBorderStroke=d>0||u>0?Ic(n.left+y,n.top+v,d-w/2,u-_/2,Ys.BOTTOM_RIGHT):new wc(n.left+n.width-w/2,n.top+n.height-_/2),this.bottomLeftBorderStroke=h>0||p>0?Ic(n.left+S/2,n.top+b,h-S/2,p-_/2,Ys.BOTTOM_LEFT):new wc(n.left+S/2,n.top+n.height-_/2),this.topLeftBorderBox=i>0||o>0?Ic(n.left,n.top,i,o,Ys.TOP_LEFT):new wc(n.left,n.top),this.topRightBorderBox=s>0||c>0?Ic(n.left+g,n.top,s,c,Ys.TOP_RIGHT):new wc(n.left+n.width,n.top),this.bottomRightBorderBox=d>0||u>0?Ic(n.left+y,n.top+v,d,u,Ys.BOTTOM_RIGHT):new wc(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=h>0||p>0?Ic(n.left,n.top+b,h,p,Ys.BOTTOM_LEFT):new wc(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||o>0?Ic(n.left+S,n.top+E,Math.max(0,i-S),Math.max(0,o-E),Ys.TOP_LEFT):new wc(n.left+S,n.top+E),this.topRightPaddingBox=s>0||c>0?Ic(n.left+Math.min(g,n.width-w),n.top+E,g>n.width+w?0:Math.max(0,s-w),Math.max(0,c-E),Ys.TOP_RIGHT):new wc(n.left+n.width-w,n.top+E),this.bottomRightPaddingBox=d>0||u>0?Ic(n.left+Math.min(y,n.width-S),n.top+Math.min(v,n.height-_),Math.max(0,d-w),Math.max(0,u-_),Ys.BOTTOM_RIGHT):new wc(n.left+n.width-w,n.top+n.height-_),this.bottomLeftPaddingBox=h>0||p>0?Ic(n.left+S,n.top+Math.min(b,n.height-_),Math.max(0,h-S),Math.max(0,p-_),Ys.BOTTOM_LEFT):new wc(n.left+S,n.top+n.height-_),this.topLeftContentBox=i>0||o>0?Ic(n.left+S+R,n.top+E+C,Math.max(0,i-(S+R)),Math.max(0,o-(E+C)),Ys.TOP_LEFT):new wc(n.left+S+R,n.top+E+C),this.topRightContentBox=s>0||c>0?Ic(n.left+Math.min(g,n.width+S+R),n.top+E+C,g>n.width+S+R?0:s-S+R,c-(E+C),Ys.TOP_RIGHT):new wc(n.left+n.width-(w+T),n.top+E+C),this.bottomRightContentBox=d>0||u>0?Ic(n.left+Math.min(y,n.width-(S+R)),n.top+Math.min(v,n.height+E+C),Math.max(0,d-(w+T)),u-(_+I),Ys.BOTTOM_RIGHT):new wc(n.left+n.width-(w+T),n.top+n.height-(_+I)),this.bottomLeftContentBox=h>0||p>0?Ic(n.left+S+R,n.top+b,Math.max(0,h-(S+R)),p-(_+I),Ys.BOTTOM_LEFT):new wc(n.left+S+R,n.top+n.height-(_+I))}return e}();!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Ys||(Ys={}));var Ic=function(e,t,n,r,i){var o=(Math.sqrt(2)-1)/3*4,a=n*o,s=r*o,c=e+n,l=t+r;switch(i){case Ys.TOP_LEFT:return new Sc(new wc(e,l),new wc(e,l-s),new wc(c-a,t),new wc(c,t));case Ys.TOP_RIGHT:return new Sc(new wc(e,t),new wc(e+a,t),new wc(c,l-s),new wc(c,l));case Ys.BOTTOM_RIGHT:return new Sc(new wc(c,t),new wc(c,t+s),new wc(e+a,l),new wc(e,l));case Ys.BOTTOM_LEFT:default:return new Sc(new wc(c,l),new wc(c-a,l),new wc(e,t+s),new wc(e,t))}},Rc=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},xc=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Nc=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Oc=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),kc=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),Pc=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),Bc=function(e){return 0===e.type},Lc=function(e){return 1===e.type},Dc=function(e){return 2===e.type},Uc=function(e,t){return e.length===t.length&&e.some((function(e,n){return e===t[n]}))},Mc=function(e,t,n,r,i){return e.map((function(e,o){switch(o){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+i);case 3:return e.add(t,n+i)}return e}))},Fc=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),jc=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Tc(this.container),this.container.styles.opacity<1&&this.effects.push(new Pc(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new Oc(n,r,i))}if(0!==this.container.styles.overflowX){var o=Rc(this.curves),a=Nc(this.curves);Uc(o,a)?this.effects.push(new kc(o,6)):(this.effects.push(new kc(o,2)),this.effects.push(new kc(a,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var i=n.effects.filter((function(e){return!Lc(e)}));if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,i),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var o=Rc(n.curves),a=Nc(n.curves);Uc(o,a)||r.unshift(new kc(a,6))}}else r.unshift.apply(r,i);n=n.parent}return r.filter((function(t){return io(t.target,e)}))},e}(),Qc=function(e,t,n,r){e.container.elements.forEach((function(i){var o=io(i.flags,4),a=io(i.flags,2),s=new jc(i,e);io(i.styles.display,2048)&&r.push(s);var c=io(i.flags,8)?[]:r;if(o||a){var l=o||i.styles.isPositioned()?n:t,d=new Fc(s);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var A=0;l.negativeZIndex.some((function(e,t){return u>e.element.container.styles.zIndex.order?(A=t,!1):A>0})),l.negativeZIndex.splice(A,0,d)}else if(u>0){var h=0;l.positiveZIndex.some((function(e,t){return u>=e.element.container.styles.zIndex.order?(h=t+1,!1):h>0})),l.positiveZIndex.splice(h,0,d)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else i.styles.isFloating()?l.nonPositionedFloats.push(d):l.nonPositionedInlineLevel.push(d);Qc(s,d,o?d:n,c)}else i.styles.isInlineLevel()?t.inlineLevel.push(s):t.nonInlineLevel.push(s),Qc(s,t,n,c);io(i.flags,8)&&Vc(i,c)}))},Vc=function(e,t){for(var n=e instanceof Ha?e.start:1,r=e instanceof Ha&&e.reversed,i=0;i<t.length;i++){var o=t[i];o.container instanceof Va&&"number"===typeof o.container.value&&0!==o.container.value&&(n=o.container.value),o.listValue=Gs(n,o.container.styles.listStyleType,!0),n+=r?-1:1}},Hc=function(e){var t=new jc(e,null),n=new Fc(t),r=[];return Qc(t,n,n,r),Vc(t.container,r),n},zc=function(e,t){switch(t){case 0:return Yc(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Yc(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Yc(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Yc(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Kc=function(e,t){switch(t){case 0:return Yc(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Yc(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Yc(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Yc(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Gc=function(e,t){switch(t){case 0:return Yc(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Yc(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Yc(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Yc(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Wc=function(e,t){switch(t){case 0:return qc(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return qc(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return qc(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return qc(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},qc=function(e,t){var n=[];return Cc(e)?n.push(e.subdivide(.5,!1)):n.push(e),Cc(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Yc=function(e,t,n,r){var i=[];return Cc(e)?i.push(e.subdivide(.5,!1)):i.push(e),Cc(n)?i.push(n.subdivide(.5,!0)):i.push(n),Cc(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),Cc(t)?i.push(t.subdivide(.5,!1).reverse()):i.push(t),i},Xc=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Jc=function(e){var t=e.styles,n=e.bounds,r=Wn(t.paddingLeft,n.width),i=Wn(t.paddingRight,n.width),o=Wn(t.paddingTop,n.width),a=Wn(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,o+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+i),-(t.borderTopWidth+t.borderBottomWidth+o+a))},Zc=function(e,t){return 0===e?t.bounds:2===e?Jc(t):Xc(t)},$c=function(e,t){return 0===e?t.bounds:2===e?Jc(t):Xc(t)},el=function(e,t,n){var r=Zc(il(e.styles.backgroundOrigin,t),e),i=$c(il(e.styles.backgroundClip,t),e),o=rl(il(e.styles.backgroundSize,t),n,r),a=o[0],s=o[1],c=Gn(il(e.styles.backgroundPosition,t),r.width-a,r.height-s);return[ol(il(e.styles.backgroundRepeat,t),c,o,r,i),Math.round(r.left+c[0]),Math.round(r.top+c[1]),a,s]},tl=function(e){return Pn(e)&&e.value===Dr.AUTO},nl=function(e){return"number"===typeof e},rl=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=e[0],s=e[1];if(!a)return[0,0];if(Qn(a)&&s&&Qn(s))return[Wn(a,n.width),Wn(s,n.height)];var c=nl(o);if(Pn(a)&&(a.value===Dr.CONTAIN||a.value===Dr.COVER))return nl(o)?n.width/n.height<o!==(a.value===Dr.COVER)?[n.width,n.width/o]:[n.height*o,n.height]:[n.width,n.height];var l=nl(r),d=nl(i),u=l||d;if(tl(a)&&(!s||tl(s)))return l&&d?[r,i]:c||u?u&&c?[l?r:i*o,d?i:r/o]:[l?r:n.width,d?i:n.height]:[n.width,n.height];if(c){var A=0,h=0;return Qn(a)?A=Wn(a,n.width):Qn(s)&&(h=Wn(s,n.height)),tl(a)?A=h*o:s&&!tl(s)||(h=A/o),[A,h]}var p=null,f=null;if(Qn(a)?p=Wn(a,n.width):s&&Qn(s)&&(f=Wn(s,n.height)),null===p||s&&!tl(s)||(f=l&&d?p/r*i:n.height),null!==f&&tl(a)&&(p=l&&d?f/i*r:n.width),null!==p&&null!==f)return[p,f];throw new Error("Unable to calculate background-size for element")},il=function(e,t){var n=e[t];return"undefined"===typeof n?e[0]:n},ol=function(e,t,n,r,i){var o=t[0],a=t[1],s=n[0],c=n[1];switch(e){case 2:return[new wc(Math.round(r.left),Math.round(r.top+a)),new wc(Math.round(r.left+r.width),Math.round(r.top+a)),new wc(Math.round(r.left+r.width),Math.round(c+r.top+a)),new wc(Math.round(r.left),Math.round(c+r.top+a))];case 3:return[new wc(Math.round(r.left+o),Math.round(r.top)),new wc(Math.round(r.left+o+s),Math.round(r.top)),new wc(Math.round(r.left+o+s),Math.round(r.height+r.top)),new wc(Math.round(r.left+o),Math.round(r.height+r.top))];case 1:return[new wc(Math.round(r.left+o),Math.round(r.top+a)),new wc(Math.round(r.left+o+s),Math.round(r.top+a)),new wc(Math.round(r.left+o+s),Math.round(r.top+a+c)),new wc(Math.round(r.left+o),Math.round(r.top+a+c))];default:return[new wc(Math.round(i.left),Math.round(i.top)),new wc(Math.round(i.left+i.width),Math.round(i.top)),new wc(Math.round(i.left+i.width),Math.round(i.height+i.top)),new wc(Math.round(i.left),Math.round(i.height+i.top))]}},al="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",sl="Hidden Text",cl=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),r.src=al,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(sl)),n.appendChild(i),n.appendChild(r);var a=r.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(sl)),n.style.lineHeight="normal",r.style.verticalAlign="super";var s=r.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:a,middle:s}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return"undefined"===typeof this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),ll=function(){function e(e,t){this.context=e,this.options=t}return e}(),dl=1e4,ul=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new cl(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return t(n,e),n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},n.prototype.applyEffect=function(e){this.ctx.save(),Dc(e)&&(this.ctx.globalAlpha=e.opacity),Bc(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),Lc(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},n.prototype.renderNode=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return io(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):Na(e.text).reduce((function(t,i){return r.ctx.fillText(i,t,e.bounds.top+n),t+r.ctx.measureText(i).width}),e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),n=ml(e.fontFamily).join(", "),r=On(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,(function(){var n,r,o,a,s,c,l,d,u=this;return i(this,(function(i){return n=this.createFontStyle(t),r=n[0],o=n[1],a=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=this.fontMetrics.getMetrics(o,a),c=s.baseline,l=s.middle,d=t.paintOrder,e.textBounds.forEach((function(e){d.forEach((function(n){switch(n){case 0:u.ctx.fillStyle=ir(t.color),u.renderTextWithLetterSpacing(e,t.letterSpacing,c);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach((function(n){u.ctx.shadowColor=ir(n.color),u.ctx.shadowOffsetX=n.offsetX.number*u.options.scale,u.ctx.shadowOffsetY=n.offsetY.number*u.options.scale,u.ctx.shadowBlur=n.blur.number,u.renderTextWithLetterSpacing(e,t.letterSpacing,c)})),u.ctx.shadowColor="",u.ctx.shadowOffsetX=0,u.ctx.shadowOffsetY=0,u.ctx.shadowBlur=0),t.textDecorationLine.length&&(u.ctx.fillStyle=ir(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+c),e.bounds.width,1);break;case 2:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:u.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+l),e.bounds.width,1)}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(u.ctx.strokeStyle=ir(t.webkitTextStrokeColor),u.ctx.lineWidth=t.webkitTextStrokeWidth,u.ctx.lineJoin=window.chrome?"miter":"round",u.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+c)),u.ctx.strokeStyle="",u.ctx.lineWidth=0,u.ctx.lineJoin="miter"}}))})),[2]}))}))},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=Jc(e),i=Nc(t);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,(function(){var t,r,o,s,c,l,d,u,A,h,p,f,m,g,v,y,b,E;return i(this,(function(i){switch(i.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,o=t.styles,s=0,c=t.textNodes,i.label=1;case 1:return s<c.length?(l=c[s],[4,this.renderTextNode(l,o)]):[3,4];case 2:i.sent(),i.label=3;case 3:return s++,[3,1];case 4:if(!(t instanceof Fa))return[3,8];i.label=5;case 5:return i.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return v=i.sent(),this.renderReplacedElement(t,r,v),[3,8];case 7:return i.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof ja&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof Qa))return[3,12];i.label=9;case 9:return i.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return v=i.sent(),this.renderReplacedElement(t,r,v),[3,12];case 11:return i.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof ts&&t.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:d=i.sent(),t.width&&t.height&&this.ctx.drawImage(d,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),i.label=14;case 14:if(t instanceof Za&&(u=Math.min(t.bounds.width,t.bounds.height),t.type===qa?t.checked&&(this.ctx.save(),this.path([new wc(t.bounds.left+.39363*u,t.bounds.top+.79*u),new wc(t.bounds.left+.16*u,t.bounds.top+.5549*u),new wc(t.bounds.left+.27347*u,t.bounds.top+.44071*u),new wc(t.bounds.left+.39694*u,t.bounds.top+.5649*u),new wc(t.bounds.left+.72983*u,t.bounds.top+.23*u),new wc(t.bounds.left+.84*u,t.bounds.top+.34085*u),new wc(t.bounds.left+.39363*u,t.bounds.top+.79*u)]),this.ctx.fillStyle=ir(Ja),this.ctx.fill(),this.ctx.restore()):t.type===Ya&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+u/2,t.bounds.top+u/2,u/4,0,2*Math.PI,!0),this.ctx.fillStyle=ir(Ja),this.ctx.fill(),this.ctx.restore())),Al(t)&&t.value.length){switch(A=this.createFontStyle(o),b=A[0],h=A[1],p=this.fontMetrics.getMetrics(b,h).baseline,this.ctx.font=b,this.ctx.fillStyle=ir(o.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=pl(t.styles.textAlign),E=Jc(t),f=0,t.styles.textAlign){case 1:f+=E.width/2;break;case 2:f+=E.width}m=E.add(f,0,0,-E.height/2+1),this.ctx.save(),this.path([new wc(E.left,E.top),new wc(E.left+E.width,E.top),new wc(E.left+E.width,E.top+E.height),new wc(E.left,E.top+E.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ta(t.value,m),o.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!io(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(g=t.styles.listStyleImage).type)return[3,18];v=void 0,y=g.url,i.label=15;case 15:return i.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return v=i.sent(),this.ctx.drawImage(v,t.bounds.left-(v.width+10),t.bounds.top),[3,18];case 17:return i.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(b=this.createFontStyle(o)[0],this.ctx.font=b,this.ctx.fillStyle=ir(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",E=new a(t.bounds.left,t.bounds.top+Wn(t.styles.paddingTop,t.bounds.width),t.bounds.width,Ei(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ta(e.listValue,E),o.letterSpacing,Ei(o.lineHeight,o.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),i.label=20;case 20:return[2]}}))}))},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,a,s,c,l,d,u,A,h,p,f,m;return i(this,(function(i){switch(i.label){case 0:return io(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:i.sent(),t=0,n=e.negativeZIndex,i.label=2;case 2:return t<n.length?(m=n[t],[4,this.renderStack(m)]):[3,5];case 3:i.sent(),i.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:i.sent(),r=0,o=e.nonInlineLevel,i.label=7;case 7:return r<o.length?(m=o[r],[4,this.renderNode(m)]):[3,10];case 8:i.sent(),i.label=9;case 9:return r++,[3,7];case 10:a=0,s=e.nonPositionedFloats,i.label=11;case 11:return a<s.length?(m=s[a],[4,this.renderStack(m)]):[3,14];case 12:i.sent(),i.label=13;case 13:return a++,[3,11];case 14:c=0,l=e.nonPositionedInlineLevel,i.label=15;case 15:return c<l.length?(m=l[c],[4,this.renderStack(m)]):[3,18];case 16:i.sent(),i.label=17;case 17:return c++,[3,15];case 18:d=0,u=e.inlineLevel,i.label=19;case 19:return d<u.length?(m=u[d],[4,this.renderNode(m)]):[3,22];case 20:i.sent(),i.label=21;case 21:return d++,[3,19];case 22:A=0,h=e.zeroOrAutoZIndexOrTransformedOrOpacity,i.label=23;case 23:return A<h.length?(m=h[A],[4,this.renderStack(m)]):[3,26];case 24:i.sent(),i.label=25;case 25:return A++,[3,23];case 26:p=0,f=e.positiveZIndex,i.label=27;case 27:return p<f.length?(m=f[p],[4,this.renderStack(m)]):[3,30];case 28:i.sent(),i.label=29;case 29:return p++,[3,27];case 30:return[2]}}))}))},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach((function(e,n){var r=Cc(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),Cc(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var i=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return i.width=Math.max(1,t),i.height=Math.max(1,n),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),i},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,a,s;return i(this,(function(c){switch(c.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var o,a,s,c,l,d,u,A,h,p,f,m,g,v,y,b,E,w,_,S,C,T,I,R,x,N,O,k,P,B,L;return i(this,(function(i){switch(i.label){case 0:if(0!==n.type)return[3,5];o=void 0,a=n.url,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.context.cache.match(a)];case 2:return o=i.sent(),[3,4];case 3:return i.sent(),r.context.logger.error("Error loading background-image "+a),[3,4];case 4:return o&&(s=el(e,t,[o.width,o.height,o.width/o.height]),b=s[0],T=s[1],I=s[2],_=s[3],S=s[4],v=r.ctx.createPattern(r.resizeImage(o,_,S),"repeat"),r.renderRepeat(b,v,T,I)),[3,6];case 5:kr(n)?(c=el(e,t,[null,null,null]),b=c[0],T=c[1],I=c[2],_=c[3],S=c[4],l=vr(n.angle,_,S),d=l[0],u=l[1],A=l[2],h=l[3],p=l[4],(f=document.createElement("canvas")).width=_,f.height=S,m=f.getContext("2d"),g=m.createLinearGradient(u,h,A,p),mr(n.stops,d).forEach((function(e){return g.addColorStop(e.stop,ir(e.color))})),m.fillStyle=g,m.fillRect(0,0,_,S),_>0&&S>0&&(v=r.ctx.createPattern(f,"repeat"),r.renderRepeat(b,v,T,I))):Pr(n)&&(y=el(e,t,[null,null,null]),b=y[0],E=y[1],w=y[2],_=y[3],S=y[4],C=0===n.position.length?[zn]:n.position,T=Wn(C[0],_),I=Wn(C[C.length-1],S),R=Er(n,T,I,_,S),x=R[0],N=R[1],x>0&&N>0&&(O=r.ctx.createRadialGradient(E+T,w+I,0,E+T,w+I,x),mr(n.stops,2*x).forEach((function(e){return O.addColorStop(e.stop,ir(e.color))})),r.path(b),r.ctx.fillStyle=O,x!==N?(k=e.bounds.left+.5*e.bounds.width,P=e.bounds.top+.5*e.bounds.height,L=1/(B=N/x),r.ctx.save(),r.ctx.translate(k,P),r.ctx.transform(1,0,0,B,0,0),r.ctx.translate(-k,-P),r.ctx.fillRect(E,L*(w-P)+P,_,S*L),r.ctx.restore()):r.ctx.fill())),i.label=6;case 6:return t--,[2]}}))},r=this,o=0,a=e.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return o<a.length?(s=a[o],[5,n(s)]):[3,4];case 2:c.sent(),c.label=3;case 3:return o++,[3,1];case 4:return[2]}}))}))},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,(function(){return i(this,(function(r){return this.path(zc(n,t)),this.ctx.fillStyle=ir(e),this.ctx.fill(),[2]}))}))},n.prototype.renderDoubleBorder=function(e,t,n,o){return r(this,void 0,void 0,(function(){var r,a;return i(this,(function(i){switch(i.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,o)]:[3,2];case 1:return i.sent(),[2];case 2:return r=Kc(o,n),this.path(r),this.ctx.fillStyle=ir(e),this.ctx.fill(),a=Gc(o,n),this.path(a),this.ctx.fill(),[2]}}))}))},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,a,s,c,l,d=this;return i(this,(function(i){switch(i.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!rr(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],o=hl(il(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),rr(t.backgroundColor)||(this.ctx.fillStyle=ir(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:i.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){d.ctx.save();var n=Rc(e.curves),r=t.inset?0:dl,i=Mc(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(d.path(n),d.ctx.clip(),d.mask(i)):(d.mask(n),d.ctx.clip(),d.path(i)),d.ctx.shadowOffsetX=t.offsetX.number+r,d.ctx.shadowOffsetY=t.offsetY.number,d.ctx.shadowColor=ir(t.color),d.ctx.shadowBlur=t.blur.number,d.ctx.fillStyle=t.inset?ir(t.color):"rgba(0,0,0,1)",d.ctx.fill(),d.ctx.restore()})),i.label=2;case 2:a=0,s=0,c=r,i.label=3;case 3:return s<c.length?0!==(l=c[s]).style&&!rr(l.color)&&l.width>0?2!==l.style?[3,5]:[4,this.renderDashedDottedBorder(l.color,l.width,a,e.curves,2)]:[3,11]:[3,13];case 4:return i.sent(),[3,11];case 5:return 3!==l.style?[3,7]:[4,this.renderDashedDottedBorder(l.color,l.width,a,e.curves,3)];case 6:return i.sent(),[3,11];case 7:return 4!==l.style?[3,9]:[4,this.renderDoubleBorder(l.color,l.width,a,e.curves)];case 8:return i.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,a,e.curves)];case 10:i.sent(),i.label=11;case 11:a++,i.label=12;case 12:return s++,[3,3];case 13:return[2]}}))}))},n.prototype.renderDashedDottedBorder=function(e,t,n,o,a){return r(this,void 0,void 0,(function(){var r,s,c,l,d,u,A,h,p,f,m,g,v,y,b,E;return i(this,(function(i){return this.ctx.save(),r=Wc(o,n),s=zc(o,n),2===a&&(this.path(s),this.ctx.clip()),Cc(s[0])?(c=s[0].start.x,l=s[0].start.y):(c=s[0].x,l=s[0].y),Cc(s[1])?(d=s[1].end.x,u=s[1].end.y):(d=s[1].x,u=s[1].y),A=0===n||2===n?Math.abs(c-d):Math.abs(l-u),this.ctx.beginPath(),3===a?this.formatPath(r):this.formatPath(s.slice(0,2)),h=t<3?3*t:2*t,p=t<3?2*t:t,3===a&&(h=t,p=t),f=!0,A<=2*h?f=!1:A<=2*h+p?(h*=m=A/(2*h+p),p*=m):(g=Math.floor((A+p)/(h+p)),v=(A-g*h)/(g-1),p=(y=(A-(g+1)*h)/g)<=0||Math.abs(p-v)<Math.abs(p-y)?v:y),f&&(3===a?this.ctx.setLineDash([0,h+p]):this.ctx.setLineDash([h,p])),3===a?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=ir(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===a&&(Cc(s[0])&&(b=s[3],E=s[0],this.ctx.beginPath(),this.formatPath([new wc(b.end.x,b.end.y),new wc(E.start.x,E.start.y)]),this.ctx.stroke()),Cc(s[1])&&(b=s[1],E=s[2],this.ctx.beginPath(),this.formatPath([new wc(b.end.x,b.end.y),new wc(E.start.x,E.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},n.prototype.render=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ir(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=Hc(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}}))}))},n}(ll),Al=function(e){return e instanceof es||e instanceof $a||e instanceof Za&&e.type!==Ya&&e.type!==qa},hl=function(e,t){switch(e){case 0:return Rc(t);case 2:return xc(t);default:return Nc(t)}},pl=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},fl=["-apple-system","system-ui"],ml=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===fl.indexOf(e)})):e},gl=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return t(n,e),n.prototype.render=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=_a(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,vl(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ir(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},n}(ll),vl=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},yl=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,o([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,o([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,o([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,o([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),bl=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new yl({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new hc(this,t)}return e.instanceCount=1,e}(),El=function(e,t){return void 0===t&&(t={}),wl(e,t)};"undefined"!==typeof window&&Ac.setContext(window);var wl=function(e,t){return r(void 0,void 0,void 0,(function(){var r,o,l,d,u,A,h,p,f,m,g,v,y,b,E,w,_,S,C,T,I,R,x,N,O,k,P,B,L,D,U,M,F,j,Q,V,H,z;return i(this,(function(i){switch(i.label){case 0:if(!e||"object"!==typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(r=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(o=r.defaultView))throw new Error("Document is not attached to a Window");return l={allowTaint:null!==(R=t.allowTaint)&&void 0!==R&&R,imageTimeout:null!==(x=t.imageTimeout)&&void 0!==x?x:15e3,proxy:t.proxy,useCORS:null!==(N=t.useCORS)&&void 0!==N&&N},d=n({logging:null===(O=t.logging)||void 0===O||O,cache:t.cache},l),u={windowWidth:null!==(k=t.windowWidth)&&void 0!==k?k:o.innerWidth,windowHeight:null!==(P=t.windowHeight)&&void 0!==P?P:o.innerHeight,scrollX:null!==(B=t.scrollX)&&void 0!==B?B:o.pageXOffset,scrollY:null!==(L=t.scrollY)&&void 0!==L?L:o.pageYOffset},A=new a(u.scrollX,u.scrollY,u.windowWidth,u.windowHeight),h=new bl(d,A),p=null!==(D=t.foreignObjectRendering)&&void 0!==D&&D,f={allowTaint:null!==(U=t.allowTaint)&&void 0!==U&&U,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:p,copyStyles:p},h.logger.debug("Starting document clone with size "+A.width+"x"+A.height+" scrolled to "+-A.left+","+-A.top),m=new qs(h,e,f),(g=m.clonedReferenceElement)?[4,m.toIFrame(r,A)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return v=i.sent(),y=gs(g)||fs(g)?c(g.ownerDocument):s(h,g),b=y.width,E=y.height,w=y.left,_=y.top,S=_l(h,g,t.backgroundColor),C={canvas:t.canvas,backgroundColor:S,scale:null!==(F=null!==(M=t.scale)&&void 0!==M?M:o.devicePixelRatio)&&void 0!==F?F:1,x:(null!==(j=t.x)&&void 0!==j?j:0)+w,y:(null!==(Q=t.y)&&void 0!==Q?Q:0)+_,width:null!==(V=t.width)&&void 0!==V?V:Math.ceil(b),height:null!==(H=t.height)&&void 0!==H?H:Math.ceil(E)},p?(h.logger.debug("Document cloned, using foreign object rendering"),[4,new gl(h,C).render(g)]):[3,3];case 2:return T=i.sent(),[3,5];case 3:return h.logger.debug("Document cloned, element located at "+w+","+_+" with size "+b+"x"+E+" using computed rendering"),h.logger.debug("Starting DOM parsing"),I=os(h,g),S===I.styles.backgroundColor&&(I.styles.backgroundColor=Ar.TRANSPARENT),h.logger.debug("Starting renderer for element at "+C.x+","+C.y+" with size "+C.width+"x"+C.height),[4,new ul(h,C).render(I)];case 4:T=i.sent(),i.label=5;case 5:return(null===(z=t.removeContainer)||void 0===z||z)&&(qs.destroy(v)||h.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),h.logger.debug("Finished rendering"),[2,T]}}))}))},_l=function(e,t,n){var r=t.ownerDocument,i=r.documentElement?ur(e,getComputedStyle(r.documentElement).backgroundColor):Ar.TRANSPARENT,o=r.body?ur(e,getComputedStyle(r.body).backgroundColor):Ar.TRANSPARENT,a="string"===typeof n?ur(e,n):null===n?Ar.TRANSPARENT:4294967295;return t===r.documentElement?rr(i)?rr(o)?a:o:i:a};return El}()},5896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,c=e[s],l=s+1,d=e[l];if(0>o(c,n))l<i&&0>o(d,c)?(e[r]=d,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else{if(!(l<i&&0>o(d,n)))break e;e[r]=d,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],d=[],u=1,A=null,h=3,p=!1,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function E(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(l,t)}t=r(d)}}function w(e){if(m=!1,E(e),!f)if(null!==r(l))f=!0,S||(S=!0,_());else{var t=r(d);null!==t&&k(w,t.startTime-e)}}var _,S=!1,C=-1,T=5,I=-1;function R(){return!!g||!(t.unstable_now()-I<T)}function x(){if(g=!1,S){var e=t.unstable_now();I=e;var n=!0;try{e:{f=!1,m&&(m=!1,y(C),C=-1),p=!0;var o=h;try{t:{for(E(e),A=r(l);null!==A&&!(A.expirationTime>e&&R());){var a=A.callback;if("function"===typeof a){A.callback=null,h=A.priorityLevel;var s=a(A.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){A.callback=s,E(e),n=!0;break t}A===r(l)&&i(l),E(e)}else i(l);A=r(l)}if(null!==A)n=!0;else{var c=r(d);null!==c&&k(w,c.startTime-e),n=!1}}break e}finally{A=null,h=o,p=!1}n=void 0}}finally{n?_():S=!1}}}if("function"===typeof b)_=function(){b(x)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,O=N.port2;N.port1.onmessage=x,_=function(){O.postMessage(null)}}else _=function(){v(x,0)};function k(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(d,e),null===r(l)&&e===r(d)&&(m?(y(C),C=-1):m=!0,k(w,o-a))):(e.sortIndex=s,n(l,e),f||p||(f=!0,S||(S=!0,_()))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},6672:(e,t,n)=>{"use strict";var r=n(5043);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=c.T,n=a.p;try{if(c.T=null,a.p=2,e)return e()}finally{c.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=l(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=l(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=l(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=l(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return c.H.useFormState(e,t,n)},t.useFormStatus=function(){return c.H.useHostTransitionStatus()},t.version="19.1.0"},7004:(e,t,n)=>{"use strict";var r=n(8853),i=n(5043),o=n(7950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function c(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(c(e)!==e)throw Error(a(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var A=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),E=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var I=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var R=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var x=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}var O=Symbol.for("react.client.reference");function k(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===O?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case v:return"Profiler";case g:return"StrictMode";case _:return"Suspense";case S:return"SuspenseList";case I:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case E:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:k(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return k(e(t))}catch(n){}}return null}var P=Array.isArray,B=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},U=[],M=-1;function F(e){return{current:e}}function j(e){0>M||(e.current=U[M],U[M]=null,M--)}function Q(e,t){M++,U[M]=e.current,e.current=t}var V=F(null),H=F(null),z=F(null),K=F(null);function G(e,t){switch(Q(z,t),Q(H,e),Q(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?iu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ou(t=iu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(V),Q(V,e)}function W(){j(V),j(H),j(z)}function q(e){null!==e.memoizedState&&Q(K,e);var t=V.current,n=ou(t,e.type);t!==n&&(Q(H,e),Q(V,n))}function Y(e){H.current===e&&(j(V),j(H)),K.current===e&&(j(K),qu._currentValue=D)}var X=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,Z=r.unstable_cancelCallback,$=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,ae=r.unstable_LowPriority,se=r.unstable_IdlePriority,ce=r.log,le=r.unstable_setDisableYieldValue,de=null,ue=null;function Ae(e){if("function"===typeof ce&&le(e),ue&&"function"===typeof ue.setStrictMode)try{ue.setStrictMode(de,e)}catch(t){}}var he=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/fe|0)|0},pe=Math.log,fe=Math.LN2;var me=256,ge=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ye(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?i=ve(r):0!==(a&=s)?i=ve(a):n||0!==(n=s&~e)&&(i=ve(n)):0!==(s=r&~o)?i=ve(s):0!==a?i=ve(a):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&0!==(4194048&n))?t:i}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ee(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function we(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function _e(){var e=ge;return 0===(62914560&(ge<<=1))&&(ge=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Te(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-he(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ie(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-he(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Re(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ne(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:lA(e.type)}var Oe=Math.random().toString(36).slice(2),ke="__reactFiber$"+Oe,Pe="__reactProps$"+Oe,Be="__reactContainer$"+Oe,Le="__reactEvents$"+Oe,De="__reactListeners$"+Oe,Ue="__reactHandles$"+Oe,Me="__reactResources$"+Oe,Fe="__reactMarker$"+Oe;function je(e){delete e[ke],delete e[Pe],delete e[Le],delete e[De],delete e[Ue]}function Qe(e){var t=e[ke];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Be]||n[ke]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=yu(e);null!==e;){if(n=e[ke])return n;e=yu(e)}return t}n=(e=n).parentNode}return null}function Ve(e){if(e=e[ke]||e[Be]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function ze(e){var t=e[Me];return t||(t=e[Me]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Fe]=!0}var Ge=new Set,We={};function qe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(We[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Xe,Je,Ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$e={},et={};function tt(e,t,n){if(i=t,X.call(et,i)||!X.call($e,i)&&(Ze.test(i)?et[i]=!0:($e[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Xe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Je=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Je}var ot=!1;function at(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var c=a.split("\n"),l=s.split("\n");for(i=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(1!==r||1!==i)do{if(r--,0>--i||c[r]!==l[i]){var d="\n"+c[r].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=r&&0<=i);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function st(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return it("Activity");default:return""}}function ct(e){try{var t="";do{t+=st(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function lt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function At(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ht(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function ft(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function mt(e,t,n,r,i,o,a,s){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+lt(t)):e.value!==""+lt(t)&&(e.value=""+lt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,lt(t)):null!=n?vt(e,a,lt(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+lt(s):e.removeAttribute("name")}function gt(e,t,n,r,i,o,a,s){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return;n=null!=n?""+lt(n):"",t=null!=t?""+lt(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&ht(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function yt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+lt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+lt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+lt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Et(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(P(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=lt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function wt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _t=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||_t.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&St(e,i,r)}else for(var o in t)t.hasOwnProperty(o)&&St(e,o,t[o])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xt(e){return Rt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Nt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var kt=null,Pt=null;function Bt(e){var t=Ve(e);if(t&&(e=t.stateNode)){var n=e[Pe]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Pe]||null;if(!i)throw Error(a(90));mt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&At(r)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&yt(e,!!n.multiple,t,!1)}}}var Lt=!1;function Dt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==kt||null!==Pt)&&(Ql(),kt&&(t=kt,e=Pt,Pt=kt=null,Bt(t),e)))for(t=0;t<e.length;t++)Bt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Pe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Mt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ft=!1;if(Mt)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch(PA){Ft=!1}var Qt=null,Vt=null,Ht=null;function zt(){if(Ht)return Ht;var e,t,n=Vt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Ht=i.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Wt(){return!1}function qt(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Gt:Wt,this.isPropagationStopped=Wt,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Yt,Xt,Jt,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$t=qt(Zt),en=A({},Zt,{view:0,detail:0}),tn=qt(en),nn=A({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Yt=e.screenX-Jt.screenX,Xt=e.screenY-Jt.screenY):Xt=Yt=0,Jt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),rn=qt(nn),on=qt(A({},nn,{dataTransfer:0})),an=qt(A({},en,{relatedTarget:0})),sn=qt(A({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),cn=qt(A({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ln=qt(A({},Zt,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=An[e])&&!!t[e]}function pn(){return hn}var fn=qt(A({},en,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=qt(A({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=qt(A({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=qt(A({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),yn=qt(A({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=qt(A({},Zt,{newState:0,oldState:0})),En=[9,13,27,32],wn=Mt&&"CompositionEvent"in window,_n=null;Mt&&"documentMode"in document&&(_n=document.documentMode);var Sn=Mt&&"TextEvent"in window&&!_n,Cn=Mt&&(!wn||_n&&8<_n&&11>=_n),Tn=String.fromCharCode(32),In=!1;function Rn(e,t){switch(e){case"keyup":return-1!==En.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Nn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Pn(e,t,n,r){kt?Pt?Pt.push(r):Pt=[r]:kt=r,0<(t=zd(t,"onChange")).length&&(n=new $t("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bn=null,Ln=null;function Dn(e){Dd(e,0)}function Un(e){if(At(He(e)))return e}function Mn(e,t){if("change"===e)return t}var Fn=!1;if(Mt){var jn;if(Mt){var Qn="oninput"in document;if(!Qn){var Vn=document.createElement("div");Vn.setAttribute("oninput","return;"),Qn="function"===typeof Vn.oninput}jn=Qn}else jn=!1;Fn=jn&&(!document.documentMode||9<document.documentMode)}function Hn(){Bn&&(Bn.detachEvent("onpropertychange",zn),Ln=Bn=null)}function zn(e){if("value"===e.propertyName&&Un(Ln)){var t=[];Pn(t,Ln,e,Ot(e)),Dt(Dn,t)}}function Kn(e,t,n){"focusin"===e?(Hn(),Ln=n,(Bn=t).attachEvent("onpropertychange",zn)):"focusout"===e&&Hn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Ln)}function Wn(e,t){if("click"===e)return Un(t)}function qn(e,t){if("input"===e||"change"===e)return Un(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!X.call(t,i)||!Yn(e[i],t[i]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zn(e,t){var n,r=Jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jn(r)}}function $n(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?$n(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ht((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ht((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Mt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,or=null,ar=!1;function sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ht(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Xn(or,r)||(or=r,0<(r=zd(ir,"onSelect")).length&&(t=new $t("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var lr={animationend:cr("Animation","AnimationEnd"),animationiteration:cr("Animation","AnimationIteration"),animationstart:cr("Animation","AnimationStart"),transitionrun:cr("Transition","TransitionRun"),transitionstart:cr("Transition","TransitionStart"),transitioncancel:cr("Transition","TransitionCancel"),transitionend:cr("Transition","TransitionEnd")},dr={},ur={};function Ar(e){if(dr[e])return dr[e];if(!lr[e])return e;var t,n=lr[e];for(t in n)if(n.hasOwnProperty(t)&&t in ur)return dr[e]=n[t];return e}Mt&&(ur=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);var hr=Ar("animationend"),pr=Ar("animationiteration"),fr=Ar("animationstart"),mr=Ar("transitionrun"),gr=Ar("transitionstart"),vr=Ar("transitioncancel"),yr=Ar("transitionend"),br=new Map,Er="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){br.set(e,t),qe(t,[e])}Er.push("scrollEnd");var _r=new WeakMap;function Sr(e,t){if("object"===typeof e&&null!==e){var n=_r.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ct(t)},_r.set(e,t),t)}return{value:e,source:t,stack:ct(t)}}var Cr=[],Tr=0,Ir=0;function Rr(){for(var e=Tr,t=Ir=Tr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var i=Cr[t];Cr[t++]=null;var o=Cr[t];if(Cr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==o&&kr(n,i,o)}}function xr(e,t,n,r){Cr[Tr++]=e,Cr[Tr++]=t,Cr[Tr++]=n,Cr[Tr++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Nr(e,t,n,r){return xr(e,t,n,r),Pr(e)}function Or(e,t){return xr(e,null,null,t),Pr(e)}function kr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-he(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Pr(e){if(50<kl)throw kl=0,Pl=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Br={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(e,t,n,r){return new Lr(e,t,n,r)}function Ur(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mr(e,t){var n=e.alternate;return null===n?((n=Dr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jr(e,t,n,r,i,o){var s=0;if(r=e,"function"===typeof e)Ur(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,V.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case I:return(e=Dr(31,n,t,i)).elementType=I,e.lanes=o,e;case m:return Qr(n.children,i,o,t);case g:s=8,i|=24;break;case v:return(e=Dr(12,n,t,2|i)).elementType=v,e.lanes=o,e;case _:return(e=Dr(13,n,t,i)).elementType=_,e.lanes=o,e;case S:return(e=Dr(19,n,t,i)).elementType=S,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case y:case E:s=10;break e;case b:s=9;break e;case w:s=11;break e;case C:s=14;break e;case T:s=16,r=null;break e}s=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Dr(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Qr(e,t,n,r){return(e=Dr(7,e,r,t)).lanes=n,e}function Vr(e,t,n){return(e=Dr(6,e,null,t)).lanes=n,e}function Hr(e,t,n){return(t=Dr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var zr=[],Kr=0,Gr=null,Wr=0,qr=[],Yr=0,Xr=null,Jr=1,Zr="";function $r(e,t){zr[Kr++]=Wr,zr[Kr++]=Gr,Gr=e,Wr=t}function ei(e,t,n){qr[Yr++]=Jr,qr[Yr++]=Zr,qr[Yr++]=Xr,Xr=e;var r=Jr;e=Zr;var i=32-he(r)-1;r&=~(1<<i),n+=1;var o=32-he(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Jr=1<<32-he(t)+i|n<<i|r,Zr=o+e}else Jr=1<<o|n<<i|r,Zr=e}function ti(e){null!==e.return&&($r(e,1),ei(e,1,0))}function ni(e){for(;e===Gr;)Gr=zr[--Kr],zr[Kr]=null,Wr=zr[--Kr],zr[Kr]=null;for(;e===Xr;)Xr=qr[--Yr],qr[Yr]=null,Zr=qr[--Yr],qr[Yr]=null,Jr=qr[--Yr],qr[Yr]=null}var ri=null,ii=null,oi=!1,ai=null,si=!1,ci=Error(a(519));function li(e){throw fi(Sr(Error(a(418,"")),e)),ci}function di(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ke]=e,t[Pe]=r,n){case"dialog":Ud("cancel",t),Ud("close",t);break;case"iframe":case"object":case"embed":Ud("load",t);break;case"video":case"audio":for(n=0;n<Bd.length;n++)Ud(Bd[n],t);break;case"source":Ud("error",t);break;case"img":case"image":case"link":Ud("error",t),Ud("load",t);break;case"details":Ud("toggle",t);break;case"input":Ud("invalid",t),gt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ut(t);break;case"select":Ud("invalid",t);break;case"textarea":Ud("invalid",t),Et(t,r.value,r.defaultValue,r.children),ut(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Xd(t.textContent,n)?(null!=r.popover&&(Ud("beforetoggle",t),Ud("toggle",t)),null!=r.onScroll&&Ud("scroll",t),null!=r.onScrollEnd&&Ud("scrollend",t),null!=r.onClick&&(t.onclick=Jd),t=!0):t=!1,t||li(e)}function ui(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(si=!1);case 27:case 3:return void(si=!0);default:ri=ri.return}}function Ai(e){if(e!==ri)return!1;if(!oi)return ui(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||au(e.type,e.memoizedProps)),t=!t),t&&ii&&li(e),ui(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=gu(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,hu(e.type)?(e=vu,vu=null,ii=e):ii=n):ii=ri?gu(e.stateNode.nextSibling):null;return!0}function hi(){ii=ri=null,oi=!1}function pi(){var e=ai;return null!==e&&(null===yl?yl=e:yl.push.apply(yl,e),ai=null),e}function fi(e){null===ai?ai=[e]:ai.push(e)}var mi=F(null),gi=null,vi=null;function yi(e,t,n){Q(mi,t._currentValue),t._currentValue=n}function bi(e){e._currentValue=mi.current,j(mi)}function Ei(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wi(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=i.dependencies;if(null!==o){var s=i.child;o=o.firstContext;e:for(;null!==o;){var c=o;o=i;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ei(o.return,n,e),r||(s=null);break e}o=c.next}}else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),Ei(s,n,e),s=null}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===e){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}}function _i(e,t,n,r){e=null;for(var i=t,o=!1;null!==i;){if(!o)if(0!==(524288&i.flags))o=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var s=i.alternate;if(null===s)throw Error(a(387));if(null!==(s=s.memoizedProps)){var c=i.type;Yn(i.pendingProps.value,s.value)||(null!==e?e.push(c):e=[c])}}else if(i===K.current){if(null===(s=i.alternate))throw Error(a(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(qu):e=[qu])}i=i.return}null!==e&&wi(t,e,n,r),t.flags|=262144}function Si(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ci(e){gi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ti(e){return Ri(gi,e)}function Ii(e,t){return null===gi&&Ci(e),Ri(e,t)}function Ri(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(a(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var xi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ni=r.unstable_scheduleCallback,Oi=r.unstable_NormalPriority,ki={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pi(){return{controller:new xi,data:new Map,refCount:0}}function Bi(e){e.refCount--,0===e.refCount&&Ni(Oi,(function(){e.controller.abort()}))}var Li=null,Di=0,Ui=0,Mi=null;function Fi(){if(0===--Di&&null!==Li){null!==Mi&&(Mi.status="fulfilled");var e=Li;Li=null,Ui=0,Mi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var ji=B.S;B.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Li){var n=Li=[];Di=0,Ui=xd(),Mi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Di++,t.then(Fi,Fi)}(0,t),null!==ji&&ji(e,t)};var Qi=F(null);function Vi(){var e=Qi.current;return null!==e?e:rl.pooledCache}function Hi(e,t){Q(Qi,null===t?Qi.current:t.pool)}function zi(){var e=Vi();return null===e?null:{parent:ki._currentValue,pool:e}}var Ki=Error(a(460)),Gi=Error(a(474)),Wi=Error(a(542)),qi={then:function(){}};function Yi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xi(){}function Ji(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xi,Xi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xi,Xi);else{if(null!==(e=rl)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw Zi=t,Ki}}var Zi=null;function $i(){if(null===Zi)throw Error(a(459));var e=Zi;return Zi=null,e}function eo(e){if(e===Ki||e===Wi)throw Error(a(483))}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function io(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Pr(e),kr(e,null,n),t}return xr(e,r,t,n),Pr(e)}function ao(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ie(e,n)}}function so(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var co=!1;function lo(){if(co){if(null!==Mi)throw Mi}}function uo(e,t,n,r){co=!1;var i=e.updateQueue;to=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var c=s,l=c.next;c.next=null,null===a?o=l:a.next=l,a=c;var d=e.alternate;null!==d&&((s=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===s?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=c))}if(null!==o){var u=i.baseState;for(a=0,d=l=c=null,s=o;;){var h=-536870913&s.lane,p=h!==s.lane;if(p?(ol&h)===h:(r&h)===h){0!==h&&h===Ui&&(co=!0),null!==d&&(d=d.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var f=e,m=s;h=t;var g=n;switch(m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(g,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(g,u,h):f)||void 0===h)break e;u=A({},u,h);break e;case 2:to=!0}}null!==(h=s.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[h]:p.push(h))}else p={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(l=d=p,c=u):d=d.next=p,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===d&&(c=u),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=d,null===o&&(i.shared.lanes=0),hl|=a,e.lanes=a,e.memoizedState=u}}function Ao(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function ho(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ao(n[e],t)}var po=F(null),fo=F(0);function mo(e,t){Q(fo,e=ul),Q(po,t),ul=e|t.baseLanes}function go(){Q(fo,ul),Q(po,po.current)}function vo(){ul=fo.current,j(po),j(fo)}var yo=0,bo=null,Eo=null,wo=null,_o=!1,So=!1,Co=!1,To=0,Io=0,Ro=null,xo=0;function No(){throw Error(a(321))}function Oo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function ko(e,t,n,r,i,o){return yo=o,bo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,B.H=null===e||null===e.memoizedState?Ga:Wa,Co=!1,o=n(r,i),Co=!1,So&&(o=Bo(t,n,r,i)),Po(e),o}function Po(e){B.H=Ka;var t=null!==Eo&&null!==Eo.next;if(yo=0,wo=Eo=bo=null,_o=!1,Io=0,Ro=null,t)throw Error(a(300));null===e||Is||null!==(e=e.dependencies)&&Si(e)&&(Is=!0)}function Bo(e,t,n,r){bo=e;var i=0;do{if(So&&(Ro=null),Io=0,So=!1,25<=i)throw Error(a(301));if(i+=1,wo=Eo=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}B.H=qa,o=t(n,r)}while(So);return o}function Lo(){var e=B.H,t=e.useState()[0];return t="function"===typeof t.then?Qo(t):t,e=e.useState()[0],(null!==Eo?Eo.memoizedState:null)!==e&&(bo.flags|=1024),t}function Do(){var e=0!==To;return To=0,e}function Uo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Mo(e){if(_o){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}_o=!1}yo=0,wo=Eo=bo=null,So=!1,Io=To=0,Ro=null}function Fo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wo?bo.memoizedState=wo=e:wo=wo.next=e,wo}function jo(){if(null===Eo){var e=bo.alternate;e=null!==e?e.memoizedState:null}else e=Eo.next;var t=null===wo?bo.memoizedState:wo.next;if(null!==t)wo=t,Eo=e;else{if(null===e){if(null===bo.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Eo=e).memoizedState,baseState:Eo.baseState,baseQueue:Eo.baseQueue,queue:Eo.queue,next:null},null===wo?bo.memoizedState=wo=e:wo=wo.next=e}return wo}function Qo(e){var t=Io;return Io+=1,null===Ro&&(Ro=[]),e=Ji(Ro,e,t),t=bo,null===(null===wo?t.memoizedState:wo.next)&&(t=t.alternate,B.H=null===t||null===t.memoizedState?Ga:Wa),e}function Vo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Qo(e);if(e.$$typeof===E)return Ti(e)}throw Error(a(438,String(e)))}function Ho(e){var t=null,n=bo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=R;return t.index++,n}function zo(e,t){return"function"===typeof t?t(e):t}function Ko(e){return Go(jo(),Eo,e)}function Go(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,o=r.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}t.baseQueue=i=o,r.pending=null}if(o=e.baseState,null===i)e.memoizedState=o;else{var c=s=null,l=null,d=t=i.next,u=!1;do{var A=-536870913&d.lane;if(A!==d.lane?(ol&A)===A:(yo&A)===A){var h=d.revertLane;if(0===h)null!==l&&(l=l.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),A===Ui&&(u=!0);else{if((yo&h)===h){d=d.next,h===Ui&&(u=!0);continue}A={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===l?(c=l=A,s=o):l=l.next=A,bo.lanes|=h,hl|=h}A=d.action,Co&&n(o,A),o=d.hasEagerState?d.eagerState:n(o,A)}else h={lane:A,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===l?(c=l=h,s=o):l=l.next=h,bo.lanes|=A,hl|=A;d=d.next}while(null!==d&&d!==t);if(null===l?s=o:l.next=c,!Yn(o,e.memoizedState)&&(Is=!0,u&&null!==(n=Mi)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Wo(e){var t=jo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Yn(o,t.memoizedState)||(Is=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function qo(e,t,n){var r=bo,i=jo(),o=oi;if(o){if(void 0===n)throw Error(a(407));n=n()}else n=t();var s=!Yn((Eo||i).memoizedState,n);if(s&&(i.memoizedState=n,Is=!0),i=i.queue,ga(2048,8,Jo.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||null!==wo&&1&wo.memoizedState.tag){if(r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Xo.bind(null,r,i,n,t),null),null===rl)throw Error(a(349));o||0!==(124&yo)||Yo(r,t,n)}return n}function Yo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xo(e,t,n,r){t.value=n,t.getSnapshot=r,Zo(t)&&$o(e)}function Jo(e,t,n){return n((function(){Zo(t)&&$o(e)}))}function Zo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function $o(e){var t=Or(e,2);null!==t&&Dl(t,e,2)}function ea(e){var t=Fo();if("function"===typeof e){var n=e;if(e=n(),Co){Ae(!0);try{n()}finally{Ae(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:e},t}function ta(e,t,n,r){return e.baseState=n,Go(e,Eo,"function"===typeof r?r:zo)}function na(e,t,n,r,i){if(Va(e))throw Error(a(485));if(null!==(e=t.action)){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==B.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,ra(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ra(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=B.T,a={};B.T=a;try{var s=n(i,r),c=B.S;null!==c&&c(a,s),ia(e,t,s)}catch(l){aa(e,t,l)}finally{B.T=o}}else try{ia(e,t,o=n(i,r))}catch(d){aa(e,t,d)}}function ia(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){oa(e,t,n)}),(function(n){return aa(e,t,n)})):oa(e,t,n)}function oa(e,t,n){t.status="fulfilled",t.value=n,sa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ra(e,n)))}function aa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,sa(t),t=t.next}while(t!==r)}e.action=null}function sa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ca(e,t){return t}function la(e,t){if(oi){var n=rl.formState;if(null!==n){e:{var r=bo;if(oi){if(ii){t:{for(var i=ii,o=si;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=gu(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){ii=gu(i.nextSibling),r="F!"===i.data;break e}}li(r)}r=!1}r&&(t=n[0])}}return(n=Fo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:t},n.queue=r,n=Fa.bind(null,bo,r),r.dispatch=n,r=ea(!1),o=Qa.bind(null,bo,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Fo()).queue=i,n=na.bind(null,bo,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function da(e){return ua(jo(),Eo,e)}function ua(e,t,n){if(t=Go(e,t,ca)[0],e=Ko(zo)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Qo(t)}catch(a){if(a===Ki)throw Wi;throw a}else r=t;var i=(t=jo()).queue,o=i.dispatch;return n!==t.memoizedState&&(bo.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Aa.bind(null,i,n),null)),[r,o,e]}function Aa(e,t){e.action=t}function ha(e){var t=jo(),n=Eo;if(null!==n)return ua(t,n,e);jo(),t=t.memoizedState;var r=(n=jo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function pa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function fa(){return jo().memoizedState}function ma(e,t,n,r){var i=Fo();r=void 0===r?null:r,bo.flags|=e,i.memoizedState=pa(1|t,{destroy:void 0,resource:void 0},n,r)}function ga(e,t,n,r){var i=jo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==Eo&&null!==r&&Oo(r,Eo.memoizedState.deps)?i.memoizedState=pa(t,o,n,r):(bo.flags|=e,i.memoizedState=pa(1|t,o,n,r))}function va(e,t){ma(8390656,8,e,t)}function ya(e,t){ga(2048,8,e,t)}function ba(e,t){return ga(4,2,e,t)}function Ea(e,t){return ga(4,4,e,t)}function wa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function _a(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4,4,wa.bind(null,t,e),n)}function Sa(){}function Ca(e,t){var n=jo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Oo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ta(e,t){var n=jo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Oo(t,r[1]))return r[0];if(r=e(),Co){Ae(!0);try{e()}finally{Ae(!1)}}return n.memoizedState=[r,t],r}function Ia(e,t,n){return void 0===n||0!==(1073741824&yo)?e.memoizedState=t:(e.memoizedState=n,e=Ll(),bo.lanes|=e,hl|=e,n)}function Ra(e,t,n,r){return Yn(n,t)?n:null!==po.current?(e=Ia(e,n,r),Yn(e,t)||(Is=!0),e):0===(42&yo)?(Is=!0,e.memoizedState=n):(e=Ll(),bo.lanes|=e,hl|=e,t)}function xa(e,t,n,r,i){var o=L.p;L.p=0!==o&&8>o?o:8;var a=B.T,s={};B.T=s,Qa(e,!1,t,n);try{var c=i(),l=B.S;if(null!==l&&l(s,c),null!==c&&"object"===typeof c&&"function"===typeof c.then)ja(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(c,r),Bl());else ja(e,t,r,Bl())}catch(d){ja(e,t,{then:function(){},status:"rejected",reason:d},Bl())}finally{L.p=o,B.T=a}}function Na(){}function Oa(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=ka(e).queue;xa(e,i,t,D,null===n?Na:function(){return Pa(e),n(r)})}function ka(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Pa(e){ja(e,ka(e).next.queue,{},Bl())}function Ba(){return Ti(qu)}function La(){return jo().memoizedState}function Da(){return jo().memoizedState}function Ua(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Bl(),r=oo(t,e=io(n),n);return null!==r&&(Dl(r,t,n),ao(r,t,n)),t={cache:Pi()},void(e.payload=t)}t=t.return}}function Ma(e,t,n){var r=Bl();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Va(e)?Ha(t,n):null!==(n=Nr(e,t,n,r))&&(Dl(n,e,r),za(n,t,r))}function Fa(e,t,n){ja(e,t,n,Bl())}function ja(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Va(e))Ha(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Yn(s,a))return xr(e,t,i,0),null===rl&&Rr(),!1}catch(c){}if(null!==(n=Nr(e,t,i,r)))return Dl(n,e,r),za(n,t,r),!0}return!1}function Qa(e,t,n,r){if(r={lane:2,revertLane:xd(),action:r,hasEagerState:!1,eagerState:null,next:null},Va(e)){if(t)throw Error(a(479))}else null!==(t=Nr(e,n,r,2))&&Dl(t,e,2)}function Va(e){var t=e.alternate;return e===bo||null!==t&&t===bo}function Ha(e,t){So=_o=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function za(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ie(e,n)}}var Ka={readContext:Ti,use:Vo,useCallback:No,useContext:No,useEffect:No,useImperativeHandle:No,useLayoutEffect:No,useInsertionEffect:No,useMemo:No,useReducer:No,useRef:No,useState:No,useDebugValue:No,useDeferredValue:No,useTransition:No,useSyncExternalStore:No,useId:No,useHostTransitionStatus:No,useFormState:No,useActionState:No,useOptimistic:No,useMemoCache:No,useCacheRefresh:No},Ga={readContext:Ti,use:Vo,useCallback:function(e,t){return Fo().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ma(4194308,4,wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ma(4194308,4,e,t)},useInsertionEffect:function(e,t){ma(4,2,e,t)},useMemo:function(e,t){var n=Fo();t=void 0===t?null:t;var r=e();if(Co){Ae(!0);try{e()}finally{Ae(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Fo();if(void 0!==n){var i=n(t);if(Co){Ae(!0);try{n(t)}finally{Ae(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Ma.bind(null,bo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Fo().memoizedState=e},useState:function(e){var t=(e=ea(e)).queue,n=Fa.bind(null,bo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Sa,useDeferredValue:function(e,t){return Ia(Fo(),e,t)},useTransition:function(){var e=ea(!1);return e=xa.bind(null,bo,e.queue,!0,!1),Fo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bo,i=Fo();if(oi){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===rl)throw Error(a(349));0!==(124&ol)||Yo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,va(Jo.bind(null,r,o,e),[e]),r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Xo.bind(null,r,o,n,t),null),n},useId:function(){var e=Fo(),t=rl.identifierPrefix;if(oi){var n=Zr;t="\xab"+t+"R"+(n=(Jr&~(1<<32-he(Jr)-1)).toString(32)+n),0<(n=To++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=xo++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ba,useFormState:la,useActionState:la,useOptimistic:function(e){var t=Fo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Qa.bind(null,bo,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ho,useCacheRefresh:function(){return Fo().memoizedState=Ua.bind(null,bo)}},Wa={readContext:Ti,use:Vo,useCallback:Ca,useContext:Ti,useEffect:ya,useImperativeHandle:_a,useInsertionEffect:ba,useLayoutEffect:Ea,useMemo:Ta,useReducer:Ko,useRef:fa,useState:function(){return Ko(zo)},useDebugValue:Sa,useDeferredValue:function(e,t){return Ra(jo(),Eo.memoizedState,e,t)},useTransition:function(){var e=Ko(zo)[0],t=jo().memoizedState;return["boolean"===typeof e?e:Qo(e),t]},useSyncExternalStore:qo,useId:La,useHostTransitionStatus:Ba,useFormState:da,useActionState:da,useOptimistic:function(e,t){return ta(jo(),0,e,t)},useMemoCache:Ho,useCacheRefresh:Da},qa={readContext:Ti,use:Vo,useCallback:Ca,useContext:Ti,useEffect:ya,useImperativeHandle:_a,useInsertionEffect:ba,useLayoutEffect:Ea,useMemo:Ta,useReducer:Wo,useRef:fa,useState:function(){return Wo(zo)},useDebugValue:Sa,useDeferredValue:function(e,t){var n=jo();return null===Eo?Ia(n,e,t):Ra(n,Eo.memoizedState,e,t)},useTransition:function(){var e=Wo(zo)[0],t=jo().memoizedState;return["boolean"===typeof e?e:Qo(e),t]},useSyncExternalStore:qo,useId:La,useHostTransitionStatus:Ba,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=jo();return null!==Eo?ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ho,useCacheRefresh:Da},Ya=null,Xa=0;function Ja(e){var t=Xa;return Xa+=1,null===Ya&&(Ya=[]),Ji(Ya,e,t)}function Za(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function $a(e,t){if(t.$$typeof===h)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function es(e){return(0,e._init)(e._payload)}function ts(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Mr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Vr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===m?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===T&&es(o)===t.type)?(Za(t=i(t,n.props),n),t.return=e,t):(Za(t=jr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,o){return null===t||7!==t.tag?((t=Qr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function A(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Vr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Za(n=jr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=Hr(t,e.mode,n)).return=e,t;case T:return A(e,t=(0,t._init)(t._payload),n)}if(P(t)||N(t))return(t=Qr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return A(e,Ja(t),n);if(t.$$typeof===E)return A(e,Ii(e,t),n);$a(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?l(e,t,n,r):null;case f:return n.key===i?d(e,t,n,r):null;case T:return h(e,t,n=(i=n._init)(n._payload),r)}if(P(n)||N(n))return null!==i?null:u(e,t,n,r,null);if("function"===typeof n.then)return h(e,t,Ja(n),r);if(n.$$typeof===E)return h(e,t,Ii(e,n),r);$a(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case f:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return g(e,t,n,r=(0,r._init)(r._payload),i)}if(P(r)||N(r))return u(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return g(e,t,n,Ja(r),i);if(r.$$typeof===E)return g(e,t,n,Ii(t,r),i);$a(t,r)}return null}function v(c,l,d,u){if("object"===typeof d&&null!==d&&d.type===m&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case p:e:{for(var y=d.key;null!==l;){if(l.key===y){if((y=d.type)===m){if(7===l.tag){n(c,l.sibling),(u=i(l,d.props.children)).return=c,c=u;break e}}else if(l.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===T&&es(y)===l.type){n(c,l.sibling),Za(u=i(l,d.props),d),u.return=c,c=u;break e}n(c,l);break}t(c,l),l=l.sibling}d.type===m?((u=Qr(d.props.children,c.mode,u,d.key)).return=c,c=u):(Za(u=jr(d.type,d.key,d.props,null,c.mode,u),d),u.return=c,c=u)}return s(c);case f:e:{for(y=d.key;null!==l;){if(l.key===y){if(4===l.tag&&l.stateNode.containerInfo===d.containerInfo&&l.stateNode.implementation===d.implementation){n(c,l.sibling),(u=i(l,d.children||[])).return=c,c=u;break e}n(c,l);break}t(c,l),l=l.sibling}(u=Hr(d,c.mode,u)).return=c,c=u}return s(c);case T:return v(c,l,d=(y=d._init)(d._payload),u)}if(P(d))return function(i,a,s,c){for(var l=null,d=null,u=a,p=a=0,f=null;null!==u&&p<s.length;p++){u.index>p?(f=u,u=null):f=u.sibling;var m=h(i,u,s[p],c);if(null===m){null===u&&(u=f);break}e&&u&&null===m.alternate&&t(i,u),a=o(m,a,p),null===d?l=m:d.sibling=m,d=m,u=f}if(p===s.length)return n(i,u),oi&&$r(i,p),l;if(null===u){for(;p<s.length;p++)null!==(u=A(i,s[p],c))&&(a=o(u,a,p),null===d?l=u:d.sibling=u,d=u);return oi&&$r(i,p),l}for(u=r(u);p<s.length;p++)null!==(f=g(u,i,p,s[p],c))&&(e&&null!==f.alternate&&u.delete(null===f.key?p:f.key),a=o(f,a,p),null===d?l=f:d.sibling=f,d=f);return e&&u.forEach((function(e){return t(i,e)})),oi&&$r(i,p),l}(c,l,d,u);if(N(d)){if("function"!==typeof(y=N(d)))throw Error(a(150));return function(i,s,c,l){if(null==c)throw Error(a(151));for(var d=null,u=null,p=s,f=s=0,m=null,v=c.next();null!==p&&!v.done;f++,v=c.next()){p.index>f?(m=p,p=null):m=p.sibling;var y=h(i,p,v.value,l);if(null===y){null===p&&(p=m);break}e&&p&&null===y.alternate&&t(i,p),s=o(y,s,f),null===u?d=y:u.sibling=y,u=y,p=m}if(v.done)return n(i,p),oi&&$r(i,f),d;if(null===p){for(;!v.done;f++,v=c.next())null!==(v=A(i,v.value,l))&&(s=o(v,s,f),null===u?d=v:u.sibling=v,u=v);return oi&&$r(i,f),d}for(p=r(p);!v.done;f++,v=c.next())null!==(v=g(p,i,f,v.value,l))&&(e&&null!==v.alternate&&p.delete(null===v.key?f:v.key),s=o(v,s,f),null===u?d=v:u.sibling=v,u=v);return e&&p.forEach((function(e){return t(i,e)})),oi&&$r(i,f),d}(c,l,d=y.call(d),u)}if("function"===typeof d.then)return v(c,l,Ja(d),u);if(d.$$typeof===E)return v(c,l,Ii(c,d),u);$a(c,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==l&&6===l.tag?(n(c,l.sibling),(u=i(l,d)).return=c,c=u):(n(c,l),(u=Vr(d,c.mode,u)).return=c,c=u),s(c)):n(c,l)}return function(e,t,n,r){try{Xa=0;var i=v(e,t,n,r);return Ya=null,i}catch(a){if(a===Ki||a===Wi)throw a;var o=Dr(29,a,null,e.mode);return o.lanes=r,o.return=e,o}}}var ns=ts(!0),rs=ts(!1),is=F(null),os=null;function as(e){var t=e.alternate;Q(ds,1&ds.current),Q(is,e),null===os&&(null===t||null!==po.current||null!==t.memoizedState)&&(os=e)}function ss(e){if(22===e.tag){if(Q(ds,ds.current),Q(is,e),null===os){var t=e.alternate;null!==t&&null!==t.memoizedState&&(os=e)}}else cs()}function cs(){Q(ds,ds.current),Q(is,is.current)}function ls(e){j(is),os===e&&(os=null),j(ds)}var ds=F(0);function us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||mu(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function As(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:A({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var hs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Bl(),i=io(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Dl(t,e,r),ao(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Bl(),i=io(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Dl(t,e,r),ao(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Bl(),r=io(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=oo(e,r,n))&&(Dl(t,e,n),ao(t,e,n))}};function ps(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(i,o))}function fs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hs.enqueueReplaceState(t,t.state,null)}function ms(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=A({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var gs="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function vs(e){gs(e)}function ys(e){console.error(e)}function bs(e){gs(e)}function Es(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function ws(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function _s(e,t,n){return(n=io(n)).tag=3,n.payload={element:null},n.callback=function(){Es(e,t)},n}function Ss(e){return(e=io(e)).tag=3,e}function Cs(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){ws(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){ws(t,n,r),"function"!==typeof i&&(null===Sl?Sl=new Set([this]):Sl.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ts=Error(a(461)),Is=!1;function Rs(e,t,n,r){t.child=null===e?rs(t,null,n,r):ns(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Ci(t),r=ko(e,t,n,a,o,i),s=Do(),null===e||Is?(oi&&s&&ti(t),t.flags|=1,Rs(e,t,r,i),t.child):(Uo(e,t,i),Ys(e,t,i))}function Ns(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ur(o)||void 0!==o.defaultProps||null!==n.compare?((e=jr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Os(e,t,o,r,i))}if(o=e.child,!Xs(e,i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(a,r)&&e.ref===t.ref)return Ys(e,t,i)}return t.flags|=1,(e=Mr(o,r)).ref=t.ref,e.return=t,t.child=e}function Os(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Xn(o,r)&&e.ref===t.ref){if(Is=!1,t.pendingProps=r=o,!Xs(e,i))return t.lanes=e.lanes,Ys(e,t,i);0!==(131072&e.flags)&&(Is=!0)}}return Ls(e,t,n,r,i)}function ks(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Ps(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ps(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hi(0,null!==o?o.cachePool:null),null!==o?mo(t,o):go(),ss(t)}else null!==o?(Hi(0,o.cachePool),mo(t,o),cs(),t.memoizedState=null):(null!==e&&Hi(0,null),go(),cs());return Rs(e,t,i,n),t.child}function Ps(e,t,n,r){var i=Vi();return i=null===i?null:{parent:ki._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Hi(0,null),go(),ss(t),null!==e&&_i(e,t,r,!0),null}function Bs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ls(e,t,n,r,i){return Ci(t),n=ko(e,t,n,r,void 0,i),r=Do(),null===e||Is?(oi&&r&&ti(t),t.flags|=1,Rs(e,t,n,i),t.child):(Uo(e,t,i),Ys(e,t,i))}function Ds(e,t,n,r,i,o){return Ci(t),t.updateQueue=null,n=Bo(t,r,n,i),Po(e),r=Do(),null===e||Is?(oi&&r&&ti(t),t.flags|=1,Rs(e,t,n,o),t.child):(Uo(e,t,o),Ys(e,t,o))}function Us(e,t,n,r,i){if(Ci(t),null===t.stateNode){var o=Br,a=n.contextType;"object"===typeof a&&null!==a&&(o=Ti(a)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=hs,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},no(t),a=n.contextType,o.context="object"===typeof a&&null!==a?Ti(a):Br,o.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(As(t,n,a,r),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(a=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&hs.enqueueReplaceState(o,o.state,null),uo(t,r,o,i),lo(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,c=ms(n,s);o.props=c;var l=o.context,d=n.contextType;a=Br,"object"===typeof d&&null!==d&&(a=Ti(d));var u=n.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s||l!==a)&&fs(t,o,r,a),to=!1;var A=t.memoizedState;o.state=A,uo(t,r,o,i),lo(),l=t.memoizedState,s||A!==l||to?("function"===typeof u&&(As(t,n,u,r),l=t.memoizedState),(c=to||ps(t,n,c,r,A,l,a))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=a,r=c):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),d=ms(n,a=t.memoizedProps),o.props=d,u=t.pendingProps,A=o.context,l=n.contextType,c=Br,"object"===typeof l&&null!==l&&(c=Ti(l)),(l="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==u||A!==c)&&fs(t,o,r,c),to=!1,A=t.memoizedState,o.state=A,uo(t,r,o,i),lo();var h=t.memoizedState;a!==u||A!==h||to||null!==e&&null!==e.dependencies&&Si(e.dependencies)?("function"===typeof s&&(As(t,n,s,r),h=t.memoizedState),(d=to||ps(t,n,d,r,A,h,c)||null!==e&&null!==e.dependencies&&Si(e.dependencies))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=d):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Bs(e,t),r=0!==(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=ns(t,e.child,null,i),t.child=ns(t,null,n,i)):Rs(e,t,n,i),t.memoizedState=o.state,e=t.child):e=Ys(e,t,i),e}function Ms(e,t,n,r){return hi(),t.flags|=256,Rs(e,t,n,r),t.child}var Fs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function js(e){return{baseLanes:e,cachePool:zi()}}function Qs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=ml),e}function Vs(e,t,n){var r,i=t.pendingProps,o=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ds.current)),r&&(o=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(oi){if(o?as(t):cs(),oi){var c,l=ii;if(c=l){e:{for(c=l,l=si;8!==c.nodeType;){if(!l){l=null;break e}if(null===(c=gu(c.nextSibling))){l=null;break e}}l=c}null!==l?(t.memoizedState={dehydrated:l,treeContext:null!==Xr?{id:Jr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},(c=Dr(18,null,null,0)).stateNode=l,c.return=t,t.child=c,ri=t,ii=null,c=!0):c=!1}c||li(t)}if(null!==(l=t.memoizedState)&&null!==(l=l.dehydrated))return mu(l)?t.lanes=32:t.lanes=536870912,null;ls(t)}return l=i.children,i=i.fallback,o?(cs(),l=zs({mode:"hidden",children:l},o=t.mode),i=Qr(i,o,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(o=t.child).memoizedState=js(n),o.childLanes=Qs(e,r,n),t.memoizedState=Fs,i):(as(t),Hs(t,l))}if(null!==(c=e.memoizedState)&&null!==(l=c.dehydrated)){if(s)256&t.flags?(as(t),t.flags&=-257,t=Ks(e,t,n)):null!==t.memoizedState?(cs(),t.child=e.child,t.flags|=128,t=null):(cs(),o=i.fallback,l=t.mode,i=zs({mode:"visible",children:i.children},l),(o=Qr(o,l,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,ns(t,e.child,null,n),(i=t.child).memoizedState=js(n),i.childLanes=Qs(e,r,n),t.memoizedState=Fs,t=o);else if(as(t),mu(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var d=r.dgst;r=d,(i=Error(a(419))).stack="",i.digest=r,fi({value:i,source:null,stack:null}),t=Ks(e,t,n)}else if(Is||_i(e,t,n,!1),r=0!==(n&e.childLanes),Is||r){if(null!==(r=rl)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Re(i))&(r.suspendedLanes|n))?0:i)&&i!==c.retryLane))throw c.retryLane=i,Or(e,i),Dl(r,e,i),Ts;"$?"===l.data||Wl(),t=Ks(e,t,n)}else"$?"===l.data?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ii=gu(l.nextSibling),ri=t,oi=!0,ai=null,si=!1,null!==e&&(qr[Yr++]=Jr,qr[Yr++]=Zr,qr[Yr++]=Xr,Jr=e.id,Zr=e.overflow,Xr=t),(t=Hs(t,i.children)).flags|=4096);return t}return o?(cs(),o=i.fallback,l=t.mode,d=(c=e.child).sibling,(i=Mr(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==d?o=Mr(d,o):(o=Qr(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,null===(l=e.child.memoizedState)?l=js(n):(null!==(c=l.cachePool)?(d=ki._currentValue,c=c.parent!==d?{parent:d,pool:d}:c):c=zi(),l={baseLanes:l.baseLanes|n,cachePool:c}),o.memoizedState=l,o.childLanes=Qs(e,r,n),t.memoizedState=Fs,i):(as(t),e=(n=e.child).sibling,(n=Mr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Hs(e,t){return(t=zs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function zs(e,t){return(e=Dr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ks(e,t,n){return ns(t,e.child,null,n),(e=Hs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Gs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ei(e.return,t,n)}function Ws(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Rs(e,t,r.children,n),0!==(2&(r=ds.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Gs(e,n,t);else if(19===e.tag)Gs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(Q(ds,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===us(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ws(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===us(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ws(t,!0,n,null,o);break;case"together":Ws(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ys(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),hl|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(_i(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Mr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xs(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Si(e))}function Js(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Is=!0;else{if(!Xs(e,n)&&0===(128&t.flags))return Is=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),yi(0,ki,e.memoizedState.cache),hi();break;case 27:case 5:q(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:yi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(as(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Vs(e,t,n):(as(t),null!==(e=Ys(e,t,n))?e.sibling:null);as(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(_i(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Q(ds,ds.current),r)break;return null;case 22:case 23:return t.lanes=0,ks(e,t,n);case 24:yi(0,ki,e.memoizedState.cache)}return Ys(e,t,n)}(e,t,n);Is=0!==(131072&e.flags)}else Is=!1,oi&&0!==(1048576&t.flags)&&ei(t,Wr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===w){t.tag=11,t=xs(null,t,r,e,n);break e}if(i===C){t.tag=14,t=Ns(null,t,r,e,n);break e}}throw t=k(r)||r,Error(a(306,t,""))}Ur(r)?(e=ms(r,e),t.tag=1,t=Us(null,t,r,e,n)):(t.tag=0,t=Ls(null,t,r,e,n))}return t;case 0:return Ls(e,t,t.type,t.pendingProps,n);case 1:return Us(e,t,r=t.type,i=ms(r,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var o=t.memoizedState;i=o.element,ro(e,t),uo(t,r,null,n);var s=t.memoizedState;if(r=s.cache,yi(0,ki,r),r!==o.cache&&wi(t,[ki],n,!0),lo(),r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ms(e,t,r,n);break e}if(r!==i){fi(i=Sr(Error(a(424)),t)),t=Ms(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=gu(e.firstChild),ri=t,oi=!0,ai=null,si=!0,n=rs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),r===i){t=Ys(e,t,n);break e}Rs(e,t,r,n)}t=t.child}return t;case 26:return Bs(e,t),null===e?(n=Ru(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(r=ru(z.current).createElement(n))[ke]=t,r[Pe]=e,eu(r,n,e),Ke(r),t.stateNode=r):t.memoizedState=Ru(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return q(t),null===e&&oi&&(r=t.stateNode=bu(t.type,t.pendingProps,z.current),ri=t,si=!0,i=ii,hu(t.type)?(vu=i,ii=gu(r.firstChild)):ii=i),Rs(e,t,t.pendingProps.children,n),Bs(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Fe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=gu(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,si))?(t.stateNode=r,ri=t,ii=gu(r.firstChild),si=!1,i=!0):i=!1),i||li(t)),q(t),i=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,r=o.children,au(i,o)?r=null:null!==s&&au(i,s)&&(t.flags|=32),null!==t.memoizedState&&(i=ko(e,t,Lo,null,null,n),qu._currentValue=i),Bs(e,t),Rs(e,t,r,n),t.child;case 6:return null===e&&oi&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=gu(e.nextSibling)))return null}return e}(n,t.pendingProps,si))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||li(t)),null;case 13:return Vs(e,t,n);case 4:return G(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ns(t,null,r,n):Rs(e,t,r,n),t.child;case 11:return xs(e,t,t.type,t.pendingProps,n);case 7:return Rs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Rs(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,yi(0,t.type,r.value),Rs(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ci(t),r=r(i=Ti(i)),t.flags|=1,Rs(e,t,r,n),t.child;case 14:return Ns(e,t,t.type,t.pendingProps,n);case 15:return Os(e,t,t.type,t.pendingProps,n);case 19:return qs(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=zs(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Mr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return ks(e,t,n);case 24:return Ci(t),r=Ti(ki),null===e?(null===(i=Vi())&&(i=rl,o=Pi(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:r,cache:i},no(t),yi(0,ki,i)):(0!==(e.lanes&n)&&(ro(e,t),uo(t,null,null,n),lo()),i=e.memoizedState,o=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),yi(0,ki,r)):(r=o.cache,yi(0,ki,r),r!==i.cache&&wi(t,[ki],n,!0))),Rs(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Zs(e){e.flags|=4}function $s(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Qu(t)){if(null!==(t=is.current)&&((4194048&ol)===ol?null!==os:(62914560&ol)!==ol&&0===(536870912&ol)||t!==os))throw Zi=qi,Gi;e.flags|=8192}}function ec(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?_e():536870912,e.lanes|=t,gl|=t)}function tc(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nc(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rc(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nc(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),bi(ki),W(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(Ai(t)?Zs(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),nc(t),null;case 26:return n=t.memoizedState,null===e?(Zs(t),null!==n?(nc(t),$s(t,n)):(nc(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Zs(t),nc(t),$s(t,n)):(nc(t),t.flags&=-16777217):(e.memoizedProps!==r&&Zs(t),nc(t),t.flags&=-16777217),null;case 27:Y(t),n=z.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Zs(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nc(t),null}e=V.current,Ai(t)?di(t):(e=bu(i,r,n),t.stateNode=e,Zs(t))}return nc(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Zs(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nc(t),null}if(e=V.current,Ai(t))di(t);else{switch(i=ru(z.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[ke]=t,e[Pe]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(eu(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Zs(t)}}return nc(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Zs(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=z.current,Ai(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[ke]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Xd(e.nodeValue,n)))||li(t)}else(e=ru(e).createTextNode(r))[ke]=t,t.stateNode=e}return nc(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=Ai(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[ke]=t}else hi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nc(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ls(t),t):(ls(t),null)}if(ls(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),ec(t,t.updateQueue),nc(t),null;case 4:return W(),null===e&&jd(t.stateNode.containerInfo),nc(t),null;case 10:return bi(t.type),nc(t),null;case 19:if(j(ds),null===(i=t.memoizedState))return nc(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)tc(i,!1);else{if(0!==Al||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=us(e))){for(t.flags|=128,tc(i,!1),e=o.updateQueue,t.updateQueue=e,ec(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fr(n,e),n=n.sibling;return Q(ds,1&ds.current|2),t.child}e=e.sibling}null!==i.tail&&te()>wl&&(t.flags|=128,r=!0,tc(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=us(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,ec(t,e),tc(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!oi)return nc(t),null}else 2*te()-i.renderingStartTime>wl&&536870912!==n&&(t.flags|=128,r=!0,tc(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=ds.current,Q(ds,r?1&e|2:1&e),t):(nc(t),null);case 22:case 23:return ls(t),vo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nc(t),6&t.subtreeFlags&&(t.flags|=8192)):nc(t),null!==(n=t.updateQueue)&&ec(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&j(Qi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),bi(ki),nc(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function ic(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bi(ki),W(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(ls(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return j(ds),null;case 4:return W(),null;case 10:return bi(t.type),null;case 22:case 23:return ls(t),vo(),null!==e&&j(Qi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return bi(ki),null;default:return null}}function oc(e,t){switch(ni(t),t.tag){case 3:bi(ki),W();break;case 26:case 27:case 5:Y(t);break;case 4:W();break;case 13:ls(t);break;case 19:j(ds);break;case 10:bi(t.type);break;case 22:case 23:ls(t),vo(),null!==e&&j(Qi);break;case 24:bi(ki)}}function ac(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,a=n.inst;r=o(),a.destroy=r}n=n.next}while(n!==i)}}catch(s){dd(t,t.return,s)}}function sc(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(d){dd(i,c,d)}}}r=r.next}while(r!==o)}}catch(d){dd(t,t.return,d)}}function cc(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ho(t,n)}catch(r){dd(e,e.return,r)}}}function lc(e,t,n){n.props=ms(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){dd(e,t,r)}}function dc(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){dd(e,t,i)}}function uc(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){dd(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){dd(e,t,o)}else n.current=null}function Ac(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){dd(e,e.return,i)}}function hc(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,s=null,c=null,l=null,d=null,u=null;for(p in n){var A=n[p];if(n.hasOwnProperty(p)&&null!=A)switch(p){case"checked":case"value":break;case"defaultValue":l=A;default:r.hasOwnProperty(p)||Zd(e,t,p,null,r,A)}}for(var h in r){var p=r[h];if(A=n[h],r.hasOwnProperty(h)&&(null!=p||null!=A))switch(h){case"type":o=p;break;case"name":i=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":s=p;break;case"defaultValue":c=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==A&&Zd(e,t,h,p,r,A)}}return void mt(e,s,c,l,d,u,o,i);case"select":for(o in p=s=c=h=null,n)if(l=n[o],n.hasOwnProperty(o)&&null!=l)switch(o){case"value":break;case"multiple":p=l;default:r.hasOwnProperty(o)||Zd(e,t,o,null,r,l)}for(i in r)if(o=r[i],l=n[i],r.hasOwnProperty(i)&&(null!=o||null!=l))switch(i){case"value":h=o;break;case"defaultValue":c=o;break;case"multiple":s=o;default:o!==l&&Zd(e,t,i,o,r,l)}return t=c,n=s,r=p,void(null!=h?yt(e,!!n,h,!1):!!r!==!!n&&(null!=t?yt(e,!!n,t,!0):yt(e,!!n,n?[]:"",!1)));case"textarea":for(c in p=h=null,n)if(i=n[c],n.hasOwnProperty(c)&&null!=i&&!r.hasOwnProperty(c))switch(c){case"value":case"children":break;default:Zd(e,t,c,null,r,i)}for(s in r)if(i=r[s],o=n[s],r.hasOwnProperty(s)&&(null!=i||null!=o))switch(s){case"value":h=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==o&&Zd(e,t,s,i,r,o)}return void bt(e,h,p);case"option":for(var f in n)if(h=n[f],n.hasOwnProperty(f)&&null!=h&&!r.hasOwnProperty(f))if("selected"===f)e.selected=!1;else Zd(e,t,f,null,r,h);for(l in r)if(h=r[l],p=n[l],r.hasOwnProperty(l)&&h!==p&&(null!=h||null!=p))if("selected"===l)e.selected=h&&"function"!==typeof h&&"symbol"!==typeof h;else Zd(e,t,l,h,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)h=n[m],n.hasOwnProperty(m)&&null!=h&&!r.hasOwnProperty(m)&&Zd(e,t,m,null,r,h);for(d in r)if(h=r[d],p=n[d],r.hasOwnProperty(d)&&h!==p&&(null!=h||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(a(137,t));break;default:Zd(e,t,d,h,r,p)}return;default:if(Tt(t)){for(var g in n)h=n[g],n.hasOwnProperty(g)&&void 0!==h&&!r.hasOwnProperty(g)&&$d(e,t,g,void 0,r,h);for(u in r)h=r[u],p=n[u],!r.hasOwnProperty(u)||h===p||void 0===h&&void 0===p||$d(e,t,u,h,r,p);return}}for(var v in n)h=n[v],n.hasOwnProperty(v)&&null!=h&&!r.hasOwnProperty(v)&&Zd(e,t,v,null,r,h);for(A in r)h=r[A],p=n[A],!r.hasOwnProperty(A)||h===p||null==h&&null==p||Zd(e,t,A,h,r,p)}(r,e.type,n,t),r[Pe]=t}catch(i){dd(e,e.return,i)}}function pc(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&hu(e.type)||4===e.tag}function fc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&hu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function mc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jd));else if(4!==r&&(27===r&&hu(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(mc(e,t,n),e=e.sibling;null!==e;)mc(e,t,n),e=e.sibling}function gc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&hu(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(gc(e,t,n),e=e.sibling;null!==e;)gc(e,t,n),e=e.sibling}function vc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);eu(t,r,n),t[ke]=e,t[Pe]=n}catch(o){dd(e,e.return,o)}}var yc=!1,bc=!1,Ec=!1,wc="function"===typeof WeakSet?WeakSet:Set,_c=null;function Sc(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Uc(e,n),4&r&&ac(5,n);break;case 1:if(Uc(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){dd(n,n.return,a)}else{var i=ms(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){dd(n,n.return,s)}}64&r&&cc(n),512&r&&dc(n,n.return);break;case 3:if(Uc(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ho(e,t)}catch(a){dd(n,n.return,a)}}break;case 27:null===t&&4&r&&vc(n);case 26:case 5:Uc(e,n),null===t&&4&r&&Ac(n),512&r&&dc(n,n.return);break;case 12:Uc(e,n);break;case 13:Uc(e,n),4&r&&Nc(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pd.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||yc)){t=null!==t&&null!==t.memoizedState||bc,i=yc;var o=bc;yc=r,(bc=t)&&!o?Fc(e,n,0!==(8772&n.subtreeFlags)):Uc(e,n),yc=i,bc=o}break;case 30:break;default:Uc(e,n)}}function Cc(e){var t=e.alternate;null!==t&&(e.alternate=null,Cc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&je(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tc=null,Ic=!1;function Rc(e,t,n){for(n=n.child;null!==n;)xc(e,t,n),n=n.sibling}function xc(e,t,n){if(ue&&"function"===typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(de,n)}catch(o){}switch(n.tag){case 26:bc||uc(n,t),Rc(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:bc||uc(n,t);var r=Tc,i=Ic;hu(n.type)&&(Tc=n.stateNode,Ic=!1),Rc(e,t,n),Eu(n.stateNode),Tc=r,Ic=i;break;case 5:bc||uc(n,t);case 6:if(r=Tc,i=Ic,Tc=null,Rc(e,t,n),Ic=i,null!==(Tc=r))if(Ic)try{(9===Tc.nodeType?Tc.body:"HTML"===Tc.nodeName?Tc.ownerDocument.body:Tc).removeChild(n.stateNode)}catch(a){dd(n,t,a)}else try{Tc.removeChild(n.stateNode)}catch(a){dd(n,t,a)}break;case 18:null!==Tc&&(Ic?(pu(9===(e=Tc).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),IA(e)):pu(Tc,n.stateNode));break;case 4:r=Tc,i=Ic,Tc=n.stateNode.containerInfo,Ic=!0,Rc(e,t,n),Tc=r,Ic=i;break;case 0:case 11:case 14:case 15:bc||sc(2,n,t),bc||sc(4,n,t),Rc(e,t,n);break;case 1:bc||(uc(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&lc(n,t,r)),Rc(e,t,n);break;case 21:Rc(e,t,n);break;case 22:bc=(r=bc)||null!==n.memoizedState,Rc(e,t,n),bc=r;break;default:Rc(e,t,n)}}function Nc(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{IA(e)}catch(n){dd(t,t.return,n)}}function Oc(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new wc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new wc),t;default:throw Error(a(435,e.tag))}}(e);t.forEach((function(t){var r=fd.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function kc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],o=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 27:if(hu(c.type)){Tc=c.stateNode,Ic=!1;break e}break;case 5:Tc=c.stateNode,Ic=!1;break e;case 3:case 4:Tc=c.stateNode.containerInfo,Ic=!0;break e}c=c.return}if(null===Tc)throw Error(a(160));xc(o,s,i),Tc=null,Ic=!1,null!==(o=i.alternate)&&(o.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Bc(t,e),t=t.sibling}var Pc=null;function Bc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kc(t,e),Lc(e),4&r&&(sc(3,e,e.return),ac(3,e),sc(5,e,e.return));break;case 1:kc(t,e),Lc(e),512&r&&(bc||null===n||uc(n,n.return)),64&r&&yc&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Pc;if(kc(t,e),Lc(e),512&r&&(bc||null===n||uc(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(o=i.getElementsByTagName("title")[0])||o[Fe]||o[ke]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=i.createElement(r),i.head.insertBefore(o,i.querySelector("head > title"))),eu(o,r,n),o[ke]=e,Ke(o),r=o;break e;case"link":var s=Fu("link","href",i).get(r+(n.href||""));if(s)for(var c=0;c<s.length;c++)if((o=s[c]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(c,1);break t}eu(o=i.createElement(r),r,n),i.head.appendChild(o);break;case"meta":if(s=Fu("meta","content",i).get(r+(n.content||"")))for(c=0;c<s.length;c++)if((o=s[c]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(c,1);break t}eu(o=i.createElement(r),r,n),i.head.appendChild(o);break;default:throw Error(a(468,r))}o[ke]=e,Ke(o),r=o}e.stateNode=r}else ju(i,e.type,e.stateNode);else e.stateNode=Bu(i,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?ju(i,e.type,e.stateNode):Bu(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&hc(e,e.memoizedProps,n.memoizedProps)}break;case 27:kc(t,e),Lc(e),512&r&&(bc||null===n||uc(n,n.return)),null!==n&&4&r&&hc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(kc(t,e),Lc(e),512&r&&(bc||null===n||uc(n,n.return)),32&e.flags){i=e.stateNode;try{wt(i,"")}catch(p){dd(e,e.return,p)}}4&r&&null!=e.stateNode&&hc(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Ec=!0);break;case 6:if(kc(t,e),Lc(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){dd(e,e.return,p)}}break;case 3:if(Mu=null,i=Pc,Pc=Su(t.containerInfo),kc(t,e),Pc=i,Lc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{IA(t.containerInfo)}catch(p){dd(e,e.return,p)}Ec&&(Ec=!1,Dc(e));break;case 4:r=Pc,Pc=Su(e.stateNode.containerInfo),kc(t,e),Lc(e),Pc=r;break;case 12:default:kc(t,e),Lc(e);break;case 13:kc(t,e),Lc(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(El=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Oc(e,r)));break;case 22:i=null!==e.memoizedState;var l=null!==n&&null!==n.memoizedState,d=yc,u=bc;if(yc=d||i,bc=u||l,kc(t,e),bc=u,yc=d,Lc(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||l||yc||bc||Mc(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){l=n=t;try{if(o=l.stateNode,i)"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{c=l.stateNode;var A=l.memoizedProps.style,h=void 0!==A&&null!==A&&A.hasOwnProperty("display")?A.display:null;c.style.display=null==h||"boolean"===typeof h?"":(""+h).trim()}}catch(p){dd(l,l.return,p)}}}else if(6===t.tag){if(null===n){l=t;try{l.stateNode.nodeValue=i?"":l.memoizedProps}catch(p){dd(l,l.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Oc(e,n))));break;case 19:kc(t,e),Lc(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Oc(e,r)));case 30:case 21:}}function Lc(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pc(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;gc(e,fc(e),i);break;case 5:var o=n.stateNode;32&n.flags&&(wt(o,""),n.flags&=-33),gc(e,fc(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;mc(e,fc(e),s);break;default:throw Error(a(161))}}catch(c){dd(e,e.return,c)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Dc(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Dc(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Uc(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sc(e,t.alternate,t),t=t.sibling}function Mc(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sc(4,t,t.return),Mc(t);break;case 1:uc(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&lc(t,t.return,n),Mc(t);break;case 27:Eu(t.stateNode);case 26:case 5:uc(t,t.return),Mc(t);break;case 22:null===t.memoizedState&&Mc(t);break;default:Mc(t)}e=e.sibling}}function Fc(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:Fc(i,o,n),ac(4,o);break;case 1:if(Fc(i,o,n),"function"===typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(l){dd(r,r.return,l)}if(null!==(i=(r=o).updateQueue)){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(null!==c)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)Ao(c[i],s)}catch(l){dd(r,r.return,l)}}n&&64&a&&cc(o),dc(o,o.return);break;case 27:vc(o);case 26:case 5:Fc(i,o,n),n&&null===r&&4&a&&Ac(o),dc(o,o.return);break;case 12:Fc(i,o,n);break;case 13:Fc(i,o,n),n&&4&a&&Nc(i,o);break;case 22:null===o.memoizedState&&Fc(i,o,n),dc(o,o.return);break;case 30:break;default:Fc(i,o,n)}t=t.sibling}}function jc(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Bi(n))}function Qc(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bi(e))}function Vc(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hc(e,t,n,r),t=t.sibling}function Hc(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Vc(e,t,n,r),2048&i&&ac(9,t);break;case 1:case 13:default:Vc(e,t,n,r);break;case 3:Vc(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bi(e)));break;case 12:if(2048&i){Vc(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"===typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(c){dd(t,t.return,c)}}else Vc(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,a=t.alternate,null!==t.memoizedState?2&o._visibility?Vc(e,t,n,r):Kc(e,t):2&o._visibility?Vc(e,t,n,r):(o._visibility|=2,zc(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&jc(a,t);break;case 24:Vc(e,t,n,r),2048&i&&Qc(t.alternate,t)}}function zc(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,a=t,s=n,c=r,l=a.flags;switch(a.tag){case 0:case 11:case 15:zc(o,a,s,c,i),ac(8,a);break;case 23:break;case 22:var d=a.stateNode;null!==a.memoizedState?2&d._visibility?zc(o,a,s,c,i):Kc(o,a):(d._visibility|=2,zc(o,a,s,c,i)),i&&2048&l&&jc(a.alternate,a);break;case 24:zc(o,a,s,c,i),i&&2048&l&&Qc(a.alternate,a);break;default:zc(o,a,s,c,i)}t=t.sibling}}function Kc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Kc(n,r),2048&i&&jc(r.alternate,r);break;case 24:Kc(n,r),2048&i&&Qc(r.alternate,r);break;default:Kc(n,r)}t=t.sibling}}var Gc=8192;function Wc(e){if(e.subtreeFlags&Gc)for(e=e.child;null!==e;)qc(e),e=e.sibling}function qc(e){switch(e.tag){case 26:Wc(e),e.flags&Gc&&null!==e.memoizedState&&function(e,t,n){if(null===Vu)throw Error(a(475));var r=Vu;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=xu(n.href),o=e.querySelector(Nu(i));if(o)return null!==(e=o._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=zu.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void Ke(o);o=e.ownerDocument||e,n=Ou(n),(i=wu.get(i))&&Du(n,i),Ke(o=o.createElement("link"));var s=o;s._p=new Promise((function(e,t){s.onload=e,s.onerror=t})),eu(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=zu.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Pc,e.memoizedState,e.memoizedProps);break;case 5:default:Wc(e);break;case 3:case 4:var t=Pc;Pc=Su(e.stateNode.containerInfo),Wc(e),Pc=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gc,Gc=16777216,Wc(e),Gc=t):Wc(e))}}function Yc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];_c=r,$c(r,e)}Yc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jc(e),e=e.sibling}function Jc(e){switch(e.tag){case 0:case 11:case 15:Xc(e),2048&e.flags&&sc(9,e,e.return);break;case 3:case 12:default:Xc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zc(e)):Xc(e)}}function Zc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];_c=r,$c(r,e)}Yc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:sc(8,t,t.return),Zc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zc(t));break;default:Zc(t)}e=e.sibling}}function $c(e,t){for(;null!==_c;){var n=_c;switch(n.tag){case 0:case 11:case 15:sc(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Bi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,_c=r;else e:for(n=e;null!==_c;){var i=(r=_c).sibling,o=r.return;if(Cc(r),r===n){_c=null;break e}if(null!==i){i.return=o,_c=i;break e}_c=o}}}var el={getCacheForType:function(e){var t=Ti(ki),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tl="function"===typeof WeakMap?WeakMap:Map,nl=0,rl=null,il=null,ol=0,al=0,sl=null,cl=!1,ll=!1,dl=!1,ul=0,Al=0,hl=0,pl=0,fl=0,ml=0,gl=0,vl=null,yl=null,bl=!1,El=0,wl=1/0,_l=null,Sl=null,Cl=0,Tl=null,Il=null,Rl=0,xl=0,Nl=null,Ol=null,kl=0,Pl=null;function Bl(){if(0!==(2&nl)&&0!==ol)return ol&-ol;if(null!==B.T){return 0!==Ui?Ui:xd()}return Ne()}function Ll(){0===ml&&(ml=0===(536870912&ol)||oi?we():536870912);var e=is.current;return null!==e&&(e.flags|=32),ml}function Dl(e,t,n){(e!==rl||2!==al&&9!==al)&&null===e.cancelPendingCommit||(Hl(e,0),jl(e,ol,ml,!1)),Ce(e,n),0!==(2&nl)&&e===rl||(e===rl&&(0===(2&nl)&&(pl|=n),4===Al&&jl(e,ol,ml,!1)),wd(e))}function Ul(e,t,n){if(0!==(6&nl))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||be(e,t),i=r?function(e,t){var n=nl;nl|=2;var r=Kl(),i=Gl();rl!==e||ol!==t?(_l=null,wl=te()+500,Hl(e,t)):ll=be(e,t);e:for(;;)try{if(0!==al&&null!==il){t=il;var o=sl;t:switch(al){case 1:al=0,sl=null,$l(e,t,o,1);break;case 2:case 9:if(Yi(o)){al=0,sl=null,Zl(t);break}t=function(){2!==al&&9!==al||rl!==e||(al=7),wd(e)},o.then(t,t);break e;case 3:al=7;break e;case 4:al=5;break e;case 7:Yi(o)?(al=0,sl=null,Zl(t)):(al=0,sl=null,$l(e,t,o,7));break;case 5:var s=null;switch(il.tag){case 26:s=il.memoizedState;case 5:case 27:var c=il;if(!s||Qu(s)){al=0,sl=null;var l=c.sibling;if(null!==l)il=l;else{var d=c.return;null!==d?(il=d,ed(d)):il=null}break t}}al=0,sl=null,$l(e,t,o,5);break;case 6:al=0,sl=null,$l(e,t,o,6);break;case 8:Vl(),Al=6;break e;default:throw Error(a(462))}}Xl();break}catch(u){zl(e,u)}return vi=gi=null,B.H=r,B.A=i,nl=n,null!==il?0:(rl=null,ol=0,Rr(),Al)}(e,t):ql(e,t,!0),o=r;;){if(0===i){ll&&!r&&jl(e,t,0,!1);break}if(n=e.current.alternate,!o||Fl(n)){if(2===i){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var c=e;i=vl;var l=c.current.memoizedState.isDehydrated;if(l&&(Hl(c,s).flags|=256),2!==(s=ql(c,s,!1))){if(dl&&!l){c.errorRecoveryDisabledLanes|=o,pl|=o,i=4;break e}o=yl,yl=i,null!==o&&(null===yl?yl=o:yl.push.apply(yl,o))}i=s}if(o=!1,2!==i)continue}}if(1===i){Hl(e,0),jl(e,t,0,!0);break}e:{switch(r=e,o=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:jl(r,t,ml,!cl);break e;case 2:yl=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=El+300-te())){if(jl(r,t,ml,!cl),0!==ye(r,0,!0))break e;r.timeoutHandle=cu(Ml.bind(null,r,n,yl,_l,bl,t,ml,pl,gl,cl,o,2,-0,0),i)}else Ml(r,n,yl,_l,bl,t,ml,pl,gl,cl,o,0,-0,0)}break}i=ql(e,t,!1),o=!1}wd(e)}function Ml(e,t,n,r,i,o,s,c,l,d,u,A,h,p){if(e.timeoutHandle=-1,(8192&(A=t.subtreeFlags)||16785408===(16785408&A))&&(Vu={stylesheets:null,count:0,unsuspend:Hu},qc(t),null!==(A=function(){if(null===Vu)throw Error(a(475));var e=Vu;return e.stylesheets&&0===e.count&&Gu(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Gu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=A(nd.bind(null,e,t,o,n,r,i,s,c,l,u,1,h,p)),void jl(e,o,s,!d);nd(e,t,o,n,r,i,s,c,l)}function Fl(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Yn(o(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jl(e,t,n,r){t&=~fl,t&=~pl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-he(i),a=1<<o;r[o]=-1,i&=~a}0!==n&&Te(e,n,t)}function Ql(){return 0!==(6&nl)||(_d(0,!1),!1)}function Vl(){if(null!==il){if(0===al)var e=il.return;else vi=gi=null,Mo(e=il),Ya=null,Xa=0,e=il;for(;null!==e;)oc(e.alternate,e),e=e.return;il=null}}function Hl(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,lu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vl(),rl=e,il=n=Mr(e.current,null),ol=t,al=0,sl=null,cl=!1,ll=be(e,t),dl=!1,gl=ml=fl=pl=hl=Al=0,yl=vl=null,bl=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-he(r),o=1<<i;t|=e[i],r&=~o}return ul=t,Rr(),n}function zl(e,t){bo=null,B.H=Ka,t===Ki||t===Wi?(t=$i(),al=3):t===Gi?(t=$i(),al=4):al=t===Ts?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,sl=t,null===il&&(Al=1,Es(e,Sr(t,e.current)))}function Kl(){var e=B.H;return B.H=Ka,null===e?Ka:e}function Gl(){var e=B.A;return B.A=el,e}function Wl(){Al=4,cl||(4194048&ol)!==ol&&null!==is.current||(ll=!0),0===(134217727&hl)&&0===(134217727&pl)||null===rl||jl(rl,ol,ml,!1)}function ql(e,t,n){var r=nl;nl|=2;var i=Kl(),o=Gl();rl===e&&ol===t||(_l=null,Hl(e,t)),t=!1;var a=Al;e:for(;;)try{if(0!==al&&null!==il){var s=il,c=sl;switch(al){case 8:Vl(),a=6;break e;case 3:case 2:case 9:case 6:null===is.current&&(t=!0);var l=al;if(al=0,sl=null,$l(e,s,c,l),n&&ll){a=0;break e}break;default:l=al,al=0,sl=null,$l(e,s,c,l)}}Yl(),a=Al;break}catch(d){zl(e,d)}return t&&e.shellSuspendCounter++,vi=gi=null,nl=r,B.H=i,B.A=o,null===il&&(rl=null,ol=0,Rr()),a}function Yl(){for(;null!==il;)Jl(il)}function Xl(){for(;null!==il&&!$();)Jl(il)}function Jl(e){var t=Js(e.alternate,e,ul);e.memoizedProps=e.pendingProps,null===t?ed(e):il=t}function Zl(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ds(n,t,t.pendingProps,t.type,void 0,ol);break;case 11:t=Ds(n,t,t.pendingProps,t.type.render,t.ref,ol);break;case 5:Mo(t);default:oc(n,t),t=Js(n,t=il=Fr(t,ul),ul)}e.memoizedProps=e.pendingProps,null===t?ed(e):il=t}function $l(e,t,n,r){vi=gi=null,Mo(t),Ya=null,Xa=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&_i(t,n,i,!0),null!==(n=is.current)){switch(n.tag){case 13:return null===os?Wl():null===n.alternate&&0===Al&&(Al=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===qi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),ud(e,r,i)),!1;case 22:return n.flags|=65536,r===qi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),ud(e,r,i)),!1}throw Error(a(435,n.tag))}return ud(e,r,i),Wl(),!1}if(oi)return null!==(t=is.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==ci&&fi(Sr(e=Error(a(422),{cause:r}),n))):(r!==ci&&fi(Sr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Sr(r,n),so(e,i=_s(e.stateNode,r,i)),4!==Al&&(Al=2)),!1;var o=Error(a(520),{cause:r});if(o=Sr(o,n),null===vl?vl=[o]:vl.push(o),4!==Al&&(Al=2),null===t)return!0;r=Sr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,so(n,e=_s(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Sl||!Sl.has(o))))return n.flags|=65536,i&=-i,n.lanes|=i,Cs(i=Ss(i),e,n,r),so(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,ol))return Al=1,Es(e,Sr(n,e.current)),void(il=null)}catch(o){if(null!==i)throw il=i,o;return Al=1,Es(e,Sr(n,e.current)),void(il=null)}32768&t.flags?(oi||1===r?e=!0:ll||0!==(536870912&ol)?e=!1:(cl=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=is.current)&&13===r.tag&&(r.flags|=16384))),td(t,e)):ed(t)}function ed(e){var t=e;do{if(0!==(32768&t.flags))return void td(t,cl);e=t.return;var n=rc(t.alternate,t,ul);if(null!==n)return void(il=n);if(null!==(t=t.sibling))return void(il=t);il=t=e}while(null!==t);0===Al&&(Al=5)}function td(e,t){do{var n=ic(e.alternate,e);if(null!==n)return n.flags&=32767,void(il=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(il=e);il=e=n}while(null!==e);Al=6,il=null}function nd(e,t,n,r,i,o,s,c,l){e.cancelPendingCommit=null;do{sd()}while(0!==Cl);if(0!==(6&nl))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,i,o){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-he(n),u=1<<d;s[d]=0,c[d]=-1;var A=l[d];if(null!==A)for(l[d]=null,d=0;d<A.length;d++){var h=A[d];null!==h&&(h.lane&=-536870913)}n&=~u}0!==r&&Te(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,n,o|=Ir,s,c,l),e===rl&&(il=rl=null,ol=0),Il=t,Tl=e,Rl=n,xl=o,Nl=i,Ol=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(oe,(function(){return cd(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=B.T,B.T=null,i=L.p,L.p=2,s=nl,nl|=4;try{!function(e,t){if(e=e.containerInfo,tu=nA,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(m){n=null;break e}var s=0,c=-1,l=-1,d=0,u=0,A=e,h=null;t:for(;;){for(var p;A!==n||0!==i&&3!==A.nodeType||(c=s+i),A!==o||0!==r&&3!==A.nodeType||(l=s+r),3===A.nodeType&&(s+=A.nodeValue.length),null!==(p=A.firstChild);)h=A,A=p;for(;;){if(A===e)break t;if(h===n&&++d===i&&(c=s),h===o&&++u===r&&(l=s),null!==(p=A.nextSibling))break;h=(A=h).parentNode}A=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(nu={focusedElem:e,selectionRange:n},nA=!1,_c=t;null!==_c;)if(e=(t=_c).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,_c=e;else for(;null!==_c;){switch(o=(t=_c).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,i=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var f=ms(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(f,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(g){dd(n,n.return,g)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))fu(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,_c=e;break}_c=t.return}}(e,t)}finally{nl=s,L.p=i,B.T=r}}Cl=1,rd(),id(),od()}}function rd(){if(1===Cl){Cl=0;var e=Tl,t=Il,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=B.T,B.T=null;var r=L.p;L.p=2;var i=nl;nl|=4;try{Bc(t,e);var o=nu,a=er(e.containerInfo),s=o.focusedElem,c=o.selectionRange;if(a!==s&&s&&s.ownerDocument&&$n(s.ownerDocument.documentElement,s)){if(null!==c&&tr(s)){var l=c.start,d=c.end;if(void 0===d&&(d=l),"selectionStart"in s)s.selectionStart=l,s.selectionEnd=Math.min(d,s.value.length);else{var u=s.ownerDocument||document,A=u&&u.defaultView||window;if(A.getSelection){var h=A.getSelection(),p=s.textContent.length,f=Math.min(c.start,p),m=void 0===c.end?f:Math.min(c.end,p);!h.extend&&f>m&&(a=m,m=f,f=a);var g=Zn(s,f),v=Zn(s,m);if(g&&v&&(1!==h.rangeCount||h.anchorNode!==g.node||h.anchorOffset!==g.offset||h.focusNode!==v.node||h.focusOffset!==v.offset)){var y=u.createRange();y.setStart(g.node,g.offset),h.removeAllRanges(),f>m?(h.addRange(y),h.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),h.addRange(y))}}}}for(u=[],h=s;h=h.parentNode;)1===h.nodeType&&u.push({element:h,left:h.scrollLeft,top:h.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<u.length;s++){var b=u[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}nA=!!tu,nu=tu=null}finally{nl=i,L.p=r,B.T=n}}e.current=t,Cl=2}}function id(){if(2===Cl){Cl=0;var e=Tl,t=Il,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=B.T,B.T=null;var r=L.p;L.p=2;var i=nl;nl|=4;try{Sc(e,t.alternate,t)}finally{nl=i,L.p=r,B.T=n}}Cl=3}}function od(){if(4===Cl||3===Cl){Cl=0,ee();var e=Tl,t=Il,n=Rl,r=Ol;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Cl=5:(Cl=0,Il=Tl=null,ad(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Sl=null),xe(n),t=t.stateNode,ue&&"function"===typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(de,t,void 0,128===(128&t.current.flags))}catch(c){}if(null!==r){t=B.T,i=L.p,L.p=2,B.T=null;try{for(var o=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];o(s.value,{componentStack:s.stack})}}finally{B.T=t,L.p=i}}0!==(3&Rl)&&sd(),wd(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Pl?kl++:(kl=0,Pl=e):kl=0,_d(0,!1)}}function ad(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Bi(t)))}function sd(e){return rd(),id(),od(),cd()}function cd(){if(5!==Cl)return!1;var e=Tl,t=xl;xl=0;var n=xe(Rl),r=B.T,i=L.p;try{L.p=32>n?32:n,B.T=null,n=Nl,Nl=null;var o=Tl,s=Rl;if(Cl=0,Il=Tl=null,Rl=0,0!==(6&nl))throw Error(a(331));var c=nl;if(nl|=4,Jc(o.current),Hc(o,o.current,s,n),nl=c,_d(0,!1),ue&&"function"===typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(de,o)}catch(l){}return!0}finally{L.p=i,B.T=r,ad(e,t)}}function ld(e,t,n){t=Sr(n,t),null!==(e=oo(e,t=_s(e.stateNode,t,2),2))&&(Ce(e,2),wd(e))}function dd(e,t,n){if(3===e.tag)ld(e,e,n);else for(;null!==t;){if(3===t.tag){ld(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Sl||!Sl.has(r))){e=Sr(n,e),null!==(r=oo(t,n=Ss(2),2))&&(Cs(n,r,t,e),Ce(r,2),wd(r));break}}t=t.return}}function ud(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(dl=!0,i.add(n),e=Ad.bind(null,e,t,n),t.then(e,e))}function Ad(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rl===e&&(ol&n)===n&&(4===Al||3===Al&&(62914560&ol)===ol&&300>te()-El?0===(2&nl)&&Hl(e,0):fl|=n,gl===ol&&(gl=0)),wd(e)}function hd(e,t){0===t&&(t=_e()),null!==(e=Or(e,t))&&(Ce(e,t),wd(e))}function pd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),hd(e,n)}function fd(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),hd(e,n)}var md=null,gd=null,vd=!1,yd=!1,bd=!1,Ed=0;function wd(e){e!==gd&&null===e.next&&(null===gd?md=gd=e:gd=gd.next=e),yd=!0,vd||(vd=!0,uu((function(){0!==(6&nl)?J(re,Sd):Cd()})))}function _d(e,t){if(!bd&&yd){bd=!0;do{for(var n=!1,r=md;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var a=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-he(42|e)+1)-1,o=201326741&(o&=i&~(a&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Rd(r,o))}else o=ol,0===(3&(o=ye(r,r===rl?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||be(r,o)||(n=!0,Rd(r,o));r=r.next}}while(n);bd=!1}}function Sd(){Cd()}function Cd(){yd=vd=!1;var e=0;0!==Ed&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==su&&(su=e,!0);return su=null,!1}()&&(e=Ed),Ed=0);for(var t=te(),n=null,r=md;null!==r;){var i=r.next,o=Td(r,t);0===o?(r.next=null,null===n?md=i:n.next=i,null===i&&(gd=n)):(n=r,(0!==e||0!==(3&o))&&(yd=!0)),r=i}_d(e,!1)}function Td(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-he(o),s=1<<a,c=i[a];-1===c?0!==(s&n)&&0===(s&r)||(i[a]=Ee(s,t)):c<=t&&(e.expiredLanes|=s),o&=~s}if(n=ol,n=ye(e,e===(t=rl)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===al||9===al)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Z(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Z(r),xe(n)){case 2:case 8:n=ie;break;case 32:default:n=oe;break;case 268435456:n=se}return r=Id.bind(null,e),n=J(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Z(r),e.callbackPriority=2,e.callbackNode=null,2}function Id(e,t){if(0!==Cl&&5!==Cl)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(sd()&&e.callbackNode!==n)return null;var r=ol;return 0===(r=ye(e,e===rl?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Ul(e,r,t),Td(e,te()),null!=e.callbackNode&&e.callbackNode===n?Id.bind(null,e):null)}function Rd(e,t){if(sd())return null;Ul(e,t,!0)}function xd(){return 0===Ed&&(Ed=we()),Ed}function Nd(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:xt(""+e)}function Od(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var kd=0;kd<Er.length;kd++){var Pd=Er[kd];wr(Pd.toLowerCase(),"on"+(Pd[0].toUpperCase()+Pd.slice(1)))}wr(hr,"onAnimationEnd"),wr(pr,"onAnimationIteration"),wr(fr,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(mr,"onTransitionRun"),wr(gr,"onTransitionStart"),wr(vr,"onTransitionCancel"),wr(yr,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ld=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bd));function Dd(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=l;try{o(i)}catch(d){gs(d)}i.currentTarget=null,o=c}else for(a=0;a<r.length;a++){if(c=(s=r[a]).instance,l=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=l;try{o(i)}catch(d){gs(d)}i.currentTarget=null,o=c}}}}function Ud(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var r=e+"__bubble";n.has(r)||(Qd(t,e,2,!1),n.add(r))}function Md(e,t,n){var r=0;t&&(r|=4),Qd(n,e,r,t)}var Fd="_reactListening"+Math.random().toString(36).slice(2);function jd(e){if(!e[Fd]){e[Fd]=!0,Ge.forEach((function(t){"selectionchange"!==t&&(Ld.has(t)||Md(t,!1,e),Md(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fd]||(t[Fd]=!0,Md("selectionchange",!1,t))}}function Qd(e,t,n,r){switch(lA(t)){case 2:var i=rA;break;case 8:i=iA;break;default:i=oA}n=i.bind(null,t,n,e),i=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vd(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==s;){if(null===(a=Qe(s)))return;if(5===(l=a.tag)||6===l||26===l||27===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Dt((function(){var r=o,i=Ot(n),a=[];e:{var s=br.get(e);if(void 0!==s){var l=$t,d=e;switch(e){case"keypress":if(0===Kt(n))break e;case"keydown":case"keyup":l=fn;break;case"focusin":d="focus",l=an;break;case"focusout":d="blur",l=an;break;case"beforeblur":case"afterblur":l=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=gn;break;case hr:case pr:case fr:l=sn;break;case yr:l=vn;break;case"scroll":case"scrollend":l=tn;break;case"wheel":l=yn;break;case"copy":case"cut":case"paste":l=cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=mn;break;case"toggle":case"beforetoggle":l=bn}var u=0!==(4&t),A=!u&&("scroll"===e||"scrollend"===e),h=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=f;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===h||null!=(m=Ut(f,h))&&u.push(Hd(f,m,p)),A)break;f=f.return}0<u.length&&(s=new l(s,d,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Nt||!(d=n.relatedTarget||n.fromElement)||!Qe(d)&&!d[Be])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(d=(d=n.relatedTarget||n.toElement)?Qe(d):null)&&(A=c(d),u=d.tag,d!==A||5!==u&&27!==u&&6!==u)&&(d=null)):(l=null,d=r),l!==d)){if(u=rn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=mn,m="onPointerLeave",h="onPointerEnter",f="pointer"),A=null==l?s:He(l),p=null==d?s:He(d),(s=new u(m,f+"leave",l,n,i)).target=A,s.relatedTarget=p,m=null,Qe(i)===r&&((u=new u(h,f+"enter",d,n,i)).target=p,u.relatedTarget=A,m=u),A=m,l&&d)e:{for(h=d,f=0,p=u=l;p;p=Kd(p))f++;for(p=0,m=h;m;m=Kd(m))p++;for(;0<f-p;)u=Kd(u),f--;for(;0<p-f;)h=Kd(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kd(u),h=Kd(h)}u=null}else u=null;null!==l&&Gd(a,s,l,u,!1),null!==d&&null!==A&&Gd(a,A,d,u,!0)}if("select"===(l=(s=r?He(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Mn;else if(kn(s))if(Fn)g=qn;else{g=Gn;var v=Kn}else!(l=s.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Tt(r.elementType)&&(g=Mn):g=Wn;switch(g&&(g=g(e,r))?Pn(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&vt(s,"number",s.value)),v=r?He(r):window,e){case"focusin":(kn(v)||"true"===v.contentEditable)&&(rr=v,ir=r,or=null);break;case"focusout":or=ir=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,sr(a,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(a,n,i)}var y;if(wn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Nn?Rn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Cn&&"ko"!==n.locale&&(Nn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Nn&&(y=zt()):(Vt="value"in(Qt=i)?Qt.value:Qt.textContent,Nn=!0)),0<(v=zd(r,b)).length&&(b=new ln(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=xn(n))&&(b.data=y))),(y=Sn?function(e,t){switch(e){case"compositionend":return xn(t);case"keypress":return 32!==t.which?null:(In=!0,Tn);case"textInput":return(e=t.data)===Tn&&In?null:e;default:return null}}(e,n):function(e,t){if(Nn)return"compositionend"===e||!wn&&Rn(e,t)?(e=zt(),Ht=Vt=Qt=null,Nn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=zd(r,"onBeforeInput")).length&&(v=new ln("onBeforeInput","beforeinput",null,n,i),a.push({event:v,listeners:b}),v.data=y)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=Nd((i[Pe]||null).action),a=r.submitter;a&&null!==(t=(t=a[Pe]||null)?Nd(t.formAction):a.getAttribute("formAction"))&&(o=t,a=null);var s=new $t("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ed){var e=a?Od(i,a):new FormData(i);Oa(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"===typeof o&&(s.preventDefault(),e=a?Od(i,a):new FormData(i),Oa(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(a,e,r,n,i)}Dd(a,t)}))}function Hd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zd(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=Ut(e,n))&&r.unshift(Hd(e,i,o)),null!=(i=Ut(e,t))&&r.push(Hd(e,i,o))),3===e.tag)return r;e=e.return}return[]}function Kd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gd(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,null!==c&&c===r)break;5!==s&&26!==s&&27!==s||null===l||(c=l,i?null!=(l=Ut(n,o))&&a.unshift(Hd(n,l,c)):i||null!=(l=Ut(n,o))&&a.push(Hd(n,l,c))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Wd=/\r\n?/g,qd=/\u0000|\uFFFD/g;function Yd(e){return("string"===typeof e?e:""+e).replace(Wd,"\n").replace(qd,"")}function Xd(e,t){return t=Yd(t),Yd(e)===t}function Jd(){}function Zd(e,t,n,r,i,o){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||wt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&wt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Ct(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=xt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&Zd(e,t,"name",i.name,i,null),Zd(e,t,"formEncType",i.formEncType,i,null),Zd(e,t,"formMethod",i.formMethod,i,null),Zd(e,t,"formTarget",i.formTarget,i,null)):(Zd(e,t,"encType",i.encType,i,null),Zd(e,t,"method",i.method,i,null),Zd(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=xt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Jd);break;case"onScroll":null!=r&&Ud("scroll",e);break;case"onScrollEnd":null!=r&&Ud("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=xt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ud("beforetoggle",e),Ud("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=It.get(n)||n,r)}}function $d(e,t,n,r,i,o){switch(n){case"style":Ct(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?wt(e,r):("number"===typeof r||"bigint"===typeof r)&&wt(e,""+r);break;case"onScroll":null!=r&&Ud("scroll",e);break;case"onScrollEnd":null!=r&&Ud("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Jd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:We.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(o=null!=(o=e[Pe]||null)?o[n]:null)&&e.removeEventListener(t,o,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function eu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ud("error",e),Ud("load",e);var r,i=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Zd(e,t,r,s,n,null)}}return o&&Zd(e,t,"srcSet",n.srcSet,n,null),void(i&&Zd(e,t,"src",n.src,n,null));case"input":Ud("invalid",e);var c=r=s=o=null,l=null,d=null;for(i in n)if(n.hasOwnProperty(i)){var u=n[i];if(null!=u)switch(i){case"name":o=u;break;case"type":s=u;break;case"checked":l=u;break;case"defaultChecked":d=u;break;case"value":r=u;break;case"defaultValue":c=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(a(137,t));break;default:Zd(e,t,i,u,n,null)}}return gt(e,r,c,l,d,s,o,!1),void ut(e);case"select":for(o in Ud("invalid",e),i=s=r=null,n)if(n.hasOwnProperty(o)&&null!=(c=n[o]))switch(o){case"value":r=c;break;case"defaultValue":s=c;break;case"multiple":i=c;default:Zd(e,t,o,c,n,null)}return t=r,n=s,e.multiple=!!i,void(null!=t?yt(e,!!i,t,!1):null!=n&&yt(e,!!i,n,!0));case"textarea":for(s in Ud("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(s)&&null!=(c=n[s]))switch(s){case"value":i=c;break;case"defaultValue":o=c;break;case"children":r=c;break;case"dangerouslySetInnerHTML":if(null!=c)throw Error(a(91));break;default:Zd(e,t,s,c,n,null)}return Et(e,i,o,r),void ut(e);case"option":for(l in n)if(n.hasOwnProperty(l)&&null!=(i=n[l]))if("selected"===l)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Zd(e,t,l,i,n,null);return;case"dialog":Ud("beforetoggle",e),Ud("toggle",e),Ud("cancel",e),Ud("close",e);break;case"iframe":case"object":Ud("load",e);break;case"video":case"audio":for(i=0;i<Bd.length;i++)Ud(Bd[i],e);break;case"image":Ud("error",e),Ud("load",e);break;case"details":Ud("toggle",e);break;case"embed":case"source":case"link":Ud("error",e),Ud("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&null!=(i=n[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Zd(e,t,d,i,n,null)}return;default:if(Tt(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(i=n[u])&&$d(e,t,u,i,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(null!=(i=n[c])&&Zd(e,t,c,i,n,null))}var tu=null,nu=null;function ru(e){return 9===e.nodeType?e:e.ownerDocument}function iu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ou(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function au(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var su=null;var cu="function"===typeof setTimeout?setTimeout:void 0,lu="function"===typeof clearTimeout?clearTimeout:void 0,du="function"===typeof Promise?Promise:void 0,uu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof du?function(e){return du.resolve(null).then(e).catch(Au)}:cu;function Au(e){setTimeout((function(){throw e}))}function hu(e){return"head"===e}function pu(e,t){var n=t,r=0,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&Eu(a.documentElement),2&n&&Eu(a.body),4&n)for(Eu(n=a.head),a=n.firstChild;a;){var s=a.nextSibling,c=a.nodeName;a[Fe]||"SCRIPT"===c||"STYLE"===c||"LINK"===c&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}if(0===i)return e.removeChild(o),void IA(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);IA(t)}function fu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fu(n),je(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function mu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function gu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vu=null;function yu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bu(e,t,n){switch(t=ru(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Eu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);je(e)}var wu=new Map,_u=new Set;function Su(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cu=L.d;L.d={f:function(){var e=Cu.f(),t=Ql();return e||t},r:function(e){var t=Ve(e);null!==t&&5===t.tag&&"form"===t.type?Pa(t):Cu.r(e)},D:function(e){Cu.D(e),Iu("dns-prefetch",e,null)},C:function(e,t){Cu.C(e,t),Iu("preconnect",e,t)},L:function(e,t,n){Cu.L(e,t,n);var r=Tu;if(r&&e&&t){var i='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+ft(n.imageSizes)+'"]')):i+='[href="'+ft(e)+'"]';var o=i;switch(t){case"style":o=xu(e);break;case"script":o=ku(e)}wu.has(o)||(e=A({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),wu.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Nu(o))||"script"===t&&r.querySelector(Pu(o))||(eu(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}},m:function(e,t){Cu.m(e,t);var n=Tu;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+ft(r)+'"][href="'+ft(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=ku(e)}if(!wu.has(o)&&(e=A({rel:"modulepreload",href:e},t),wu.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Pu(o)))return}eu(r=n.createElement("link"),"link",e),Ke(r),n.head.appendChild(r)}}},X:function(e,t){Cu.X(e,t);var n=Tu;if(n&&e){var r=ze(n).hoistableScripts,i=ku(e),o=r.get(i);o||((o=n.querySelector(Pu(i)))||(e=A({src:e,async:!0},t),(t=wu.get(i))&&Uu(e,t),Ke(o=n.createElement("script")),eu(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){Cu.S(e,t,n);var r=Tu;if(r&&e){var i=ze(r).hoistableStyles,o=xu(e);t=t||"default";var a=i.get(o);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Nu(o)))s.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":t},n),(n=wu.get(o))&&Du(e,n);var c=a=r.createElement("link");Ke(c),eu(c,"link",e),c._p=new Promise((function(e,t){c.onload=e,c.onerror=t})),c.addEventListener("load",(function(){s.loading|=1})),c.addEventListener("error",(function(){s.loading|=2})),s.loading|=4,Lu(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},i.set(o,a)}}},M:function(e,t){Cu.M(e,t);var n=Tu;if(n&&e){var r=ze(n).hoistableScripts,i=ku(e),o=r.get(i);o||((o=n.querySelector(Pu(i)))||(e=A({src:e,async:!0,type:"module"},t),(t=wu.get(i))&&Uu(e,t),Ke(o=n.createElement("script")),eu(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var Tu="undefined"===typeof document?null:document;function Iu(e,t,n){var r=Tu;if(r&&"string"===typeof t&&t){var i=ft(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),_u.has(i)||(_u.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(eu(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}}function Ru(e,t,n,r){var i,o,s,c,l=(l=z.current)?Su(l):null;if(!l)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=xu(n.href),(r=(n=ze(l).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=xu(n.href);var d=ze(l).hoistableStyles,u=d.get(e);if(u||(l=l.ownerDocument||l,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=l.querySelector(Nu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),wu.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},wu.set(e,n),d||(i=l,o=e,s=n,c=u.state,i.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=i.createElement("link"),c.preload=o,o.addEventListener("load",(function(){return c.loading|=1})),o.addEventListener("error",(function(){return c.loading|=2})),eu(o,"link",s),Ke(o),i.head.appendChild(o))))),t&&null===r)throw Error(a(528,""));return u}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=ku(n),(r=(n=ze(l).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function xu(e){return'href="'+ft(e)+'"'}function Nu(e){return'link[rel="stylesheet"]['+e+"]"}function Ou(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function ku(e){return'[src="'+ft(e)+'"]'}function Pu(e){return"script[async]"+e}function Bu(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(r)return t.instance=r,Ke(r),r;var i=A({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ke(r=(e.ownerDocument||e).createElement("style")),eu(r,"style",i),Lu(r,n.precedence,e),t.instance=r;case"stylesheet":i=xu(n.href);var o=e.querySelector(Nu(i));if(o)return t.state.loading|=4,t.instance=o,Ke(o),o;r=Ou(n),(i=wu.get(i))&&Du(r,i),Ke(o=(e.ownerDocument||e).createElement("link"));var s=o;return s._p=new Promise((function(e,t){s.onload=e,s.onerror=t})),eu(o,"link",r),t.state.loading|=4,Lu(o,n.precedence,e),t.instance=o;case"script":return o=ku(n.src),(i=e.querySelector(Pu(o)))?(t.instance=i,Ke(i),i):(r=n,(i=wu.get(o))&&Uu(r=A({},n),i),Ke(i=(e=e.ownerDocument||e).createElement("script")),eu(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Lu(r,n.precedence,e));return t.instance}function Lu(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)o=s;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Du(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Uu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Mu=null;function Fu(e,t,n){if(null===Mu){var r=new Map,i=Mu=new Map;i.set(n,r)}else(r=(i=Mu).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[Fe]||o[ke]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var a=o.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(o):r.set(a,[o])}}return r}function ju(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Qu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Vu=null;function Hu(){}function zu(){if(this.count--,0===this.count)if(this.stylesheets)Gu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Ku=null;function Gu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Ku=new Map,t.forEach(Wu,e),Ku=null,zu.call(e))}function Wu(e,t){if(!(4&t.state.loading)){var n=Ku.get(e);if(n)var r=n.get(null);else{n=new Map,Ku.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var a=i[o];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(o=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=zu.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var qu={$$typeof:E,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function Yu(e,t,n,r,i,o,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Xu(e,t,n,r,i,o,a,s,c,l,d,u){return e=new Yu(e,t,n,a,s,c,l,u),t=1,!0===o&&(t|=24),o=Dr(3,null,null,t),e.current=o,o.stateNode=e,(t=Pi()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},no(o),e}function Ju(e){return e?e=Br:Br}function Zu(e,t,n,r,i,o){i=Ju(i),null===r.context?r.context=i:r.pendingContext=i,(r=io(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=oo(e,r,t))&&(Dl(n,0,t),ao(n,e,t))}function $u(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eA(e,t){$u(e,t),(e=e.alternate)&&$u(e,t)}function tA(e){if(13===e.tag){var t=Or(e,67108864);null!==t&&Dl(t,0,67108864),eA(e,67108864)}}var nA=!0;function rA(e,t,n,r){var i=B.T;B.T=null;var o=L.p;try{L.p=2,oA(e,t,n,r)}finally{L.p=o,B.T=i}}function iA(e,t,n,r){var i=B.T;B.T=null;var o=L.p;try{L.p=8,oA(e,t,n,r)}finally{L.p=o,B.T=i}}function oA(e,t,n,r){if(nA){var i=aA(r);if(null===i)Vd(e,t,r,sA,n),vA(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return uA=yA(uA,e,t,n,r,i),!0;case"dragenter":return AA=yA(AA,e,t,n,r,i),!0;case"mouseover":return hA=yA(hA,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return pA.set(o,yA(pA.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,fA.set(o,yA(fA.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(vA(e,r),4&t&&-1<gA.indexOf(e)){for(;null!==i;){var o=Ve(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var a=ve(o.pendingLanes);if(0!==a){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var c=1<<31-he(a);s.entanglements[1]|=c,a&=~c}wd(o),0===(6&nl)&&(wl=te()+500,_d(0,!1))}}break;case 13:null!==(s=Or(o,2))&&Dl(s,0,2),Ql(),eA(o,2)}if(null===(o=aA(r))&&Vd(e,t,r,sA,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Vd(e,t,r,null,n)}}function aA(e){return cA(e=Ot(e))}var sA=null;function cA(e){if(sA=null,null!==(e=Qe(e))){var t=c(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=l(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sA=e,null}function lA(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case oe:case ae:return 32;case se:return 268435456;default:return 32}default:return 32}}var dA=!1,uA=null,AA=null,hA=null,pA=new Map,fA=new Map,mA=[],gA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vA(e,t){switch(e){case"focusin":case"focusout":uA=null;break;case"dragenter":case"dragleave":AA=null;break;case"mouseover":case"mouseout":hA=null;break;case"pointerover":case"pointerout":pA.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fA.delete(t.pointerId)}}function yA(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=Ve(t))&&tA(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function bA(e){var t=Qe(e.target);if(null!==t){var n=c(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=l(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,(function(){if(13===n.tag){var e=Bl();e=Re(e);var t=Or(n,e);null!==t&&Dl(t,0,e),eA(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function EA(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=aA(e.nativeEvent);if(null!==n)return null!==(t=Ve(n))&&tA(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Nt=r,n.target.dispatchEvent(r),Nt=null,t.shift()}return!0}function wA(e,t,n){EA(e)&&n.delete(t)}function _A(){dA=!1,null!==uA&&EA(uA)&&(uA=null),null!==AA&&EA(AA)&&(AA=null),null!==hA&&EA(hA)&&(hA=null),pA.forEach(wA),fA.forEach(wA)}function SA(e,t){e.blockedOn===t&&(e.blockedOn=null,dA||(dA=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,_A)))}var CA=null;function TA(e){CA!==e&&(CA=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){CA===e&&(CA=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===cA(r||n))continue;break}var o=Ve(n);null!==o&&(e.splice(t,3),t-=3,Oa(o,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function IA(e){function t(t){return SA(t,e)}null!==uA&&SA(uA,e),null!==AA&&SA(AA,e),null!==hA&&SA(hA,e),pA.forEach(t),fA.forEach(t);for(var n=0;n<mA.length;n++){var r=mA[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<mA.length&&null===(n=mA[0]).blockedOn;)bA(n),null===n.blockedOn&&mA.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],a=i[Pe]||null;if("function"===typeof o)a||TA(n);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(i=o,a=o[Pe]||null)s=a.formAction;else if(null!==cA(i))continue}else s=a.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),TA(n)}}}function RA(e){this._internalRoot=e}function xA(e){this._internalRoot=e}xA.prototype.render=RA.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Zu(t.current,Bl(),e,t,null,null)},xA.prototype.unmount=RA.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zu(e.current,2,null,e,null,null),Ql(),t[Be]=null}},xA.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ne();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mA.length&&0!==t&&t<mA[n].priority;n++);mA.splice(n,0,e),0===n&&bA(e)}};var NA=i.version;if("19.1.0"!==NA)throw Error(a(527,NA,"19.1.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=c(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return d(i),e;if(o===r)return d(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var OA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var kA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kA.isDisabled&&kA.supportsFiber)try{de=kA.inject(OA),ue=kA}catch(BA){}}t.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",i=vs,o=ys,c=bs;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(c=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xu(e,1,!1,null,0,n,r,i,o,c,0,null),e[Be]=t.current,jd(e),new RA(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(a(299));var r=!1,i="",o=vs,c=ys,l=bs,d=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(c=n.onCaughtError),void 0!==n.onRecoverableError&&(l=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(d=n.formState)),(t=Xu(e,1,!0,t,0,r,i,o,c,l,0,d)).context=Ju(null),n=t.current,(i=io(r=Re(r=Bl()))).callback=null,oo(n,i,r),n=r,t.current.lanes=n,Ce(t,n),wd(t),e[Be]=t.current,jd(e),new xA(t)},t.version="19.1.0"},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(6672)},8853:(e,t,n)=>{"use strict";e.exports=n(5896)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{453:"c33c5ccf",455:"475d5ead",977:"ef29a491"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="swp-fe:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,c;if(void 0!==o)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+o){s=u;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var A=(t,n)=>{s.onerror=s.onload=null,clearTimeout(h);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},h=setTimeout(A.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=A.bind(null,s.onerror),s.onload=A.bind(null,s.onload),c&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,a=r[0],s=r[1],c=r[2],l=0;if(a.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(c)c(n)}for(t&&t(r);l<a.length;l++)o=a[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkswp_fe=self.webpackChunkswp_fe||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>tO,hasStandardBrowserEnv:()=>rO,hasStandardBrowserWebWorkerEnv:()=>iO,navigator:()=>nO,origin:()=>oO});var t=n(5043),r=n.t(t,2),i=n(4391);function o(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function a(e,t){if(null==e)return{};var n,r,i=o(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=n(4467);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,s.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(4358);const d=["sri"],u=["page"],A=["page","matches"],h=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],p=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],f=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var m="popstate";function g(){return S((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return E("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:w(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function v(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function y(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function b(e,t){return{usr:e.state,key:e.key,idx:t}}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return l(l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?_(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function w(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function _(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function S(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s="POP",c=null,d=u();function u(){return(a.state||{idx:null}).idx}function A(){s="POP";let e=u(),t=null==e?null:e-d;d=e,c&&c({action:s,location:p.location,delta:t})}function h(e){return C(e)}null==d&&(d=0,a.replaceState(l(l({},a.state),{},{idx:d}),""));let p={get action(){return s},get location(){return e(i,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(m,A),c=e,()=>{i.removeEventListener(m,A),c=null}},createHref:e=>t(i,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s="PUSH";let r=E(p.location,e,t);n&&n(r,e),d=u()+1;let l=b(r,d),A=p.createHref(r);try{a.pushState(l,"",A)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(A)}o&&c&&c({action:s,location:p.location,delta:1})},replace:function(e,t){s="REPLACE";let r=E(p.location,e,t);n&&n(r,e),d=u();let i=b(r,d),l=p.createHref(r);a.replaceState(i,"",l),o&&c&&c({action:s,location:p.location,delta:0})},go:e=>a.go(e)};return p}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),v(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:w(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function T(e,t){return I(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function I(e,t,n,r){let i=V(("string"===typeof t?_(t):t).pathname||"/",n);if(null==i)return null;let o=R(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=Q(i);a=M(o[s],e,r)}return a}function R(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(v(a.relativePath.startsWith(r),'Absolute route path "'.concat(a.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),a.relativePath=a.relativePath.slice(r.length));let s=W([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(v(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(s,'".')),R(e.children,t,c,s)),(null!=e.path||e.index)&&t.push({path:s,score:U(s,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of x(e.path))i(e,t,r);else i(e,t)})),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=x(r.join("/")),s=[];return s.push(...a.map((e=>""===e?o:[o,e].join("/")))),i&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}var N=/^:[\w-]+$/,O=3,k=2,P=1,B=10,L=-2,D=e=>"*"===e;function U(e,t){let n=e.split("/"),r=n.length;return n.some(D)&&(r+=L),t&&(r+=k),n.filter((e=>!D(e))).reduce(((e,t)=>e+(N.test(t)?O:""===t?P:B)),r)}function M(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],c=s===r.length-1,l="/"===o?t:t.slice(o.length)||"/",d=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:c},l),u=e.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:W([o,d.pathname]),pathnameBase:q(W([o,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(o=W([o,d.pathnameBase]))}return a}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=j(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const c=s[n];return e[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:a,pattern:e}}function j(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Q(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return y(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function H(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function z(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function K(e){let t=z(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function G(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=_(e):(r=l({},e),v(!r.pathname||!r.pathname.includes("?"),H("?","pathname","search",r)),v(!r.pathname||!r.pathname.includes("#"),H("#","pathname","hash",r)),v(!r.search||!r.search.includes("#"),H("#","search","hash",r)));let o,a=""===e||""===r.pathname,s=a?"/":r.pathname;if(null==s)o=n;else{let e=t.length-1;if(!i&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?_(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:Y(r),hash:X(i)}}(r,o),d=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!u||(c.pathname+="/"),c}var W=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function J(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Z=["POST","PUT","PATCH","DELETE"],$=(new Set(Z),["GET",...Z]);new Set($),Symbol("ResetLoaderData");var ee=t.createContext(null);ee.displayName="DataRouter";var te=t.createContext(null);te.displayName="DataRouterState";var ne=t.createContext({isTransitioning:!1});ne.displayName="ViewTransition";var re=t.createContext(new Map);re.displayName="Fetchers";var ie=t.createContext(null);ie.displayName="Await";var oe=t.createContext(null);oe.displayName="Navigation";var ae=t.createContext(null);ae.displayName="Location";var se=t.createContext({outlet:null,matches:[],isDataRoute:!1});se.displayName="Route";var ce=t.createContext(null);ce.displayName="RouteError";function le(){return null!=t.useContext(ae)}function de(){return v(le(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(ae).location}var ue="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ae(e){t.useContext(oe).static||t.useLayoutEffect(e)}function he(){let{isDataRoute:e}=t.useContext(se);return e?function(){let{router:e}=_e("useNavigate"),n=Ce("useNavigate"),r=t.useRef(!1);Ae((()=>{r.current=!0}));let i=t.useCallback((async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(r.current,ue),r.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,l({fromRouteId:n},i)))}),[e,n]);return i}():function(){v(le(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(ee),{basename:n,navigator:r}=t.useContext(oe),{matches:i}=t.useContext(se),{pathname:o}=de(),a=JSON.stringify(K(i)),s=t.useRef(!1);Ae((()=>{s.current=!0}));let c=t.useCallback((function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(y(s.current,ue),!s.current)return;if("number"===typeof t)return void r.go(t);let c=G(t,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==n&&(c.pathname="/"===c.pathname?n:W([n,c.pathname])),(i.replace?r.replace:r.push)(c,i.state,i)}),[n,r,a,o,e]);return c}()}t.createContext(null);function pe(){let{matches:e}=t.useContext(se),n=e[e.length-1];return n?n.params:{}}function fe(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=t.useContext(se),{pathname:i}=de(),o=JSON.stringify(K(r));return t.useMemo((()=>G(e,JSON.parse(o),i,"path"===n)),[e,o,i,n])}function me(e,n,r,i){v(le(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:a}=t.useContext(oe),{matches:s}=t.useContext(se),c=s[s.length-1],d=c?c.params:{},u=c?c.pathname:"/",A=c?c.pathnameBase:"/",h=c&&c.route;{let e=h&&h.path||"";Re(u,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,f=de();if(n){var m;let e="string"===typeof n?_(n):n;v("/"===A||(null===(m=e.pathname)||void 0===m?void 0:m.startsWith(A)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(A,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=f;let g=p.pathname||"/",b=g;if("/"!==A){let e=A.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let E=!a&&r&&r.matches&&r.matches.length>0?r.matches:T(e,{pathname:b});y(h||null!=E,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),y(null==E||void 0!==E[E.length-1].route.element||void 0!==E[E.length-1].route.Component||void 0!==E[E.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=Ee(E&&E.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:W([A,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?A:W([A,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,r,i);return n&&w?t.createElement(ae.Provider,{value:{location:l({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},w):w}function ge(){let e=Te(),n=J(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:a},"ErrorBoundary")," or"," ",t.createElement("code",{style:a},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,s)}var ve=t.createElement(ge,null),ye=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(se.Provider,{value:this.props.routeContext},t.createElement(ce.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function be(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(ee);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(se.Provider,{value:n},i)}function Ee(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let i=e,o=null===r||void 0===r?void 0:r.errors;if(null!=o){let e=i.findIndex((e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id])));v(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),i=i.slice(0,Math.min(i.length,e+1))}let a=!1,s=-1;if(r)for(let t=0;t<i.length;t++){let e=i[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(s=t),e.route.id){let{loaderData:t,errors:n}=r,o=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||o){a=!0,i=s>=0?i.slice(0,s+1):[i[0]];break}}}return i.reduceRight(((e,c,l)=>{let d,u=!1,A=null,h=null;r&&(d=o&&c.route.id?o[c.route.id]:void 0,A=c.route.errorElement||ve,a&&(s<0&&0===l?(Re("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,h=null):s===l&&(u=!0,h=c.route.hydrateFallbackElement||null)));let p=n.concat(i.slice(0,l+1)),f=()=>{let n;return n=d?A:u?h:c.route.Component?t.createElement(c.route.Component,null):c.route.element?c.route.element:e,t.createElement(be,{match:c,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:n})};return r&&(c.route.ErrorBoundary||c.route.errorElement||0===l)?t.createElement(ye,{location:r.location,revalidation:r.revalidation,component:A,error:d,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()}),null)}function we(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function _e(e){let n=t.useContext(ee);return v(n,we(e)),n}function Se(e){let n=t.useContext(te);return v(n,we(e)),n}function Ce(e){let n=function(e){let n=t.useContext(se);return v(n,we(e)),n}(e),r=n.matches[n.matches.length-1];return v(r.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),r.route.id}function Te(){var e;let n=t.useContext(ce),r=Se("useRouteError"),i=Ce("useRouteError");return void 0!==n?n:null===(e=r.errors)||void 0===e?void 0:e[i]}var Ie={};function Re(e,t,n){t||Ie[e]||(Ie[e]=!0,y(!1,n))}t.memo((function(e){let{routes:t,future:n,state:r}=e;return me(t,void 0,r,n)}));function xe(e){let{to:n,replace:r,state:i,relative:o}=e;v(le(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=t.useContext(oe);y(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=t.useContext(se),{pathname:c}=de(),l=he(),d=G(n,K(s),c,"path"===o),u=JSON.stringify(d);return t.useEffect((()=>{l(JSON.parse(u),{replace:r,state:i,relative:o})}),[l,u,o,r,i]),null}function Ne(e){v(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oe(e){let{basename:n="/",children:r=null,location:i,navigationType:o="POP",navigator:a,static:s=!1}=e;v(!le(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),l=t.useMemo((()=>({basename:c,navigator:a,static:s,future:{}})),[c,a,s]);"string"===typeof i&&(i=_(i));let{pathname:d="/",search:u="",hash:A="",state:h=null,key:p="default"}=i,f=t.useMemo((()=>{let e=V(d,c);return null==e?null:{location:{pathname:e,search:u,hash:A,state:h,key:p},navigationType:o}}),[c,d,u,A,h,p,o]);return y(null!=f,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(u).concat(A,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==f?null:t.createElement(oe.Provider,{value:l},t.createElement(ae.Provider,{children:r,value:f}))}function ke(e){let{children:t,location:n}=e;return me(Pe(t),n)}t.Component;function Pe(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let o=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,Pe(e.props.children,o));v(e.type===Ne,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),v(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Pe(e.props.children,o)),r.push(a)})),r}var Be="get",Le="application/x-www-form-urlencoded";function De(e){return null!=e&&"string"===typeof e.tagName}var Ue=null;var Me=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fe(e){return null==e||Me.has(e)?e:(y(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Le,'"')),null)}function je(e,t){let n,r,i,o,a;if(De(s=e)&&"form"===s.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?V(a,t):null,n=e.getAttribute("method")||Be,i=Fe(e.getAttribute("enctype"))||Le,o=new FormData(e)}else if(function(e){return De(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return De(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||a.getAttribute("action");if(r=s?V(s,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Be,i=Fe(e.getAttribute("formenctype"))||Fe(a.getAttribute("enctype"))||Le,o=new FormData(a,e),!function(){if(null===Ue)try{new FormData(document.createElement("form"),0),Ue=!1}catch(e){Ue=!0}return Ue}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";o.append("".concat(e,"x"),"0"),o.append("".concat(e,"y"),"0")}else t&&o.append(t,r)}}else{if(De(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Be,r=null,i=Le,a=e}var s;return o&&"text/plain"===i&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:a}}function Qe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Ve(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function He(e){return null!=e&&"string"===typeof e.page}function ze(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ke(e,t,n,r,i,o){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,s=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter(((e,t)=>a(e,t)||s(e,t))):"data"===o?t.filter(((t,o)=>{let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(a(t,o)||s(t,o))return!0;if(t.route.shouldRevalidate){var l;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(l=n[0])||void 0===l?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function Ge(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i})).flat(1),[...new Set(r)];var r}function We(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,i)=>{if(t&&!He(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(o)||(n.add(o),e.push({key:o,link:i})),e}),[])}function qe(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Ye=new Set([100,101,204,205]);function Xe(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===V(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}t.Component;function Je(e){let{error:n,isOutsideRemixApp:r}=e;console.error(n);let i,o=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(J(n))return t.createElement(Ze,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),o);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement(Ze,{title:"Application Error!",isOutsideRemixApp:r},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),o)}function Ze(e){var n;let{title:r,renderScripts:i,isOutsideRemixApp:o,children:a}=e,{routeModules:s}=rt();return null!==s.root&&void 0!==n&&n.Layout&&!o?a:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,r)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,i?t.createElement(dt,null):null)))}function $e(e,t){return"lazy"===e.mode&&!0===t}function et(){let e=t.useContext(ee);return Qe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function tt(){let e=t.useContext(te);return Qe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var nt=t.createContext(void 0);function rt(){let e=t.useContext(nt);return Qe(e,"You must render this element inside a <HydratedRouter> element"),e}function it(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ot(e,t,n){if(n&&!lt)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function at(e){let{page:n}=e,r=a(e,u),{router:i}=et(),o=t.useMemo((()=>T(i.routes,n,i.basename)),[i.routes,n,i.basename]);return o?t.createElement(ct,l({page:n,matches:o},r)):null}function st(e){let{manifest:n,routeModules:r}=rt(),[i,o]=t.useState([]);return t.useEffect((()=>{let t=!1;return async function(e,t,n){return We((await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await Ve(r,n);return e.links?e.links():[]}return[]})))).flat(1).filter(ze).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?l(l({},e),{},{rel:"prefetch",as:"style"}):l(l({},e),{},{rel:"prefetch"}))))}(e,n,r).then((e=>{t||o(e)})),()=>{t=!0}}),[e,n,r]),i}function ct(e){let{page:n,matches:r}=e,i=a(e,A),o=de(),{manifest:s,routeModules:c}=rt(),{basename:d}=et(),{loaderData:u,matches:h}=tt(),p=t.useMemo((()=>Ke(n,r,h,s,o,"data")),[n,r,h,s,o]),f=t.useMemo((()=>Ke(n,r,h,s,o,"assets")),[n,r,h,s,o]),m=t.useMemo((()=>{if(n===o.pathname+o.search+o.hash)return[];let e=new Set,t=!1;if(r.forEach((n=>{var r;let i=s.routes[n.route.id];i&&i.hasLoader&&(!p.some((e=>e.route.id===n.route.id))&&n.route.id in u&&null!==(r=c[n.route.id])&&void 0!==r&&r.shouldRevalidate||i.hasClientLoader?t=!0:e.add(n.route.id))})),0===e.size)return[];let i=Xe(n,d);return t&&e.size>0&&i.searchParams.set("_routes",r.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[i.pathname+i.search]}),[d,u,o,s,p,r,n,c]),g=t.useMemo((()=>Ge(f,s)),[f,s]),v=st(f);return t.createElement(t.Fragment,null,m.map((e=>t.createElement("link",l({key:e,rel:"prefetch",as:"fetch",href:e},i)))),g.map((e=>t.createElement("link",l({key:e,rel:"modulepreload",href:e},i)))),v.map((e=>{let{key:n,link:r}=e;return t.createElement("link",l({key:n},r))})))}nt.displayName="FrameworkContext";var lt=!1;function dt(e){let{manifest:n,serverHandoffString:r,isSpaMode:i,renderMeta:o,routeDiscovery:s,ssr:c}=rt(),{router:u,static:A,staticContext:h}=et(),{matches:p}=tt(),f=$e(s,c);o&&(o.didRenderScripts=!0);let m=ot(p,null,i);t.useEffect((()=>{0}),[]);let g=t.useMemo((()=>{var i;let o=h?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",s=A?"".concat(null!==n.hmr&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(f?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(m.map(((e,t)=>{let r="route".concat(t),i=n.routes[e.route.id];Qe(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:o,clientLoaderModule:a,clientMiddlewareModule:s,hydrateFallbackModule:c,module:l}=i,d=[...o?[{module:o,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...s?[{module:s,varName:"".concat(r,"_clientMiddleware")}]:[],...c?[{module:c,varName:"".concat(r,"_HydrateFallback")}]:[],{module:l,varName:"".concat(r,"_main")}];return 1===d.length?"import * as ".concat(r," from ").concat(JSON.stringify(l),";"):[d.map((e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";'))).join("\n"),"const ".concat(r," = {").concat(d.map((e=>"...".concat(e.varName))).join(","),"};")].join("\n")})).join("\n"),"\n  ").concat(f?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=a(e,d),i=new Set(t.state.matches.map((e=>e.route.id))),o=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(o.pop();o.length>0;)s.push("/".concat(o.join("/"))),o.pop();s.forEach((e=>{let n=T(t.routes,e,t.basename);n&&n.forEach((e=>i.add(e.route.id)))}));let c=[...i].reduce(((e,t)=>Object.assign(e,{[t]:r.routes[t]})),{});return l(l({},r),{},{routes:c,sri:!!n||void 0})}(n,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(m.map(((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t))).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",l(l({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:qe(o),type:void 0})),t.createElement("script",l(l({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:qe(s),type:"module",async:!0})))}),[]),v=lt?[]:(n.entry.imports.concat(Ge(m,n,{includeHydrateFallback:!0})),[...new Set(y)]);var y;let b="object"===typeof n.sri?n.sri:{};return lt?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:b})}}):null,f?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:b[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:b[n.entry.module],suppressHydrationWarning:!0}),v.map((n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:b[n],suppressHydrationWarning:!0}))),g)}function ut(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var At="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{At&&(window.__reactRouterVersion="7.6.0")}catch(XB){}function ht(e){let{basename:n,children:r,window:i}=e,o=t.useRef();null==o.current&&(o.current=g({window:i,v5Compat:!0}));let a=o.current,[s,c]=t.useState({action:a.action,location:a.location}),l=t.useCallback((e=>{t.startTransition((()=>c(e)))}),[c]);return t.useLayoutEffect((()=>a.listen(l)),[a,l]),t.createElement(Oe,{basename:n,children:r,location:s.location,navigationType:s.action,navigator:a})}var pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=t.forwardRef((function(e,n){let r,{onClick:i,discover:o="render",prefetch:s="none",relative:c,reloadDocument:d,replace:u,state:A,target:p,to:f,preventScrollReset:m,viewTransition:g}=e,b=a(e,h),{basename:E}=t.useContext(oe),_="string"===typeof f&&pt.test(f),S=!1;if("string"===typeof f&&_&&(r=f,At))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),n=V(t.pathname,E);t.origin===e.origin&&null!=n?f=n+t.search+t.hash:S=!0}catch(XB){y(!1,'<Link to="'.concat(f,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let C=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(le(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=t.useContext(oe),{hash:o,pathname:a,search:s}=fe(e,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:W([r,a])),i.createHref({pathname:c,search:s,hash:o})}(f,{relative:c}),[T,I,R]=function(e,n){let r=t.useContext(nt),[i,o]=t.useState(!1),[a,s]=t.useState(!1),{onFocus:c,onBlur:l,onMouseEnter:d,onMouseLeave:u,onTouchStart:A}=n,h=t.useRef(null);t.useEffect((()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{s(e.isIntersecting)}))}),{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}}),[e]),t.useEffect((()=>{if(i){let e=setTimeout((()=>{s(!0)}),100);return()=>{clearTimeout(e)}}}),[i]);let p=()=>{o(!0)},f=()=>{o(!1),s(!1)};return r?"intent"!==e?[a,h,{}]:[a,h,{onFocus:it(c,p),onBlur:it(l,f),onMouseEnter:it(d,p),onMouseLeave:it(u,f),onTouchStart:it(A,p)}]:[!1,h,{}]}(s,b),x=function(e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=he(),l=de(),d=fe(e,{relative:a});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:w(l)===w(d);c(e,{replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:s})}}),[l,c,d,r,i,n,e,o,a,s])}(f,{replace:u,state:A,target:p,preventScrollReset:m,relative:c,viewTransition:g});let N=t.createElement("a",l(l(l({},b),R),{},{href:r||C,onClick:S||d?i:function(e){i&&i(e),e.defaultPrevented||x(e)},ref:ut(n,I),target:p,"data-discover":_||"render"!==o?void 0:"true"}));return T&&!_?t.createElement(t.Fragment,null,N,t.createElement(at,{page:C})):N}));ft.displayName="Link";var mt=t.forwardRef((function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:s=!1,style:c,to:d,viewTransition:u,children:A}=e,h=a(e,p),f=fe(d,{relative:h.relative}),m=de(),g=t.useContext(te),{navigator:y,basename:b}=t.useContext(oe),E=null!=g&&function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.useContext(ne);v(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=yt("useViewTransitionState"),o=fe(e,{relative:n.relative});if(!r.isTransitioning)return!1;let a=V(r.currentLocation.pathname,i)||r.currentLocation.pathname,s=V(r.nextLocation.pathname,i)||r.nextLocation.pathname;return null!=F(o.pathname,s)||null!=F(o.pathname,a)}(f)&&!0===u,w=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,_=m.pathname,S=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(_=_.toLowerCase(),S=S?S.toLowerCase():null,w=w.toLowerCase()),S&&b&&(S=V(S,b)||S);const C="/"!==w&&w.endsWith("/")?w.length-1:w.length;let T,I=_===w||!s&&_.startsWith(w)&&"/"===_.charAt(C),R=null!=S&&(S===w||!s&&S.startsWith(w)&&"/"===S.charAt(w.length)),x={isActive:I,isPending:R,isTransitioning:E},N=I?r:void 0;T="function"===typeof o?o(x):[o,I?"active":null,R?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let O="function"===typeof c?c(x):c;return t.createElement(ft,l(l({},h),{},{"aria-current":N,className:T,ref:n,style:O,to:d,viewTransition:u}),"function"===typeof A?A(x):A)}));mt.displayName="NavLink";var gt=t.forwardRef(((e,n)=>{let{discover:r="render",fetcherKey:i,navigate:o,reloadDocument:s,replace:c,state:d,method:u=Be,action:A,onSubmit:h,relative:p,preventScrollReset:m,viewTransition:g}=e,y=a(e,f),b=wt(),E=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=t.useContext(oe),i=t.useContext(se);v(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a=l({},fe(e||".",{relative:n})),s=de();if(null==e){a.search=s.search;let e=new URLSearchParams(a.search),t=e.getAll("index"),n=t.some((e=>""===e));if(n){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();a.search=n?"?".concat(n):""}}e&&"."!==e||!o.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(a.pathname="/"===a.pathname?r:W([r,a.pathname]));return w(a)}(A,{relative:p}),_="get"===u.toLowerCase()?"get":"post",S="string"===typeof A&&pt.test(A);return t.createElement("form",l(l({ref:n,method:_,action:E,onSubmit:s?h:e=>{if(h&&h(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;b(t||e.currentTarget,{fetcherKey:i,method:n,navigate:o,replace:c,state:d,relative:p,preventScrollReset:m,viewTransition:g})}},y),{},{"data-discover":S||"render"!==r?void 0:"true"}))}));function vt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function yt(e){let n=t.useContext(ee);return v(n,vt(e)),n}gt.displayName="Form";var bt=0,Et=()=>"__".concat(String(++bt),"__");function wt(){let{router:e}=yt("useSubmit"),{basename:n}=t.useContext(oe),r=Ce("useRouteId");return t.useCallback((async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:a,encType:s,formData:c,body:l}=je(t,n);if(!1===i.navigate){let t=i.fetcherKey||Et();await e.fetch(t,r,i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||a,formEncType:i.encType||s,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||a,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[e,n,r])}const _t=t.createContext(null);function St(){return t.useContext(_t)}const Ct="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var Tt=n(579);const It=function(e){const{children:n,theme:r}=e,i=St(),o=t.useMemo((()=>{const e=null===i?l({},r):function(e,t){if("function"===typeof t)return t(e);return l(l({},e),t)}(i,r);return null!=e&&(e[Ct]=null!==i),e}),[r,i]);return(0,Tt.jsx)(_t.Provider,{value:o,children:n})};var Rt=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(XB){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),xt=Math.abs,Nt=String.fromCharCode,Ot=Object.assign;function kt(e){return e.trim()}function Pt(e,t,n){return e.replace(t,n)}function Bt(e,t){return e.indexOf(t)}function Lt(e,t){return 0|e.charCodeAt(t)}function Dt(e,t,n){return e.slice(t,n)}function Ut(e){return e.length}function Mt(e){return e.length}function Ft(e,t){return t.push(e),e}var jt=1,Qt=1,Vt=0,Ht=0,zt=0,Kt="";function Gt(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:jt,column:Qt,length:a,return:""}}function Wt(e,t){return Ot(Gt("",null,null,"",null,null,0),e,{length:-e.length},t)}function qt(){return zt=Ht>0?Lt(Kt,--Ht):0,Qt--,10===zt&&(Qt=1,jt--),zt}function Yt(){return zt=Ht<Vt?Lt(Kt,Ht++):0,Qt++,10===zt&&(Qt=1,jt++),zt}function Xt(){return Lt(Kt,Ht)}function Jt(){return Ht}function Zt(e,t){return Dt(Kt,e,t)}function $t(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function en(e){return jt=Qt=1,Vt=Ut(Kt=e),Ht=0,[]}function tn(e){return Kt="",e}function nn(e){return kt(Zt(Ht-1,an(91===e?e+2:40===e?e+1:e)))}function rn(e){for(;(zt=Xt())&&zt<33;)Yt();return $t(e)>2||$t(zt)>3?"":" "}function on(e,t){for(;--t&&Yt()&&!(zt<48||zt>102||zt>57&&zt<65||zt>70&&zt<97););return Zt(e,Jt()+(t<6&&32==Xt()&&32==Yt()))}function an(e){for(;Yt();)switch(zt){case e:return Ht;case 34:case 39:34!==e&&39!==e&&an(zt);break;case 40:41===e&&an(e);break;case 92:Yt()}return Ht}function sn(e,t){for(;Yt()&&e+zt!==57&&(e+zt!==84||47!==Xt()););return"/*"+Zt(t,Ht-1)+"*"+Nt(47===e?e:Yt())}function cn(e){for(;!$t(Xt());)Yt();return Zt(e,Ht)}var ln="-ms-",dn="-moz-",un="-webkit-",An="comm",hn="rule",pn="decl",fn="@keyframes";function mn(e,t){for(var n="",r=Mt(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function gn(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case pn:return e.return=e.return||e.value;case An:return"";case fn:return e.return=e.value+"{"+mn(e.children,r)+"}";case hn:e.value=e.props.join(",")}return Ut(n=mn(e.children,r))?e.return=e.value+"{"+n+"}":""}function vn(e){return tn(yn("",null,null,null,[""],e=en(e),0,[0],e))}function yn(e,t,n,r,i,o,a,s,c){for(var l=0,d=0,u=a,A=0,h=0,p=0,f=1,m=1,g=1,v=0,y="",b=i,E=o,w=r,_=y;m;)switch(p=v,v=Yt()){case 40:if(108!=p&&58==Lt(_,u-1)){-1!=Bt(_+=Pt(nn(v),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:_+=nn(v);break;case 9:case 10:case 13:case 32:_+=rn(p);break;case 92:_+=on(Jt()-1,7);continue;case 47:switch(Xt()){case 42:case 47:Ft(En(sn(Yt(),Jt()),t,n),c);break;default:_+="/"}break;case 123*f:s[l++]=Ut(_)*g;case 125*f:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+d:-1==g&&(_=Pt(_,/\f/g,"")),h>0&&Ut(_)-u&&Ft(h>32?wn(_+";",r,n,u-1):wn(Pt(_," ","")+";",r,n,u-2),c);break;case 59:_+=";";default:if(Ft(w=bn(_,t,n,l,d,i,s,y,b=[],E=[],u),o),123===v)if(0===d)yn(_,t,w,w,b,o,u,s,E);else switch(99===A&&110===Lt(_,3)?100:A){case 100:case 108:case 109:case 115:yn(e,w,w,r&&Ft(bn(e,w,w,0,0,i,s,y,i,b=[],u),E),i,E,u,s,r?b:E);break;default:yn(_,w,w,w,[""],E,0,s,E)}}l=d=h=0,f=g=1,y=_="",u=a;break;case 58:u=1+Ut(_),h=p;default:if(f<1)if(123==v)--f;else if(125==v&&0==f++&&125==qt())continue;switch(_+=Nt(v),v*f){case 38:g=d>0?1:(_+="\f",-1);break;case 44:s[l++]=(Ut(_)-1)*g,g=1;break;case 64:45===Xt()&&(_+=nn(Yt())),A=Xt(),d=u=Ut(y=_+=cn(Jt())),v++;break;case 45:45===p&&2==Ut(_)&&(f=0)}}return o}function bn(e,t,n,r,i,o,a,s,c,l,d){for(var u=i-1,A=0===i?o:[""],h=Mt(A),p=0,f=0,m=0;p<r;++p)for(var g=0,v=Dt(e,u+1,u=xt(f=a[p])),y=e;g<h;++g)(y=kt(f>0?A[g]+" "+v:Pt(v,/&\f/g,A[g])))&&(c[m++]=y);return Gt(e,t,n,0===i?hn:s,c,l,d)}function En(e,t,n){return Gt(e,t,n,An,Nt(zt),Dt(e,2,-2),0)}function wn(e,t,n,r){return Gt(e,t,n,pn,Dt(e,0,r),Dt(e,r+1,-1),r)}var _n=function(e,t,n){for(var r=0,i=0;r=i,i=Xt(),38===r&&12===i&&(t[n]=1),!$t(i);)Yt();return Zt(e,Ht)},Sn=function(e,t){return tn(function(e,t){var n=-1,r=44;do{switch($t(r)){case 0:38===r&&12===Xt()&&(t[n]=1),e[n]+=_n(Ht-1,t,n);break;case 2:e[n]+=nn(r);break;case 4:if(44===r){e[++n]=58===Xt()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Nt(r)}}while(r=Yt());return e}(en(e),t))},Cn=new WeakMap,Tn=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Cn.get(n))&&!r){Cn.set(e,!0);for(var i=[],o=Sn(t,i),a=n.props,s=0,c=0;s<o.length;s++)for(var l=0;l<a.length;l++,c++)e.props[c]=i[s]?o[s].replace(/&\f/g,a[l]):a[l]+" "+o[s]}}},In=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Rn(e,t){switch(function(e,t){return 45^Lt(e,0)?(((t<<2^Lt(e,0))<<2^Lt(e,1))<<2^Lt(e,2))<<2^Lt(e,3):0}(e,t)){case 5103:return un+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return un+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return un+e+dn+e+ln+e+e;case 6828:case 4268:return un+e+ln+e+e;case 6165:return un+e+ln+"flex-"+e+e;case 5187:return un+e+Pt(e,/(\w+).+(:[^]+)/,un+"box-$1$2"+ln+"flex-$1$2")+e;case 5443:return un+e+ln+"flex-item-"+Pt(e,/flex-|-self/,"")+e;case 4675:return un+e+ln+"flex-line-pack"+Pt(e,/align-content|flex-|-self/,"")+e;case 5548:return un+e+ln+Pt(e,"shrink","negative")+e;case 5292:return un+e+ln+Pt(e,"basis","preferred-size")+e;case 6060:return un+"box-"+Pt(e,"-grow","")+un+e+ln+Pt(e,"grow","positive")+e;case 4554:return un+Pt(e,/([^-])(transform)/g,"$1"+un+"$2")+e;case 6187:return Pt(Pt(Pt(e,/(zoom-|grab)/,un+"$1"),/(image-set)/,un+"$1"),e,"")+e;case 5495:case 3959:return Pt(e,/(image-set\([^]*)/,un+"$1$`$1");case 4968:return Pt(Pt(e,/(.+:)(flex-)?(.*)/,un+"box-pack:$3"+ln+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+un+e+e;case 4095:case 3583:case 4068:case 2532:return Pt(e,/(.+)-inline(.+)/,un+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ut(e)-1-t>6)switch(Lt(e,t+1)){case 109:if(45!==Lt(e,t+4))break;case 102:return Pt(e,/(.+:)(.+)-([^]+)/,"$1"+un+"$2-$3$1"+dn+(108==Lt(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Bt(e,"stretch")?Rn(Pt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Lt(e,t+1))break;case 6444:switch(Lt(e,Ut(e)-3-(~Bt(e,"!important")&&10))){case 107:return Pt(e,":",":"+un)+e;case 101:return Pt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+un+(45===Lt(e,14)?"inline-":"")+"box$3$1"+un+"$2$3$1"+ln+"$2box$3")+e}break;case 5936:switch(Lt(e,t+11)){case 114:return un+e+ln+Pt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return un+e+ln+Pt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return un+e+ln+Pt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return un+e+ln+e+e}return e}var xn=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case pn:e.return=Rn(e.value,e.length);break;case fn:return mn([Wt(e,{value:Pt(e.value,"@","@"+un)})],r);case hn:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return mn([Wt(e,{props:[Pt(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return mn([Wt(e,{props:[Pt(t,/:(plac\w+)/,":"+un+"input-$1")]}),Wt(e,{props:[Pt(t,/:(plac\w+)/,":-moz-$1")]}),Wt(e,{props:[Pt(t,/:(plac\w+)/,ln+"input-$1")]})],r)}return""}))}}],Nn=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,o=e.stylisPlugins||xn,a={},s=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;s.push(e)}));var c,l,d=[gn,(l=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],u=function(e){var t=Mt(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([Tn,In].concat(o,d));i=function(e,t,n,r){c=n,function(e){mn(vn(e),u)}(e?e+"{"+t.styles+"}":t.styles),r&&(A.inserted[t.name]=!0)};var A={key:t,sheet:new Rt({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:i};return A.sheet.hydrate(s),A};function On(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var kn=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Pn=function(e,t,n){kn(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}};var Bn={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Ln(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Dn=/[A-Z]|^ms/g,Un=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Mn=function(e){return 45===e.charCodeAt(1)},Fn=function(e){return null!=e&&"boolean"!==typeof e},jn=Ln((function(e){return Mn(e)?e:e.replace(Dn,"-$&").toLowerCase()})),Qn=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Un,(function(e,t,n){return Hn={name:t,styles:n,next:Hn},t}))}return 1===Bn[e]||Mn(e)||"number"!==typeof t||0===t?t:t+"px"};function Vn(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return Hn={name:i.name,styles:i.styles,next:Hn},i.name;var o=n;if(void 0!==o.styles){var a=o.next;if(void 0!==a)for(;void 0!==a;)Hn={name:a.name,styles:a.styles,next:Hn},a=a.next;return o.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Vn(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a){var s=a;null!=t&&void 0!==t[s]?r+=o+"{"+t[s]+"}":Fn(s)&&(r+=jn(o)+":"+Qn(o,s)+";")}else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var c=Vn(e,t,a);switch(o){case"animation":case"animationName":r+=jn(o)+":"+c+";";break;default:r+=o+"{"+c+"}"}}else for(var l=0;l<a.length;l++)Fn(a[l])&&(r+=jn(o)+":"+Qn(o,a[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var s=Hn,c=n(e);return Hn=s,Vn(e,t,c)}}var l=n;if(null==t)return l;var d=t[l];return void 0!==d?d:l}var Hn,zn=/label:\s*([^\s;{]+)\s*(;|$)/g;function Kn(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Hn=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=Vn(n,t,o)):i+=o[0];for(var a=1;a<e.length;a++){if(i+=Vn(n,t,e[a]),r)i+=o[a]}zn.lastIndex=0;for(var s,c="";null!==(s=zn.exec(i));)c+="-"+s[1];var l=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+c;return{name:l,styles:i,next:Hn}}var Gn=!!r.useInsertionEffect&&r.useInsertionEffect,Wn=Gn||function(e){return e()},qn=Gn||t.useLayoutEffect,Yn=t.createContext("undefined"!==typeof HTMLElement?Nn({key:"css"}):null),Xn=(Yn.Provider,function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(Yn);return e(n,i,r)}))}),Jn=t.createContext({});var Zn={}.hasOwnProperty,$n="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",er=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return kn(t,n,r),Wn((function(){return Pn(t,n,r)})),null},tr=Xn((function(e,n,r){var i=e.css;"string"===typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var o=e[$n],a=[i],s="";"string"===typeof e.className?s=On(n.registered,a,e.className):null!=e.className&&(s=e.className+" ");var c=Kn(a,void 0,t.useContext(Jn));s+=n.key+"-"+c.name;var l={};for(var d in e)Zn.call(e,d)&&"css"!==d&&d!==$n&&(l[d]=e[d]);return l.className=s,r&&(l.ref=r),t.createElement(t.Fragment,null,t.createElement(er,{cache:n,serialized:c,isStringTag:"string"===typeof o}),t.createElement(o,l))})),nr=tr;const rr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=t.useContext(Jn);return n&&(r=n,0!==Object.keys(r).length)?n:e;var r},ir=["value"],or=t.createContext();const ar=()=>{const e=t.useContext(or);return null!==e&&void 0!==e&&e},sr=function(e){let{value:t}=e,n=a(e,ir);return(0,Tt.jsx)(or.Provider,l({value:null===t||void 0===t||t},n))};function cr(e,t){const n=l({},t);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if("components"===i||"slots"===i)n[i]=l(l({},e[i]),n[i]);else if("componentsProps"===i||"slotProps"===i){const r=e[i],o=t[i];if(o)if(r){n[i]=l({},o);for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const t=e;n[i][t]=cr(r[t],o[t])}}else n[i]=o;else n[i]=r||{}}else void 0===n[i]&&(n[i]=e[i])}return n}const lr=t.createContext(void 0);function dr(e){let{props:n,name:r}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?cr(i.defaultProps,r):i.styleOverrides||i.variants?r:cr(i,r)}({props:n,name:r,theme:{components:t.useContext(lr)}})}const ur=function(e){let{value:t,children:n}=e;return(0,Tt.jsx)(lr.Provider,{value:t,children:n})},Ar={};function hr(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.useMemo((()=>{const t=e&&n[e]||n;if("function"===typeof r){const o=r(t),a=e?l(l({},n),{},{[e]:o}):o;return i?()=>a:a}return e?l(l({},n),{},{[e]:r}):l(l({},n),r)}),[e,n,r,i])}const pr=function(e){const{children:t,theme:n,themeId:r}=e,i=rr(Ar),o=St()||Ar,a=hr(r,i,n),s=hr(r,o,n,!0),c="rtl"===(r?a[r]:a).direction;return(0,Tt.jsx)(It,{theme:s,children:(0,Tt.jsx)(Jn.Provider,{value:a,children:(0,Tt.jsx)(sr,{value:c,children:(0,Tt.jsx)(ur,{value:r?a[r].components:a.components,children:t})})})})},fr="$$material",mr=["theme"];function gr(e){let{theme:t}=e,n=a(e,mr);const r=fr in t?t[fr]:void 0;return(0,Tt.jsx)(pr,l(l({},n),{},{themeId:r?fr:void 0,theme:r||t}))}function vr(e){const t=new URL("https://mui.com/production-error/?code=".concat(e));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.searchParams.append("args[]",e))),"Minified MUI error #".concat(e,"; visit ").concat(t," for the full message.")}function yr(e){if("string"!==typeof e)throw new Error(vr(7));return e.charAt(0).toUpperCase()+e.slice(1)}var br=n(191);function Er(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function wr(e){if(t.isValidElement(e)||(0,br.Hy)(e)||!Er(e))return e;const n={};return Object.keys(e).forEach((t=>{n[t]=wr(e[t])})),n}function _r(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const i=r.clone?l({},e):e;return Er(e)&&Er(n)&&Object.keys(n).forEach((o=>{t.isValidElement(n[o])||(0,br.Hy)(n[o])?i[o]=n[o]:Er(n[o])&&Object.prototype.hasOwnProperty.call(e,o)&&Er(e[o])?i[o]=_r(e[o],n[o],r):r.clone?i[o]=Er(n[o])?wr(n[o]):n[o]:i[o]=n[o]})),i}const Sr=function(e,t){return t?_r(e,t,{clone:!1}):e};const Cr={xs:0,sm:600,md:900,lg:1200,xl:1536},Tr={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(Cr[e],"px)")},Ir={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:Cr[t]||t;return"number"===typeof n&&(n="".concat(n,"px")),e?"@container ".concat(e," (min-width:").concat(n,")"):"@container (min-width:".concat(n,")")}})};function Rr(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||Tr;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||Tr;return Object.keys(t).reduce(((i,o)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith("@".concat(e))))||!!t.match(/^@\d/))}(e.keys,o)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(o)}(r.containerQueries?r:Ir,o);e&&(i[e]=n(t[o],o))}else if(Object.keys(e.values||Cr).includes(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i}),{})}return n(t)}function xr(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=t.keys)||void 0===e?void 0:e.reduce(((e,n)=>(e[t.up(n)]={},e)),{}))||{}}function Nr(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function Or(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let a;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[a],a=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[a],a=n):e[n]=t,e)),{})}function kr(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function Pr(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:kr(e,n)||i,t&&(r=t(r,i,e)),r}const Br=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,o=e=>{if(null==e[t])return null;const o=e[t],a=kr(e.theme,r)||{};return Rr(e,o,(e=>{let r=Pr(a,i,e);return e===r&&"string"===typeof e&&(r=Pr(a,i,"".concat(t).concat("default"===e?"":yr(e)),e)),!1===n?r:{[n]:r}}))};return o.propTypes={},o.filterProps=[t],o};const Lr={m:"margin",p:"padding"},Dr={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Ur={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Mr=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!Ur[e])return[e];e=Ur[e]}const[t,n]=e.split(""),r=Lr[t],i=Dr[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),Fr=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],jr=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Qr=[...Fr,...jr];function Vr(e,t,n,r){var i;const o=null!==(i=kr(e,t,!0))&&void 0!==i?i:n;return"number"===typeof o||"string"===typeof o?e=>"string"===typeof e?e:"string"===typeof o?o.startsWith("var(")&&0===e?0:o.startsWith("var(")&&1===e?o:"calc(".concat(e," * ").concat(o,")"):o*e:Array.isArray(o)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=o[t];return e>=0?n:"number"===typeof n?-n:"string"===typeof n&&n.startsWith("var(")?"calc(-1 * ".concat(n,")"):"-".concat(n)}:"function"===typeof o?o:()=>{}}function Hr(e){return Vr(e,"spacing",8)}function zr(e,t){return"string"===typeof t||null==t?t:e(t)}function Kr(e,t,n,r){if(!t.includes(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=zr(t,n),e)),{})}(Mr(n),r);return Rr(e,e[n],i)}function Gr(e,t){const n=Hr(e.theme);return Object.keys(e).map((r=>Kr(e,t,r,n))).reduce(Sr,{})}function Wr(e){return Gr(e,Fr)}function qr(e){return Gr(e,jr)}function Yr(e){return Gr(e,Qr)}Wr.propTypes={},Wr.filterProps=Fr,qr.propTypes={},qr.filterProps=jr,Yr.propTypes={},Yr.filterProps=Qr;const Xr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?Sr(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};function Jr(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function Zr(e,t){return Br({prop:e,themeKey:"borders",transform:t})}const $r=Zr("border",Jr),ei=Zr("borderTop",Jr),ti=Zr("borderRight",Jr),ni=Zr("borderBottom",Jr),ri=Zr("borderLeft",Jr),ii=Zr("borderColor"),oi=Zr("borderTopColor"),ai=Zr("borderRightColor"),si=Zr("borderBottomColor"),ci=Zr("borderLeftColor"),li=Zr("outline",Jr),di=Zr("outlineColor"),ui=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=Vr(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:zr(t,e)});return Rr(e,e.borderRadius,n)}return null};ui.propTypes={},ui.filterProps=["borderRadius"];Xr($r,ei,ti,ni,ri,ii,oi,ai,si,ci,ui,li,di);const Ai=e=>{if(void 0!==e.gap&&null!==e.gap){const t=Vr(e.theme,"spacing",8),n=e=>({gap:zr(t,e)});return Rr(e,e.gap,n)}return null};Ai.propTypes={},Ai.filterProps=["gap"];const hi=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=Vr(e.theme,"spacing",8),n=e=>({columnGap:zr(t,e)});return Rr(e,e.columnGap,n)}return null};hi.propTypes={},hi.filterProps=["columnGap"];const pi=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=Vr(e.theme,"spacing",8),n=e=>({rowGap:zr(t,e)});return Rr(e,e.rowGap,n)}return null};pi.propTypes={},pi.filterProps=["rowGap"];Xr(Ai,hi,pi,Br({prop:"gridColumn"}),Br({prop:"gridRow"}),Br({prop:"gridAutoFlow"}),Br({prop:"gridAutoColumns"}),Br({prop:"gridAutoRows"}),Br({prop:"gridTemplateColumns"}),Br({prop:"gridTemplateRows"}),Br({prop:"gridTemplateAreas"}),Br({prop:"gridArea"}));function fi(e,t){return"grey"===t?t:e}Xr(Br({prop:"color",themeKey:"palette",transform:fi}),Br({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:fi}),Br({prop:"backgroundColor",themeKey:"palette",transform:fi}));function mi(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const gi=Br({prop:"width",transform:mi}),vi=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null===(n=e.theme)||void 0===n||null===(n=n.breakpoints)||void 0===n||null===(n=n.values)||void 0===n?void 0:n[t])||Cr[t];return i?"px"!==(null===(r=e.theme)||void 0===r||null===(r=r.breakpoints)||void 0===r?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:mi(t)}};return Rr(e,e.maxWidth,t)}return null};vi.filterProps=["maxWidth"];const yi=Br({prop:"minWidth",transform:mi}),bi=Br({prop:"height",transform:mi}),Ei=Br({prop:"maxHeight",transform:mi}),wi=Br({prop:"minHeight",transform:mi}),_i=(Br({prop:"size",cssProperty:"width",transform:mi}),Br({prop:"size",cssProperty:"height",transform:mi}),Xr(gi,vi,yi,bi,Ei,wi,Br({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Jr},borderTop:{themeKey:"borders",transform:Jr},borderRight:{themeKey:"borders",transform:Jr},borderBottom:{themeKey:"borders",transform:Jr},borderLeft:{themeKey:"borders",transform:Jr},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Jr},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:ui},color:{themeKey:"palette",transform:fi},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:fi},backgroundColor:{themeKey:"palette",transform:fi},p:{style:qr},pt:{style:qr},pr:{style:qr},pb:{style:qr},pl:{style:qr},px:{style:qr},py:{style:qr},padding:{style:qr},paddingTop:{style:qr},paddingRight:{style:qr},paddingBottom:{style:qr},paddingLeft:{style:qr},paddingX:{style:qr},paddingY:{style:qr},paddingInline:{style:qr},paddingInlineStart:{style:qr},paddingInlineEnd:{style:qr},paddingBlock:{style:qr},paddingBlockStart:{style:qr},paddingBlockEnd:{style:qr},m:{style:Wr},mt:{style:Wr},mr:{style:Wr},mb:{style:Wr},ml:{style:Wr},mx:{style:Wr},my:{style:Wr},margin:{style:Wr},marginTop:{style:Wr},marginRight:{style:Wr},marginBottom:{style:Wr},marginLeft:{style:Wr},marginX:{style:Wr},marginY:{style:Wr},marginInline:{style:Wr},marginInlineStart:{style:Wr},marginInlineEnd:{style:Wr},marginBlock:{style:Wr},marginBlockStart:{style:Wr},marginBlockEnd:{style:Wr},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Ai},rowGap:{style:pi},columnGap:{style:hi},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:mi},maxWidth:{style:vi},minWidth:{transform:mi},height:{transform:mi},maxHeight:{transform:mi},minHeight:{transform:mi},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const Si=function(){function e(e,t,n,r){const i={[e]:t,theme:n},o=r[e];if(!o)return{[e]:t};const{cssProperty:a=e,themeKey:s,transform:c,style:l}=o;if(null==t)return null;if("typography"===s&&"inherit"===t)return{[e]:t};const d=kr(n,s)||{};if(l)return l(i);return Rr(i,t,(t=>{let n=Pr(d,c,t);return t===n&&"string"===typeof t&&(n=Pr(d,c,"".concat(e).concat("default"===t?"":yr(t)),t)),!1===a?n:{[a]:n}}))}return function t(n){var r;const{sx:i,theme:o={}}=n||{};if(!i)return null;const a=null!==(r=o.unstable_sxConfig)&&void 0!==r?r:_i;function s(n){let r=n;if("function"===typeof n)r=n(o);else if("object"!==typeof n)return n;if(!r)return null;const i=xr(o.breakpoints),s=Object.keys(i);let c=i;return Object.keys(r).forEach((n=>{const i=function(e,t){return"function"===typeof e?e(t):e}(r[n],o);if(null!==i&&void 0!==i)if("object"===typeof i)if(a[n])c=Sr(c,e(n,i,o,a));else{const e=Rr({theme:o},i,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,i)?c=Sr(c,e):c[n]=t({sx:i,theme:o})}else c=Sr(c,e(n,i,o,a))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{var n,r;const i=/min-width:\s*([0-9.]+)/;return+((null===(n=e.match(i))||void 0===n?void 0:n[1])||0)-+((null===(r=t.match(i))||void 0===r?void 0:r[1])||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),l({},t)):t}(o,Nr(s,c))}return Array.isArray(i)?i.map(s):s(i)}}();Si.filterProps=["sx"];const Ci=Si;n(219);var Ti=function(e,n){var r=arguments;if(null==n||!Zn.call(n,"css"))return t.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=nr,o[1]=function(e,t){var n={};for(var r in t)Zn.call(t,r)&&(n[r]=t[r]);return n[$n]=e,n}(e,n);for(var a=2;a<i;a++)o[a]=r[a];return t.createElement.apply(null,o)};!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(Ti||(Ti={}));var Ii=Xn((function(e,n){var r=Kn([e.styles],void 0,t.useContext(Jn)),i=t.useRef();return qn((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),o=!1,a=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==a&&(o=!0,a.setAttribute("data-emotion",e),t.hydrate([a])),i.current=[t,o],function(){t.flush()}}),[n]),qn((function(){var e=i.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==r.next&&Pn(n,r.next,!0),t.tags.length){var o=t.tags[t.tags.length-1].nextElementSibling;t.before=o,t.flush()}n.insert("",r,t,!1)}}),[n,r.name]),null}));function Ri(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Kn(t)}function xi(){var e=Ri.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function Ni(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,Tt.jsx)(Ii,{styles:r})}const Oi="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,ki="mode",Pi="color-scheme",Bi="data-color-scheme";function Li(){}const Di=e=>{let{key:t,storageWindow:n}=e;return n||"undefined"===typeof window||(n=window),{get(e){if("undefined"===typeof window)return;if(!n)return e;let r;try{r=n.localStorage.getItem(t)}catch(i){}return r||e},set:e=>{if(n)try{n.localStorage.setItem(t,e)}catch(r){}},subscribe:e=>{if(!n)return Li;const r=n=>{const r=n.newValue;n.key===t&&e(r)};return n.addEventListener("storage",r),()=>{n.removeEventListener("storage",r)}}}};function Ui(){}function Mi(e){if("undefined"!==typeof window&&"function"===typeof window.matchMedia&&"system"===e){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}}function Fi(e,t){return"light"===e.mode||"system"===e.mode&&"light"===e.systemMode?t("light"):"dark"===e.mode||"system"===e.mode&&"dark"===e.systemMode?t("dark"):void 0}function ji(e){const{defaultMode:n="light",defaultLightColorScheme:r,defaultDarkColorScheme:i,supportedColorSchemes:o=[],modeStorageKey:a=ki,colorSchemeStorageKey:s=Pi,storageWindow:c=("undefined"===typeof window?void 0:window),storageManager:d=Di,noSsr:u=!1}=e,A=o.join(","),h=o.length>1,p=t.useMemo((()=>null===d||void 0===d?void 0:d({key:a,storageWindow:c})),[d,a,c]),f=t.useMemo((()=>null===d||void 0===d?void 0:d({key:"".concat(s,"-light"),storageWindow:c})),[d,s,c]),m=t.useMemo((()=>null===d||void 0===d?void 0:d({key:"".concat(s,"-dark"),storageWindow:c})),[d,s,c]),[g,v]=t.useState((()=>{const e=(null===p||void 0===p?void 0:p.get(n))||n,t=(null===f||void 0===f?void 0:f.get(r))||r,o=(null===m||void 0===m?void 0:m.get(i))||i;return{mode:e,systemMode:Mi(e),lightColorScheme:t,darkColorScheme:o}})),[y,b]=t.useState(u||!h);t.useEffect((()=>{b(!0)}),[]);const E=function(e){return Fi(e,(t=>"light"===t?e.lightColorScheme:"dark"===t?e.darkColorScheme:void 0))}(g),w=t.useCallback((e=>{v((t=>{if(e===t.mode)return t;const r=null!==e&&void 0!==e?e:n;return null===p||void 0===p||p.set(r),l(l({},t),{},{mode:r,systemMode:Mi(r)})}))}),[p,n]),_=t.useCallback((e=>{e?"string"===typeof e?e&&!A.includes(e)?console.error("`".concat(e,"` does not exist in `theme.colorSchemes`.")):v((t=>{const n=l({},t);return Fi(t,(t=>{"light"===t&&(null===f||void 0===f||f.set(e),n.lightColorScheme=e),"dark"===t&&(null===m||void 0===m||m.set(e),n.darkColorScheme=e)})),n})):v((t=>{const n=l({},t),o=null===e.light?r:e.light,a=null===e.dark?i:e.dark;return o&&(A.includes(o)?(n.lightColorScheme=o,null===f||void 0===f||f.set(o)):console.error("`".concat(o,"` does not exist in `theme.colorSchemes`."))),a&&(A.includes(a)?(n.darkColorScheme=a,null===m||void 0===m||m.set(a)):console.error("`".concat(a,"` does not exist in `theme.colorSchemes`."))),n})):v((e=>(null===f||void 0===f||f.set(r),null===m||void 0===m||m.set(i),l(l({},e),{},{lightColorScheme:r,darkColorScheme:i}))))}),[A,f,m,r,i]),S=t.useCallback((e=>{"system"===g.mode&&v((t=>{const n=null!==e&&void 0!==e&&e.matches?"dark":"light";return t.systemMode===n?t:l(l({},t),{},{systemMode:n})}))}),[g.mode]),C=t.useRef(S);return C.current=S,t.useEffect((()=>{if("function"!==typeof window.matchMedia||!h)return;const e=function(){return C.current(...arguments)},t=window.matchMedia("(prefers-color-scheme: dark)");return t.addListener(e),e(t),()=>{t.removeListener(e)}}),[h]),t.useEffect((()=>{if(h){const e=(null===p||void 0===p?void 0:p.subscribe((e=>{e&&!["light","dark","system"].includes(e)||w(e||n)})))||Ui,t=(null===f||void 0===f?void 0:f.subscribe((e=>{e&&!A.match(e)||_({light:e})})))||Ui,r=(null===m||void 0===m?void 0:m.subscribe((e=>{e&&!A.match(e)||_({dark:e})})))||Ui;return()=>{e(),t(),r()}}}),[_,w,A,n,c,h,p,f,m]),l(l({},g),{},{mode:y?g.mode:void 0,systemMode:y?g.systemMode:void 0,colorScheme:y?E:void 0,setMode:w,setColorScheme:_})}const Qi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function Vi(e){return Qi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function Hi(e){if(e.type)return e;if("#"===e.charAt(0))return Hi(function(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(vr(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(vr(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}const zi=(e,t)=>{try{return(e=>{const t=Hi(e);return t.values.slice(0,3).map(((e,n)=>t.type.includes("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")})(e)}catch(n){return e}};function Ki(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=t.includes("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function Gi(e){e=Hi(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let s="rgb";const c=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",c.push(t[3])),Ki({type:s,values:c})}function Wi(e){let t="hsl"===(e=Hi(e)).type||"hsla"===e.type?Hi(Gi(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function qi(e,t){return e=Hi(e),t=Vi(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,Ki(e)}function Yi(e,t,n){try{return qi(e,t)}catch(r){return e}}function Xi(e,t){if(e=Hi(e),t=Vi(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Ki(e)}function Ji(e,t,n){try{return Xi(e,t)}catch(r){return e}}function Zi(e,t){if(e=Hi(e),t=Vi(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Ki(e)}function $i(e,t,n){try{return Zi(e,t)}catch(r){return e}}function eo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return Wi(e)>.5?Xi(e,t):Zi(e,t)}function to(e,t,n){try{return eo(e,t)}catch(r){return e}}const no={black:"#000",white:"#fff"},ro={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},io={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},oo={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ao={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},so={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},co={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lo={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},uo=["mode","contrastThreshold","tonalOffset"];function Ao(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:no.white,default:no.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const ho=Ao();function po(){return{text:{primary:no.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:no.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const fo=po();function mo(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Zi(e.main,i):"dark"===t&&(e.dark=Xi(e.main,o)))}function go(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=a(e,uo),o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:so[200],light:so[50],dark:so[400]}:{main:so[700],light:so[400],dark:so[800]}}(t),s=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:io[200],light:io[50],dark:io[400]}:{main:io[500],light:io[300],dark:io[700]}}(t),c=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:oo[500],light:oo[300],dark:oo[700]}:{main:oo[700],light:oo[400],dark:oo[800]}}(t),d=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:co[400],light:co[300],dark:co[700]}:{main:co[700],light:co[500],dark:co[900]}}(t),u=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:lo[400],light:lo[300],dark:lo[700]}:{main:lo[800],light:lo[500],dark:lo[900]}}(t),A=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ao[400],light:ao[300],dark:ao[700]}:{main:"#ed6c02",light:ao[500],dark:ao[900]}}(t);function h(e){const t=function(e,t){const n=Wi(e),r=Wi(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,fo.text.primary)>=n?fo.text.primary:ho.text.primary;return t}const p=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:a=700}=e;if(t=l({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(vr(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(vr(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return mo(t,"light",o,r),mo(t,"dark",a,r),t.contrastText||(t.contrastText=h(t.main)),t};let f;"light"===t?f=Ao():"dark"===t&&(f=po());return _r(l({common:l({},no),mode:t,primary:p({color:o,name:"primary"}),secondary:p({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:c,name:"error"}),warning:p({color:A,name:"warning"}),info:p({color:d,name:"info"}),success:p({color:u,name:"success"}),grey:ro,contrastThreshold:n,getContrastText:h,augmentColor:p,tonalOffset:r},f),i)}var vo=n(816);function yo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.length)return"";const o=r[0];return"string"!==typeof o||o.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?", ".concat(o):", var(--".concat(e?"".concat(e,"-"):"").concat(o).concat(t(...r.slice(1)),")")}return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return"var(--".concat(e?"".concat(e,"-"):"").concat(n).concat(t(...i),")")}}function bo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hr({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}function Eo(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;"object"===typeof r&&(t[n]="".concat(r.fontStyle?"".concat(r.fontStyle," "):"").concat(r.fontVariant?"".concat(r.fontVariant," "):"").concat(r.fontWeight?"".concat(r.fontWeight," "):"").concat(r.fontStretch?"".concat(r.fontStretch," "):"").concat(r.fontSize||"").concat(r.lineHeight?"/".concat(r.lineHeight," "):"").concat(r.fontFamily||""))})),t}const wo=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=e;t.forEach(((e,o)=>{o===t.length-1?Array.isArray(i)?i[Number(e)]=n:i&&"object"===typeof i&&(i[e]=n):i&&"object"===typeof i&&(i[e]||(i[e]=r.includes(e)?[]:{}),i=i[e])}))};function _o(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},o={},a={};var s,c;return s=(e,t,s)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r="--".concat(n?"".concat(n,"-"):"").concat(e.join("-")),c=((e,t)=>"number"===typeof t?["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t)))||e[e.length-1].toLowerCase().includes("opacity")?t:"".concat(t,"px"):t)(e,t);Object.assign(i,{[r]:c}),wo(o,e,"var(".concat(r,")"),s),wo(a,e,"var(".concat(r,", ").concat(c,")"),s)}},c=e=>"vars"===e[0],function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(t).forEach((t=>{let[i,o]=t;(!c||c&&!c([...n,i]))&&void 0!==o&&null!==o&&("object"===typeof o&&Object.keys(o).length>0?e(o,[...n,i],Array.isArray(o)?[...r,i]:r):s([...n,i],o,r))}))}(e),{css:i,vars:o,varsWithDefaults:a}}const So=["colorSchemes","components","defaultColorScheme"];const Co=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:n=v,disableCssColorScheme:r,colorSchemeSelector:i}=t,{colorSchemes:o={},components:s,defaultColorScheme:c="light"}=e,d=a(e,So),{vars:u,css:A,varsWithDefaults:h}=_o(d,t);let p=h;const f={},{[c]:m}=o,g=a(o,[c].map(vo.A));if(Object.entries(g||{}).forEach((e=>{let[n,r]=e;const{vars:i,css:o,varsWithDefaults:a}=_o(r,t);p=_r(p,a),f[n]={css:o,vars:i}})),m){const{css:e,vars:n,varsWithDefaults:r}=_o(m,t);p=_r(p,r),f[c]={css:e,vars:n}}function v(t,n){let r=i;if("class"===i&&(r=".%s"),"data"===i&&(r="[data-%s]"),null!==i&&void 0!==i&&i.startsWith("data-")&&!i.includes("%s")&&(r="[".concat(i,'="%s"]')),t){if("media"===r){var a;if(e.defaultColorScheme===t)return":root";const r=(null===(a=o[t])||void 0===a||null===(a=a.palette)||void 0===a?void 0:a.mode)||t;return{["@media (prefers-color-scheme: ".concat(r,")")]:{":root":n}}}if(r)return e.defaultColorScheme===t?":root, ".concat(r.replace("%s",String(t))):r.replace("%s",String(t))}return":root"}return{vars:p,generateThemeVars:()=>{let e=l({},u);return Object.entries(f).forEach((t=>{let[,{vars:n}]=t;e=_r(e,n)})),e},generateStyleSheets:()=>{const t=[],i=e.defaultColorScheme||"light";function s(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:l({},n)}:e)}s(n(void 0,l({},A)),A);const{[i]:c}=f,d=a(f,[i].map(vo.A));if(c){var u;const{css:e}=c,t=null===(u=o[i])||void 0===u||null===(u=u.palette)||void 0===u?void 0:u.mode,a=l(!r&&t?{colorScheme:t}:{},e);s(n(i,l({},a)),a)}return Object.entries(d).forEach((e=>{var t;let[i,{css:a}]=e;const c=null===(t=o[i])||void 0===t||null===(t=t.palette)||void 0===t?void 0:t.mode,d=l(!r&&c?{colorScheme:c}:{},a);s(n(i,l({},d)),d)})),t}}};const To=["values","unit","step"];function Io(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,i=a(e,To),o=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>l(l({},e),{},{[t.key]:t.val})),{})})(t),s=Object.keys(o);function c(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function d(e){const i="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(i-r/100).concat(n,")")}function u(e,i){const o=s.indexOf(i);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==o&&"number"===typeof t[s[o]]?t[s[o]]:i)-r/100).concat(n,")")}return l({keys:s,values:o,up:c,down:d,between:u,only:function(e){return s.indexOf(e)+1<s.length?u(e,s[s.indexOf(e)+1]):c(e)},not:function(e){const t=s.indexOf(e);return 0===t?c(s[1]):t===s.length-1?d(s[t]):u(e,s[s.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},i)}const Ro={borderRadius:4};function xo(e,t){const n=this;if(n.vars){var r;if(null===(r=n.colorSchemes)||void 0===r||!r[e]||"function"!==typeof n.getColorSchemeSelector)return{};let i=n.getColorSchemeSelector(e);return"&"===i?t:((i.includes("data-")||i.includes("."))&&(i="*:where(".concat(i.replace(/\s*&$/,""),") &")),{[i]:t})}return n.palette.mode===e?t:{}}const No=["breakpoints","palette","spacing","shape"];const Oo=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:i={}}=e,o=a(e,No),s=Io(t),c=bo(r);let d=_r({breakpoints:s,direction:"ltr",components:{},palette:l({mode:"light"},n),spacing:c,shape:l(l({},Ro),i)},o);d=function(e){const t=(e,t)=>e.replace("@media",t?"@container ".concat(t):"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},i=e=>(n(r,e),r);return n(i),l(l({},e),{},{containerQueries:i})}(d),d.applyStyles=xo;for(var u=arguments.length,A=new Array(u>1?u-1:0),h=1;h<u;h++)A[h-1]=arguments[h];return d=A.reduce(((e,t)=>_r(e,t)),d),d.unstable_sxConfig=l(l({},_i),null===o||void 0===o?void 0:o.unstable_sxConfig),d.unstable_sx=function(e){return Ci({sx:e,theme:this})},d};function ko(e,t){return l({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const Po=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const Bo={textTransform:"uppercase"},Lo='"Roboto", "Helvetica", "Arial", sans-serif';function Do(e,t){const n="function"===typeof t?t(e):t,{fontFamily:r=Lo,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:s=400,fontWeightMedium:c=500,fontWeightBold:d=700,htmlFontSize:u=16,allVariants:A,pxToRem:h}=n,p=a(n,Po);const f=i/14,m=h||(e=>"".concat(e/u*f,"rem")),g=(e,t,n,i,o)=>{return l(l(l({fontFamily:r,fontWeight:e,fontSize:m(t),lineHeight:n},r===Lo?{letterSpacing:"".concat((a=i/t,Math.round(1e5*a)/1e5),"em")}:{}),o),A);var a},v={h1:g(o,96,1.167,-1.5),h2:g(o,60,1.2,-.5),h3:g(s,48,1.167,0),h4:g(s,34,1.235,.25),h5:g(s,24,1.334,0),h6:g(c,20,1.6,.15),subtitle1:g(s,16,1.75,.15),subtitle2:g(c,14,1.57,.1),body1:g(s,16,1.5,.15),body2:g(s,14,1.43,.15),button:g(c,14,1.75,.4,Bo),caption:g(s,12,1.66,.4),overline:g(s,12,2.66,1,Bo),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return _r(l({htmlFontSize:u,pxToRem:m,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:s,fontWeightMedium:c,fontWeightBold:d},v),p,{clone:!1})}function Uo(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const Mo=["none",Uo(0,2,1,-1,0,1,1,0,0,1,3,0),Uo(0,3,1,-2,0,2,2,0,0,1,5,0),Uo(0,3,3,-2,0,3,4,0,0,1,8,0),Uo(0,2,4,-1,0,4,5,0,0,1,10,0),Uo(0,3,5,-1,0,5,8,0,0,1,14,0),Uo(0,3,5,-1,0,6,10,0,0,1,18,0),Uo(0,4,5,-2,0,7,10,1,0,2,16,1),Uo(0,5,5,-3,0,8,10,1,0,3,14,2),Uo(0,5,6,-3,0,9,12,1,0,3,16,2),Uo(0,6,6,-3,0,10,14,1,0,4,18,3),Uo(0,6,7,-4,0,11,15,1,0,4,20,3),Uo(0,7,8,-4,0,12,17,2,0,5,22,4),Uo(0,7,8,-4,0,13,19,2,0,5,24,4),Uo(0,7,9,-4,0,14,21,2,0,5,26,4),Uo(0,8,9,-5,0,15,22,2,0,6,28,5),Uo(0,8,10,-5,0,16,24,2,0,6,30,5),Uo(0,8,11,-5,0,17,26,2,0,6,32,5),Uo(0,9,11,-5,0,18,28,2,0,7,34,6),Uo(0,9,12,-6,0,19,29,2,0,7,36,6),Uo(0,10,13,-6,0,20,31,3,0,8,38,7),Uo(0,10,13,-6,0,21,33,3,0,8,40,7),Uo(0,10,14,-6,0,22,35,3,0,8,42,7),Uo(0,11,14,-7,0,23,36,3,0,9,44,8),Uo(0,11,15,-7,0,24,38,3,0,9,46,8)],Fo=["duration","easing","delay"],jo={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Qo={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Vo(e){return"".concat(Math.round(e),"ms")}function Ho(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function zo(e){const t=l(l({},jo),e.easing),n=l(l({},Qo),e.duration);return l(l({getAutoHeightDuration:Ho,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:o=t.easeInOut,delay:s=0}=r;a(r,Fo);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof i?i:Vo(i)," ").concat(o," ").concat("string"===typeof s?s:Vo(s)))).join(",")}},e),{},{easing:t,duration:n})}const Ko={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Go(){const e=l({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return function e(t){const n=Object.entries(t);for(let i=0;i<n.length;i++){const[o,a]=n[i];!Er(r=a)&&"undefined"!==typeof r&&"string"!==typeof r&&"boolean"!==typeof r&&"number"!==typeof r&&!Array.isArray(r)||o.startsWith("unstable_")?delete t[o]:Er(a)&&(t[o]=l({},a),e(t[o]))}var r}(e),"import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ".concat(JSON.stringify(e,null,2),";\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;")}const Wo=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];const qo=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:n={},spacing:r,palette:i={},transitions:o={},typography:s={},shape:c}=e,d=a(e,Wo);if(e.vars&&void 0===e.generateThemeVars)throw new Error(vr(20));const u=go(i),A=Oo(e);let h=_r(A,{mixins:ko(A.breakpoints,n),palette:u,shadows:Mo.slice(),typography:Do(u,s),transitions:zo(o),zIndex:l({},Ko)});h=_r(h,d);for(var p=arguments.length,f=new Array(p>1?p-1:0),m=1;m<p;m++)f[m-1]=arguments[m];return h=f.reduce(((e,t)=>_r(e,t)),h),h.unstable_sxConfig=l(l({},_i),null===d||void 0===d?void 0:d.unstable_sxConfig),h.unstable_sx=function(e){return Ci({sx:e,theme:this})},h.toRuntimeSource=Go,h};function Yo(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}const Xo=["palette","opacity","overlays"],Jo=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const n=Yo(t);return"linear-gradient(rgba(255 255 255 / ".concat(n,"), rgba(255 255 255 / ").concat(n,"))")}));function Zo(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function $o(e){return"dark"===e?Jo:[]}function ea(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!(null===(t=e[1])||void 0===t||!t.match(/(mode|contrastThreshold|tonalOffset)/))}const ta=e=>[...[...Array(25)].map(((t,n)=>"--".concat(e?"".concat(e,"-"):"","overlays-").concat(n))),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkBg"),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkColor")],na=e=>(t,n)=>{const r=e.rootSelector||":root",i=e.colorSchemeSelector;let o=i;if("class"===i&&(o=".%s"),"data"===i&&(o="[data-%s]"),null!==i&&void 0!==i&&i.startsWith("data-")&&!i.includes("%s")&&(o="[".concat(i,'="%s"]')),e.defaultColorScheme===t){if("dark"===t){const i={};return ta(e.cssVarPrefix).forEach((e=>{i[e]=n[e],delete n[e]})),"media"===o?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:o?{[o.replace("%s",t)]:i,["".concat(r,", ").concat(o.replace("%s",t))]:n}:{[r]:l(l({},n),i)}}if(o&&"media"!==o)return"".concat(r,", ").concat(o.replace("%s",String(t)))}else if(t){if("media"===o)return{["@media (prefers-color-scheme: ".concat(String(t),")")]:{[r]:n}};if(o)return o.replace("%s",String(t))}return r},ra=["palette"],ia=["colorSchemes","defaultColorScheme","disableCssColorScheme","cssVarPrefix","shouldSkipGeneratingVar","colorSchemeSelector","rootSelector"];function oa(e,t,n){!e[t]&&n&&(e[t]=n)}function aa(e){return"string"===typeof e&&e.startsWith("hsl")?Gi(e):e}function sa(e,t){"".concat(t,"Channel")in e||(e["".concat(t,"Channel")]=zi(aa(e[t]),("MUI: Can't create `palette.".concat(t,"Channel` because `palette.").concat(t,"` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()."),"To suppress this warning, you need to explicitly provide the `palette.".concat(t,'Channel` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.'))))}const ca=e=>{try{return e()}catch(t){}};function la(e,t,n,r){var i,o,s;if(!t)return;t=!0===t?{}:t;const c="dark"===r?"dark":"light";var d;if(!n)return void(e[r]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:r}=e,i=a(e,Xo),o=go(t);return l({palette:o,opacity:l(l({},Zo(o.mode)),n),overlays:r||$o(o.mode)},i)}(l(l({},t),{},{palette:l({mode:c},null===(d=t)||void 0===d?void 0:d.palette)})));const u=qo(l(l({},n),{},{palette:l({mode:c},null===(i=t)||void 0===i?void 0:i.palette)})),{palette:A}=u,h=a(u,ra);return e[r]=l(l({},t),{},{palette:A,opacity:l(l({},Zo(c)),null===(o=t)||void 0===o?void 0:o.opacity),overlays:(null===(s=t)||void 0===s?void 0:s.overlays)||$o(c)}),h}function da(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:o=ea,colorSchemeSelector:s=(t.light&&t.dark?"media":void 0),rootSelector:c=":root"}=e,d=a(e,ia),u=Object.keys(t)[0],A=n||(t.light&&"light"!==u?"light":u),h=function(){return yo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")}(i),{[A]:p,light:f,dark:m}=t,g=l({},a(t,[A,"light","dark"].map(vo.A)));let v=p;if(("dark"===A&&!("dark"in t)||"light"===A&&!("light"in t))&&(v=!0),!v)throw new Error(vr(21,A));const y=la(g,v,d,A);f&&!g.light&&la(g,f,void 0,"light"),m&&!g.dark&&la(g,m,void 0,"dark");let b=l(l({defaultColorScheme:A},y),{},{cssVarPrefix:i,colorSchemeSelector:s,rootSelector:c,getCssVar:h,colorSchemes:g,font:l(l({},Eo(y.typography)),y.font),spacing:(E=d.spacing,"number"===typeof E?"".concat(E,"px"):"string"===typeof E||"function"===typeof E||Array.isArray(E)?E:"8px")});var E;Object.keys(b.colorSchemes).forEach((e=>{const t=b.colorSchemes[e].palette,n=e=>{const n=e.split("-"),r=n[1],i=n[2];return h(e,t[r][i])};var r;if("light"===t.mode&&(oa(t.common,"background","#fff"),oa(t.common,"onBackground","#000")),"dark"===t.mode&&(oa(t.common,"background","#000"),oa(t.common,"onBackground","#fff")),r=t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"].forEach((e=>{r[e]||(r[e]={})})),"light"===t.mode){oa(t.Alert,"errorColor",Ji(t.error.light,.6)),oa(t.Alert,"infoColor",Ji(t.info.light,.6)),oa(t.Alert,"successColor",Ji(t.success.light,.6)),oa(t.Alert,"warningColor",Ji(t.warning.light,.6)),oa(t.Alert,"errorFilledBg",n("palette-error-main")),oa(t.Alert,"infoFilledBg",n("palette-info-main")),oa(t.Alert,"successFilledBg",n("palette-success-main")),oa(t.Alert,"warningFilledBg",n("palette-warning-main")),oa(t.Alert,"errorFilledColor",ca((()=>t.getContrastText(t.error.main)))),oa(t.Alert,"infoFilledColor",ca((()=>t.getContrastText(t.info.main)))),oa(t.Alert,"successFilledColor",ca((()=>t.getContrastText(t.success.main)))),oa(t.Alert,"warningFilledColor",ca((()=>t.getContrastText(t.warning.main)))),oa(t.Alert,"errorStandardBg",$i(t.error.light,.9)),oa(t.Alert,"infoStandardBg",$i(t.info.light,.9)),oa(t.Alert,"successStandardBg",$i(t.success.light,.9)),oa(t.Alert,"warningStandardBg",$i(t.warning.light,.9)),oa(t.Alert,"errorIconColor",n("palette-error-main")),oa(t.Alert,"infoIconColor",n("palette-info-main")),oa(t.Alert,"successIconColor",n("palette-success-main")),oa(t.Alert,"warningIconColor",n("palette-warning-main")),oa(t.AppBar,"defaultBg",n("palette-grey-100")),oa(t.Avatar,"defaultBg",n("palette-grey-400")),oa(t.Button,"inheritContainedBg",n("palette-grey-300")),oa(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),oa(t.Chip,"defaultBorder",n("palette-grey-400")),oa(t.Chip,"defaultAvatarColor",n("palette-grey-700")),oa(t.Chip,"defaultIconColor",n("palette-grey-700")),oa(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),oa(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),oa(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),oa(t.LinearProgress,"primaryBg",$i(t.primary.main,.62)),oa(t.LinearProgress,"secondaryBg",$i(t.secondary.main,.62)),oa(t.LinearProgress,"errorBg",$i(t.error.main,.62)),oa(t.LinearProgress,"infoBg",$i(t.info.main,.62)),oa(t.LinearProgress,"successBg",$i(t.success.main,.62)),oa(t.LinearProgress,"warningBg",$i(t.warning.main,.62)),oa(t.Skeleton,"bg","rgba(".concat(n("palette-text-primaryChannel")," / 0.11)")),oa(t.Slider,"primaryTrack",$i(t.primary.main,.62)),oa(t.Slider,"secondaryTrack",$i(t.secondary.main,.62)),oa(t.Slider,"errorTrack",$i(t.error.main,.62)),oa(t.Slider,"infoTrack",$i(t.info.main,.62)),oa(t.Slider,"successTrack",$i(t.success.main,.62)),oa(t.Slider,"warningTrack",$i(t.warning.main,.62));const e=to(t.background.default,.8);oa(t.SnackbarContent,"bg",e),oa(t.SnackbarContent,"color",ca((()=>t.getContrastText(e)))),oa(t.SpeedDialAction,"fabHoverBg",to(t.background.paper,.15)),oa(t.StepConnector,"border",n("palette-grey-400")),oa(t.StepContent,"border",n("palette-grey-400")),oa(t.Switch,"defaultColor",n("palette-common-white")),oa(t.Switch,"defaultDisabledColor",n("palette-grey-100")),oa(t.Switch,"primaryDisabledColor",$i(t.primary.main,.62)),oa(t.Switch,"secondaryDisabledColor",$i(t.secondary.main,.62)),oa(t.Switch,"errorDisabledColor",$i(t.error.main,.62)),oa(t.Switch,"infoDisabledColor",$i(t.info.main,.62)),oa(t.Switch,"successDisabledColor",$i(t.success.main,.62)),oa(t.Switch,"warningDisabledColor",$i(t.warning.main,.62)),oa(t.TableCell,"border",$i(Yi(t.divider,1),.88)),oa(t.Tooltip,"bg",Yi(t.grey[700],.92))}if("dark"===t.mode){oa(t.Alert,"errorColor",$i(t.error.light,.6)),oa(t.Alert,"infoColor",$i(t.info.light,.6)),oa(t.Alert,"successColor",$i(t.success.light,.6)),oa(t.Alert,"warningColor",$i(t.warning.light,.6)),oa(t.Alert,"errorFilledBg",n("palette-error-dark")),oa(t.Alert,"infoFilledBg",n("palette-info-dark")),oa(t.Alert,"successFilledBg",n("palette-success-dark")),oa(t.Alert,"warningFilledBg",n("palette-warning-dark")),oa(t.Alert,"errorFilledColor",ca((()=>t.getContrastText(t.error.dark)))),oa(t.Alert,"infoFilledColor",ca((()=>t.getContrastText(t.info.dark)))),oa(t.Alert,"successFilledColor",ca((()=>t.getContrastText(t.success.dark)))),oa(t.Alert,"warningFilledColor",ca((()=>t.getContrastText(t.warning.dark)))),oa(t.Alert,"errorStandardBg",Ji(t.error.light,.9)),oa(t.Alert,"infoStandardBg",Ji(t.info.light,.9)),oa(t.Alert,"successStandardBg",Ji(t.success.light,.9)),oa(t.Alert,"warningStandardBg",Ji(t.warning.light,.9)),oa(t.Alert,"errorIconColor",n("palette-error-main")),oa(t.Alert,"infoIconColor",n("palette-info-main")),oa(t.Alert,"successIconColor",n("palette-success-main")),oa(t.Alert,"warningIconColor",n("palette-warning-main")),oa(t.AppBar,"defaultBg",n("palette-grey-900")),oa(t.AppBar,"darkBg",n("palette-background-paper")),oa(t.AppBar,"darkColor",n("palette-text-primary")),oa(t.Avatar,"defaultBg",n("palette-grey-600")),oa(t.Button,"inheritContainedBg",n("palette-grey-800")),oa(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),oa(t.Chip,"defaultBorder",n("palette-grey-700")),oa(t.Chip,"defaultAvatarColor",n("palette-grey-300")),oa(t.Chip,"defaultIconColor",n("palette-grey-300")),oa(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),oa(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),oa(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),oa(t.LinearProgress,"primaryBg",Ji(t.primary.main,.5)),oa(t.LinearProgress,"secondaryBg",Ji(t.secondary.main,.5)),oa(t.LinearProgress,"errorBg",Ji(t.error.main,.5)),oa(t.LinearProgress,"infoBg",Ji(t.info.main,.5)),oa(t.LinearProgress,"successBg",Ji(t.success.main,.5)),oa(t.LinearProgress,"warningBg",Ji(t.warning.main,.5)),oa(t.Skeleton,"bg","rgba(".concat(n("palette-text-primaryChannel")," / 0.13)")),oa(t.Slider,"primaryTrack",Ji(t.primary.main,.5)),oa(t.Slider,"secondaryTrack",Ji(t.secondary.main,.5)),oa(t.Slider,"errorTrack",Ji(t.error.main,.5)),oa(t.Slider,"infoTrack",Ji(t.info.main,.5)),oa(t.Slider,"successTrack",Ji(t.success.main,.5)),oa(t.Slider,"warningTrack",Ji(t.warning.main,.5));const e=to(t.background.default,.98);oa(t.SnackbarContent,"bg",e),oa(t.SnackbarContent,"color",ca((()=>t.getContrastText(e)))),oa(t.SpeedDialAction,"fabHoverBg",to(t.background.paper,.15)),oa(t.StepConnector,"border",n("palette-grey-600")),oa(t.StepContent,"border",n("palette-grey-600")),oa(t.Switch,"defaultColor",n("palette-grey-300")),oa(t.Switch,"defaultDisabledColor",n("palette-grey-600")),oa(t.Switch,"primaryDisabledColor",Ji(t.primary.main,.55)),oa(t.Switch,"secondaryDisabledColor",Ji(t.secondary.main,.55)),oa(t.Switch,"errorDisabledColor",Ji(t.error.main,.55)),oa(t.Switch,"infoDisabledColor",Ji(t.info.main,.55)),oa(t.Switch,"successDisabledColor",Ji(t.success.main,.55)),oa(t.Switch,"warningDisabledColor",Ji(t.warning.main,.55)),oa(t.TableCell,"border",Ji(Yi(t.divider,1),.68)),oa(t.Tooltip,"bg",Yi(t.grey[700],.92))}sa(t.background,"default"),sa(t.background,"paper"),sa(t.common,"background"),sa(t.common,"onBackground"),sa(t,"divider"),Object.keys(t).forEach((e=>{const n=t[e];"tonalOffset"!==e&&n&&"object"===typeof n&&(n.main&&oa(t[e],"mainChannel",zi(aa(n.main))),n.light&&oa(t[e],"lightChannel",zi(aa(n.light))),n.dark&&oa(t[e],"darkChannel",zi(aa(n.dark))),n.contrastText&&oa(t[e],"contrastTextChannel",zi(aa(n.contrastText))),"text"===e&&(sa(t[e],"primary"),sa(t[e],"secondary")),"action"===e&&(n.active&&sa(t[e],"active"),n.selected&&sa(t[e],"selected")))}))}));for(var w=arguments.length,_=new Array(w>1?w-1:0),S=1;S<w;S++)_[S-1]=arguments[S];b=_.reduce(((e,t)=>_r(e,t)),b);const C={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:o,getSelector:na(b)},{vars:T,generateThemeVars:I,generateStyleSheets:R}=Co(b,C);return b.vars=T,Object.entries(b.colorSchemes[b.defaultColorScheme]).forEach((e=>{let[t,n]=e;b[t]=n})),b.generateThemeVars=I,b.generateStyleSheets=R,b.generateSpacing=function(){return bo(d.spacing,Hr(this))},b.getColorSchemeSelector=function(e){return function(t){return"media"===e?"@media (prefers-color-scheme: ".concat(t,")"):e?e.startsWith("data-")&&!e.includes("%s")?"[".concat(e,'="').concat(t,'"] &'):"class"===e?".".concat(t," &"):"data"===e?"[data-".concat(t,"] &"):"".concat(e.replace("%s",t)," &"):"&"}}(s),b.spacing=b.generateSpacing(),b.shouldSkipGeneratingVar=o,b.unstable_sxConfig=l(l({},_i),null===d||void 0===d?void 0:d.unstable_sxConfig),b.unstable_sx=function(e){return Ci({sx:e,theme:this})},b.toRuntimeSource=Go,b}const ua=["palette","cssVariables","colorSchemes","defaultColorScheme"];function Aa(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]=l(l({},!0!==n&&n),{},{palette:go(l(l({},!0===n?{}:n.palette),{},{mode:t}))}))}function ha(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:n=!1,colorSchemes:r=(t?void 0:{light:!0}),defaultColorScheme:i=(null===t||void 0===t?void 0:t.mode)}=e,o=a(e,ua),s=i||"light",c=null===r||void 0===r?void 0:r[s],d=l(l({},r),t?{[s]:l(l({},"boolean"!==typeof c&&c),{},{palette:t})}:void 0);for(var u=arguments.length,A=new Array(u>1?u-1:0),h=1;h<u;h++)A[h-1]=arguments[h];if(!1===n){if(!("colorSchemes"in e))return qo(e,...A);let n=t;"palette"in e||d[s]&&(!0!==d[s]?n=d[s].palette:"dark"===s&&(n={mode:"dark"}));const r=qo(l(l({},e),{},{palette:n}),...A);return r.defaultColorScheme=s,r.colorSchemes=d,"light"===r.palette.mode&&(r.colorSchemes.light=l(l({},!0!==d.light&&d.light),{},{palette:r.palette}),Aa(r,"dark",d.dark)),"dark"===r.palette.mode&&(r.colorSchemes.dark=l(l({},!0!==d.dark&&d.dark),{},{palette:r.palette}),Aa(r,"light",d.light)),r}return t||"light"in d||"light"!==s||(d.light=!0),da(l(l({},o),{},{colorSchemes:d,defaultColorScheme:s},"boolean"!==typeof n&&n),...A)}const pa={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"};const{CssVarsProvider:fa,useColorScheme:ma,getInitColorSchemeScript:ga}=function(e){const{themeId:n,theme:r={},modeStorageKey:i=ki,colorSchemeStorageKey:o=Pi,disableTransitionOnChange:a=!1,defaultColorScheme:s,resolveTheme:c}=e,d={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},u=t.createContext(void 0),A={},h={},p="string"===typeof s?s:s.light,f="string"===typeof s?s:s.dark;return{CssVarsProvider:function(e){var d,p,f;const{children:m,theme:g,modeStorageKey:v=i,colorSchemeStorageKey:y=o,disableTransitionOnChange:b=a,storageManager:E,storageWindow:w=("undefined"===typeof window?void 0:window),documentNode:_=("undefined"===typeof document?void 0:document),colorSchemeNode:S=("undefined"===typeof document?void 0:document.documentElement),disableNestedContext:C=!1,disableStyleSheetGeneration:T=!1,defaultMode:I="system",forceThemeRerender:R=!1,noSsr:x}=e,N=t.useRef(!1),O=St(),k=t.useContext(u),P=!!k&&!C,B=t.useMemo((()=>g||("function"===typeof r?r():r)),[g]),L=B[n],D=L||B,{colorSchemes:U=A,components:M=h,cssVarPrefix:F}=D,j=Object.keys(U).filter((e=>!!U[e])).join(","),Q=t.useMemo((()=>j.split(",")),[j]),V="string"===typeof s?s:s.light,H="string"===typeof s?s:s.dark,z=U[V]&&U[H]?I:(null===(d=U[D.defaultColorScheme])||void 0===d||null===(d=d.palette)||void 0===d?void 0:d.mode)||(null===(p=D.palette)||void 0===p?void 0:p.mode),{mode:K,setMode:G,systemMode:W,lightColorScheme:q,darkColorScheme:Y,colorScheme:X,setColorScheme:J}=ji({supportedColorSchemes:Q,defaultLightColorScheme:V,defaultDarkColorScheme:H,modeStorageKey:v,colorSchemeStorageKey:y,defaultMode:z,storageManager:E,storageWindow:w,noSsr:x});let Z=K,$=X;P&&(Z=k.mode,$=k.colorScheme);let ee=$||D.defaultColorScheme;D.vars&&!R&&(ee=D.defaultColorScheme);const te=t.useMemo((()=>{var e;const t=(null===(e=D.generateThemeVars)||void 0===e?void 0:e.call(D))||D.vars,n=l(l({},D),{},{components:M,colorSchemes:U,cssVarPrefix:F,vars:t});if("function"===typeof n.generateSpacing&&(n.spacing=n.generateSpacing()),ee){const e=U[ee];e&&"object"===typeof e&&Object.keys(e).forEach((t=>{e[t]&&"object"===typeof e[t]?n[t]=l(l({},n[t]),e[t]):n[t]=e[t]}))}return c?c(n):n}),[D,ee,M,U,F]),ne=D.colorSchemeSelector;Oi((()=>{if($&&S&&ne&&"media"!==ne){const e=ne;let t=ne;if("class"===e&&(t=".%s"),"data"===e&&(t="[data-%s]"),null!==e&&void 0!==e&&e.startsWith("data-")&&!e.includes("%s")&&(t="[".concat(e,'="%s"]')),t.startsWith("."))S.classList.remove(...Q.map((e=>t.substring(1).replace("%s",e)))),S.classList.add(t.substring(1).replace("%s",$));else{const e=t.replace("%s",$).match(/\[([^\]]+)\]/);if(e){const[t,n]=e[1].split("=");n||Q.forEach((e=>{S.removeAttribute(t.replace($,e))})),S.setAttribute(t,n?n.replace(/"|'/g,""):"")}else S.setAttribute(t,$)}}}),[$,ne,S,Q]),t.useEffect((()=>{let e;if(b&&N.current&&_){const t=_.createElement("style");t.appendChild(_.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),_.head.appendChild(t),window.getComputedStyle(_.body),e=setTimeout((()=>{_.head.removeChild(t)}),1)}return()=>{clearTimeout(e)}}),[$,b,_]),t.useEffect((()=>(N.current=!0,()=>{N.current=!1})),[]);const re=t.useMemo((()=>({allColorSchemes:Q,colorScheme:$,darkColorScheme:Y,lightColorScheme:q,mode:Z,setColorScheme:J,setMode:G,systemMode:W})),[Q,$,Y,q,Z,J,G,W,te.colorSchemeSelector]);let ie=!0;(T||!1===D.cssVariables||P&&(null===O||void 0===O?void 0:O.cssVarPrefix)===F)&&(ie=!1);const oe=(0,Tt.jsxs)(t.Fragment,{children:[(0,Tt.jsx)(pr,{themeId:L?n:void 0,theme:te,children:m}),ie&&(0,Tt.jsx)(Ni,{styles:(null===(f=te.generateStyleSheets)||void 0===f?void 0:f.call(te))||[]})]});return P?oe:(0,Tt.jsx)(u.Provider,{value:re,children:oe})},useColorScheme:()=>t.useContext(u)||d,getInitColorSchemeScript:e=>function(e){const{defaultMode:t="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=ki,colorSchemeStorageKey:o=Pi,attribute:a=Bi,colorSchemeNode:s="document.documentElement",nonce:c}=e||{};let l="",d=a;if("class"===a&&(d=".%s"),"data"===a&&(d="[data-%s]"),d.startsWith(".")){const e=d.substring(1);l+="".concat(s,".classList.remove('").concat(e,"'.replace('%s', light), '").concat(e,"'.replace('%s', dark));\n      ").concat(s,".classList.add('").concat(e,"'.replace('%s', colorScheme));")}const u=d.match(/\[([^\]]+)\]/);if(u){const[e,t]=u[1].split("=");t||(l+="".concat(s,".removeAttribute('").concat(e,"'.replace('%s', light));\n      ").concat(s,".removeAttribute('").concat(e,"'.replace('%s', dark));")),l+="\n      ".concat(s,".setAttribute('").concat(e,"'.replace('%s', colorScheme), ").concat(t?"".concat(t,".replace('%s', colorScheme)"):'""',");")}else l+="".concat(s,".setAttribute('").concat(d,"', colorScheme);");return(0,Tt.jsx)("script",{suppressHydrationWarning:!0,nonce:"undefined"===typeof window?c:"",dangerouslySetInnerHTML:{__html:"(function() {\ntry {\n  let colorScheme = '';\n  const mode = localStorage.getItem('".concat(i,"') || '").concat(t,"';\n  const dark = localStorage.getItem('").concat(o,"-dark') || '").concat(r,"';\n  const light = localStorage.getItem('").concat(o,"-light') || '").concat(n,"';\n  if (mode === 'system') {\n    // handle system mode\n    const mql = window.matchMedia('(prefers-color-scheme: dark)');\n    if (mql.matches) {\n      colorScheme = dark\n    } else {\n      colorScheme = light\n    }\n  }\n  if (mode === 'light') {\n    colorScheme = light;\n  }\n  if (mode === 'dark') {\n    colorScheme = dark;\n  }\n  if (colorScheme) {\n    ").concat(l,"\n  }\n} catch(e){}})();")}},"mui-color-scheme-init")}(l({colorSchemeStorageKey:o,defaultLightColorScheme:p,defaultDarkColorScheme:f,modeStorageKey:i},e))}}({themeId:fr,theme:()=>ha({cssVariables:!0}),colorSchemeStorageKey:pa.colorSchemeStorageKey,modeStorageKey:pa.modeStorageKey,defaultColorScheme:{light:pa.defaultLightColorScheme,dark:pa.defaultDarkColorScheme},resolveTheme:e=>{const t=l(l({},e),{},{typography:Do(e.palette,e.typography)});return t.unstable_sx=function(e){return Ci({sx:e,theme:this})},t}});const va=fa,ya=["theme"];function ba(e){let{theme:n}=e,r=a(e,ya);const i=t.useMemo((()=>{if("function"===typeof n)return n;const e=fr in n?n[fr]:n;return"colorSchemes"in e?null:"vars"in e?n:l(l({},n),{},{vars:null})}),[n]);return i?(0,Tt.jsx)(gr,l({theme:i},r)):(0,Tt.jsx)(va,l({theme:n},r))}const Ea=["sx"];function wa(e){const{sx:t}=e,n=a(e,Ea),{systemProps:r,otherProps:i}=(e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!==(t=null===e||void 0===e||null===(n=e.theme)||void 0===n?void 0:n.unstable_sxConfig)&&void 0!==t?t:_i;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r})(n);let o;return o=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return Er(e)?l(l({},r),e):r}:l(l({},r),t),l(l({},i),{},{sx:o})}const _a=Oo();const Sa=function(){return rr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a)};const Ca=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=Sa(r),o="function"===typeof t?t(n&&i[n]||i):t;return(0,Tt.jsx)(Ni,{styles:o})},Ta=ha();const Ia=function(e){return(0,Tt.jsx)(Ca,l(l({},e),{},{defaultTheme:Ta,themeId:fr}))};function Ra(e){return function(t){return(0,Tt.jsx)(Ia,{styles:"function"===typeof e?n=>e(l({theme:n},t)):e})}}function xa(e){return dr(e)}const Na="function"===typeof Ra({}),Oa=(e,t)=>l({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),ka=e=>l(l({color:(e.vars||e).palette.text.primary},e.typography.body1),{},{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),Pa=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r={};n&&e.colorSchemes&&"function"===typeof e.getColorSchemeSelector&&Object.entries(e.colorSchemes).forEach((t=>{let[n,i]=t;const o=e.getColorSchemeSelector(n);var a,s;o.startsWith("@")?r[o]={":root":{colorScheme:null===(a=i.palette)||void 0===a?void 0:a.mode}}:r[o.replace(/\s*&/,"")]={colorScheme:null===(s=i.palette)||void 0===s?void 0:s.mode}}));let i=l({html:Oa(e,n),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:l(l({margin:0},ka(e)),{},{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},r);const o=null===(t=e.components)||void 0===t||null===(t=t.MuiCssBaseline)||void 0===t?void 0:t.styleOverrides;return o&&(i=[i,o]),i},Ba="mui-ecs",La=Ra(Na?e=>{let{theme:t,enableColorScheme:n}=e;return Pa(t,n)}:e=>{let{theme:t}=e;return(e=>{const t=Pa(e,!1),n=Array.isArray(t)?t[0]:t;return!e.vars&&n&&(n.html[":root:has(".concat(Ba,")")]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach((t=>{let[r,i]=t;const o=e.getColorSchemeSelector(r);var a,s;o.startsWith("@")?n[o]={[":root:not(:has(.".concat(Ba,"))")]:{colorScheme:null===(a=i.palette)||void 0===a?void 0:a.mode}}:n[o.replace(/\s*&/,"")]={["&:not(:has(.".concat(Ba,"))")]:{colorScheme:null===(s=i.palette)||void 0===s?void 0:s.mode}}})),t})(t)});const Da=function(e){const n=xa({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:i=!1}=n;return(0,Tt.jsxs)(t.Fragment,{children:[Na&&(0,Tt.jsx)(La,{enableColorScheme:i}),!Na&&!i&&(0,Tt.jsx)("span",{className:Ba,style:{display:"none"}}),r]})},Ua=ha({palette:{primary:{main:"#2196F3",light:"#64B5F6",dark:"#1976D2",contrastText:"#ffffff"},secondary:{main:"#9C27B0",light:"#BA68C8",dark:"#7B1FA2",contrastText:"#ffffff"},success:{main:"#4CAF50",light:"#81C784",dark:"#388E3C"},warning:{main:"#FF9800",light:"#FFB74D",dark:"#F57C00"},error:{main:"#F44336",light:"#E57373",dark:"#D32F2F"},background:{default:"#f5f5f5",paper:"#ffffff"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',h1:{fontSize:"2.5rem",fontWeight:700,lineHeight:1.2,letterSpacing:"-0.02em"},h2:{fontSize:"2rem",fontWeight:700,lineHeight:1.3,letterSpacing:"-0.01em"},h3:{fontSize:"1.75rem",fontWeight:600,lineHeight:1.3},h4:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.4},h5:{fontSize:"1.25rem",fontWeight:600,lineHeight:1.4},h6:{fontSize:"1.125rem",fontWeight:600,lineHeight:1.4},body1:{fontSize:"1rem",lineHeight:1.6},body2:{fontSize:"0.875rem",lineHeight:1.6},button:{textTransform:"none",fontWeight:600}},shape:{borderRadius:12},shadows:["none","0px 2px 4px rgba(0,0,0,0.05)","0px 4px 8px rgba(0,0,0,0.08)","0px 6px 12px rgba(0,0,0,0.1)","0px 8px 16px rgba(0,0,0,0.12)","0px 10px 20px rgba(0,0,0,0.14)","0px 12px 24px rgba(0,0,0,0.16)","0px 14px 28px rgba(0,0,0,0.18)","0px 16px 32px rgba(0,0,0,0.2)","0px 18px 36px rgba(0,0,0,0.22)","0px 20px 40px rgba(0,0,0,0.24)","0px 22px 44px rgba(0,0,0,0.26)","0px 24px 48px rgba(0,0,0,0.28)","0px 26px 52px rgba(0,0,0,0.3)","0px 28px 56px rgba(0,0,0,0.32)","0px 30px 60px rgba(0,0,0,0.34)","0px 32px 64px rgba(0,0,0,0.36)","0px 34px 68px rgba(0,0,0,0.38)","0px 36px 72px rgba(0,0,0,0.4)","0px 38px 76px rgba(0,0,0,0.42)","0px 40px 80px rgba(0,0,0,0.44)","0px 42px 84px rgba(0,0,0,0.46)","0px 44px 88px rgba(0,0,0,0.48)","0px 46px 92px rgba(0,0,0,0.5)","0px 48px 96px rgba(0,0,0,0.52)"],components:{MuiCard:{styleOverrides:{root:{borderRadius:16,boxShadow:"0px 4px 12px rgba(0,0,0,0.08)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{boxShadow:"0px 8px 24px rgba(0,0,0,0.15)",transform:"translateY(-4px)"}}}},MuiButton:{styleOverrides:{root:{borderRadius:12,padding:"10px 24px",fontSize:"1rem",fontWeight:600,textTransform:"none",boxShadow:"none",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{boxShadow:"0px 4px 12px rgba(0,0,0,0.15)",transform:"translateY(-2px)"}},containedPrimary:{background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)","&:hover":{background:"linear-gradient(45deg, #1976D2 30%, #0097A7 90%)"}},containedSecondary:{background:"linear-gradient(45deg, #9C27B0 30%, #E91E63 90%)","&:hover":{background:"linear-gradient(45deg, #7B1FA2 30%, #C2185B 90%)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:12,transition:"all 0.3s ease","&:hover":{boxShadow:"0px 4px 8px rgba(0,0,0,0.1)"},"&.Mui-focused":{boxShadow:"0px 4px 12px rgba(33, 150, 243, 0.3)"}}}}},MuiSelect:{styleOverrides:{root:{borderRadius:12,transition:"all 0.3s ease"}}},MuiFormControl:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:12,transition:"all 0.3s ease","&:hover":{boxShadow:"0px 4px 8px rgba(0,0,0,0.1)"},"&.Mui-focused":{boxShadow:"0px 4px 12px rgba(33, 150, 243, 0.3)"}}}}},MuiPaper:{styleOverrides:{root:{borderRadius:16,transition:"box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}},MuiChip:{styleOverrides:{root:{borderRadius:20,fontWeight:600,transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)"}}}},MuiPagination:{styleOverrides:{root:{"& .MuiPaginationItem-root":{borderRadius:12,margin:"0 4px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-2px)",boxShadow:"0px 4px 8px rgba(0,0,0,0.15)"}}}}},MuiAlert:{styleOverrides:{root:{borderRadius:12,backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"}}},MuiSkeleton:{styleOverrides:{root:{borderRadius:8,animation:"skeleton-loading 1.5s ease-in-out infinite alternate"}}}},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}}}),Ma={BASE_URL:"http://localhost:5150",ENDPOINTS:{LOGIN:"/api/auth/login",REGISTER:"/api/auth/register",REFRESH_TOKEN:"/api/auth/refresh-token",LOGOUT:"/api/auth/logout",FORGOT_PASSWORD:"/api/auth/forgot-password",RESET_PASSWORD:"/api/auth/reset-password",CHANGE_PASSWORD:"/api/auth/change-password",VERIFY_EMAIL:"/api/auth/verify-email",RESEND_VERIFICATION:"/api/auth/resend-verification",EMAIL_VERIFICATION_STATUS:"/api/auth/email-verification-status",USER_PROFILE_ME:"/api/userprofile/me",USER_PROFILE_BADGES:"/api/userprofile/me/badges",USER_PROFILE_ENROLLMENTS:"/api/CourseEnrollment/user",USER_PROFILE_REVIEWS:"/api/userprofile/me/reviews",USER_PROFILE_POSTS:"/api/userprofile/me/posts",USER_PROFILE_DASHBOARD:"/api/userprofile/me/dashboard",USER_PROFILE_BY_ID:"/api/userprofile/{userId}",ADMIN_USERS:"/api/admin/users",ADMIN_USER_BY_ID:"/api/admin/users/{id}",ADMIN_UPDATE_ROLE:"/api/Admin/update-role/{userId}",ADMIN_DASHBOARD:"/api/admin/dashboard",ADMIN_STATS:"/api/admin/stats",ADMIN_POSTS:"/api/admin/posts",ADMIN_POSTS_PENDING:"/api/admin/posts/pending",ADMIN_POST_BY_ID:"/api/admin/posts/{id}",ADMIN_POST_APPROVE:"/api/admin/posts/{id}/approve",ADMIN_POST_REJECT:"/api/admin/posts/{id}/reject",ROLE_ALL:"/api/Role/all",ROLE_BY_ID:"/api/role/{id}",ROLE_USER:"/api/role/user/{userId}",ROLE_ASSIGN:"/api/role/assign",PUBLIC_COURSES_ALL:"/api/Course",PUBLIC_COURSE_BY_ID:"/api/Course/{courseId}",PUBLIC_COURSES_BY_AGE:"/api/Course/by-age/{ageGroup}",PUBLIC_COURSES_BY_TYPE:"/api/Course/by-type/{courseType}",PUBLIC_COURSES_SEARCH:"/api/Course/search",PUBLIC_COURSES_LATEST:"/api/Course/public",PUBLIC_COURSES_FEATURED:"/api/Course/featured",COURSE_ALL:"/api/Course",COURSE_BY_ID:"/api/Course/{courseId}",COURSE_PUBLISH:"/api/Course/{courseId}/publish",COURSE_UNPUBLISH:"/api/Course/{courseId}/unpublish",CHAPTER_ALL:"/api/Chapter",CHAPTER_BY_ID:"/api/Chapter/{chapterId}",CHAPTER_BY_COURSE:"/api/Chapter/course/{courseId}",LESSON_ALL:"/api/Lesson",LESSON_BY_ID:"/api/Lesson/{lessonId}",LESSON_BY_CHAPTER:"/api/Lesson/chapter/{chapterId}",QUIZ_ALL:"/api/Quiz",QUIZ_BY_ID:"/api/Quiz/{quizId}",QUIZ_BY_LESSON:"/api/Quiz/lesson/{lessonId}",QUIZ_BY_COURSE:"/api/Quiz/course/{courseId}",QUIZ_START_SESSION:"/api/Quiz/{quizId}/start",QUESTION_ALL:"/api/Question",QUESTION_BY_ID:"/api/Question/{questionId}",QUESTION_BY_QUIZ:"/api/Question/quiz/{quizId}",QUIZ_RESULT_SUBMIT:"/api/Question/submit",QUIZ_RESULT_BY_QUIZ:"/api/QuizResult/quiz/{quizId}",QUIZ_RESULT_BY_USER:"/api/QuizResult/user/{userId}",QUIZ_RESULT_BY_USER_QUIZ:"/api/Quiz/result?quizId={quizId}",ENROLLMENT_ENROLL:"/api/CourseEnrollment/enroll/{courseId}",ENROLLMENT_DROP:"/api/CourseEnrollment/drop/{courseId}",ENROLLMENT_MY_ENROLLMENTS:"/api/CourseEnrollment/my-enrollments",ENROLLMENT_STATUS:"/api/CourseEnrollment/status/{courseId}",ENROLLMENT_IS_ENROLLED:"/api/CourseEnrollment/status/{courseId}",ENROLLMENT_COMPLETE:"/api/CourseEnrollment/complete/{courseId}",ENROLLMENT_ALL:"/api/CourseEnrollment/all",ENROLLMENT_BY_COURSE:"/api/CourseEnrollment/course/{courseId}",ENROLLMENT_COUNT:"/api/CourseEnrollment/course/{courseId}/count",ENROLLMENT_UPDATE_STATUS:"/api/CourseEnrollment/{enrollmentId}/status",ENROLLMENT_DELETE:"/api/CourseEnrollment/{enrollmentId}",PROGRESS_ALL:"/api/Progress",PROGRESS_BY_ID:"/api/Progress/{progressId}",PROGRESS_BY_COURSE:"/api/Progress/course/{courseId}",PROGRESS_LESSON_COMPLETE:"/api/Progress/lesson/complete",PROGRESS_CREATE_UPDATE:"/api/Progress",MEDIA_YOUTUBE_ADD:"/api/SimplifiedMedia/lesson/{lessonId}/youtube",MEDIA_UPLOAD_VIDEO:"/api/lessons/{lessonId}/Media/upload/video",MEDIA_UPLOAD_AUDIO:"/api/lessons/{lessonId}/Media/upload/audio",MEDIA_UPLOAD_DOCUMENT:"/api/lessons/{lessonId}/Media/upload/document",MEDIA_LESSON_FILES:"/api/FileAttachment/lesson/{lessonId}",COMMENT_BY_COURSE:"/api/Comment/course/{courseId}",COMMENT_BY_LESSON:"/api/Comment/lesson/{lessonId}",COMMENT_BY_CHAPTER:"/api/Comment/chapter/{chapterId}",REVIEW_BY_COURSE:"/api/Review/course/{courseId}",CATEGORY_ALL:"/api/Category",CATEGORY_BY_ID:"/api/Category/{id}",CATEGORY_PARENT:"/api/Category/parent/{parentId}",SUBSTANCE_ALL:"/api/substance",SUBSTANCE_BY_ID:"/api/substance/{id}",SURVEY_ALL:"/api/surveys",SURVEY_BY_ID:"/api/surveys/{id}",ANALYTICS_ALL:"/api/analytics",ANALYTICS_USER:"/api/analytics/user",ANALYTICS_COURSES:"/api/analytics/courses",ANALYTICS_SUBSTANCES:"/api/analytics/substances",ANALYTICS_POSTS:"/api/analytics/posts",ANALYTICS_SURVEYS:"/api/analytics/surveys",ANALYTICS_DASHBOARD:"/api/analytics/dashboard",ANALYTICS_TIME_RANGE:"/api/analytics/time-range",SEARCH_USERS:"/api/search/users",BADGE_ALL:"/api/badge",BADGE_BY_ID:"/api/badge/{id}",BADGE_AWARD:"/api/badge/award",HEALTH_ALL:"/api/healthchecks",HEALTH_DATABASE:"/api/healthchecks/database",HEALTH_FIREBASE:"/api/healthchecks/firebase",HEALTH_CLOUDINARY:"/api/healthchecks/cloudinary",COMMUNITY_EVENTS:"/api/community-events",COMMUNITY_EVENTS_UPCOMING:"/api/community-events/upcoming",COMMUNITY_EVENTS_PAST:"/api/community-events/past",COMMUNITY_EVENTS_MY_EVENTS:"/api/community-events/my-events",COMMUNITY_EVENTS_BY_ID:"/api/community-events/{id}",EVENT_PARTICIPANTS_REGISTER:"/api/event-participants/register",EVENT_PARTICIPANTS_UNREGISTER:"/api/event-participants/unregister/{eventId}",EVENT_PARTICIPANTS_CHECK_REGISTRATION:"/api/event-participants/check-registration/{eventId}",EVENT_PARTICIPANTS_BY_EVENT:"/api/event-participants/event/{eventId}",EVENT_FEEDBACK:"/api/event-feedback",EVENT_FEEDBACK_BY_ID:"/api/event-feedback/{id}",EVENT_FEEDBACK_BY_EVENT:"/api/event-feedback/event/{eventId}",EVENT_FEEDBACK_BY_USER:"/api/event-feedback/user",EVENT_FEEDBACK_SUBMIT:"/api/event-feedback/submit",EVENT_FEEDBACK_CHECK_USER:"/api/event-feedback/check-user-feedback/{eventId}",CONSULTATION_APPOINTMENTS:"/api/consultation-appointments",CONSULTATION_APPOINTMENTS_MY:"/api/consultation-appointments/my-appointments",CONSULTATION_APPOINTMENTS_MY_BOOKED:"/api/consultation-appointments/my-booked-appointments",CONSULTATION_APPOINTMENTS_MY_COMPLETED:"/api/consultation-appointments/my-completed-appointments",CONSULTATION_APPOINTMENTS_MY_CONFIRMED:"/api/consultation-appointments/my-confirmed-appointments",CONSULTATION_APPOINTMENTS_MY_CONSULTATIONS:"/api/consultation-appointments/my-consultations",CONSULTATION_APPOINTMENTS_BY_ID:"/api/consultation-appointments/{id}",CONSULTATION_APPOINTMENTS_STATUS:"/api/consultation-appointments/{id}/status",CONSULTATION_APPOINTMENTS_CANCEL:"/api/consultation-appointments/{id}/cancel",CONSULTATION_APPOINTMENTS_CANCEL_BY_MEMBER:"/api/consultation-appointments/{id}/cancel-by-member",CONSULTATION_APPOINTMENTS_CANCEL_BY_CONSULTANT:"/api/consultation-appointments/{id}/cancel-by-consultant",AGORA_TOKEN_REFRESH:"/api/consultation-appointments/{appointmentId}/agora-token",CONSULTATION_NOTES_BY_APPOINTMENT:"/api/consultation-notes/appointment/{appointmentId}",CONSULTATION_NOTES_MEMBER:"/api/consultation-notes/member/appointment/{appointmentId}",CONSULTATION_NOTES_ALL_MEMBER:"/api/consultation-notes/member",CONSULTATION_NOTES_ALL_CONSULTANT:"/api/consultation-notes/consultant",CONSULTATION_NOTES_BY_ID:"/api/consultation-notes/{id}",CONSULTATION_NOTES_CREATE:"/api/consultation-notes",CONSULTATION_NOTES_UPDATE:"/api/consultation-notes/{id}",CONSULTATION_NOTES_DELETE:"/api/consultation-notes/{id}",CONSULTATION_SLOTS:"/api/consultation-slots",CONSULTATION_SLOTS_MY:"/api/consultation-slots/my-slots",CONSULTATION_SLOTS_SEARCH:"/api/consultation-slots/search",CONSULTATION_SLOTS_AVAILABLE:"/api/consultation-slots/available",CONSULTATION_SLOTS_PUBLIC_AVAILABLE:"/api/consultation-slots/public/available",CONSULTATION_SLOTS_ALL_AVAILABLE:"/api/consultation-slots/all-available",CONSULTATION_SLOTS_ALL_DEBUG:"/api/consultation-slots/all-debug",CONSULTATION_SLOTS_BY_ID:"/api/consultation-slots/{id}",CONSULTATION_SLOTS_UPDATE:"/api/consultation-slots/{id}",CONSULTATION_SLOTS_DELETE:"/api/consultation-slots/{id}"}},Fa=Ma,ja=!1;const Qa=new class{constructor(){this.baseURL=Ma.BASE_URL,this.profilePromise=null}async login(e,t){try{const r=await fetch("".concat(this.baseURL).concat(Ma.ENDPOINTS.LOGIN),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e,password:t})}),i=await r.json();if(!r.ok)throw console.log("AuthService - Login failed with status:",r.status),console.log("AuthService - Error response data:",i),new Error(i.message||"HTTP error! status: ".concat(r.status));const o=i.data||i;if(!o.AccessToken&&!o.accessToken)throw console.error("AuthService - No access token found in response"),new Error("Invalid login response - missing access token");{const e=o.AccessToken||o.accessToken,t=o.RefreshToken||o.refreshToken,r=o.Email||o.email,i=o.Fullname||o.fullname,a=o.Role||o.role,s=o.UserId||o.userId||"user_".concat(null===r||void 0===r?void 0:r.split("@")[0],"_").concat(Date.now()),c=o.Phone||o.phone||"",l=o.Gender||o.gender||"",d=o.DateOfBirth||o.dateOfBirth||"",u=o.Address||o.address||"",A=o.ProfilePicture||o.profilePicture||o.avatar||o.Profile_Picture||"",h=o.Specialization||o.specialization||"",p=o.Degree||o.degree||"";localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",t),localStorage.setItem("userEmail",r),localStorage.setItem("userFullname",i),localStorage.setItem("userRole",a),localStorage.setItem("userId",s),localStorage.setItem("userPhone",c),localStorage.setItem("userGender",l),localStorage.setItem("userDateOfBirth",d),localStorage.setItem("userAddress",u),A&&localStorage.setItem("userProfilePicture",A),h&&localStorage.setItem("userSpecialization",h),p&&localStorage.setItem("userDegree",p),console.log("AuthService - User authenticated successfully:",{email:r,fullname:i,role:a,profilePicture:A,specialization:h,degree:p});try{await this.fetchUserProfile()}catch(n){console.warn("Could not fetch profile data:",n)}}return{success:!0,data:i,status:r.status}}catch(r){return console.error("Login error:",r),{success:!1,error:r.message,status:r.status||500}}}async register(e){try{const t=await fetch("".concat(this.baseURL).concat(Ma.ENDPOINTS.REGISTER),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e.email,password:e.password,fullname:e.fullname,phone:e.phone,gender:e.gender,dateOfBirth:e.dateOfBirth,address:e.address,role:e.role||"User"})}),n=await t.json();if(!t.ok)throw console.log("AuthService - Register failed with status:",t.status),console.log("AuthService - Register error response data:",n),new Error(n.message||"HTTP error! status: ".concat(t.status));return console.log("AuthService - Registration successful"),{success:!0,data:n,status:t.status}}catch(t){return console.error("Register error:",t),{success:!1,error:t.message,status:t.status||500}}}async refreshToken(){try{const e=localStorage.getItem("refreshToken");if(!e)throw new Error("No refresh token available");const t=await fetch("".concat(this.baseURL).concat(Ma.ENDPOINTS.REFRESH_TOKEN),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({RefreshToken:e})}),n=await t.json();if(!t.ok)throw new Error(n.message||"HTTP error! status: ".concat(t.status));const r=n.data||n;if(r.AccessToken){const t=r.AccessToken,n=r.RefreshToken||e;localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",n)}return{success:!0,data:n,status:t.status}}catch(e){return console.error("Refresh token error:",e),this.clearAuthData(),{success:!1,error:e.message,status:e.status||500}}}async logout(){try{const e=localStorage.getItem("accessToken"),t=localStorage.getItem("userId");if(e&&t){(await fetch("".concat(this.baseURL).concat(Ma.ENDPOINTS.LOGOUT),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)})).ok||console.warn("Logout API call failed, but continuing with local cleanup")}return this.clearAuthData(),{success:!0,message:"Logged out successfully"}}catch(e){return console.error("Logout error:",e),this.clearAuthData(),{success:!0,message:"Logged out locally"}}}async forgotPassword(e){try{const t=await fetch("".concat(this.baseURL).concat(Ma.ENDPOINTS.FORGOT_PASSWORD),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e})}),n=await t.json();if(!t.ok)throw new Error(n.message||"HTTP error! status: ".concat(t.status));return{success:!0,data:n,status:t.status}}catch(t){return console.error("Forgot password error:",t),{success:!1,error:t.message,status:t.status||500}}}async resetPassword(e,t,n){try{const r=await fetch("".concat(this.baseURL).concat(Ma.ENDPOINTS.RESET_PASSWORD),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({token:e,newPassword:t,confirmPassword:n})}),i=await r.json();if(!r.ok)throw new Error(i.message||"HTTP error! status: ".concat(r.status));return{success:!0,data:i,status:r.status}}catch(r){return console.error("Reset password error:",r),{success:!1,error:r.message,status:r.status||500}}}async changePassword(e,t,n){try{const r=await this.authenticatedRequest("".concat(this.baseURL).concat(Ma.ENDPOINTS.CHANGE_PASSWORD),{method:"POST",body:JSON.stringify({currentPassword:e,newPassword:t,confirmPassword:n})}),i=await r.json();if(!r.ok)throw new Error(i.message||"HTTP error! status: ".concat(r.status));return{success:!0,data:i,status:r.status}}catch(r){return console.error("Change password error:",r),{success:!1,error:r.message,status:r.status||500}}}async verifyEmail(e){try{const t=await fetch("".concat(this.baseURL).concat(Ma.ENDPOINTS.VERIFY_EMAIL),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({token:e})}),n=await t.json();if(!t.ok)throw new Error(n.message||"HTTP error! status: ".concat(t.status));return{success:!0,data:n,status:t.status}}catch(t){return console.error("Email verification error:",t),{success:!1,error:t.message,status:t.status||500}}}async resendVerification(e){try{const t=await fetch("".concat(this.baseURL).concat(Ma.ENDPOINTS.RESEND_VERIFICATION),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e})}),n=await t.json();if(!t.ok)throw new Error(n.message||"HTTP error! status: ".concat(t.status));return{success:!0,data:n,status:t.status}}catch(t){return console.error("Resend verification error:",t),{success:!1,error:t.message,status:t.status||500}}}async getEmailVerificationStatus(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t="".concat(this.baseURL).concat(Ma.ENDPOINTS.EMAIL_VERIFICATION_STATUS),n=e?"?email=".concat(encodeURIComponent(e)):"",r=await fetch("".concat(t).concat(n),{method:"GET",headers:l({"Content-Type":"application/json",Accept:"application/json"},this.isAuthenticated()&&{Authorization:"Bearer ".concat(this.getAccessToken())})}),i=await r.json();if(!r.ok)throw new Error(i.message||"HTTP error! status: ".concat(r.status));return{success:!0,data:i,status:r.status}}catch(t){return console.error("Email verification status error:",t),{success:!1,error:t.message,status:t.status||500}}}clearAuthData(){["accessToken","refreshToken","userEmail","userFullname","userRole","userId","userPhone","userGender","userDateOfBirth","userAddress","userProfilePicture","userSpecialization","userDegree"].forEach((e=>{localStorage.removeItem(e)}))}isAuthenticated(){return!!localStorage.getItem("accessToken")}getCurrentUser(){return this.isAuthenticated()?{id:localStorage.getItem("userId"),email:localStorage.getItem("userEmail"),fullname:localStorage.getItem("userFullname"),role:localStorage.getItem("userRole"),phone:localStorage.getItem("userPhone"),gender:localStorage.getItem("userGender"),dateOfBirth:localStorage.getItem("userDateOfBirth"),address:localStorage.getItem("userAddress"),profilePicture:localStorage.getItem("userProfilePicture"),specialization:localStorage.getItem("userSpecialization"),degree:localStorage.getItem("userDegree"),accessToken:localStorage.getItem("accessToken")}:null}getAccessToken(){return localStorage.getItem("accessToken")}async authenticatedRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getAccessToken();if(!n)throw new Error("No access token available");const r=l(l({},t),{},{headers:l(l({},t.headers),{},{Authorization:"Bearer ".concat(n),"Content-Type":"application/json",Accept:"application/json"})});try{const t=await fetch(e,r);if(401===t.status){if((await this.refreshToken()).success)return r.headers.Authorization="Bearer ".concat(this.getAccessToken()),await fetch(e,r);throw new Error("Session expired. Please login again.")}return t}catch(i){throw console.error("Authenticated request error:",i),i}}async fetchUserProfile(){return this.profilePromise||(this.profilePromise=(async()=>{try{const e=await this.authenticatedRequest("".concat(this.baseURL,"/api/User/me"),{method:"GET"});let t;if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));if(t=await e.json(),t.success&&t.data){const e=t.data;return e.profilePicture&&localStorage.setItem("userProfilePicture",e.profilePicture),e.fullname&&localStorage.setItem("userFullname",e.fullname),e.phone&&localStorage.setItem("userPhone",e.phone),e.gender&&localStorage.setItem("userGender",e.gender),e.dateOfBirth&&localStorage.setItem("userDateOfBirth",e.dateOfBirth),e.address&&localStorage.setItem("userAddress",e.address),e.specialization&&localStorage.setItem("userSpecialization",e.specialization),e.degree&&localStorage.setItem("userDegree",e.degree),e.userId&&localStorage.setItem("userId",e.userId),e.email&&localStorage.setItem("userEmail",e.email),{success:!0,data:e}}return{success:!1,error:"No profile data received"}}catch(e){return{success:!1,error:e.message}}finally{this.profilePromise=null}})()),this.profilePromise}async updateProfile(e){try{const t=await this.authenticatedRequest("".concat(this.baseURL,"/api/User/profile"),{method:"PUT",body:JSON.stringify({fullname:e.fullname,phone:e.phone,gender:e.gender,dateOfBirth:e.dateOfBirth,address:e.address,specialization:e.specialization,degree:e.degree,profilePicture:e.profilePicture})});let n;if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));if(n=await t.json(),n.success&&n.data){const e=n.data;return e.fullname&&localStorage.setItem("userFullname",e.fullname),e.phone&&localStorage.setItem("userPhone",e.phone),e.gender&&localStorage.setItem("userGender",e.gender),e.dateOfBirth&&localStorage.setItem("userDateOfBirth",e.dateOfBirth),e.address&&localStorage.setItem("userAddress",e.address),e.profilePicture&&localStorage.setItem("userProfilePicture",e.profilePicture),e.specialization&&localStorage.setItem("userSpecialization",e.specialization),e.degree&&localStorage.setItem("userDegree",e.degree),e.userId&&localStorage.setItem("userId",e.userId),e.email&&localStorage.setItem("userEmail",e.email),{success:!0,data:e}}return{success:!1,error:n.message||"Failed to update profile"}}catch(t){return console.error("Update profile error:",t),{success:!1,error:t.message}}}};const Va=new class{constructor(){this.baseURL=Ma.BASE_URL}async authenticatedRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=localStorage.getItem("accessToken");if(!n)throw new Error("Authentication required");try{var r,i,o;const c=l({Accept:"application/json",Authorization:"Bearer ".concat(n)},t.headers);t.body instanceof FormData||(c["Content-Type"]="application/json");let d,u=null===(r=t.signal)||void 0===r?void 0:r.controller;t.signal||(u=new AbortController,d=setTimeout((()=>{console.warn("Request timeout for ".concat(e)),u.abort()}),8e3));const A=await fetch("".concat(this.baseURL).concat(e),l(l({},t),{},{headers:c,signal:(null===(i=u)||void 0===i?void 0:i.signal)||t.signal}));if(d&&clearTimeout(d),401===A.status)throw console.warn("401 Unauthorized - Token may be expired"),localStorage.removeItem("accessToken"),new Error("Authentication expired. Please login again.");const h=A.headers.get("content-type");let p=null;if(h&&h.includes("application/json"))try{p=await A.json(),A.ok||console.log("API Error Response for ".concat(e,":"),{status:A.status,data:p})}catch(a){console.warn("Failed to parse JSON response:",a),p=null}else try{const t=await A.text();console.warn("Non-JSON response from ".concat(e,":"),t.substring(0,500)),p={message:t||"HTTP ".concat(A.status)}}catch(s){console.warn("Failed to get response text:",s),p={message:"HTTP ".concat(A.status,": ").concat(A.statusText)}}if(!A.ok){let t="HTTP ".concat(A.status,": ").concat(A.statusText);if(p){const e=p.message||p.error||p.detail||p.title||p.Message||p.Error||("string"===typeof p?p:null);if(e)t=e;else if(p.errors)t=Array.isArray(p.errors)?p.errors.join(", "):"object"===typeof p.errors?Object.values(p.errors).flat().join(", "):p.errors.toString();else if(t="HTTP ".concat(A.status,": ").concat(A.statusText),"object"===typeof p){const e=JSON.stringify(p).substring(0,200);t+=" - ".concat(e)}}console.error("API Error (".concat(e,"):"),{status:A.status,statusText:A.statusText,data:p,url:"".concat(this.baseURL).concat(e),extractedError:t});const n=new Error(t);throw n.status=A.status,n}return{success:!0,data:(null===(o=p)||void 0===o?void 0:o.data)||p,status:A.status}}catch(c){if(console.error("API request error (".concat(e,"):"),c.message),"AbortError"===c.name)return{success:!1,error:"Request timeout - please try again",status:408};if(401===c.status)return{success:!1,error:c.message,status:401};let t=c.message;return(c.message.includes("Failed to fetch")||c.message.includes("NetworkError"))&&(t="Unable to connect to backend server at ".concat(this.baseURL,". Please ensure the backend is running on port 5150.")),c.message.includes("CORS")&&(t="CORS error: Backend server needs to allow requests from this domain."),c.message.includes("timeout")&&(t="Request timeout: Backend server took too long to respond."),{success:!1,error:t,status:c.status||500}}}async getUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.authenticatedRequest("".concat(Ma.ENDPOINTS.ADMIN_USERS,"?page=").concat(e,"&pageSize=").concat(t),{method:"GET"})}async getUserById(e){return this.authenticatedRequest(Ma.ENDPOINTS.ADMIN_USER_BY_ID.replace("{id}",e),{method:"GET"})}async updateUser(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.ADMIN_USER_BY_ID.replace("{id}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteUser(e){return this.authenticatedRequest("/api/User/".concat(e),{method:"DELETE"})}async getDashboardData(){return this.authenticatedRequest(Ma.ENDPOINTS.ADMIN_DASHBOARD,{method:"GET"})}async getStats(){return this.authenticatedRequest(Ma.ENDPOINTS.ADMIN_STATS,{method:"GET"})}async getPosts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.authenticatedRequest("".concat(Ma.ENDPOINTS.ADMIN_POSTS,"?page=").concat(e,"&pageSize=").concat(t),{method:"GET"})}async getPendingPosts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.authenticatedRequest("".concat(Ma.ENDPOINTS.ADMIN_POSTS_PENDING,"?page=").concat(e,"&pageSize=").concat(t),{method:"GET"})}async getPostById(e){return this.authenticatedRequest(Ma.ENDPOINTS.ADMIN_POST_BY_ID.replace("{id}",e),{method:"GET"})}async approvePost(e){return this.authenticatedRequest(Ma.ENDPOINTS.ADMIN_POST_APPROVE.replace("{id}",e),{method:"PUT"})}async rejectPost(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.ADMIN_POST_REJECT.replace("{id}",e),{method:"PUT",body:JSON.stringify({feedback:t})})}async deletePost(e){return this.authenticatedRequest(Ma.ENDPOINTS.ADMIN_POST_BY_ID.replace("{id}",e),{method:"DELETE"})}async getRoles(){return this.authenticatedRequest(Ma.ENDPOINTS.ROLE_ALL,{method:"GET"})}async getRoleById(e){return this.authenticatedRequest(Ma.ENDPOINTS.ROLE_BY_ID.replace("{id}",e),{method:"GET"})}async createRole(e){return this.authenticatedRequest(Ma.ENDPOINTS.ROLE_ALL,{method:"POST",body:JSON.stringify(e)})}async updateRole(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.ROLE_BY_ID.replace("{id}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteRole(e){return this.authenticatedRequest(Ma.ENDPOINTS.ROLE_BY_ID.replace("{id}",e),{method:"DELETE"})}async getUserRoles(e){return this.authenticatedRequest(Ma.ENDPOINTS.ROLE_USER.replace("{userId}",e),{method:"GET"})}async assignRole(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.ROLE_ASSIGN,{method:"POST",body:JSON.stringify({userId:e,roleId:t})})}async updateUserRole(e,t){const n=[{url:Ma.ENDPOINTS.ADMIN_UPDATE_ROLE.replace("{userId}",e),method:"PUT",body:'"'.concat(t,'"'),contentType:"application/json"},{url:Ma.ENDPOINTS.ADMIN_UPDATE_ROLE.replace("{userId}",e),method:"PUT",body:t,contentType:"text/plain"},{url:Ma.ENDPOINTS.ADMIN_UPDATE_ROLE.replace("{userId}",e),method:"PUT",body:t},{url:Ma.ENDPOINTS.ADMIN_UPDATE_ROLE.replace("{userId}",e),method:"PUT",body:'"'.concat(t,'"')},{url:Ma.ENDPOINTS.ADMIN_UPDATE_ROLE.replace("{userId}",e),method:"PUT",body:""},{url:Ma.ENDPOINTS.ADMIN_UPDATE_ROLE.replace("{userId}",e),method:"PUT",body:" "},{url:"".concat(Ma.ENDPOINTS.ADMIN_UPDATE_ROLE.replace("{userId}",e),"?role=").concat(encodeURIComponent(t)),method:"PUT",body:null},{url:Ma.ENDPOINTS.ADMIN_UPDATE_ROLE.replace("{userId}",e),method:"PUT",body:JSON.stringify({role:t})}];for(const i of n)try{console.log("Trying request:",{url:i.url,method:i.method,body:i.body,contentType:i.contentType});const e={method:i.method};null!==i.body&&void 0!==i.body&&(e.body=i.body),i.contentType&&(e.headers={"Content-Type":i.contentType});const t=await this.authenticatedRequest(i.url,e);if(t.success||t.isSuccess)return console.log("Success with request:",i),t;console.log("Failed with request:",i,"Response:",t)}catch(r){if(console.log("Error with request:",i,"Error:",r.message),n.indexOf(i)===n.length-1)throw r}throw new Error("All role update attempts failed")}async getCourses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{const n=await this.authenticatedRequest("".concat(Ma.ENDPOINTS.COURSE_ALL,"?page=").concat(e,"&pageSize=").concat(t),{method:"GET"});if(n.success)return n;throw new Error(n.error)}catch(n){return console.error("Failed to load courses:",n),n.message.includes("Failed to fetch")||n.message.includes("404")?(console.warn("API endpoint not available, returning mock data for development"),{success:!0,data:{data:[{courseId:"mock-course-1",title:"Introduction to Substance Awareness",description:"A comprehensive introduction to understanding substance abuse and its impacts on individuals and communities.",courseType:"BasicAwareness",ageGroup:"Adults",isPublished:!0,createdAt:"2024-01-15T10:00:00Z",imageUrl:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=250&fit=crop&auto=format",chapters:[{chapterId:"ch1",title:"Understanding Addiction",lessons:[]},{chapterId:"ch2",title:"Risk Factors",lessons:[]}]},{courseId:"mock-course-2",title:"Prevention Strategies for Youth",description:"Evidence-based prevention strategies specifically designed for teenagers and young adults.",courseType:"Prevention",ageGroup:"Teenagers",isPublished:!1,createdAt:"2024-01-10T14:30:00Z",imageUrl:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=400&h=250&fit=crop&auto=format",chapters:[]},{courseId:"mock-course-3",title:"Family Support and Recovery",description:"Supporting family members through the recovery process and building healthy relationships.",courseType:"FamilyEducation",ageGroup:"Adults",isPublished:!0,createdAt:"2024-01-05T09:15:00Z",imageUrl:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=400&h=250&fit=crop&auto=format",chapters:[{chapterId:"ch1",title:"Communication Skills",lessons:[{},{}]}]}],pagination:{page:e,pageSize:t,totalPages:1,totalItems:3}},status:200}):{success:!1,error:n.message,status:n.status||500}}}async getCourseById(e){if(ja&&e.includes("mock"))return console.warn("Using mock course data for mock course ID:",e),{success:!0,data:{courseId:e,title:"Mock Course Title",description:"This is a mock course description for development purposes.",courseType:"BasicAwareness",ageGroup:"Adults",isPublished:!1,createdAt:(new Date).toISOString(),imageUrl:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=250&fit=crop&auto=format",chapters:[{chapterId:"mock-chapter-1",title:"Sample Chapter",description:"This is a sample chapter for development",chapterOrder:1,lessons:[]}]},status:200};try{const t=await this.authenticatedRequest(Ma.ENDPOINTS.COURSE_BY_ID.replace("{courseId}",e),{method:"GET"});if(t.success)return t;throw new Error(t.error||t.message||"Failed to load course")}catch(t){if(console.error("Failed to load course:",t),ja&&(t.message.includes("Failed to fetch")||t.message.includes("404")))return console.warn("API endpoint not available, returning mock course data for development"),{success:!0,data:{courseId:e,title:e.includes("mock")?"Mock Course Title":"Sample Course",description:"This is a sample course description for development purposes.",courseType:"BasicAwareness",ageGroup:"Adults",isPublished:!1,createdAt:(new Date).toISOString(),imageUrl:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=250&fit=crop&auto=format",chapters:[]},status:200};throw t}}async createCourse(e){if(ja){console.warn("Using mock course creation (mock services enabled)");const t="mock-course-".concat(Date.now());let n,r,i,o;return e instanceof FormData?(n=e.get("Title")||"New Course",r=e.get("Description")||"Course description",i=e.get("CourseType")||"BasicAwareness",o=e.get("AgeGroup")||"Adults"):(n=e.Title||e.title||"New Course",r=e.Description||e.description||"Course description",i=e.CourseType||e.courseType||"BasicAwareness",o=e.AgeGroup||e.ageGroup||"Adults"),{success:!0,data:{courseId:t,title:n,description:r,courseType:i,ageGroup:o,isPublished:!1,createdAt:(new Date).toISOString(),chapters:[],imageUrl:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=250&fit=crop&auto=format"},status:201}}try{const t=new AbortController,n=setTimeout((()=>t.abort()),1e4),r=await this.authenticatedRequest(Ma.ENDPOINTS.COURSE_ALL,{method:"POST",body:e instanceof FormData?e:JSON.stringify(e),signal:t.signal});if(clearTimeout(n),r.success)return r;throw new Error(r.error||"Course creation failed")}catch(t){console.error("Course creation failed:",t.message);let e=t.message;throw t.message.includes("Unable to connect to backend server")?e="Cannot connect to backend server at ".concat(this.baseURL,". \n\nTo fix this issue:\n1. Make sure your backend server is running on port 5150\n2. Verify the backend API endpoints are correctly implemented\n3. Check that CORS is configured to allow requests from this frontend\n\nCurrent backend URL: ").concat(this.baseURL):t.message.includes("404")?e="Backend API endpoint not found. The /api/Course endpoint may not be implemented yet.\n\nPlease ensure your backend has:\n1. Course creation endpoint: POST /api/Course\n2. Proper request handling for FormData\n3. Authentication middleware configured":t.message.includes("401")||t.message.includes("Unauthorized")?e="Authentication failed. Please log in again or check your credentials.":(t.message.includes("timeout")||"AbortError"===t.name)&&(e="Request timeout. The backend took too long to respond. \n\nThis could indicate:\n1. Backend server is overloaded\n2. Database query is taking too long\n3. Network connectivity issues\n\nPlease try again or check the backend server status."),new Error(e)}}async updateCourse(e,t){try{const n=await this.authenticatedRequest(Ma.ENDPOINTS.COURSE_BY_ID.replace("{courseId}",e),{method:"PUT",body:t instanceof FormData?t:JSON.stringify(t)});if(n.success)return n;throw new Error(n.error)}catch(n){return console.error("Failed to update course:",n),n.message.includes("Failed to fetch")||n.message.includes("404")?(console.warn("API endpoint not available, returning mock update response for development"),{success:!0,data:{courseId:e,message:"Course updated successfully (mock)"},status:200}):{success:!1,error:n.message,status:n.status||500}}}async deleteCourse(e){try{const t=await this.authenticatedRequest(Ma.ENDPOINTS.COURSE_BY_ID.replace("{courseId}",e),{method:"DELETE",body:JSON.stringify(e)});if(t.success||t.isSuccess)return{success:!0,isSuccess:!0,code:t.code||"SUCCESS",message:t.message||"Course deleted successfully",data:t.data||null,errors:t.errors||[]};throw new Error(t.message||t.error||"Failed to delete course")}catch(t){return console.error("Failed to delete course:",t),t.message.includes("Failed to fetch")||t.message.includes("404")?(console.warn("API endpoint not available, returning mock delete response for development"),{success:!0,isSuccess:!0,code:"SUCCESS",message:"Course deleted successfully (mock)",data:null,errors:[]}):{success:!1,isSuccess:!1,code:"ERROR",message:t.message||"Failed to delete course",data:null,errors:[t.message||"Unknown error"]}}}async getChapters(){try{const e=await this.authenticatedRequest(Ma.ENDPOINTS.CHAPTER_ALL);if(e.success)return e;throw new Error(e.error)}catch(e){return console.error("Failed to load chapters:",e),e.message.includes("Failed to fetch")||e.message.includes("404")?(console.warn("API endpoint not available, returning mock chapters data for development"),{success:!0,data:[{chapterId:"mock-chapter-1",courseId:"mock-course-1",title:"Introduction to Substance Awareness",description:"Basic concepts and definitions",orderIndex:1,lessons:[{lessonId:"mock-lesson-1",title:"What is Substance Abuse?",content:"Understanding the basics...",orderIndex:1,estimatedDuration:15}],quizzes:[],media:[]}],status:200}):{success:!1,error:e.message,status:e.status||500}}}async getChapterById(e){return this.authenticatedRequest(Ma.ENDPOINTS.CHAPTER_BY_ID.replace("{chapterId}",e))}async createChapter(e){return this.authenticatedRequest(Ma.ENDPOINTS.CHAPTER_ALL,{method:"POST",body:JSON.stringify(e)})}async updateChapter(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.CHAPTER_BY_ID.replace("{chapterId}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteChapter(e){try{const t=await this.authenticatedRequest(Ma.ENDPOINTS.CHAPTER_BY_ID.replace("{chapterId}",e),{method:"DELETE",body:JSON.stringify(e)});if(t.success||t.isSuccess)return{success:!0,isSuccess:!0,code:t.code||"SUCCESS",message:t.message||"Chapter deleted successfully",data:t.data||null,errors:t.errors||[]};throw new Error(t.message||t.error||"Failed to delete chapter")}catch(t){return console.error("Failed to delete chapter:",t),t.message.includes("Failed to fetch")||t.message.includes("404")?(console.warn("API endpoint not available, returning mock delete response for development"),{success:!0,isSuccess:!0,code:"SUCCESS",message:"Chapter deleted successfully (mock)",data:null,errors:[]}):{success:!1,isSuccess:!1,code:"ERROR",message:t.message||"Failed to delete chapter",data:null,errors:[t.message||"Unknown error"]}}}async getLessons(){return this.authenticatedRequest(Ma.ENDPOINTS.LESSON_ALL)}async getLessonById(e){return this.authenticatedRequest(Ma.ENDPOINTS.LESSON_BY_ID.replace("{lessonId}",e))}async createLesson(e){return this.authenticatedRequest(Ma.ENDPOINTS.LESSON_ALL,{method:"POST",body:JSON.stringify(e)})}async updateLesson(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.LESSON_BY_ID.replace("{lessonId}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteLesson(e){try{const t=await this.authenticatedRequest(Ma.ENDPOINTS.LESSON_BY_ID.replace("{lessonId}",e),{method:"DELETE",body:JSON.stringify(e)});if(t.success||t.isSuccess)return{success:!0,isSuccess:!0,code:t.code||"SUCCESS",message:t.message||"Lesson deleted successfully",data:t.data||null,errors:t.errors||[]};throw new Error(t.message||t.error||"Failed to delete lesson")}catch(t){return console.error("Failed to delete lesson:",t),t.message.includes("Failed to fetch")||t.message.includes("404")?(console.warn("API endpoint not available, returning mock delete response for development"),{success:!0,isSuccess:!0,code:"SUCCESS",message:"Lesson deleted successfully (mock)",data:null,errors:[]}):{success:!1,isSuccess:!1,code:"ERROR",message:t.message||"Failed to delete lesson",data:null,errors:[t.message||"Unknown error"]}}}async getAllEnrollments(){return this.authenticatedRequest(Ma.ENDPOINTS.ENROLLMENT_ALL)}async getCourseEnrollments(e){return this.authenticatedRequest(Ma.ENDPOINTS.ENROLLMENT_BY_COURSE.replace("{courseId}",e))}async getEnrollmentCount(e){return this.authenticatedRequest(Ma.ENDPOINTS.ENROLLMENT_COUNT.replace("{courseId}",e))}async updateEnrollmentStatus(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.ENROLLMENT_UPDATE_STATUS.replace("{enrollmentId}",e),{method:"PUT",body:JSON.stringify({Status:t})})}async deleteEnrollment(e){return this.authenticatedRequest(Ma.ENDPOINTS.ENROLLMENT_DELETE.replace("{enrollmentId}",e),{method:"DELETE"})}async getAllProgress(){return this.authenticatedRequest(Ma.ENDPOINTS.PROGRESS_ALL)}async getProgressById(e){return this.authenticatedRequest(Ma.ENDPOINTS.PROGRESS_BY_ID.replace("{progressId}",e))}async createProgress(e){return this.authenticatedRequest(Ma.ENDPOINTS.PROGRESS_ALL,{method:"POST",body:JSON.stringify(e)})}async updateProgress(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.PROGRESS_BY_ID.replace("{progressId}",e),{method:"PUT",body:JSON.stringify(t)})}async getQuizzes(){return this.authenticatedRequest(Ma.ENDPOINTS.QUIZ_ALL)}async getQuizById(e){return this.authenticatedRequest(Ma.ENDPOINTS.QUIZ_BY_ID.replace("{quizId}",e))}async createQuiz(e){try{return await this.authenticatedRequest(Ma.ENDPOINTS.QUIZ_ALL,{method:"POST",body:JSON.stringify(e)})}catch(t){throw console.error("AdminService: Quiz creation error:",t),t}}async updateQuiz(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.QUIZ_BY_ID.replace("{quizId}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteQuiz(e){return this.authenticatedRequest(Ma.ENDPOINTS.QUIZ_BY_ID.replace("{quizId}",e),{method:"DELETE"})}async getQuizzesByLesson(e){return this.authenticatedRequest(Ma.ENDPOINTS.QUIZ_BY_LESSON.replace("{lessonId}",e),{method:"GET"})}async createQuestion(e){return this.authenticatedRequest("/api/Question",{method:"POST",body:JSON.stringify(e)})}async deleteQuestion(e){return this.authenticatedRequest("/api/Question/".concat(e),{method:"DELETE"})}async getCategories(){return this.authenticatedRequest(Ma.ENDPOINTS.CATEGORY_ALL,{method:"GET"})}async getCategoryById(e){return this.authenticatedRequest(Ma.ENDPOINTS.CATEGORY_BY_ID.replace("{id}",e),{method:"GET"})}async createCategory(e){return this.authenticatedRequest(Ma.ENDPOINTS.CATEGORY_ALL,{method:"POST",body:JSON.stringify(e)})}async updateCategory(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.CATEGORY_BY_ID.replace("{id}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteCategory(e){return this.authenticatedRequest(Ma.ENDPOINTS.CATEGORY_BY_ID.replace("{id}",e),{method:"DELETE"})}async getSubcategories(e){return this.authenticatedRequest(Ma.ENDPOINTS.CATEGORY_PARENT.replace("{parentId}",e),{method:"GET"})}async getSubstances(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.authenticatedRequest("".concat(Ma.ENDPOINTS.SUBSTANCE_ALL,"?page=").concat(e,"&pageSize=").concat(t),{method:"GET"})}async getSubstanceById(e){return this.authenticatedRequest(Ma.ENDPOINTS.SUBSTANCE_BY_ID.replace("{id}",e),{method:"GET"})}async createSubstance(e){return this.authenticatedRequest(Ma.ENDPOINTS.SUBSTANCE_ALL,{method:"POST",body:JSON.stringify(e)})}async updateSubstance(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.SUBSTANCE_BY_ID.replace("{id}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteSubstance(e){return this.authenticatedRequest(Ma.ENDPOINTS.SUBSTANCE_BY_ID.replace("{id}",e),{method:"DELETE"})}async getSurveys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.authenticatedRequest("".concat(Ma.ENDPOINTS.SURVEY_ALL,"?page=").concat(e,"&pageSize=").concat(t),{method:"GET"})}async createSurvey(e){return this.authenticatedRequest(Ma.ENDPOINTS.SURVEY_ALL,{method:"POST",body:JSON.stringify(e)})}async updateSurvey(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.SURVEY_BY_ID.replace("{id}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteSurvey(e){return this.authenticatedRequest(Ma.ENDPOINTS.SURVEY_BY_ID.replace("{id}",e),{method:"DELETE"})}async getAnalytics(){return this.authenticatedRequest(Ma.ENDPOINTS.ANALYTICS_ALL,{method:"GET"})}async getUserAnalytics(){return this.authenticatedRequest(Ma.ENDPOINTS.ANALYTICS_USER,{method:"GET"})}async getCourseAnalytics(){return this.authenticatedRequest(Ma.ENDPOINTS.ANALYTICS_COURSES,{method:"GET"})}async getSubstanceAnalytics(){return this.authenticatedRequest(Ma.ENDPOINTS.ANALYTICS_SUBSTANCES,{method:"GET"})}async getPostAnalytics(){return this.authenticatedRequest(Ma.ENDPOINTS.ANALYTICS_POSTS,{method:"GET"})}async getSurveyAnalytics(){return this.authenticatedRequest(Ma.ENDPOINTS.ANALYTICS_SURVEYS,{method:"GET"})}async getDashboardAnalytics(){return this.authenticatedRequest(Ma.ENDPOINTS.ANALYTICS_DASHBOARD,{method:"GET"})}async getTimeRangeAnalytics(e,t){return this.authenticatedRequest("".concat(Ma.ENDPOINTS.ANALYTICS_TIME_RANGE,"?startDate=").concat(e,"&endDate=").concat(t),{method:"GET"})}async searchUsers(e){return this.authenticatedRequest(Ma.ENDPOINTS.SEARCH_USERS,{method:"POST",body:JSON.stringify(e)})}async getBadges(){return this.authenticatedRequest(Ma.ENDPOINTS.BADGE_ALL,{method:"GET"})}async getBadgeById(e){return this.authenticatedRequest(Ma.ENDPOINTS.BADGE_BY_ID.replace("{id}",e),{method:"GET"})}async createBadge(e){return this.authenticatedRequest(Ma.ENDPOINTS.BADGE_ALL,{method:"POST",body:JSON.stringify(e)})}async updateBadge(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.BADGE_BY_ID.replace("{id}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteBadge(e){return this.authenticatedRequest(Ma.ENDPOINTS.BADGE_BY_ID.replace("{id}",e),{method:"DELETE"})}async awardBadge(e,t){return this.authenticatedRequest(Ma.ENDPOINTS.BADGE_AWARD,{method:"POST",body:JSON.stringify({userId:e,badgeId:t})})}async getHealthChecks(){return this.authenticatedRequest(Ma.ENDPOINTS.HEALTH_ALL,{method:"GET"})}async getDatabaseHealth(){return this.authenticatedRequest(Ma.ENDPOINTS.HEALTH_DATABASE,{method:"GET"})}async getFirebaseHealth(){return this.authenticatedRequest(Ma.ENDPOINTS.HEALTH_FIREBASE,{method:"GET"})}async getCloudinaryHealth(){return this.authenticatedRequest(Ma.ENDPOINTS.HEALTH_CLOUDINARY,{method:"GET"})}},Ha=Va;const za=new class{constructor(){this.baseURL=Ma.BASE_URL}getAuthHeaders(){const e=Qa.getAccessToken();return e?{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}:{"Content-Type":"application/json"}}async authenticatedRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const r=await Qa.authenticatedRequest(e,t);if(!r.ok){let i="HTTP error! status: ".concat(r.status),o=null;try{const e=await r.text();if(console.log("Error response text:",e),e.trim()){const t=JSON.parse(e);console.log("Parsed error data:",t),t.message?i=t.message:t.error?i=t.error:t.details?i=t.details:t.errors&&Array.isArray(t.errors)&&(i=t.errors.join(", ")),o=t}}catch(n){0}const a=new Error(i);throw a.status=r.status,a.details=o,console.error("Full error details:",{url:e,method:t.method||"GET",status:r.status,message:i,details:o}),a}const i=await r.text();if(!i.trim())return{success:!0,data:null};try{return JSON.parse(i)}catch(n){return console.warn("Response is not valid JSON, returning as text:",i),{success:!0,data:i}}}catch(r){throw r}}async createSlot(e){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultant-available-slots"),{method:"POST",body:JSON.stringify(e)})}}catch(t){return console.error("Create slot error:",t),{success:!1,error:t.message}}}async createMultipleSlots(e){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultant-available-slots/multiple"),{method:"POST",body:JSON.stringify({slots:e})})}}catch(t){return console.error("Create multiple slots error:",t),{success:!1,error:t.message}}}async getMySlots(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultant-available-slots/my-slots"))}}catch(e){return console.error("Get my slots error:",e),{success:!1,error:e.message}}}async searchSlots(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.startDate&&t.append("startDate",e.startDate),e.endDate&&t.append("endDate",e.endDate),e.startTime&&t.append("startTime",e.startTime),e.endTime&&t.append("endTime",e.endTime),e.consultantId&&t.append("consultantId",e.consultantId);return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultant-available-slots/search?").concat(t.toString()))}}catch(t){return console.error("Search slots error:",t),{success:!1,error:t.message}}}async getAvailableSlots(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.startDate&&t.append("startDate",e.startDate),e.endDate&&t.append("endDate",e.endDate),e.startTime&&t.append("startTime",e.startTime),e.endTime&&t.append("endTime",e.endTime);return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultant-available-slots?").concat(t.toString()))}}catch(t){return console.error("Get available slots error:",t),{success:!1,error:t.message}}}async getPublicAvailableSlots(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.startDate&&t.append("startDate",e.startDate),e.endDate&&t.append("endDate",e.endDate),e.startTime&&t.append("startTime",e.startTime),e.endTime&&t.append("endTime",e.endTime);return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultant-available-slots/available?").concat(t.toString()))}}catch(t){return console.error("Get public available slots error:",t),{success:!1,error:t.message}}}async getAllAvailableSlots(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultant-available-slots"))}}catch(e){return console.error("Get all available slots error:",e),{success:!1,error:e.message}}}async getAllSlotsDebug(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultant-available-slots/all"))}}catch(e){return console.error("Get all slots debug error:",e),{success:!1,error:e.message}}}async getSlotById(e){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultant-available-slots/").concat(e))}}catch(t){return console.error("Get slot by ID error:",t),{success:!1,error:t.message}}}async updateSlot(e,t){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultant-available-slots/").concat(e),{method:"PUT",body:JSON.stringify(t)})}}catch(n){return console.error("Update slot error:",n),{success:!1,error:n.message}}}async deleteSlot(e){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultant-available-slots/").concat(e),{method:"DELETE"})}}catch(t){return console.error("Delete slot error:",t),{success:!1,error:t.message}}}async createAppointment(e){try{0;return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments"),{method:"POST",body:JSON.stringify(e)})}}catch(t){return{success:!1,error:t.message}}}async getMyAppointments(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/my-appointments"))}}catch(e){return{success:!1,error:e.message}}}async getMyAppointmentsWithAgoraToken(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/my-appointments?includeAgoraToken=true"))}}catch(e){return{success:!1,error:e.message}}}async getMyBookedAppointments(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/my-booked-appointments"))}}catch(e){return{success:!1,error:e.message}}}async getMyBookedAppointmentsWithAgoraToken(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/my-booked-appointments?includeAgoraToken=true"))}}catch(e){return{success:!1,error:e.message}}}async getMyCompletedAppointments(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/my-completed-appointments"))}}catch(e){return{success:!1,error:e.message}}}async getMyConfirmedAppointments(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/my-confirmed-appointments"))}}catch(e){return{success:!1,error:e.message}}}async getMyConfirmedAppointmentsWithAgoraToken(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/my-confirmed-appointments?includeAgoraToken=true"))}}catch(e){return{success:!1,error:e.message}}}async getMyConsultations(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/my-consultations"))}}catch(e){return console.error("Get my consultations error:",e),{success:!1,error:e.message}}}async getMyConsultationsWithAgoraToken(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/my-consultations?includeAgoraToken=true"))}}catch(e){return console.error("Get my consultations with Agora token error:",e),{success:!1,error:e.message}}}async getAppointmentById(e){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/").concat(e))}}catch(t){return console.error("Get appointment by ID error:",t),{success:!1,error:t.message}}}async getAppointmentByIdWithAgoraToken(e){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/").concat(e,"?includeAgoraToken=true"))}}catch(t){return console.error("Get appointment by ID with Agora token error:",t),{success:!1,error:t.message}}}async refreshAgoraToken(e){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/").concat(e,"/agora-token"),{method:"POST"})}}catch(t){return console.error("Refresh Agora token error:",t),{success:!1,error:t.message}}}async updateAppointmentStatus(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/").concat(e,"/status"),{method:"PUT",body:JSON.stringify(l({status:t},n))})}}catch(r){return console.error("Update appointment status error:",r),{success:!1,error:r.message}}}async confirmAppointment(e,t){try{console.log("Confirming appointment ".concat(e," using updateAppointmentStatus"));const n=await this.updateAppointmentStatus(e,"confirmed",t);if(n.success)return console.log("Successfully confirmed appointment using updateAppointmentStatus"),n;throw new Error(n.error||"Failed to confirm appointment")}catch(n){return console.error("Confirm appointment error:",n),{success:!1,error:n.message}}}async rejectAppointment(e,t){try{console.log("Rejecting appointment ".concat(e," using updateAppointmentStatus"));const n=await this.updateAppointmentStatus(e,"rejected",{reason:t});if(n.success)return console.log("Successfully rejected appointment using updateAppointmentStatus"),n;throw new Error(n.error||"Failed to reject appointment")}catch(n){return console.error("Reject appointment error:",n),{success:!1,error:n.message}}}async cancelAppointmentByMember(e,t){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/").concat(e,"/cancel-by-member"),{method:"DELETE",body:JSON.stringify({reason:t})})}}catch(n){return console.error("Cancel appointment by member error:",n),{success:!1,error:n.message}}}async cancelAppointmentByConsultant(e,t){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/").concat(e,"/cancel-by-consultant"),{method:"DELETE",body:JSON.stringify({reason:t})})}}catch(n){return console.error("Cancel appointment by consultant error:",n),{success:!1,error:n.message}}}async cancelAppointment(e,t){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-appointments/").concat(e,"/cancel"),{method:"PUT",body:JSON.stringify({reason:t})})}}catch(n){return console.error("Cancel appointment error:",n),{success:!1,error:n.message}}}async getNotesByAppointment(e){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-notes/appointment/").concat(e))}}catch(t){return console.error("Get notes by appointment error:",t),{success:!1,error:t.message}}}async getMemberNotesByAppointment(e){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-notes/member/appointment/").concat(e))}}catch(t){return console.error("Get member notes by appointment error:",t),{success:!1,error:t.message}}}async getAllMemberNotes(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-notes/member/all-notes"))}}catch(e){return console.error("Get all member notes error:",e),{success:!1,error:e.message}}}async getAllConsultantNotes(){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-notes/consultant/all-notes"))}}catch(e){return console.error("Get all consultant notes error:",e),{success:!1,error:e.message}}}async getNoteById(e){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-notes/").concat(e))}}catch(t){return console.error("Get note by ID error:",t),{success:!1,error:t.message}}}async createNote(e){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-notes"),{method:"POST",body:JSON.stringify(e)})}}catch(t){return console.error("Create note error:",t),{success:!1,error:t.message}}}async updateNote(e,t){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-notes/").concat(e),{method:"PUT",body:JSON.stringify(t)})}}catch(n){return console.error("Update note error:",n),{success:!1,error:n.message}}}async deleteNote(e){try{return{success:!0,data:await this.authenticatedRequest("".concat(this.baseURL,"/api/consultation-notes/").concat(e),{method:"DELETE"})}}catch(t){return console.error("Delete note error:",t),{success:!1,error:t.message}}}async testAppointmentEndpoints(e){console.log("Testing appointment endpoints for ID:",e);const t=[{url:"".concat(this.baseURL,"/api/consultation-appointments/").concat(e),method:"GET",description:"Get appointment by ID"},{url:"".concat(this.baseURL,"/api/consultation-appointments/").concat(e,"/status"),method:"PUT",description:"Update status",body:{status:"pending"}}],n=[];for(const i of t)try{console.log("Testing: ".concat(i.description," - ").concat(i.method," ").concat(i.url));const e=await this.authenticatedRequest(i.url,{method:i.method,body:i.body?JSON.stringify(i.body):void 0});n.push({endpoint:i.url,method:i.method,description:i.description,status:"SUCCESS",response:e}),console.log("\u2705 ".concat(i.description,": SUCCESS"))}catch(r){n.push({endpoint:i.url,method:i.method,description:i.description,status:"FAILED",error:r.message}),console.log("\u274c ".concat(i.description,": ").concat(r.message))}return console.log("\u2705 All available endpoints tested successfully"),console.log("Note: This backend only supports /status endpoint for appointment updates"),console.log("Use status values: 'confirmed', 'rejected', 'pending', 'cancelled'"),n}};const Ka=new class{constructor(){this.baseURL=Ma.BASE_URL}async authenticatedRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=localStorage.getItem("accessToken"),r=l(l({"Content-Type":"application/json"},n&&{Authorization:"Bearer ".concat(n)}),t.headers),i=await fetch("".concat(this.baseURL).concat(e),l(l({},t),{},{headers:r}));if(!i.ok)throw new Error("API Error: ".concat(i.status," ").concat(i.statusText));return i.json()}async getCourseQuiz(e){try{const n=await fetch("".concat(this.baseURL).concat(Ma.ENDPOINTS.CHAPTER_BY_COURSE.replace("{courseId}",e)),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});if(!n.ok)throw new Error("Failed to fetch chapters");const r=await n.json();if(!r.success||!r.data)throw new Error("No chapters found");const i=r.data;let o=[];for(const e of i){const n=await fetch("".concat(this.baseURL).concat(Ma.ENDPOINTS.LESSON_BY_CHAPTER.replace("{chapterId}",e.id)),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});if(n.ok){const r=await n.json();if(r.success&&r.data){const n=r.data;for(const r of n)try{const t=await fetch("".concat(this.baseURL).concat(Ma.ENDPOINTS.QUIZ_BY_LESSON.replace("{lessonId}",r.id)),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});if(t.ok){const n=await t.json();if(n.success&&n.data&&n.data.length>0){const t=n.data[0];t.lessonId=r.id,t.lessonTitle=r.title,t.chapterTitle=e.title,o.push(t)}}}catch(t){console.warn("No quiz found for lesson ".concat(r.id,":"),t)}}}}return{success:!0,data:o,message:"Found ".concat(o.length," quiz(zes) in course")}}catch(n){throw console.error("Error fetching course quiz:",n),n}}async startQuizSession(e){const t=Ma.ENDPOINTS.QUIZ_START_SESSION.replace("{quizId}",e);return this.authenticatedRequest(t)}async getQuizQuestions(e){const t=Ma.ENDPOINTS.QUESTION_BY_QUIZ.replace("{quizId}",e);return this.authenticatedRequest(t)}async submitQuiz(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let i=r;if(!i){const t=await this.startQuizSession(e);if(!t.success)throw new Error("Failed to start quiz session");i=t.data.sessionId}const o={quizId:e,sessionId:i,userAnswers:t,timeSpentMinutes:n,notes:"Quiz submission"};return this.authenticatedRequest(Ma.ENDPOINTS.QUIZ_RESULT_SUBMIT,{method:"POST",body:JSON.stringify(o)})}catch(i){throw console.error("Error submitting quiz:",i),i}}async getQuizResults(e){const t=Ma.ENDPOINTS.QUIZ_RESULT_BY_USER_QUIZ.replace("{quizId}",e);return this.authenticatedRequest(t)}async getQuizById(e){const t=Ma.ENDPOINTS.QUIZ_BY_ID.replace("{quizId}",e);return this.authenticatedRequest(t)}},{getCourseQuiz:Ga,startQuizSession:Wa,getQuizQuestions:qa,submitQuiz:Ya,getQuizResults:Xa,getQuizById:Ja}=Ka;new class{constructor(){this.baseURL="http://localhost:5150",console.log("BE ok!")}async login(e,t){throw console.log("Mock auth is disabled - redirecting to real auth service"),new Error("Mock authentication is disabled. Please use real backend authentication.")}async register(e){throw console.log("Mock auth is disabled - redirecting to real auth service"),new Error("Mock authentication is disabled. Please use real backend authentication.")}async logout(){throw console.log("Mock logout disabled"),new Error("Mock authentication is disabled. Please use real backend authentication.")}async refreshToken(){throw console.log("Mock refresh token disabled"),new Error("Mock authentication is disabled. Please use real backend authentication.")}clearAuthData(){["accessToken","refreshToken","userEmail","userFullname","userRole","userId","userPhone","userGender","userDateOfBirth","userAddress","userProfilePicture"].forEach((e=>{localStorage.removeItem(e)}))}isAuthenticated(){return!1}getCurrentUser(){return null}getAccessToken(){return null}};const Za=Qa,$a=Ha,es=(Ma.ENDPOINTS.LOGIN,Ma.ENDPOINTS.REGISTER,Ma.ENDPOINTS.REFRESH_TOKEN,Ma.ENDPOINTS.LOGOUT,Ma.ENDPOINTS.FORGOT_PASSWORD,Ma.ENDPOINTS.RESET_PASSWORD,Ma.ENDPOINTS.CHANGE_PASSWORD,Ma.ENDPOINTS.VERIFY_EMAIL,Ma.ENDPOINTS.RESEND_VERIFICATION,Ma.ENDPOINTS.EMAIL_VERIFICATION_STATUS,Ma.ENDPOINTS.ADMIN_USERS,Ma.ENDPOINTS.ADMIN_USER_BY_ID,Ma.ENDPOINTS.ADMIN_DASHBOARD,Ma.ENDPOINTS.ADMIN_STATS,Ma.ENDPOINTS.ADMIN_POSTS,Ma.ENDPOINTS.ADMIN_POSTS_PENDING,Ma.ENDPOINTS.ADMIN_POST_BY_ID,Ma.ENDPOINTS.ADMIN_POST_APPROVE,Ma.ENDPOINTS.ADMIN_POST_REJECT,(0,t.createContext)()),ts=()=>(0,t.useContext)(es),ns=e=>{let{children:n}=e;const[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)(!0),[s,c]=(0,t.useState)(!1),[l,d]=(0,t.useState)(null),[u,A]=(0,t.useState)(!1),h=(0,t.useRef)(!1),p=(0,t.useRef)(!1);(0,t.useEffect)((()=>{const e=Za.getCurrentUser();e&&(i(e),c(!0),p.current||(p.current=!0,(async()=>{try{if((await Za.fetchUserProfile()).success){const e=Za.getCurrentUser();i(e)}}catch(l){console.error("Error fetching profile on startup:",l)}})())),a(!1)}),[]);const f={currentUser:r,setCurrentUser:i,login:async(e,t)=>{A(!0),d(null);try{const n=await Za.login(e,t);if(n.success){const e=Za.getCurrentUser();return i(e),c(!0),A(!1),{success:!0,data:e}}return d(n.error||"Authentication failed"),A(!1),{success:!1,error:n.error||"Authentication failed"}}catch(rI){return console.error("Login error:",rI),d(rI.message||"An unexpected error occurred"),A(!1),{success:!1,error:rI.message||"An unexpected error occurred"}}},register:async e=>{try{return await Za.register(e)}catch(l){return console.error("Registration error:",l),{success:!1,error:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u0103ng k\xfd"}}},logout:async()=>{try{return await Za.logout(),i(null),c(!1),{success:!0}}catch(l){return console.error("Logout error:",l),i(null),c(!1),{success:!0}}},updateProfile:async e=>{try{const t=await Za.updateProfile(e);if(t.success){const e=Za.getCurrentUser();return i(e),{success:!0,data:t.data}}return{success:!1,error:t.error}}catch(l){return console.error("Update profile error:",l),{success:!1,error:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra khi c\u1eadp nh\u1eadt h\u1ed3 s\u01a1"}}},changePassword:async(e,t)=>{try{return await Za.changePassword(e,t)}catch(l){return console.error("Change password error:",l),{success:!1,error:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u1ed5i m\u1eadt kh\u1ea9u"}}},refreshToken:async()=>{try{return await Za.refreshToken()}catch(l){return console.error("Refresh token error:",l),{success:!1,error:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra khi l\xe0m m\u1edbi token"}}},refreshUserData:async()=>{if(!s||h.current)return;const e=Za.getCurrentUser();if(e&&e.fullname&&e.phone){const t="consultant"===e.role||"consultant"===e.roleName;if(!t||e.specialization&&e.degree){if(!t)return}else;}h.current=!0;try{if((await Za.fetchUserProfile()).success){const e=Za.getCurrentUser();i(e)}}catch(l){console.error("Error refreshing user data:",l)}finally{h.current=!1}},isAuthenticated:s,isAdmin:()=>r&&"admin"===r.role,isConsultant:()=>r&&("consultant"===r.role||"Consultant"===r.role),isStaff:()=>r&&("staff"===r.role||"Staff"===r.role),getAccessToken:()=>Za.getAccessToken(),error:l,isLoading:u};return(0,Tt.jsx)(es.Provider,{value:f,children:!o&&n})};function rs(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?is(Object(n),!0).forEach((function(t){rs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const as=()=>{};let ss={},cs={},ls=null,ds={mark:as,measure:as};try{"undefined"!==typeof window&&(ss=window),"undefined"!==typeof document&&(cs=document),"undefined"!==typeof MutationObserver&&(ls=MutationObserver),"undefined"!==typeof performance&&(ds=performance)}catch(XB){}const{userAgent:us=""}=ss.navigator||{},As=ss,hs=cs,ps=ls,fs=ds,ms=(As.document,!!hs.documentElement&&!!hs.head&&"function"===typeof hs.addEventListener&&"function"===typeof hs.createElement),gs=~us.indexOf("MSIE")||~us.indexOf("Trident/");var vs={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},ys=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],bs="classic",Es="duotone",ws=[bs,Es,"sharp","sharp-duotone"],_s=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),Ss=["fak","fa-kit","fakd","fa-kit-duotone"],Cs={fak:"kit","fa-kit":"kit"},Ts={fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"},Is=["fak","fakd"],Rs={kit:"fak"},xs={"kit-duotone":"fakd"},Ns={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Os=["fak","fa-kit","fakd","fa-kit-duotone"],ks={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},Ps=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],Bs=[1,2,3,4,5,6,7,8,9,10],Ls=Bs.concat([11,12,13,14,15,16,17,18,19,20]),Ds=[...Object.keys({classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]}),"solid","regular","light","thin","duotone","brands","2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Ns.GROUP,Ns.SWAP_OPACITY,Ns.PRIMARY,Ns.SECONDARY].concat(Bs.map((e=>"".concat(e,"x")))).concat(Ls.map((e=>"w-".concat(e))));const Us="___FONT_AWESOME___",Ms=16,Fs="svg-inline--fa",js="data-fa-i2svg",Qs="data-fa-pseudo-element",Vs="data-prefix",Hs="data-icon",zs="fontawesome-i2svg",Ks=["HTML","HEAD","STYLE","SCRIPT"],Gs=(()=>{try{return!0}catch(e){return!1}})();function Ws(e){return new Proxy(e,{get:(e,t)=>t in e?e[t]:e[bs]})}const qs=os({},vs);qs[bs]=os(os(os(os({},{"fa-duotone":"duotone"}),vs[bs]),Cs),Ts);const Ys=Ws(qs),Xs=os({},{classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}});Xs[bs]=os(os(os(os({},{duotone:"fad"}),Xs[bs]),Rs),xs);const Js=Ws(Xs),Zs=os({},ks);Zs[bs]=os(os({},Zs[bs]),{fak:"fa-kit"});const $s=Ws(Zs),ec=os({},{classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}});ec[bs]=os(os({},ec[bs]),{"fa-kit":"fak"});Ws(ec);const tc=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,nc="fa-layers-text",rc=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,ic=(Ws(os({},{classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}})),["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"]),oc={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},ac=["kit",...Ds],sc=As.FontAwesomeConfig||{};if(hs&&"function"===typeof hs.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((e=>{let[t,n]=e;const r=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=hs.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(t));void 0!==r&&null!==r&&(sc[n]=r)}))}const cc={styleDefault:"solid",familyDefault:bs,cssPrefix:"fa",replacementClass:Fs,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};sc.familyPrefix&&(sc.cssPrefix=sc.familyPrefix);const lc=os(os({},cc),sc);lc.autoReplaceSvg||(lc.observeMutations=!1);const dc={};Object.keys(cc).forEach((e=>{Object.defineProperty(dc,e,{enumerable:!0,set:function(t){lc[e]=t,uc.forEach((e=>e(dc)))},get:function(){return lc[e]}})})),Object.defineProperty(dc,"familyPrefix",{enumerable:!0,set:function(e){lc.cssPrefix=e,uc.forEach((e=>e(dc)))},get:function(){return lc.cssPrefix}}),As.FontAwesomeConfig=dc;const uc=[];const Ac=Ms,hc={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function pc(){let e=12,t="";for(;e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function fc(e){const t=[];for(let n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function mc(e){return e.classList?fc(e.classList):(e.getAttribute("class")||"").split(" ").filter((e=>e))}function gc(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function vc(e){return Object.keys(e||{}).reduce(((t,n)=>t+"".concat(n,": ").concat(e[n].trim(),";")),"")}function yc(e){return e.size!==hc.size||e.x!==hc.x||e.y!==hc.y||e.rotate!==hc.rotate||e.flipX||e.flipY}function bc(){const e="fa",t=Fs,n=dc.cssPrefix,r=dc.replacementClass;let i=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-counter-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(-1 * var(--fa-li-width, 2em));\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  animation-name: fa-beat;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  animation-name: fa-bounce;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  animation-name: fa-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  animation-name: fa-beat-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  animation-name: fa-flip;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  animation-name: fa-shake;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  animation-name: fa-spin;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 2s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  animation-name: fa-spin;\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    animation-delay: -1ms;\n    animation-duration: 1ms;\n    animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    transform: scale(1);\n  }\n  45% {\n    transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-shake {\n  0% {\n    transform: rotate(-15deg);\n  }\n  4% {\n    transform: rotate(15deg);\n  }\n  8%, 24% {\n    transform: rotate(-18deg);\n  }\n  12%, 28% {\n    transform: rotate(18deg);\n  }\n  16% {\n    transform: rotate(-22deg);\n  }\n  20% {\n    transform: rotate(22deg);\n  }\n  32% {\n    transform: rotate(-12deg);\n  }\n  36% {\n    transform: rotate(12deg);\n  }\n  40%, 100% {\n    transform: rotate(0deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}';if(n!==e||r!==t){const o=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}let Ec=!1;function wc(){dc.autoAddCss&&!Ec&&(!function(e){if(!e||!ms)return;const t=hs.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const n=hs.head.childNodes;let r=null;for(let i=n.length-1;i>-1;i--){const e=n[i],t=(e.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(t)>-1&&(r=e)}hs.head.insertBefore(t,r)}(bc()),Ec=!0)}var _c={mixout:()=>({dom:{css:bc,insertCss:wc}}),hooks:()=>({beforeDOMElementCreation(){wc()},beforeI2svg(){wc()}})};const Sc=As||{};Sc[Us]||(Sc[Us]={}),Sc[Us].styles||(Sc[Us].styles={}),Sc[Us].hooks||(Sc[Us].hooks={}),Sc[Us].shims||(Sc[Us].shims=[]);var Cc=Sc[Us];const Tc=[],Ic=function(){hs.removeEventListener("DOMContentLoaded",Ic),Rc=1,Tc.map((e=>e()))};let Rc=!1;function xc(e){const{tag:t,attributes:n={},children:r=[]}=e;return"string"===typeof e?gc(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce(((t,n)=>t+"".concat(n,'="').concat(gc(e[n]),'" ')),"").trim()}(n),">").concat(r.map(xc).join(""),"</").concat(t,">")}function Nc(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}ms&&(Rc=(hs.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(hs.readyState),Rc||hs.addEventListener("DOMContentLoaded",Ic));var Oc=function(e,t,n,r){var i,o,a,s=Object.keys(e),c=s.length,l=void 0!==r?function(e,t){return function(n,r,i,o){return e.call(t,n,r,i,o)}}(t,r):t;for(void 0===n?(i=1,a=e[s[0]]):(i=0,a=n);i<c;i++)a=l(a,e[o=s[i]],o,e);return a};function kc(e){const t=function(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function Pc(e){return Object.keys(e).reduce(((t,n)=>{const r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function Bc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipHooks:r=!1}=n,i=Pc(t);"function"!==typeof Cc.hooks.addPack||r?Cc.styles[e]=os(os({},Cc.styles[e]||{}),i):Cc.hooks.addPack(e,Pc(t)),"fas"===e&&Bc("fa",t)}const{styles:Lc,shims:Dc}=Cc,Uc=Object.keys($s),Mc=Uc.reduce(((e,t)=>(e[t]=Object.keys($s[t]),e)),{});let Fc=null,jc={},Qc={},Vc={},Hc={},zc={};function Kc(e,t){const n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r!==e||""===i||(o=i,~ac.indexOf(o))?null:i;var o}const Gc=()=>{const e=e=>Oc(Lc,((t,n,r)=>(t[r]=Oc(n,e,{}),t)),{});jc=e(((e,t,n)=>{if(t[3]&&(e[t[3]]=n),t[2]){t[2].filter((e=>"number"===typeof e)).forEach((t=>{e[t.toString(16)]=n}))}return e})),Qc=e(((e,t,n)=>{if(e[n]=n,t[2]){t[2].filter((e=>"string"===typeof e)).forEach((t=>{e[t]=n}))}return e})),zc=e(((e,t,n)=>{const r=t[2];return e[n]=n,r.forEach((t=>{e[t]=n})),e}));const t="far"in Lc||dc.autoFetchSvg,n=Oc(Dc,((e,n)=>{const r=n[0];let i=n[1];const o=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:o}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:o}),e}),{names:{},unicodes:{}});Vc=n.names,Hc=n.unicodes,Fc=Zc(dc.styleDefault,{family:dc.familyDefault})};var Wc;function qc(e,t){return(jc[e]||{})[t]}function Yc(e,t){return(zc[e]||{})[t]}function Xc(e){return Vc[e]||{prefix:null,iconName:null}}function Jc(){return Fc}Wc=e=>{Fc=Zc(e.styleDefault,{family:dc.familyDefault})},uc.push(Wc),Gc();function Zc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{family:n=bs}=t,r=Ys[n][e];if(n===Es&&!e)return"fad";const i=Js[n][e]||Js[n][r],o=e in Cc.styles?e:null;return i||o||null}function $c(e){return e.sort().filter(((e,t,n)=>n.indexOf(e)===t))}function el(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{skipLookups:n=!1}=t;let r=null;const i=Ps.concat(Os),o=$c(e.filter((e=>i.includes(e)))),a=$c(e.filter((e=>!Ps.includes(e)))),s=o.filter((e=>(r=e,!ys.includes(e)))),[c=null]=s,l=function(e){let t=bs;const n=Uc.reduce(((e,t)=>(e[t]="".concat(dc.cssPrefix,"-").concat(t),e)),{});return ws.forEach((r=>{(e.includes(n[r])||e.some((e=>Mc[r].includes(e))))&&(t=r)})),t}(o),d=os(os({},function(e){let t=[],n=null;return e.forEach((e=>{const r=Kc(dc.cssPrefix,e);r?n=r:e&&t.push(e)})),{iconName:n,rest:t}}(a)),{},{prefix:Zc(c,{family:l})});return os(os(os({},d),function(e){const{values:t,family:n,canonical:r,givenPrefix:i="",styles:o={},config:a={}}=e,s=n===Es,c=t.includes("fa-duotone")||t.includes("fad"),l="duotone"===a.familyDefault,d="fad"===r.prefix||"fa-duotone"===r.prefix;!s&&(c||l||d)&&(r.prefix="fad");(t.includes("fa-brands")||t.includes("fab"))&&(r.prefix="fab");if(!r.prefix&&tl.includes(n)){if(Object.keys(o).find((e=>nl.includes(e)))||a.autoFetchSvg){const e=_s.get(n).defaultShortPrefixId;r.prefix=e,r.iconName=Yc(r.prefix,r.iconName)||r.iconName}}"fa"!==r.prefix&&"fa"!==i||(r.prefix=Jc()||"fas");return r}({values:e,family:l,styles:Lc,config:dc,canonical:d,givenPrefix:r})),function(e,t,n){let{prefix:r,iconName:i}=n;if(e||!r||!i)return{prefix:r,iconName:i};const o="fa"===t?Xc(i):{},a=Yc(r,i);i=o.iconName||a||i,r=o.prefix||r,"far"!==r||Lc.far||!Lc.fas||dc.autoFetchSvg||(r="fas");return{prefix:r,iconName:i}}(n,r,d))}const tl=ws.filter((e=>e!==bs||e!==Es)),nl=Object.keys(ks).filter((e=>e!==bs)).map((e=>Object.keys(ks[e]))).flat();let rl=[],il={};const ol={},al=Object.keys(ol);function sl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(il[e]||[]).forEach((e=>{t=e.apply(null,[t,...r])})),t}function cl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(il[e]||[]).forEach((e=>{e.apply(null,n)}))}function ll(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return ol[e]?ol[e].apply(null,t):void 0}function dl(e){"fa"===e.prefix&&(e.prefix="fas");let{iconName:t}=e;const n=e.prefix||Jc();if(t)return t=Yc(n,t)||t,Nc(ul.definitions,n,t)||Nc(Cc.styles,n,t)}const ul=new class{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(this._pullDefinitions,{});Object.keys(r).forEach((e=>{this.definitions[e]=os(os({},this.definitions[e]||{}),r[e]),Bc(e,r[e]);const t=$s[bs][e];t&&Bc(t,r[e]),Gc()}))}reset(){this.definitions={}}_pullDefinitions(e,t){const n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((t=>{const{prefix:r,iconName:i,icon:o}=n[t],a=o[2];e[r]||(e[r]={}),a.length>0&&a.forEach((t=>{"string"===typeof t&&(e[r][t]=o)})),e[r][i]=o})),e}},Al={i2svg:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ms?(cl("beforeI2svg",e),ll("pseudoElements2svg",e),ll("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;var n;!1===dc.autoReplaceSvg&&(dc.autoReplaceSvg=!0),dc.observeMutations=!0,n=()=>{fl({autoReplaceSvgRoot:t}),cl("watch",e)},ms&&(Rc?setTimeout(n,0):Tc.push(n))}},hl={icon:e=>{if(null===e)return null;if("object"===typeof e&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Yc(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){const t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=Zc(e[0]);return{prefix:n,iconName:Yc(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(dc.cssPrefix,"-"))>-1||e.match(tc))){const t=el(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||Jc(),iconName:Yc(t.prefix,t.iconName)||t.iconName}}if("string"===typeof e){const t=Jc();return{prefix:t,iconName:Yc(t,e)||e}}}},pl={noAuto:()=>{dc.autoReplaceSvg=!1,dc.observeMutations=!1,cl("noAuto")},config:dc,dom:Al,parse:hl,library:ul,findIconDefinition:dl,toHtml:xc},fl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t=hs}=e;(Object.keys(Cc.styles).length>0||dc.autoFetchSvg)&&ms&&dc.autoReplaceSvg&&pl.dom.i2svg({node:t})};function ml(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((e=>xc(e)))}}),Object.defineProperty(e,"node",{get:function(){if(!ms)return;const t=hs.createElement("div");return t.innerHTML=e.html,t.children}}),e}function gl(e){const{icons:{main:t,mask:n},prefix:r,iconName:i,transform:o,symbol:a,title:s,maskId:c,titleId:l,extra:d,watchable:u=!1}=e,{width:A,height:h}=n.found?n:t,p=Is.includes(r),f=[dc.replacementClass,i?"".concat(dc.cssPrefix,"-").concat(i):""].filter((e=>-1===d.classes.indexOf(e))).filter((e=>""!==e||!!e)).concat(d.classes).join(" ");let m={children:[],attributes:os(os({},d.attributes),{},{"data-prefix":r,"data-icon":i,class:f,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(A," ").concat(h)})};const g=p&&!~d.classes.indexOf("fa-fw")?{width:"".concat(A/h*16*.0625,"em")}:{};u&&(m.attributes[js]=""),s&&(m.children.push({tag:"title",attributes:{id:m.attributes["aria-labelledby"]||"title-".concat(l||pc())},children:[s]}),delete m.attributes.title);const v=os(os({},m),{},{prefix:r,iconName:i,main:t,mask:n,maskId:c,transform:o,symbol:a,styles:os(os({},g),d.styles)}),{children:y,attributes:b}=n.found&&t.found?ll("generateAbstractMask",v)||{children:[],attributes:{}}:ll("generateAbstractIcon",v)||{children:[],attributes:{}};return v.children=y,v.attributes=b,a?function(e){let{prefix:t,iconName:n,children:r,attributes:i,symbol:o}=e;const a=!0===o?"".concat(t,"-").concat(dc.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:os(os({},i),{},{id:a}),children:r}]}]}(v):function(e){let{children:t,main:n,mask:r,attributes:i,styles:o,transform:a}=e;if(yc(a)&&n.found&&!r.found){const{width:e,height:t}=n,r={x:e/t/2,y:.5};i.style=vc(os(os({},o),{},{"transform-origin":"".concat(r.x+a.x/16,"em ").concat(r.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(v)}function vl(e){const{content:t,width:n,height:r,transform:i,title:o,extra:a,watchable:s=!1}=e,c=os(os(os({},a.attributes),o?{title:o}:{}),{},{class:a.classes.join(" ")});s&&(c[js]="");const l=os({},a.styles);yc(i)&&(l.transform=function(e){let{transform:t,width:n=Ms,height:r=Ms,startCentered:i=!1}=e,o="";return o+=i&&gs?"translate(".concat(t.x/Ac-n/2,"em, ").concat(t.y/Ac-r/2,"em) "):i?"translate(calc(-50% + ".concat(t.x/Ac,"em), calc(-50% + ").concat(t.y/Ac,"em)) "):"translate(".concat(t.x/Ac,"em, ").concat(t.y/Ac,"em) "),o+="scale(".concat(t.size/Ac*(t.flipX?-1:1),", ").concat(t.size/Ac*(t.flipY?-1:1),") "),o+="rotate(".concat(t.rotate,"deg) "),o}({transform:i,startCentered:!0,width:n,height:r}),l["-webkit-transform"]=l.transform);const d=vc(l);d.length>0&&(c.style=d);const u=[];return u.push({tag:"span",attributes:c,children:[t]}),o&&u.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),u}const{styles:yl}=Cc;function bl(e){const t=e[0],n=e[1],[r]=e.slice(4);let i=null;return i=Array.isArray(r)?{tag:"g",attributes:{class:"".concat(dc.cssPrefix,"-").concat(oc.GROUP)},children:[{tag:"path",attributes:{class:"".concat(dc.cssPrefix,"-").concat(oc.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(dc.cssPrefix,"-").concat(oc.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:t,height:n,icon:i}}const El={found:!1,width:512,height:512};function wl(e,t){let n=t;return"fa"===t&&null!==dc.styleDefault&&(t=Jc()),new Promise(((r,i)=>{if("fa"===n){const n=Xc(e)||{};e=n.iconName||e,t=n.prefix||t}if(e&&t&&yl[t]&&yl[t][e]){return r(bl(yl[t][e]))}!function(e,t){Gs||dc.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(os(os({},El),{},{icon:dc.showMissingIcons&&e&&ll("missingIconAbstract")||{}}))}))}const _l=()=>{},Sl=dc.measurePerformance&&fs&&fs.mark&&fs.measure?fs:{mark:_l,measure:_l},Cl='FA "6.7.2"',Tl=e=>{Sl.mark("".concat(Cl," ").concat(e," ends")),Sl.measure("".concat(Cl," ").concat(e),"".concat(Cl," ").concat(e," begins"),"".concat(Cl," ").concat(e," ends"))};var Il=e=>(Sl.mark("".concat(Cl," ").concat(e," begins")),()=>Tl(e));const Rl=()=>{};function xl(e){return"string"===typeof(e.getAttribute?e.getAttribute(js):null)}function Nl(e){return hs.createElementNS("http://www.w3.org/2000/svg",e)}function Ol(e){return hs.createElement(e)}function kl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ceFn:n=("svg"===e.tag?Nl:Ol)}=t;if("string"===typeof e)return hs.createTextNode(e);const r=n(e.tag);Object.keys(e.attributes||[]).forEach((function(t){r.setAttribute(t,e.attributes[t])}));return(e.children||[]).forEach((function(e){r.appendChild(kl(e,{ceFn:n}))})),r}const Pl={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach((e=>{t.parentNode.insertBefore(kl(e),t)})),null===t.getAttribute(js)&&dc.keepOriginalSource){let e=hs.createComment(function(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}(t));t.parentNode.replaceChild(e,t)}else t.remove()},nest:function(e){const t=e[0],n=e[1];if(~mc(t).indexOf(dc.replacementClass))return Pl.replace(e);const r=new RegExp("".concat(dc.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const e=n[0].attributes.class.split(" ").reduce(((e,t)=>(t===dc.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e)),{toNode:[],toSvg:[]});n[0].attributes.class=e.toSvg.join(" "),0===e.toNode.length?t.removeAttribute("class"):t.setAttribute("class",e.toNode.join(" "))}const i=n.map((e=>xc(e))).join("\n");t.setAttribute(js,""),t.innerHTML=i}};function Bl(e){e()}function Ll(e,t){const n="function"===typeof t?t:Rl;if(0===e.length)n();else{let t=Bl;"async"===dc.mutateApproach&&(t=As.requestAnimationFrame||Bl),t((()=>{const t=!0===dc.autoReplaceSvg?Pl.replace:Pl[dc.autoReplaceSvg]||Pl.replace,r=Il("mutate");e.map(t),r(),n()}))}}let Dl=!1;function Ul(){Dl=!0}function Ml(){Dl=!1}let Fl=null;function jl(e){if(!ps)return;if(!dc.observeMutations)return;const{treeCallback:t=Rl,nodeCallback:n=Rl,pseudoElementsCallback:r=Rl,observeMutationsRoot:i=hs}=e;Fl=new ps((e=>{if(Dl)return;const i=Jc();fc(e).forEach((e=>{if("childList"===e.type&&e.addedNodes.length>0&&!xl(e.addedNodes[0])&&(dc.searchPseudoElements&&r(e.target),t(e.target)),"attributes"===e.type&&e.target.parentNode&&dc.searchPseudoElements&&r(e.target.parentNode),"attributes"===e.type&&xl(e.target)&&~ic.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){const t=e.getAttribute?e.getAttribute(Vs):null,n=e.getAttribute?e.getAttribute(Hs):null;return t&&n}(e.target)){const{prefix:t,iconName:n}=el(mc(e.target));e.target.setAttribute(Vs,t||i),n&&e.target.setAttribute(Hs,n)}else(function(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(dc.replacementClass)})(e.target)&&n(e.target)}))})),ms&&Fl.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Ql(e){const t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"";let i=el(mc(e));return i.prefix||(i.prefix=Jc()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function(e,t){return(Qc[e]||{})[t]}(i.prefix,e.innerText)||qc(i.prefix,kc(e.innerText))),!i.iconName&&dc.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function Vl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:i}=Ql(e),o=function(e){const t=fc(e.attributes).reduce(((e,t)=>("class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e)),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return dc.autoA11y&&(n?t["aria-labelledby"]="".concat(dc.replacementClass,"-title-").concat(r||pc()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),a=sl("parseNodeAttributes",{},e);let s=t.styleParser?function(e){const t=e.getAttribute("style");let n=[];return t&&(n=t.split(";").reduce(((e,t)=>{const n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}(e):[];return os({iconName:n,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:r,transform:hc,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:s,attributes:o}},a)}const{styles:Hl}=Cc;function zl(e){const t="nest"===dc.autoReplaceSvg?Vl(e,{styleParser:!1}):Vl(e);return~t.extra.classes.indexOf(nc)?ll("generateLayersText",e,t):ll("generateSvgReplacementMutation",e,t)}function Kl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!ms)return Promise.resolve();const n=hs.documentElement.classList,r=e=>n.add("".concat(zs,"-").concat(e)),i=e=>n.remove("".concat(zs,"-").concat(e)),o=dc.autoFetchSvg?[...Ss,...Ps]:ys.concat(Object.keys(Hl));o.includes("fa")||o.push("fa");const a=[".".concat(nc,":not([").concat(js,"])")].concat(o.map((e=>".".concat(e,":not([").concat(js,"])")))).join(", ");if(0===a.length)return Promise.resolve();let s=[];try{s=fc(e.querySelectorAll(a))}catch(d){}if(!(s.length>0))return Promise.resolve();r("pending"),i("complete");const c=Il("onTree"),l=s.reduce(((e,t)=>{try{const n=zl(t);n&&e.push(n)}catch(d){Gs||"MissingIcon"===d.name&&console.error(d)}return e}),[]);return new Promise(((e,n)=>{Promise.all(l).then((n=>{Ll(n,(()=>{r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),c(),e()}))})).catch((e=>{c(),n(e)}))}))}function Gl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;zl(e).then((e=>{e&&Ll([e],t)}))}function Wl(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(t||{}).icon?t:dl(t||{});let{mask:i}=n;return i&&(i=(i||{}).icon?i:dl(i||{})),e(r,os(os({},n),{},{mask:i}))}}const ql=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=hc,symbol:r=!1,mask:i=null,maskId:o=null,title:a=null,titleId:s=null,classes:c=[],attributes:l={},styles:d={}}=t;if(!e)return;const{prefix:u,iconName:A,icon:h}=e;return ml(os({type:"icon"},e),(()=>(cl("beforeDOMElementCreation",{iconDefinition:e,params:t}),dc.autoA11y&&(a?l["aria-labelledby"]="".concat(dc.replacementClass,"-title-").concat(s||pc()):(l["aria-hidden"]="true",l.focusable="false")),gl({icons:{main:bl(h),mask:i?bl(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:u,iconName:A,transform:os(os({},hc),n),symbol:r,title:a,maskId:o,titleId:s,extra:{attributes:l,styles:d,classes:c}}))))};var Yl={mixout:()=>({icon:Wl(ql)}),hooks:()=>({mutationObserverCallbacks:e=>(e.treeCallback=Kl,e.nodeCallback=Gl,e)}),provides(e){e.i2svg=function(e){const{node:t=hs,callback:n=()=>{}}=e;return Kl(t,n)},e.generateSvgReplacementMutation=function(e,t){const{iconName:n,title:r,titleId:i,prefix:o,transform:a,symbol:s,mask:c,maskId:l,extra:d}=t;return new Promise(((t,u)=>{Promise.all([wl(n,o),c.iconName?wl(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((c=>{let[u,A]=c;t([e,gl({icons:{main:u,mask:A},prefix:o,iconName:n,transform:a,symbol:s,maskId:l,title:r,titleId:i,extra:d,watchable:!0})])})).catch(u)}))},e.generateAbstractIcon=function(e){let{children:t,attributes:n,main:r,transform:i,styles:o}=e;const a=vc(o);let s;return a.length>0&&(n.style=a),yc(i)&&(s=ll("generateAbstractTransformGrouping",{main:r,transform:i,containerWidth:r.width,iconWidth:r.width})),t.push(s||r.icon),{children:t,attributes:n}}}},Xl={mixout:()=>({layer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{classes:n=[]}=t;return ml({type:"layer"},(()=>{cl("beforeDOMElementCreation",{assembler:e,params:t});let r=[];return e((e=>{Array.isArray(e)?e.map((e=>{r=r.concat(e.abstract)})):r=r.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(dc.cssPrefix,"-layers"),...n].join(" ")},children:r}]}))}})},Jl={mixout:()=>({counter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{title:n=null,classes:r=[],attributes:i={},styles:o={}}=t;return ml({type:"counter",content:e},(()=>(cl("beforeDOMElementCreation",{content:e,params:t}),function(e){const{content:t,title:n,extra:r}=e,i=os(os(os({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=vc(r.styles);o.length>0&&(i.style=o);const a=[];return a.push({tag:"span",attributes:i,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}({content:e.toString(),title:n,extra:{attributes:i,styles:o,classes:["".concat(dc.cssPrefix,"-layers-counter"),...r]}}))))}})},Zl={mixout:()=>({text(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=hc,title:r=null,classes:i=[],attributes:o={},styles:a={}}=t;return ml({type:"text",content:e},(()=>(cl("beforeDOMElementCreation",{content:e,params:t}),vl({content:e,transform:os(os({},hc),n),title:r,extra:{attributes:o,styles:a,classes:["".concat(dc.cssPrefix,"-layers-text"),...i]}}))))}}),provides(e){e.generateLayersText=function(e,t){const{title:n,transform:r,extra:i}=t;let o=null,a=null;if(gs){const t=parseInt(getComputedStyle(e).fontSize,10),n=e.getBoundingClientRect();o=n.width/t,a=n.height/t}return dc.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,vl({content:e.innerHTML,width:o,height:a,transform:r,title:n,extra:i,watchable:!0})])}}};const $l=new RegExp('"',"ug"),ed=[1105920,1112319],td=os(os(os(os({},{FontAwesome:{normal:"fas",400:"fas"}}),{"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}}),{"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}}),{"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}}),nd=Object.keys(td).reduce(((e,t)=>(e[t.toLowerCase()]=td[t],e)),{}),rd=Object.keys(nd).reduce(((e,t)=>{const n=nd[t];return e[t]=n[900]||[...Object.entries(n)][0][1],e}),{});function id(e,t){const n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise(((r,i)=>{if(null!==e.getAttribute(n))return r();const o=fc(e.children).filter((e=>e.getAttribute(Qs)===t))[0],a=As.getComputedStyle(e,t),s=a.getPropertyValue("font-family"),c=s.match(rc),l=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return e.removeChild(o),r();if(c&&"none"!==d&&""!==d){const d=a.getPropertyValue("content");let u=function(e,t){const n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(t),i=isNaN(r)?"normal":r;return(nd[n]||{})[i]||rd[n]}(s,l);const{value:A,isSecondary:h}=function(e){const t=e.replace($l,""),n=function(e,t){const n=e.length;let r,i=e.charCodeAt(t);return i>=55296&&i<=56319&&n>t+1&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?1024*(i-55296)+r-56320+65536:i}(t,0),r=n>=ed[0]&&n<=ed[1],i=2===t.length&&t[0]===t[1];return{value:kc(i?t[0]:t),isSecondary:r||i}}(d),p=c[0].startsWith("FontAwesome");let f=qc(u,A),m=f;if(p){const e=function(e){const t=Hc[e],n=qc("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(A);e.iconName&&e.prefix&&(f=e.iconName,u=e.prefix)}if(!f||h||o&&o.getAttribute(Vs)===u&&o.getAttribute(Hs)===m)r();else{e.setAttribute(n,m),o&&e.removeChild(o);const a={iconName:null,title:null,titleId:null,prefix:null,transform:hc,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},{extra:s}=a;s.attributes[Qs]=t,wl(f,u).then((i=>{const o=gl(os(os({},a),{},{icons:{main:i,mask:{prefix:null,iconName:null,rest:[]}},prefix:u,iconName:m,extra:s,watchable:!0})),c=hs.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(c,e.firstChild):e.appendChild(c),c.outerHTML=o.map((e=>xc(e))).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function od(e){return Promise.all([id(e,"::before"),id(e,"::after")])}function ad(e){return e.parentNode!==document.head&&!~Ks.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Qs)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function sd(e){if(ms)return new Promise(((t,n)=>{const r=fc(e.querySelectorAll("*")).filter(ad).map(od),i=Il("searchPseudoElements");Ul(),Promise.all(r).then((()=>{i(),Ml(),t()})).catch((()=>{i(),Ml(),n()}))}))}var cd={hooks:()=>({mutationObserverCallbacks:e=>(e.pseudoElementsCallback=sd,e)}),provides(e){e.pseudoElements2svg=function(e){const{node:t=hs}=e;dc.searchPseudoElements&&sd(t)}}};let ld=!1;var dd={mixout:()=>({dom:{unwatch(){Ul(),ld=!0}}}),hooks:()=>({bootstrap(){jl(sl("mutationObserverCallbacks",{}))},noAuto(){Fl&&Fl.disconnect()},watch(e){const{observeMutationsRoot:t}=e;ld?Ml():jl(sl("mutationObserverCallbacks",{observeMutationsRoot:t}))}})};const ud=e=>e.toLowerCase().split(" ").reduce(((e,t)=>{const n=t.toLowerCase().split("-"),r=n[0];let i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0});var Ad={mixout:()=>({parse:{transform:e=>ud(e)}}),hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-transform");return n&&(e.transform=ud(n)),e}}),provides(e){e.generateAbstractTransformGrouping=function(e){let{main:t,transform:n,containerWidth:r,iconWidth:i}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),c="rotate(".concat(n.rotate," 0 0)"),l={outer:o,inner:{transform:"".concat(a," ").concat(s," ").concat(c)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:os({},l.outer),children:[{tag:"g",attributes:os({},l.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:os(os({},t.icon.attributes),l.path)}]}]}}}};const hd={x:0,y:0,width:"100%",height:"100%"};function pd(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var fd={hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-mask"),r=n?el(n.split(" ").map((e=>e.trim()))):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=Jc()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}),provides(e){e.generateAbstractMask=function(e){let{children:t,attributes:n,main:r,mask:i,maskId:o,transform:a}=e;const{width:s,icon:c}=r,{width:l,icon:d}=i,u=function(e){let{transform:t,containerWidth:n,iconWidth:r}=e;const i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(32*t.x,", ").concat(32*t.y,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(o," ").concat(a," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:a,containerWidth:l,iconWidth:s}),A={tag:"rect",attributes:os(os({},hd),{},{fill:"white"})},h=c.children?{children:c.children.map(pd)}:{},p={tag:"g",attributes:os({},u.inner),children:[pd(os({tag:c.tag,attributes:os(os({},c.attributes),u.path)},h))]},f={tag:"g",attributes:os({},u.outer),children:[p]},m="mask-".concat(o||pc()),g="clip-".concat(o||pc()),v={tag:"mask",attributes:os(os({},hd),{},{id:m,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[A,f]},y={tag:"defs",children:[{tag:"clipPath",attributes:{id:g},children:(b=d,"g"===b.tag?b.children:[b])},v]};var b;return t.push(y,{tag:"rect",attributes:os({fill:"currentColor","clip-path":"url(#".concat(g,")"),mask:"url(#".concat(m,")")},hd)}),{children:t,attributes:n}}}},md={provides(e){let t=!1;As.matchMedia&&(t=As.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:os(os({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const i=os(os({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:os(os({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||o.children.push({tag:"animate",attributes:os(os({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:os(os({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(o),e.push({tag:"path",attributes:os(os({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:os(os({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:os(os({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:os(os({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}},gd={hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}})};!function(e,t){let{mixoutsTo:n}=t;rl=e,il={},Object.keys(ol).forEach((e=>{-1===al.indexOf(e)&&delete ol[e]})),rl.forEach((e=>{const t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((e=>{"function"===typeof t[e]&&(n[e]=t[e]),"object"===typeof t[e]&&Object.keys(t[e]).forEach((r=>{n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){const t=e.hooks();Object.keys(t).forEach((e=>{il[e]||(il[e]=[]),il[e].push(t[e])}))}e.provides&&e.provides(ol)}))}([_c,Yl,Xl,Jl,Zl,cd,dd,Ad,fd,md,gd],{mixoutsTo:pl});const vd=pl.parse,yd=pl.icon;var bd=n(5173),Ed=n.n(bd);function wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wd(Object(n),!0).forEach((function(t){Cd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sd(e){return Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sd(e)}function Cd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Td(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Id(e){return function(e){if(Array.isArray(e))return Rd(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Rd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rd(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xd(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var Nd=["style"];var Od=!1;try{Od=!0}catch(XB){}function kd(e){return e&&"object"===Sd(e)&&e.prefix&&e.iconName&&e.icon?e:vd.icon?vd.icon(e):null===e?null:e&&"object"===Sd(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function Pd(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Cd({},e,t):{}}var Bd={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Ld=t.forwardRef((function(e,t){var n=_d(_d({},Bd),e),r=n.icon,i=n.mask,o=n.symbol,a=n.className,s=n.title,c=n.titleId,l=n.maskId,d=kd(r),u=Pd("classes",[].concat(Id(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,o=e.bounce,a=e.shake,s=e.flash,c=e.spin,l=e.spinPulse,d=e.spinReverse,u=e.pulse,A=e.fixedWidth,h=e.inverse,p=e.border,f=e.listItem,m=e.flip,g=e.size,v=e.rotation,y=e.pull,b=(Cd(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":o,"fa-shake":a,"fa-flash":s,"fa-spin":c,"fa-spin-reverse":d,"fa-spin-pulse":l,"fa-pulse":u,"fa-fw":A,"fa-inverse":h,"fa-border":p,"fa-li":f,"fa-flip":!0===m,"fa-flip-horizontal":"horizontal"===m||"both"===m,"fa-flip-vertical":"vertical"===m||"both"===m},"fa-".concat(g),"undefined"!==typeof g&&null!==g),Cd(t,"fa-rotate-".concat(v),"undefined"!==typeof v&&null!==v&&0!==v),Cd(t,"fa-pull-".concat(y),"undefined"!==typeof y&&null!==y),Cd(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(b).map((function(e){return b[e]?e:null})).filter((function(e){return e}))}(n)),Id((a||"").split(" ")))),A=Pd("transform","string"===typeof n.transform?vd.transform(n.transform):n.transform),h=Pd("mask",kd(i)),p=yd(d,_d(_d(_d(_d({},u),A),h),{},{symbol:o,title:s,titleId:c,maskId:l}));if(!p)return function(){var e;!Od&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",d),null;var f=p.abstract,m={ref:t};return Object.keys(n).forEach((function(e){Bd.hasOwnProperty(e)||(m[e]=n[e])})),Dd(f[0],m)}));Ld.displayName="FontAwesomeIcon",Ld.propTypes={beat:Ed().bool,border:Ed().bool,beatFade:Ed().bool,bounce:Ed().bool,className:Ed().string,fade:Ed().bool,flash:Ed().bool,mask:Ed().oneOfType([Ed().object,Ed().array,Ed().string]),maskId:Ed().string,fixedWidth:Ed().bool,inverse:Ed().bool,flip:Ed().oneOf([!0,!1,"horizontal","vertical","both"]),icon:Ed().oneOfType([Ed().object,Ed().array,Ed().string]),listItem:Ed().bool,pull:Ed().oneOf(["right","left"]),pulse:Ed().bool,rotation:Ed().oneOf([0,90,180,270]),shake:Ed().bool,size:Ed().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Ed().bool,spinPulse:Ed().bool,spinReverse:Ed().bool,symbol:Ed().oneOfType([Ed().bool,Ed().string]),title:Ed().string,titleId:Ed().string,transform:Ed().oneOfType([Ed().string,Ed().object]),swapOpacity:Ed().bool};var Dd=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),o=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=function(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=xd(t.slice(0,r)),o=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=o:e[i]=o,e}),{})}(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[xd(t)]=r}return e}),{attrs:{}}),a=r.style,s=void 0===a?{}:a,c=Td(r,Nd);return o.attrs.style=_d(_d({},o.attrs.style),s),t.apply(void 0,[n.tag,_d(_d({},o.attrs),c)].concat(Id(i)))}.bind(null,t.createElement);const Ud={prefix:"fas",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM112 256l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},Md=Ud,Fd={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},jd=Fd,Qd={prefix:"fas",iconName:"blog",icon:[512,512,[],"f781","M192 32c0 17.7 14.3 32 32 32c123.7 0 224 100.3 224 224c0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32c70.7 0 128 57.3 128 128c0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192c-17.7 0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5 0 144L0 368c0 79.5 64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144l-16 0 0 96 16 0c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48l0-224z"]},Vd={prefix:"fas",iconName:"lock",icon:[448,512,[128274],"f023","M144 144l0 48 160 0 0-48c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192l0-48C80 64.5 144.5 0 224 0s144 64.5 144 144l0 48 16 0c35.3 0 64 28.7 64 64l0 192c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 256c0-35.3 28.7-64 64-64l16 0z"]},Hd={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"]},zd=Hd,Kd={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192l42.7 0c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0L21.3 320C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7l42.7 0C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3l-213.3 0zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352l117.3 0C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7l-330.7 0c-14.7 0-26.7-11.9-26.7-26.7z"]},Gd={prefix:"fas",iconName:"eye-slash",icon:[640,512,[],"f070","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"]},Wd={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},qd={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},Yd={prefix:"fas",iconName:"venus",icon:[384,512,[9792],"f221","M80 176a112 112 0 1 1 224 0A112 112 0 1 1 80 176zM224 349.1c81.9-15 144-86.8 144-173.1C368 78.8 289.2 0 192 0S16 78.8 16 176c0 86.3 62.1 158.1 144 173.1l0 34.9-32 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l32 0 0 32c0 17.7 14.3 32 32 32s32-14.3 32-32l0-32 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-32 0 0-34.9z"]},Xd={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},Jd=Xd,Zd={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},$d={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},eu={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm0 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 224c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},tu=eu,nu={prefix:"fas",iconName:"phone",icon:[512,512,[128222,128379],"f095","M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"]},ru={prefix:"fas",iconName:"user-gear",icon:[640,512,["user-cog"],"f4fe","M224 0a128 128 0 1 1 0 256A128 128 0 1 1 224 0zM178.3 304l91.4 0c11.8 0 23.4 1.2 34.5 3.3c-2.1 18.5 7.4 35.6 21.8 44.8c-16.6 10.6-26.7 31.6-20 53.3c4 12.9 9.4 25.5 16.4 37.6s15.2 23.1 24.4 33c15.7 16.9 39.6 18.4 57.2 8.7l0 .9c0 9.2 2.7 18.5 7.9 26.3L29.7 512C13.3 512 0 498.7 0 482.3C0 383.8 79.8 304 178.3 304zM436 218.2c0-7 4.5-13.3 11.3-14.8c10.5-2.4 21.5-3.7 32.7-3.7s22.2 1.3 32.7 3.7c6.8 1.5 11.3 7.8 11.3 14.8l0 30.6c7.9 3.4 15.4 7.7 22.3 12.8l24.9-14.3c6.1-3.5 13.7-2.7 18.5 2.4c7.6 8.1 14.3 17.2 20.1 27.2s10.3 20.4 13.5 31c2.1 6.7-1.1 13.7-7.2 17.2l-25 14.4c.4 4 .7 8.1 .7 12.3s-.2 8.2-.7 12.3l25 14.4c6.1 3.5 9.2 10.5 7.2 17.2c-3.3 10.6-7.8 21-13.5 31s-12.5 19.1-20.1 27.2c-4.8 5.1-12.5 5.9-18.5 2.4l-24.9-14.3c-6.9 5.1-14.3 9.4-22.3 12.8l0 30.6c0 7-4.5 13.3-11.3 14.8c-10.5 2.4-21.5 3.7-32.7 3.7s-22.2-1.3-32.7-3.7c-6.8-1.5-11.3-7.8-11.3-14.8l0-30.5c-8-3.4-15.6-7.7-22.5-12.9l-24.7 14.3c-6.1 3.5-13.7 2.7-18.5-2.4c-7.6-8.1-14.3-17.2-20.1-27.2s-10.3-20.4-13.5-31c-2.1-6.7 1.1-13.7 7.2-17.2l24.8-14.3c-.4-4.1-.7-8.2-.7-12.4s.2-8.3 .7-12.4L343.8 325c-6.1-3.5-9.2-10.5-7.2-17.2c3.3-10.6 7.7-21 13.5-31s12.5-19.1 20.1-27.2c4.8-5.1 12.4-5.9 18.5-2.4l24.8 14.3c6.9-5.1 14.5-9.4 22.5-12.9l0-30.5zm92.1 133.5a48.1 48.1 0 1 0 -96.1 0 48.1 48.1 0 1 0 96.1 0z"]},iu=ru,ou={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"]},au={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},su={prefix:"fas",iconName:"envelope",icon:[512,512,[128386,9993,61443],"f0e0","M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"]},cu={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},lu=cu,du={prefix:"fas",iconName:"camera",icon:[512,512,[62258,"camera-alt"],"f030","M149.1 64.8L138.7 96 64 96C28.7 96 0 124.7 0 160L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64l-74.7 0L362.9 64.8C356.4 45.2 338.1 32 317.4 32L194.6 32c-20.7 0-39 13.2-45.5 32.8zM256 192a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"]},uu={prefix:"fas",iconName:"calendar-check",icon:[448,512,[],"f274","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zM329 305c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-95 95-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L329 305z"]},Au={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},hu={prefix:"fas",iconName:"medal",icon:[512,512,[127941],"f5a2","M4.1 38.2C1.4 34.2 0 29.4 0 24.6C0 11 11 0 24.6 0L133.9 0c11.2 0 21.7 5.9 27.4 15.5l68.5 114.1c-48.2 6.1-91.3 28.6-123.4 61.9L4.1 38.2zm503.7 0L405.6 191.5c-32.1-33.3-75.2-55.8-123.4-61.9L350.7 15.5C356.5 5.9 366.9 0 378.1 0L487.4 0C501 0 512 11 512 24.6c0 4.8-1.4 9.6-4.1 13.6zM80 336a176 176 0 1 1 352 0A176 176 0 1 1 80 336zm184.4-94.9c-3.4-7-13.3-7-16.8 0l-22.4 45.4c-1.4 2.8-4 4.7-7 5.1L168 298.9c-7.7 1.1-10.7 10.5-5.2 16l36.3 35.4c2.2 2.2 3.2 5.2 2.7 8.3l-8.6 49.9c-1.3 7.6 6.7 13.5 13.6 9.9l44.8-23.6c2.7-1.4 6-1.4 8.7 0l44.8 23.6c6.9 3.6 14.9-2.2 13.6-9.9l-8.6-49.9c-.5-3 .5-6.1 2.7-8.3l36.3-35.4c5.6-5.4 2.5-14.8-5.2-16l-50.1-7.3c-3-.4-5.7-2.4-7-5.1l-22.4-45.4z"]},pu={prefix:"fas",iconName:"location-dot",icon:[384,512,["map-marker-alt"],"f3c5","M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},fu=pu,mu={prefix:"fas",iconName:"gauge-high",icon:[512,512,[62461,"tachometer-alt","tachometer-alt-fast"],"f625","M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM256 416c35.3 0 64-28.7 64-64c0-17.4-6.9-33.1-18.1-44.6L366 161.7c5.3-12.1-.2-26.3-12.3-31.6s-26.3 .2-31.6 12.3L257.9 288c-.6 0-1.3 0-1.9 0c-35.3 0-64 28.7-64 64s28.7 64 64 64zM176 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM96 288a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm352-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},gu=mu,vu={prefix:"fas",iconName:"chevron-down",icon:[512,512,[],"f078","M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]},yu={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},bu={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},Eu=bu,wu={prefix:"fas",iconName:"chalkboard-user",icon:[640,512,["chalkboard-teacher"],"f51c","M160 64c0-35.3 28.7-64 64-64L576 0c35.3 0 64 28.7 64 64l0 288c0 35.3-28.7 64-64 64l-239.2 0c-11.8-25.5-29.9-47.5-52.4-64l99.6 0 0-32c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 32 64 0 0-288L224 64l0 49.1C205.2 102.2 183.3 96 160 96l0-32zm0 64a96 96 0 1 1 0 192 96 96 0 1 1 0-192zM133.3 352l53.3 0C260.3 352 320 411.7 320 485.3c0 14.7-11.9 26.7-26.7 26.7L26.7 512C11.9 512 0 500.1 0 485.3C0 411.7 59.7 352 133.3 352z"]},_u=wu,Su={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},Cu={prefix:"fas",iconName:"calendar",icon:[448,512,[128197,128198],"f133","M96 32l0 32L48 64C21.5 64 0 85.5 0 112l0 48 448 0 0-48c0-26.5-21.5-48-48-48l-48 0 0-32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 32L160 64l0-32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192L0 192 0 464c0 26.5 21.5 48 48 48l352 0c26.5 0 48-21.5 48-48l0-272z"]},Tu={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},Iu={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},Ru={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},xu=Ru,Nu={prefix:"fas",iconName:"calendar-day",icon:[448,512,[],"f783","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm80 64c-8.8 0-16 7.2-16 16l0 96c0 8.8 7.2 16 16 16l96 0c8.8 0 16-7.2 16-16l0-96c0-8.8-7.2-16-16-16l-96 0z"]},Ou={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},ku=Ou,Pu={prefix:"fas",iconName:"note-sticky",icon:[448,512,[62026,"sticky-note"],"f249","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l224 0 0-112c0-26.5 21.5-48 48-48l112 0 0-224c0-35.3-28.7-64-64-64L64 32zM448 352l-45.3 0L336 352c-8.8 0-16 7.2-16 16l0 66.7 0 45.3 32-32 64-64 32-32z"]},Bu=Pu,Lu={prefix:"fas",iconName:"video",icon:[576,512,["video-camera"],"f03d","M0 128C0 92.7 28.7 64 64 64l256 0c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 448c-35.3 0-64-28.7-64-64L0 128zM559.1 99.8c10.4 5.6 16.9 16.4 16.9 28.2l0 256c0 11.8-6.5 22.6-16.9 28.2s-23 5-32.9-1.6l-96-64L416 337.1l0-17.1 0-128 0-17.1 14.2-9.5 96-64c9.8-6.5 22.4-7.2 32.9-1.6z"]},Du={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]};function Uu(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Uu(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const Mu=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Uu(e))&&(r&&(r+=" "),r+=t);return r};function Fu(){return Fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fu.apply(null,arguments)}var ju=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Qu=Ln((function(e){return ju.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),Vu=function(e){return"theme"!==e},Hu=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Qu:Vu},zu=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},Ku=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return kn(t,n,r),Wn((function(){return Pn(t,n,r)})),null},Gu=function e(n,r){var i,o,a=n.__emotion_real===n,s=a&&n.__emotion_base||n;void 0!==r&&(i=r.label,o=r.target);var c=zu(n,r,a),l=c||Hu(s),d=!l("as");return function(){var u=arguments,A=a&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&A.push("label:"+i+";"),null==u[0]||void 0===u[0].raw)A.push.apply(A,u);else{var h=u[0];A.push(h[0]);for(var p=u.length,f=1;f<p;f++)A.push(u[f],h[f])}var m=Xn((function(e,n,r){var i=d&&e.as||s,a="",u=[],h=e;if(null==e.theme){for(var p in h={},e)h[p]=e[p];h.theme=t.useContext(Jn)}"string"===typeof e.className?a=On(n.registered,u,e.className):null!=e.className&&(a=e.className+" ");var f=Kn(A.concat(u),n.registered,h);a+=n.key+"-"+f.name,void 0!==o&&(a+=" "+o);var m=d&&void 0===c?Hu(i):l,g={};for(var v in e)d&&"as"===v||m(v)&&(g[v]=e[v]);return g.className=a,r&&(g.ref=r),t.createElement(t.Fragment,null,t.createElement(Ku,{cache:n,serialized:f,isStringTag:"string"===typeof i}),t.createElement(i,g))}));return m.displayName=void 0!==i?i:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",m.defaultProps=n.defaultProps,m.__emotion_real=m,m.__emotion_base=s,m.__emotion_styles=A,m.__emotion_forwardProp=c,Object.defineProperty(m,"toString",{value:function(){return"."+o}}),m.withComponent=function(t,n){return e(t,Fu({},r,n,{shouldForwardProp:zu(m,n,!0)})).apply(void 0,A)},m}}.bind(null);function Wu(e,t){return Gu(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Gu[e]=Gu(e)}));const qu=[];function Yu(e){return qu[0]=e,Kn(qu)}const Xu=["className","component"];const Ju=e=>e,Zu=(()=>{let e=Ju;return{configure(t){e=t},generate:t=>e(t),reset(){e=Ju}}})(),$u={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function eA(e,t){const n=$u[t];return n?"".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui","-").concat(n):"".concat(Zu.generate(e),"-").concat(t)}function tA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=eA(e,t,n)})),r}const nA=tA("MuiBox",["root"]),rA=ha(),iA=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:n,defaultTheme:r,defaultClassName:i="MuiBox-root",generateClassName:o}=e,s=Wu("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(Ci);return t.forwardRef((function(e,t){const c=Sa(r),d=wa(e),{className:u,component:A="div"}=d,h=a(d,Xu);return(0,Tt.jsx)(s,l({as:A,ref:t,className:Mu(u,o?o(i):i),theme:n&&c[n]||c},h))}))}({themeId:fr,defaultTheme:rA,defaultClassName:nA.root,generateClassName:Zu.generate}),oA=iA;function aA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};for(const i in e){const o=e[i];let a="",s=!0;for(let e=0;e<o.length;e+=1){const r=o[e];r&&(a+=(!0===s?"":" ")+t(r),s=!1,n&&n[r]&&(a+=" "+n[r]))}r[i]=a}return r}let sA=0;const cA=l({},r).useId;function lA(e){if(void 0!==cA){const t=cA();return null!==e&&void 0!==e?e:t}return function(e){const[n,r]=t.useState(e),i=e||n;return t.useEffect((()=>{null==n&&(sA+=1,r("mui-".concat(sA)))}),[n]),i}(e)}const dA=lA;const uA=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},AA=e=>uA(e)&&"classes"!==e,hA=["variants"];function pA(e){const{variants:t}=e,n=a(e,hA),r={variants:t,style:Yu(n),isProcessed:!0};return r.style===n||t&&t.forEach((e=>{"function"!==typeof e.style&&(e.style=Yu(e.style))})),r}const fA=["variants"],mA=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],gA=Oo();function vA(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function yA(e){return e?(t,n)=>n[e]:null}function bA(e,t){const n="function"===typeof t?t(e):t;if(Array.isArray(n))return n.flatMap((t=>bA(e,t)));if(Array.isArray(null===n||void 0===n?void 0:n.variants)){let t;if(n.isProcessed)t=n.style;else{const{variants:e}=n;t=a(n,fA)}return EA(e,n.variants,[t])}return null!==n&&void 0!==n&&n.isProcessed?n.style:n}function EA(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e:for(let o=0;o<t.length;o+=1){const a=t[o];if("function"===typeof a.props){if(null!==n&&void 0!==n||(n=l(l(l({},e),e.ownerState),{},{ownerState:e.ownerState})),!a.props(n))continue}else for(const t in a.props){var i;if(e[t]!==a.props[t]&&(null===(i=e.ownerState)||void 0===i?void 0:i[t])!==a.props[t])continue e}"function"===typeof a.style?(null!==n&&void 0!==n||(n=l(l(l({},e),e.ownerState),{},{ownerState:e.ownerState})),r.push(a.style(n))):r.push(a.style)}return r}function wA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=gA,rootShouldForwardProp:r=vA,slotShouldForwardProp:i=vA}=e;function o(e){!function(e,t,n){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?n:e.theme[t]||e.theme}(e,t,n)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(e=>e.filter((e=>e!==Ci))));const{name:n,slot:s,skipVariantsResolver:c,skipSx:d,overridesResolver:u=yA(SA(s))}=t,A=a(t,mA),h=void 0!==c?c:s&&"Root"!==s&&"root"!==s||!1,p=d||!1;let f=vA;"Root"===s||"root"===s?f=r:s?f=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(f=void 0);const m=Wu(e,l({shouldForwardProp:f,label:_A(n,s)},A)),g=e=>{if(e.__emotion_real===e)return e;if("function"===typeof e)return function(t){return bA(t,e)};if(Er(e)){const t=pA(e);return t.variants?function(e){return bA(e,t)}:t.style}return e},v=function(){const t=[];for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];const s=i.map(g),c=[];if(t.push(o),n&&u&&c.push((function(e){var t;const r=null===(t=e.theme.components)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.styleOverrides;if(!r)return null;const i={};for(const n in r)i[n]=bA(e,r[n]);return u(e,i)})),n&&!h&&c.push((function(e){var t;const r=e.theme,i=null===r||void 0===r||null===(t=r.components)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.variants;return i?EA(e,i):null})),p||c.push(Ci),Array.isArray(s[0])){const e=s.shift(),n=new Array(t.length).fill(""),r=new Array(c.length).fill("");let i;i=[...n,...e,...r],i.raw=[...n,...e.raw,...r],t.unshift(i)}const l=[...t,...s,...c],d=m(...l);return e.muiName&&(d.muiName=e.muiName),d};return m.withConfig&&(v.withConfig=m.withConfig),v}}function _A(e,t){}function SA(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const CA=wA({themeId:fr,defaultTheme:Ta,rootShouldForwardProp:AA}),TA={theme:void 0};const IA=function(e){let t,n;return function(r){let i=t;return void 0!==i&&r.theme===n||(TA.theme=r.theme,i=pA(e(TA)),t=i,n=r.theme),i}};function RA(e){try{return e.matches(":focus-visible")}catch(t){0}return!1}function xA(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=t.useRef(void 0),o=t.useCallback((e=>{const t=n.map((t=>{if(null==t)return null;if("function"===typeof t){const n=t,r=n(e);return"function"===typeof r?r:()=>{n(null)}}return t.current=e,()=>{t.current=null}}));return()=>{t.forEach((e=>null===e||void 0===e?void 0:e()))}}),n);return t.useMemo((()=>n.every((e=>null==e))?null:e=>{i.current&&(i.current(),i.current=void 0),null!=e&&(i.current=o(e))}),n)}const NA=xA;const OA=function(e){const n=t.useRef(e);return Oi((()=>{n.current=e})),t.useRef((function(){return(0,n.current)(...arguments)})).current},kA=OA,PA={};function BA(e,n){const r=t.useRef(PA);return r.current===PA&&(r.current=e(n)),r}class LA{static create(){return new LA}static use(){const e=BA(LA.create).current,[n,r]=t.useState(!1);return e.shouldMount=n,e.setShouldMount=r,t.useEffect(e.mountEffect,[n]),e}constructor(){(0,s.A)(this,"mountEffect",(()=>{this.shouldMount&&!this.didMount&&null!==this.ref.current&&(this.didMount=!0,this.mounted.resolve())})),this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=function(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n}(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.start(...t)}))}stop(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.stop(...t)}))}pulsate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.pulsate(...t)}))}}function DA(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function UA(e,t){return UA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},UA(e,t)}function MA(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,UA(e,t)}const FA=t.createContext(null);function jA(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function QA(e,t,n){return null!=n[t]?n[t]:e.props[t]}function VA(e,n,r){var i=jA(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var c in t){if(i[c])for(r=0;r<i[c].length;r++){var l=i[c][r];s[i[c][r]]=n(l)}s[c]=n(c)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,t.isValidElement)(s)){var c=a in n,l=a in i,d=n[a],u=(0,t.isValidElement)(d)&&!d.props.in;!l||c&&!u?l||!c||u?l&&c&&(0,t.isValidElement)(d)&&(o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:d.props.in,exit:QA(s,"exit",e),enter:QA(s,"enter",e)})):o[a]=(0,t.cloneElement)(s,{in:!1}):o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:QA(s,"exit",e),enter:QA(s,"enter",e)})}})),o}var HA=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},zA=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}MA(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=e,i=a,jA(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:QA(e,"appear",r),enter:QA(e,"enter",r),exit:QA(e,"exit",r)})}))):VA(e,o,a),firstRender:!1}},r.handleExited=function(e,t){var n=jA(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Fu({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=o(e,["component","childFactory"]),a=this.state.contextValue,s=HA(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(FA.Provider,{value:a},s):t.createElement(FA.Provider,{value:a},t.createElement(n,i,s))},n}(t.Component);zA.propTypes={},zA.defaultProps={component:"div",childFactory:function(e){return e}};const KA=zA,GA=[];class WA{constructor(){(0,s.A)(this,"currentId",null),(0,s.A)(this,"clear",(()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)})),(0,s.A)(this,"disposeEffect",(()=>this.clear))}static create(){return new WA}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function qA(){const e=BA(WA.create).current;var n;return n=e.disposeEffect,t.useEffect(n,GA),e}const YA=function(e){const{className:n,classes:r,pulsate:i=!1,rippleX:o,rippleY:a,rippleSize:s,in:c,onExited:l,timeout:d}=e,[u,A]=t.useState(!1),h=Mu(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),p={width:s,height:s,top:-s/2+a,left:-s/2+o},f=Mu(r.child,u&&r.childLeaving,i&&r.childPulsate);return c||u||A(!0),t.useEffect((()=>{if(!c&&null!=l){const e=setTimeout(l,d);return()=>{clearTimeout(e)}}}),[l,c,d]),(0,Tt.jsx)("span",{className:h,style:p,children:(0,Tt.jsx)("span",{className:f})})};const XA=tA("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),JA=["center","classes","className"];var ZA,$A,eh,th;const nh=xi(ZA||(ZA=DA(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"]))),rh=xi($A||($A=DA(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"]))),ih=xi(eh||(eh=DA(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"]))),oh=CA("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ah=CA(YA,{name:"MuiTouchRipple",slot:"Ripple"})(th||(th=DA(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"])),XA.rippleVisible,nh,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),XA.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),XA.child,XA.childLeaving,rh,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),XA.childPulsate,ih,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),sh=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s}=r,c=a(r,JA),[d,u]=t.useState([]),A=t.useRef(0),h=t.useRef(null);t.useEffect((()=>{h.current&&(h.current(),h.current=null)}),[d]);const p=t.useRef(!1),f=qA(),m=t.useRef(null),g=t.useRef(null),v=t.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:a}=e;u((e=>[...e,(0,Tt.jsx)(ah,{classes:{ripple:Mu(o.ripple,XA.ripple),rippleVisible:Mu(o.rippleVisible,XA.rippleVisible),ripplePulsate:Mu(o.ripplePulsate,XA.ripplePulsate),child:Mu(o.child,XA.child),childLeaving:Mu(o.childLeaving,XA.childLeaving),childPulsate:Mu(o.childPulsate,XA.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},A.current)])),A.current+=1,h.current=a}),[o]),y=t.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=i||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===(null===e||void 0===e?void 0:e.type)&&p.current)return void(p.current=!1);"touchstart"===(null===e||void 0===e?void 0:e.type)&&(p.current=!0);const s=a?null:g.current,c=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let l,d,u;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(c.width/2),d=Math.round(c.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;l=Math.round(t-c.left),d=Math.round(n-c.top)}if(o)u=Math.sqrt((2*c.width**2+c.height**2)/3),u%2===0&&(u+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-l),l)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-d),d)+2;u=Math.sqrt(e**2+t**2)}null!==e&&void 0!==e&&e.touches?null===m.current&&(m.current=()=>{v({pulsate:r,rippleX:l,rippleY:d,rippleSize:u,cb:n})},f.start(80,(()=>{m.current&&(m.current(),m.current=null)}))):v({pulsate:r,rippleX:l,rippleY:d,rippleSize:u,cb:n})}),[i,v,f]),b=t.useCallback((()=>{y({},{pulsate:!0})}),[y]),E=t.useCallback(((e,t)=>{if(f.clear(),"touchend"===(null===e||void 0===e?void 0:e.type)&&m.current)return m.current(),m.current=null,void f.start(0,(()=>{E(e,t)}));m.current=null,u((e=>e.length>0?e.slice(1):e)),h.current=t}),[f]);return t.useImperativeHandle(n,(()=>({pulsate:b,start:y,stop:E})),[b,y,E]),(0,Tt.jsx)(oh,l(l({className:Mu(XA.root,o.root,s),ref:g},c),{},{children:(0,Tt.jsx)(KA,{component:null,exit:!0,children:d})}))})),ch=sh;function lh(e){return eA("MuiButtonBase",e)}const dh=tA("MuiButtonBase",["root","disabled","focusVisible"]),uh=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Ah=CA("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(dh.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),hh=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:c,component:d="button",disabled:u=!1,disableRipple:A=!1,disableTouchRipple:h=!1,focusRipple:p=!1,focusVisibleClassName:f,LinkComponent:m="a",onBlur:g,onClick:v,onContextMenu:y,onDragLeave:b,onFocus:E,onFocusVisible:w,onKeyDown:_,onKeyUp:S,onMouseDown:C,onMouseLeave:T,onMouseUp:I,onTouchEnd:R,onTouchMove:x,onTouchStart:N,tabIndex:O=0,TouchRippleProps:k,touchRippleRef:P,type:B}=r,L=a(r,uh),D=t.useRef(null),U=LA.use(),M=NA(U.ref,P),[F,j]=t.useState(!1);u&&F&&j(!1),t.useImperativeHandle(i,(()=>({focusVisible:()=>{j(!0),D.current.focus()}})),[]);const Q=U.shouldMount&&!A&&!u;t.useEffect((()=>{F&&p&&!A&&U.pulsate()}),[A,p,F,U]);const V=ph(U,"start",C,h),H=ph(U,"stop",y,h),z=ph(U,"stop",b,h),K=ph(U,"stop",I,h),G=ph(U,"stop",(e=>{F&&e.preventDefault(),T&&T(e)}),h),W=ph(U,"start",N,h),q=ph(U,"stop",R,h),Y=ph(U,"stop",x,h),X=ph(U,"stop",(e=>{RA(e.target)||j(!1),g&&g(e)}),!1),J=kA((e=>{D.current||(D.current=e.currentTarget),RA(e.target)&&(j(!0),w&&w(e)),E&&E(e)})),Z=()=>{const e=D.current;return d&&"button"!==d&&!("A"===e.tagName&&e.href)},$=kA((e=>{p&&!e.repeat&&F&&" "===e.key&&U.stop(e,(()=>{U.start(e)})),e.target===e.currentTarget&&Z()&&" "===e.key&&e.preventDefault(),_&&_(e),e.target===e.currentTarget&&Z()&&"Enter"===e.key&&!u&&(e.preventDefault(),v&&v(e))})),ee=kA((e=>{p&&" "===e.key&&F&&!e.defaultPrevented&&U.stop(e,(()=>{U.pulsate(e)})),S&&S(e),v&&e.target===e.currentTarget&&Z()&&" "===e.key&&!e.defaultPrevented&&v(e)}));let te=d;"button"===te&&(L.href||L.to)&&(te=m);const ne={};"button"===te?(ne.type=void 0===B?"button":B,ne.disabled=u):(L.href||L.to||(ne.role="button"),u&&(ne["aria-disabled"]=u));const re=NA(n,D),ie=l(l({},r),{},{centerRipple:o,component:d,disabled:u,disableRipple:A,disableTouchRipple:h,focusRipple:p,tabIndex:O,focusVisible:F}),oe=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o=aA({root:["root",t&&"disabled",n&&"focusVisible"]},lh,i);return n&&r&&(o.root+=" ".concat(r)),o})(ie);return(0,Tt.jsxs)(Ah,l(l(l({as:te,className:Mu(oe.root,c),ownerState:ie,onBlur:X,onClick:v,onContextMenu:H,onFocus:J,onKeyDown:$,onKeyUp:ee,onMouseDown:V,onMouseLeave:G,onMouseUp:K,onDragLeave:z,onTouchEnd:q,onTouchMove:Y,onTouchStart:W,ref:re,tabIndex:u?-1:O,type:B},ne),L),{},{children:[s,Q?(0,Tt.jsx)(ch,l({ref:M,center:o},k)):null]}))}));function ph(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return kA((i=>(n&&n(i),r||e[t](i),!0)))}const fh=hh,mh=yr;function gh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,n]=t;return n&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||"string"!==typeof e[n])return!1;return!0}(n,e)}}function vh(e){return eA("MuiCircularProgress",e)}tA("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const yh=["className","color","disableShrink","size","style","thickness","value","variant"];var bh,Eh,wh,_h;const Sh=44,Ch=xi(bh||(bh=DA(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),Th=xi(Eh||(Eh=DA(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: -126px;\n  }\n"]))),Ih="string"!==typeof Ch?Ri(wh||(wh=DA(["\n        animation: "," 1.4s linear infinite;\n      "])),Ch):null,Rh="string"!==typeof Th?Ri(_h||(_h=DA(["\n        animation: "," 1.4s ease-in-out infinite;\n      "])),Th):null,xh=CA("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["color".concat(mh(n.color))]]}})(IA((e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Ih||{animation:"".concat(Ch," 1.4s linear infinite")}},...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}}))]}}))),Nh=CA("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Oh=CA("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t["circle".concat(mh(n.variant))],n.disableShrink&&t.circleDisableShrink]}})(IA((e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:Rh||{animation:"".concat(Th," 1.4s ease-in-out infinite")}}]}}))),kh=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,size:s=40,style:c,thickness:d=3.6,value:u=0,variant:A="indeterminate"}=n,h=a(n,yh),p=l(l({},n),{},{color:i,disableShrink:o,size:s,thickness:d,value:u,variant:A}),f=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e;return aA({root:["root",n,"color".concat(mh(r))],svg:["svg"],circle:["circle","circle".concat(mh(n)),i&&"circleDisableShrink"]},vh,t)})(p),m={},g={},v={};if("determinate"===A){const e=2*Math.PI*((Sh-d)/2);m.strokeDasharray=e.toFixed(3),v["aria-valuenow"]=Math.round(u),m.strokeDashoffset="".concat(((100-u)/100*e).toFixed(3),"px"),g.transform="rotate(-90deg)"}return(0,Tt.jsx)(xh,l(l(l({className:Mu(f.root,r),style:l(l({width:s,height:s},g),c),ownerState:p,ref:t,role:"progressbar"},v),h),{},{children:(0,Tt.jsx)(Nh,{className:f.svg,ownerState:p,viewBox:"".concat(22," ").concat(22," ").concat(Sh," ").concat(Sh),children:(0,Tt.jsx)(Oh,{className:f.circle,style:m,ownerState:p,cx:Sh,cy:Sh,r:(Sh-d)/2,fill:"none",strokeWidth:d})})}))})),Ph=kh;function Bh(e){return eA("MuiButton",e)}const Lh=tA("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]);const Dh=t.createContext({});const Uh=t.createContext(void 0),Mh=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","id","loading","loadingIndicator","loadingPosition","size","startIcon","type","variant"],Fh=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],jh=CA(fh,{shouldForwardProp:e=>AA(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat(mh(n.color))],t["size".concat(mh(n.size))],t["".concat(n.variant,"Size").concat(mh(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(IA((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],r="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return l(l({},t.typography.button),{},{minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},["&.".concat(Lh.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},["&.".concat(Lh.focusVisible)]:{boxShadow:(t.vars||t).shadows[6]},["&.".concat(Lh.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",["&.".concat(Lh.disabled)]:{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n},style:{"--variant-textColor":(t.vars||t).palette[n].main,"--variant-outlinedColor":(t.vars||t).palette[n].main,"--variant-outlinedBorder":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / 0.5)"):qi(t.palette[n].main,.5),"--variant-containedColor":(t.vars||t).palette[n].contrastText,"--variant-containedBg":(t.vars||t).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[n].dark,"--variant-textBg":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi(t.palette[n].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[n].main,"--variant-outlinedBg":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi(t.palette[n].main,t.palette.action.hoverOpacity)}}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(Lh.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(Lh.disabled)]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),["&.".concat(Lh.loading)]:{color:"transparent"}}}]})}))),Qh=CA("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t["iconSize".concat(mh(n.size))]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...Fh]}})),Vh=CA("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t["iconSize".concat(mh(n.size))]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...Fh]}})),Hh=CA("span",{name:"MuiButton",slot:"LoadingIndicator"})((e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]}})),zh=CA("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Kh=t.forwardRef((function(e,n){const r=t.useContext(Dh),i=t.useContext(Uh),o=xa({props:cr(r,e),name:"MuiButton"}),{children:s,color:c="primary",component:d="button",className:u,disabled:A=!1,disableElevation:h=!1,disableFocusRipple:p=!1,endIcon:f,focusVisibleClassName:m,fullWidth:g=!1,id:v,loading:y=null,loadingIndicator:b,loadingPosition:E="center",size:w="medium",startIcon:_,type:S,variant:C="text"}=o,T=a(o,Mh),I=dA(v),R=null!==b&&void 0!==b?b:(0,Tt.jsx)(Ph,{"aria-labelledby":I,color:"inherit",size:16}),x=l(l({},o),{},{color:c,component:d,disabled:A,disableElevation:h,disableFocusRipple:p,fullWidth:g,loading:y,loadingIndicator:R,loadingPosition:E,size:w,type:S,variant:C}),N=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,loading:a,loadingPosition:s,classes:c}=e,d=aA({root:["root",a&&"loading",o,"".concat(o).concat(mh(t)),"size".concat(mh(i)),"".concat(o,"Size").concat(mh(i)),"color".concat(mh(t)),n&&"disableElevation",r&&"fullWidth",a&&"loadingPosition".concat(mh(s))],startIcon:["icon","startIcon","iconSize".concat(mh(i))],endIcon:["icon","endIcon","iconSize".concat(mh(i))],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},Bh,c);return l(l({},c),d)})(x),O=(_||y&&"start"===E)&&(0,Tt.jsx)(Qh,{className:N.startIcon,ownerState:x,children:_||(0,Tt.jsx)(zh,{className:N.loadingIconPlaceholder,ownerState:x})}),k=(f||y&&"end"===E)&&(0,Tt.jsx)(Vh,{className:N.endIcon,ownerState:x,children:f||(0,Tt.jsx)(zh,{className:N.loadingIconPlaceholder,ownerState:x})}),P=i||"",B="boolean"===typeof y?(0,Tt.jsx)("span",{className:N.loadingWrapper,style:{display:"contents"},children:y&&(0,Tt.jsx)(Hh,{className:N.loadingIndicator,ownerState:x,children:R})}):null;return(0,Tt.jsxs)(jh,l(l({ownerState:x,className:Mu(r.className,N.root,u,P),component:d,disabled:A||y,focusRipple:!p,focusVisibleClassName:Mu(N.focusVisible,m),ref:n,type:S,id:y?I:v},T),{},{classes:N,children:[O,"end"!==E&&B,s,"end"===E&&B,k]}))})),Gh=Kh;function Wh(e){return eA("MuiSvgIcon",e)}tA("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const qh=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Yh=CA("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(mh(n.color))],t["fontSize".concat(mh(n.fontSize))]]}})(IA((e=>{var t,n,r,i,o,a,s,c,l,d,u,A,h,p,f;let{theme:m}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:null===(t=m.transitions)||void 0===t||null===(n=t.create)||void 0===n?void 0:n.call(t,"fill",{duration:null===(r=(null!==(i=m.vars)&&void 0!==i?i:m).transitions)||void 0===r||null===(r=r.duration)||void 0===r?void 0:r.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:(null===(o=m.typography)||void 0===o||null===(a=o.pxToRem)||void 0===a?void 0:a.call(o,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:(null===(s=m.typography)||void 0===s||null===(c=s.pxToRem)||void 0===c?void 0:c.call(s,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:(null===(l=m.typography)||void 0===l||null===(d=l.pxToRem)||void 0===d?void 0:d.call(l,35))||"2.1875rem"}},...Object.entries((null!==(u=m.vars)&&void 0!==u?u:m).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{var t,n;let[r]=e;return{props:{color:r},style:{color:null===(t=(null!==(n=m.vars)&&void 0!==n?n:m).palette)||void 0===t||null===(t=t[r])||void 0===t?void 0:t.main}}})),{props:{color:"action"},style:{color:null===(A=(null!==(h=m.vars)&&void 0!==h?h:m).palette)||void 0===A||null===(A=A.action)||void 0===A?void 0:A.active}},{props:{color:"disabled"},style:{color:null===(p=(null!==(f=m.vars)&&void 0!==f?f:m).palette)||void 0===p||null===(p=p.action)||void 0===p?void 0:p.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),Xh=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:c="svg",fontSize:d="medium",htmlColor:u,inheritViewBox:A=!1,titleAccess:h,viewBox:p="0 0 24 24"}=r,f=a(r,qh),m=t.isValidElement(i)&&"svg"===i.type,g=l(l({},r),{},{color:s,component:c,fontSize:d,instanceFontSize:e.fontSize,inheritViewBox:A,viewBox:p,hasSvgAsChild:m}),v={};A||(v.viewBox=p);const y=(e=>{const{color:t,fontSize:n,classes:r}=e;return aA({root:["root","inherit"!==t&&"color".concat(mh(t)),"fontSize".concat(mh(n))]},Wh,r)})(g);return(0,Tt.jsxs)(Yh,l(l(l(l({as:c,className:Mu(y.root,o),focusable:"false",color:u,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:n},v),f),m&&i.props),{},{ownerState:g,children:[m?i.props.children:i,h?(0,Tt.jsx)("title",{children:h}):null]}))}));Xh.muiName="SvgIcon";const Jh=Xh;function Zh(e,n){function r(t,n){return(0,Tt.jsx)(Jh,l(l({"data-testid":void 0,ref:n},t),{},{children:e}))}return r.muiName=Jh.muiName,t.memo(t.forwardRef(r))}const $h=Zh((0,Tt.jsx)("path",{d:"M12 3 1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9zm6.82 6L12 12.72 5.18 9 12 5.28zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73z"})),ep=Zh((0,Tt.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V10h16zm0-13H4V5h16z"})),tp=Zh((0,Tt.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V5h14zM7 10h2v7H7zm4-3h2v10h-2zm4 6h2v4h-2z"})),np=Zh((0,Tt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m-5.5-2.5 7.51-3.49L17.5 6.5 9.99 9.99zm5.5-6.6c.61 0 1.1.49 1.1 1.1s-.49 1.1-1.1 1.1-1.1-.49-1.1-1.1.49-1.1 1.1-1.1"})),rp=[{id:1,title:"H\xe0nh Tr\xecnh H\u1ed3i Ph\u1ee5c C\u1ee7a T\xf4i: M\u1ed9t C\xe2u Chuy\u1ec7n C\xe1 Nh\xe2n",excerpt:"L\xe0m th\u1ebf n\xe0o m\xe0 s\u1ef1 h\u1ed7 tr\u1ee3 v\xe0 gi\xe1o d\u1ee5c t\u1eeb c\u1ed9ng \u0111\u1ed3ng \u0111\xe3 thay \u0111\u1ed5i cu\u1ed9c s\u1ed1ng c\u1ee7a t\xf4i v\xe0 gi\xfap t\xf4i v\u01b0\u1ee3t qua nghi\u1ec7n ng\u1eadp.",author:"Nguy\u1ec5n V\u0103n B",date:"15/05/2025",image:"https://placehold.co/300x200/e8f5e9/2D7DD2?text=Recovery+Story"},{id:2,title:"Hi\u1ec3u V\u1ec1 C\xe1c Y\u1ebfu T\u1ed1 R\u1ee7i Ro Trong Vi\u1ec7c S\u1eed D\u1ee5ng Ma T\xfay \u1ede Thanh Thi\u1ebfu Ni\xean",excerpt:"T\xecm hi\u1ec3u v\u1ec1 c\xe1c y\u1ebfu t\u1ed1 m\xf4i tr\u01b0\u1eddng v\xe0 c\xe1 nh\xe2n c\xf3 th\u1ec3 d\u1eabn \u0111\u1ebfn l\u1ea1m d\u1ee5ng ch\u1ea5t g\xe2y nghi\u1ec7n \u1edf thanh thi\u1ebfu ni\xean.",author:"TS. Tr\u1ea7n V\u0103n Nam",date:"02/06/2023",image:"https://placehold.co/300x200/e8f5e9/2D7DD2?text=Teen+Education"},{id:3,title:"L\xe0m Th\u1ebf N\xe0o \u0110\u1ec3 C\xe1c Tr\u01b0\u1eddng H\u1ecdc Tri\u1ec3n Khai Ch\u01b0\u01a1ng Tr\xecnh Ph\xf2ng Ng\u1eeba Hi\u1ec7u Qu\u1ea3",excerpt:"H\u01b0\u1edbng d\u1eabn cho c\xe1c nh\xe0 gi\xe1o d\u1ee5c v\u1ec1 vi\u1ec7c t\u1ea1o ra m\xf4i tr\u01b0\u1eddng h\u1ed7 tr\u1ee3 ng\u0103n ch\u1eb7n l\u1ea1m d\u1ee5ng ch\u1ea5t g\xe2y nghi\u1ec7n.",author:"GS. L\xea Th\u1ecb H\u01b0\u01a1ng",date:"28/04/2023",image:"https://placehold.co/300x200/e8f5e9/2D7DD2?text=School+Programs"}],ip=[{id:1,title:"Cho H\u1ecdc Sinh",description:"Gi\xe1o d\u1ee5c ph\xf9 h\u1ee3p v\u1edbi l\u1ee9a tu\u1ed5i v\u1ec1 nh\u1eadn th\u1ee9c ma t\xfay, ch\u1ed1ng l\u1ea1i \xe1p l\u1ef1c \u0111\u1ed3ng trang l\u1ee9a v\xe0 l\u1ef1a ch\u1ecdn l\xe0nh m\u1ea1nh.",icon:Tu,link:"/education?group=students"},{id:2,title:"Cho Ph\u1ee5 Huynh",description:"H\u1ecdc c\xe1ch n\xf3i chuy\u1ec7n v\u1edbi con c\xe1i v\u1ec1 ma t\xfay v\xe0 nh\u1eadn bi\u1ebft c\xe1c d\u1ea5u hi\u1ec7u c\u1ea3nh b\xe1o c\u1ee7a vi\u1ec7c l\u1ea1m d\u1ee5ng ch\u1ea5t g\xe2y nghi\u1ec7n.",icon:Kd,link:"/education?group=parents"},{id:3,title:"Cho Gi\xe1o Vi\xean",description:"T\xe0i nguy\xean v\xe0 chi\u1ebfn l\u01b0\u1ee3c \u0111\u1ec3 gi\xe1o d\u1ee5c h\u1ecdc sinh v\u1ec1 ph\xf2ng ch\u1ed1ng ma t\xfay v\xe0 th\xfac \u0111\u1ea9y m\xf4i tr\u01b0\u1eddng l\xe0nh m\u1ea1nh.",icon:_u,link:"/education?group=teachers"}],op=()=>{const e=(0,t.useRef)(null),n=(0,t.useRef)(null),r=(0,t.useRef)(null),i=(0,t.useRef)(null);return(0,t.useEffect)((()=>{const t=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){e.target.querySelectorAll(".fade-in").forEach((e=>{e.classList.add("visible")})),t.unobserve(e.target)}}))}),{root:null,rootMargin:"0px",threshold:.1});return e.current&&t.observe(e.current),n.current&&t.observe(n.current),r.current&&t.observe(r.current),i.current&&t.observe(i.current),()=>{t.disconnect()}}),[]),(0,Tt.jsxs)("div",{className:"home-page",children:[(0,Tt.jsx)("section",{className:"hero",children:(0,Tt.jsx)("div",{className:"container",children:(0,Tt.jsxs)("div",{className:"hero-content",children:[(0,Tt.jsx)("h1",{children:"Trao Quy\u1ec1n Cho C\u1ed9ng \u0110\u1ed3ng V\xec T\u01b0\u01a1ng Lai Kh\xf4ng Ma T\xfay"}),(0,Tt.jsx)("p",{children:"Ch\xfang t\xf4i cung c\u1ea5p gi\xe1o d\u1ee5c, t\xe0i nguy\xean v\xe0 h\u1ed7 tr\u1ee3 \u0111\u1ec3 gi\xfap c\xe1 nh\xe2n v\xe0 c\u1ed9ng \u0111\u1ed3ng ph\xf2ng ng\u1eeba l\u1ea1m d\u1ee5ng ch\u1ea5t g\xe2y nghi\u1ec7n v\xe0 th\xfac \u0111\u1ea9y cu\u1ed9c s\u1ed1ng kh\u1ecfe m\u1ea1nh h\u01a1n."}),(0,Tt.jsxs)(oA,{className:"hero-buttons",sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[(0,Tt.jsx)(Gh,{component:ft,to:"/education",variant:"contained",size:"medium",startIcon:(0,Tt.jsx)($h,{}),sx:{background:"linear-gradient(45deg, #3f51b5 30%, #5c6bc0 90%)",color:"white",borderRadius:"25px",padding:"8px 24px",fontSize:"0.9rem",fontWeight:600,textTransform:"none",boxShadow:"0 4px 12px rgba(63, 81, 181, 0.3)",transition:"all 0.3s ease-in-out","&:hover":{background:"linear-gradient(45deg, #303f9f 30%, #3f51b5 90%)",transform:"translateY(-2px)",boxShadow:"0 6px 16px rgba(63, 81, 181, 0.4)"}},children:"Kh\xe1m Ph\xe1 Kh\xf3a H\u1ecdc"}),(0,Tt.jsx)(Gh,{component:ft,to:"/counseling",variant:"outlined",size:"medium",startIcon:(0,Tt.jsx)(ep,{}),sx:{color:"white",borderColor:"rgba(255, 255, 255, 0.8)",borderRadius:"25px",padding:"8px 24px",fontSize:"0.9rem",fontWeight:600,textTransform:"none",backdropFilter:"blur(10px)",backgroundColor:"rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease-in-out","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)",borderColor:"white",transform:"translateY(-2px)",boxShadow:"0 6px 16px rgba(255, 255, 255, 0.2)"}},children:"\u0110\u1eb7t L\u1ecbch T\u01b0 V\u1ea5n"})]})]})})}),(0,Tt.jsx)("section",{className:"course-categories",ref:e,children:(0,Tt.jsxs)("div",{className:"container",children:[(0,Tt.jsx)("h2",{className:"section-title fade-in",children:"Ch\u01b0\u01a1ng Tr\xecnh Gi\xe1o D\u1ee5c"}),(0,Tt.jsx)("p",{className:"section-subtitle fade-in",children:"Ch\xfang t\xf4i cung c\u1ea5p c\xe1c ch\u01b0\u01a1ng tr\xecnh ph\xf2ng ch\u1ed1ng ma t\xfay d\xe0nh cho m\u1ecdi \u0111\u1ed1i t\u01b0\u1ee3ng"}),(0,Tt.jsx)("div",{className:"grid",children:ip.map((e=>(0,Tt.jsxs)("div",{className:"category-card card fade-in",children:[(0,Tt.jsx)("div",{className:"category-icon",children:(0,Tt.jsx)(Ld,{icon:e.icon})}),(0,Tt.jsx)("h3",{children:e.title}),(0,Tt.jsx)("p",{children:e.description}),(0,Tt.jsxs)(ft,{to:e.link,className:"category-link",children:["Xem Kh\xf3a H\u1ecdc ",(0,Tt.jsx)(Ld,{icon:Zd})]})]},e.id)))})]})}),(0,Tt.jsx)("section",{className:"blog-section",ref:n,children:(0,Tt.jsxs)("div",{className:"container",children:[(0,Tt.jsx)("h2",{className:"section-title fade-in",children:"C\xe2u Chuy\u1ec7n & Tin T\u1ee9c C\u1ed9ng \u0110\u1ed3ng"}),(0,Tt.jsx)("p",{className:"section-subtitle fade-in",children:"Tr\u1ea3i nghi\u1ec7m th\u1ef1c t\u1ebf v\xe0 c\u1eadp nh\u1eadt m\u1edbi nh\u1ea5t t\u1eeb c\u1ed9ng \u0111\u1ed3ng c\u1ee7a ch\xfang t\xf4i"}),(0,Tt.jsxs)("div",{className:"blog-layout",children:[(0,Tt.jsx)("div",{className:"featured-post fade-in",children:(0,Tt.jsxs)("div",{className:"blog-card",children:[(0,Tt.jsx)("div",{className:"blog-image",children:(0,Tt.jsx)("img",{src:rp[0].image,alt:rp[0].title})}),(0,Tt.jsxs)("div",{className:"blog-content",children:[(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{children:rp[0].title}),(0,Tt.jsx)("p",{className:"blog-excerpt",children:rp[0].excerpt})]}),(0,Tt.jsxs)("div",{className:"blog-footer",children:[(0,Tt.jsxs)("div",{className:"blog-meta",children:[(0,Tt.jsx)("span",{children:rp[0].author}),(0,Tt.jsx)("span",{children:rp[0].date})]}),(0,Tt.jsxs)(ft,{to:"/blog/".concat(rp[0].id),className:"blog-link",children:["\u0110\u1ecdc Th\xeam ",(0,Tt.jsx)(Ld,{icon:Zd})]})]})]})]})}),(0,Tt.jsx)("div",{className:"secondary-posts",children:rp.slice(1,3).map(((e,t)=>(0,Tt.jsxs)("div",{className:"blog-card secondary-card fade-in",children:[(0,Tt.jsxs)("div",{className:"blog-content",children:[(0,Tt.jsx)("div",{children:(0,Tt.jsx)("h3",{children:e.title})}),(0,Tt.jsxs)("div",{className:"blog-footer",children:[(0,Tt.jsxs)("div",{className:"blog-meta",children:[(0,Tt.jsx)("span",{children:e.author}),(0,Tt.jsx)("span",{children:e.date})]}),(0,Tt.jsxs)(ft,{to:"/blog/".concat(e.id),className:"blog-link",children:["\u0110\u1ecdc Th\xeam"," ",(0,Tt.jsx)(Ld,{icon:Zd})]})]})]}),(0,Tt.jsx)("div",{className:"blog-image",children:(0,Tt.jsx)("img",{src:e.image,alt:e.title})})]},e.id)))})]}),(0,Tt.jsx)(oA,{className:"view-all-container fade-in",sx:{textAlign:"center",mt:3},children:(0,Tt.jsx)(Gh,{component:ft,to:"/blog",variant:"outlined",size:"medium",sx:{color:"#3f51b5",borderColor:"#3f51b5",borderRadius:"20px",padding:"8px 24px",fontSize:"0.9rem",fontWeight:600,textTransform:"none",transition:"all 0.3s ease-in-out","&:hover":{backgroundColor:"rgba(63, 81, 181, 0.08)",borderColor:"#303f9f",color:"#303f9f",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(63, 81, 181, 0.2)"}},children:"Xem T\u1ea5t C\u1ea3 B\xe0i Vi\u1ebft"})})]})}),(0,Tt.jsx)("section",{className:"impact-section",ref:r,children:(0,Tt.jsxs)("div",{className:"container",children:[(0,Tt.jsx)("h2",{className:"section-title fade-in",children:"T\xe1c \u0110\u1ed9ng C\u1ee7a Ch\xfang T\xf4i"}),(0,Tt.jsx)("p",{className:"section-subtitle fade-in",children:"T\u1ea1o n\xean s\u1ef1 kh\xe1c bi\u1ec7t trong c\u1ed9ng \u0111\u1ed3ng th\xf4ng qua gi\xe1o d\u1ee5c v\xe0 h\u1ed7 tr\u1ee3"}),(0,Tt.jsxs)("div",{className:"stats-container",children:[(0,Tt.jsxs)("div",{className:"stat-item fade-in",children:[(0,Tt.jsx)("div",{className:"stat-number",children:"5,000+"}),(0,Tt.jsx)("div",{className:"stat-label",children:"H\u1ecdc Sinh \u0110\u01b0\u1ee3c Gi\xe1o D\u1ee5c"})]}),(0,Tt.jsxs)("div",{className:"stat-item fade-in",children:[(0,Tt.jsx)("div",{className:"stat-number",children:"500+"}),(0,Tt.jsx)("div",{className:"stat-label",children:"Bu\u1ed5i T\u01b0 V\u1ea5n"})]}),(0,Tt.jsxs)("div",{className:"stat-item fade-in",children:[(0,Tt.jsx)("div",{className:"stat-number",children:"25+"}),(0,Tt.jsx)("div",{className:"stat-label",children:"Ch\u01b0\u01a1ng Tr\xecnh C\u1ed9ng \u0110\u1ed3ng"})]}),(0,Tt.jsxs)("div",{className:"stat-item fade-in",children:[(0,Tt.jsx)("div",{className:"stat-number",children:"95%"}),(0,Tt.jsx)("div",{className:"stat-label",children:"Ph\u1ea3n H\u1ed3i T\xedch C\u1ef1c"})]})]})]})}),(0,Tt.jsx)("section",{className:"cta-section",ref:i,children:(0,Tt.jsx)("div",{className:"container",children:(0,Tt.jsxs)("div",{className:"cta-card card fade-in",children:[(0,Tt.jsx)("h2",{children:"S\u1eb5n s\xe0ng \u0111\u1ec3 b\u01b0\u1edbc \u0111i b\u01b0\u1edbc \u0111\u1ea7u ti\xean?"}),(0,Tt.jsx)("p",{children:"B\u1eaft \u0111\u1ea7u h\xe0nh tr\xecnh h\u01b0\u1edbng t\u1edbi m\u1ed9t c\u1ed9ng \u0111\u1ed3ng kh\u1ecfe m\u1ea1nh h\u01a1n b\u1eb1ng c\xe1ch th\u1ef1c hi\u1ec7n \u0111\xe1nh gi\xe1 r\u1ee7i ro ho\u1eb7c \u0111\u0103ng k\xfd m\u1ed9t trong c\xe1c kh\xf3a h\u1ecdc gi\xe1o d\u1ee5c c\u1ee7a ch\xfang t\xf4i."}),(0,Tt.jsxs)(oA,{className:"cta-buttons",sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[(0,Tt.jsx)(Gh,{component:ft,to:"/education/surveys/assist",variant:"contained",size:"medium",startIcon:(0,Tt.jsx)(tp,{}),sx:{background:"linear-gradient(45deg, #4caf50 30%, #66bb6a 90%)",color:"white",borderRadius:"25px",padding:"10px 28px",fontSize:"0.95rem",fontWeight:600,textTransform:"none",boxShadow:"0 4px 12px rgba(76, 175, 80, 0.3)",transition:"all 0.3s ease-in-out","&:hover":{background:"linear-gradient(45deg, #388e3c 30%, #4caf50 90%)",transform:"translateY(-2px)",boxShadow:"0 6px 16px rgba(76, 175, 80, 0.4)"}},children:"L\xe0m B\xe0i \u0110\xe1nh Gi\xe1 R\u1ee7i Ro"}),(0,Tt.jsx)(Gh,{component:ft,to:"/education",variant:"outlined",size:"medium",startIcon:(0,Tt.jsx)(np,{}),sx:{color:"#3f51b5",borderColor:"#3f51b5",borderRadius:"25px",padding:"10px 28px",fontSize:"0.95rem",fontWeight:600,textTransform:"none",transition:"all 0.3s ease-in-out","&:hover":{backgroundColor:"rgba(63, 81, 181, 0.08)",borderColor:"#303f9f",color:"#303f9f",transform:"translateY(-2px)",boxShadow:"0 6px 16px rgba(63, 81, 181, 0.2)"}},children:"Duy\u1ec7t Kh\xf3a H\u1ecdc"})]})]})})})]})},ap=()=>{const e=he(),{login:n,register:r,isAdmin:i}=ts(),[o,a]=(0,t.useState)(!0),[s,c]=(0,t.useState)({email:"",password:"",fullname:"",phone:"",gender:"",dateOfBirth:"",address:"",confirmPassword:""}),[d,u]=(0,t.useState)({}),[A,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(!1),[b,E]=(0,t.useState)(!1),w=()=>{y(!v)},_=e=>{const{name:t,value:n}=e.target;let r=n;if("phone"===t){let e=n.replace(/[^\d+]/g,"");e&&!e.startsWith("+84")&&(e.startsWith("0")?e="+84"+e.substring(1):e.startsWith("84")?e="+"+e:/^\d/.test(e)&&(e="+84"+e)),e&&!e.startsWith("+84")&&/\d/.test(e)&&(e="+84"+e.replace(/^\+?84?/,"")),e.length>12&&(e=e.substring(0,12)),r=e}c(l(l({},s),{},{[t]:r})),d[t]&&u(l(l({},d),{},{[t]:""})),A&&h(""),p&&f("")};return(0,Tt.jsx)("div",{className:"login-page",children:(0,Tt.jsxs)("div",{className:"login-container",children:[(0,Tt.jsx)("div",{className:"login-image",children:(0,Tt.jsxs)("div",{className:"image-content",children:[(0,Tt.jsx)("h2",{children:"Ch\xe0o m\u1eebng \u0111\u1ebfn v\u1edbi C\u1ed9ng \u0110\u1ed3ng BrightChoice"}),(0,Tt.jsx)("p",{children:"Tham gia c\u1ed9ng \u0111\u1ed3ng t\xecnh nguy\u1ec7n vi\xean c\u1ee7a ch\xfang t\xf4i v\xe0 t\u1ea1o ra t\xe1c \u0111\u1ed9ng t\xedch c\u1ef1c trong cu\u1ed9c chi\u1ebfn ch\u1ed1ng l\u1ea1i l\u1ea1m d\u1ee5ng ch\u1ea5t g\xe2y nghi\u1ec7n."})]})}),(0,Tt.jsxs)("div",{className:"login-form-container",children:[(0,Tt.jsxs)("div",{className:"form-switcher",children:[(0,Tt.jsx)("button",{className:"switcher-btn ".concat(o?"active":""),onClick:()=>a(!0),children:"\u0110\u0103ng Nh\u1eadp"}),(0,Tt.jsx)("button",{className:"switcher-btn ".concat(o?"":"active"),onClick:()=>a(!1),children:"\u0110\u0103ng K\xfd"})]}),(0,Tt.jsxs)("form",{className:"login-form",onSubmit:async t=>{t.preventDefault();const l=(()=>{const e={};if(s.email?/\S+@\S+\.\S+/.test(s.email)||(e.email="Email kh\xf4ng h\u1ee3p l\u1ec7"):e.email="Email l\xe0 b\u1eaft bu\u1ed9c",s.password?s.password.length<6&&(e.password="M\u1eadt kh\u1ea9u ph\u1ea3i c\xf3 \xedt nh\u1ea5t 6 k\xfd t\u1ef1"):e.password="M\u1eadt kh\u1ea9u l\xe0 b\u1eaft bu\u1ed9c",!o){if(s.fullname||(e.fullname="H\u1ecd t\xean l\xe0 b\u1eaft bu\u1ed9c"),s.phone?/^\+84\d{9}$/.test(s.phone)||(e.phone="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i c\xf3 \u0111\u1ecbnh d\u1ea1ng +84xxxxxxxxx (9 ch\u1eef s\u1ed1 sau +84)"):e.phone="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i l\xe0 b\u1eaft bu\u1ed9c",s.gender||(e.gender="Gi\u1edbi t\xednh l\xe0 b\u1eaft bu\u1ed9c"),s.dateOfBirth){const t=new Date(s.dateOfBirth),n=new Date,r=n.getFullYear()-t.getFullYear(),i=n.getMonth()-t.getMonth();(i<0||0===i&&n.getDate()<t.getDate()?r-1:r)<15&&(e.dateOfBirth="B\u1ea1n ph\u1ea3i t\u1eeb 15 tu\u1ed5i tr\u1edf l\xean \u0111\u1ec3 \u0111\u0103ng k\xfd")}else e.dateOfBirth="Ng\xe0y sinh l\xe0 b\u1eaft bu\u1ed9c";s.address||(e.address="\u0110\u1ecba ch\u1ec9 l\xe0 b\u1eaft bu\u1ed9c"),s.confirmPassword?s.password!==s.confirmPassword&&(e.confirmPassword="M\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp"):e.confirmPassword="X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u l\xe0 b\u1eaft bu\u1ed9c"}return e})();if(Object.keys(l).length>0)u(l);else{g(!0),h(""),f("");try{if(o){const t=await n(s.email,s.password);t.success?(f("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng!"),setTimeout((()=>{i()?e("/dashboard"):e("/")}),1500)):h(t.error||"Email ho\u1eb7c m\u1eadt kh\u1ea9u kh\xf4ng \u0111\xfang")}else{const t={email:s.email,password:s.password,fullname:s.fullname,phone:s.phone,gender:s.gender,dateOfBirth:s.dateOfBirth,address:s.address,role:"Member"},n=await r(t);n.success?(f(n.message||"\u0110\u0103ng k\xfd th\xe0nh c\xf4ng! Vui l\xf2ng \u0111\u0103ng nh\u1eadp."),n.autoLoggedIn?setTimeout((()=>{e("/")}),1500):(c({email:s.email,password:"",fullname:"",phone:"",gender:"",dateOfBirth:"",address:"",confirmPassword:""}),setTimeout((()=>{a(!0),f("")}),2e3))):h(n.error||"C\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u0103ng k\xfd")}}catch(d){h("C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i."),console.error("Auth error:",d)}finally{g(!1)}}},children:[(0,Tt.jsx)("h2",{children:o?"\u0110\u0103ng Nh\u1eadp":"T\u1ea1o T\xe0i Kho\u1ea3n M\u1edbi"}),A&&(0,Tt.jsx)("div",{className:"error-alert",children:A}),p&&(0,Tt.jsx)("div",{className:"success-alert",children:p}),o&&(0,Tt.jsxs)("div",{className:"login-form-horizontal",children:[(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{htmlFor:"email",children:[(0,Tt.jsx)(Ld,{icon:su})," \u0110\u1ecba Ch\u1ec9 Email"]}),(0,Tt.jsx)("input",{type:"email",id:"email",name:"email",value:s.email,onChange:_,className:d.email?"error":""}),d.email&&(0,Tt.jsx)("div",{className:"error-text",children:d.email})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{htmlFor:"password",children:[(0,Tt.jsx)(Ld,{icon:Vd})," M\u1eadt Kh\u1ea9u"]}),(0,Tt.jsxs)("div",{className:"password-input-container",children:[(0,Tt.jsx)("input",{type:v?"text":"password",id:"password",name:"password",value:s.password,onChange:_,className:"password-input-with-toggle ".concat(d.password?"error":"")}),(0,Tt.jsx)("button",{type:"button",className:"password-toggle",onClick:w,children:(0,Tt.jsx)(Ld,{icon:v?Gd:$d})})]}),d.password&&(0,Tt.jsx)("div",{className:"error-text",children:d.password})]})]}),!o&&(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{htmlFor:"email",children:[(0,Tt.jsx)(Ld,{icon:su})," \u0110\u1ecba Ch\u1ec9 Email"]}),(0,Tt.jsx)("input",{type:"email",id:"email",name:"email",value:s.email,onChange:_,className:d.email?"error":""}),d.email&&(0,Tt.jsx)("div",{className:"error-text",children:d.email})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{htmlFor:"fullname",children:[(0,Tt.jsx)(Ld,{icon:Wd})," H\u1ecd v\xe0 T\xean"]}),(0,Tt.jsx)("input",{type:"text",id:"fullname",name:"fullname",value:s.fullname,onChange:_,className:d.fullname?"error":""}),d.fullname&&(0,Tt.jsx)("div",{className:"error-text",children:d.fullname})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{htmlFor:"phone",children:[(0,Tt.jsx)(Ld,{icon:nu})," S\u1ed1 \u0110i\u1ec7n Tho\u1ea1i"]}),(0,Tt.jsx)("input",{type:"tel",id:"phone",name:"phone",value:s.phone,onChange:_,className:d.phone?"error":"",placeholder:"V\xed d\u1ee5: +84123456789",onFocus:e=>{s.phone||c(l(l({},s),{},{phone:"+84"}))}}),d.phone&&(0,Tt.jsx)("div",{className:"error-text",children:d.phone})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{htmlFor:"gender",children:[(0,Tt.jsx)(Ld,{icon:Yd})," Gi\u1edbi T\xednh"]}),(0,Tt.jsxs)("select",{id:"gender",name:"gender",value:s.gender,onChange:_,className:d.gender?"error":"",children:[(0,Tt.jsx)("option",{value:"",children:"Ch\u1ecdn gi\u1edbi t\xednh"}),(0,Tt.jsx)("option",{value:"Nam",children:"Nam"}),(0,Tt.jsx)("option",{value:"N\u1eef",children:"N\u1eef"}),(0,Tt.jsx)("option",{value:"Kh\xe1c",children:"Kh\xe1c"})]}),d.gender&&(0,Tt.jsx)("div",{className:"error-text",children:d.gender})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{htmlFor:"dateOfBirth",children:[(0,Tt.jsx)(Ld,{icon:Cu})," Ng\xe0y Sinh (ph\u1ea3i t\u1eeb 15 tu\u1ed5i tr\u1edf l\xean)"]}),(0,Tt.jsx)("input",{type:"date",id:"dateOfBirth",name:"dateOfBirth",value:s.dateOfBirth,onChange:_,className:d.dateOfBirth?"error":"",max:(()=>{const e=new Date;return new Date(e.getFullYear()-15,e.getMonth(),e.getDate()).toISOString().split("T")[0]})()}),d.dateOfBirth&&(0,Tt.jsx)("div",{className:"error-text",children:d.dateOfBirth})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{htmlFor:"address",children:[(0,Tt.jsx)(Ld,{icon:fu})," \u0110\u1ecba Ch\u1ec9"]}),(0,Tt.jsx)("textarea",{id:"address",name:"address",value:s.address,onChange:_,className:d.address?"error":"",rows:"3",placeholder:"Nh\u1eadp \u0111\u1ecba ch\u1ec9 \u0111\u1ea7y \u0111\u1ee7"}),d.address&&(0,Tt.jsx)("div",{className:"error-text",children:d.address})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{htmlFor:"password",children:[(0,Tt.jsx)(Ld,{icon:Vd})," M\u1eadt Kh\u1ea9u"]}),(0,Tt.jsxs)("div",{className:"password-input-container",children:[(0,Tt.jsx)("input",{type:v?"text":"password",id:"password",name:"password",value:s.password,onChange:_,className:"password-input-with-toggle ".concat(d.password?"error":"")}),(0,Tt.jsx)("button",{type:"button",className:"password-toggle",onClick:w,children:(0,Tt.jsx)(Ld,{icon:v?Gd:$d})})]}),d.password&&(0,Tt.jsx)("div",{className:"error-text",children:d.password})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{htmlFor:"confirmPassword",children:[(0,Tt.jsx)(Ld,{icon:Vd})," X\xe1c Nh\u1eadn M\u1eadt Kh\u1ea9u"]}),(0,Tt.jsxs)("div",{className:"password-input-container",children:[(0,Tt.jsx)("input",{type:b?"text":"password",id:"confirmPassword",name:"confirmPassword",value:s.confirmPassword,onChange:_,className:"password-input-with-toggle ".concat(d.confirmPassword?"error":"")}),(0,Tt.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>{E(!b)},children:(0,Tt.jsx)(Ld,{icon:b?Gd:$d})})]}),d.confirmPassword&&(0,Tt.jsx)("div",{className:"error-text",children:d.confirmPassword})]})]}),(0,Tt.jsx)("button",{type:"submit",className:"btn btn-primary ".concat(m?"loading":""),disabled:m,children:m?"\u0110ang x\u1eed l\xfd...":o?"\u0110\u0103ng Nh\u1eadp":"\u0110\u0103ng K\xfd"}),o&&(0,Tt.jsx)("div",{className:"forgot-password",children:(0,Tt.jsx)(ft,{to:"/forgot-password",children:"Qu\xean m\u1eadt kh\u1ea9u?"})}),(0,Tt.jsx)("div",{className:"form-footer",children:(0,Tt.jsxs)("p",{children:[o?"Ch\u01b0a c\xf3 t\xe0i kho\u1ea3n?":"\u0110\xe3 c\xf3 t\xe0i kho\u1ea3n?"," ",(0,Tt.jsx)("button",{type:"button",className:"switch-form-btn",onClick:()=>{a(!o),u({}),h(""),f(""),c({email:"",password:"",fullname:"",phone:"",gender:"",dateOfBirth:"",address:"",confirmPassword:""})},children:o?"\u0110\u0103ng k\xfd ngay":"\u0110\u0103ng nh\u1eadp"})]})})]})]})]})})};function sp(){const e=Sa(Ta);return e[fr]||e}function cp(e){return eA("MuiPaper",e)}tA("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const lp=["className","component","elevation","square","variant"],dp=CA("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})(IA((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:e=>{let{ownerState:t}=e;return!t.square},style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:"1px solid ".concat((t.vars||t).palette.divider)}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}}))),up=t.forwardRef((function(e,t){var n;const r=xa({props:e,name:"MuiPaper"}),i=sp(),{className:o,component:s="div",elevation:c=1,square:d=!1,variant:u="elevation"}=r,A=a(r,lp),h=l(l({},r),{},{component:s,elevation:c,square:d,variant:u}),p=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e;return aA({root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]},cp,i)})(h);return(0,Tt.jsx)(dp,l(l({as:s,ownerState:h,className:Mu(p.root,o),ref:t},A),{},{style:l(l({},"elevation"===u&&l(l({"--Paper-shadow":(i.vars||i).shadows[c]},i.vars&&{"--Paper-overlay":null===(n=i.vars.overlays)||void 0===n?void 0:n[c]}),!i.vars&&"dark"===i.palette.mode&&{"--Paper-overlay":"linear-gradient(".concat(qi("#fff",Yo(c)),", ").concat(qi("#fff",Yo(c)),")")})),A.style)}))}));function Ap(e){return eA("MuiCard",e)}tA("MuiCard",["root"]);const hp=["className","raised"],pp=CA(up,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),fp=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiCard"}),{className:r,raised:i=!1}=n,o=a(n,hp),s=l(l({},n),{},{raised:i}),c=(e=>{const{classes:t}=e;return aA({root:["root"]},Ap,t)})(s);return(0,Tt.jsx)(pp,l({className:Mu(c.root,r),elevation:i?8:void 0,ref:t,ownerState:s},o))}));function mp(e){return eA("MuiCardMedia",e)}tA("MuiCardMedia",["root","media","img"]);const gp=["children","className","component","image","src","style"],vp=CA("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:i}=n;return[t.root,r&&t.media,i&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),yp=["video","audio","picture","iframe","img"],bp=["picture","img"],Ep=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiCardMedia"}),{children:r,className:i,component:o="div",image:s,src:c,style:d}=n,u=a(n,gp),A=yp.includes(o),h=!A&&s?l({backgroundImage:'url("'.concat(s,'")')},d):d,p=l(l({},n),{},{component:o,isMediaComponent:A,isImageComponent:bp.includes(o)}),f=(e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e;return aA({root:["root",n&&"media",r&&"img"]},mp,t)})(p);return(0,Tt.jsx)(vp,l(l({className:Mu(f.root,i),as:o,role:!A&&s?"img":void 0,ref:t,style:h,ownerState:p,src:A?s||c:void 0},u),{},{children:r}))})),wp=Ep;function _p(e){return eA("MuiTypography",e)}const Sp=tA("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Cp=["color"],Tp=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Ip={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Rp=wa,xp=CA("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat(mh(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(IA((e=>{var t;let{theme:n}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter((e=>{let[t,n]=e;return"inherit"!==t&&n&&"object"===typeof n})).map((e=>{let[t,n]=e;return{props:{variant:t},style:n}})),...Object.entries(n.palette).filter(gh()).map((e=>{let[t]=e;return{props:{color:t},style:{color:(n.vars||n).palette[t].main}}})),...Object.entries((null===(t=n.palette)||void 0===t?void 0:t.text)||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[t]=e;return{props:{color:"text".concat(mh(t))},style:{color:(n.vars||n).palette.text[t]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),Np={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Op=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiTypography"}),{color:r}=n,i=a(n,Cp),o=!Ip[r],s=Rp(l(l({},i),o&&{color:r})),{align:c="inherit",className:d,component:u,gutterBottom:A=!1,noWrap:h=!1,paragraph:p=!1,variant:f="body1",variantMapping:m=Np}=s,g=a(s,Tp),v=l(l({},s),{},{align:c,color:r,className:d,component:u,gutterBottom:A,noWrap:h,paragraph:p,variant:f,variantMapping:m}),y=u||(p?"p":m[f]||Np[f])||"span",b=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:a}=e;return aA({root:["root",o,"inherit"!==e.align&&"align".concat(mh(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},_p,a)})(v);return(0,Tt.jsx)(xp,l(l({as:y,ref:t,className:Mu(b.root,d)},g),{},{ownerState:v,style:l(l({},"inherit"!==c&&{"--Typography-textAlign":c}),g.style)}))})),kp=Op;const Pp=function(e){return"string"===typeof e};const Bp=function(e,t,n){return void 0===e||Pp(e)?t:l(l({},t),{},{ownerState:l(l({},t.ownerState),n)})};const Lp=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const Dp=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const Up=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=Mu(null===n||void 0===n?void 0:n.className,o,null===i||void 0===i?void 0:i.className,null===r||void 0===r?void 0:r.className),t=l(l(l({},null===n||void 0===n?void 0:n.style),null===i||void 0===i?void 0:i.style),null===r||void 0===r?void 0:r.style),a=l(l(l({},n),i),r);return e.length>0&&(a.className=e),Object.keys(t).length>0&&(a.style=t),{props:a,internalRef:void 0}}const a=Lp(l(l({},i),r)),s=Dp(r),c=Dp(i),d=t(a),u=Mu(null===d||void 0===d?void 0:d.className,null===n||void 0===n?void 0:n.className,o,null===i||void 0===i?void 0:i.className,null===r||void 0===r?void 0:r.className),A=l(l(l(l({},null===d||void 0===d?void 0:d.style),null===n||void 0===n?void 0:n.style),null===i||void 0===i?void 0:i.style),null===r||void 0===r?void 0:r.style),h=l(l(l(l({},d),n),c),s);return u.length>0&&(h.className=u),Object.keys(A).length>0&&(h.style=A),{props:h,internalRef:d.ref}};const Mp=function(e,t,n){return"function"===typeof e?e(t,n):e},Fp=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const jp=function(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=e,s=a(e,Fp),c=o?{}:Mp(r,i),{props:d,internalRef:u}=Up(l(l({},s),{},{externalSlotProps:c})),A=xA(u,null===c||void 0===c?void 0:c.ref,null===(t=e.additionalProps)||void 0===t?void 0:t.ref);return Bp(n,l(l({},d),{},{ref:A}),i)};function Qp(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}const Vp=Qp;function Hp(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}const zp=Oi;function Kp(e){return e&&e.ownerDocument||document}function Gp(e){return Kp(e).defaultView||window}const Wp=Gp,qp=["onChange"],Yp={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};const Xp=Zh((0,Tt.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),Jp=Zh((0,Tt.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function Zp(e){return eA("MuiTabScrollButton",e)}const $p=tA("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),ef=["className","slots","slotProps","direction","orientation","disabled"],tf=CA(fh,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})({width:40,flexShrink:0,opacity:.8,["&.".concat($p.disabled)]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),nf=t.forwardRef((function(e,t){var n,r;const i=xa({props:e,name:"MuiTabScrollButton"}),{className:o,slots:s={},slotProps:c={},direction:d,orientation:u,disabled:A}=i,h=a(i,ef),p=ar(),f=l({isRtl:p},i),m=(e=>{const{classes:t,orientation:n,disabled:r}=e;return aA({root:["root",n,r&&"disabled"]},Zp,t)})(f),g=null!==(n=s.StartScrollButtonIcon)&&void 0!==n?n:Xp,v=null!==(r=s.EndScrollButtonIcon)&&void 0!==r?r:Jp,y=jp({elementType:g,externalSlotProps:c.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:f}),b=jp({elementType:v,externalSlotProps:c.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:f});return(0,Tt.jsx)(tf,l(l({component:"div",className:Mu(m.root,o),ref:t,role:null,ownerState:f,tabIndex:null},h),{},{style:l(l({},h.style),"vertical"===u&&{"--TabScrollButton-svgRotate":"rotate(".concat(p?-90:90,"deg)")}),children:"left"===d?(0,Tt.jsx)(g,l({},y)):(0,Tt.jsx)(v,l({},b))}))})),rf=nf;function of(e){return eA("MuiTabs",e)}const af=tA("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),sf=Kp,cf=["className","elementType","ownerState","externalForwardedProps","internalForwardedProps","shouldForwardComponentProp"],lf=["component","slots","slotProps"],df=["component"];function uf(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,internalForwardedProps:s,shouldForwardComponentProp:c=!1}=t,d=a(t,cf),{component:u,slots:A={[e]:void 0},slotProps:h={[e]:void 0}}=o,p=a(o,lf),f=A[e]||r,m=Mp(h[e],i),g=Up(l(l({className:n},d),{},{externalForwardedProps:"root"===e?p:void 0,externalSlotProps:m})),{props:{component:v},internalRef:y}=g,b=a(g.props,df),E=xA(y,null===m||void 0===m?void 0:m.ref,t.ref),w="root"===e?v||u:v;return[f,Bp(f,l(l(l(l(l(l({},"root"===e&&!u&&!A[e]&&s),"root"!==e&&!A[e]&&s),b),w&&!c&&{as:w}),w&&c&&{component:w}),{},{ref:E}),i)]}const Af=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],hf=["onChange"],pf=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,ff=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,mf=(e,t,n)=>{let r=!1,i=n(e,t);for(;i;){if(i===e.firstChild){if(r)return;r=!0}const t=i.disabled||"true"===i.getAttribute("aria-disabled");if(i.hasAttribute("tabindex")&&!t)return void i.focus();i=n(e,i)}},gf=CA("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(af.scrollButtons)]:t.scrollButtons},{["& .".concat(af.scrollButtons)]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(IA((e=>{let{theme:t}=e;return{overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:e=>{let{ownerState:t}=e;return t.vertical},style:{flexDirection:"column"}},{props:e=>{let{ownerState:t}=e;return t.scrollButtonsHideMobile},style:{["& .".concat(af.scrollButtons)]:{[t.breakpoints.down("sm")]:{display:"none"}}}}]}}))),vf=CA("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:e=>{let{ownerState:t}=e;return t.fixed},style:{overflowX:"hidden",width:"100%"}},{props:e=>{let{ownerState:t}=e;return t.hideScrollbar},style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:e=>{let{ownerState:t}=e;return t.scrollableX},style:{overflowX:"auto",overflowY:"hidden"}},{props:e=>{let{ownerState:t}=e;return t.scrollableY},style:{overflowY:"auto",overflowX:"hidden"}}]}),yf=CA("div",{name:"MuiTabs",slot:"List",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.list,t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})({display:"flex",variants:[{props:e=>{let{ownerState:t}=e;return t.vertical},style:{flexDirection:"column"}},{props:e=>{let{ownerState:t}=e;return t.centered},style:{justifyContent:"center"}}]}),bf=CA("span",{name:"MuiTabs",slot:"Indicator"})(IA((e=>{let{theme:t}=e;return{position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(t.vars||t).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(t.vars||t).palette.secondary.main}},{props:e=>{let{ownerState:t}=e;return t.vertical},style:{height:"100%",width:2,right:0}}]}}))),Ef=CA((function(e){const{onChange:n}=e,r=a(e,qp),i=t.useRef(),o=t.useRef(null),s=()=>{i.current=o.current.offsetHeight-o.current.clientHeight};return zp((()=>{const e=Vp((()=>{const e=i.current;s(),e!==i.current&&n(i.current)})),t=Wp(o.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[n]),t.useEffect((()=>{s(),n(i.current)}),[n]),(0,Tt.jsx)("div",l(l({style:Yp},r),{},{ref:o}))}))({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),wf={};const _f=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiTabs"}),i=sp(),o=ar(),{"aria-label":s,"aria-labelledby":c,action:d,centered:u=!1,children:A,className:h,component:p="div",allowScrollButtonsMobile:f=!1,indicatorColor:m="primary",onChange:g,orientation:v="horizontal",ScrollButtonComponent:y,scrollButtons:b="auto",selectionFollowsFocus:E,slots:w={},slotProps:_={},TabIndicatorProps:S={},TabScrollButtonProps:C={},textColor:T="primary",value:I,variant:R="standard",visibleScrollbar:x=!1}=r,N=a(r,Af),O="scrollable"===R,k="vertical"===v,P=k?"scrollTop":"scrollLeft",B=k?"top":"left",L=k?"bottom":"right",D=k?"clientHeight":"clientWidth",U=k?"height":"width",M=l(l({},r),{},{component:p,allowScrollButtonsMobile:f,indicatorColor:m,orientation:v,vertical:k,scrollButtons:b,textColor:T,variant:R,visibleScrollbar:x,fixed:!O,hideScrollbar:O&&!x,scrollableX:O&&!k,scrollableY:O&&k,centered:u&&!O,scrollButtonsHideMobile:!f}),F=(e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:a,scrollButtonsHideMobile:s,classes:c}=e;return aA({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],list:["list","flexContainer",t&&"flexContainerVertical",t&&"vertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},of,c)})(M),j=jp({elementType:w.StartScrollButtonIcon,externalSlotProps:_.startScrollButtonIcon,ownerState:M}),Q=jp({elementType:w.EndScrollButtonIcon,externalSlotProps:_.endScrollButtonIcon,ownerState:M});const[V,H]=t.useState(!1),[z,K]=t.useState(wf),[G,W]=t.useState(!1),[q,Y]=t.useState(!1),[X,J]=t.useState(!1),[Z,$]=t.useState({overflow:"hidden",scrollbarWidth:0}),ee=new Map,te=t.useRef(null),ne=t.useRef(null),re={slots:w,slotProps:l({indicator:S,scrollButton:C},_)},ie=()=>{const e=te.current;let t,n;if(e){const n=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollWidth:e.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}if(e&&!1!==I){const e=ne.current.children;if(e.length>0){const t=e[ee.get(I)];0,n=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:n}},oe=kA((()=>{const{tabsMeta:e,tabMeta:t}=ie();let n,r=0;k?(n="top",t&&e&&(r=t.top-e.top+e.scrollTop)):(n=o?"right":"left",t&&e&&(r=(o?-1:1)*(t[n]-e[n]+e.scrollLeft)));const i={[n]:r,[U]:t?t[U]:0};if("number"!==typeof z[n]||"number"!==typeof z[U])K(i);else{const e=Math.abs(z[n]-i[n]),t=Math.abs(z[U]-i[U]);(e>=1||t>=1)&&K(i)}})),ae=function(e){let{animation:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const{ease:o=Hp,duration:a=300}=r;let s=null;const c=t[e];let l=!1;const d=()=>{l=!0},u=r=>{if(l)return void i(new Error("Animation cancelled"));null===s&&(s=r);const d=Math.min(1,(r-s)/a);t[e]=o(d)*(n-c)+c,d>=1?requestAnimationFrame((()=>{i(null)})):requestAnimationFrame(u)};c===n?i(new Error("Element already at target position")):requestAnimationFrame(u)}(P,te.current,e,{duration:i.transitions.duration.standard}):te.current[P]=e},se=e=>{let t=te.current[P];t+=k?e:e*(o?-1:1),ae(t)},ce=()=>{const e=te.current[D];let t=0;const n=Array.from(ne.current.children);for(let r=0;r<n.length;r+=1){const i=n[r];if(t+i[D]>e){0===r&&(t=e);break}t+=i[D]}return t},le=()=>{se(-1*ce())},de=()=>{se(ce())},[ue,Ae]=uf("scrollbar",{className:Mu(F.scrollableX,F.hideScrollbar),elementType:Ef,shouldForwardComponentProp:!0,externalForwardedProps:re,ownerState:M}),{onChange:he}=Ae,pe=a(Ae,hf),fe=t.useCallback((e=>{null===he||void 0===he||he(e),$({overflow:null,scrollbarWidth:e})}),[he]),[me,ge]=uf("scrollButtons",{className:Mu(F.scrollButtons,C.className),elementType:rf,externalForwardedProps:re,ownerState:M,additionalProps:{orientation:v,slots:{StartScrollButtonIcon:w.startScrollButtonIcon||w.StartScrollButtonIcon,EndScrollButtonIcon:w.endScrollButtonIcon||w.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:j,endScrollButtonIcon:Q}}}),ve=kA((e=>{const{tabsMeta:t,tabMeta:n}=ie();if(n&&t)if(n[B]<t[B]){const r=t[P]+(n[B]-t[B]);ae(r,{animation:e})}else if(n[L]>t[L]){const r=t[P]+(n[L]-t[L]);ae(r,{animation:e})}})),ye=kA((()=>{O&&!1!==b&&J(!X)}));t.useEffect((()=>{const e=Vp((()=>{te.current&&oe()}));let t;const n=n=>{n.forEach((e=>{e.removedNodes.forEach((e=>{var n;null===(n=t)||void 0===n||n.unobserve(e)})),e.addedNodes.forEach((e=>{var n;null===(n=t)||void 0===n||n.observe(e)}))})),e(),ye()},r=Wp(te.current);let i;return r.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e),Array.from(ne.current.children).forEach((e=>{t.observe(e)}))),"undefined"!==typeof MutationObserver&&(i=new MutationObserver(n),i.observe(ne.current,{childList:!0})),()=>{var n,o;e.clear(),r.removeEventListener("resize",e),null===(n=i)||void 0===n||n.disconnect(),null===(o=t)||void 0===o||o.disconnect()}}),[oe,ye]),t.useEffect((()=>{const e=Array.from(ne.current.children),t=e.length;if("undefined"!==typeof IntersectionObserver&&t>0&&O&&!1!==b){const n=e[0],r=e[t-1],i={root:te.current,threshold:.99},o=new IntersectionObserver((e=>{W(!e[0].isIntersecting)}),i);o.observe(n);const a=new IntersectionObserver((e=>{Y(!e[0].isIntersecting)}),i);return a.observe(r),()=>{o.disconnect(),a.disconnect()}}}),[O,b,X,null===A||void 0===A?void 0:A.length]),t.useEffect((()=>{H(!0)}),[]),t.useEffect((()=>{oe()})),t.useEffect((()=>{ve(wf!==z)}),[ve,z]),t.useImperativeHandle(d,(()=>({updateIndicator:oe,updateScrollButtons:ye})),[oe,ye]);const[be,Ee]=uf("indicator",{className:Mu(F.indicator,S.className),elementType:bf,externalForwardedProps:re,ownerState:M,additionalProps:{style:z}}),we=(0,Tt.jsx)(be,l({},Ee));let _e=0;const Se=t.Children.map(A,(e=>{if(!t.isValidElement(e))return null;const n=void 0===e.props.value?_e:e.props.value;ee.set(n,_e);const r=n===I;return _e+=1,t.cloneElement(e,l({fullWidth:"fullWidth"===R,indicator:r&&!V&&we,selected:r,selectionFollowsFocus:E,onChange:g,textColor:T,value:n},1!==_e||!1!==I||e.props.tabIndex?{}:{tabIndex:0}))})),Ce=(()=>{const e={};e.scrollbarSizeListener=O?(0,Tt.jsx)(ue,l(l({},pe),{},{onChange:fe})):null;const t=O&&("auto"===b&&(G||q)||!0===b);return e.scrollButtonStart=t?(0,Tt.jsx)(me,l({direction:o?"right":"left",onClick:le,disabled:!G},ge)):null,e.scrollButtonEnd=t?(0,Tt.jsx)(me,l({direction:o?"left":"right",onClick:de,disabled:!q},ge)):null,e})(),[Te,Ie]=uf("root",{ref:n,className:Mu(F.root,h),elementType:gf,externalForwardedProps:l(l(l({},re),N),{},{component:p}),ownerState:M}),[Re,xe]=uf("scroller",{ref:te,className:F.scroller,elementType:vf,externalForwardedProps:re,ownerState:M,additionalProps:{style:{overflow:Z.overflow,[k?"margin".concat(o?"Left":"Right"):"marginBottom"]:x?void 0:-Z.scrollbarWidth}}}),[Ne,Oe]=uf("list",{ref:ne,className:Mu(F.list,F.flexContainer),elementType:yf,externalForwardedProps:re,ownerState:M,getSlotProps:e=>l(l({},e),{},{onKeyDown:t=>{var n;(e=>{if(e.altKey||e.shiftKey||e.ctrlKey||e.metaKey)return;const t=ne.current,n=sf(t).activeElement;if("tab"!==n.getAttribute("role"))return;let r="horizontal"===v?"ArrowLeft":"ArrowUp",i="horizontal"===v?"ArrowRight":"ArrowDown";switch("horizontal"===v&&o&&(r="ArrowRight",i="ArrowLeft"),e.key){case r:e.preventDefault(),mf(t,n,ff);break;case i:e.preventDefault(),mf(t,n,pf);break;case"Home":e.preventDefault(),mf(t,null,pf);break;case"End":e.preventDefault(),mf(t,null,ff)}})(t),null===(n=e.onKeyDown)||void 0===n||n.call(e,t)}})});return(0,Tt.jsxs)(Te,l(l({},Ie),{},{children:[Ce.scrollButtonStart,Ce.scrollbarSizeListener,(0,Tt.jsxs)(Re,l(l({},xe),{},{children:[(0,Tt.jsx)(Ne,l(l({"aria-label":s,"aria-labelledby":c,"aria-orientation":"vertical"===v?"vertical":null,role:"tablist"},Oe),{},{children:Se})),V&&we]})),Ce.scrollButtonEnd]}))})),Sf=_f;function Cf(e){var n;return parseInt(t.version,10)>=19?(null===e||void 0===e||null===(n=e.props)||void 0===n?void 0:n.ref)||null:(null===e||void 0===e?void 0:e.ref)||null}var Tf=n(7950);const If=!1;var Rf="unmounted",xf="exited",Nf="entering",Of="entered",kf="exiting",Pf=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=xf,r.appearStatus=Nf):i=Of:i=t.unmountOnExit||t.mountOnEnter?Rf:xf,r.state={status:i},r.nextCallback=null,r}MA(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Rf?{status:xf}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Nf&&n!==Of&&(t=Nf):n!==Nf&&n!==Of||(t=kf)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Nf){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Tf.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===xf&&this.setState({status:Rf})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Tf.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),c=r?s.appear:s.enter;!e&&!n||If?this.safeSetState({status:Of},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:Nf},(function(){t.props.onEntering(o,a),t.onTransitionEnd(c,(function(){t.safeSetState({status:Of},(function(){t.props.onEntered(o,a)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Tf.findDOMNode(this);t&&!If?(this.props.onExit(r),this.safeSetState({status:kf},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:xf},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:xf},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Tf.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===Rf)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,o(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(FA.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function Bf(){}Pf.contextType=FA,Pf.propTypes={},Pf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Bf,onEntering:Bf,onEntered:Bf,onExit:Bf,onExiting:Bf,onExited:Bf},Pf.UNMOUNTED=Rf,Pf.EXITED=xf,Pf.ENTERING=Nf,Pf.ENTERED=Of,Pf.EXITING=kf;const Lf=Pf,Df=e=>e.scrollTop;function Uf(e,t){var n,r;const{timeout:i,easing:o,style:a={}}=e;return{duration:null!==(n=a.transitionDuration)&&void 0!==n?n:"number"===typeof i?i:i[t.mode]||0,easing:null!==(r=a.transitionTimingFunction)&&void 0!==r?r:"object"===typeof o?o[t.mode]:o,delay:a.transitionDelay}}const Mf=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Ff=["ownerState"];function jf(e){return"scale(".concat(e,", ").concat(e**2,")")}const Qf={entering:{opacity:1,transform:jf(1)},entered:{opacity:1,transform:"none"}},Vf="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Hf=t.forwardRef((function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:s,in:c,onEnter:d,onEntered:u,onEntering:A,onExit:h,onExited:p,onExiting:f,style:m,timeout:g="auto",TransitionComponent:v=Lf}=e,y=a(e,Mf),b=qA(),E=t.useRef(),w=sp(),_=t.useRef(null),S=NA(_,Cf(o),n),C=e=>t=>{if(e){const n=_.current;void 0===t?e(n):e(n,t)}},T=C(A),I=C(((e,t)=>{Df(e);const{duration:n,delay:r,easing:i}=Uf({style:m,timeout:g,easing:s},{mode:"enter"});let o;"auto"===g?(o=w.transitions.getAutoHeightDuration(e.clientHeight),E.current=o):o=n,e.style.transition=[w.transitions.create("opacity",{duration:o,delay:r}),w.transitions.create("transform",{duration:Vf?o:.666*o,delay:r,easing:i})].join(","),d&&d(e,t)})),R=C(u),x=C(f),N=C((e=>{const{duration:t,delay:n,easing:r}=Uf({style:m,timeout:g,easing:s},{mode:"exit"});let i;"auto"===g?(i=w.transitions.getAutoHeightDuration(e.clientHeight),E.current=i):i=t,e.style.transition=[w.transitions.create("opacity",{duration:i,delay:n}),w.transitions.create("transform",{duration:Vf?i:.666*i,delay:Vf?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=jf(.75),h&&h(e)})),O=C(p);return(0,Tt.jsx)(v,l(l({appear:i,in:c,nodeRef:_,onEnter:I,onEntered:R,onEntering:T,onExit:N,onExited:O,onExiting:x,addEndListener:e=>{"auto"===g&&b.start(E.current||0,e),r&&r(_.current,e)},timeout:"auto"===g?null:g},y),{},{children:(e,n)=>{let{ownerState:r}=n,i=a(n,Ff);return t.cloneElement(o,l({style:l(l(l({opacity:0,transform:jf(.75),visibility:"exited"!==e||c?void 0:"hidden"},Qf[e]),m),o.props.style),ref:S},i))}}))}));Hf&&(Hf.muiSupportAuto=!0);const zf=Hf;function Kf(e,n){var r,i;return t.isValidElement(e)&&-1!==n.indexOf(null!==(r=e.type.muiName)&&void 0!==r?r:null===(i=e.type)||void 0===i||null===(i=i._payload)||void 0===i||null===(i=i.value)||void 0===i?void 0:i.muiName)}const Gf=wA();function Wf(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,o=Sa(r);return i&&(o=o[i]||o),function(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?cr(t.components[n].defaultProps,r):r}({theme:o,name:n,props:t})}const qf=(e,t,n)=>{const r=e.keys[0];if(Array.isArray(t))t.forEach(((t,r)=>{n(((t,n)=>{r<=e.keys.length-1&&(0===r?Object.assign(t,n):t[e.up(e.keys[r])]=n)}),t)}));else if(t&&"object"===typeof t){(Object.keys(t).length>e.keys.length?e.keys:(i=e.keys,o=Object.keys(t),i.filter((e=>o.includes(e))))).forEach((i=>{if(e.keys.includes(i)){const o=t[i];void 0!==o&&n(((t,n)=>{r===i?Object.assign(t,n):t[e.up(i)]=n}),o)}}))}else"number"!==typeof t&&"string"!==typeof t||n(((e,t)=>{Object.assign(e,t)}),t);var i,o};function Yf(e){return"--Grid-".concat(e,"Spacing")}function Xf(e){return"--Grid-parent-".concat(e,"Spacing")}const Jf="--Grid-columns",Zf="--Grid-parent-columns",$f=e=>{let{theme:t,ownerState:n}=e;const r={};return qf(t.breakpoints,n.size,((e,t)=>{let n={};"grow"===t&&(n={flexBasis:0,flexGrow:1,maxWidth:"100%"}),"auto"===t&&(n={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),"number"===typeof t&&(n={flexGrow:0,flexBasis:"auto",width:"calc(100% * ".concat(t," / var(").concat(Zf,") - (var(").concat(Zf,") - ").concat(t,") * (var(").concat(Xf("column"),") / var(").concat(Zf,")))")}),e(r,n)})),r},em=e=>{let{theme:t,ownerState:n}=e;const r={};return qf(t.breakpoints,n.offset,((e,t)=>{let n={};"auto"===t&&(n={marginLeft:"auto"}),"number"===typeof t&&(n={marginLeft:0===t?"0px":"calc(100% * ".concat(t," / var(").concat(Zf,") + var(").concat(Xf("column"),") * ").concat(t," / var(").concat(Zf,"))")}),e(r,n)})),r},tm=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const r={[Jf]:12};return qf(t.breakpoints,n.columns,((e,t)=>{const n=null!==t&&void 0!==t?t:12;e(r,{[Jf]:n,"> *":{[Zf]:n}})})),r},nm=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const r={};return qf(t.breakpoints,n.rowSpacing,((e,n)=>{var i;const o="string"===typeof n?n:null===(i=t.spacing)||void 0===i?void 0:i.call(t,n);e(r,{[Yf("row")]:o,"> *":{[Xf("row")]:o}})})),r},rm=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const r={};return qf(t.breakpoints,n.columnSpacing,((e,n)=>{var i;const o="string"===typeof n?n:null===(i=t.spacing)||void 0===i?void 0:i.call(t,n);e(r,{[Yf("column")]:o,"> *":{[Xf("column")]:o}})})),r},im=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const r={};return qf(t.breakpoints,n.direction,((e,t)=>{e(r,{flexDirection:t})})),r},om=e=>{let{ownerState:t}=e;return l({minWidth:0,boxSizing:"border-box"},t.container&&l(l({display:"flex",flexWrap:"wrap"},t.wrap&&"wrap"!==t.wrap&&{flexWrap:t.wrap}),{},{gap:"var(".concat(Yf("row"),") var(").concat(Yf("column"),")")}))},am=e=>{const t=[];return Object.entries(e).forEach((e=>{let[n,r]=e;!1!==r&&void 0!==r&&t.push("grid-".concat(n,"-").concat(String(r)))})),t},sm=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xs";function n(e){return void 0!==e&&("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e&&e>0)}if(n(e))return["spacing-".concat(t,"-").concat(String(e))];if("object"===typeof e&&!Array.isArray(e)){const t=[];return Object.entries(e).forEach((e=>{let[r,i]=e;n(i)&&t.push("spacing-".concat(r,"-").concat(String(i)))})),t}return[]},cm=e=>void 0===e?[]:"object"===typeof e?Object.entries(e).map((e=>{let[t,n]=e;return"direction-".concat(t,"-").concat(n)})):["direction-xs-".concat(String(e))];const lm=["className","children","columns","container","component","direction","wrap","size","offset","spacing","rowSpacing","columnSpacing","unstable_level"],dm=Oo(),um=Gf("div",{name:"MuiGrid",slot:"Root"});function Am(e){return Wf({props:e,name:"MuiGrid",defaultTheme:dm})}const hm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=um,useThemeProps:r=Am,useTheme:i=Sa,componentName:o="MuiGrid"}=e;function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;const r={};return null===e||(Array.isArray(e)?e.forEach(((e,i)=>{null!==e&&n(e)&&t.keys[i]&&(r[t.keys[i]]=e)})):"object"===typeof e?Object.keys(e).forEach((t=>{const i=e[t];null!==i&&void 0!==i&&n(i)&&(r[t]=i)})):r[t.keys[0]]=e),r}const c=n(tm,rm,nm,$f,im,om,em),d=t.forwardRef((function(e,n){var d,u,A,h,p,f;const m=i(),g=wa(r(e));!function(e,t){const n=[];void 0!==e.item&&(delete e.item,n.push("item")),void 0!==e.zeroMinWidth&&(delete e.zeroMinWidth,n.push("zeroMinWidth")),t.keys.forEach((t=>{void 0!==e[t]&&(n.push(t),delete e[t])}))}(g,m.breakpoints);const{className:v,children:y,columns:b=12,container:E=!1,component:w="div",direction:_="row",wrap:S="wrap",size:C={},offset:T={},spacing:I=0,rowSpacing:R=I,columnSpacing:x=I,unstable_level:N=0}=g,O=a(g,lm),k=s(C,m.breakpoints,(e=>!1!==e)),P=s(T,m.breakpoints),B=null!==(d=e.columns)&&void 0!==d?d:N?void 0:b,L=null!==(u=e.spacing)&&void 0!==u?u:N?void 0:I,D=null!==(A=null!==(h=e.rowSpacing)&&void 0!==h?h:e.spacing)&&void 0!==A?A:N?void 0:R,U=null!==(p=null!==(f=e.columnSpacing)&&void 0!==f?f:e.spacing)&&void 0!==p?p:N?void 0:x,M=l(l({},g),{},{level:N,columns:B,container:E,direction:_,wrap:S,spacing:L,rowSpacing:D,columnSpacing:U,size:k,offset:P}),F=((e,t)=>{const{container:n,direction:r,spacing:i,wrap:a,size:s}=e;return aA({root:["root",n&&"container","wrap"!==a&&"wrap-xs-".concat(String(a)),...cm(r),...am(s),...n?sm(i,t.breakpoints.keys[0]):[]]},(e=>eA(o,e)),{})})(M,m);return(0,Tt.jsx)(c,l(l({ref:n,as:w,ownerState:M,className:Mu(F.root,v)},O),{},{children:t.Children.map(y,(e=>{var n,r;return t.isValidElement(e)&&Kf(e,["Grid"])&&E&&e.props.container?t.cloneElement(e,{unstable_level:null!==(n=null===(r=e.props)||void 0===r?void 0:r.unstable_level)&&void 0!==n?n:N+1}):e}))}))}));return d.muiName="Grid",d}({createStyledComponent:CA("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>xa({props:e,name:"MuiGrid"}),useTheme:sp});const pm=hm;function fm(e){return eA("MuiIconButton",e)}const mm=tA("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),gm=["edge","children","className","color","disabled","disableFocusRipple","size","id","loading","loadingIndicator"],vm=CA(fh,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,"default"!==n.color&&t["color".concat(mh(n.color))],n.edge&&t["edge".concat(mh(n.edge))],t["size".concat(mh(n.size))]]}})(IA((e=>{let{theme:t}=e;return{textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]}})),IA((e=>{let{theme:t}=e;return{variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n},style:{"--IconButton-hoverBg":t.vars?"rgba(".concat((t.vars||t).palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi((t.vars||t).palette[n].main,t.palette.action.hoverOpacity)}}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],["&.".concat(mm.disabled)]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},["&.".concat(mm.loading)]:{color:"transparent"}}}))),ym=CA("span",{name:"MuiIconButton",slot:"LoadingIndicator"})((e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]}})),bm=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:s="default",disabled:c=!1,disableFocusRipple:d=!1,size:u="medium",id:A,loading:h=null,loadingIndicator:p}=n,f=a(n,gm),m=dA(A),g=null!==p&&void 0!==p?p:(0,Tt.jsx)(Ph,{"aria-labelledby":m,color:"inherit",size:16}),v=l(l({},n),{},{edge:r,color:s,disabled:c,disableFocusRipple:d,loading:h,loadingIndicator:g,size:u}),y=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:o,loading:a}=e;return aA({root:["root",a&&"loading",n&&"disabled","default"!==r&&"color".concat(mh(r)),i&&"edge".concat(mh(i)),"size".concat(mh(o))],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},fm,t)})(v);return(0,Tt.jsxs)(vm,l(l({id:h?m:A,className:Mu(y.root,o),centerRipple:!0,focusRipple:!d,disabled:c||h,ref:t},f),{},{ownerState:v,children:["boolean"===typeof h&&(0,Tt.jsx)("span",{className:y.loadingWrapper,style:{display:"contents"},children:(0,Tt.jsx)(ym,{className:y.loadingIndicator,ownerState:v,children:h&&g})}),i]}))})),Em=bm,wm=Zh((0,Tt.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function _m(e){return eA("MuiChip",e)}const Sm=tA("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Cm=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled","slots","slotProps"],Tm=CA("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:i,clickable:o,onDelete:a,size:s,variant:c}=n;return[{["& .".concat(Sm.avatar)]:t.avatar},{["& .".concat(Sm.avatar)]:t["avatar".concat(mh(s))]},{["& .".concat(Sm.avatar)]:t["avatarColor".concat(mh(r))]},{["& .".concat(Sm.icon)]:t.icon},{["& .".concat(Sm.icon)]:t["icon".concat(mh(s))]},{["& .".concat(Sm.icon)]:t["iconColor".concat(mh(i))]},{["& .".concat(Sm.deleteIcon)]:t.deleteIcon},{["& .".concat(Sm.deleteIcon)]:t["deleteIcon".concat(mh(s))]},{["& .".concat(Sm.deleteIcon)]:t["deleteIconColor".concat(mh(r))]},{["& .".concat(Sm.deleteIcon)]:t["deleteIcon".concat(mh(c),"Color").concat(mh(r))]},t.root,t["size".concat(mh(s))],t["color".concat(mh(r))],o&&t.clickable,o&&"default"!==r&&t["clickableColor".concat(mh(r),")")],a&&t.deletable,a&&"default"!==r&&t["deletableColor".concat(mh(r))],t[c],t["".concat(c).concat(mh(r))]]}})(IA((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",["&.".concat(Sm.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},["& .".concat(Sm.avatar)]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:n,fontSize:t.typography.pxToRem(12)},["& .".concat(Sm.avatarColorPrimary)]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},["& .".concat(Sm.avatarColorSecondary)]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},["& .".concat(Sm.avatarSmall)]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},["& .".concat(Sm.icon)]:{marginLeft:5,marginRight:-6},["& .".concat(Sm.deleteIcon)]:{WebkitTapHighlightColor:"transparent",color:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.26)"):qi(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.4)"):qi(t.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,["& .".concat(Sm.icon)]:{fontSize:18,marginLeft:4,marginRight:-4},["& .".concat(Sm.deleteIcon)]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(gh(["contrastText"])).map((e=>{let[n]=e;return{props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText,["& .".concat(Sm.deleteIcon)]:{color:t.vars?"rgba(".concat(t.vars.palette[n].contrastTextChannel," / 0.7)"):qi(t.palette[n].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].contrastText}}}}})),{props:e=>e.iconColor===e.color,style:{["& .".concat(Sm.icon)]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:n}}},{props:e=>e.iconColor===e.color&&"default"!==e.color,style:{["& .".concat(Sm.icon)]:{color:"inherit"}}},{props:{onDelete:!0},style:{["&.".concat(Sm.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):qi(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}},...Object.entries(t.palette).filter(gh(["dark"])).map((e=>{let[n]=e;return{props:{color:n,onDelete:!0},style:{["&.".concat(Sm.focusVisible)]:{background:(t.vars||t).palette[n].dark}}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):qi(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},["&.".concat(Sm.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):qi(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(gh(["dark"])).map((e=>{let[n]=e;return{props:{color:n,clickable:!0},style:{["&:hover, &.".concat(Sm.focusVisible)]:{backgroundColor:(t.vars||t).palette[n].dark}}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?"1px solid ".concat(t.vars.palette.Chip.defaultBorder):"1px solid ".concat("light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]),["&.".concat(Sm.clickable,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(Sm.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["& .".concat(Sm.avatar)]:{marginLeft:4},["& .".concat(Sm.avatarSmall)]:{marginLeft:2},["& .".concat(Sm.icon)]:{marginLeft:4},["& .".concat(Sm.iconSmall)]:{marginLeft:2},["& .".concat(Sm.deleteIcon)]:{marginRight:5},["& .".concat(Sm.deleteIconSmall)]:{marginRight:3}}},...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{variant:"outlined",color:n},style:{color:(t.vars||t).palette[n].main,border:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / 0.7)"):qi(t.palette[n].main,.7)),["&.".concat(Sm.clickable,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi(t.palette[n].main,t.palette.action.hoverOpacity)},["&.".concat(Sm.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.focusOpacity,")"):qi(t.palette[n].main,t.palette.action.focusOpacity)},["& .".concat(Sm.deleteIcon)]:{color:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / 0.7)"):qi(t.palette[n].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].main}}}}}))]}}))),Im=CA("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t["label".concat(mh(r))]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function Rm(e){return"Backspace"===e.key||"Delete"===e.key}const xm=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiChip"}),{avatar:i,className:o,clickable:s,color:c="default",component:d,deleteIcon:u,disabled:A=!1,icon:h,label:p,onClick:f,onDelete:m,onKeyDown:g,onKeyUp:v,size:y="medium",variant:b="filled",tabIndex:E,skipFocusWhenDisabled:w=!1,slots:_={},slotProps:S={}}=r,C=a(r,Cm),T=t.useRef(null),I=NA(T,n),R=e=>{e.stopPropagation(),m&&m(e)},x=!(!1===s||!f)||s,N=x||m?fh:d||"div",O=l(l({},r),{},{component:N,disabled:A,size:y,color:c,iconColor:t.isValidElement(h)&&h.props.color||c,onDelete:!!m,clickable:x,variant:b}),k=(e=>{const{classes:t,disabled:n,size:r,color:i,iconColor:o,onDelete:a,clickable:s,variant:c}=e;return aA({root:["root",c,n&&"disabled","size".concat(mh(r)),"color".concat(mh(i)),s&&"clickable",s&&"clickableColor".concat(mh(i)),a&&"deletable",a&&"deletableColor".concat(mh(i)),"".concat(c).concat(mh(i))],label:["label","label".concat(mh(r))],avatar:["avatar","avatar".concat(mh(r)),"avatarColor".concat(mh(i))],icon:["icon","icon".concat(mh(r)),"iconColor".concat(mh(o))],deleteIcon:["deleteIcon","deleteIcon".concat(mh(r)),"deleteIconColor".concat(mh(i)),"deleteIcon".concat(mh(c),"Color").concat(mh(i))]},_m,t)})(O),P=N===fh?l({component:d||"div",focusVisibleClassName:k.focusVisible},m&&{disableRipple:!0}):{};let B=null;m&&(B=u&&t.isValidElement(u)?t.cloneElement(u,{className:Mu(u.props.className,k.deleteIcon),onClick:R}):(0,Tt.jsx)(wm,{className:k.deleteIcon,onClick:R}));let L=null;i&&t.isValidElement(i)&&(L=t.cloneElement(i,{className:Mu(k.avatar,i.props.className)}));let D=null;h&&t.isValidElement(h)&&(D=t.cloneElement(h,{className:Mu(k.icon,h.props.className)}));const U={slots:_,slotProps:S},[M,F]=uf("root",{elementType:Tm,externalForwardedProps:l(l({},U),C),ownerState:O,shouldForwardComponentProp:!0,ref:I,className:Mu(k.root,o),additionalProps:l({disabled:!(!x||!A)||void 0,tabIndex:w&&A?-1:E},P),getSlotProps:e=>l(l({},e),{},{onClick:t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e,t),f(t)},onKeyDown:t=>{var n;null===(n=e.onKeyDown)||void 0===n||n.call(e,t),(e=>{e.currentTarget===e.target&&Rm(e)&&e.preventDefault(),g&&g(e)})(t)},onKeyUp:t=>{var n;null===(n=e.onKeyUp)||void 0===n||n.call(e,t),(e=>{e.currentTarget===e.target&&m&&Rm(e)&&m(e),v&&v(e)})(t)}})}),[j,Q]=uf("label",{elementType:Im,externalForwardedProps:U,ownerState:O,className:k.label});return(0,Tt.jsxs)(M,l(l({as:N},F),{},{children:[L||D,(0,Tt.jsx)(j,l(l({},Q),{},{children:p})),B]}))})),Nm=xm;function Om(e){return eA("MuiCardContent",e)}tA("MuiCardContent",["root"]);const km=["className","component"],Pm=CA("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),Bm=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiCardContent"}),{className:r,component:i="div"}=n,o=a(n,km),s=l(l({},n),{},{component:i}),c=(e=>{const{classes:t}=e;return aA({root:["root"]},Om,t)})(s);return(0,Tt.jsx)(Pm,l({as:i,className:Mu(c.root,r),ownerState:s,ref:t},o))})),Lm=["component","direction","spacing","divider","children","className","useFlexGap"],Dm=Oo(),Um=Gf("div",{name:"MuiStack",slot:"Root"});function Mm(e){return Wf({props:e,name:"MuiStack",defaultTheme:Dm})}function Fm(e,n){const r=t.Children.toArray(e).filter(Boolean);return r.reduce(((e,i,o)=>(e.push(i),o<r.length-1&&e.push(t.cloneElement(n,{key:"separator-".concat(o)})),e)),[])}const jm=e=>{let{ownerState:t,theme:n}=e,r=l({display:"flex",flexDirection:"column"},Rr({theme:n},Or({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=Hr(n),i=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),o=Or({values:t.direction,base:i}),a=Or({values:t.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach(((e,t,n)=>{if(!o[e]){const r=t>0?o[n[t-1]]:"column";o[e]=r}}));r=_r(r,Rr({theme:n},a,((n,r)=>{return t.useFlexGap?{gap:zr(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((i=r?o[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]))]:zr(e,n)}};var i})))}return r=function(e){const t=xr(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=[t,...r].reduce(((e,t)=>_r(e,t)),{});return Nr(Object.keys(t),o)}(n.breakpoints,r),r};const Qm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=Um,useThemeProps:r=Mm,componentName:i="MuiStack"}=e,o=n(jm),s=t.forwardRef((function(e,t){const n=wa(r(e)),{component:s="div",direction:c="column",spacing:d=0,divider:u,children:A,className:h,useFlexGap:p=!1}=n,f=a(n,Lm),m={direction:c,spacing:d,useFlexGap:p},g=aA({root:["root"]},(e=>eA(i,e)),{});return(0,Tt.jsx)(o,l(l({as:s,ownerState:m,ref:t,className:Mu(g.root,h)},f),{},{children:u?Fm(A,u):A}))}));return s}({createStyledComponent:CA("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>xa({props:e,name:"MuiStack"})}),Vm=Qm,Hm={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function zm(e){const{controlled:n,default:r,name:i,state:o="value"}=e,{current:a}=t.useRef(void 0!==n),[s,c]=t.useState(r);return[a?n:s,t.useCallback((e=>{a||c(e)}),[])]}const Km=zm,Gm=Zh((0,Tt.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),Wm=Zh((0,Tt.jsx)("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}));function qm(e){return eA("MuiRating",e)}const Ym=tA("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),Xm=["value"],Jm=["component","className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value","slots","slotProps"];function Zm(e,t){if(null==e)return e;const n=Math.round(e/t)*t;return Number(n.toFixed(function(e){const t=e.toString().split(".")[1];return t?t.length:0}(t)))}const $m=CA("span",{name:"MuiRating",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(Ym.visuallyHidden)]:t.visuallyHidden},t.root,t["size".concat(mh(n.size))],n.readOnly&&t.readOnly]}})(IA((e=>{let{theme:t}=e;return{display:"inline-flex",position:"relative",fontSize:t.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",width:"min-content",WebkitTapHighlightColor:"transparent",["&.".concat(Ym.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},["&.".concat(Ym.focusVisible," .").concat(Ym.iconActive)]:{outline:"1px solid #999"},["& .".concat(Ym.visuallyHidden)]:Hm,variants:[{props:{size:"small"},style:{fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{fontSize:t.typography.pxToRem(30)}},{props:e=>{let{ownerState:t}=e;return t.readOnly},style:{pointerEvents:"none"}}]}}))),eg=CA("label",{name:"MuiRating",slot:"Label",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.label,n.emptyValueFocused&&t.labelEmptyValueActive]}})({cursor:"inherit",variants:[{props:e=>{let{ownerState:t}=e;return t.emptyValueFocused},style:{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"}}]}),tg=CA("span",{name:"MuiRating",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.iconEmpty&&t.iconEmpty,n.iconFilled&&t.iconFilled,n.iconHover&&t.iconHover,n.iconFocus&&t.iconFocus,n.iconActive&&t.iconActive]}})(IA((e=>{let{theme:t}=e;return{display:"flex",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),pointerEvents:"none",variants:[{props:e=>{let{ownerState:t}=e;return t.iconActive},style:{transform:"scale(1.2)"}},{props:e=>{let{ownerState:t}=e;return t.iconEmpty},style:{color:(t.vars||t).palette.action.disabled}}]}}))),ng=CA("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:e=>uA(e)&&"iconActive"!==e,overridesResolver:(e,t)=>{const{iconActive:n}=e;return[t.decimal,n&&t.iconActive]}})({position:"relative",variants:[{props:e=>{let{iconActive:t}=e;return t},style:{transform:"scale(1.2)"}}]});function rg(e){const{value:t}=e,n=a(e,Xm);return(0,Tt.jsx)("span",l({},n))}function ig(e){const{classes:n,disabled:r,emptyIcon:i,focus:o,getLabelText:a,highlightSelectedOnly:s,hover:c,icon:d,IconContainerComponent:u,isActive:A,itemValue:h,labelProps:p,name:f,onBlur:m,onChange:g,onClick:v,onFocus:y,readOnly:b,ownerState:E,ratingValue:w,ratingValueRounded:_,slots:S={},slotProps:C={}}=e,T=s?h===w:h<=w,I=h<=c,R=h<=o,x=h===_,N="".concat(f,"-").concat(dA()),O={slots:S,slotProps:C},[k,P]=uf("icon",{elementType:tg,className:Mu(n.icon,T?n.iconFilled:n.iconEmpty,I&&n.iconHover,R&&n.iconFocus,A&&n.iconActive),externalForwardedProps:O,ownerState:l(l({},E),{},{iconEmpty:!T,iconFilled:T,iconHover:I,iconFocus:R,iconActive:A}),additionalProps:{value:h},internalForwardedProps:{as:u}}),[B,L]=uf("label",{elementType:eg,externalForwardedProps:O,ownerState:l(l({},E),{},{emptyValueFocused:void 0}),additionalProps:{style:null===p||void 0===p?void 0:p.style,htmlFor:N}}),D=(0,Tt.jsx)(k,l(l({},P),{},{children:i&&!T?i:d}));return b?(0,Tt.jsx)("span",l(l({},p),{},{children:D})):(0,Tt.jsxs)(t.Fragment,{children:[(0,Tt.jsxs)(B,l(l({},L),{},{children:[D,(0,Tt.jsx)("span",{className:n.visuallyHidden,children:a(h)})]})),(0,Tt.jsx)("input",{className:n.visuallyHidden,onFocus:y,onBlur:m,onChange:g,onClick:v,disabled:r,value:h,id:N,type:"radio",name:f,checked:x})]})}const og=(0,Tt.jsx)(Gm,{fontSize:"inherit"}),ag=(0,Tt.jsx)(Wm,{fontSize:"inherit"});function sg(e){return"".concat(e||"0"," Star").concat(1!==e?"s":"")}const cg=t.forwardRef((function(e,n){const r=xa({name:"MuiRating",props:e}),{component:i="span",className:o,defaultValue:s=null,disabled:c=!1,emptyIcon:d=ag,emptyLabelText:u="Empty",getLabelText:A=sg,highlightSelectedOnly:h=!1,icon:p=og,IconContainerComponent:f=rg,max:m=5,name:g,onChange:v,onChangeActive:y,onMouseLeave:b,onMouseMove:E,precision:w=1,readOnly:_=!1,size:S="medium",value:C,slots:T={},slotProps:I={}}=r,R=a(r,Jm),x=dA(g),[N,O]=Km({controlled:C,default:s,name:"Rating"}),k=Zm(N,w),P=ar(),[{hover:B,focus:L},D]=t.useState({hover:-1,focus:-1});let U=k;-1!==B&&(U=B),-1!==L&&(U=L);const[M,F]=t.useState(!1),j=t.useRef(),Q=NA(j,n),V=e=>{let t=""===e.target.value?null:parseFloat(e.target.value);-1!==B&&(t=B),O(t),v&&v(e,t)},H=e=>{0===e.clientX&&0===e.clientY||(D({hover:-1,focus:-1}),O(null),v&&parseFloat(e.target.value)===k&&v(e,null))},z=e=>{RA(e.target)&&F(!0);const t=parseFloat(e.target.value);D((e=>({hover:e.hover,focus:t})))},K=e=>{if(-1!==B)return;RA(e.target)||F(!1);D((e=>({hover:e.hover,focus:-1})))},[G,W]=t.useState(!1),q=l(l({},r),{},{component:i,defaultValue:s,disabled:c,emptyIcon:d,emptyLabelText:u,emptyValueFocused:G,focusVisible:M,getLabelText:A,icon:p,IconContainerComponent:f,max:m,precision:w,readOnly:_,size:S}),Y=(e=>{const{classes:t,size:n,readOnly:r,disabled:i,emptyValueFocused:o,focusVisible:a}=e;return aA({root:["root","size".concat(mh(n)),i&&"disabled",a&&"focusVisible",r&&"readOnly"],label:["label","pristine"],labelEmptyValue:[o&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]},qm,t)})(q),X={slots:T,slotProps:I},[J,Z]=uf("root",{ref:Q,className:Mu(Y.root,o),elementType:$m,externalForwardedProps:l(l(l({},X),R),{},{component:i}),getSlotProps:e=>l(l({},e),{},{onMouseMove:t=>{var n;(e=>{E&&E(e);const t=j.current,{right:n,left:r,width:i}=t.getBoundingClientRect();let o;o=P?(n-e.clientX)/i:(e.clientX-r)/i;let a=Zm(m*o+w/2,w);a=Qi(a,w,m),D((e=>e.hover===a&&e.focus===a?e:{hover:a,focus:a})),F(!1),y&&B!==a&&y(e,a)})(t),null===(n=e.onMouseMove)||void 0===n||n.call(e,t)},onMouseLeave:t=>{var n;(e=>{b&&b(e),D({hover:-1,focus:-1}),y&&-1!==B&&y(e,-1)})(t),null===(n=e.onMouseLeave)||void 0===n||n.call(e,t)}}),ownerState:q,additionalProps:{role:_?"img":null,"aria-label":_?A(U):null}}),[$,ee]=uf("label",{className:Mu(Y.label,Y.labelEmptyValue),elementType:eg,externalForwardedProps:X,ownerState:q}),[te,ne]=uf("decimal",{className:Y.decimal,elementType:ng,externalForwardedProps:X,ownerState:q});return(0,Tt.jsxs)(J,l(l({},Z),{},{children:[Array.from(new Array(m)).map(((e,n)=>{const r=n+1,i={classes:Y,disabled:c,emptyIcon:d,focus:L,getLabelText:A,highlightSelectedOnly:h,hover:B,icon:p,IconContainerComponent:f,name:x,onBlur:K,onChange:V,onClick:H,onFocus:z,ratingValue:U,ratingValueRounded:k,readOnly:_,ownerState:q,slots:T,slotProps:I},o=r===Math.ceil(U)&&(-1!==B||-1!==L);if(w<1){const e=Array.from(new Array(1/w));return(0,t.createElement)(te,l(l({},ne),{},{key:r,className:Mu(ne.className,o&&Y.iconActive),iconActive:o}),e.map(((t,n)=>{const o=Zm(r-1+(n+1)*w,w);return(0,Tt.jsx)(ig,l(l({},i),{},{isActive:!1,itemValue:o,labelProps:{style:e.length-1===n?{}:{width:o===U?"".concat((n+1)*w*100,"%"):"0%",overflow:"hidden",position:"absolute"}}}),o)})))}return(0,Tt.jsx)(ig,l(l({},i),{},{isActive:o,itemValue:r}),r)})),!_&&!c&&(0,Tt.jsxs)($,l(l({},ee),{},{children:[(0,Tt.jsx)("input",{className:Y.visuallyHidden,value:"",id:"".concat(x,"-empty"),type:"radio",name:x,checked:null==k,onFocus:()=>W(!0),onBlur:()=>W(!1),onChange:V}),(0,Tt.jsx)("span",{className:Y.visuallyHidden,children:u})]}))]}))})),lg=cg;function dg(e){return eA("MuiCardActions",e)}tA("MuiCardActions",["root","spacing"]);const ug=["disableSpacing","className"],Ag=CA("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),hg=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:i}=n,o=a(n,ug),s=l(l({},n),{},{disableSpacing:r}),c=(e=>{const{classes:t,disableSpacing:n}=e;return aA({root:["root",!n&&"spacing"]},dg,t)})(s);return(0,Tt.jsx)(Ag,l({className:Mu(c.root,i),ownerState:s,ref:t},o))}));function pg(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function fg(e){return parseFloat(e)}function mg(e){return eA("MuiSkeleton",e)}tA("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const gg=["animation","className","component","height","style","variant","width"];var vg,yg,bg,Eg;const wg=xi(vg||(vg=DA(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"]))),_g=xi(yg||(yg=DA(["\n  0% {\n    transform: translateX(-100%);\n  }\n\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n\n  100% {\n    transform: translateX(100%);\n  }\n"]))),Sg="string"!==typeof wg?Ri(bg||(bg=DA(["\n        animation: "," 2s ease-in-out 0.5s infinite;\n      "])),wg):null,Cg="string"!==typeof _g?Ri(Eg||(Eg=DA(["\n        &::after {\n          animation: "," 2s linear 0.5s infinite;\n        }\n      "])),_g):null,Tg=CA("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!1!==n.animation&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})(IA((e=>{let{theme:t}=e;const n=pg(t.shape.borderRadius)||"px",r=fg(t.shape.borderRadius);return{display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:qi(t.palette.text.primary,"light"===t.palette.mode?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:"".concat(r).concat(n,"/").concat(Math.round(r/.6*10)/10).concat(n),"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:e=>{let{ownerState:t}=e;return t.hasChildren},style:{"& > *":{visibility:"hidden"}}},{props:e=>{let{ownerState:t}=e;return t.hasChildren&&!t.width},style:{maxWidth:"fit-content"}},{props:e=>{let{ownerState:t}=e;return t.hasChildren&&!t.height},style:{height:"auto"}},{props:{animation:"pulse"},style:Sg||{animation:"".concat(wg," 2s ease-in-out 0.5s infinite")}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:"linear-gradient(\n                90deg,\n                transparent,\n                ".concat((t.vars||t).palette.action.hover,",\n                transparent\n              )"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:Cg||{"&::after":{animation:"".concat(_g," 2s linear 0.5s infinite")}}}]}}))),Ig=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiSkeleton"}),{animation:r="pulse",className:i,component:o="span",height:s,style:c,variant:d="text",width:u}=n,A=a(n,gg),h=l(l({},n),{},{animation:r,component:o,variant:d,hasChildren:Boolean(A.children)}),p=(e=>{const{classes:t,variant:n,animation:r,hasChildren:i,width:o,height:a}=e;return aA({root:["root",n,r,i&&"withChildren",i&&!o&&"fitContent",i&&!a&&"heightAuto"]},mg,t)})(h);return(0,Tt.jsx)(Tg,l(l({as:o,ref:t,className:Mu(p.root,i),ownerState:h},A),{},{style:l({width:u,height:s},c)}))})),Rg=Ig,xg=["className","component","disableGutters","fixed","maxWidth","classes"],Ng=Oo(),Og=Gf("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat(yr(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),kg=e=>Wf({props:e,name:"MuiContainer",defaultTheme:Ng});const Pg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=Og,useThemeProps:r=kg,componentName:i="MuiContainer"}=e,o=n((e=>{let{theme:t,ownerState:n}=e;return l({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:"".concat(i).concat(t.breakpoints.unit)}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return l(l({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}}),n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}})})),s=t.forwardRef((function(e,t){const n=r(e),{className:s,component:c="div",disableGutters:d=!1,fixed:u=!1,maxWidth:A="lg",classes:h}=n,p=a(n,xg),f=l(l({},n),{},{component:c,disableGutters:d,fixed:u,maxWidth:A}),m=((e,t)=>{const{classes:n,fixed:r,disableGutters:i,maxWidth:o}=e;return aA({root:["root",o&&"maxWidth".concat(yr(String(o))),r&&"fixed",i&&"disableGutters"]},(e=>eA(t,e)),n)})(f,i);return(0,Tt.jsx)(o,l({as:c,ownerState:f,className:Mu(m.root,s),ref:t},p))}));return s}({createStyledComponent:CA("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat(mh(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>xa({props:e,name:"MuiContainer"})}),Bg=Pg,Lg=["onChange","maxRows","minRows","style","value"];function Dg(e){return parseInt(e,10)||0}const Ug={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function Mg(e){return function(e){for(const t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}const Fg=t.forwardRef((function(e,n){const{onChange:r,maxRows:i,minRows:o=1,style:s,value:c}=e,d=a(e,Lg),{current:u}=t.useRef(null!=c),A=t.useRef(null),h=xA(n,A),p=t.useRef(null),f=t.useRef(null),m=t.useCallback((()=>{const t=A.current,n=f.current;if(!t||!n)return;const r=Gp(t).getComputedStyle(t);if("0px"===r.width)return{outerHeightStyle:0,overflowing:!1};n.style.width=r.width,n.value=t.value||e.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const a=r.boxSizing,s=Dg(r.paddingBottom)+Dg(r.paddingTop),c=Dg(r.borderBottomWidth)+Dg(r.borderTopWidth),l=n.scrollHeight;n.value="x";const d=n.scrollHeight;let u=l;o&&(u=Math.max(Number(o)*d,u)),i&&(u=Math.min(Number(i)*d,u)),u=Math.max(u,d);return{outerHeightStyle:u+("border-box"===a?s+c:0),overflowing:Math.abs(u-l)<=1}}),[i,o,e.placeholder]),g=OA((()=>{const e=A.current,t=m();if(!e||!t||Mg(t))return!1;const n=t.outerHeightStyle;return null!=p.current&&p.current!==n})),v=t.useCallback((()=>{const e=A.current,t=m();if(!e||!t||Mg(t))return;const n=t.outerHeightStyle;p.current!==n&&(p.current=n,e.style.height="".concat(n,"px")),e.style.overflow=t.overflowing?"hidden":""}),[m]),y=t.useRef(-1);Oi((()=>{const e=Qp(v),t=null===A||void 0===A?void 0:A.current;if(!t)return;const n=Gp(t);let r;return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(r=new ResizeObserver((()=>{g()&&(r.unobserve(t),cancelAnimationFrame(y.current),v(),y.current=requestAnimationFrame((()=>{r.observe(t)})))})),r.observe(t)),()=>{e.clear(),cancelAnimationFrame(y.current),n.removeEventListener("resize",e),r&&r.disconnect()}}),[m,v,g]),Oi((()=>{v()}));return(0,Tt.jsxs)(t.Fragment,{children:[(0,Tt.jsx)("textarea",l({value:c,onChange:e=>{u||v();const t=e.target,n=t.value.length,i=t.value.endsWith("\n"),o=t.selectionStart===n;i&&o&&t.setSelectionRange(n,n),r&&r(e)},ref:h,rows:o,style:s},d)),(0,Tt.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:l(l(l({},Ug),s),{},{paddingTop:0,paddingBottom:0})})]})})),jg=Fg;const Qg=function(e){return"string"===typeof e};function Vg(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const Hg=t.createContext(void 0);function zg(){return t.useContext(Hg)}function Kg(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Gg(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Kg(e.value)&&""!==e.value||t&&Kg(e.defaultValue)&&""!==e.defaultValue)}function Wg(e){return eA("MuiInputBase",e)}const qg=tA("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Yg=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"];var Xg;const Jg=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat(mh(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Zg=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},$g=CA("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Jg})(IA((e=>{let{theme:t}=e;return l(l({},t.typography.body1),{},{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(qg.disabled)]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"4px 0 5px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"100%"}}]})}))),ev=CA("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Zg})(IA((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=l(l({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5}),{},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},o=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(qg.formControl," &")]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus::-ms-input-placeholder":o},["&.".concat(qg.disabled)]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInjectingGlobalStyles},style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}}))),tv=Ra({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),nv=t.forwardRef((function(e,n){var r;const i=xa({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:s,autoFocus:c,className:d,color:u,components:A={},componentsProps:h={},defaultValue:p,disabled:f,disableInjectingGlobalStyles:m,endAdornment:g,error:v,fullWidth:y=!1,id:b,inputComponent:E="input",inputProps:w={},inputRef:_,margin:S,maxRows:C,minRows:T,multiline:I=!1,name:R,onBlur:x,onChange:N,onClick:O,onFocus:k,onKeyDown:P,onKeyUp:B,placeholder:L,readOnly:D,renderSuffix:U,rows:M,size:F,slotProps:j={},slots:Q={},startAdornment:V,type:H="text",value:z}=i,K=a(i,Yg),G=null!=w.value?w.value:z,{current:W}=t.useRef(null!=G),q=t.useRef(),Y=t.useCallback((e=>{0}),[]),X=NA(q,_,w.ref,Y),[J,Z]=t.useState(!1),$=zg();const ee=Vg({props:i,muiFormControl:$,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ee.focused=$?$.focused:J,t.useEffect((()=>{!$&&f&&J&&(Z(!1),x&&x())}),[$,f,J,x]);const te=$&&$.onFilled,ne=$&&$.onEmpty,re=t.useCallback((e=>{Gg(e)?te&&te():ne&&ne()}),[te,ne]);zp((()=>{W&&re({value:G})}),[G,re,W]);t.useEffect((()=>{re(q.current)}),[]);let ie=E,oe=w;I&&"input"===ie&&(oe=l(M?{type:void 0,minRows:M,maxRows:M}:{type:void 0,maxRows:C,minRows:T},oe),ie=jg);t.useEffect((()=>{$&&$.setAdornedStart(Boolean(V))}),[$,V]);const ae=l(l({},i),{},{color:ee.color||"primary",disabled:ee.disabled,endAdornment:g,error:ee.error,focused:ee.focused,formControl:$,fullWidth:y,hiddenLabel:ee.hiddenLabel,multiline:I,size:ee.size,startAdornment:V,type:H}),se=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:c,hiddenLabel:l,multiline:d,readOnly:u,size:A,startAdornment:h,type:p}=e;return aA({root:["root","color".concat(mh(n)),r&&"disabled",i&&"error",c&&"fullWidth",a&&"focused",s&&"formControl",A&&"medium"!==A&&"size".concat(mh(A)),d&&"multiline",h&&"adornedStart",o&&"adornedEnd",l&&"hiddenLabel",u&&"readOnly"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",d&&"inputMultiline","small"===A&&"inputSizeSmall",l&&"inputHiddenLabel",h&&"inputAdornedStart",o&&"inputAdornedEnd",u&&"readOnly"]},Wg,t)})(ae),ce=Q.root||A.Root||$g,le=j.root||h.root||{},de=Q.input||A.Input||ev;return oe=l(l({},oe),null!==(r=j.input)&&void 0!==r?r:h.input),(0,Tt.jsxs)(t.Fragment,{children:[!m&&"function"===typeof tv&&(Xg||(Xg=(0,Tt.jsx)(tv,{}))),(0,Tt.jsxs)(ce,l(l(l(l({},le),{},{ref:n,onClick:e=>{q.current&&e.currentTarget===e.target&&q.current.focus(),O&&O(e)}},K),!Qg(ce)&&{ownerState:l(l({},ae),le.ownerState)}),{},{className:Mu(se.root,le.className,d,D&&"MuiInputBase-readOnly"),children:[V,(0,Tt.jsx)(Hg.Provider,{value:null,children:(0,Tt.jsx)(de,l(l(l({"aria-invalid":ee.error,"aria-describedby":o,autoComplete:s,autoFocus:c,defaultValue:p,disabled:ee.disabled,id:b,onAnimationStart:e=>{re("mui-auto-fill-cancel"===e.animationName?q.current:{value:"x"})},name:R,placeholder:L,readOnly:D,required:ee.required,rows:M,value:G,onKeyDown:P,onKeyUp:B,type:H},oe),!Qg(de)&&{as:ie,ownerState:l(l({},ae),oe.ownerState)}),{},{ref:X,className:Mu(se.input,oe.className,D&&"MuiInputBase-readOnly"),onBlur:e=>{x&&x(e),w.onBlur&&w.onBlur(e),$&&$.onBlur?$.onBlur(e):Z(!1)},onChange:function(e){if(!W){const t=e.target||q.current;if(null==t)throw new Error(vr(1));re({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];w.onChange&&w.onChange(e,...n),N&&N(e,...n)},onFocus:e=>{k&&k(e),w.onFocus&&w.onFocus(e),$&&$.onFocus?$.onFocus(e):Z(!0)}}))}),g,U?U(l(l({},ee),{},{startAdornment:V})):null]}))]})})),rv=nv;function iv(e){return eA("MuiInput",e)}const ov=l(l({},qg),tA("MuiInput",["root","underline","input"])),av=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],sv=CA($g,{shouldForwardProp:e=>AA(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Jg(e,t),!n.disableUnderline&&t.underline]}})(IA((e=>{let{theme:t}=e;let n="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),{position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{"label + &":{marginTop:16}}},{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(ov.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(ov.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(ov.disabled,", .").concat(ov.error,"):before")]:{borderBottom:"2px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(n)}},["&.".concat(ov.disabled,":before")]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:"2px solid ".concat((t.vars||t).palette[n].main)}}}}))]}}))),cv=CA(ev,{name:"MuiInput",slot:"Input",overridesResolver:Zg})({}),lv=t.forwardRef((function(e,t){var n,r,i,o;const s=xa({props:e,name:"MuiInput"}),{disableUnderline:c=!1,components:d={},componentsProps:u,fullWidth:A=!1,inputComponent:h="input",multiline:p=!1,slotProps:f,slots:m={},type:g="text"}=s,v=a(s,av),y=(e=>{const{classes:t,disableUnderline:n}=e,r=aA({root:["root",!n&&"underline"],input:["input"]},iv,t);return l(l({},t),r)})(s),b={root:{ownerState:{disableUnderline:c}}},E=(null!==f&&void 0!==f?f:u)?_r(null!==f&&void 0!==f?f:u,b):b,w=null!==(n=null!==(r=m.root)&&void 0!==r?r:d.Root)&&void 0!==n?n:sv,_=null!==(i=null!==(o=m.input)&&void 0!==o?o:d.Input)&&void 0!==i?i:cv;return(0,Tt.jsx)(rv,l(l({slots:{root:w,input:_},slotProps:E,fullWidth:A,inputComponent:h,multiline:p,ref:t,type:g},v),{},{classes:y}))}));lv.muiName="Input";const dv=lv;function uv(e){return eA("MuiFilledInput",e)}const Av=l(l({},qg),tA("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])),hv=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],pv=CA($g,{shouldForwardProp:e=>AA(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Jg(e,t),!n.disableUnderline&&t.underline]}})(IA((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i}},["&.".concat(Av.focused)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i},["&.".concat(Av.disabled)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Av.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Av.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")"):r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Av.disabled,", .").concat(Av.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary)},["&.".concat(Av.disabled,":before")]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(gh()).map((e=>{var n;let[r]=e;return{props:{disableUnderline:!1,color:r},style:{"&::after":{borderBottom:"2px solid ".concat(null===(n=(t.vars||t).palette[r])||void 0===n?void 0:n.main)}}}})),{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:12}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:12}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"25px 12px 8px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}}]}}))),fv=CA(ev,{name:"MuiFilledInput",slot:"Input",overridesResolver:Zg})(IA((e=>{let{theme:t}=e;return l(l(l({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}}),t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}}),{},{variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]})}))),mv=t.forwardRef((function(e,t){var n,r,i,o;const s=xa({props:e,name:"MuiFilledInput"}),{disableUnderline:c=!1,components:d={},componentsProps:u,fullWidth:A=!1,hiddenLabel:h,inputComponent:p="input",multiline:f=!1,slotProps:m,slots:g={},type:v="text"}=s,y=a(s,hv),b=l(l({},s),{},{disableUnderline:c,fullWidth:A,inputComponent:p,multiline:f,type:v}),E=(e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:i,size:o,hiddenLabel:a,multiline:s}=e,c=aA({root:["root",!n&&"underline",r&&"adornedStart",i&&"adornedEnd","small"===o&&"size".concat(mh(o)),a&&"hiddenLabel",s&&"multiline"],input:["input"]},uv,t);return l(l({},t),c)})(s),w={root:{ownerState:b},input:{ownerState:b}},_=(null!==m&&void 0!==m?m:u)?_r(w,null!==m&&void 0!==m?m:u):w,S=null!==(n=null!==(r=g.root)&&void 0!==r?r:d.Root)&&void 0!==n?n:pv,C=null!==(i=null!==(o=g.input)&&void 0!==o?o:d.Input)&&void 0!==i?i:fv;return(0,Tt.jsx)(rv,l(l({slots:{root:S,input:C},slotProps:_,fullWidth:A,inputComponent:p,multiline:f,ref:t,type:v},y),{},{classes:E}))}));mv.muiName="Input";const gv=mv,vv=["children","classes","className","label","notched"];var yv;const bv=CA("fieldset",{shouldForwardProp:AA})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Ev=CA("legend",{shouldForwardProp:AA})(IA((e=>{let{theme:t}=e;return{float:"unset",width:"auto",overflow:"hidden",variants:[{props:e=>{let{ownerState:t}=e;return!t.withLabel},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:e=>{let{ownerState:t}=e;return t.withLabel},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:e=>{let{ownerState:t}=e;return t.withLabel&&t.notched},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}})));function wv(e){return eA("MuiOutlinedInput",e)}const _v=l(l({},qg),tA("MuiOutlinedInput",["root","notchedOutline","input"])),Sv=["components","fullWidth","inputComponent","label","multiline","notched","slots","slotProps","type"],Cv=CA($g,{shouldForwardProp:e=>AA(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:Jg})(IA((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,["&:hover .".concat(_v.notchedOutline)]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(_v.notchedOutline)]:{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}},["&.".concat(_v.focused," .").concat(_v.notchedOutline)]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(_v.focused," .").concat(_v.notchedOutline)]:{borderColor:(t.vars||t).palette[n].main}}}})),{props:{},style:{["&.".concat(_v.error," .").concat(_v.notchedOutline)]:{borderColor:(t.vars||t).palette.error.main},["&.".concat(_v.disabled," .").concat(_v.notchedOutline)]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:14}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:14}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"16.5px 14px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{padding:"8.5px 14px"}}]}}))),Tv=CA((function(e){const{children:t,classes:n,className:r,label:i,notched:o}=e,s=a(e,vv),c=null!=i&&""!==i,d=l(l({},e),{},{notched:o,withLabel:c});return(0,Tt.jsx)(bv,l(l({"aria-hidden":!0,className:r,ownerState:d},s),{},{children:(0,Tt.jsx)(Ev,{ownerState:d,children:c?(0,Tt.jsx)("span",{children:i}):yv||(yv=(0,Tt.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline"})(IA((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}}))),Iv=CA(ev,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Zg})(IA((e=>{let{theme:t}=e;return l(l(l({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}}),t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}}),{},{variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:0}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}}]})}))),Rv=t.forwardRef((function(e,n){var r,i,o,s;const c=xa({props:e,name:"MuiOutlinedInput"}),{components:d={},fullWidth:u=!1,inputComponent:A="input",label:h,multiline:p=!1,notched:f,slots:m={},slotProps:g={},type:v="text"}=c,y=a(c,Sv),b=(e=>{const{classes:t}=e,n=aA({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},wv,t);return l(l({},t),n)})(c),E=zg(),w=Vg({props:c,muiFormControl:E,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),_=l(l({},c),{},{color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:E,fullWidth:u,hiddenLabel:w.hiddenLabel,multiline:p,size:w.size,type:v}),S=null!==(r=null!==(i=m.root)&&void 0!==i?i:d.Root)&&void 0!==r?r:Cv,C=null!==(o=null!==(s=m.input)&&void 0!==s?s:d.Input)&&void 0!==o?o:Iv,[T,I]=uf("notchedOutline",{elementType:Tv,className:b.notchedOutline,shouldForwardComponentProp:!0,ownerState:_,externalForwardedProps:{slots:m,slotProps:g},additionalProps:{label:null!=h&&""!==h&&w.required?(0,Tt.jsxs)(t.Fragment,{children:[h,"\u2009","*"]}):h}});return(0,Tt.jsx)(rv,l(l({slots:{root:S,input:C},slotProps:g,renderSuffix:e=>(0,Tt.jsx)(T,l(l({},I),{},{notched:"undefined"!==typeof f?f:Boolean(e.startAdornment||e.filled||e.focused)})),fullWidth:u,inputComponent:A,multiline:p,ref:n,type:v},y),{},{classes:l(l({},b),{},{notchedOutline:null})}))}));Rv.muiName="Input";const xv=Rv;function Nv(e){return eA("MuiFormLabel",e)}const Ov=tA("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),kv=["children","className","color","component","disabled","error","filled","focused","required"],Pv=CA("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled]}})(IA((e=>{let{theme:t}=e;return l(l({color:(t.vars||t).palette.text.secondary},t.typography.body1),{},{lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(Ov.focused)]:{color:(t.vars||t).palette[n].main}}}})),{props:{},style:{["&.".concat(Ov.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(Ov.error)]:{color:(t.vars||t).palette.error.main}}}]})}))),Bv=CA("span",{name:"MuiFormLabel",slot:"Asterisk"})(IA((e=>{let{theme:t}=e;return{["&.".concat(Ov.error)]:{color:(t.vars||t).palette.error.main}}}))),Lv=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiFormLabel"}),{children:r,className:i,color:o,component:s="label",disabled:c,error:d,filled:u,focused:A,required:h}=n,p=a(n,kv),f=Vg({props:n,muiFormControl:zg(),states:["color","required","focused","disabled","error","filled"]}),m=l(l({},n),{},{color:f.color||"primary",component:s,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required}),g=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:a,required:s}=e;return aA({root:["root","color".concat(mh(n)),i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]},Nv,t)})(m);return(0,Tt.jsxs)(Pv,l(l({as:s,ownerState:m,className:Mu(g.root,i),ref:t},p),{},{children:[r,f.required&&(0,Tt.jsxs)(Bv,{ownerState:m,"aria-hidden":!0,className:g.asterisk,children:["\u2009","*"]})]}))})),Dv=Lv;function Uv(e){return eA("MuiInputLabel",e)}tA("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Mv=["disableAnimation","margin","shrink","variant","className"],Fv=CA(Dv,{shouldForwardProp:e=>AA(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(Ov.asterisk)]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(IA((e=>{let{theme:t}=e;return{display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:e=>{let{ownerState:t}=e;return t.shrink},style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:e=>{let{ownerState:t}=e;return!t.disableAnimation},style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"filled"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:e=>{let{variant:t,ownerState:n,size:r}=e;return"filled"===t&&n.shrink&&"small"===r},style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"outlined"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}}))),jv=t.forwardRef((function(e,t){const n=xa({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,margin:i,shrink:o,variant:s,className:c}=n,d=a(n,Mv),u=zg();let A=o;"undefined"===typeof A&&u&&(A=u.filled||u.focused||u.adornedStart);const h=Vg({props:n,muiFormControl:u,states:["size","variant","required","focused"]}),p=l(l({},n),{},{disableAnimation:r,formControl:u,shrink:A,size:h.size,variant:h.variant,required:h.required,focused:h.focused}),f=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:a,required:s}=e,c=aA({root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"medium"!==r&&"size".concat(mh(r)),a],asterisk:[s&&"asterisk"]},Uv,t);return l(l({},t),c)})(p);return(0,Tt.jsx)(Fv,l(l({"data-shrink":A,ref:t,className:Mu(f.root,c)},d),{},{ownerState:p,classes:f}))})),Qv=Kf;function Vv(e){return eA("MuiFormControl",e)}tA("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Hv=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],zv=CA("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["margin".concat(mh(n.margin))],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Kv=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiFormControl"}),{children:i,className:o,color:s="primary",component:c="div",disabled:d=!1,error:u=!1,focused:A,fullWidth:h=!1,hiddenLabel:p=!1,margin:f="none",required:m=!1,size:g="medium",variant:v="outlined"}=r,y=a(r,Hv),b=l(l({},r),{},{color:s,component:c,disabled:d,error:u,fullWidth:h,hiddenLabel:p,margin:f,required:m,size:g,variant:v}),E=(e=>{const{classes:t,margin:n,fullWidth:r}=e;return aA({root:["root","none"!==n&&"margin".concat(mh(n)),r&&"fullWidth"]},Vv,t)})(b),[w,_]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{if(!Qv(t,["Input","Select"]))return;const n=Qv(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[S,C]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{Qv(t,["Input","Select"])&&(Gg(t.props,!0)||Gg(t.props.inputProps,!0))&&(e=!0)})),e})),[T,I]=t.useState(!1);d&&T&&I(!1);const R=void 0===A||d?T:A;let x;t.useRef(!1);const N=t.useCallback((()=>{C(!0)}),[]),O=t.useCallback((()=>{C(!1)}),[]),k=t.useMemo((()=>({adornedStart:w,setAdornedStart:_,color:s,disabled:d,error:u,filled:S,focused:R,fullWidth:h,hiddenLabel:p,size:g,onBlur:()=>{I(!1)},onFocus:()=>{I(!0)},onEmpty:O,onFilled:N,registerEffect:x,required:m,variant:v})),[w,s,d,u,S,R,h,p,x,O,N,m,g,v]);return(0,Tt.jsx)(Hg.Provider,{value:k,children:(0,Tt.jsx)(zv,l(l({as:c,ownerState:b,className:Mu(E.root,o),ref:n},y),{},{children:i}))})})),Gv=Kv;function Wv(e){return eA("MuiFormHelperText",e)}const qv=tA("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),Yv=["children","className","component","disabled","error","filled","focused","margin","required","variant"];var Xv;const Jv=CA("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t["size".concat(mh(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})(IA((e=>{let{theme:t}=e;return l(l({color:(t.vars||t).palette.text.secondary},t.typography.caption),{},{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(qv.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(qv.error)]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:e=>{let{ownerState:t}=e;return t.contained},style:{marginLeft:14,marginRight:14}}]})}))),Zv=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p",disabled:s,error:c,filled:d,focused:u,margin:A,required:h,variant:p}=n,f=a(n,Yv),m=Vg({props:n,muiFormControl:zg(),states:["variant","size","disabled","error","filled","focused","required"]}),g=l(l({},n),{},{component:o,contained:"filled"===m.variant||"outlined"===m.variant,variant:m.variant,size:m.size,disabled:m.disabled,error:m.error,filled:m.filled,focused:m.focused,required:m.required});delete g.ownerState;const v=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:a,focused:s,required:c}=e;return aA({root:["root",i&&"disabled",o&&"error",r&&"size".concat(mh(r)),n&&"contained",s&&"focused",a&&"filled",c&&"required"]},Wv,t)})(g);return(0,Tt.jsx)(Jv,l(l({as:o,className:Mu(v.root,i),ref:t},f),{},{ownerState:g,children:" "===r?Xv||(Xv=(0,Tt.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):r}))})),$v=Zv;const ey=t.createContext({});function ty(e){return eA("MuiList",e)}tA("MuiList",["root","padding","dense","subheader"]);const ny=["children","className","component","dense","disablePadding","subheader"],ry=CA("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return t.subheader},style:{paddingTop:0}}]}),iy=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:c=!1,disablePadding:d=!1,subheader:u}=r,A=a(r,ny),h=t.useMemo((()=>({dense:c})),[c]),p=l(l({},r),{},{component:s,dense:c,disablePadding:d}),f=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e;return aA({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},ty,t)})(p);return(0,Tt.jsx)(ey.Provider,{value:h,children:(0,Tt.jsxs)(ry,l(l({as:s,className:Mu(f.root,o),ref:n,ownerState:p},A),{},{children:[u,i]}))})}));function oy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=e.document.documentElement.clientWidth;return e.innerWidth-t}const ay=oy,sy=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function cy(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function ly(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function dy(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join("")))}function uy(e,t,n,r,i,o){let a=!1,s=i(e,t,!!t&&n);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const t=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&dy(s,o)&&!t)return s.focus(),!0;s=i(e,s,n)}return!1}const Ay=t.forwardRef((function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:s,className:c,disabledItemsFocusable:d=!1,disableListWrap:u=!1,onKeyDown:A,variant:h="selectedMenu"}=e,p=a(e,sy),f=t.useRef(null),m=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});zp((()=>{i&&f.current.focus()}),[i]),t.useImperativeHandle(r,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!f.current.style.width;if(e.clientHeight<f.current.clientHeight&&r){const t="".concat(ay(Wp(e)),"px");f.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,f.current.style.width="calc(100% + ".concat(t,")")}return f.current}})),[]);const g=NA(f,n);let v=-1;t.Children.forEach(s,((e,n)=>{t.isValidElement(e)?(e.props.disabled||("selectedMenu"===h&&e.props.selected||-1===v)&&(v=n),v===n&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(v+=1,v>=s.length&&(v=-1))):v===n&&(v+=1,v>=s.length&&(v=-1))}));const y=t.Children.map(s,((e,n)=>{if(n===v){const n={};return o&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===h&&(n.tabIndex=0),t.cloneElement(e,n)}return e}));return(0,Tt.jsx)(iy,l(l({role:"menu",ref:g,className:c,onKeyDown:e=>{const t=f.current,n=e.key;if(e.ctrlKey||e.metaKey||e.altKey)return void(A&&A(e));const r=sf(t).activeElement;if("ArrowDown"===n)e.preventDefault(),uy(t,r,u,d,cy);else if("ArrowUp"===n)e.preventDefault(),uy(t,r,u,d,ly);else if("Home"===n)e.preventDefault(),uy(t,null,u,d,cy);else if("End"===n)e.preventDefault(),uy(t,null,u,d,ly);else if(1===n.length){const i=m.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);const s=r&&!i.repeating&&dy(r,i);i.previousKeyMatched&&(s||uy(t,r,!1,d,cy,i))?e.preventDefault():i.previousKeyMatched=!1}A&&A(e)},tabIndex:i?0:-1},p),{},{children:y}))})),hy=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function py(e){const t=[],n=[];return Array.from(e.querySelectorAll(hy)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function fy(){return!0}const my=function(e){const{children:n,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:o=!1,getTabbable:a=py,isEnabled:s=fy,open:c}=e,l=t.useRef(!1),d=t.useRef(null),u=t.useRef(null),A=t.useRef(null),h=t.useRef(null),p=t.useRef(!1),f=t.useRef(null),m=xA(Cf(n),f),g=t.useRef(null);t.useEffect((()=>{c&&f.current&&(p.current=!r)}),[r,c]),t.useEffect((()=>{if(!c||!f.current)return;const e=Kp(f.current);return f.current.contains(e.activeElement)||(f.current.hasAttribute("tabIndex")||f.current.setAttribute("tabIndex","-1"),p.current&&f.current.focus()),()=>{o||(A.current&&A.current.focus&&(l.current=!0,A.current.focus()),A.current=null)}}),[c]),t.useEffect((()=>{if(!c||!f.current)return;const e=Kp(f.current),t=t=>{g.current=t,!i&&s()&&"Tab"===t.key&&e.activeElement===f.current&&t.shiftKey&&(l.current=!0,u.current&&u.current.focus())},n=()=>{const t=f.current;if(null===t)return;if(!e.hasFocus()||!s()||l.current)return void(l.current=!1);if(t.contains(e.activeElement))return;if(i&&e.activeElement!==d.current&&e.activeElement!==u.current)return;if(e.activeElement!==h.current)h.current=null;else if(null!==h.current)return;if(!p.current)return;let n=[];if(e.activeElement!==d.current&&e.activeElement!==u.current||(n=a(f.current)),n.length>0){var r,o;const e=Boolean((null===(r=g.current)||void 0===r?void 0:r.shiftKey)&&"Tab"===(null===(o=g.current)||void 0===o?void 0:o.key)),t=n[0],i=n[n.length-1];"string"!==typeof t&&"string"!==typeof i&&(e?i.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[r,i,o,s,c,a]);const v=e=>{null===A.current&&(A.current=e.relatedTarget),p.current=!0};return(0,Tt.jsxs)(t.Fragment,{children:[(0,Tt.jsx)("div",{tabIndex:c?0:-1,onFocus:v,ref:d,"data-testid":"sentinelStart"}),t.cloneElement(n,{ref:m,onFocus:e=>{null===A.current&&(A.current=e.relatedTarget),p.current=!0,h.current=e.target;const t=n.props.onFocus;t&&t(e)}}),(0,Tt.jsx)("div",{tabIndex:c?0:-1,onFocus:v,ref:u,"data-testid":"sentinelEnd"})]})};function gy(e,t){"function"===typeof e?e(t):e&&(e.current=t)}const vy=t.forwardRef((function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[a,s]=t.useState(null),c=xA(t.isValidElement(r)?Cf(r):null,n);if(Oi((()=>{o||s(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,o]),Oi((()=>{if(a&&!o)return gy(n,a),()=>{gy(n,null)}}),[n,a,o]),o){if(t.isValidElement(r)){const e={ref:c};return t.cloneElement(r,e)}return r}return a?Tf.createPortal(r,a):a})),yy=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],by=["ownerState"],Ey={entering:{opacity:1},entered:{opacity:1}},wy=t.forwardRef((function(e,n){const r=sp(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:c,easing:d,in:u,onEnter:A,onEntered:h,onEntering:p,onExit:f,onExited:m,onExiting:g,style:v,timeout:y=i,TransitionComponent:b=Lf}=e,E=a(e,yy),w=t.useRef(null),_=NA(w,Cf(c),n),S=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},C=S(p),T=S(((e,t)=>{Df(e);const n=Uf({style:v,timeout:y,easing:d},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),A&&A(e,t)})),I=S(h),R=S(g),x=S((e=>{const t=Uf({style:v,timeout:y,easing:d},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),f&&f(e)})),N=S(m);return(0,Tt.jsx)(b,l(l({appear:s,in:u,nodeRef:w,onEnter:T,onEntered:I,onEntering:C,onExit:x,onExited:N,onExiting:R,addEndListener:e=>{o&&o(w.current,e)},timeout:y},E),{},{children:(e,n)=>{let{ownerState:r}=n,i=a(n,by);return t.cloneElement(c,l({style:l(l(l({opacity:0,visibility:"exited"!==e||u?void 0:"hidden"},Ey[e]),v),c.props.style),ref:_},i))}}))})),_y=wy;function Sy(e){return eA("MuiBackdrop",e)}tA("MuiBackdrop",["root","invisible"]);const Cy=["children","className","component","invisible","open","components","componentsProps","slotProps","slots","TransitionComponent","transitionDuration"],Ty=CA("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Iy=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiBackdrop"}),{children:r,className:i,component:o="div",invisible:s=!1,open:c,components:d={},componentsProps:u={},slotProps:A={},slots:h={},TransitionComponent:p,transitionDuration:f}=n,m=a(n,Cy),g=l(l({},n),{},{component:o,invisible:s}),v=(e=>{const{classes:t,invisible:n}=e;return aA({root:["root",n&&"invisible"]},Sy,t)})(g),y={slots:l({transition:p,root:d.Root},h),slotProps:l(l({},u),A)},[b,E]=uf("root",{elementType:Ty,externalForwardedProps:y,className:Mu(v.root,i),ownerState:g}),[w,_]=uf("transition",{elementType:_y,externalForwardedProps:y,ownerState:g});return(0,Tt.jsx)(w,l(l(l({in:c,timeout:f},m),_),{},{children:(0,Tt.jsx)(b,l(l({"aria-hidden":!0},E),{},{classes:v,ref:t,children:r}))}))}));function Ry(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}function xy(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Ny(e){return parseInt(Gp(e).getComputedStyle(e).paddingRight,10)||0}function Oy(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=!o.includes(e),n=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&xy(e,i)}))}function ky(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function Py(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=Kp(e);return t.body===e?Gp(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=oy(Gp(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(Ny(r)+e,"px");const t=Kp(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(Ny(t)+e,"px")}))}let e;if(r.parentNode instanceof DocumentFragment)e=Kp(r).body;else{const t=r.parentElement,n=Gp(r);e="HTML"===(null===t||void 0===t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const By=()=>{},Ly=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&xy(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Oy(t,e.mount,e.modalRef,r,!0);const i=ky(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=ky(this.containers,(t=>t.modals.includes(e))),r=this.containers[n];r.restore||(r.restore=Py(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=ky(this.containers,(t=>t.modals.includes(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&xy(e.modalRef,t),Oy(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&xy(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const Dy=function(e){const{container:n,disableEscapeKeyDown:r=!1,disableScrollLock:i=!1,closeAfterTransition:o=!1,onTransitionEnter:a,onTransitionExited:s,children:c,onClose:d,open:u,rootRef:A}=e,h=t.useRef({}),p=t.useRef(null),f=t.useRef(null),m=xA(f,A),[g,v]=t.useState(!u),y=function(e){return!!e&&e.props.hasOwnProperty("in")}(c);let b=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(b=!1);const E=()=>(h.current.modalRef=f.current,h.current.mount=p.current,h.current),w=()=>{Ly.mount(E(),{disableScrollLock:i}),f.current&&(f.current.scrollTop=0)},_=OA((()=>{const e=function(e){return"function"===typeof e?e():e}(n)||Kp(p.current).body;Ly.add(E(),e),f.current&&w()})),S=()=>Ly.isTopModal(E()),C=OA((e=>{p.current=e,e&&(u&&S()?w():f.current&&xy(f.current,b))})),T=t.useCallback((()=>{Ly.remove(E(),b)}),[b]);t.useEffect((()=>()=>{T()}),[T]),t.useEffect((()=>{u?_():y&&o||T()}),[u,T,y,o,_]);const I=e=>t=>{var n;null===(n=e.onKeyDown)||void 0===n||n.call(e,t),"Escape"===t.key&&229!==t.which&&S()&&(r||(t.stopPropagation(),d&&d(t,"escapeKeyDown")))},R=e=>t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e,t),t.target===t.currentTarget&&d&&d(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=Lp(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r=l(l({},n),t);return l(l({role:"presentation"},r),{},{onKeyDown:I(r),ref:m})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(l({"aria-hidden":!0},e),{},{onClick:R(e),open:u})},getTransitionProps:()=>{var e,t;return{onEnter:Ry((()=>{v(!1),a&&a()}),null!==(e=null===c||void 0===c?void 0:c.props.onEnter)&&void 0!==e?e:By),onExited:Ry((()=>{v(!0),s&&s(),o&&T()}),null!==(t=null===c||void 0===c?void 0:c.props.onExited)&&void 0!==t?t:By)}},rootRef:m,portalRef:C,isTopModal:S,exited:g,hasTransition:y}};function Uy(e){return eA("MuiModal",e)}tA("MuiModal",["root","hidden","backdrop"]);const My=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],Fy=CA("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(IA((e=>{let{theme:t}=e;return{position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:e=>{let{ownerState:t}=e;return!t.open&&t.exited},style:{visibility:"hidden"}}]}}))),jy=CA(Iy,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),Qy=t.forwardRef((function(e,n){const r=xa({name:"MuiModal",props:e}),{BackdropComponent:i=jy,BackdropProps:o,classes:s,className:c,closeAfterTransition:d=!1,children:u,container:A,component:h,components:p={},componentsProps:f={},disableAutoFocus:m=!1,disableEnforceFocus:g=!1,disableEscapeKeyDown:v=!1,disablePortal:y=!1,disableRestoreFocus:b=!1,disableScrollLock:E=!1,hideBackdrop:w=!1,keepMounted:_=!1,onClose:S,onTransitionEnter:C,onTransitionExited:T,open:I,slotProps:R={},slots:x={},theme:N}=r,O=a(r,My),k=l(l({},r),{},{closeAfterTransition:d,disableAutoFocus:m,disableEnforceFocus:g,disableEscapeKeyDown:v,disablePortal:y,disableRestoreFocus:b,disableScrollLock:E,hideBackdrop:w,keepMounted:_}),{getRootProps:P,getBackdropProps:B,getTransitionProps:L,portalRef:D,isTopModal:U,exited:M,hasTransition:F}=Dy(l(l({},k),{},{rootRef:n})),j=l(l({},k),{},{exited:M}),Q=(e=>{const{open:t,exited:n,classes:r}=e;return aA({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},Uy,r)})(j),V={};if(void 0===u.props.tabIndex&&(V.tabIndex="-1"),F){const{onEnter:e,onExited:t}=L();V.onEnter=e,V.onExited=t}const H={slots:l({root:p.Root,backdrop:p.Backdrop},x),slotProps:l(l({},f),R)},[z,K]=uf("root",{ref:n,elementType:Fy,externalForwardedProps:l(l(l({},H),O),{},{component:h}),getSlotProps:P,ownerState:j,className:Mu(c,null===Q||void 0===Q?void 0:Q.root,!j.open&&j.exited&&(null===Q||void 0===Q?void 0:Q.hidden))}),[G,W]=uf("backdrop",{ref:null===o||void 0===o?void 0:o.ref,elementType:i,externalForwardedProps:H,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:e=>B(l(l({},e),{},{onClick:t=>{null!==e&&void 0!==e&&e.onClick&&e.onClick(t)}})),className:Mu(null===o||void 0===o?void 0:o.className,null===Q||void 0===Q?void 0:Q.backdrop),ownerState:j});return _||I||F&&!M?(0,Tt.jsx)(vy,{ref:D,container:A,disablePortal:y,children:(0,Tt.jsxs)(z,l(l({},K),{},{children:[!w&&i?(0,Tt.jsx)(G,l({},W)):null,(0,Tt.jsx)(my,{disableEnforceFocus:g,disableAutoFocus:m,disableRestoreFocus:b,isEnabled:U,open:I,children:t.cloneElement(u,V)})]}))}):null})),Vy=Qy;function Hy(e){return eA("MuiPopover",e)}tA("MuiPopover",["root","paper"]);function zy(e,t){if(!e)return t;function n(e,t){const n={};return Object.keys(t).forEach((r=>{(function(e,t){const n=e.charCodeAt(2);return"o"===e[0]&&"n"===e[1]&&n>=65&&n<=90&&"function"===typeof t})(r,t[r])&&"function"===typeof e[r]&&(n[r]=function(){e[r](...arguments),t[r](...arguments)})})),n}if("function"===typeof e||"function"===typeof t)return r=>{const i="function"===typeof t?t(r):t,o="function"===typeof e?e(l(l({},r),i)):e,a=Mu(null===r||void 0===r?void 0:r.className,null===i||void 0===i?void 0:i.className,null===o||void 0===o?void 0:o.className),s=n(o,i);return l(l(l(l(l(l({},i),o),s),!!a&&{className:a}),(null===i||void 0===i?void 0:i.style)&&(null===o||void 0===o?void 0:o.style)&&{style:l(l({},i.style),o.style)}),(null===i||void 0===i?void 0:i.sx)&&(null===o||void 0===o?void 0:o.sx)&&{sx:[...Array.isArray(i.sx)?i.sx:[i.sx],...Array.isArray(o.sx)?o.sx:[o.sx]]})};const r=t,i=n(e,r),o=Mu(null===r||void 0===r?void 0:r.className,null===e||void 0===e?void 0:e.className);return l(l(l(l(l(l({},t),e),i),!!o&&{className:o}),(null===r||void 0===r?void 0:r.style)&&(null===e||void 0===e?void 0:e.style)&&{style:l(l({},r.style),e.style)}),(null===r||void 0===r?void 0:r.sx)&&(null===e||void 0===e?void 0:e.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]})}const Ky=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Gy=["slots","slotProps"];function Wy(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function qy(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function Yy(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?"".concat(e,"px"):e)).join(" ")}function Xy(e){return"function"===typeof e?e():e}const Jy=CA(Vy,{name:"MuiPopover",slot:"Root"})({}),Zy=CA(up,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),$y=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiPopover"}),{action:i,anchorEl:o,anchorOrigin:s={vertical:"top",horizontal:"left"},anchorPosition:c,anchorReference:d="anchorEl",children:u,className:A,container:h,elevation:p=8,marginThreshold:f=16,open:m,PaperProps:g={},slots:v={},slotProps:y={},transformOrigin:b={vertical:"top",horizontal:"left"},TransitionComponent:E,transitionDuration:w="auto",TransitionProps:_={},disableScrollLock:S=!1}=r,C=a(r,Ky),T=t.useRef(),I=l(l({},r),{},{anchorOrigin:s,anchorReference:d,elevation:p,marginThreshold:f,transformOrigin:b,TransitionComponent:E,transitionDuration:w,TransitionProps:_}),R=(e=>{const{classes:t}=e;return aA({root:["root"],paper:["paper"]},Hy,t)})(I),x=t.useCallback((()=>{if("anchorPosition"===d)return c;const e=Xy(o),t=(e&&1===e.nodeType?e:sf(T.current).body).getBoundingClientRect();return{top:t.top+Wy(t,s.vertical),left:t.left+qy(t,s.horizontal)}}),[o,s.horizontal,s.vertical,c,d]),N=t.useCallback((e=>({vertical:Wy(e,b.vertical),horizontal:qy(e,b.horizontal)})),[b.horizontal,b.vertical]),O=t.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=N(t);if("none"===d)return{top:null,left:null,transformOrigin:Yy(n)};const r=x();let i=r.top-n.vertical,a=r.left-n.horizontal;const s=i+t.height,c=a+t.width,l=Wp(Xy(o)),u=l.innerHeight-f,A=l.innerWidth-f;if(null!==f&&i<f){const e=i-f;i-=e,n.vertical+=e}else if(null!==f&&s>u){const e=s-u;i-=e,n.vertical+=e}if(null!==f&&a<f){const e=a-f;a-=e,n.horizontal+=e}else if(c>A){const e=c-A;a-=e,n.horizontal+=e}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(a),"px"),transformOrigin:Yy(n)}}),[o,d,x,N,f]),[k,P]=t.useState(m),B=t.useCallback((()=>{const e=T.current;if(!e)return;const t=O(e);null!==t.top&&e.style.setProperty("top",t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,P(!0)}),[O]);t.useEffect((()=>(S&&window.addEventListener("scroll",B),()=>window.removeEventListener("scroll",B))),[o,S,B]);t.useEffect((()=>{m&&B()})),t.useImperativeHandle(i,(()=>m?{updatePosition:()=>{B()}}:null),[m,B]),t.useEffect((()=>{if(!m)return;const e=Vp((()=>{B()})),t=Wp(Xy(o));return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[o,m,B]);let L=w;const D={slots:l({transition:E},v),slotProps:l({transition:_,paper:g},y)},[U,M]=uf("transition",{elementType:zf,externalForwardedProps:D,ownerState:I,getSlotProps:e=>l(l({},e),{},{onEntering:(t,n)=>{var r;null===(r=e.onEntering)||void 0===r||r.call(e,t,n),B()},onExited:t=>{var n;null===(n=e.onExited)||void 0===n||n.call(e,t),P(!1)}}),additionalProps:{appear:!0,in:m}});"auto"!==w||U.muiSupportAuto||(L=void 0);const F=h||(o?sf(Xy(o)).body:void 0),[j,Q]=uf("root",{ref:n,elementType:Jy,externalForwardedProps:l(l({},D),C),shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:v.backdrop},slotProps:{backdrop:zy("function"===typeof y.backdrop?y.backdrop(I):y.backdrop,{invisible:!0})},container:F,open:m},ownerState:I,className:Mu(R.root,A)}),{slots:V,slotProps:H}=Q,z=a(Q,Gy),[K,G]=uf("paper",{ref:T,className:R.paper,elementType:Zy,externalForwardedProps:D,shouldForwardComponentProp:!0,additionalProps:{elevation:p,style:k?void 0:{opacity:0}},ownerState:I});return(0,Tt.jsx)(j,l(l(l({},z),!Qg(j)&&{slots:V,slotProps:H,disableScrollLock:S}),{},{children:(0,Tt.jsx)(U,l(l({},M),{},{timeout:L,children:(0,Tt.jsx)(K,l(l({},G),{},{children:u}))}))}))}));function eb(e){return eA("MuiMenu",e)}tA("MuiMenu",["root","paper","list"]);const tb=["onEntering"],nb=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],rb={vertical:"top",horizontal:"right"},ib={vertical:"top",horizontal:"left"},ob=CA($y,{shouldForwardProp:e=>AA(e)||"classes"===e,name:"MuiMenu",slot:"Root"})({}),ab=CA(Zy,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),sb=CA(Ay,{name:"MuiMenu",slot:"List"})({outline:0}),cb=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:o,className:s,disableAutoFocusItem:c=!1,MenuListProps:d={},onClose:u,open:A,PaperProps:h={},PopoverClasses:p,transitionDuration:f="auto",TransitionProps:{onEntering:m}={},variant:g="selectedMenu",slots:v={},slotProps:y={}}=r,b=a(r.TransitionProps,tb),E=a(r,nb),w=ar(),_=l(l({},r),{},{autoFocus:i,disableAutoFocusItem:c,MenuListProps:d,onEntering:m,PaperProps:h,transitionDuration:f,TransitionProps:b,variant:g}),S=(e=>{const{classes:t}=e;return aA({root:["root"],paper:["paper"],list:["list"]},eb,t)})(_),C=i&&!c&&A,T=t.useRef(null);let I=-1;t.Children.map(o,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===g&&e.props.selected||-1===I)&&(I=n))}));const R={slots:v,slotProps:l({list:d,transition:b,paper:h},y)},x=jp({elementType:v.root,externalSlotProps:y.root,ownerState:_,className:[S.root,s]}),[N,O]=uf("paper",{className:S.paper,elementType:ab,externalForwardedProps:R,shouldForwardComponentProp:!0,ownerState:_}),[k,P]=uf("list",{className:Mu(S.list,d.className),elementType:sb,shouldForwardComponentProp:!0,externalForwardedProps:R,getSlotProps:e=>l(l({},e),{},{onKeyDown:t=>{var n;(e=>{"Tab"===e.key&&(e.preventDefault(),u&&u(e,"tabKeyDown"))})(t),null===(n=e.onKeyDown)||void 0===n||n.call(e,t)}}),ownerState:_}),B="function"===typeof R.slotProps.transition?R.slotProps.transition(_):R.slotProps.transition;return(0,Tt.jsx)(ob,l(l({onClose:u,anchorOrigin:{vertical:"bottom",horizontal:w?"right":"left"},transformOrigin:w?rb:ib,slots:l({root:v.root,paper:N,backdrop:v.backdrop},v.transition&&{transition:v.transition}),slotProps:{root:x,paper:O,backdrop:"function"===typeof y.backdrop?y.backdrop(_):y.backdrop,transition:l(l({},B),{},{onEntering:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];((e,t)=>{T.current&&T.current.adjustStyleForScrollbar(e,{direction:w?"rtl":"ltr"}),m&&m(e,t)})(...n),null===B||void 0===B||null===(e=B.onEntering)||void 0===e||e.call(B,...n)}})},open:A,ref:n,transitionDuration:f,ownerState:_},E),{},{classes:p,children:(0,Tt.jsx)(k,l(l({actions:T,autoFocus:i&&(-1===I||c),autoFocusItem:C,variant:g},P),{},{children:o}))}))}));function lb(e){return eA("MuiNativeSelect",e)}const db=tA("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),ub=["className","disabled","error","IconComponent","inputRef","variant"],Ab=CA("select")((e=>{let{theme:t}=e;return{MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},["&.".concat(db.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:e=>{let{ownerState:t}=e;return"filled"!==t.variant&&"outlined"!==t.variant},style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]}})),hb=CA(Ab,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:AA,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{["&.".concat(db.multiple)]:t.multiple}]}})({}),pb=CA("svg")((e=>{let{theme:t}=e;return{position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,["&.".concat(db.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:e=>{let{ownerState:t}=e;return t.open},style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]}})),fb=CA(pb,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(mh(n.variant))],n.open&&t.iconOpen]}})({}),mb=t.forwardRef((function(e,n){const{className:r,disabled:i,error:o,IconComponent:s,inputRef:c,variant:d="standard"}=e,u=a(e,ub),A=l(l({},e),{},{disabled:i,variant:d,error:o}),h=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:a}=e;return aA({select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon","icon".concat(mh(n)),o&&"iconOpen",r&&"disabled"]},lb,t)})(A);return(0,Tt.jsxs)(t.Fragment,{children:[(0,Tt.jsx)(hb,l({ownerState:A,className:Mu(h.select,r),disabled:i,ref:c||n},u)),e.multiple?null:(0,Tt.jsx)(fb,{as:s,ownerState:A,className:h.icon})]})})),gb=mb;function vb(e){return eA("MuiSelect",e)}const yb=tA("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),bb=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","required","SelectDisplayProps","tabIndex","type","value","variant"];var Eb;const wb=CA(Ab,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["&.".concat(yb.select)]:t.select},{["&.".concat(yb.select)]:t[n.variant]},{["&.".concat(yb.error)]:t.error},{["&.".concat(yb.multiple)]:t.multiple}]}})({["&.".concat(yb.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),_b=CA(pb,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(mh(n.variant))],n.open&&t.iconOpen]}})({}),Sb=CA("input",{shouldForwardProp:e=>uA(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Cb(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function Tb(e){return null==e||"string"===typeof e&&!e.trim()}const Ib=t.forwardRef((function(e,n){var r;const{"aria-describedby":i,"aria-label":o,autoFocus:s,autoWidth:c,children:d,className:u,defaultOpen:A,defaultValue:h,disabled:p,displayEmpty:f,error:m=!1,IconComponent:g,inputRef:v,labelId:y,MenuProps:b={},multiple:E,name:w,onBlur:_,onChange:S,onClose:C,onFocus:T,onOpen:I,open:R,readOnly:x,renderValue:N,required:O,SelectDisplayProps:k={},tabIndex:P,type:B,value:L,variant:D="standard"}=e,U=a(e,bb),[M,F]=Km({controlled:L,default:h,name:"Select"}),[j,Q]=Km({controlled:R,default:A,name:"Select"}),V=t.useRef(null),H=t.useRef(null),[z,K]=t.useState(null),{current:G}=t.useRef(null!=R),[W,q]=t.useState(),Y=NA(n,v),X=t.useCallback((e=>{H.current=e,e&&K(e)}),[]),J=null===z||void 0===z?void 0:z.parentNode;t.useImperativeHandle(Y,(()=>({focus:()=>{H.current.focus()},node:V.current,value:M})),[M]),t.useEffect((()=>{A&&j&&z&&!G&&(q(c?null:J.clientWidth),H.current.focus())}),[z,c]),t.useEffect((()=>{s&&H.current.focus()}),[s]),t.useEffect((()=>{if(!y)return;const e=sf(H.current).getElementById(y);if(e){const t=()=>{getSelection().isCollapsed&&H.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[y]);const Z=(e,t)=>{e?I&&I(t):C&&C(t),G||(q(c?null:J.clientWidth),Q(e))},$=t.Children.toArray(d),ee=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(E){n=Array.isArray(M)?M.slice():[];const t=M.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),M!==n&&(F(n),S)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:w}}),S(i,e)}E||Z(!1,t)}},te=null!==z&&j;let ne,re;delete U["aria-invalid"];const ie=[];let oe=!1,ae=!1;(Gg({value:M})||f)&&(N?ne=N(M):oe=!0);const se=$.map((e=>{if(!t.isValidElement(e))return null;let n;if(E){if(!Array.isArray(M))throw new Error(vr(2));n=M.some((t=>Cb(t,e.props.value))),n&&oe&&ie.push(e.props.children)}else n=Cb(M,e.props.value),n&&oe&&(re=e.props.children);return n&&(ae=!0),t.cloneElement(e,{"aria-selected":n?"true":"false",onClick:ee(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));oe&&(ne=E?0===ie.length?null:ie.reduce(((e,t,n)=>(e.push(t),n<ie.length-1&&e.push(", "),e)),[]):re);let ce,le=W;!c&&G&&z&&(le=J.clientWidth),ce="undefined"!==typeof P?P:p?null:0;const de=k.id||(w?"mui-component-select-".concat(w):void 0),ue=l(l({},e),{},{variant:D,value:M,open:te,error:m}),Ae=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:a}=e;return aA({select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon","icon".concat(mh(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},vb,t)})(ue),he=l(l({},b.PaperProps),null===(r=b.slotProps)||void 0===r?void 0:r.paper),pe=lA();return(0,Tt.jsxs)(t.Fragment,{children:[(0,Tt.jsx)(wb,l(l({as:"div",ref:X,tabIndex:ce,role:"combobox","aria-controls":te?pe:void 0,"aria-disabled":p?"true":void 0,"aria-expanded":te?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[y,de].filter(Boolean).join(" ")||void 0,"aria-describedby":i,"aria-required":O?"true":void 0,"aria-invalid":m?"true":void 0,onKeyDown:e=>{if(!x){[" ","ArrowUp","ArrowDown","Enter"].includes(e.key)&&(e.preventDefault(),Z(!0,e))}},onMouseDown:p||x?null:e=>{0===e.button&&(e.preventDefault(),H.current.focus(),Z(!0,e))},onBlur:e=>{!te&&_&&(Object.defineProperty(e,"target",{writable:!0,value:{value:M,name:w}}),_(e))},onFocus:T},k),{},{ownerState:ue,className:Mu(k.className,Ae.select,u),id:de,children:Tb(ne)?Eb||(Eb=(0,Tt.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):ne})),(0,Tt.jsx)(Sb,l(l({"aria-invalid":m,value:Array.isArray(M)?M.join(","):M,name:w,ref:V,"aria-hidden":!0,onChange:e=>{const t=$.find((t=>t.props.value===e.target.value));void 0!==t&&(F(t.props.value),S&&S(e,t))},tabIndex:-1,disabled:p,className:Ae.nativeInput,autoFocus:s,required:O},U),{},{ownerState:ue})),(0,Tt.jsx)(_b,{as:g,className:Ae.icon,ownerState:ue}),(0,Tt.jsx)(cb,l(l({id:"menu-".concat(w||""),anchorEl:J,open:te,onClose:e=>{Z(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},b),{},{slotProps:l(l({},b.slotProps),{},{list:l({"aria-labelledby":y,role:"listbox","aria-multiselectable":E?"true":void 0,disableListWrap:!0,id:pe},b.MenuListProps),paper:l(l({},he),{},{style:l({minWidth:le},null!=he?he.style:null)})}),children:se}))]})})),Rb=Ib,xb=Zh((0,Tt.jsx)("path",{d:"M7 10l5 5 5-5z"})),Nb=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Ob=["root"],kb={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>AA(e)&&"variant"!==e},Pb=CA(dv,kb)(""),Bb=CA(xv,kb)(""),Lb=CA(gv,kb)(""),Db=t.forwardRef((function(e,n){const r=xa({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:s={},className:c,defaultOpen:d=!1,displayEmpty:u=!1,IconComponent:A=xb,id:h,input:p,inputProps:f,label:m,labelId:g,MenuProps:v,multiple:y=!1,native:b=!1,onClose:E,onOpen:w,open:_,renderValue:S,SelectDisplayProps:C,variant:T="outlined"}=r,I=a(r,Nb),R=b?gb:Rb,x=Vg({props:r,muiFormControl:zg(),states:["variant","error"]}),N=x.variant||T,O=l(l({},r),{},{variant:N,classes:s}),k=(e=>{const{classes:t}=e,n=aA({root:["root"]},vb,t);return l(l({},t),n)})(O),{root:P}=k,B=a(k,Ob),L=p||{standard:(0,Tt.jsx)(Pb,{ownerState:O}),outlined:(0,Tt.jsx)(Bb,{label:m,ownerState:O}),filled:(0,Tt.jsx)(Lb,{ownerState:O})}[N],D=NA(n,Cf(L));return(0,Tt.jsx)(t.Fragment,{children:t.cloneElement(L,l(l(l({inputComponent:R,inputProps:l(l(l({children:o,error:x.error,IconComponent:A,variant:N,type:void 0,multiple:y},b?{id:h}:{autoWidth:i,defaultOpen:d,displayEmpty:u,labelId:g,MenuProps:v,onClose:E,onOpen:w,open:_,renderValue:S,SelectDisplayProps:l({id:h},C)}),f),{},{classes:f?_r(B,f.classes):B},p?p.props.inputProps:{})},(y&&b||u)&&"outlined"===N?{notched:!0}:{}),{},{ref:D,className:Mu(L.props.className,c,k.root)},!p&&{variant:N}),I))})}));Db.muiName="Select";const Ub=Db;function Mb(e){return eA("MuiTextField",e)}tA("MuiTextField",["root"]);const Fb=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","slots","slotProps","type","value","variant"],jb={standard:dv,filled:gv,outlined:xv},Qb=CA(Gv,{name:"MuiTextField",slot:"Root"})({}),Vb=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:s,color:c="primary",defaultValue:d,disabled:u=!1,error:A=!1,FormHelperTextProps:h,fullWidth:p=!1,helperText:f,id:m,InputLabelProps:g,inputProps:v,InputProps:y,inputRef:b,label:E,maxRows:w,minRows:_,multiline:S=!1,name:C,onBlur:T,onChange:I,onFocus:R,placeholder:x,required:N=!1,rows:O,select:k=!1,SelectProps:P,slots:B={},slotProps:L={},type:D,value:U,variant:M="outlined"}=n,F=a(n,Fb),j=l(l({},n),{},{autoFocus:i,color:c,disabled:u,error:A,fullWidth:p,multiline:S,required:N,select:k,variant:M}),Q=(e=>{const{classes:t}=e;return aA({root:["root"]},Mb,t)})(j);const V=lA(m),H=f&&V?"".concat(V,"-helper-text"):void 0,z=E&&V?"".concat(V,"-label"):void 0,K=jb[M],G={slots:B,slotProps:l({input:y,inputLabel:g,htmlInput:v,formHelperText:h,select:P},L)},W={},q=G.slotProps.inputLabel;"outlined"===M&&(q&&"undefined"!==typeof q.shrink&&(W.notched=q.shrink),W.label=E),k&&(P&&P.native||(W.id=void 0),W["aria-describedby"]=void 0);const[Y,X]=uf("root",{elementType:Qb,shouldForwardComponentProp:!0,externalForwardedProps:l(l({},G),F),ownerState:j,className:Mu(Q.root,s),ref:t,additionalProps:{disabled:u,error:A,fullWidth:p,required:N,color:c,variant:M}}),[J,Z]=uf("input",{elementType:K,externalForwardedProps:G,additionalProps:W,ownerState:j}),[$,ee]=uf("inputLabel",{elementType:jv,externalForwardedProps:G,ownerState:j}),[te,ne]=uf("htmlInput",{elementType:"input",externalForwardedProps:G,ownerState:j}),[re,ie]=uf("formHelperText",{elementType:$v,externalForwardedProps:G,ownerState:j}),[oe,ae]=uf("select",{elementType:Ub,externalForwardedProps:G,ownerState:j}),se=(0,Tt.jsx)(J,l({"aria-describedby":H,autoComplete:r,autoFocus:i,defaultValue:d,fullWidth:p,multiline:S,name:C,rows:O,maxRows:w,minRows:_,type:D,value:U,id:V,inputRef:b,onBlur:T,onChange:I,onFocus:R,placeholder:x,inputProps:ne,slots:{input:B.htmlInput?te:void 0}},Z));return(0,Tt.jsxs)(Y,l(l({},X),{},{children:[null!=E&&""!==E&&(0,Tt.jsx)($,l(l({htmlFor:V,id:z},ee),{},{children:E})),k?(0,Tt.jsx)(oe,l(l({"aria-describedby":H,id:V,labelId:z,value:U,input:se},ae),{},{children:o})):se,f&&(0,Tt.jsx)(re,l(l({id:H},ie),{},{children:f}))]}))})),Hb=Vb;function zb(e){return eA("MuiInputAdornment",e)}const Kb=tA("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),Gb=["children","className","component","disablePointerEvents","disableTypography","position","variant"];var Wb;const qb=CA("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["position".concat(mh(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})(IA((e=>{let{theme:t}=e;return{display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{["&.".concat(Kb.positionStart,"&:not(.").concat(Kb.hiddenLabel,")")]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}}))),Yb=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiInputAdornment"}),{children:i,className:o,component:s="div",disablePointerEvents:c=!1,disableTypography:d=!1,position:u,variant:A}=r,h=a(r,Gb),p=zg()||{};let f=A;A&&p.variant,p&&!f&&(f=p.variant);const m=l(l({},r),{},{hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:c,position:u,variant:f}),g=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:a}=e;return aA({root:["root",n&&"disablePointerEvents",i&&"position".concat(mh(i)),a,r&&"hiddenLabel",o&&"size".concat(mh(o))]},zb,t)})(m);return(0,Tt.jsx)(Hg.Provider,{value:null,children:(0,Tt.jsx)(qb,l(l({as:s,ownerState:m,className:Mu(g.root,o),ref:n},h),{},{children:"string"!==typeof i||d?(0,Tt.jsxs)(t.Fragment,{children:["start"===u?Wb||(Wb=(0,Tt.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):null,i]}):(0,Tt.jsx)(kp,{color:"textSecondary",children:i})}))})})),Xb=Yb;function Jb(e){return eA("MuiAlert",e)}const Zb=tA("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),$b=Zh((0,Tt.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),eE=Zh((0,Tt.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),tE=Zh((0,Tt.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),nE=Zh((0,Tt.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),rE=Zh((0,Tt.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),iE=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],oE=CA(up,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat(mh(n.color||n.severity))]]}})(IA((e=>{let{theme:t}=e;const n="light"===t.palette.mode?Xi:Zi,r="light"===t.palette.mode?Zi:Xi;return l(l({},t.typography.body2),{},{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(gh(["light"])).map((e=>{let[i]=e;return{props:{colorSeverity:i,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert["".concat(i,"Color")]:n(t.palette[i].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(i,"StandardBg")]:r(t.palette[i].light,.9),["& .".concat(Zb.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(i,"IconColor")]}:{color:t.palette[i].main}}}})),...Object.entries(t.palette).filter(gh(["light"])).map((e=>{let[r]=e;return{props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert["".concat(r,"Color")]:n(t.palette[r].light,.6),border:"1px solid ".concat((t.vars||t).palette[r].light),["& .".concat(Zb.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(r,"IconColor")]}:{color:t.palette[r].main}}}})),...Object.entries(t.palette).filter(gh(["dark"])).map((e=>{let[n]=e;return{props:{colorSeverity:n,variant:"filled"},style:l({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(n,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(n,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)})}}))]})}))),aE=CA("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),sE=CA("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),cE=CA("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),lE={success:(0,Tt.jsx)($b,{fontSize:"inherit"}),warning:(0,Tt.jsx)(eE,{fontSize:"inherit"}),error:(0,Tt.jsx)(tE,{fontSize:"inherit"}),info:(0,Tt.jsx)(nE,{fontSize:"inherit"})},dE=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiAlert"}),{action:r,children:i,className:o,closeText:s="Close",color:c,components:d={},componentsProps:u={},icon:A,iconMapping:h=lE,onClose:p,role:f="alert",severity:m="success",slotProps:g={},slots:v={},variant:y="standard"}=n,b=a(n,iE),E=l(l({},n),{},{color:c,severity:m,variant:y,colorSeverity:c||m}),w=(e=>{const{variant:t,color:n,severity:r,classes:i}=e;return aA({root:["root","color".concat(mh(n||r)),"".concat(t).concat(mh(n||r)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]},Jb,i)})(E),_={slots:l({closeButton:d.CloseButton,closeIcon:d.CloseIcon},v),slotProps:l(l({},u),g)},[S,C]=uf("root",{ref:t,shouldForwardComponentProp:!0,className:Mu(w.root,o),elementType:oE,externalForwardedProps:l(l({},_),b),ownerState:E,additionalProps:{role:f,elevation:0}}),[T,I]=uf("icon",{className:w.icon,elementType:aE,externalForwardedProps:_,ownerState:E}),[R,x]=uf("message",{className:w.message,elementType:sE,externalForwardedProps:_,ownerState:E}),[N,O]=uf("action",{className:w.action,elementType:cE,externalForwardedProps:_,ownerState:E}),[k,P]=uf("closeButton",{elementType:Em,externalForwardedProps:_,ownerState:E}),[B,L]=uf("closeIcon",{elementType:rE,externalForwardedProps:_,ownerState:E});return(0,Tt.jsxs)(S,l(l({},C),{},{children:[!1!==A?(0,Tt.jsx)(T,l(l({},I),{},{children:A||h[m]||lE[m]})):null,(0,Tt.jsx)(R,l(l({},x),{},{children:i})),null!=r?(0,Tt.jsx)(N,l(l({},O),{},{children:r})):null,null==r&&p?(0,Tt.jsx)(N,l(l({},O),{},{children:(0,Tt.jsx)(k,l(l({size:"small","aria-label":s,title:s,color:"inherit",onClick:p},P),{},{children:(0,Tt.jsx)(B,l({fontSize:"small"},L))}))})):null]}))})),uE=dE;function AE(e){return eA("MuiPagination",e)}tA("MuiPagination",["root","ul","outlined","text"]);const hE=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function pE(e){return eA("MuiPaginationItem",e)}const fE=tA("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),mE=Zh((0,Tt.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"})),gE=Zh((0,Tt.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"})),vE=Zh((0,Tt.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),yE=Zh((0,Tt.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),bE=["className","color","component","components","disabled","page","selected","shape","size","slots","slotProps","type","variant"],EE=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat(mh(n.size))],"text"===n.variant&&t["text".concat(mh(n.color))],"outlined"===n.variant&&t["outlined".concat(mh(n.color))],"rounded"===n.shape&&t.rounded,"page"===n.type&&t.page,("start-ellipsis"===n.type||"end-ellipsis"===n.type)&&t.ellipsis,("previous"===n.type||"next"===n.type)&&t.previousNext,("first"===n.type||"last"===n.type)&&t.firstLast]},wE=CA("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:EE})(IA((e=>{let{theme:t}=e;return l(l({},t.typography.body2),{},{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",["&.".concat(fE.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:{size:"small"},style:{minWidth:26,borderRadius:13,margin:"0 1px",padding:"0 4px"}},{props:{size:"large"},style:{minWidth:40,borderRadius:20,padding:"0 10px",fontSize:t.typography.pxToRem(15)}}]})}))),_E=CA(fh,{name:"MuiPaginationItem",slot:"Root",overridesResolver:EE})(IA((e=>{let{theme:t}=e;return l(l({},t.typography.body2),{},{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,["&.".concat(fE.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(fE.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(fE.selected)]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):qi(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},["&.".concat(fE.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):qi(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},["&.".concat(fE.disabled)]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}},variants:[{props:{size:"small"},style:{minWidth:26,height:26,borderRadius:13,margin:"0 1px",padding:"0 4px"}},{props:{size:"large"},style:{minWidth:40,height:40,borderRadius:20,padding:"0 10px",fontSize:t.typography.pxToRem(15)}},{props:{shape:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"outlined"},style:{border:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(fE.selected)]:{["&.".concat(fE.disabled)]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}}}},{props:{variant:"text"},style:{["&.".concat(fE.selected)]:{["&.".concat(fE.disabled)]:{color:(t.vars||t).palette.action.disabled}}}},...Object.entries(t.palette).filter(gh(["dark","contrastText"])).map((e=>{let[n]=e;return{props:{variant:"text",color:n},style:{["&.".concat(fE.selected)]:{color:(t.vars||t).palette[n].contrastText,backgroundColor:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:(t.vars||t).palette[n].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n].main}},["&.".concat(fE.focusVisible)]:{backgroundColor:(t.vars||t).palette[n].dark},["&.".concat(fE.disabled)]:{color:(t.vars||t).palette.action.disabled}}}}})),...Object.entries(t.palette).filter(gh(["light"])).map((e=>{let[n]=e;return{props:{variant:"outlined",color:n},style:{["&.".concat(fE.selected)]:{color:(t.vars||t).palette[n].main,border:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / 0.5)"):qi(t.palette[n].main,.5)),backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.activatedOpacity,")"):qi(t.palette[n].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / calc(").concat(t.vars.palette.action.activatedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):qi(t.palette[n].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(fE.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / calc(").concat(t.vars.palette.action.activatedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):qi(t.palette[n].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}}}}}))]})}))),SE=CA("div",{name:"MuiPaginationItem",slot:"Icon"})(IA((e=>{let{theme:t}=e;return{fontSize:t.typography.pxToRem(20),margin:"0 -8px",variants:[{props:{size:"small"},style:{fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{fontSize:t.typography.pxToRem(22)}}]}}))),CE=t.forwardRef((function(e,t){var n,r,i,o;const s=xa({props:e,name:"MuiPaginationItem"}),{className:c,color:d="standard",component:u,components:A={},disabled:h=!1,page:p,selected:f=!1,shape:m="circular",size:g="medium",slots:v={},slotProps:y={},type:b="page",variant:E="text"}=s,w=a(s,bE),_=l(l({},s),{},{color:d,disabled:h,selected:f,shape:m,size:g,type:b,variant:E}),S=ar(),C=(e=>{const{classes:t,color:n,disabled:r,selected:i,size:o,shape:a,type:s,variant:c}=e;return aA({root:["root","size".concat(mh(o)),c,a,"standard"!==n&&"color".concat(mh(n)),"standard"!==n&&"".concat(c).concat(mh(n)),r&&"disabled",i&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[s]],icon:["icon"]},pE,t)})(_),T={slots:{previous:null!==(n=v.previous)&&void 0!==n?n:A.previous,next:null!==(r=v.next)&&void 0!==r?r:A.next,first:null!==(i=v.first)&&void 0!==i?i:A.first,last:null!==(o=v.last)&&void 0!==o?o:A.last},slotProps:y},[I,R]=uf("previous",{elementType:vE,externalForwardedProps:T,ownerState:_}),[x,N]=uf("next",{elementType:yE,externalForwardedProps:T,ownerState:_}),[O,k]=uf("first",{elementType:mE,externalForwardedProps:T,ownerState:_}),[P,B]=uf("last",{elementType:gE,externalForwardedProps:T,ownerState:_}),L=S?{previous:"next",next:"previous",first:"last",last:"first"}[b]:b,D={previous:I,next:x,first:O,last:P}[L],U={previous:R,next:N,first:k,last:B}[L];return"start-ellipsis"===b||"end-ellipsis"===b?(0,Tt.jsx)(wE,{ref:t,ownerState:_,className:Mu(C.root,c),children:"\u2026"}):(0,Tt.jsxs)(_E,l(l({ref:t,ownerState:_,component:u,disabled:h,className:Mu(C.root,c)},w),{},{children:["page"===b&&p,D?(0,Tt.jsx)(SE,l(l({},U),{},{className:C.icon,as:D})):null]}))})),TE=CE,IE=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],RE=CA("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),xE=CA("ul",{name:"MuiPagination",slot:"Ul"})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function NE(e,t,n){return"page"===e?"".concat(n?"":"Go to ","page ").concat(t):"Go to ".concat(e," page")}const OE=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiPagination"}),{boundaryCount:r=1,className:i,color:o="standard",count:s=1,defaultPage:c=1,disabled:d=!1,getItemAriaLabel:u=NE,hideNextButton:A=!1,hidePrevButton:h=!1,onChange:p,page:f,renderItem:m=e=>(0,Tt.jsx)(TE,l({},e)),shape:g="circular",showFirstButton:v=!1,showLastButton:y=!1,siblingCount:b=1,size:E="medium",variant:w="text"}=n,_=a(n,IE),{items:S}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{boundaryCount:t=1,componentName:n="usePagination",count:r=1,defaultPage:i=1,disabled:o=!1,hideNextButton:s=!1,hidePrevButton:c=!1,onChange:d,page:u,showFirstButton:A=!1,showLastButton:h=!1,siblingCount:p=1}=e,f=a(e,hE),[m,g]=zm({controlled:u,default:i,name:n,state:"page"}),v=(e,t)=>{u||g(t),d&&d(e,t)},y=(e,t)=>{const n=t-e+1;return Array.from({length:n},((t,n)=>e+n))},b=y(1,Math.min(t,r)),E=y(Math.max(r-t+1,t+1),r),w=Math.max(Math.min(m-p,r-t-2*p-1),t+2),_=Math.min(Math.max(m+p,t+2*p+2),r-t-1),S=[...A?["first"]:[],...c?[]:["previous"],...b,...w>t+2?["start-ellipsis"]:t+1<r-t?[t+1]:[],...y(w,_),..._<r-t-1?["end-ellipsis"]:r-t>t?[r-t]:[],...E,...s?[]:["next"],...h?["last"]:[]],C=e=>{switch(e){case"first":return 1;case"previous":return m-1;case"next":return m+1;case"last":return r;default:return null}};return l({items:S.map((e=>"number"===typeof e?{onClick:t=>{v(t,e)},type:"page",page:e,selected:e===m,disabled:o,"aria-current":e===m?"page":void 0}:{onClick:t=>{v(t,C(e))},type:e,page:C(e),selected:!1,disabled:o||!e.includes("ellipsis")&&("next"===e||"last"===e?m>=r:m<=1)}))},f)}(l(l({},n),{},{componentName:"Pagination"})),C=l(l({},n),{},{boundaryCount:r,color:o,count:s,defaultPage:c,disabled:d,getItemAriaLabel:u,hideNextButton:A,hidePrevButton:h,renderItem:m,shape:g,showFirstButton:v,showLastButton:y,siblingCount:b,size:E,variant:w}),T=(e=>{const{classes:t,variant:n}=e;return aA({root:["root",n],ul:["ul"]},AE,t)})(C);return(0,Tt.jsx)(RE,l(l({"aria-label":"pagination navigation",className:Mu(T.root,i),ownerState:C,ref:t},_),{},{children:(0,Tt.jsx)(xE,{className:T.ul,ownerState:C,children:S.map(((e,t)=>(0,Tt.jsx)("li",{children:m(l(l({},e),{},{color:o,"aria-label":u(e.type,e.page,e.selected),shape:g,size:E,variant:w}))},t)))})}))})),kE=OE,PE=Zh((0,Tt.jsx)("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"})),BE=Zh([(0,Tt.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),(0,Tt.jsx)("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")]),LE=Zh((0,Tt.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"})),DE=Zh((0,Tt.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),UE=Zh((0,Tt.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),ME=Zh((0,Tt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.5 16.5v-9l7 4.5z"})),FE=Zh([(0,Tt.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,Tt.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),jE=Zh((0,Tt.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),QE=Zh((0,Tt.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),VE=Zh((0,Tt.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));const HE=new class{constructor(){this.baseURL=Fa.BASE_URL}async authenticatedRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=localStorage.getItem("accessToken"),r={Authorization:"Bearer ".concat(n),"Content-Type":"application/json"};t.body instanceof FormData&&delete r["Content-Type"];const i=l(l({},t),{},{headers:l(l({},r),t.headers)});try{const t=await fetch("".concat(this.baseURL).concat(e),i);if(!t.ok){const e=await t.text();throw new Error("HTTP ".concat(t.status,": ").concat(e))}const n=await t.text(),r=n?JSON.parse(n):{};return r.success&&void 0!==r.data?{success:!0,data:r.data,message:r.message}:r}catch(o){throw console.error("API Request failed:",o),o}}async publicRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=l(l({},t),{},{headers:l(l({},{"Content-Type":"application/json"}),t.headers)});try{const t=await fetch("".concat(this.baseURL).concat(e),n);if(!t.ok){const e=await t.text();throw new Error("HTTP ".concat(t.status,": ").concat(e))}const r=await t.text(),i=r?JSON.parse(r):{};return i.success&&void 0!==i.data?{success:!0,data:i.data,message:i.message}:i}catch(r){throw console.error("API Request failed:",r),r}}async getPublicCourses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;const r=new URLSearchParams(l(l({},e&&{title:e}),{},{pageNumber:t.toString(),pageSize:n.toString()}));return this.publicRequest("".concat(Fa.ENDPOINTS.PUBLIC_COURSES_LATEST,"?").concat(r))}async getPublicCourseById(e){return this.publicRequest(Fa.ENDPOINTS.PUBLIC_COURSE_BY_ID.replace("{courseId}",e))}async getPublicCoursesByAge(e){return this.publicRequest(Fa.ENDPOINTS.PUBLIC_COURSES_BY_AGE.replace("{ageGroup}",e))}async getPublicCoursesByType(e){return this.publicRequest(Fa.ENDPOINTS.PUBLIC_COURSES_BY_TYPE.replace("{courseType}",e))}async searchPublicCourses(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;const n=new URLSearchParams({title:e,pageNumber:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1).toString(),pageSize:t.toString()});return this.publicRequest("".concat(Fa.ENDPOINTS.PUBLIC_COURSES_SEARCH,"?").concat(n))}async getLatestCourses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;try{const n=new URLSearchParams({pageNumber:e.toString(),pageSize:t.toString()});return await this.publicRequest("".concat(Fa.ENDPOINTS.PUBLIC_COURSES_LATEST,"?").concat(n))}catch(n){try{return await this.publicRequest(Fa.ENDPOINTS.PUBLIC_COURSES_LATEST)}catch(r){return console.warn("Latest courses endpoint not available, returning empty result"),{success:!0,data:[]}}}}async getFeaturedCourses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;try{const t=new URLSearchParams({count:e.toString()});return await this.publicRequest("".concat(Fa.ENDPOINTS.PUBLIC_COURSES_FEATURED,"?").concat(t))}catch(t){try{return await this.publicRequest(Fa.ENDPOINTS.PUBLIC_COURSES_FEATURED)}catch(n){return console.warn("Featured courses endpoint not available, returning empty result"),{success:!0,data:[]}}}}async getCourses(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const t=new URLSearchParams({pageNumber:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1).toString(),pageSize:e.toString()});return this.authenticatedRequest("".concat(Fa.ENDPOINTS.COURSE_ALL,"?").concat(t))}async getCourseById(e){return this.authenticatedRequest(Fa.ENDPOINTS.COURSE_BY_ID.replace("{courseId}",e))}async createCourse(e){return this.authenticatedRequest(Fa.ENDPOINTS.COURSE_ALL,{method:"POST",body:e})}async updateCourse(e,t){return this.authenticatedRequest(Fa.ENDPOINTS.COURSE_BY_ID.replace("{courseId}",e),{method:"PUT",body:t})}async deleteCourse(e){return this.authenticatedRequest(Fa.ENDPOINTS.COURSE_BY_ID.replace("{courseId}",e),{method:"DELETE"})}async publishCourse(e){return this.authenticatedRequest(Fa.ENDPOINTS.COURSE_PUBLISH.replace("{courseId}",e),{method:"PUT"})}async unpublishCourse(e){return this.authenticatedRequest(Fa.ENDPOINTS.COURSE_UNPUBLISH.replace("{courseId}",e),{method:"PUT"})}async getChapters(){return this.authenticatedRequest(Fa.ENDPOINTS.CHAPTER_ALL)}async getChapterById(e){return this.authenticatedRequest(Fa.ENDPOINTS.CHAPTER_BY_ID.replace("{chapterId}",e))}async getChaptersByCourse(e){return(await this.authenticatedRequest(Fa.ENDPOINTS.CHAPTER_BY_COURSE.replace("{courseId}",e))).data}async createChapter(e){return this.authenticatedRequest(Fa.ENDPOINTS.CHAPTER_ALL,{method:"POST",body:JSON.stringify(e)})}async updateChapter(e,t){return this.authenticatedRequest(Fa.ENDPOINTS.CHAPTER_BY_ID.replace("{chapterId}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteChapter(e){return this.authenticatedRequest(Fa.ENDPOINTS.CHAPTER_BY_ID.replace("{chapterId}",e),{method:"DELETE"})}async getLessons(){return this.authenticatedRequest(Fa.ENDPOINTS.LESSON_ALL)}async getLessonById(e){return this.authenticatedRequest(Fa.ENDPOINTS.LESSON_BY_ID.replace("{lessonId}",e))}async getLessonsByChapter(e){return(await this.authenticatedRequest(Fa.ENDPOINTS.LESSON_BY_CHAPTER.replace("{chapterId}",e))).data}async createLesson(e){return this.authenticatedRequest(Fa.ENDPOINTS.LESSON_ALL,{method:"POST",body:JSON.stringify(e)})}async updateLesson(e,t){return this.authenticatedRequest(Fa.ENDPOINTS.LESSON_BY_ID.replace("{lessonId}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteLesson(e){return this.authenticatedRequest(Fa.ENDPOINTS.LESSON_BY_ID.replace("{lessonId}",e),{method:"DELETE"})}async getQuizzes(){return this.authenticatedRequest(Fa.ENDPOINTS.QUIZ_ALL)}async getQuizById(e){return this.authenticatedRequest(Fa.ENDPOINTS.QUIZ_BY_ID.replace("{quizId}",e))}async getQuizzesByLesson(e){return this.authenticatedRequest(Fa.ENDPOINTS.QUIZ_BY_LESSON.replace("{lessonId}",e))}async getQuizzesByCourse(e){return this.publicRequest(Fa.ENDPOINTS.QUIZ_BY_COURSE.replace("{courseId}",e))}async createQuiz(e){return this.authenticatedRequest(Fa.ENDPOINTS.QUIZ_ALL,{method:"POST",body:JSON.stringify(e)})}async updateQuiz(e,t){return this.authenticatedRequest(Fa.ENDPOINTS.QUIZ_BY_ID.replace("{quizId}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteQuiz(e){return this.authenticatedRequest(Fa.ENDPOINTS.QUIZ_BY_ID.replace("{quizId}",e),{method:"DELETE"})}async getQuestionsByQuiz(e){return this.publicRequest(Fa.ENDPOINTS.QUESTION_BY_QUIZ.replace("{quizId}",e))}async getQuestionById(e){return this.publicRequest(Fa.ENDPOINTS.QUESTION_BY_ID.replace("{questionId}",e))}async createQuestion(e){return this.authenticatedRequest(Fa.ENDPOINTS.QUESTION_ALL,{method:"POST",body:JSON.stringify(e)})}async updateQuestion(e,t){return this.authenticatedRequest(Fa.ENDPOINTS.QUESTION_BY_ID.replace("{questionId}",e),{method:"PUT",body:JSON.stringify(t)})}async deleteQuestion(e){return this.authenticatedRequest(Fa.ENDPOINTS.QUESTION_BY_ID.replace("{questionId}",e),{method:"DELETE"})}async submitQuizAnswers(e){let{quizId:t,answers:n,timeSpent:r=30,sessionId:i=null}=e;try{let e=i;if(!e){const n=await this.startQuizSession(t);if(!n.success)throw new Error("Failed to start quiz session");e=n.data.sessionId}const o=(new Date).toISOString(),a={quizId:t,sessionId:e,userAnswers:n.map((e=>({questionId:e.questionId,answerId:e.selectedAnswerId||e.answerId,isSelected:!0}))),timeSpentMinutes:r,notes:"Quiz submission",submittedAt:o};return this.authenticatedRequest(Fa.ENDPOINTS.QUIZ_RESULT_SUBMIT,{method:"POST",body:JSON.stringify(a)})}catch(o){throw console.error("Error submitting quiz:",o),o}}async getQuizResultsByQuiz(e){return this.authenticatedRequest(Fa.ENDPOINTS.QUIZ_RESULT_BY_QUIZ.replace("{quizId}",e))}async getQuizResultsByUser(e){return this.authenticatedRequest(Fa.ENDPOINTS.QUIZ_RESULT_BY_USER.replace("{userId}",e))}async addYouTubeVideo(e,t){return this.authenticatedRequest(Fa.ENDPOINTS.MEDIA_YOUTUBE_ADD.replace("{lessonId}",e),{method:"POST",body:JSON.stringify({youtubeUrl:t})})}async uploadVideo(e,t,n){const r=new FormData;return r.append("file",n),r.append("courseId",t),this.authenticatedRequest(Fa.ENDPOINTS.MEDIA_UPLOAD_VIDEO.replace("{lessonId}",e),{method:"POST",body:r})}async uploadAudio(e,t,n){const r=new FormData;return r.append("file",n),r.append("courseId",t),this.authenticatedRequest(Fa.ENDPOINTS.MEDIA_UPLOAD_AUDIO.replace("{lessonId}",e),{method:"POST",body:r})}async uploadDocument(e,t,n){const r=new FormData;return r.append("file",n),r.append("courseId",t),this.authenticatedRequest(Fa.ENDPOINTS.MEDIA_UPLOAD_DOCUMENT.replace("{lessonId}",e),{method:"POST",body:r})}async getLessonFiles(e){return this.publicRequest(Fa.ENDPOINTS.MEDIA_LESSON_FILES.replace("{lessonId}",e))}async enrollInCourse(e){return this.authenticatedRequest(Fa.ENDPOINTS.ENROLLMENT_ENROLL.replace("{courseId}",e),{method:"POST"})}async dropFromCourse(e){return this.authenticatedRequest(Fa.ENDPOINTS.ENROLLMENT_DROP.replace("{courseId}",e),{method:"DELETE"})}async completeCourse(e){return this.authenticatedRequest(Fa.ENDPOINTS.ENROLLMENT_COMPLETE.replace("{courseId}",e),{method:"PUT"})}async getAllEnrollments(){return this.authenticatedRequest(Fa.ENDPOINTS.ENROLLMENT_ALL)}async getCourseEnrollments(e){return this.authenticatedRequest(Fa.ENDPOINTS.ENROLLMENT_BY_COURSE.replace("{courseId}",e))}async getEnrollmentCount(e){return this.authenticatedRequest(Fa.ENDPOINTS.ENROLLMENT_COUNT.replace("{courseId}",e))}async updateEnrollmentStatus(e,t){return this.authenticatedRequest(Fa.ENDPOINTS.ENROLLMENT_UPDATE_STATUS.replace("{enrollmentId}",e),{method:"PUT",body:JSON.stringify({status:t})})}async deleteEnrollment(e){return this.authenticatedRequest(Fa.ENDPOINTS.ENROLLMENT_DELETE.replace("{enrollmentId}",e),{method:"DELETE"})}async getMyProgress(){try{return await this.authenticatedRequest(Fa.ENDPOINTS.PROGRESS_ALL)}catch(e){return console.warn("Progress API failed, using fallback:",e.message),{success:!1,message:"Progress data temporarily unavailable",data:null,fallback:!0}}}async getCourseProgress(e){try{return await this.authenticatedRequest(Fa.ENDPOINTS.PROGRESS_BY_COURSE.replace("{courseId}",e))}catch(t){console.warn("Course progress API failed, using enrollment status fallback:",t.message);try{const t=await this.getEnrollmentStatus(e);if(null!==t&&void 0!==t&&t.success&&t.data){const{isEnrolled:e,status:n}=t.data;let r=0,i=!1;return"Completed"===n?(r=100,i=!0):"InProgress"===n?r=50:"Enrolled"===n&&(r=0),{success:!0,data:{completionPercentage:r,isCompleted:i,status:n,fallback:!0},fallback:!0}}}catch(n){console.warn("Enrollment status fallback also failed:",n.message)}return{success:!1,message:"Progress data temporarily unavailable",data:null,fallback:!0}}}async getProgressById(e){return this.authenticatedRequest(Fa.ENDPOINTS.PROGRESS_BY_ID.replace("{progressId}",e))}async createOrUpdateProgress(e){return this.authenticatedRequest(Fa.ENDPOINTS.PROGRESS_CREATE_UPDATE,{method:"POST",body:JSON.stringify(e)})}async completeLessonProgress(e){return this.authenticatedRequest(Fa.ENDPOINTS.PROGRESS_LESSON_COMPLETE,{method:"POST",body:JSON.stringify(e)})}async updateProgress(e,t){return this.authenticatedRequest(Fa.ENDPOINTS.PROGRESS_BY_ID.replace("{progressId}",e),{method:"PUT",body:JSON.stringify(t)})}async getCourseComments(e){return this.publicRequest(Fa.ENDPOINTS.COMMENT_BY_COURSE.replace("{courseId}",e))}async getLessonComments(e){return this.publicRequest(Fa.ENDPOINTS.COMMENT_BY_LESSON.replace("{lessonId}",e))}async getChapterComments(e){return this.publicRequest(Fa.ENDPOINTS.COMMENT_BY_CHAPTER.replace("{chapterId}",e))}async getCourseReviews(e){return this.publicRequest(Fa.ENDPOINTS.REVIEW_BY_COURSE.replace("{courseId}",e))}async getQuizSessionStatus(e){return this.authenticatedRequest("/api/Quiz/".concat(e,"/session/status"))}async startQuizSession(e){return this.authenticatedRequest("/api/Quiz/".concat(e,"/start"))}async getQuizResultsByUserQuiz(e){return await this.authenticatedRequest(Fa.ENDPOINTS.QUIZ_RESULT_BY_USER_QUIZ.replace("{quizId}",e))}async getEnrollmentStatus(e){return this.authenticatedRequest(Fa.ENDPOINTS.ENROLLMENT_STATUS.replace("{courseId}",e))}async getMyEnrollments(){return this.authenticatedRequest(Fa.ENDPOINTS.ENROLLMENT_MY_ENROLLMENTS)}async isEnrolled(e){try{var t;const n=await this.getEnrollmentStatus(e);return(null===n||void 0===n?void 0:n.success)&&(null===(t=n.data)||void 0===t?void 0:t.isEnrolled)}catch(n){return console.error("Error checking enrollment:",n),!1}}},zE={BASIC_AWARENESS:1,PREVENTION:2,INTERVENTION:3,RECOVERY_SUPPORT:4,PROFESSIONAL_TRAINING:5,FAMILY_EDUCATION:6},KE={[zE.BASIC_AWARENESS]:"Basic Awareness",[zE.PREVENTION]:"Prevention",[zE.INTERVENTION]:"Intervention",[zE.RECOVERY_SUPPORT]:"Recovery Support",[zE.PROFESSIONAL_TRAINING]:"Professional Training",[zE.FAMILY_EDUCATION]:"Family Education"},GE={TEENAGERS:1,ADULTS:2},WE={[GE.TEENAGERS]:"Teenagers (15-21)",[GE.ADULTS]:"Adults (22-70)"},qE={ENROLLED:1,IN_PROGRESS:2,COMPLETED:3,DROPPED:4,SUSPENDED:5},YE={[qE.ENROLLED]:"Enrolled",[qE.IN_PROGRESS]:"In Progress",[qE.COMPLETED]:"Completed",[qE.DROPPED]:"Dropped",[qE.SUSPENDED]:"Suspended"},XE={MULTIPLE_CHOICE:1,TRUE_FALSE:2,SINGLE_SELECT:3},JE=(XE.MULTIPLE_CHOICE,XE.TRUE_FALSE,XE.SINGLE_SELECT,function(){let{Title:e="",Description:t="",CourseType:n="BasicAwareness",AgeGroup:r=2,CategoryId:i="",Image:o=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new FormData;return a.append("Title",e),t&&a.append("Description",t),a.append("CourseType",n),a.append("AgeGroup",r.toString()),i&&a.append("CategoryId",i),o&&a.append("Image",o),a}),ZE=e=>KE[e]||"Unknown",$E=e=>WE[e]||"Unknown",ew=e=>{if(e<60)return"".concat(e," ph\xfat");const t=Math.floor(e/60),n=e%60;return n>0?"".concat(t,"h ").concat(n,"m"):"".concat(t,"h")},tw=(CA(oA)((e=>{let{theme:t}=e;return{background:"linear-gradient(135deg, ".concat(t.palette.primary.main," 0%, ").concat(t.palette.primary.dark," 100%)"),minHeight:"35vh",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",marginBottom:t.spacing(4),"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="%23ffffff" fill-opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>\') repeat',opacity:.3}}})),CA(up)((e=>{let{theme:t}=e;return{padding:t.spacing(3),margin:t.spacing(0,2,4,2),borderRadius:t.spacing(2),boxShadow:t.shadows[8],background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(12px)"}})),CA(fp)((e=>{let{theme:t}=e;return{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:t.spacing(2),overflow:"hidden",position:"relative","&:hover":{transform:"translateY(-8px)",boxShadow:t.shadows[16]},"&:hover .course-overlay":{opacity:1}}}))),nw=CA(wp)((e=>{let{theme:t}=e;return{height:180,position:"relative","&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.2) 100%)"}}})),rw=CA(oA)((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.3s ease",zIndex:2}})),iw=(CA(kp)((e=>{let{theme:t}=e;return{background:"linear-gradient(45deg, ".concat(t.palette.primary.main,", ").concat(t.palette.secondary.main,")"),backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:700}})),CA(Sf)((e=>{let{theme:t}=e;return{marginBottom:t.spacing(3),"& .MuiTab-root":{minWidth:120,fontWeight:600,textTransform:"none"}}})),()=>{const e=de(),[n,r]=(he(),new URLSearchParams(e.search).get("group"),(0,t.useState)("")),[i,o]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),[u,A]=(0,t.useState)({currentPage:1,pageSize:12,totalPages:1,totalItems:0}),[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)([]);(0,t.useEffect)((()=>{g();(async()=>{try{const t=await HE.getMyProgress();if(t&&t.success&&Array.isArray(t.data))p(t.data);else if(null!==t&&void 0!==t&&t.fallback){console.log("Using enrollment fallback for progress data");try{const e=await HE.getMyEnrollments();if(e&&e.success&&Array.isArray(e.data)){m(e.data);const t=e.data.map((e=>({courseId:e.courseId,isCompleted:"Completed"===e.status,status:e.status,enrolledAt:e.enrolledAt,completeAt:e.completeAt})));p(t)}}catch(e){console.warn("Failed to load enrollments:",e),p([])}}else p([])}catch(c){console.warn("Failed to load user progress:",c);try{const e=await HE.getMyEnrollments();if(e&&e.success&&Array.isArray(e.data)){m(e.data);const t=e.data.map((e=>({courseId:e.courseId,isCompleted:"Completed"===e.status,status:e.status,enrolledAt:e.enrolledAt,completeAt:e.completeAt})));p(t)}}catch(e){console.warn("Failed to load enrollments:",e),p([])}}})()}),[u.currentPage,n]);const g=async()=>{try{s(!0),d("");const e=12,t=await HE.getPublicCourses(n.trim(),u.currentPage,e);if(t&&t.success&&t.data){let e=t.data.data||t.data.items||t.data||[];o(e),t.data.pagination&&A((n=>l(l({},n),{},{totalPages:t.data.pagination.totalPages||1,totalItems:t.data.pagination.totalItems||e.length})))}else d((null===t||void 0===t?void 0:t.message)||"Failed to load courses"),o([])}catch(rI){console.error("Error loading courses:",rI),d("Failed to load courses. Please try again."),o([])}finally{s(!1)}},v=e=>"/education/courses/".concat(e.courseId),y=e=>e.imageUrl||"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=250&fit=crop&auto=format",b=e=>{switch(e){case zE.BASIC_AWARENESS:return(0,Tt.jsx)(PE,{});case zE.PREVENTION:return(0,Tt.jsx)(BE,{});case zE.INTERVENTION:return(0,Tt.jsx)(LE,{});case zE.RECOVERY_SUPPORT:return(0,Tt.jsx)(DE,{});case zE.PROFESSIONAL_TRAINING:return(0,Tt.jsx)(UE,{});case zE.FAMILY_EDUCATION:return(0,Tt.jsx)(DE,{});default:return(0,Tt.jsx)(BE,{})}};return(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)("div",{className:"page-header secondary-bg fade-in",children:(0,Tt.jsxs)("div",{className:"container",children:[(0,Tt.jsx)("h1",{children:"Trung t\xe2m Gi\xe1o d\u1ee5c"}),(0,Tt.jsx)("p",{children:"T\xe0i nguy\xean gi\xe1o d\u1ee5c to\xe0n di\u1ec7n v\u1ec1 nh\u1eadn th\u1ee9c v\u1ec1 ma t\xfay, ph\xf2ng ch\u1ed1ng v\xe0 h\u1ed7 tr\u1ee3 ph\u1ee5c h\u1ed3i"})]})}),(0,Tt.jsxs)(Bg,{maxWidth:"xl",sx:{py:4},children:[(0,Tt.jsx)(up,{elevation:2,sx:{p:3,mb:4},children:(0,Tt.jsx)(Vm,{direction:{xs:"column",md:"row"},spacing:3,alignItems:{xs:"stretch",md:"center"},children:(0,Tt.jsx)(Hb,{placeholder:"Search courses...",value:n,onChange:e=>{r(e.target.value),A((e=>l(l({},e),{},{currentPage:1})))},InputProps:{startAdornment:(0,Tt.jsx)(Xb,{position:"start",children:(0,Tt.jsx)(QE,{})}),endAdornment:n&&(0,Tt.jsx)(Xb,{position:"end",children:(0,Tt.jsxs)(Em,{size:"small",onClick:()=>r(""),children:[" ",(0,Tt.jsx)(VE,{})," "]})})},sx:{minWidth:{xs:"100%",md:300}}})})}),c&&(0,Tt.jsx)(uE,{severity:"error",sx:{mb:3},children:c}),(0,Tt.jsx)(oA,{sx:{mb:4},children:(0,Tt.jsx)(pm,{container:!0,spacing:3,children:a?Array.from({length:6}).map(((e,t)=>(0,Tt.jsx)(pm,{size:{xs:12,sm:6,lg:4},children:(0,Tt.jsxs)(fp,{sx:{height:"100%"},children:[(0,Tt.jsx)(Rg,{variant:"rectangular",height:180}),(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsx)(Rg,{variant:"text",height:32,sx:{mb:1}}),(0,Tt.jsx)(Rg,{variant:"text",height:20,sx:{mb:2}}),(0,Tt.jsx)(Rg,{variant:"text",height:60,sx:{mb:2}}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,sx:{mb:2},children:[(0,Tt.jsx)(Rg,{variant:"rectangular",width:80,height:24}),(0,Tt.jsx)(Rg,{variant:"rectangular",width:100,height:24})]})]}),(0,Tt.jsx)(hg,{sx:{p:2},children:(0,Tt.jsx)(Rg,{variant:"rectangular",width:"100%",height:36})})]})},t))):i.length>0?i.map(((e,t)=>((e,t)=>{var n;const r=ew(e.estimatedDuration),i=e.enrollmentCount,o=e.viewCount,a=e.rating,s=null===(n=e.chapters)||void 0===n?void 0:n.length,c=e.authorName,l=e=>{if("string"===typeof e){const t=e.toLowerCase();return t.includes("nan")||t.includes("unknown")}return Number.isNaN(e)},d=h.find((t=>t.courseId===e.courseId));let u="B\u1eaft \u0111\u1ea7u h\u1ecdc",A="primary";return d&&(d.isCompleted||"Completed"===d.status?(u="\u0110\xe3 h\u1ecdc xong",A="success"):"InProgress"===d.status?(u="\u0110ang h\u1ecdc",A="warning"):"Enrolled"===d.status?(u="Ti\u1ebfp t\u1ee5c h\u1ecdc",A="info"):(u="\u0110ang h\u1ecdc",A="warning")),(0,Tt.jsx)(zf,{in:!0,timeout:300+100*t,children:(0,Tt.jsx)(pm,{size:{xs:12,sm:6,lg:4},children:(0,Tt.jsxs)(tw,{children:[(0,Tt.jsxs)(oA,{position:"relative",children:[(0,Tt.jsx)(nw,{image:y(e),title:e.title}),(0,Tt.jsx)(rw,{className:"course-overlay",children:(0,Tt.jsx)(Em,{component:ft,to:v(e),sx:{color:"white"},children:(0,Tt.jsx)(ME,{sx:{fontSize:48}})})}),!l(ZE(e.courseType))&&(0,Tt.jsx)(Nm,{icon:b(e.courseType),label:ZE(e.courseType),size:"small",sx:{position:"absolute",top:12,left:12,backgroundColor:"rgba(255, 255, 255, 0.9)",fontWeight:600}}),e.isFeatured&&(0,Tt.jsx)(Nm,{icon:(0,Tt.jsx)(UE,{}),label:"N\u1ed5i b\u1eadt",size:"small",color:"primary",sx:{position:"absolute",top:12,right:12,fontWeight:600}})]}),(0,Tt.jsxs)(Bm,{sx:{flexGrow:1,p:2.5},children:[(0,Tt.jsx)(kp,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:600,lineHeight:1.3,mb:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.title}),!l(e.description)&&(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:2,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.4},children:e.description}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:2,sx:{mb:2},children:[r&&"0 ph\xfat"!==r&&!l(r)&&(0,Tt.jsxs)(oA,{display:"flex",alignItems:"center",gap:.5,children:[(0,Tt.jsx)(FE,{fontSize:"small",color:"action"}),(0,Tt.jsx)(kp,{variant:"caption",color:"text.secondary",children:r})]}),i>0&&!l(i)&&(0,Tt.jsxs)(oA,{display:"flex",alignItems:"center",gap:.5,children:[(0,Tt.jsx)(DE,{fontSize:"small",color:"action"}),(0,Tt.jsx)(kp,{variant:"caption",color:"text.secondary",children:i})]}),o>0&&!l(o)&&(0,Tt.jsxs)(oA,{display:"flex",alignItems:"center",gap:.5,children:[(0,Tt.jsx)(jE,{fontSize:"small",color:"action"}),(0,Tt.jsx)(kp,{variant:"caption",color:"text.secondary",children:o})]})]}),"number"===typeof a&&a>0&&!l(a)&&(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",spacing:1,sx:{mb:2},children:[(0,Tt.jsx)(lg,{value:a,precision:.5,size:"small",readOnly:!0}),(0,Tt.jsxs)(kp,{variant:"caption",color:"text.secondary",children:["(",null===a||void 0===a?void 0:a.toFixed(1),")"]})]}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,sx:{mb:2},children:[e.ageGroup&&!l($E(e.ageGroup))&&(0,Tt.jsx)(Nm,{label:$E(e.ageGroup),size:"small",variant:"outlined",color:"primary"}),s>0&&!l(s)&&(0,Tt.jsx)(Nm,{icon:(0,Tt.jsx)(BE,{}),label:"".concat(s," ch\u01b0\u01a1ng"),size:"small",variant:"outlined"})]}),c&&!l(c)&&(0,Tt.jsxs)(kp,{variant:"caption",color:"text.secondary",sx:{fontStyle:"italic"},children:["b\u1edfi ",c]})]}),(0,Tt.jsx)(hg,{sx:{p:2.5,pt:0},children:(0,Tt.jsx)(Gh,{component:ft,to:v(e),variant:"contained",fullWidth:!0,startIcon:(0,Tt.jsx)(ME,{}),color:A,sx:{borderRadius:2,textTransform:"none",fontWeight:600},children:u})})]})})},e.courseId)})(e,t))):(0,Tt.jsx)(pm,{size:{xs:12},children:(0,Tt.jsxs)(up,{sx:{p:4,textAlign:"center",backgroundColor:"grey.50"},children:[(0,Tt.jsx)(PE,{sx:{fontSize:64,color:"grey.400",mb:2}}),(0,Tt.jsx)(kp,{variant:"h6",color:"text.secondary",children:"Kh\xf4ng t\xecm th\u1ea5y kh\xf3a h\u1ecdc n\xe0o"}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:"H\xe3y th\u1eed \u0111i\u1ec1u ch\u1ec9nh ti\xeau ch\xed t\xecm ki\u1ebfm"})]})})})}),i.length>0&&u.totalPages>1&&(0,Tt.jsx)(oA,{display:"flex",justifyContent:"center",sx:{mb:4},children:(0,Tt.jsx)(kE,{count:u.totalPages,page:u.currentPage,onChange:(e,t)=>{A((e=>l(l({},e),{},{currentPage:t})))},color:"primary",size:"large",showFirstButton:!0,showLastButton:!0})})]})]})}),ow=()=>{var e;const{currentUser:n,isAuthenticated:r,isConsultant:i}=ts(),[o,a]=(0,t.useState)("booking"),[s,c]=(0,t.useState)(""),[d,u]=(0,t.useState)("all"),A=e=>{if(!e)return"";if("number"===typeof e)switch(e){case 0:return"available";case 1:return"booked";case 2:return"pending";case 3:return"confirmed";case 4:return"rejected";case 5:return"cancelled";default:return"unknown"}return"string"===typeof e?e.toLowerCase():String(e).toLowerCase()},[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)([]),[g,v]=(0,t.useState)([]),[y,b]=(0,t.useState)(null),[E,w]=(0,t.useState)(null),[_,S]=(0,t.useState)(""),[C,T]=(0,t.useState)(""),[I,R]=(0,t.useState)(null),[x,N]=(0,t.useState)([]),[O,k]=(0,t.useState)(!1),[P,B]=(0,t.useState)({note:"",attachments:[]}),[L,D]=(0,t.useState)({}),[U,M]=(0,t.useState)(!1),[F,j]=(0,t.useState)(""),[Q,V]=(0,t.useState)(""),[H,z]=(0,t.useState)([]),[K,G]=(0,t.useState)([]),[W,q]=(0,t.useState)(new Date),Y=(0,t.useRef)(null),X=(0,t.useRef)(null),J=(0,t.useRef)(null);(0,t.useEffect)((()=>{r&&(ee(),Z(),i()||te()),$();const e=setInterval((()=>{q(new Date)}),6e4);return()=>clearInterval(e)}),[r,i]);const Z=async()=>{try{const e=await fetch("http://localhost:5150/api/User/consultants"),t=await e.json();t.success&&Array.isArray(t.data)&&m(t.data)}catch(rI){console.error("Error loading consultants:",rI)}},$=()=>{const e=new Date,t=[],n=[];for(let r=0;r<7;r++){const n=new Date(e);n.setDate(n.getDate()+r),t.push({date:n,formatted:ne(n),isPast:ie(n),isToday:re(n),dateString:n.toISOString().split("T")[0]})}for(let r=7;r<14;r++){const t=new Date(e);t.setDate(t.getDate()+r),n.push({date:t,formatted:ne(t),isPast:!1,isToday:!1,dateString:t.toISOString().split("T")[0]})}z(t),G(n)},ee=async()=>{M(!0);try{const t=(new Date).toISOString().split("T")[0],n=new Date(Date.now()+12096e5).toISOString().split("T")[0];let r=[];try{const e=await za.getAllAvailableSlots();if(e.success&&e.data){r=(e.data.data||e.data||[]).filter((e=>{const r=e.workDate||e.date;return r>=t&&r<=n}))}}catch(e){}if(0===r.length)try{const e=await za.searchSlots({startDate:t,endDate:n});e.success&&e.data&&(r=e.data.data||e.data||[])}catch(e){}if(0===r.length)try{const e=await za.getAvailableSlots({startDate:t,endDate:n});e.success&&e.data&&(r=e.data.data||e.data||[])}catch(e){}if(0===r.length)try{const e=await za.getPublicAvailableSlots({startDate:t,endDate:n});e.success&&e.data&&(r=e.data.data||e.data||[])}catch(e){}if(0===r.length&&i())try{const e=await za.getMySlots();if(e.success&&e.data){r=(e.data.data||e.data||[]).filter((e=>{const r=e.workDate||e.date;return r>=t&&r<=n}))}}catch(e){}if(0===r.length)try{const e=await za.getAllSlotsDebug();if(e.success&&e.data){r=(e.data.data||e.data||[]).filter((e=>{const r=e.workDate||e.date;return r>=t&&r<=n}))}}catch(e){}const o=Array.isArray(r)?r:[];p(o),0===o.length?j("No available slots found. Consultants may not have created any slots yet."):j("")}catch(rI){console.error("Error loading available slots:",rI),j("Error loading available slots: "+rI.message),p([])}finally{M(!1)}},te=async()=>{if(i())return;if(!r||!n)return void v([]);if(!localStorage.getItem("accessToken"))return v([]),void j("Please log in to view your appointments.");try{const e=await za.getMyAppointmentsWithAgoraToken();e.success?v(e.data.data||[]):e.error&&e.error.includes("401")?j("Your session has expired. Please log in again."):v([])}catch(rI){rI.message.includes("401")||rI.message.includes("403")||rI.message.includes("Unauthorized")?(v([]),j("Please log in to view your appointments.")):v([])}},ne=e=>{const t=e.toLocaleDateString("en-US",{weekday:"short"}),n=e.getDate();return"".concat(t," ").concat(n)},re=e=>{const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},ie=e=>{const t=new Date;return t.setHours(0,0,0,0),e<t},oe=e=>{if(!e)return"Unknown time";try{if(e.includes("T")){const t=new Date(e);if(t instanceof Date&&!isNaN(t))return t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}if(e.includes(":")){const t=e.split(":");if(t.length>=2){const e=parseInt(t[0]),n=parseInt(t[1]);if(!isNaN(e)&&!isNaN(n)){const t=new Date;return t.setHours(e,n,0,0),t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}}const t=new Date(e);return t instanceof Date&&!isNaN(t)?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):e}catch(t){return console.warn("Error formatting time:",e,t),e||"Unknown time"}},ae=e=>{S(e.dateString),T(""),w(null),R(null),b(null),k(!1),N([]),j("");(Array.isArray(h)?h:[]).filter((t=>{const n=t.workDate||t.date,r=n?n.split("T")[0]:null,i=0===t.status||"available"===t.status||"available"===A(t.status),o=r===e.dateString;let a=!0;if(t.startTime){const e=new Date;a=new Date(t.startTime)>=new Date(e.getTime()+108e5)}return o&&i&&a}));setTimeout((()=>{var e;null===(e=Y.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})}),100)},se=e=>{const t=(Array.isArray(h)?h:[]).filter((t=>{const n=t.workDate||t.date,r=n?n.split("T")[0]:null,i=0===t.status||"available"===t.status||"available"===A(t.status),o=r===e;let a=!0;if(t.startTime){const e=new Date;a=new Date(t.startTime)>=new Date(e.getTime()+108e5)}return o&&i&&a})),n={};t.forEach((e=>{const t="".concat(oe(e.startTime),"-").concat(oe(e.endTime));n[t]||(n[t]={display:"".concat(oe(e.startTime)," - ").concat(oe(e.endTime)),startTime:e.startTime,endTime:e.endTime,slots:[],consultantCount:0}),n[t].slots.push(e),n[t].consultantCount=n[t].slots.length}));const r=Object.values(n).sort(((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime()));return r},ce=()=>{j(""),V("")},le=()=>{w(null),S(""),T(""),R(null),b(null),k(!1),N([]),B({note:"",attachments:[]}),D({}),ce()};return(0,Tt.jsxs)("div",{className:"counseling-page",children:[(0,Tt.jsx)("div",{className:"page-header secondary-bg fade-in",children:(0,Tt.jsxs)("div",{className:"container",children:[(0,Tt.jsx)("h1",{children:"D\u1ecbch V\u1ee5 T\u01b0 V\u1ea5n"}),(0,Tt.jsx)("p",{children:i()?"Xem c\xe1c khung gi\u1edd t\u01b0 v\u1ea5n c\xf3 s\u1eb5n (Ch\u1ebf \u0111\u1ed9 xem d\xe0nh cho t\u01b0 v\u1ea5n vi\xean)":"\u0110\u1eb7t l\u1ecbch h\u1eb9n t\u01b0 v\u1ea5n tr\u1ef1c tuy\u1ebfn v\u1edbi c\xe1c t\u01b0 v\u1ea5n vi\xean chuy\xean nghi\u1ec7p"})]})}),(0,Tt.jsxs)("div",{className:"container",children:[(0,Tt.jsxs)("div",{className:"tab-navigation fade-in delay-100",children:[(0,Tt.jsx)("button",{className:"tab-btn ".concat("booking"===o?"active":""),onClick:()=>a("booking"),children:i()?"Xem Khung Gi\u1edd":"\u0110\u1eb7t L\u1ecbch H\u1eb9n"}),r&&(0,Tt.jsx)("button",{className:"tab-btn ".concat("appointments"===o?"active":""),onClick:()=>a("appointments"),children:i()?"L\u1ecbch H\u1eb9n \u0110\xe3 \u0110\u1eb7t":"L\u1ecbch H\u1eb9n C\u1ee7a T\xf4i"})]}),F&&(0,Tt.jsxs)("div",{className:"alert alert-error",children:[(0,Tt.jsx)(Ld,{icon:ku}),F,(0,Tt.jsx)("button",{onClick:ce,className:"close-btn",children:"\xd7"})]}),Q&&(0,Tt.jsxs)("div",{className:"alert alert-success",children:[(0,Tt.jsx)(Ld,{icon:Iu}),Q,(0,Tt.jsx)("button",{onClick:ce,className:"close-btn",children:"\xd7"})]}),!r&&(0,Tt.jsxs)("div",{className:"alert alert-info",children:[(0,Tt.jsx)(Ld,{icon:lu}),"Login m\u1edbi \u0111\u1eb7t \u0111\u01b0\u1ee3c l\u1ecbch.",(0,Tt.jsx)("button",{onClick:()=>window.location.href="/login",className:"btn-link",children:"T\u1edbi Login."})]}),"booking"===o&&(0,Tt.jsx)("div",{className:"booking-section",children:(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsxs)("div",{className:"booking-layout fade-in delay-200",children:[(0,Tt.jsxs)("div",{className:"availability-selection card",children:[(0,Tt.jsx)("h3",{children:"Ch\u1ecdn Th\u1eddi Gian T\u01b0 V\u1ea5n"}),(0,Tt.jsxs)("div",{className:"date-selector",children:[(0,Tt.jsxs)("h4",{children:[(0,Tt.jsx)(Ld,{icon:Nu})," Ch\u1ecdn Ng\xe0y"]}),(0,Tt.jsxs)("div",{className:"calendar-wrapper fade-in delay-300",children:[(0,Tt.jsx)("div",{className:"week-header",children:"Tu\u1ea7n N\xe0y"}),(0,Tt.jsx)("div",{className:"dates-grid",children:H.map(((e,t)=>(0,Tt.jsxs)("button",{className:"date-btn \n                              ".concat(e.isPast?"past":""," \n                              ").concat(e.isToday?"today":"","\n                              ").concat(_===e.dateString?"selected":"","\n                            "),onClick:()=>!e.isPast&&ae(e),disabled:e.isPast,children:[(0,Tt.jsx)("span",{className:"day-name",children:e.formatted.split(" ")[0]}),(0,Tt.jsx)("span",{className:"day-number",children:e.formatted.split(" ")[1]})]},t)))}),(0,Tt.jsx)("div",{className:"week-header",children:"Tu\u1ea7n Sau"}),(0,Tt.jsx)("div",{className:"dates-grid",children:K.map(((e,t)=>(0,Tt.jsxs)("button",{className:"date-btn \n                              ".concat(_===e.dateString?"selected":"","\n                            "),onClick:()=>ae(e),children:[(0,Tt.jsx)("span",{className:"day-name",children:e.formatted.split(" ")[0]}),(0,Tt.jsx)("span",{className:"day-number",children:e.formatted.split(" ")[1]})]},t)))})]}),L.date&&(0,Tt.jsx)("div",{className:"error-text",children:L.date})]}),_&&(0,Tt.jsxs)("div",{className:"time-selector fade-in",ref:Y,children:[(0,Tt.jsxs)("h4",{children:[(0,Tt.jsx)(Ld,{icon:Au})," Ch\u1ecdn Gi\u1edd"]}),(0,Tt.jsx)("div",{className:"times-grid",children:se(_).map(((e,t)=>(0,Tt.jsx)("div",{className:"time-group",children:(0,Tt.jsx)("button",{className:"time-btn ".concat((null===I||void 0===I?void 0:I.display)===e.display?"selected":""," ").concat(e.consultantCount>1?"multiple-consultants":""),onClick:()=>!i()&&(e=>{w(null),b(null),k(!1),N([]),j(""),R(e),T(e.display);const t=e.slots.map((e=>{const t=f.find((t=>t.userId===e.consultantId));return{slot:e,consultant:t||{userId:e.consultantId,fullname:e.consultantName||"Unknown Consultant",specialization:"Ch\u01b0a c\u1eadp nh\u1eadt",profilePicture:null}}}));if(N(t),k(!0),1===t.length){const e=t[0];w(e.slot),b({id:e.consultant.userId,name:e.consultant.fullname,specialization:e.consultant.specialization})}setTimeout((()=>{var e;null===(e=X.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})}),100)})(e),disabled:i(),children:e.display})},t)))}),0===se(_).length&&(0,Tt.jsx)("div",{className:"no-slots",children:"Kh\xf4ng c\xf3 khung gi\u1edd n\xe0o kh\u1ea3 d\u1ee5ng cho ng\xe0y n\xe0y"}),L.slot&&(0,Tt.jsx)("div",{className:"error-text",children:L.slot})]}),O&&I&&(0,Tt.jsxs)("div",{className:"consultant-selection fade-in",ref:X,children:[(0,Tt.jsxs)("div",{className:"consultant-selection-header",children:[(0,Tt.jsxs)("button",{className:"back-btn",onClick:()=>{k(!1),R(null),T(""),N([]),w(null),b(null),j("")},children:[(0,Tt.jsx)(Ld,{icon:au}),"Quay l\u1ea1i ch\u1ecdn gi\u1edd"]}),(0,Tt.jsxs)("h4",{children:[(0,Tt.jsx)(Ld,{icon:Wd}),y?"\u0110\xe3 ch\u1ecdn t\u01b0 v\u1ea5n vi\xean":"Ch\u1ecdn t\u01b0 v\u1ea5n vi\xean"]}),(0,Tt.jsxs)("p",{className:"time-slot-info",children:["Khung gi\u1edd: ",I.display," -",1===x.length?" ".concat(x[0].consultant.fullname):x.length<=2?" ".concat(x.map((e=>e.consultant.fullname)).join(", ")):" ".concat(x[0].consultant.fullname," v\xe0 ").concat(x.length-1," t\u01b0 v\u1ea5n vi\xean kh\xe1c")]})]}),(0,Tt.jsx)("div",{className:"consultants-grid",children:x.map(((e,t)=>(0,Tt.jsxs)("div",{className:"consultant-selection-card ".concat((null===y||void 0===y?void 0:y.id)===e.consultant.userId?"selected":""),onClick:()=>(e=>{w(e.slot),b({id:e.consultant.userId,name:e.consultant.fullname,specialization:e.consultant.specialization}),j("")})(e),children:[(0,Tt.jsx)("div",{className:"consultant-avatar",children:(0,Tt.jsx)("img",{src:e.consultant.profilePicture||"/default-avatar.png",alt:e.consultant.fullname,onError:e=>{e.target.src="/default-avatar.png"}})}),(0,Tt.jsxs)("div",{className:"consultant-details",children:[(0,Tt.jsx)("h5",{className:"consultant-name",children:e.consultant.fullname}),(0,Tt.jsxs)("p",{className:"consultant-specialty",children:[(0,Tt.jsx)("strong",{children:"Chuy\xean m\xf4n:"})," ",e.consultant.specialization||"Ch\u01b0a c\u1eadp nh\u1eadt"]}),e.consultant.degree&&(0,Tt.jsxs)("p",{className:"consultant-degree",children:[(0,Tt.jsx)("strong",{children:"B\u1eb1ng c\u1ea5p:"})," ",e.consultant.degree]})]}),(0,Tt.jsx)("div",{className:"selection-indicator ".concat((null===y||void 0===y?void 0:y.id)===e.consultant.userId?"selected":""),children:(0,Tt.jsx)(Ld,{icon:Iu})})]},t)))})]})]}),(0,Tt.jsxs)("div",{className:"selection-summary-card",children:[(0,Tt.jsx)("h3",{children:"Th\xf4ng Tin \u0110\xe3 Ch\u1ecdn"}),(0,Tt.jsxs)("div",{className:"selection-summary fade-in",children:[(0,Tt.jsxs)("div",{className:"selection-item current-time",children:[(0,Tt.jsx)(Ld,{icon:Au}),(0,Tt.jsx)("span",{children:"Th\u1eddi gian hi\u1ec7n t\u1ea1i:"})," ",W.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),_?(0,Tt.jsxs)("div",{className:"selection-item",children:[(0,Tt.jsx)(Ld,{icon:Nu}),(0,Tt.jsx)("span",{children:"Ng\xe0y:"})," ",_]}):(0,Tt.jsxs)("div",{className:"selection-item",children:[(0,Tt.jsx)(Ld,{icon:lu}),(0,Tt.jsx)("span",{children:"Ng\xe0y:"})," Ch\u01b0a ch\u1ecdn"]}),C?(0,Tt.jsxs)("div",{className:"selection-item",children:[(0,Tt.jsx)(Ld,{icon:Au}),(0,Tt.jsx)("span",{children:"Gi\u1edd \u0111\xe3 ch\u1ecdn:"})," ",C]}):(0,Tt.jsxs)("div",{className:"selection-item",children:[(0,Tt.jsx)(Ld,{icon:lu}),(0,Tt.jsx)("span",{children:"Gi\u1edd:"})," Ch\u01b0a ch\u1ecdn"]}),y?(0,Tt.jsxs)("div",{className:"selection-item",children:[(0,Tt.jsx)(Ld,{icon:Wd}),(0,Tt.jsx)("span",{children:"T\u01b0 v\u1ea5n vi\xean:"})," ",y.name,y.specialization&&(0,Tt.jsxs)("small",{className:"consultant-specialty-display",children:["(",y.specialization,")"]})]}):O?(0,Tt.jsxs)("div",{className:"selection-item in-progress",children:[(0,Tt.jsx)(Ld,{icon:Wd}),(0,Tt.jsx)("span",{children:"T\u01b0 v\u1ea5n vi\xean:"})," \u0110ang ch\u1ecdn...",(0,Tt.jsx)("small",{children:x.length<=2?x.map((e=>e.consultant.fullname)).join(", "):"".concat(null===(e=x[0])||void 0===e?void 0:e.consultant.fullname," v\xe0 ").concat(x.length-1," kh\xe1c")})]}):(0,Tt.jsxs)("div",{className:"selection-item",children:[(0,Tt.jsx)(Ld,{icon:lu}),(0,Tt.jsx)("span",{children:"T\u01b0 v\u1ea5n vi\xean:"})," Ch\u01b0a ch\u1ecdn"]})]}),(0,Tt.jsx)("button",{className:"confirmation-btn ".concat(i()?"consultant-view":""),disabled:!(E&&r&&!i()),onClick:()=>{r?i()?j("Consultants cannot book appointments. This page is for viewing available slots only."):setTimeout((()=>{var e;null===(e=J.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})}),100):j("Please log in to book an appointment")},children:i()?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(Ld,{icon:lu}),"View Only (Consultants cannot book)"]}):E?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(Ld,{icon:Iu}),"\u0110\u1eb7t L\u1ecbch H\u1eb9n"]}):O&&C?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(Ld,{icon:lu}),"Ch\u1ecdn t\u01b0 v\u1ea5n vi\xean \u0111\u1ec3 ti\u1ebfp t\u1ee5c"]}):(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(Ld,{icon:lu}),"Ch\u1ecdn th\u1eddi gian \u0111\u1ec3 ti\u1ebfp t\u1ee5c"]})}),!r&&(0,Tt.jsxs)("div",{className:"auth-notice",children:[(0,Tt.jsx)(Ld,{icon:lu}),"Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 \u0111\u1eb7t l\u1ecbch h\u1eb9n"]}),i()&&(0,Tt.jsxs)("div",{className:"consultant-notice",children:[(0,Tt.jsx)(Ld,{icon:lu}),"B\u1ea1n \u0111ang xem v\u1edbi t\u01b0 c\xe1ch t\u01b0 v\u1ea5n vi\xean. Kh\xf4ng th\u1ec3 \u0111\u1eb7t l\u1ecbch h\u1eb9n."]})]})]}),E&&r&&!i()&&(0,Tt.jsx)("div",{className:"booking-form-section fade-in",ref:J,children:(0,Tt.jsxs)("div",{className:"card",children:[(0,Tt.jsx)("h3",{children:"Th\xf4ng Tin \u0110\u1eb7t L\u1ecbch"}),(0,Tt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=(()=>{const e={};return E||(e.slot="Please select a time slot"),P.note&&P.note.length>1e3&&(e.note="Note cannot exceed 1000 characters"),e})();if(D(t),Object.keys(t).length>0)return;if(!r||!n)return void j("Please log in to book appointments.");if(localStorage.getItem("accessToken")){M(!0),j("");try{const e={slotId:E.id,MemberNote:P.note,attachments:P.attachments};const t=await za.createAppointment(e);if(t.success)V("Appointment booked successfully!"),le(),await Promise.all([ee(),te()]);else{let e=t.error||"Failed to book appointment",n=!1;e.includes("401")||e.includes("Unauthorized")?e="Your session has expired. Please log in again.":e.includes("409")||e.includes("Conflict")||e.includes("conflict")?(n=!0,e=e.toLowerCase().includes("already booked")?"This time slot has already been booked by another user. Please select a different time.":e.toLowerCase().includes("duplicate")?"You have already booked an appointment for this time slot.":e.toLowerCase().includes("advance")||e.toLowerCase().includes("hours")?"This appointment is too close to the current time. Please book at least 3 hours in advance.":e.toLowerCase().includes("unavailable")?"This time slot is no longer available. Please refresh and select another time.":"This time slot is no longer available. Please select another time."):e.includes("400")?e="Invalid booking request. Please check your selection and try again.":(e.includes("403")||e.includes("Forbidden"))&&(e="You don't have permission to book this appointment."),j(e),n&&(w(null),T(""),M(!0),await ee(),M(!1))}}catch(rI){let t="Failed to book appointment: "+rI.message,n=!1;rI.message.includes("401")||rI.message.includes("Unauthorized")?t="Your session has expired. Please log in again.":rI.message.includes("409")||rI.message.includes("Conflict")||rI.message.includes("conflict")?(n=!0,t=rI.message.toLowerCase().includes("already booked")?"This time slot has already been booked by another user. Please select a different time.":rI.message.toLowerCase().includes("duplicate")?"You have already booked an appointment for this time slot.":rI.message.toLowerCase().includes("advance")||rI.message.toLowerCase().includes("hours")?"This appointment is too close to the current time. Please book at least 3 hours in advance.":rI.message.toLowerCase().includes("unavailable")?"This time slot is no longer available. Please refresh and select another time.":"This time slot is no longer available. Please select another time."):rI.message.includes("400")?t="Invalid booking request. Please check your selection and try again.":(rI.message.includes("403")||rI.message.includes("Forbidden"))&&(t="You don't have permission to book this appointment."),j(t),n&&(w(null),T(""),M(!0),await ee(),M(!1))}finally{M(!1)}}else j("Your session has expired. Please log in again.")},className:"booking-form",children:[(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{htmlFor:"note",children:"Ghi ch\xfa (t\xf9y ch\u1ecdn)"}),(0,Tt.jsx)("textarea",{id:"note",name:"note",value:P.note,onChange:e=>{const{name:t,value:n}=e.target;B((e=>l(l({},e),{},{[t]:n}))),L[t]&&D((e=>l(l({},e),{},{[t]:""})))},placeholder:"M\xf4 t\u1ea3 v\u1ea5n \u0111\u1ec1 b\u1ea1n mu\u1ed1n t\u01b0 v\u1ea5n...",rows:"4",maxLength:"1000",className:L.note?"error":""}),(0,Tt.jsxs)("small",{children:[P.note.length,"/1000 k\xfd t\u1ef1"]}),L.note&&(0,Tt.jsx)("div",{className:"error-text",children:L.note})]}),(0,Tt.jsxs)("div",{className:"form-actions",children:[(0,Tt.jsx)("button",{type:"button",onClick:le,className:"btn-secondary",children:"H\u1ee7y"}),(0,Tt.jsx)("button",{type:"submit",disabled:U,className:"btn-primary",children:U?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(Ld,{icon:Su,spin:!0}),"\u0110ang \u0111\u1eb7t l\u1ecbch..."]}):(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(Ld,{icon:Iu}),"X\xe1c nh\u1eadn \u0111\u1eb7t l\u1ecbch"]})})]})]})]})})]})}),"appointments"===o&&r&&(0,Tt.jsxs)("div",{className:"appointments-section fade-in",children:[(0,Tt.jsx)("h3",{children:i()?"L\u1ecbch H\u1eb9n \u0110\xe3 \u0110\u1eb7t":"L\u1ecbch H\u1eb9n C\u1ee7a T\xf4i"}),i()?(0,Tt.jsxs)("div",{className:"empty-appointments",children:[(0,Tt.jsx)(Ld,{icon:Nu}),(0,Tt.jsx)("h4",{children:"Qu\u1ea3n l\xfd l\u1ecbch h\u1eb9n t\u1eeb trang t\u01b0 v\u1ea5n"}),(0,Tt.jsx)("p",{children:"\u0110\u1ec3 xem v\xe0 qu\u1ea3n l\xfd c\xe1c l\u1ecbch h\u1eb9n c\u1ee7a b\u1ea1n, vui l\xf2ng truy c\u1eadp trang Qu\u1ea3n l\xfd th\u1eddi gian t\u01b0 v\u1ea5n."}),(0,Tt.jsx)("button",{onClick:()=>window.location.href="/consult-time",className:"btn-primary",children:"\u0110\u1ebfn trang qu\u1ea3n l\xfd"})]}):U?(0,Tt.jsxs)("div",{className:"loading",children:[(0,Tt.jsx)(Ld,{icon:Su,spin:!0}),"\u0110ang t\u1ea3i..."]}):0===g.length?(0,Tt.jsxs)("div",{className:"empty-appointments",children:[(0,Tt.jsx)(Ld,{icon:Nu}),(0,Tt.jsx)("h4",{children:"Ch\u01b0a c\xf3 l\u1ecbch h\u1eb9n n\xe0o"}),(0,Tt.jsx)("p",{children:"\u0110\u1eb7t l\u1ecbch h\u1eb9n \u0111\u1ea7u ti\xean c\u1ee7a b\u1ea1n ngay h\xf4m nay!"}),(0,Tt.jsx)("button",{onClick:()=>a("booking"),className:"btn-primary",children:"\u0110\u1eb7t l\u1ecbch h\u1eb9n"})]}):(0,Tt.jsx)("div",{className:"appointments-list",children:g.map((e=>{var t,n,r,i;return(0,Tt.jsxs)("div",{className:"appointment-card ".concat(A(e.status)),children:[(0,Tt.jsxs)("div",{className:"appointment-header",children:[(0,Tt.jsxs)("div",{className:"appointment-info",children:[(0,Tt.jsx)("h4",{children:e.consultantName||"T\u01b0 v\u1ea5n vi\xean"}),(0,Tt.jsxs)("div",{className:"appointment-datetime",children:[(0,Tt.jsx)(Ld,{icon:Nu}),(null===(t=e.availableSlot)||void 0===t||null===(n=t.workDate)||void 0===n?void 0:n.split("T")[0])||e.date," ","-"," ",oe(null===(r=e.availableSlot)||void 0===r?void 0:r.startTime)," ","to"," ",oe(null===(i=e.availableSlot)||void 0===i?void 0:i.endTime)]})]}),(0,Tt.jsx)("div",{className:"status-badge ".concat(A(e.status)),children:e.status})]}),e.note&&(0,Tt.jsxs)("div",{className:"appointment-note",children:[(0,Tt.jsx)("strong",{children:"Ghi ch\xfa:"})," ",e.note]}),e.meetingLink&&"confirmed"===A(e.status)&&(0,Tt.jsxs)("div",{className:"meeting-link",children:[(0,Tt.jsx)(Ld,{icon:Wd}),(0,Tt.jsx)("a",{href:e.meetingLink,target:"_blank",rel:"noopener noreferrer",children:"Tham gia cu\u1ed9c h\u1ecdp"})]}),"pending"===A(e.status)&&(0,Tt.jsx)("div",{className:"appointment-actions",children:(0,Tt.jsx)("button",{onClick:async()=>{const t=prompt("L\xfd do h\u1ee7y l\u1ecbch h\u1eb9n:");if(t){const n=await za.cancelAppointmentByMember(e.id,t);n.success?(V("\u0110\xe3 h\u1ee7y l\u1ecbch h\u1eb9n th\xe0nh c\xf4ng"),te()):j("Kh\xf4ng th\u1ec3 h\u1ee7y l\u1ecbch h\u1eb9n: "+n.error)}},className:"btn-danger",children:"H\u1ee7y l\u1ecbch h\u1eb9n"})})]},e.id)}))})]})]})]})};var aw=n(1635),sw=n.n(aw);const cw=e=>{let{user:n}=e;const r=(0,t.useRef)(null);return(0,t.useEffect)((()=>{n.videoTrack&&r.current&&n.videoTrack.play(r.current)}),[n.videoTrack]),(0,Tt.jsxs)("div",{className:"remote-video",children:[(0,Tt.jsx)("div",{ref:r,className:"video-player remote-player"}),(0,Tt.jsx)("span",{className:"video-label"})]})},lw=e=>{let{appointmentId:n,agoraAppId:r,agoraChannelName:i,agoraToken:o,agoraUserId:a,agoraExpireAt:s,AgoraAppId:c,AgoraToken:d,ChannelName:u,onCallEnd:A,onError:h}=e;const[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[v,y]=(0,t.useState)([]),[b,E]=(0,t.useState)(!1),[w,_]=(0,t.useState)(!1),[S,C]=(0,t.useState)(!1),[T,I]=(0,t.useState)(!1),[R,x]=(0,t.useState)(""),[N,O]=(0,t.useState)(!1),[k,P]=(0,t.useState)(o||d),[B,L]=(0,t.useState)(s),D=(0,t.useRef)(null),U=(0,t.useRef)(null),M=(0,t.useRef)(!1),F=(0,t.useRef)(!1),j=(0,t.useRef)(!1),Q=(0,t.useRef)(!1),V=(0,t.useRef)(!0),H=((0,t.useRef)(Date.now()+Math.random()),r),z=i,K=k;(0,t.useEffect)((()=>{V.current=!0;const e=setTimeout((()=>{V.current&&O(!0)}),500),t=()=>{document.hidden};return document.addEventListener("visibilitychange",t),M.current||(G(),M.current=!0),()=>{V.current=!1,document.removeEventListener("visibilitychange",t),clearTimeout(e),Q.current=!0,$()}}),[]),(0,t.useEffect)((()=>{let e=null;return V.current&&D.current&&!b&&!F.current&&!j.current&&!Q.current&&N&&H&&z&&K&&!document.hidden&&(F.current=!0,j.current=!0,e=setTimeout((()=>{!V.current||document.hidden||b?(j.current=!1,F.current=!1):Z()}),1e3)),()=>{e&&(clearTimeout(e),V.current&&!document.hidden||(j.current=!1,F.current=!1))}}),[D.current,H,z,K,N,b]),(0,t.useEffect)((()=>{if(B&&b){const e=new Date(B).getTime()-(new Date).getTime();e>0&&e<3e5&&W()}}),[B,b]),(0,t.useEffect)((()=>{const e=o||d;e&&e!==k&&(P(e),L(s))}),[o,d,s]);const G=()=>{try{if(D.current)return;D.current=sw().createClient({mode:"rtc",codec:"vp8"}),D.current.on("user-published",Y),D.current.on("user-unpublished",X),D.current.on("user-left",J),D.current.on("token-privilege-will-expire",W),D.current.on("token-privilege-did-expire",q)}catch(R){x("Kh\xf4ng th\u1ec3 kh\u1edfi t\u1ea1o video call: "+R.message),h&&h(R)}},W=async()=>{try{const e=await za.refreshAgoraToken(n);if(e.success&&e.data){let t,n;if(e.data.agoraToken)t=e.data.agoraToken,n=e.data.agoraExpireAt;else if(e.data.token)t=e.data.token,n=e.data.expireAt||null;else if(e.data.AgoraToken)t=e.data.AgoraToken,n=e.data.AgoraExpireAt;else{if("string"!==typeof e.data)throw new Error("Invalid response format from token refresh API");t=e.data,n=null}if(t)return P(t),L(n),D.current&&b&&await D.current.renewToken(t),t}throw new Error("Failed to get new token: "+(e.error||"Unknown error"))}catch(R){return x("Kh\xf4ng th\u1ec3 l\xe0m m\u1edbi token video call: "+R.message),R.message&&R.message.includes("404")?x("Backend kh\xf4ng h\u1ed7 tr\u1ee3 l\xe0m m\u1edbi token. Vui l\xf2ng \u0111\xf3ng v\xe0 m\u1edf l\u1ea1i video call."):R.message&&R.message.includes("401")?x("Phi\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 h\u1ebft h\u1ea1n. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i."):x("Kh\xf4ng th\u1ec3 l\xe0m m\u1edbi token video call: "+R.message),h&&h(R),null}},q=()=>{W().catch((e=>{x("Token \u0111\xe3 h\u1ebft h\u1ea1n v\xe0 kh\xf4ng th\u1ec3 l\xe0m m\u1edbi. Vui l\xf2ng \u0111\xf3ng v\xe0 m\u1edf l\u1ea1i video call.")}))},Y=async(e,t)=>{try{await D.current.subscribe(e,t),"video"===t&&y((t=>{const n=t.find((t=>t.uid===e.uid));return n?t.map((t=>t.uid===e.uid?l(l({},t),{},{videoTrack:e.videoTrack}):t)):[...t,{uid:e.uid,videoTrack:e.videoTrack,audioTrack:null}]})),"audio"===t&&(e.audioTrack.play(),y((t=>{const n=t.find((t=>t.uid===e.uid));return n?t.map((t=>t.uid===e.uid?l(l({},t),{},{audioTrack:e.audioTrack}):t)):[...t,{uid:e.uid,videoTrack:null,audioTrack:e.audioTrack}]})))}catch(R){x("Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i v\u1edbi ng\u01b0\u1eddi d\xf9ng kh\xe1c: "+R.message)}},X=(e,t)=>{y((n=>n.map((n=>{if(n.uid===e.uid){if("video"===t)return l(l({},n),{},{videoTrack:null});if("audio"===t)return l(l({},n),{},{audioTrack:null})}return n}))))},J=e=>{y((t=>t.filter((t=>t.uid!==e.uid))))},Z=async()=>{if(!V.current)return j.current=!1,void(F.current=!1);if(document.hidden)return j.current=!1,void(F.current=!1);if(!H||!z){return x("Thi\u1ebfu th\xf4ng tin c\u1ea5u h\xecnh video call"),j.current=!1,void(F.current=!1)}if(b)return;if(j.current){if(Date.now()-(window.lastJoinAttempt||Date.now())>15e3)return $(),void setTimeout((()=>{V.current&&Z()}),1e3)}if(D.current){const e=D.current.connectionState;if("CONNECTING"===e||"CONNECTED"===e)return j.current=!1,void(F.current=!1)}I(!0),x(""),j.current=!0,window.lastJoinAttempt=Date.now();const e=setTimeout((()=>{j.current&&!b&&(j.current=!1,F.current=!1,I(!1),x("K\u1ebft n\u1ed1i video call b\u1ecb timeout. Vui l\xf2ng th\u1eed l\u1ea1i."))}),3e4);try{try{await ee()}catch(t){return x(t.message),j.current=!1,void(F.current=!1)}let e,s,c=K;if(!c||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return!!e&&new Date(e).getTime()-(new Date).getTime()<=60*t*1e3}(B))try{if(c=await W(),!c)return x("Kh\xf4ng th\u1ec3 l\xe0m m\u1edbi token. Vui l\xf2ng th\u1eed l\u1ea1i sau."),j.current=!1,void(F.current=!1)}catch(n){return console.error("Failed to refresh token before joining:",n),x("Token \u0111\xe3 h\u1ebft h\u1ea1n v\xe0 kh\xf4ng th\u1ec3 l\xe0m m\u1edbi. Vui l\xf2ng th\u1eed l\u1ea1i sau."),j.current=!1,void(F.current=!1)}if(!c)return x("Kh\xf4ng c\xf3 token h\u1ee3p l\u1ec7 \u0111\u1ec3 tham gia video call"),j.current=!1,void(F.current=!1);try{[e,s]=await sw().createMicrophoneAndCameraTracks()}catch(r){if(r.message&&r.message.includes("Permission denied"))return x("\u274c Kh\xf4ng th\u1ec3 truy c\u1eadp camera/microphone\n\nVui l\xf2ng:\n1. Cho ph\xe9p truy c\u1eadp camera v\xe0 microphone trong tr\xecnh duy\u1ec7t\n2. Ki\u1ec3m tra xem c\xf3 \u1ee9ng d\u1ee5ng n\xe0o \u0111ang s\u1eed d\u1ee5ng camera kh\xf4ng\n3. Th\u1eed l\xe0m m\u1edbi trang v\xe0 th\u1eed l\u1ea1i\n\nChi ti\u1ebft l\u1ed7i: "+r.message),j.current=!1,void(F.current=!1);try{e=await sw().createMicrophoneAudioTrack(),s=null,x("\u26a0\ufe0f Kh\xf4ng th\u1ec3 truy c\u1eadp camera\n\nCu\u1ed9c g\u1ecdi s\u1ebd ti\u1ebfp t\u1ee5c v\u1edbi \xe2m thanh ch\u1ec9.\nVui l\xf2ng ki\u1ec3m tra quy\u1ec1n truy c\u1eadp camera v\xe0 th\u1eed l\u1ea1i.\n\nChi ti\u1ebft l\u1ed7i: "+r.message)}catch(i){return console.error("Failed to create audio track:",i),x("\u274c Kh\xf4ng th\u1ec3 truy c\u1eadp camera v\xe0 microphone\n\nVui l\xf2ng ki\u1ec3m tra:\n1. Quy\u1ec1n truy c\u1eadp camera/microphone trong tr\xecnh duy\u1ec7t\n2. Thi\u1ebft b\u1ecb c\xf3 camera/microphone kh\xf4ng\n3. Kh\xf4ng c\xf3 \u1ee9ng d\u1ee5ng n\xe0o \u0111ang s\u1eed d\u1ee5ng camera/microphone\n\nChi ti\u1ebft l\u1ed7i: "+r.message),j.current=!1,void(F.current=!1)}}if(g(e),f(s),U.current&&s)try{s.play(U.current)}catch(o){x("\u26a0\ufe0f Kh\xf4ng th\u1ec3 hi\u1ec3n th\u1ecb video local\n\nCu\u1ed9c g\u1ecdi s\u1ebd ti\u1ebfp t\u1ee5c nh\u01b0ng b\u1ea1n kh\xf4ng th\u1ec3 th\u1ea5y video c\u1ee7a m\xecnh.\n\nChi ti\u1ebft l\u1ed7i: "+o.message)}else s||x("\ud83d\udcde Cu\u1ed9c g\u1ecdi audio-only\n\nCamera kh\xf4ng kh\u1ea3 d\u1ee5ng, cu\u1ed9c g\u1ecdi s\u1ebd ch\u1ec9 c\xf3 \xe2m thanh.");await D.current.join(H,z,c,a?Number(a):void 0);await D.current.publish([e,s]),E(!0),j.current=!1,F.current=!1}catch(R){j.current=!1,F.current=!1;let t="Kh\xf4ng th\u1ec3 tham gia video call: "+R.message;if(R.message&&(R.message.includes("dynamic key expired")||R.message.includes("CAN_NOT_GET_GATEWAY_SERVER")||R.message.includes("token")||R.message.includes("invalid token")))try{if(await W())return F.current=!1,void setTimeout((()=>Z()),1e3);t="Token video call \u0111\xe3 h\u1ebft h\u1ea1n v\xe0 kh\xf4ng th\u1ec3 l\xe0m m\u1edbi. Vui l\xf2ng \u0111\xf3ng v\xe0 m\u1edf l\u1ea1i video call."}catch(n){console.error("Failed to refresh expired token:",n),t="Token video call \u0111\xe3 h\u1ebft h\u1ea1n v\xe0 kh\xf4ng th\u1ec3 l\xe0m m\u1edbi. Vui l\xf2ng \u0111\xf3ng v\xe0 m\u1edf l\u1ea1i video call."}else R.message&&R.message.includes("invalid vendor key")||R.message.includes("can not find appid")?t="\u26a0\ufe0f C\u1ea5u h\xecnh Agora kh\xf4ng h\u1ee3p l\u1ec7\n\nL\u1ed7i: Backend \u0111ang s\u1eed d\u1ee5ng App ID kh\xf4ng t\u1ed3n t\u1ea1i trong h\u1ec7 th\u1ed1ng Agora.\n\nChi ti\u1ebft k\u1ef9 thu\u1eadt:\n"+"\u2022 App ID: ".concat(H,"\n")+"\u2022 L\u1ed7i: ".concat(R.message,"\n\n")+"Vui l\xf2ng li\xean h\u1ec7 b\u1ed9 ph\u1eadn k\u1ef9 thu\u1eadt \u0111\u1ec3 c\u1eadp nh\u1eadt c\u1ea5u h\xecnh Agora ch\xednh x\xe1c.":R.message&&R.message.includes("Permission denied")&&(t="C\u1ea7n c\u1ea5p quy\u1ec1n truy c\u1eadp camera v\xe0 microphone \u0111\u1ec3 tham gia video call.");x(t),h&&h(R)}finally{I(!1),clearTimeout(e)}},$=()=>{j.current=!1,F.current=!1,Q.current=!1,M.current=!1,E(!1),I(!1),x(""),m&&(m.close(),g(null)),p&&(p.close(),f(null)),D.current&&D.current.leave().catch((e=>{console.log("Error leaving channel during force reset:",e)}))},ee=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Tr\xecnh duy\u1ec7t kh\xf4ng h\u1ed7 tr\u1ee3 truy c\u1eadp camera/microphone");(await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})).getTracks().forEach((e=>e.stop()));return(await navigator.mediaDevices.getUserMedia({video:!1,audio:!0})).getTracks().forEach((e=>e.stop())),{camera:!0,microphone:!0}}catch(R){throw"NotAllowedError"===R.name?new Error("Quy\u1ec1n truy c\u1eadp camera/microphone b\u1ecb t\u1eeb ch\u1ed1i. Vui l\xf2ng cho ph\xe9p trong tr\xecnh duy\u1ec7t."):"NotFoundError"===R.name?new Error("Kh\xf4ng t\xecm th\u1ea5y camera ho\u1eb7c microphone. Vui l\xf2ng ki\u1ec3m tra thi\u1ebft b\u1ecb."):"NotReadableError"===R.name?new Error("Camera/microphone \u0111ang \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng b\u1edfi \u1ee9ng d\u1ee5ng kh\xe1c."):new Error("Kh\xf4ng th\u1ec3 ki\u1ec3m tra thi\u1ebft b\u1ecb: "+R.message)}};return H&&z?(0,Tt.jsxs)("div",{className:"agora-video-call",children:[R&&(0,Tt.jsxs)("div",{className:"error-message",children:[(0,Tt.jsx)("p",{children:R}),(0,Tt.jsx)("button",{onClick:()=>x(""),className:"btn btn-secondary btn-small",children:"\u0110\xf3ng"})]}),(0,Tt.jsxs)("div",{className:"video-container",children:[(0,Tt.jsxs)("div",{className:"local-video",children:[(0,Tt.jsx)("div",{ref:U,className:"video-player local-player"}),(0,Tt.jsx)("span",{className:"video-label",children:"B\u1ea1n"})]}),v.map((e=>(0,Tt.jsx)(cw,{user:e},e.uid))),0===v.length&&b&&(0,Tt.jsx)("div",{className:"waiting-message",children:(0,Tt.jsx)("p",{children:"\u0110ang ch\u1edd tham gia..."})})]}),(0,Tt.jsx)("div",{className:"video-controls",children:b?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)("button",{onClick:()=>{m&&(m.setEnabled(w),_(!w))},className:"btn ".concat(w?"btn-danger":"btn-secondary"),children:w?"B\u1eadt \xe2m thanh":"T\u1eaft \xe2m thanh"}),(0,Tt.jsx)("button",{onClick:()=>{p&&(p.setEnabled(S),C(!S))},className:"btn ".concat(S?"btn-danger":"btn-secondary"),children:S?"B\u1eadt camera":"T\u1eaft camera"}),(0,Tt.jsx)("button",{onClick:async()=>{if(!Q.current){Q.current=!0;try{m&&(m.close(),g(null)),p&&(p.close(),f(null)),D.current&&b&&await D.current.leave(),y([]),E(!1),j.current=!1,F.current=!1,A&&A()}catch(R){console.error("Failed to leave call:",R)}finally{Q.current=!1}}},className:"btn btn-danger",children:"K\u1ebft th\xfac cu\u1ed9c g\u1ecdi"})]}):(0,Tt.jsxs)("div",{className:"join-controls",children:[(0,Tt.jsx)("button",{onClick:Z,disabled:T||j.current,className:"btn btn-primary",children:T||j.current?"\u0110ang tham gia...":"Tham gia Video Call"}),j.current&&!T&&(0,Tt.jsx)("button",{onClick:()=>{j.current=!1,F.current=!1,Q.current=!1,I(!1),x("")},className:"btn btn-warning btn-small",children:"L\xe0m m\u1edbi k\u1ebft n\u1ed1i"}),j.current&&!b&&(0,Tt.jsx)("button",{onClick:$,className:"btn btn-danger btn-small",children:"Kh\u1edfi \u0111\u1ed9ng l\u1ea1i ho\xe0n to\xe0n"})]})})]}):(0,Tt.jsxs)("div",{className:"video-call-error",children:[(0,Tt.jsx)("p",{children:"Video call ch\u01b0a \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh cho cu\u1ed9c h\u1eb9n n\xe0y."}),(0,Tt.jsxs)("small",{children:["Debug: AppId: ",H?"\u2713":"\u2717",", Channel:"," ",z?"\u2713":"\u2717"]})]})},dw=e=>{let{appointmentId:n,showTitle:r=!0,onCreateNote:i,onUpdateNote:o,onDeleteNote:a}=e;const[s,c]=(0,t.useState)([]),[d,u]=(0,t.useState)(!1),[A,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)("");(0,t.useEffect)((()=>{n?v():y()}),[n]);const v=async()=>{u(!0),h("");try{const e=await za.getNotesByAppointment(n);e.success?c(e.data.data||[]):h("Kh\xf4ng th\u1ec3 t\u1ea3i ghi ch\xfa: "+e.error)}catch(rI){h("L\u1ed7i khi t\u1ea3i ghi ch\xfa: "+rI.message)}finally{u(!1)}},y=async()=>{u(!0),h("");try{const e=await za.getAllConsultantNotes();e.success?c(e.data.data||[]):h("Kh\xf4ng th\u1ec3 t\u1ea3i ghi ch\xfa: "+e.error)}catch(rI){h("L\u1ed7i khi t\u1ea3i ghi ch\xfa: "+rI.message)}finally{u(!1)}},b=()=>{f(null),g("")},E=e=>{if(!e)return"Kh\xf4ng c\xf3 ng\xe0y";try{const t=new Date(e);return isNaN(t.getTime())?"Ng\xe0y kh\xf4ng h\u1ee3p l\u1ec7":t.toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(A){return"Ng\xe0y kh\xf4ng h\u1ee3p l\u1ec7"}};return d?(0,Tt.jsxs)("div",{className:"consultant-notes-loading",children:[(0,Tt.jsx)(Ld,{icon:Su,spin:!0,className:"loading-icon"}),(0,Tt.jsx)("p",{children:"\u0110ang t\u1ea3i ghi ch\xfa..."})]}):A?(0,Tt.jsxs)("div",{className:"consultant-notes-error",children:[(0,Tt.jsx)(Ld,{icon:xu,className:"error-icon"}),(0,Tt.jsx)("p",{children:A}),(0,Tt.jsx)("button",{onClick:()=>h(""),className:"btn btn-secondary btn-small",children:"\u0110\xf3ng"})]}):(0,Tt.jsxs)("div",{className:"consultant-notes",children:[r&&(0,Tt.jsxs)("div",{className:"notes-header",children:[(0,Tt.jsx)(Ld,{icon:Bu,className:"header-icon"}),(0,Tt.jsx)("h3",{children:n?"Ghi ch\xfa bu\u1ed5i t\u01b0 v\u1ea5n":"T\u1ea5t c\u1ea3 ghi ch\xfa t\u01b0 v\u1ea5n"})]}),0===s.length?(0,Tt.jsxs)("div",{className:"no-notes",children:[(0,Tt.jsx)(Ld,{icon:Md,className:"no-notes-icon"}),(0,Tt.jsx)("p",{children:n?"Ch\u01b0a c\xf3 ghi ch\xfa cho bu\u1ed5i t\u01b0 v\u1ea5n n\xe0y":"B\u1ea1n ch\u01b0a c\xf3 ghi ch\xfa t\u01b0 v\u1ea5n n\xe0o"})]}):(0,Tt.jsx)("div",{className:"notes-list",children:s.map((e=>(0,Tt.jsxs)("div",{className:"consultant-note-card",children:[(0,Tt.jsxs)("div",{className:"note-header",children:[(0,Tt.jsxs)("div",{className:"note-info",children:[(0,Tt.jsx)(Ld,{icon:Wd,className:"member-icon"}),(0,Tt.jsx)("span",{className:"member-name",children:e.memberName||"Th\xe0nh vi\xean"})]}),(0,Tt.jsx)("div",{className:"note-actions",children:p===e.id?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsxs)("button",{onClick:()=>(async e=>{if(m.trim())try{const t=await za.updateNote(e,{noteText:m.trim()});t.success?(c(s.map((t=>t.id===e?l(l({},t),{},{noteText:m.trim(),updatedAt:(new Date).toISOString()}):t))),f(null),g(""),o&&o(e,{noteText:m.trim()})):h("Kh\xf4ng th\u1ec3 c\u1eadp nh\u1eadt ghi ch\xfa: "+t.error)}catch(rI){h("L\u1ed7i khi c\u1eadp nh\u1eadt ghi ch\xfa: "+rI.message)}})(e.id),className:"btn btn-success btn-small",disabled:!m.trim(),children:[(0,Tt.jsx)(Ld,{icon:tu}),"L\u01b0u"]}),(0,Tt.jsxs)("button",{onClick:b,className:"btn btn-secondary btn-small",children:[(0,Tt.jsx)(Ld,{icon:Eu}),"H\u1ee7y"]})]}):(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsxs)("button",{onClick:()=>(e=>{f(e.id),g(e.noteText)})(e),className:"btn btn-info btn-small",children:[(0,Tt.jsx)(Ld,{icon:zd}),"S\u1eeda"]}),(0,Tt.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ghi ch\xfa n\xe0y?"))try{const t=await za.deleteNote(e);t.success?(c(s.filter((t=>t.id!==e))),a&&a(e)):h("Kh\xf4ng th\u1ec3 x\xf3a ghi ch\xfa: "+t.error)}catch(rI){h("L\u1ed7i khi x\xf3a ghi ch\xfa: "+rI.message)}})(e.id),className:"btn btn-danger btn-small",children:[(0,Tt.jsx)(Ld,{icon:ou}),"X\xf3a"]})]})})]}),(0,Tt.jsxs)("div",{className:"note-date",children:[(0,Tt.jsx)(Ld,{icon:Cu,className:"date-icon"}),(0,Tt.jsx)("span",{children:E(e.createdAt)})]}),(0,Tt.jsx)("div",{className:"note-content",children:p===e.id?(0,Tt.jsx)("textarea",{value:m,onChange:e=>g(e.target.value),className:"note-edit-textarea",rows:6,placeholder:"Nh\u1eadp ghi ch\xfa..."}):(0,Tt.jsx)("p",{children:e.noteText})}),e.updatedAt&&e.updatedAt!==e.createdAt&&(0,Tt.jsx)("div",{className:"note-updated",children:(0,Tt.jsxs)("small",{children:["C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: ",E(e.updatedAt)]})})]},e.id)))})]})},uw=e=>{let{appointmentId:n,memberName:r,onClose:i,onSubmit:o}=e;const[a,s]=(0,t.useState)(""),[c,l]=(0,t.useState)(!1);return(0,Tt.jsx)("div",{className:"modal-overlay",onClick:i,children:(0,Tt.jsxs)("div",{className:"modal-content create-note-modal",onClick:e=>e.stopPropagation(),children:[(0,Tt.jsxs)("div",{className:"modal-header",children:[(0,Tt.jsxs)("h3",{children:[(0,Tt.jsx)(Ld,{icon:yu}),"Th\xeam ghi ch\xfa - ",r]}),(0,Tt.jsx)("button",{className:"modal-close",onClick:i,children:"\xd7"})]}),(0,Tt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a.trim()){l(!0);try{await o({appointmentId:n,noteText:a.trim()})}finally{l(!1)}}},className:"modal-body",children:[(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{htmlFor:"noteText",children:"N\u1ed9i dung ghi ch\xfa:"}),(0,Tt.jsx)("textarea",{id:"noteText",value:a,onChange:e=>s(e.target.value),placeholder:"Nh\u1eadp ghi ch\xfa v\u1ec1 bu\u1ed5i t\u01b0 v\u1ea5n...",rows:8,required:!0,className:"form-control"})]}),(0,Tt.jsxs)("div",{className:"form-actions",children:[(0,Tt.jsx)("button",{type:"button",onClick:i,className:"btn btn-secondary",children:"H\u1ee7y"}),(0,Tt.jsx)("button",{type:"submit",disabled:!a.trim()||c,className:"btn btn-primary",children:c?"\u0110ang l\u01b0u...":"L\u01b0u ghi ch\xfa"})]})]})]})})},Aw=()=>{const{currentUser:e,isConsultant:n}=ts(),[r,i]=(0,t.useState)("manage-slots"),[o,a]=(0,t.useState)([]),[s,c]=(0,t.useState)([]),[d,u]=(0,t.useState)(!1),[A,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(null),[b,E]=(0,t.useState)(null),[w,_]=(0,t.useState)(null),[S,C]=(0,t.useState)(null),[T,I]=(0,t.useState)({selectedDates:[],selectedTimeSlots:[]}),R=[{startTime:"08:00",endTime:"09:00",label:"8:00 AM - 9:00 AM"},{startTime:"09:00",endTime:"10:00",label:"9:00 AM - 10:00 AM"},{startTime:"10:00",endTime:"11:00",label:"10:00 AM - 11:00 AM"},{startTime:"11:00",endTime:"12:00",label:"11:00 AM - 12:00 PM"},{startTime:"13:00",endTime:"14:00",label:"1:00 PM - 2:00 PM"},{startTime:"14:00",endTime:"15:00",label:"2:00 PM - 3:00 PM"},{startTime:"15:00",endTime:"16:00",label:"3:00 PM - 4:00 PM"},{startTime:"16:00",endTime:"17:00",label:"4:00 PM - 5:00 PM"},{startTime:"17:00",endTime:"18:00",label:"5:00 PM - 6:00 PM"},{startTime:"19:00",endTime:"20:00",label:"7:00 PM - 8:00 PM"},{startTime:"20:00",endTime:"21:00",label:"8:00 PM - 9:00 PM"}],x=(()=>{const e=[],t=new Date;let n=0,r=new Date(t);for(;n<14;){const t=r.getDay();t>=1&&t<=5&&(e.push({dateString:r.toISOString().split("T")[0],label:r.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),fullDate:new Date(r)}),n++),r.setDate(r.getDate()+1)}return e})(),[N,O]=(0,t.useState)({});(0,t.useEffect)((()=>{n()?(k(),P()):h("Access denied. This page is only for consultants.")}),[]);const k=async()=>{u(!0);try{const e=await za.getMySlots();if(e.success){const t=(e.data.data||[]).map((e=>l(l({},e),{},{date:e.workDate||e.date,workDate:e.workDate||e.date,startTime:e.startTime||"",endTime:e.endTime||"",status:e.status||"available"})));a(t)}else h("Failed to load slots: "+e.error)}catch(rI){h("Error loading slots: "+rI.message)}finally{u(!1)}},P=async()=>{try{const e=await za.getMyConsultationsWithAgoraToken();if(e.success){const t=e.data.data||[];c(t)}else console.error("Failed to load appointments:",e.error)}catch(rI){console.error("Error loading appointments:",rI.message)}},B=async e=>{try{const t=await za.createNote(e);t.success?(f("\u0110\xe3 t\u1ea1o ghi ch\xfa th\xe0nh c\xf4ng!"),C(null)):h("Kh\xf4ng th\u1ec3 t\u1ea1o ghi ch\xfa: "+t.error)}catch(rI){h("L\u1ed7i khi t\u1ea1o ghi ch\xfa: "+rI.message)}},L=e=>{if(!e)return"No date";try{const t=new Date(e);return isNaN(t.getTime())?"Invalid date":t.toLocaleDateString()}catch(A){return"Invalid date"}},D=e=>{if(!e)return"No time";try{let n=e;if("string"===typeof e&&e.match(/^\d{2}:\d{2}$/))n=e;else if("string"===typeof e&&e.match(/^\d{2}:\d{2}:\d{2}$/))n=e.substring(0,5);else if("string"===typeof e&&e.includes("T")){var t;n=null===(t=e.split("T")[1])||void 0===t?void 0:t.substring(0,5)}const r=new Date("2000-01-01T".concat(n));if(isNaN(r.getTime()))return console.log("formatTime: Invalid date created from:",n),"Invalid time";return r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch(A){return console.log("formatTime error:",A,"for input:",e),"Invalid time"}},U=e=>{if(null===e||void 0===e||""===e)return"";if("number"===typeof e)switch(e){case 0:return"available";case 1:return"booked";case 2:return"pending";case 3:return"confirmed";case 4:return"rejected";case 5:return"cancelled";default:return"unknown"}if("string"===typeof e)return e.toLowerCase();if("boolean"===typeof e)return e?"active":"inactive";if("object"===typeof e)return void 0!==e.value?U(e.value):void 0!==e.name?U(e.name):String(e).toLowerCase();try{return String(e).toLowerCase()}catch(A){return console.warn("Error converting status to string:",e,A),"unknown"}},M=e=>{if(!e)return"gray";switch(U(e)){case"available":case"confirmed":return"green";case"booked":return"orange";case"pending":return"blue";case"rejected":return"red";default:return"gray"}},F=()=>{h(""),f("")},j=()=>o.filter((e=>{const t=U(e.status);if("booked"===t||"pending"===t||"confirmed"===t||"available"===t)return!1;const n=!e.workDate&&!e.date||e.workDate&&isNaN(new Date(e.workDate).getTime())||e.date&&isNaN(new Date(e.date).getTime()),r=!e.startTime||"Invalid time"===e.startTime||"string"===typeof e.startTime&&!e.startTime.match(/^\d{1,2}:\d{2}(:\d{2})?$/)||isNaN(new Date("2000-01-01T".concat(e.startTime)).getTime()),i=!e.endTime||"Invalid time"===e.endTime||"string"===typeof e.endTime&&!e.endTime.match(/^\d{1,2}:\d{2}(:\d{2})?$/)||isNaN(new Date("2000-01-01T".concat(e.endTime)).getTime());return n||r||i})).length,Q=e=>{var t,n,r,i;return(null===(t=e.availableSlot)||void 0===t?void 0:t.workDate)||(null===(n=e.availableSlot)||void 0===n?void 0:n.date)||(null===(r=e.slot)||void 0===r?void 0:r.workDate)||(null===(i=e.slot)||void 0===i?void 0:i.date)||e.workDate||e.date||e.appointmentDate},V=e=>{var t,n;return(null===(t=e.availableSlot)||void 0===t?void 0:t.startTime)||(null===(n=e.slot)||void 0===n?void 0:n.startTime)||e.startTime||e.appointmentTime},H=e=>{var t,n;return(null===(t=e.availableSlot)||void 0===t?void 0:t.endTime)||(null===(n=e.slot)||void 0===n?void 0:n.endTime)||e.endTime},z=e=>{var t,n,r,i,o,a,s,c,l,d;const u=[e.memberName,e.userName,null===(t=e.user)||void 0===t?void 0:t.name,null===(n=e.user)||void 0===n?void 0:n.userName,null===(r=e.user)||void 0===r?void 0:r.memberName,null===(i=e.member)||void 0===i?void 0:i.name,null===(o=e.member)||void 0===o?void 0:o.userName,null===(a=e.member)||void 0===a?void 0:a.memberName,null===(s=e.bookedBy)||void 0===s?void 0:s.name,null===(c=e.bookedBy)||void 0===c?void 0:c.userName,null===(l=e.client)||void 0===l?void 0:l.name,null===(d=e.client)||void 0===d?void 0:d.userName,e.name,e.fullName,e.displayName];for(const A of u)if(A&&"string"===typeof A&&""!==A.trim())return A.trim();return"Unknown User"},K=e=>{var t,n,r,i,o,a;const s=[e.memberEmail,e.userEmail,null===(t=e.user)||void 0===t?void 0:t.email,null===(n=e.user)||void 0===n?void 0:n.memberEmail,null===(r=e.member)||void 0===r?void 0:r.email,null===(i=e.member)||void 0===i?void 0:i.userEmail,null===(o=e.bookedBy)||void 0===o?void 0:o.email,null===(a=e.client)||void 0===a?void 0:a.email,e.email];for(const c of s)if(c&&"string"===typeof c&&""!==c.trim()&&c.includes("@"))return c.trim();return null},G=e=>{var t,n,r;const i=[e.note,e.appointmentNote,e.memberNote,e.member_note,e.userNote,e.user_note,e.bookingNote,e.booking_note,e.description,null===(t=e.member)||void 0===t?void 0:t.note,null===(n=e.user)||void 0===n?void 0:n.note,null===(r=e.bookedBy)||void 0===r?void 0:r.note];for(const o of i)if(o&&"string"===typeof o&&""!==o.trim())return o.trim();return null},W=e=>{if(!e)return"00:00";let t=String(e).trim();if(/^\d{1}:\d{2}$/.test(t)&&(t="0"+t),/^\d{2}:\d{2}$/.test(t))return t;if(/^\d{1,2}:\d{2}:\d{2}$/.test(t))return t=t.split(":").slice(0,2).join(":"),/^\d{1}:\d{2}$/.test(t)&&(t="0"+t),t;const n=new Date("2000-01-01T".concat(t));return isNaN(n.getTime())?"00:00":n.toTimeString().slice(0,5)},q=function(e){var t,n,r,i;let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=e.agoraInfo||{};return{appId:a.appId,channelName:a.channelName,token:o?null===(t=a.consultant)||void 0===t?void 0:t.token:null===(n=a.member)||void 0===n?void 0:n.token,userId:o?null===(r=a.consultant)||void 0===r?void 0:r.userId:null===(i=a.member)||void 0===i?void 0:i.userId}};return n()?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsxs)("div",{className:"consult-time-container",children:[(0,Tt.jsxs)("div",{className:"consult-time-header",children:[(0,Tt.jsx)("h1",{children:"Qu\u1ea3n L\xfd Th\u1eddi Gian T\u01b0 V\u1ea5n"}),(0,Tt.jsx)("p",{children:"Qu\u1ea3n l\xfd slot th\u1eddi gian v\xe0 cu\u1ed9c h\u1eb9n c\u1ee7a b\u1ea1n"})]}),A&&(0,Tt.jsxs)("div",{className:"alert alert-error",children:[(0,Tt.jsx)(Ld,{icon:xu}),A,(0,Tt.jsx)("button",{onClick:F,className:"close-btn",children:"\xd7"})]}),p&&(0,Tt.jsxs)("div",{className:"alert alert-success",children:[(0,Tt.jsx)(Ld,{icon:Iu}),p,(0,Tt.jsx)("button",{onClick:F,className:"close-btn",children:"\xd7"})]}),(0,Tt.jsxs)("div",{className:"tabs",children:[(0,Tt.jsxs)("button",{className:"tab ".concat("manage-slots"===r?"active":""),onClick:()=>i("manage-slots"),children:[(0,Tt.jsx)(Ld,{icon:Au}),"Qu\u1ea3n L\xfd Slot"]}),(0,Tt.jsxs)("button",{className:"tab ".concat("appointments"===r?"active":""),onClick:()=>i("appointments"),children:[(0,Tt.jsx)(Ld,{icon:Cu}),"Cu\u1ed9c H\u1eb9n"]})]}),"manage-slots"===r&&(0,Tt.jsxs)("div",{className:"tab-content",children:[(0,Tt.jsxs)("div",{className:"actions",children:[(0,Tt.jsxs)("button",{className:"btn btn-secondary",onClick:()=>{g(!0),F()},children:[(0,Tt.jsx)(Ld,{icon:yu}),"T\u1ea1o Slot"]}),j()>0&&(0,Tt.jsxs)("button",{className:"btn btn-danger",onClick:async()=>{if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a t\u1ea5t c\u1ea3 slot c\xf3 d\u1eef li\u1ec7u kh\xf4ng h\u1ee3p l\u1ec7 kh\xf4ng? H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c.")){u(!0);try{const e=o.filter((e=>{const t=U(e.status);if("booked"===t||"pending"===t||"confirmed"===t||"available"===t)return!1;const n=!e.workDate&&!e.date||e.workDate&&isNaN(new Date(e.workDate).getTime())||e.date&&isNaN(new Date(e.date).getTime()),r=!e.startTime||"Invalid time"===e.startTime||"string"===typeof e.startTime&&!e.startTime.match(/^\d{1,2}:\d{2}(:\d{2})?$/)||isNaN(new Date("2000-01-01T".concat(e.startTime)).getTime()),i=!e.endTime||"Invalid time"===e.endTime||"string"===typeof e.endTime&&!e.endTime.match(/^\d{1,2}:\d{2}(:\d{2})?$/)||isNaN(new Date("2000-01-01T".concat(e.endTime)).getTime());return n||r||i}));if(0===e.length)return void f("Kh\xf4ng t\xecm th\u1ea5y slot n\xe0o c\xf3 d\u1eef li\u1ec7u kh\xf4ng h\u1ee3p l\u1ec7 c\u1ea7n x\xf3a.");let t=0,n=0;for(const r of e)try{(await za.deleteSlot(r.id)).success?t++:n++}catch(rI){n++}t>0&&(f("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng ".concat(t," slot c\xf3 d\u1eef li\u1ec7u kh\xf4ng h\u1ee3p l\u1ec7.")),k()),n>0&&h("Kh\xf4ng th\u1ec3 x\xf3a ".concat(n," slot. Vui l\xf2ng th\u1eed l\u1ea1i."))}catch(rI){h("L\u1ed7i trong qu\xe1 tr\xecnh d\u1ecdn d\u1eb9p: "+rI.message)}finally{u(!1)}}},disabled:d,children:[(0,Tt.jsx)(Ld,{icon:ou}),d?"\u0110ang d\u1ecdn d\u1eb9p...":"X\xf3a ".concat(j()," Slot Kh\xf4ng H\u1ee3p L\u1ec7").concat((j(),""))]})]}),m&&(0,Tt.jsx)("div",{className:"modal-overlay",children:(0,Tt.jsxs)("div",{className:"modal bulk-modal",children:[(0,Tt.jsxs)("div",{className:"modal-header",children:[(0,Tt.jsx)("h3",{children:"T\u1ea1o Slot"}),(0,Tt.jsx)("button",{onClick:()=>g(!1),className:"close-btn",children:"\xd7"})]}),(0,Tt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),T.selectedDates.length&&T.selectedTimeSlots.length){for(const e of T.selectedDates){const t=new Date(e),n=new Date;if(n.setHours(0,0,0,0),t<n)return void h("Cannot create slots in the past");const r=t.getDay();if(0===r||6===r)return void h("All selected dates must be weekdays (Monday to Friday)")}u(!0);try{const e=[];for(const n of T.selectedDates)for(const t of T.selectedTimeSlots)e.push({workDate:n,startTime:t.startTime,endTime:t.endTime});if(0===e.length)return void h("No slots to create with the selected criteria");const t=await za.createMultipleSlots(e);t.success?(f("".concat(e.length," slots created successfully!")),I({selectedDates:[],selectedTimeSlots:[]}),g(!1),k()):h("Failed to create slots: "+t.error)}catch(rI){h("Error creating slots: "+rI.message)}finally{u(!1)}}else h("Please select both dates and time slots for bulk creation")},className:"bulk-form",children:[(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{children:"Ch\u1ecdn Ng\xe0y"}),(0,Tt.jsx)("div",{className:"date-buttons-grid",children:x.map((e=>(0,Tt.jsx)("button",{type:"button",className:"date-btn ".concat(T.selectedDates.includes(e.dateString)?"selected":""),onClick:()=>{const t=T.selectedDates.includes(e.dateString)?T.selectedDates.filter((t=>t!==e.dateString)):[...T.selectedDates,e.dateString];I(l(l({},T),{},{selectedDates:t}))},children:e.label},e.dateString)))})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{children:"Ch\u1ecdn Khung Gi\u1edd"}),(0,Tt.jsx)("div",{className:"time-buttons-grid",children:R.map((e=>(0,Tt.jsx)("button",{type:"button",className:"time-btn ".concat(T.selectedTimeSlots.some((t=>t.label===e.label))?"selected":""),onClick:()=>{const t=T.selectedTimeSlots.some((t=>t.label===e.label))?T.selectedTimeSlots.filter((t=>t.label!==e.label)):[...T.selectedTimeSlots,e];I(l(l({},T),{},{selectedTimeSlots:t}))},children:e.label},e.label)))})]}),(0,Tt.jsxs)("div",{className:"form-actions",children:[(0,Tt.jsx)("button",{type:"button",onClick:()=>g(!1),className:"btn btn-secondary",children:"H\u1ee7y"}),(0,Tt.jsxs)("button",{type:"submit",disabled:d,className:"btn btn-primary",children:[d?(0,Tt.jsx)(Ld,{icon:Su,spin:!0}):(0,Tt.jsx)(Ld,{icon:Iu}),"T\u1ea1o Slot"]})]})]})]})}),v&&(0,Tt.jsx)("div",{className:"modal-overlay",children:(0,Tt.jsxs)("div",{className:"modal bulk-modal",children:[(0,Tt.jsxs)("div",{className:"modal-header",children:[(0,Tt.jsx)("h3",{children:"Ch\u1ec9nh S\u1eeda Slot"}),(0,Tt.jsx)("button",{onClick:()=>y(null),className:"close-btn",children:"\xd7"})]}),(0,Tt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=v.workDate||v.date;if(!t||!v.startTime||!v.endTime)return void h("Please select both date and time slot");const n=(e=>{const t={},n=e.workDate||e.date;if(n){const e=new Date(n),r=new Date;r.setHours(0,0,0,0),e<r&&(t.date="Cannot create slots in the past");const i=e.getDay();0!==i&&6!==i||(t.date="Work date must be a weekday (Monday to Friday)")}else t.date="Date is required";return e.startTime||(t.startTime="Start time is required"),e.endTime||(t.endTime="End time is required"),e.startTime&&e.endTime&&e.startTime>=e.endTime&&(t.endTime="End time must be after start time"),t})(v);if(O(n),!(Object.keys(n).length>0)){u(!0);try{const e={workDate:t,startTime:v.startTime,endTime:v.endTime};console.log("Updating slot with data:",e);const n=await za.updateSlot(v.id,e);n.success?(f("Slot updated successfully!"),y(null),O({}),await k(),setTimeout((()=>{window.location.reload()}),1e3)):h("Failed to update slot: "+n.error)}catch(rI){h("Error updating slot: "+rI.message)}finally{u(!1)}}},className:"bulk-form",children:[(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{children:"Ch\u1ecdn Ng\xe0y"}),(0,Tt.jsx)("div",{className:"date-buttons-grid",children:x.map((e=>(0,Tt.jsx)("button",{type:"button",className:"date-btn ".concat((v.workDate||v.date)===e.dateString?"selected":""),onClick:()=>{y(l(l({},v),{},{date:e.dateString,workDate:e.dateString}))},children:e.label},e.dateString)))})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{children:"Ch\u1ecdn Khung Gi\u1edd"}),(0,Tt.jsx)("div",{className:"time-buttons-grid",children:R.map((e=>(0,Tt.jsx)("button",{type:"button",className:"time-btn ".concat(v.startTime===e.startTime&&v.endTime===e.endTime?"selected":""),onClick:()=>{y(l(l({},v),{},{startTime:e.startTime,endTime:e.endTime}))},children:e.label},e.label)))})]}),(0,Tt.jsxs)("div",{className:"form-actions",children:[(0,Tt.jsx)("button",{type:"button",onClick:()=>y(null),className:"btn btn-secondary",children:"H\u1ee7y"}),(0,Tt.jsxs)("button",{type:"submit",disabled:d,className:"btn btn-primary",children:[d?(0,Tt.jsx)(Ld,{icon:Su,spin:!0}):(0,Tt.jsx)(Ld,{icon:Iu}),"C\u1eadp Nh\u1eadt Slot"]})]})]})]})}),(0,Tt.jsxs)("div",{className:"slots-list",children:[d&&(0,Tt.jsxs)("div",{className:"loading",children:[(0,Tt.jsx)(Ld,{icon:Su,spin:!0})," \u0110ang t\u1ea3i..."]}),!d&&0===o.length&&(0,Tt.jsxs)("div",{className:"empty-state",children:[(0,Tt.jsx)(Ld,{icon:Cu}),(0,Tt.jsx)("h3",{children:"Ch\u01b0a t\u1ea1o slot n\xe0o"}),(0,Tt.jsx)("p",{children:"T\u1ea1o slot th\u1eddi gian \u0111\u1ea7u ti\xean \u0111\u1ec3 b\u1eaft \u0111\u1ea7u nh\u1eadn cu\u1ed9c h\u1eb9n."})]}),!d&&o.length>0&&(0,Tt.jsx)("div",{className:"slots-grid",children:(()=>{const e=new Date;return o.filter((t=>{const n=t.workDate||t.date,r=W(t.endTime);if(!n||!r)return!1;let i=n;n.includes("T")?i=n:i+="T"+r;return new Date(i)>e})).sort(((e,t)=>{const n=e.workDate||e.date,r=t.workDate||t.date,i=W(e.startTime),o=W(t.startTime);return new Date("".concat(n,"T").concat(i))-new Date("".concat(r,"T").concat(o))}))})().map((e=>{try{const t=U(e.status),n=M(e.status),r="booked"===t;return(0,Tt.jsxs)("div",{className:"slot-card ".concat(t),children:[(0,Tt.jsxs)("div",{className:"slot-header",children:[(0,Tt.jsx)("div",{className:"slot-date",children:L(e.workDate||e.date)}),(0,Tt.jsx)("div",{className:"slot-status status-".concat(n),children:e.status})]}),(0,Tt.jsxs)("div",{className:"slot-time",children:[D(e.startTime)," -"," ",D(e.endTime)]}),(0,Tt.jsxs)("div",{className:"slot-actions",children:[(0,Tt.jsx)("button",{onClick:()=>y(e),className:"btn btn-small btn-secondary",disabled:r,children:(0,Tt.jsx)(Ld,{icon:zd})}),(0,Tt.jsx)("button",{onClick:()=>(async e=>{const t=o.find((t=>t.id===e));if(!t)return void h("Kh\xf4ng t\xecm th\u1ea5y slot \u0111\u1ec3 x\xf3a");const n=U(t.status);if("booked"!==n&&"pending"!==n&&"confirmed"!==n){if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a slot n\xe0y kh\xf4ng?")){u(!0);try{const t=await za.deleteSlot(e);t.success?(f("\u0110\xe3 x\xf3a slot th\xe0nh c\xf4ng!"),k()):h("Kh\xf4ng th\u1ec3 x\xf3a slot: "+t.error)}catch(rI){h("L\u1ed7i khi x\xf3a slot: "+rI.message)}finally{u(!1)}}}else h("Kh\xf4ng th\u1ec3 x\xf3a slot \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u1eb7t l\u1ecbch ho\u1eb7c \u0111ang ch\u1edd x\xe1c nh\u1eadn")})(e.id),className:"btn btn-small btn-danger",disabled:r,title:r?"Kh\xf4ng th\u1ec3 x\xf3a slot \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u1eb7t":"X\xf3a slot",children:(0,Tt.jsx)(Ld,{icon:ou})})]})]},e.id)}catch(A){return console.error("Error rendering slot:",e,A),(0,Tt.jsxs)("div",{className:"slot-card error",children:[(0,Tt.jsxs)("div",{className:"slot-header",children:[(0,Tt.jsx)("div",{className:"slot-date",children:"Error"}),(0,Tt.jsx)("div",{className:"slot-status",children:"Invalid"})]}),(0,Tt.jsx)("div",{className:"slot-time",children:"Error processing slot data"})]},e.id)}}))})]})]}),"appointments"===r&&(0,Tt.jsx)("div",{className:"tab-content",children:(0,Tt.jsxs)("div",{className:"appointments-list",children:[d&&(0,Tt.jsxs)("div",{className:"loading",children:[(0,Tt.jsx)(Ld,{icon:Su,spin:!0})," \u0110ang t\u1ea3i..."]}),!d&&0===s.length&&(0,Tt.jsxs)("div",{className:"empty-state",children:[(0,Tt.jsx)(Ld,{icon:Cu}),(0,Tt.jsx)("h3",{children:"Ch\u01b0a c\xf3 cu\u1ed9c h\u1eb9n n\xe0o"}),(0,Tt.jsx)("p",{children:"C\xe1c cu\u1ed9c h\u1eb9n s\u1ebd xu\u1ea5t hi\u1ec7n \u1edf \u0111\xe2y khi ng\u01b0\u1eddi d\xf9ng \u0111\u1eb7t l\u1ecbch tr\xean slot c\u1ee7a b\u1ea1n."})]}),!d&&s.length>0&&(0,Tt.jsx)("div",{className:"appointments-grid",children:s.map((e=>{try{const t=M(e.status),n="pending"===U(e.status);return(0,Tt.jsxs)("div",{className:"appointment-card status-".concat(t),children:[(0,Tt.jsxs)("div",{className:"appointment-header",children:[(0,Tt.jsxs)("div",{className:"appointment-user",children:[(0,Tt.jsx)(Ld,{icon:Wd}),(0,Tt.jsxs)("div",{className:"user-info",children:[(0,Tt.jsx)("div",{className:"user-name",children:z(e)}),K(e)&&(0,Tt.jsx)("div",{className:"user-email",children:K(e)})]})]}),(0,Tt.jsx)("div",{className:"appointment-status status-".concat(t),children:e.status})]}),(0,Tt.jsxs)("div",{className:"appointment-details",children:[(0,Tt.jsxs)("div",{className:"appointment-date",children:[(0,Tt.jsx)(Ld,{icon:Cu}),L(Q(e))]}),(0,Tt.jsxs)("div",{className:"appointment-time",children:[(0,Tt.jsx)(Ld,{icon:Au}),D(V(e)),"-"," ",D(H(e))]})]}),G(e)&&(0,Tt.jsxs)("div",{className:"appointment-note",children:[(0,Tt.jsx)("strong",{children:"Note:"})," ",G(e)]}),"confirmed"===U(e.status)&&(0,Tt.jsxs)("div",{className:"appointment-features",children:[(()=>{const t=q(e),n=!!t.channelName,r=!!t.token;return n&&r&&(0,Tt.jsxs)("button",{onClick:()=>E(e),className:"btn btn-primary btn-small",children:[(0,Tt.jsx)(Ld,{icon:Lu}),"Tham gia video call"]})})(),(0,Tt.jsxs)("button",{onClick:()=>_(e),className:"btn btn-secondary btn-small",children:[(0,Tt.jsx)(Ld,{icon:Bu}),"Xem ghi ch\xfa"]}),(0,Tt.jsxs)("button",{onClick:()=>C(e),className:"btn btn-info btn-small",children:[(0,Tt.jsx)(Ld,{icon:yu}),"Th\xeam ghi ch\xfa"]})]}),n&&(0,Tt.jsxs)("div",{className:"appointment-actions",children:[(0,Tt.jsxs)("button",{onClick:()=>{const t=prompt("Nh\u1eadp link cu\u1ed9c h\u1ecdp (t\xf9y ch\u1ecdn):"),n=prompt("Nh\u1eadp ghi ch\xfa c\u1ee7a chuy\xean gia (t\xf9y ch\u1ecdn):");!async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";u(!0);try{console.log("Attempting to confirm appointment:",{appointmentId:e,meetingLink:t,note:n});const r=s.find((t=>t.id===e));console.log("Current appointment data:",r),console.log("Current appointment status:",null===r||void 0===r?void 0:r.status);const i=await za.confirmAppointment(e,{meetingLink:t,note:n});i.success?(f("Appointment confirmed successfully!"),P()):h("Failed to confirm appointment: "+i.error)}catch(rI){h("Error confirming appointment: "+rI.message)}finally{u(!1)}}(e.id,t,n)},className:"btn btn-success btn-small",children:[(0,Tt.jsx)(Ld,{icon:Iu}),"X\xe1c Nh\u1eadn"]}),(0,Tt.jsxs)("button",{onClick:()=>{const t=prompt("Nh\u1eadp l\xfd do t\u1eeb ch\u1ed1i:");t&&(async(e,t)=>{u(!0);try{const n=await za.rejectAppointment(e,t);n.success?(f("Appointment rejected successfully!"),P()):h("Failed to reject appointment: "+n.error)}catch(rI){h("Error rejecting appointment: "+rI.message)}finally{u(!1)}})(e.id,t)},className:"btn btn-danger btn-small",children:[(0,Tt.jsx)(Ld,{icon:Eu}),"T\u1eeb Ch\u1ed1i"]}),!1,!1]}),e.meetingLink&&(0,Tt.jsxs)("div",{className:"appointment-meeting",children:[(0,Tt.jsx)("strong",{children:"Link Cu\u1ed9c H\u1ecdp:"}),(0,Tt.jsx)("a",{href:e.meetingLink,target:"_blank",rel:"noopener noreferrer",children:e.meetingLink})]})]},e.id)}catch(A){return console.error("Error rendering appointment:",e,A),(0,Tt.jsxs)("div",{className:"appointment-card error",children:[(0,Tt.jsxs)("div",{className:"appointment-header",children:[(0,Tt.jsxs)("div",{className:"appointment-user",children:[(0,Tt.jsx)(Ld,{icon:Wd}),"Error loading user"]}),(0,Tt.jsx)("div",{className:"appointment-status",children:"Invalid"})]}),(0,Tt.jsx)("div",{className:"appointment-details",children:"Error processing appointment data"})]},e.id)}}))})]})})]}),b&&(0,Tt.jsx)("div",{className:"modal-overlay",onClick:()=>E(null),children:(0,Tt.jsxs)("div",{className:"modal-content video-call-modal",onClick:e=>e.stopPropagation(),children:[(0,Tt.jsxs)("div",{className:"modal-header",children:[(0,Tt.jsxs)("h3",{children:[(0,Tt.jsx)(Ld,{icon:Lu}),"Video Call - ",z(b)]}),(0,Tt.jsx)("button",{className:"modal-close",onClick:()=>E(null),children:"\xd7"})]}),(0,Tt.jsx)("div",{className:"modal-body",children:(()=>{const e=q(b);return(0,Tt.jsx)(lw,{appointmentId:b.id,agoraAppId:e.appId,agoraChannelName:e.channelName,agoraToken:e.token,agoraUserId:e.userId,onCallEnd:()=>E(null),onError:e=>{h("L\u1ed7i video call: "+e.message),E(null)}})})()})]})}),w&&(0,Tt.jsx)("div",{className:"modal-overlay",onClick:()=>_(null),children:(0,Tt.jsxs)("div",{className:"modal-content notes-modal",onClick:e=>e.stopPropagation(),children:[(0,Tt.jsxs)("div",{className:"modal-header",children:[(0,Tt.jsxs)("h3",{children:[(0,Tt.jsx)(Ld,{icon:Bu}),"Ghi ch\xfa t\u01b0 v\u1ea5n - ",z(w)]}),(0,Tt.jsx)("button",{className:"modal-close",onClick:()=>_(null),children:"\xd7"})]}),(0,Tt.jsx)("div",{className:"modal-body",children:(0,Tt.jsx)(dw,{appointmentId:w.id,showTitle:!1,onCreateNote:B,onUpdateNote:async(e,t)=>{try{const n=await za.updateNote(e,t);n.success?f("\u0110\xe3 c\u1eadp nh\u1eadt ghi ch\xfa th\xe0nh c\xf4ng!"):h("Kh\xf4ng th\u1ec3 c\u1eadp nh\u1eadt ghi ch\xfa: "+n.error)}catch(rI){h("L\u1ed7i khi c\u1eadp nh\u1eadt ghi ch\xfa: "+rI.message)}},onDeleteNote:async e=>{try{const t=await za.deleteNote(e);t.success?f("\u0110\xe3 x\xf3a ghi ch\xfa th\xe0nh c\xf4ng!"):h("Kh\xf4ng th\u1ec3 x\xf3a ghi ch\xfa: "+t.error)}catch(rI){h("L\u1ed7i khi x\xf3a ghi ch\xfa: "+rI.message)}}})})]})}),S&&(0,Tt.jsx)(uw,{appointmentId:S.id,memberName:z(S),onClose:()=>C(null),onSubmit:B})]}):(0,Tt.jsx)("div",{className:"consult-time-container",children:(0,Tt.jsxs)("div",{className:"error-message",children:[(0,Tt.jsx)(Ld,{icon:xu}),"Truy c\u1eadp b\u1ecb t\u1eeb ch\u1ed1i. Trang n\xe0y ch\u1ec9 d\xe0nh cho chuy\xean gia t\u01b0 v\u1ea5n."]})})};if("undefined"!==typeof document){const e=document.createElement("style");e.textContent="\n  .role-select {\n    padding: 6px 12px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    background-color: white;\n    font-size: 14px;\n    min-width: 120px;\n    cursor: pointer;\n  }\n\n  .role-select:focus {\n    outline: none;\n    border-color: #007bff;\n    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);\n  }\n\n  .role-select:disabled {\n    background-color: #f8f9fa;\n    cursor: not-allowed;\n    opacity: 0.6;\n  }\n\n  .users-table td {\n    vertical-align: middle;\n  }\n\n  .dashboard-container {\n    max-width: 1530.4px;\n    margin: 0 auto;\n    padding: 0;\n    width: 100%;\n  }\n\n  .page-header {\n    background-image: url('https://i.pinimg.com/736x/b5/31/76/b5317669cef30ef46f6239ddc61256a3.jpg');\n    color: white;\n    padding: 5rem 0;\n    text-align: center;\n    margin-bottom: 2rem;\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n    position: relative;\n    width: 100%;\n  }\n\n  .page-header::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.4);\n    z-index: 1;\n  }\n\n  .page-header .container {\n    position: relative;\n    z-index: 2;\n  }\n\n  .secondary-bg {\n    background-color: #E8F5E9;\n  }\n\n  .page-header h1 {\n    font-size: 2.5rem;\n    margin-bottom: 1rem;\n    font-weight: 700;\n    color: #ffffff;\n    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);\n    letter-spacing: 1px;\n  }\n\n  .page-header p {\n    font-size: 1.2rem;\n    max-width: 800px;\n    margin: 0 auto;\n    color: #ffffff;\n    text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.7);\n    font-weight: 400;\n  }\n\n  .fade-in {\n    opacity: 0;\n    transform: translateY(20px);\n    animation: fadeInDashboard 0.8s ease-in-out forwards;\n  }\n\n  @keyframes fadeInDashboard {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  .delay-100 {\n    animation-delay: 0.1s;\n  }\n\n  .delay-200 {\n    animation-delay: 0.2s;\n  }\n\n  .delay-300 {\n    animation-delay: 0.3s;\n  }\n\n  .container {\n    width: 100%;\n    max-width: 1530.4px;\n    margin: 0 auto;\n    padding: 0 1rem;\n  }\n\n  .dashboard-tabs {\n    display: flex;\n    gap: 10px;\n    margin: 0 1rem 30px 1rem;\n    border-bottom: 2px solid #f1f3f4;\n    padding-bottom: 0;\n  }\n\n  .tab-button {\n    background: none;\n    border: none;\n    padding: 15px 25px;\n    font-size: 16px;\n    font-weight: 500;\n    color: #666;\n    cursor: pointer;\n    border-radius: 8px 8px 0 0;\n    transition: all 0.3s ease;\n    position: relative;\n  }\n\n  .tab-button:hover {\n    background-color: #f8f9fa;\n    color: #333;\n  }\n\n  .tab-button.active {\n    background-color: #fff;\n    color: #007bff;\n    box-shadow: 0 2px 8px rgba(0, 123, 255, 0.15);\n  }\n\n  .tab-button.active::after {\n    content: '';\n    position: absolute;\n    bottom: -2px;\n    left: 0;\n    right: 0;\n    height: 3px;\n    background-color: #007bff;\n  }\n\n  .tab-content {\n    background: white;\n    border-radius: 10px;\n    padding: 30px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n    min-height: 400px;\n    margin: 0 1rem;\n  }\n\n  .search-container {\n    margin-bottom: 25px;\n  }\n\n  .search-input {\n    width: 100%;\n    max-width: 400px;\n    padding: 12px 20px;\n    border: 2px solid #e9ecef;\n    border-radius: 25px;\n    font-size: 16px;\n    transition: border-color 0.3s ease;\n  }\n\n  .search-input:focus {\n    outline: none;\n    border-color: #007bff;\n    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);\n  }\n\n  .users-table-container {\n    background: white;\n    border-radius: 10px;\n    overflow: hidden;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  }\n\n  .users-table {\n    width: 100%;\n    border-collapse: collapse;\n    font-size: 14px;\n  }\n\n  .users-table th {\n    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n    padding: 20px 15px;\n    text-align: left;\n    font-weight: 600;\n    color: #495057;\n    border-bottom: 2px solid #dee2e6;\n  }\n\n  .users-table td {\n    padding: 18px 15px;\n    border-bottom: 1px solid #f1f3f4;\n  }\n\n  .users-table tr:hover {\n    background-color: #f8f9fa;\n  }\n\n  .user-name {\n    font-weight: 500;\n    color: #333;\n  }\n\n  .user-email {\n    color: #666;\n    font-size: 13px;\n  }\n\n  .loading, .error, .no-data {\n    text-align: center;\n    padding: 60px 20px;\n    color: #666;\n    font-size: 16px;\n  }\n\n  .error {\n    color: #dc3545;\n  }\n\n  .notification {\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 15px 20px;\n    border-radius: 8px;\n    color: white;\n    font-weight: 500;\n    z-index: 1000;\n    animation: slideIn 0.3s ease;\n  }\n\n  .notification.success {\n    background-color: #28a745;\n  }\n\n  .notification.error {\n    background-color: #dc3545;\n  }\n\n  @keyframes slideIn {\n    from {\n      transform: translateX(100%);\n      opacity: 0;\n    }\n    to {\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n\n  .notification-content {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n  }\n\n  .notification-close {\n    background: none;\n    border: none;\n    color: white;\n    cursor: pointer;\n    padding: 0;\n    margin-left: 10px;\n    font-size: 18px;\n  }\n\n  .modal-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 1000;\n  }\n\n  .confirm-modal {\n    background: white;\n    padding: 30px;\n    border-radius: 10px;\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n    max-width: 400px;\n    width: 90%;\n  }\n\n  .confirm-modal h3 {\n    margin: 0 0 15px 0;\n    color: #333;\n  }\n\n  .confirm-modal p {\n    margin: 0 0 25px 0;\n    color: #666;\n    line-height: 1.5;\n  }\n\n  .modal-actions {\n    display: flex;\n    gap: 10px;\n    justify-content: flex-end;\n  }\n\n  .btn {\n    padding: 10px 20px;\n    border: none;\n    border-radius: 5px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s ease;\n  }\n\n  .btn-danger {\n    background-color: #dc3545;\n    color: white;\n  }\n\n  .btn-danger:hover {\n    background-color: #c82333;\n  }\n\n  .btn-secondary {\n    background-color: #6c757d;\n    color: white;\n  }\n\n  .btn-secondary:hover {\n    background-color: #5a6268;\n  }\n",document.head.appendChild(e)}const hw="users",pw="courses",fw=()=>{const{currentUser:e,isAdmin:n}=ts(),r=he(),[i,o]=(0,t.useState)([]),[a,s]=(0,t.useState)([]),[c,d]=(0,t.useState)(""),[u,A]=(0,t.useState)(null),[h,p]=(0,t.useState)({show:!1,message:"",type:""}),[f,m]=(0,t.useState)(hw),[g,v]=(0,t.useState)(!1),[y,b]=(0,t.useState)(null);(0,t.useEffect)((()=>{n()?(E(),w()):r("/login")}),[n,r]),(0,t.useEffect)((()=>{if(h.show){const e=setTimeout((()=>{p({show:!1,message:"",type:""})}),3e3);return()=>clearTimeout(e)}}),[h]);const E=async()=>{await _()},w=async()=>{try{const e=await $a.getRoles();if(e.success){let t=e.data||[];s(t)}}catch(rI){console.error("Error fetching roles:",rI)}},_=async()=>{v(!0),b(null);try{const e=await $a.getUsers();if(e.success){let t=e.data||[];t&&!Array.isArray(t)&&(t=t.users&&Array.isArray(t.users)?t.users:t.data&&Array.isArray(t.data)?t.data:Object.values(t).filter((e=>"object"===typeof e&&null!==e&&e.email))||[]),o(t)}else b(e.error||"Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch ng\u01b0\u1eddi d\xf9ng"),S("Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch ng\u01b0\u1eddi d\xf9ng","error")}catch(rI){b(rI.message||"\u0110\xe3 x\u1ea3y ra l\u1ed7i kh\xf4ng mong mu\u1ed1n"),S("\u0110\xe3 x\u1ea3y ra l\u1ed7i kh\xf4ng mong mu\u1ed1n","error")}finally{v(!1)}},S=(e,t)=>{p({show:!0,message:e,type:t})},C=e=>{if(m(e),e===pw)r("/admin/courses");else E()},T=Array.isArray(i)?i.filter((e=>(e.fullname||"").toLowerCase().includes(c.toLowerCase())||(e.email||"").toLowerCase().includes(c.toLowerCase())||(e.roleName||"").toLowerCase().includes(c.toLowerCase()))):[],I=()=>g?(0,Tt.jsx)("div",{className:"loading",children:"\u0110ang t\u1ea3i ng\u01b0\u1eddi d\xf9ng..."}):y?(0,Tt.jsxs)("div",{className:"error",children:["L\u1ed7i: ",y]}):i&&0!==i.length?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)("div",{className:"search-container fade-in delay-300",children:(0,Tt.jsx)("input",{type:"text",placeholder:"T\xecm ki\u1ebfm ng\u01b0\u1eddi d\xf9ng theo t\xean, email ho\u1eb7c vai tr\xf2...",value:c,onChange:e=>d(e.target.value),className:"search-input"})}),(0,Tt.jsx)("div",{className:"users-table-container fade-in delay-300",children:(0,Tt.jsxs)("table",{className:"users-table",children:[(0,Tt.jsx)("thead",{children:(0,Tt.jsxs)("tr",{children:[(0,Tt.jsx)("th",{children:"T\xean"}),(0,Tt.jsx)("th",{children:"Email"}),(0,Tt.jsx)("th",{children:"Vai tr\xf2"}),(0,Tt.jsx)("th",{children:"Ng\xe0y tham gia"}),(0,Tt.jsx)("th",{children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,Tt.jsx)("tbody",{children:T.map((e=>(0,Tt.jsxs)("tr",{children:[(0,Tt.jsx)("td",{children:(0,Tt.jsx)("div",{className:"user-name",children:e.fullname})}),(0,Tt.jsx)("td",{children:(0,Tt.jsx)("div",{className:"user-email",children:e.email})}),(0,Tt.jsx)("td",{children:(0,Tt.jsxs)("select",{value:e.roleName||"",onChange:t=>{const n=t.target.value;n&&n!==e.roleName&&(async(e,t)=>{if(!t||""===t.trim())return void S("Vui l\xf2ng ch\u1ecdn vai tr\xf2 h\u1ee3p l\u1ec7","error");const n=a.find((e=>e.roleName===t));v(!0);try{const r=await $a.updateUserRole(e,t,null===n||void 0===n?void 0:n.roleId);if(r.success||r.isSuccess){o(i.map((n=>n.userId===e?l(l({},n),{},{roleName:t}):n)));const n=r.message||"\u0110\xe3 thay \u0111\u1ed5i vai tr\xf2 th\xe0nh ".concat(t," th\xe0nh c\xf4ng!");S(n,"success")}else{let e="Kh\xf4ng th\u1ec3 c\u1eadp nh\u1eadt vai tr\xf2 ng\u01b0\u1eddi d\xf9ng";r.errors&&r.errors.length>0?e=r.errors.join(", "):r.message?e=r.message:r.error&&(e=r.error),S(e,"error")}}catch(rI){S(rI.message||"\u0110\xe3 x\u1ea3y ra l\u1ed7i kh\xf4ng mong mu\u1ed1n","error")}finally{v(!1)}})(e.userId,n)},className:"role-select",disabled:g,children:[e.roleName&&!a.some((t=>t.roleName===e.roleName))&&(0,Tt.jsxs)("option",{value:e.roleName,children:[e.roleName," (hi\u1ec7n t\u1ea1i)"]}),a.map((e=>(0,Tt.jsx)("option",{value:e.roleName,children:e.roleName},e.roleId))),0===a.length&&(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)("option",{value:"",children:"-- Ch\u1ecdn vai tr\xf2 --"}),(0,Tt.jsx)("option",{value:"user",children:"User"}),(0,Tt.jsx)("option",{value:"staff",children:"Staff"}),(0,Tt.jsx)("option",{value:"consultant",children:"Consultant"}),(0,Tt.jsx)("option",{value:"manager",children:"Manager"}),(0,Tt.jsx)("option",{value:"admin",children:"Admin"})]})]})}),(0,Tt.jsx)("td",{children:e.createdAt?new Date(e.createdAt).toLocaleDateString("vi-VN"):"N/A"}),(0,Tt.jsx)("td",{children:(0,Tt.jsx)("button",{className:"btn btn-danger",onClick:()=>{return t=e.userId,void A(t);var t},disabled:g,style:{padding:"5px 10px",fontSize:"12px"},children:(0,Tt.jsx)(Ld,{icon:ou})})})]},e.userId)))})]})})]}):(0,Tt.jsx)("div",{className:"no-data",children:"Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi d\xf9ng n\xe0o"});return(0,Tt.jsxs)("div",{className:"dashboard-page",children:[h.show&&(0,Tt.jsxs)("div",{className:"notification ".concat(h.type),children:[(0,Tt.jsxs)("div",{className:"notification-content",children:[(0,Tt.jsx)(Ld,{icon:"success"===h.type?Jd:Eu,className:"notification-icon"}),(0,Tt.jsx)("span",{children:h.message})]}),(0,Tt.jsx)("button",{className:"notification-close",onClick:()=>p({show:!1,message:"",type:""}),children:(0,Tt.jsx)(Ld,{icon:Eu})})]}),u&&(0,Tt.jsx)("div",{className:"modal-overlay",children:(0,Tt.jsxs)("div",{className:"confirm-modal",children:[(0,Tt.jsx)("h3",{children:"X\xe1c nh\u1eadn x\xf3a"}),(0,Tt.jsx)("p",{children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ng\u01b0\u1eddi d\xf9ng n\xe0y? H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c."}),(0,Tt.jsxs)("div",{className:"modal-actions",children:[(0,Tt.jsx)("button",{className:"btn btn-danger",onClick:async()=>{v(!0);try{const e=i.find((e=>e.userId===u)),t=await $a.deleteUser(u);t.success?(o(i.filter((e=>e.userId!==u))),S('Ng\u01b0\u1eddi d\xf9ng "'.concat(e.fullname,'" \u0111\xe3 \u0111\u01b0\u1ee3c x\xf3a th\xe0nh c\xf4ng!'),"success")):S(t.error||"Kh\xf4ng th\u1ec3 x\xf3a ng\u01b0\u1eddi d\xf9ng","error")}catch(rI){S(rI.message||"\u0110\xe3 x\u1ea3y ra l\u1ed7i kh\xf4ng mong mu\u1ed1n","error")}finally{A(null),v(!1)}},disabled:g,children:g?"\u0110ang x\xf3a...":"X\xf3a"}),(0,Tt.jsx)("button",{className:"btn btn-secondary",onClick:()=>{A(null)},disabled:g,children:"H\u1ee7y"})]})]})}),(0,Tt.jsx)("div",{className:"page-header fade-in",children:(0,Tt.jsxs)("div",{className:"container",children:[(0,Tt.jsx)("h1",{children:"B\u1ea3ng \u0111i\u1ec1u khi\u1ec3n Admin"}),(0,Tt.jsx)("p",{children:"Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng v\xe0 kh\xf3a h\u1ecdc"})]})}),(0,Tt.jsxs)("div",{className:"dashboard-container",children:[(0,Tt.jsxs)("div",{className:"dashboard-tabs fade-in delay-100",children:[(0,Tt.jsxs)("button",{className:"tab-button ".concat(f===hw?"active":""),onClick:()=>C(hw),children:[(0,Tt.jsx)(Ld,{icon:Kd})," Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng"]}),(0,Tt.jsxs)("button",{className:"tab-button ".concat(f===pw?"active":""),onClick:()=>C(pw),children:[(0,Tt.jsx)(Ld,{icon:Tu})," Qu\u1ea3n l\xfd kh\xf3a h\u1ecdc"]})]}),(0,Tt.jsx)("div",{className:"tab-content fade-in delay-200",children:f===hw?I():(0,Tt.jsx)("div",{children:"Ch\u1ecdn m\u1ed9t tab \u0111\u1ec3 xem n\u1ed9i dung"})})]})]})},mw=()=>{const{currentUser:e,updateProfile:n,changePassword:r,isAdmin:i,logout:o,setCurrentUser:a}=ts(),s=he(),[c,d]=(0,t.useState)(!1),[u,A]=(0,t.useState)(!1),[h,p]=(0,t.useState)({type:"",text:""}),[f,m]=(0,t.useState)("profile"),[g,v]=(0,t.useState)({profile:!1,badges:!1,enrollments:!1,reviews:!1,posts:!1,dashboard:!1}),[y,b]=(0,t.useState)({fullname:"",phone:"",gender:"",address:"",dateOfBirth:"",profilePicture:null,specialization:"",degree:""}),[E,w]=(0,t.useState)({oldPassword:"",newPassword:"",confirmPassword:""}),[_,S]=(0,t.useState)({badges:[],enrollments:[],reviews:[],posts:[],dashboard:null}),C=(0,t.useRef)(!1),T=(0,t.useRef)(!1),I=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];v((e=>l(l({},e),{},{profile:!0})));try{const t=await Za.fetchUserProfile();if(t.success&&t.data){const e=Za.getCurrentUser();return a(e),{success:!0,data:t.data}}return e||p({type:"error",text:"Error loading profile: ".concat(t.error)}),{success:!1,error:t.error}}catch(t){return e||p({type:"error",text:"Error loading profile: ".concat(t.message)}),{success:!1,error:t.message}}finally{v((e=>l(l({},e),{},{profile:!1})))}};(0,t.useEffect)((()=>{if(e)switch(f){case"badges":0===_.badges.length&&(async()=>{v((e=>l(l({},e),{},{badges:!0})));try{const e=await Za.authenticatedRequest("".concat(Ma.BASE_URL,"/api/userprofile/me/badges"),{method:"GET"});if(e.ok){const t=await e.json();return S((e=>l(l({},e),{},{badges:t}))),{success:!0,data:t}}{const t=await e.json();throw new Error(t.message||"Failed to fetch badges")}}catch(e){return console.error("Fetch badges error:",e),p({type:"error",text:"Error loading badges: ".concat(e.message)}),{success:!1,error:e.message}}finally{v((e=>l(l({},e),{},{badges:!1})))}})();break;case"enrollments":0===_.enrollments.length&&(async()=>{v((e=>l(l({},e),{},{enrollments:!0})));try{const e=await Za.authenticatedRequest("".concat(Ma.BASE_URL).concat(Ma.ENDPOINTS.USER_PROFILE_ENROLLMENTS),{method:"GET"});if(e.ok){const t=await e.json();return S((e=>l(l({},e),{},{enrollments:t.data}))),{success:!0,data:t}}{const t=await e.json();throw new Error(t.message||"Failed to fetch enrollments")}}catch(e){return console.error("Fetch enrollments error:",e),p({type:"error",text:"Error loading enrollments: ".concat(e.message)}),{success:!1,error:e.message}}finally{v((e=>l(l({},e),{},{enrollments:!1})))}})();break;case"reviews":0===_.reviews.length&&(async()=>{v((e=>l(l({},e),{},{reviews:!0})));try{const e=await Za.authenticatedRequest("".concat(Ma.BASE_URL,"/api/userprofile/me/reviews"),{method:"GET"});if(e.ok){const t=await e.json();return S((e=>l(l({},e),{},{reviews:t}))),{success:!0,data:t}}{const t=await e.json();throw new Error(t.message||"Failed to fetch reviews")}}catch(e){return console.error("Fetch reviews error:",e),p({type:"error",text:"Error loading reviews: ".concat(e.message)}),{success:!1,error:e.message}}finally{v((e=>l(l({},e),{},{reviews:!1})))}})();break;case"posts":0===_.posts.length&&(async()=>{v((e=>l(l({},e),{},{posts:!0})));try{const e=await Za.authenticatedRequest("".concat(Ma.BASE_URL,"/api/userprofile/me/posts"),{method:"GET"});if(e.ok){const t=await e.json();return S((e=>l(l({},e),{},{posts:t}))),{success:!0,data:t}}{const t=await e.json();throw new Error(t.message||"Failed to fetch posts")}}catch(e){return console.error("Fetch posts error:",e),p({type:"error",text:"Error loading posts: ".concat(e.message)}),{success:!1,error:e.message}}finally{v((e=>l(l({},e),{},{posts:!1})))}})();break;case"dashboard":_.dashboard||(async()=>{v((e=>l(l({},e),{},{dashboard:!0})));try{const e=await Za.authenticatedRequest("".concat(Ma.BASE_URL,"/api/userprofile/me/dashboard"),{method:"GET"});if(e.ok){const t=await e.json();return S((e=>l(l({},e),{},{dashboard:t}))),{success:!0,data:t}}{const t=await e.json();throw new Error(t.message||"Failed to fetch dashboard")}}catch(e){return console.error("Fetch dashboard error:",e),p({type:"error",text:"Error loading dashboard: ".concat(e.message)}),{success:!1,error:e.message}}finally{v((e=>l(l({},e),{},{dashboard:!1})))}})()}}),[f,e]);const R=(0,t.useCallback)((async()=>{if(e&&!g.profile&&!C.current&&T.current){C.current=!0;try{(await I(!0)).success||(C.current=!1)}catch(t){C.current=!1}}}),[null===e||void 0===e?void 0:e.email,g.profile]);(0,t.useEffect)((()=>{R()}),[R]),(0,t.useEffect)((()=>(T.current=!0,()=>{T.current=!1})),[]),(0,t.useEffect)((()=>{null!==e&&void 0!==e&&e.email&&(C.current=!1)}),[null===e||void 0===e?void 0:e.email]),(0,t.useEffect)((()=>{e&&b({fullname:e.fullname||"",phone:e.phone||"",gender:e.gender||"",address:e.address||"",dateOfBirth:e.dateOfBirth?e.dateOfBirth.split("T")[0]:"",profilePicture:e.profilePicture||null,specialization:e.specialization||"",degree:e.degree||""})}),[e]);const x=e=>{const{name:t,value:n}=e.target;b((e=>l(l({},e),{},{[t]:n})))},N=e=>{const{name:t,value:n}=e.target;w((e=>l(l({},e),{},{[t]:n})))},O=async()=>{try{let r=l({},y);"consultant"!==e.roleName&&"consultant"!==e.role&&(delete r.specialization,delete r.degree);const i=await n(r);if(i.success){p({type:"success",text:"C\u1eadp nh\u1eadt h\u1ed3 s\u01a1 th\xe0nh c\xf4ng"}),d(!1);try{await I(!0)}catch(t){}}else p({type:"error",text:i.error||"C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1eadp nh\u1eadt h\u1ed3 s\u01a1"})}catch(r){console.error("Profile save error:",r),p({type:"error",text:"C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1eadp nh\u1eadt h\u1ed3 s\u01a1"})}setTimeout((()=>p({type:"",text:""})),3e3)},k=()=>{e&&b({fullname:e.fullname||"",phone:e.phone||"",gender:e.gender||"",address:e.address||"",dateOfBirth:e.dateOfBirth?e.dateOfBirth.split("T")[0]:"",profilePicture:e.profilePicture||null,specialization:e.specialization||"",degree:e.degree||""}),d(!1),A(!1),w({oldPassword:"",newPassword:"",confirmPassword:""})},P=e=>{if(!e)return"Kh\xf4ng x\xe1c \u0111\u1ecbnh";switch(e.toLowerCase()){case"inprogress":case"enrolled":case"active":case"studying":return"\u0110ang h\u1ecdc";case"completed":case"done":return"\u0110\xe3 ho\xe0n th\xe0nh";case"pending":return"Ch\u1edd x\xe1c nh\u1eadn";case"cancelled":case"canceled":return"\u0110\xe3 h\u1ee7y";case"failed":return"Kh\xf4ng \u0111\u1ea1t";case"expired":return"H\u1ebft h\u1ea1n";default:return e}};return e?i()?(s("/dashboard"),null):(0,Tt.jsx)("div",{className:"profile-page",children:(0,Tt.jsxs)("div",{className:"profile-container",children:[(0,Tt.jsxs)("div",{className:"profile-header",children:[(0,Tt.jsx)("div",{className:"profile-picture-section",children:(0,Tt.jsxs)("div",{className:"profile-picture",children:[y.profilePicture?(0,Tt.jsx)("img",{src:y.profilePicture,alt:"Profile"}):(0,Tt.jsx)(Ld,{icon:Wd}),c&&(0,Tt.jsxs)("label",{className:"picture-upload-btn",children:[(0,Tt.jsx)(Ld,{icon:du}),(0,Tt.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{b((t=>l(l({},t),{},{profilePicture:e.target.result})))},e.readAsDataURL(t)}},style:{display:"none"}})]})]})}),(0,Tt.jsxs)("div",{className:"profile-info",children:[(0,Tt.jsx)("h1",{children:e.fullname||e.email}),(0,Tt.jsxs)("p",{className:"user-email",children:[(0,Tt.jsx)(Ld,{icon:su}),e.email]}),(0,Tt.jsxs)("p",{className:"user-role",children:[(0,Tt.jsx)(Ld,{icon:Kd}),"Vai tr\xf2:"," ",e.roleName||e.role||"User"]})]}),(0,Tt.jsxs)("div",{className:"profile-actions",children:[!c&&!u&&"profile"===f&&(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsxs)("button",{className:"btn btn-primary",onClick:()=>d(!0),children:[(0,Tt.jsx)(Ld,{icon:zd}),"Ch\u1ec9nh s\u1eeda h\u1ed3 s\u01a1"]}),(0,Tt.jsxs)("button",{className:"btn btn-secondary",onClick:()=>A(!0),children:[(0,Tt.jsx)(Ld,{icon:Vd}),"\u0110\u1ed5i m\u1eadt kh\u1ea9u"]})]}),(c||u)&&(0,Tt.jsxs)("button",{className:"btn btn-cancel",onClick:k,children:[(0,Tt.jsx)(Ld,{icon:Eu}),"H\u1ee7y"]})]})]}),h.text&&(0,Tt.jsx)("div",{className:"alert alert-".concat(h.type),children:h.text}),(0,Tt.jsxs)("div",{className:"profile-tabs",children:[(0,Tt.jsxs)("button",{className:"tab-btn ".concat("profile"===f?"active":""),onClick:()=>m("profile"),children:[(0,Tt.jsx)(Ld,{icon:Wd}),"Th\xf4ng tin c\xe1 nh\xe2n"]}),(0,Tt.jsxs)("button",{className:"tab-btn ".concat("enrollments"===f?"active":""),onClick:()=>m("enrollments"),children:[(0,Tt.jsx)(Ld,{icon:Du}),"Kh\xf3a h\u1ecdc"]})]}),u&&"profile"===f&&(0,Tt.jsxs)("div",{className:"password-form-section",children:[(0,Tt.jsx)("h2",{children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"}),(0,Tt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),E.newPassword!==E.confirmPassword)return p({type:"error",text:"M\u1eadt kh\u1ea9u m\u1edbi kh\xf4ng kh\u1edbp"}),void setTimeout((()=>p({type:"",text:""})),3e3);if(E.newPassword.length<6)return p({type:"error",text:"M\u1eadt kh\u1ea9u m\u1edbi ph\u1ea3i c\xf3 \xedt nh\u1ea5t 6 k\xfd t\u1ef1"}),void setTimeout((()=>p({type:"",text:""})),3e3);try{const e=await r(E.oldPassword,E.newPassword);e.success?(p({type:"success",text:e.message}),A(!1),w({oldPassword:"",newPassword:"",confirmPassword:""})):p({type:"error",text:e.message})}catch(t){p({type:"error",text:"C\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u1ed5i m\u1eadt kh\u1ea9u"})}setTimeout((()=>p({type:"",text:""})),3e3)},children:[(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{children:[(0,Tt.jsx)(Ld,{icon:Vd}),"M\u1eadt kh\u1ea9u c\u0169"]}),(0,Tt.jsx)("input",{type:"password",name:"oldPassword",value:E.oldPassword,onChange:N,required:!0})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{children:[(0,Tt.jsx)(Ld,{icon:Vd}),"M\u1eadt kh\u1ea9u m\u1edbi"]}),(0,Tt.jsx)("input",{type:"password",name:"newPassword",value:E.newPassword,onChange:N,required:!0})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsxs)("label",{children:[(0,Tt.jsx)(Ld,{icon:Vd}),"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u m\u1edbi"]}),(0,Tt.jsx)("input",{type:"password",name:"confirmPassword",value:E.confirmPassword,onChange:N,required:!0})]}),(0,Tt.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[(0,Tt.jsx)(Ld,{icon:tu}),"L\u01b0u m\u1eadt kh\u1ea9u"]})]})]}),(()=>{switch(f){case"badges":return(0,Tt.jsxs)("div",{className:"profile-section",children:[(0,Tt.jsxs)("h3",{children:[(0,Tt.jsx)(Ld,{icon:hu})," Huy hi\u1ec7u c\u1ee7a t\xf4i"]}),g.badges?(0,Tt.jsxs)("div",{className:"loading",children:[(0,Tt.jsx)(Ld,{icon:Su,spin:!0})," \u0110ang t\u1ea3i..."]}):(0,Tt.jsx)("div",{className:"badges-grid",children:_.badges.length>0?_.badges.map(((e,t)=>(0,Tt.jsxs)("div",{className:"badge-item",children:[(0,Tt.jsx)("div",{className:"badge-icon",children:(0,Tt.jsx)(Ld,{icon:hu})}),(0,Tt.jsxs)("div",{className:"badge-info",children:[(0,Tt.jsx)("h4",{children:e.name||"Huy hi\u1ec7u"}),(0,Tt.jsx)("p",{children:e.description||"M\xf4 t\u1ea3 huy hi\u1ec7u"}),(0,Tt.jsx)("span",{className:"badge-date",children:e.earnedDate?new Date(e.earnedDate).toLocaleDateString("vi-VN"):"Ch\u01b0a x\xe1c \u0111\u1ecbnh"})]})]},t))):(0,Tt.jsxs)("div",{className:"empty-state",children:[(0,Tt.jsx)(Ld,{icon:xu}),(0,Tt.jsx)("p",{children:"Ch\u01b0a c\xf3 huy hi\u1ec7u n\xe0o"})]})})]});case"enrollments":return(0,Tt.jsxs)("div",{className:"profile-section",children:[(0,Tt.jsxs)("h3",{children:[(0,Tt.jsx)(Ld,{icon:Du})," Kh\xf3a h\u1ecdc \u0111\xe3 \u0111\u0103ng k\xfd"]}),g.enrollments?(0,Tt.jsxs)("div",{className:"loading",children:[(0,Tt.jsx)(Ld,{icon:Su,spin:!0})," \u0110ang t\u1ea3i..."]}):(0,Tt.jsx)("div",{className:"enrollments-list",children:_.enrollments.length>0?_.enrollments.map(((e,t)=>(0,Tt.jsx)("div",{className:"enrollment-item",children:(0,Tt.jsxs)("div",{className:"enrollment-info",children:[(0,Tt.jsx)("h4",{children:e.courseTitle||"T\xean kh\xf3a h\u1ecdc"}),(0,Tt.jsxs)("div",{className:"enrollment-details",children:[(0,Tt.jsxs)("span",{className:"enrollment-date",children:["\u0110\u0103ng k\xfd:"," ",e.enrolledAt?new Date(e.enrolledAt).toLocaleDateString("vi-VN"):"Ch\u01b0a x\xe1c \u0111\u1ecbnh"]}),(0,Tt.jsxs)("span",{className:"enrollment-status",children:["Tr\u1ea1ng th\xe1i:"," ",P(e.status)]})]})]})},t))):(0,Tt.jsxs)("div",{className:"empty-state",children:[(0,Tt.jsx)(Ld,{icon:xu}),(0,Tt.jsx)("p",{children:"Ch\u01b0a \u0111\u0103ng k\xfd kh\xf3a h\u1ecdc n\xe0o"})]})})]});case"reviews":return(0,Tt.jsxs)("div",{className:"profile-section",children:[(0,Tt.jsxs)("h3",{children:[(0,Tt.jsx)(Ld,{icon:qd})," \u0110\xe1nh gi\xe1 c\u1ee7a t\xf4i"]}),g.reviews?(0,Tt.jsxs)("div",{className:"loading",children:[(0,Tt.jsx)(Ld,{icon:Su,spin:!0})," \u0110ang t\u1ea3i..."]}):(0,Tt.jsx)("div",{className:"reviews-list",children:_.reviews.length>0?_.reviews.map(((e,t)=>(0,Tt.jsxs)("div",{className:"review-item",children:[(0,Tt.jsxs)("div",{className:"review-header",children:[(0,Tt.jsx)("h4",{children:e.courseName||"T\xean kh\xf3a h\u1ecdc"}),(0,Tt.jsx)("div",{className:"review-rating",children:[...Array(5)].map(((t,n)=>(0,Tt.jsx)(Ld,{icon:qd,className:n<(e.rating||0)?"star-filled":"star-empty"},n)))})]}),(0,Tt.jsx)("p",{className:"review-content",children:e.content||"N\u1ed9i dung \u0111\xe1nh gi\xe1"}),(0,Tt.jsx)("span",{className:"review-date",children:e.reviewDate?new Date(e.reviewDate).toLocaleDateString("vi-VN"):"Ch\u01b0a x\xe1c \u0111\u1ecbnh"})]},t))):(0,Tt.jsxs)("div",{className:"empty-state",children:[(0,Tt.jsx)(Ld,{icon:xu}),(0,Tt.jsx)("p",{children:"Ch\u01b0a c\xf3 \u0111\xe1nh gi\xe1 n\xe0o"})]})})]});case"posts":return(0,Tt.jsxs)("div",{className:"profile-section",children:[(0,Tt.jsxs)("h3",{children:[(0,Tt.jsx)(Ld,{icon:Qd})," B\xe0i vi\u1ebft c\u1ee7a t\xf4i"]}),g.posts?(0,Tt.jsxs)("div",{className:"loading",children:[(0,Tt.jsx)(Ld,{icon:Su,spin:!0})," \u0110ang t\u1ea3i..."]}):(0,Tt.jsx)("div",{className:"posts-list",children:_.posts.length>0?_.posts.map(((e,t)=>{var n;return(0,Tt.jsxs)("div",{className:"post-item",children:[(0,Tt.jsx)("h4",{children:e.title||"Ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft"}),(0,Tt.jsx)("p",{className:"post-excerpt",children:e.excerpt||(null===(n=e.content)||void 0===n?void 0:n.substring(0,150))+"..."||0}),(0,Tt.jsxs)("div",{className:"post-meta",children:[(0,Tt.jsx)("span",{className:"post-date",children:e.publishDate?new Date(e.publishDate).toLocaleDateString("vi-VN"):"Ch\u01b0a x\xe1c \u0111\u1ecbnh"}),(0,Tt.jsxs)("span",{className:"post-status",children:["Tr\u1ea1ng th\xe1i: ",e.status||"\u0110\xe3 xu\u1ea5t b\u1ea3n"]}),(0,Tt.jsxs)("span",{className:"post-views",children:["L\u01b0\u1ee3t xem: ",e.views||0]})]})]},t)})):(0,Tt.jsxs)("div",{className:"empty-state",children:[(0,Tt.jsx)(Ld,{icon:xu}),(0,Tt.jsx)("p",{children:"Ch\u01b0a c\xf3 b\xe0i vi\u1ebft n\xe0o"})]})})]});default:return(0,Tt.jsxs)("div",{className:"profile-details",children:[(0,Tt.jsx)("h2",{children:"Th\xf4ng tin c\xe1 nh\xe2n"}),(0,Tt.jsxs)("div",{className:"details-grid",children:[(0,Tt.jsxs)("div",{className:"detail-item",children:[(0,Tt.jsxs)("label",{children:[(0,Tt.jsx)(Ld,{icon:Wd}),"H\u1ecd v\xe0 t\xean"]}),c?(0,Tt.jsx)("input",{type:"text",name:"fullname",value:y.fullname,onChange:x}):(0,Tt.jsx)("span",{children:e.fullname||"Ch\u01b0a c\u1eadp nh\u1eadt"})]}),(0,Tt.jsxs)("div",{className:"detail-item",children:[(0,Tt.jsxs)("label",{children:[(0,Tt.jsx)(Ld,{icon:nu}),"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"]}),c?(0,Tt.jsx)("input",{type:"tel",name:"phone",value:y.phone,onChange:x}):(0,Tt.jsx)("span",{children:e.phone||"Ch\u01b0a c\u1eadp nh\u1eadt"})]}),(0,Tt.jsxs)("div",{className:"detail-item",children:[(0,Tt.jsxs)("label",{children:[(0,Tt.jsx)(Ld,{icon:Yd}),"Gi\u1edbi t\xednh"]}),c?(0,Tt.jsxs)("select",{name:"gender",value:y.gender,onChange:x,children:[(0,Tt.jsx)("option",{value:"",children:"Ch\u1ecdn gi\u1edbi t\xednh"}),(0,Tt.jsx)("option",{value:"Nam",children:"Nam"}),(0,Tt.jsx)("option",{value:"N\u1eef",children:"N\u1eef"}),(0,Tt.jsx)("option",{value:"Kh\xe1c",children:"Kh\xe1c"})]}):(0,Tt.jsx)("span",{children:e.gender||"Ch\u01b0a c\u1eadp nh\u1eadt"})]}),(0,Tt.jsxs)("div",{className:"detail-item",children:[(0,Tt.jsxs)("label",{children:[(0,Tt.jsx)(Ld,{icon:Cu}),"Ng\xe0y sinh"]}),c?(0,Tt.jsx)("input",{type:"date",name:"dateOfBirth",value:y.dateOfBirth,onChange:x}):(0,Tt.jsx)("span",{children:e.dateOfBirth?new Date(e.dateOfBirth).toLocaleDateString("vi-VN"):"Ch\u01b0a c\u1eadp nh\u1eadt"})]}),(0,Tt.jsxs)("div",{className:"detail-item full-width",children:[(0,Tt.jsxs)("label",{children:[(0,Tt.jsx)(Ld,{icon:fu}),"\u0110\u1ecba ch\u1ec9"]}),c?(0,Tt.jsx)("textarea",{name:"address",value:y.address,onChange:x,rows:"3"}):(0,Tt.jsx)("span",{children:e.address||"Ch\u01b0a c\u1eadp nh\u1eadt"})]}),("consultant"===e.roleName||"consultant"===e.role)&&(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsxs)("div",{className:"detail-item",children:[(0,Tt.jsxs)("label",{children:[(0,Tt.jsx)(Ld,{icon:Du}),"B\u1eb1ng c\u1ea5p"]}),c?(0,Tt.jsx)("input",{type:"text",name:"degree",value:y.degree,onChange:x}):(0,Tt.jsx)("span",{children:e.degree||"Ch\u01b0a c\u1eadp nh\u1eadt"})]}),(0,Tt.jsxs)("div",{className:"detail-item",children:[(0,Tt.jsxs)("label",{children:[(0,Tt.jsx)(Ld,{icon:qd}),"Chuy\xean m\xf4n"]}),c?(0,Tt.jsx)("input",{type:"text",name:"specialization",value:y.specialization,onChange:x}):(0,Tt.jsx)("span",{children:e.specialization||"Ch\u01b0a c\u1eadp nh\u1eadt"})]})]})]}),c&&(0,Tt.jsxs)("div",{className:"form-actions",children:[(0,Tt.jsxs)("button",{className:"btn btn-primary",onClick:O,children:[(0,Tt.jsx)(Ld,{icon:tu}),"L\u01b0u thay \u0111\u1ed5i"]}),(0,Tt.jsxs)("button",{className:"btn btn-cancel",onClick:k,children:[(0,Tt.jsx)(Ld,{icon:Eu}),"H\u1ee7y"]})]})]})}})()]})}):(s("/login"),null)},gw=e=>{let{appointmentId:n,showTitle:r=!0}=e;const[i,o]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[c,l]=(0,t.useState)("");(0,t.useEffect)((()=>{n?d():u()}),[n]);const d=async()=>{s(!0),l("");try{const e=await za.getMemberNotesByAppointment(n);e.success?o(e.data.data||[]):l("Kh\xf4ng th\u1ec3 t\u1ea3i ghi ch\xfa: "+e.error)}catch(rI){l("L\u1ed7i khi t\u1ea3i ghi ch\xfa: "+rI.message)}finally{s(!1)}},u=async()=>{s(!0),l("");try{const e=await za.getAllMemberNotes();e.success?o(e.data.data||[]):l("Kh\xf4ng th\u1ec3 t\u1ea3i ghi ch\xfa: "+e.error)}catch(rI){l("L\u1ed7i khi t\u1ea3i ghi ch\xfa: "+rI.message)}finally{s(!1)}},A=e=>{if(!e)return"Kh\xf4ng c\xf3 ng\xe0y";try{const t=new Date(e);return isNaN(t.getTime())?"Ng\xe0y kh\xf4ng h\u1ee3p l\u1ec7":t.toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(c){return"Ng\xe0y kh\xf4ng h\u1ee3p l\u1ec7"}};return a?(0,Tt.jsxs)("div",{className:"consultation-notes-loading",children:[(0,Tt.jsx)(Ld,{icon:Su,spin:!0,className:"loading-icon"}),(0,Tt.jsx)("p",{children:"\u0110ang t\u1ea3i ghi ch\xfa..."})]}):c?(0,Tt.jsxs)("div",{className:"consultation-notes-error",children:[(0,Tt.jsx)(Ld,{icon:xu,className:"error-icon"}),(0,Tt.jsx)("p",{children:c})]}):(0,Tt.jsxs)("div",{className:"consultation-notes",children:[r&&(0,Tt.jsxs)("div",{className:"notes-header",children:[(0,Tt.jsx)(Ld,{icon:Bu,className:"header-icon"}),(0,Tt.jsx)("h3",{children:n?"Ghi ch\xfa bu\u1ed5i t\u01b0 v\u1ea5n":"T\u1ea5t c\u1ea3 ghi ch\xfa t\u01b0 v\u1ea5n"})]}),0===i.length?(0,Tt.jsxs)("div",{className:"no-notes",children:[(0,Tt.jsx)(Ld,{icon:Md,className:"no-notes-icon"}),(0,Tt.jsx)("p",{children:n?"Ch\u01b0a c\xf3 ghi ch\xfa cho bu\u1ed5i t\u01b0 v\u1ea5n n\xe0y":"B\u1ea1n ch\u01b0a c\xf3 ghi ch\xfa t\u01b0 v\u1ea5n n\xe0o"})]}):(0,Tt.jsx)("div",{className:"notes-list",children:i.map((e=>(0,Tt.jsxs)("div",{className:"note-card",children:[(0,Tt.jsxs)("div",{className:"note-header",children:[(0,Tt.jsxs)("div",{className:"note-info",children:[(0,Tt.jsx)(Ld,{icon:Wd,className:"consultant-icon"}),(0,Tt.jsx)("span",{className:"consultant-name",children:e.consultantName||"Chuy\xean gia t\u01b0 v\u1ea5n"})]}),(0,Tt.jsxs)("div",{className:"note-date",children:[(0,Tt.jsx)(Ld,{icon:Cu,className:"date-icon"}),(0,Tt.jsx)("span",{children:A(e.createdAt)})]})]}),(0,Tt.jsx)("div",{className:"note-content",children:(0,Tt.jsx)("p",{children:e.noteText})}),e.updatedAt&&e.updatedAt!==e.createdAt&&(0,Tt.jsx)("div",{className:"note-updated",children:(0,Tt.jsxs)("small",{children:["C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: ",A(e.updatedAt)]})})]},e.id)))})]})},vw=()=>{const{currentUser:e}=ts(),[n,r]=(0,t.useState)([]),[i,o]=(0,t.useState)(!1),[a,s]=(0,t.useState)(""),[c,l]=(0,t.useState)(""),[d,u]=(0,t.useState)(null),[A,h]=(0,t.useState)(null);(0,t.useEffect)((()=>{p()}),[]);const p=async()=>{o(!0);try{const e=await za.getMyAppointmentsWithAgoraToken();if(e.success){const t=e.data.data||[];r(t)}else s("Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch l\u1ecbch h\u1eb9n: "+e.error)}catch(rI){s("L\u1ed7i khi t\u1ea3i l\u1ecbch h\u1eb9n: "+rI.message)}finally{o(!1)}},f=e=>{if(!e)return"Kh\xf4ng c\xf3 ng\xe0y";try{const t=new Date(e);return isNaN(t.getTime())?"Ng\xe0y kh\xf4ng h\u1ee3p l\u1ec7":t.toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(a){return"Ng\xe0y kh\xf4ng h\u1ee3p l\u1ec7"}},m=e=>{if(!e)return"Kh\xf4ng c\xf3 gi\u1edd";try{let n=e;if("string"===typeof e&&e.match(/^\d{2}:\d{2}$/))n=e;else if("string"===typeof e&&e.match(/^\d{2}:\d{2}:\d{2}$/))n=e.substring(0,5);else if("string"===typeof e&&e.includes("T")){var t;n=null===(t=e.split("T")[1])||void 0===t?void 0:t.substring(0,5)}const r=new Date("2000-01-01T".concat(n));return isNaN(r.getTime())?"Gi\u1edd kh\xf4ng h\u1ee3p l\u1ec7":r.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})}catch(a){return"Gi\u1edd kh\xf4ng h\u1ee3p l\u1ec7"}},g=e=>{if(!e)return"Kh\xf4ng x\xe1c \u0111\u1ecbnh";switch(e.toLowerCase()){case"pending":return"Ch\u1edd x\xe1c nh\u1eadn";case"confirmed":return"\u0110\xe3 x\xe1c nh\u1eadn";case"rejected":return"\u0110\xe3 t\u1eeb ch\u1ed1i";case"cancelled":return"\u0110\xe3 h\u1ee7y";default:return e}},v=e=>{var t,n,r,i;return(null===(t=e.availableSlot)||void 0===t?void 0:t.workDate)||(null===(n=e.availableSlot)||void 0===n?void 0:n.date)||(null===(r=e.slot)||void 0===r?void 0:r.workDate)||(null===(i=e.slot)||void 0===i?void 0:i.date)||e.workDate||e.date||e.appointmentDate},y=e=>{var t,n;return(null===(t=e.availableSlot)||void 0===t?void 0:t.startTime)||(null===(n=e.slot)||void 0===n?void 0:n.startTime)||e.startTime||e.appointmentTime},b=e=>{var t,n;return(null===(t=e.availableSlot)||void 0===t?void 0:t.endTime)||(null===(n=e.slot)||void 0===n?void 0:n.endTime)||e.endTime},E=e=>{var t,n;return e.consultantName||(null===(t=e.consultant)||void 0===t?void 0:t.name)||(null===(n=e.consultant)||void 0===n?void 0:n.consultantName)||"Chuy\xean gia t\u01b0 v\u1ea5n"},w=e=>{var t,n,r;const i=[e.note,e.appointmentNote,e.memberNote,e.member_note,e.userNote,e.user_note,e.bookingNote,e.booking_note,e.description,null===(t=e.member)||void 0===t?void 0:t.note,null===(n=e.user)||void 0===n?void 0:n.note,null===(r=e.bookedBy)||void 0===r?void 0:r.note];for(const o of i)if(o&&"string"===typeof o&&""!==o.trim())return o.trim();return null},_=function(e){var t,n,r,i;let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=e.agoraInfo||{};return{appId:a.appId,channelName:a.channelName,token:o?null===(t=a.consultant)||void 0===t?void 0:t.token:null===(n=a.member)||void 0===n?void 0:n.token,userId:o?null===(r=a.consultant)||void 0===r?void 0:r.userId:null===(i=a.member)||void 0===i?void 0:i.userId}},S=()=>{s(""),l("")};return(0,Tt.jsxs)("div",{className:"my-appointments-container",children:[(0,Tt.jsxs)("div",{className:"my-appointments-header",children:[(0,Tt.jsxs)("h1",{children:[(0,Tt.jsx)(Ld,{icon:uu}),"L\u1ecbch H\u1eb9n C\u1ee7a T\xf4i"]}),(0,Tt.jsx)("p",{children:"Qu\u1ea3n l\xfd c\xe1c cu\u1ed9c h\u1eb9n t\u01b0 v\u1ea5n c\u1ee7a b\u1ea1n"})]}),a&&(0,Tt.jsxs)("div",{className:"alert alert-error",children:[(0,Tt.jsx)(Ld,{icon:xu}),a,(0,Tt.jsx)("button",{onClick:S,className:"close-btn",children:"\xd7"})]}),c&&(0,Tt.jsxs)("div",{className:"alert alert-success",children:[(0,Tt.jsx)(Ld,{icon:Iu}),c,(0,Tt.jsx)("button",{onClick:S,className:"close-btn",children:"\xd7"})]}),(0,Tt.jsxs)("div",{className:"appointments-content",children:[i&&(0,Tt.jsxs)("div",{className:"loading",children:[(0,Tt.jsx)(Ld,{icon:Su,spin:!0})," \u0110ang t\u1ea3i..."]}),!i&&0===n.length&&(0,Tt.jsxs)("div",{className:"empty-state",children:[(0,Tt.jsx)(Ld,{icon:uu}),(0,Tt.jsx)("h3",{children:"Ch\u01b0a c\xf3 l\u1ecbch h\u1eb9n n\xe0o"}),(0,Tt.jsx)("p",{children:"B\u1ea1n ch\u01b0a c\xf3 cu\u1ed9c h\u1eb9n t\u01b0 v\u1ea5n n\xe0o. H\xe3y \u0111\u1eb7t l\u1ecbch t\u01b0 v\u1ea5n \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3."}),(0,Tt.jsx)("a",{href:"/counseling",className:"btn btn-primary",children:"\u0110\u1eb7t L\u1ecbch T\u01b0 V\u1ea5n"})]}),!i&&n.length>0&&(0,Tt.jsx)("div",{className:"appointments-grid",children:n.map((e=>{var t,n;const r=(e=>{if(!e)return"gray";switch(e.toLowerCase()){case"pending":return"blue";case"confirmed":return"green";case"rejected":return"red";default:return"gray"}})(e.status),a="pending"===(null===(t=e.status)||void 0===t?void 0:t.toLowerCase()),c="confirmed"===(null===(n=e.status)||void 0===n?void 0:n.toLowerCase()),d=a||c,A=_(e),S=!!A.channelName,C=!!A.token;return(0,Tt.jsxs)("div",{className:"appointment-card status-".concat(r),children:[(0,Tt.jsxs)("div",{className:"appointment-header",children:[(0,Tt.jsxs)("div",{className:"consultant-info",children:[(0,Tt.jsx)(Ld,{icon:Wd}),(0,Tt.jsxs)("div",{className:"consultant-details",children:[(0,Tt.jsx)("div",{className:"consultant-name",children:E(e)}),(0,Tt.jsx)("div",{className:"appointment-type",children:"T\u01b0 v\u1ea5n c\xe1 nh\xe2n"})]})]}),(0,Tt.jsx)("div",{className:"appointment-status status-".concat(r),children:g(e.status)})]}),(0,Tt.jsxs)("div",{className:"appointment-details",children:[(0,Tt.jsxs)("div",{className:"appointment-date",children:[(0,Tt.jsx)(Ld,{icon:Cu}),f(v(e))]}),(0,Tt.jsxs)("div",{className:"appointment-time",children:[(0,Tt.jsx)(Ld,{icon:Au}),m(y(e))," ","-"," ",m(b(e))]})]}),w(e)&&(0,Tt.jsxs)("div",{className:"appointment-note",children:[(0,Tt.jsx)("strong",{children:"Ghi ch\xfa:"})," ",w(e)]}),c&&(0,Tt.jsx)("div",{className:"appointment-features",children:S&&C&&(0,Tt.jsxs)("button",{onClick:()=>{u(e)},className:"btn btn-primary btn-small",children:[(0,Tt.jsx)(Ld,{icon:Lu}),"Tham gia video call"]})}),e.meetLink&&c&&!e.agoraChannelName&&(0,Tt.jsxs)("div",{className:"meeting-link",children:[(0,Tt.jsx)("strong",{children:"Link tham gia:"}),(0,Tt.jsx)("a",{href:e.meetLink,target:"_blank",rel:"noopener noreferrer",className:"btn btn-small btn-primary",children:"Tham gia cu\u1ed9c h\u1ecdp"})]}),e.reason&&(0,Tt.jsxs)("div",{className:"rejection-reason",children:[(0,Tt.jsx)("strong",{children:"L\xfd do:"})," ",e.reason]}),(0,Tt.jsxs)("div",{className:"appointment-actions-row",children:[c&&(0,Tt.jsxs)("button",{onClick:()=>h(e),className:"btn btn-secondary btn-small",children:[(0,Tt.jsx)(Ld,{icon:Bu}),"Xem ghi ch\xfa"]}),d&&(0,Tt.jsxs)("button",{onClick:()=>{const t=prompt("Vui l\xf2ng nh\u1eadp l\xfd do h\u1ee7y l\u1ecbch h\u1eb9n:");t&&t.trim()&&(async(e,t)=>{o(!0);try{const n=await za.cancelAppointmentByMember(e,t);n.success?(l("\u0110\xe3 h\u1ee7y l\u1ecbch h\u1eb9n th\xe0nh c\xf4ng!"),p()):s("Kh\xf4ng th\u1ec3 h\u1ee7y l\u1ecbch h\u1eb9n: "+n.error)}catch(rI){s("L\u1ed7i khi h\u1ee7y l\u1ecbch h\u1eb9n: "+rI.message)}finally{o(!1)}})(e.id,t.trim())},className:"btn btn-danger btn-small",disabled:i,children:[(0,Tt.jsx)(Ld,{icon:Eu}),"H\u1ee7y l\u1ecbch h\u1eb9n"]})]})]},e.id)}))})]}),d&&(0,Tt.jsx)("div",{className:"modal-overlay video-call-overlay",onClick:e=>{e.target===e.currentTarget&&(console.log("Video call modal closed by overlay click"),u(null))},children:(0,Tt.jsxs)("div",{className:"modal-content video-call-modal",onClick:e=>e.stopPropagation(),children:[(0,Tt.jsxs)("div",{className:"modal-header",children:[(0,Tt.jsxs)("h3",{children:[(0,Tt.jsx)(Ld,{icon:Lu}),"Video Call - ",E(d)]}),(0,Tt.jsx)("button",{className:"modal-close",onClick:()=>{console.log("Video call modal closed by close button"),u(null)},children:"\xd7"})]}),(0,Tt.jsx)("div",{className:"modal-body",children:(()=>{const e=_(d);return(0,Tt.jsx)(lw,{appointmentId:d.id,agoraAppId:e.appId,agoraChannelName:e.channelName,agoraToken:e.token,agoraUserId:e.userId,onCallEnd:()=>u(null),onError:e=>{s("L\u1ed7i video call: "+e.message),u(null)}})})()})]})}),A&&(0,Tt.jsx)("div",{className:"modal-overlay",onClick:()=>h(null),children:(0,Tt.jsxs)("div",{className:"modal-content notes-modal",onClick:e=>e.stopPropagation(),children:[(0,Tt.jsxs)("div",{className:"modal-header",children:[(0,Tt.jsxs)("h3",{children:[(0,Tt.jsx)(Ld,{icon:Bu}),"Ghi ch\xfa t\u01b0 v\u1ea5n - ",E(A)]}),(0,Tt.jsx)("button",{className:"modal-close",onClick:()=>h(null),children:"\xd7"})]}),(0,Tt.jsx)("div",{className:"modal-body",children:(0,Tt.jsx)(gw,{appointmentId:A.id,showTitle:!1})})]})})]})},yw=()=>{const{lessonId:e}=pe(),n=he(),[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)(!0),[s,c]=(0,t.useState)(""),[l,d]=(0,t.useState)(null),[u,A]=(0,t.useState)([]),[h,p]=(0,t.useState)(null);if((0,t.useEffect)((()=>{const t=e=>{if(0===e.length)return null;const t=e.sort(((e,t)=>new Date(t.submittedAt)-new Date(e.submittedAt)));return p(t[0]),t[0]};(async()=>{a(!0);try{const t=await HE.getLessonById(e);if(t.success&&t.data){i(t.data);const n=await HE.getQuizzesByLesson(e);if(n.success&&Array.isArray(n.data)&&n.data.length>0)return d(n.data[0].id),n.data[0].id;d(null)}else c(t.message||"Kh\xf4ng t\xecm th\u1ea5y b\xe0i h\u1ecdc")}catch(rI){c("L\u1ed7i khi t\u1ea3i b\xe0i h\u1ecdc")}finally{a(!1)}})().then((e=>(async e=>{try{const n=await HE.getQuizResultsByUserQuiz(e);if(n&&n.length>0)return A(n),t(n),n}catch(s){console.error("Error fetching quiz results:",s)}})(e)))}),[e]),o)return(0,Tt.jsx)(oA,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:(0,Tt.jsx)(Ph,{size:60})});if(s)return(0,Tt.jsx)(oA,{p:4,children:(0,Tt.jsx)(kp,{color:"error",children:s})});if(!r)return null;const f=()=>{l?n("/quiz/".concat(l)):r.nextLessonId&&n("/lesson/".concat(r.nextLessonId))};return(0,Tt.jsxs)(oA,{maxWidth:"md",mx:"auto",p:4,children:[(0,Tt.jsx)(kp,{variant:"h4",fontWeight:600,mb:2,children:r.title}),(0,Tt.jsx)(kp,{variant:"subtitle1",color:"text.secondary",mb:2,children:r.description}),r.videoUrl&&(0,Tt.jsx)(oA,{mb:3,children:(0,Tt.jsxs)("video",{width:"100%",height:"400",controls:!0,poster:r.imageUrl,children:[(0,Tt.jsx)("source",{src:r.videoUrl,type:"video/mp4"}),"Tr\xecnh duy\u1ec7t c\u1ee7a b\u1ea1n kh\xf4ng h\u1ed7 tr\u1ee3 video."]})}),(0,Tt.jsx)(kp,{variant:"body1",mb:3,children:r.content}),l&&(0,Tt.jsxs)(oA,{mb:3,p:3,bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"divider",children:[(0,Tt.jsx)(kp,{variant:"h6",mb:2,children:"Quiz"}),h?(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"subtitle1",color:"text.primary",mb:2,children:"K\u1ebft qu\u1ea3 Quiz g\u1ea7n nh\u1ea5t:"}),(0,Tt.jsxs)(Vm,{spacing:2,children:[(0,Tt.jsxs)(oA,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,Tt.jsx)(kp,{variant:"body2",children:"\u0110i\u1ec3m s\u1ed1:"}),(0,Tt.jsxs)(kp,{variant:"body1",fontWeight:600,color:h.isPassed?"success.main":"error.main",children:[h.score.toFixed(1),"%"]})]}),(0,Tt.jsxs)(oA,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,Tt.jsx)(kp,{variant:"body2",children:"Tr\u1ea1ng th\xe1i:"}),(0,Tt.jsx)(kp,{variant:"body1",fontWeight:600,color:h.isPassed?"success.main":"error.main",children:h.isPassed?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),h.notes&&(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:"Ghi ch\xfa:"}),(0,Tt.jsx)(kp,{variant:"body1",children:h.notes})]})]}),(0,Tt.jsx)(oA,{mt:2,children:(0,Tt.jsx)(Gh,{variant:"outlined",color:"primary",onClick:f,size:"small",children:"L\xe0m l\u1ea1i Quiz"})})]}):(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",mb:2,children:"B\u1ea1n ch\u01b0a th\u1ef1c hi\u1ec7n quiz n\xe0y."}),(0,Tt.jsx)(Gh,{variant:"contained",color:"primary",onClick:f,children:"L\xe0m Quiz"})]})]}),(0,Tt.jsx)(Vm,{direction:"row",spacing:2,children:!l&&r.nextLessonId&&(0,Tt.jsx)(Gh,{variant:"contained",color:"primary",onClick:f,children:"Ti\u1ebfp theo"})})]})};function bw(e){return eA("MuiFormGroup",e)}tA("MuiFormGroup",["root","row","error"]);const Ew=["className","row"],ww=CA("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),_w=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiFormGroup"}),{className:r,row:i=!1}=n,o=a(n,Ew),s=Vg({props:n,muiFormControl:zg(),states:["error"]}),c=l(l({},n),{},{row:i,error:s.error}),d=(e=>{const{classes:t,row:n,error:r}=e;return aA({root:["root",n&&"row",r&&"error"]},bw,t)})(c);return(0,Tt.jsx)(ww,l({className:Mu(d.root,r),ownerState:c,ref:t},o))}));function Sw(e){return eA("MuiRadioGroup",e)}tA("MuiRadioGroup",["root","row","error"]);const Cw=t.createContext(void 0),Tw=["actions","children","className","defaultValue","name","onChange","value"],Iw=t.forwardRef((function(e,n){const{actions:r,children:i,className:o,defaultValue:s,name:c,onChange:d,value:u}=e,A=a(e,Tw),h=t.useRef(null),p=(e=>{const{classes:t,row:n,error:r}=e;return aA({root:["root",n&&"row",r&&"error"]},Sw,t)})(e),[f,m]=Km({controlled:u,default:s,name:"RadioGroup"});t.useImperativeHandle(r,(()=>({focus:()=>{let e=h.current.querySelector("input:not(:disabled):checked");e||(e=h.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const g=NA(n,h),v=dA(c),y=t.useMemo((()=>({name:v,onChange(e){m(e.target.value),d&&d(e,e.target.value)},value:f})),[v,d,m,f]);return(0,Tt.jsx)(Cw.Provider,{value:y,children:(0,Tt.jsx)(_w,l(l({role:"radiogroup",ref:g,className:Mu(p.root,o)},A),{},{children:i}))})})),Rw=Iw;function xw(e){return eA("MuiFormControlLabel",e)}const Nw=tA("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Ow=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slots","slotProps","value"],kw=CA("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(Nw.label)]:t.label},t.root,t["labelPlacement".concat(mh(n.labelPlacement))]]}})(IA((e=>{let{theme:t}=e;return{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(Nw.disabled)]:{cursor:"default"},["& .".concat(Nw.label)]:{["&.".concat(Nw.disabled)]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:e=>{let{labelPlacement:t}=e;return"start"===t||"top"===t||"bottom"===t},style:{marginLeft:16}}]}}))),Pw=CA("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(IA((e=>{let{theme:t}=e;return{["&.".concat(Nw.error)]:{color:(t.vars||t).palette.error.main}}}))),Bw=t.forwardRef((function(e,n){var r;const i=xa({props:e,name:"MuiFormControlLabel"}),{checked:o,className:s,componentsProps:c={},control:d,disabled:u,disableTypography:A,inputRef:h,label:p,labelPlacement:f="end",name:m,onChange:g,required:v,slots:y={},slotProps:b={},value:E}=i,w=a(i,Ow),_=zg(),S=null!==(r=null!==u&&void 0!==u?u:d.props.disabled)&&void 0!==r?r:null===_||void 0===_?void 0:_.disabled,C=null!==v&&void 0!==v?v:d.props.required,T={disabled:S,required:C};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof d.props[e]&&"undefined"!==typeof i[e]&&(T[e]=i[e])}));const I=Vg({props:i,muiFormControl:_,states:["error"]}),R=l(l({},i),{},{disabled:S,labelPlacement:f,required:C,error:I.error}),x=(e=>{const{classes:t,disabled:n,labelPlacement:r,error:i,required:o}=e;return aA({root:["root",n&&"disabled","labelPlacement".concat(mh(r)),i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]},xw,t)})(R),N={slots:y,slotProps:l(l({},c),b)},[O,k]=uf("typography",{elementType:kp,externalForwardedProps:N,ownerState:R});let P=p;return null==P||P.type===kp||A||(P=(0,Tt.jsx)(O,l(l({component:"span"},k),{},{className:Mu(x.label,null===k||void 0===k?void 0:k.className),children:P}))),(0,Tt.jsxs)(kw,l(l({className:Mu(x.root,s),ownerState:R,ref:n},w),{},{children:[t.cloneElement(d,T),C?(0,Tt.jsxs)("div",{children:[P,(0,Tt.jsxs)(Pw,{ownerState:R,"aria-hidden":!0,className:x.asterisk,children:["\u2009","*"]})]}):P]}))})),Lw=Bw;function Dw(e){return eA("PrivateSwitchBase",e)}tA("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Uw=["autoFocus","checked","checkedIcon","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value","slots","slotProps"],Mw=CA(fh)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:e=>{let{edge:t,ownerState:n}=e;return"start"===t&&"small"!==n.size},style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:e=>{let{edge:t,ownerState:n}=e;return"end"===t&&"small"!==n.size},style:{marginRight:-12}}]}),Fw=CA("input",{shouldForwardProp:AA})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),jw=t.forwardRef((function(e,t){const{autoFocus:n,checked:r,checkedIcon:i,defaultChecked:o,disabled:s,disableFocusRipple:c=!1,edge:d=!1,icon:u,id:A,inputProps:h,inputRef:p,name:f,onBlur:m,onChange:g,onFocus:v,readOnly:y,required:b=!1,tabIndex:E,type:w,value:_,slots:S={},slotProps:C={}}=e,T=a(e,Uw),[I,R]=Km({controlled:r,default:Boolean(o),name:"SwitchBase",state:"checked"}),x=zg();let N=s;x&&"undefined"===typeof N&&(N=x.disabled);const O="checkbox"===w||"radio"===w,k=l(l({},e),{},{checked:I,disabled:N,disableFocusRipple:c,edge:d}),P=(e=>{const{classes:t,checked:n,disabled:r,edge:i}=e;return aA({root:["root",n&&"checked",r&&"disabled",i&&"edge".concat(mh(i))],input:["input"]},Dw,t)})(k),B={slots:S,slotProps:l({input:h},C)},[L,D]=uf("root",{ref:t,elementType:Mw,className:P.root,shouldForwardComponentProp:!0,externalForwardedProps:l(l({},B),{},{component:"span"},T),getSlotProps:e=>l(l({},e),{},{onFocus:t=>{var n;null===(n=e.onFocus)||void 0===n||n.call(e,t),(e=>{v&&v(e),x&&x.onFocus&&x.onFocus(e)})(t)},onBlur:t=>{var n;null===(n=e.onBlur)||void 0===n||n.call(e,t),(e=>{m&&m(e),x&&x.onBlur&&x.onBlur(e)})(t)}}),ownerState:k,additionalProps:{centerRipple:!0,focusRipple:!c,disabled:N,role:void 0,tabIndex:null}}),[U,M]=uf("input",{ref:p,elementType:Fw,className:P.input,externalForwardedProps:B,getSlotProps:e=>l(l({},e),{},{onChange:t=>{var n;null===(n=e.onChange)||void 0===n||n.call(e,t),(e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;R(t),g&&g(e,t)})(t)}}),ownerState:k,additionalProps:l({autoFocus:n,checked:r,defaultChecked:o,disabled:N,id:O?A:void 0,name:f,readOnly:y,required:b,tabIndex:E,type:w},"checkbox"===w&&void 0===_?{}:{value:_})});return(0,Tt.jsxs)(L,l(l({},D),{},{children:[(0,Tt.jsx)(U,l({},M)),I?i:u]}))})),Qw=jw,Vw=Zh((0,Tt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Hw=Zh((0,Tt.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),zw=CA("span",{shouldForwardProp:AA})({position:"relative",display:"flex"}),Kw=CA(Vw)({transform:"scale(1)"}),Gw=CA(Hw)(IA((e=>{let{theme:t}=e;return{left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}}]}})));const Ww=function(e){const{checked:t=!1,classes:n={},fontSize:r}=e,i=l(l({},e),{},{checked:t});return(0,Tt.jsxs)(zw,{className:n.root,ownerState:i,children:[(0,Tt.jsx)(Kw,{fontSize:r,className:n.background,ownerState:i}),(0,Tt.jsx)(Gw,{fontSize:r,className:n.dot,ownerState:i})]})},qw=Ry;function Yw(e){return eA("MuiRadio",e)}const Xw=tA("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Jw=["checked","checkedIcon","color","icon","name","onChange","size","className","disabled","disableRipple","slots","slotProps","inputProps"],Zw=CA(Qw,{shouldForwardProp:e=>AA(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"medium"!==n.size&&t["size".concat(mh(n.size))],t["color".concat(mh(n.color))]]}})(IA((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,["&.".concat(Xw.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi(t.palette[n].main,t.palette.action.hoverOpacity)}}}})),...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n,disabled:!1},style:{["&.".concat(Xw.checked)]:{color:(t.vars||t).palette[n].main}}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}})));const $w=(0,Tt.jsx)(Ww,{checked:!0}),e_=(0,Tt.jsx)(Ww,{}),t_=t.forwardRef((function(e,n){var r,i,o;const s=xa({props:e,name:"MuiRadio"}),{checked:c,checkedIcon:d=$w,color:u="primary",icon:A=e_,name:h,onChange:p,size:f="medium",className:m,disabled:g,disableRipple:v=!1,slots:y={},slotProps:b={},inputProps:E}=s,w=a(s,Jw),_=zg();let S=g;_&&"undefined"===typeof S&&(S=_.disabled),null!==S&&void 0!==S||(S=!1);const C=l(l({},s),{},{disabled:S,disableRipple:v,color:u,size:f}),T=(e=>{const{classes:t,color:n,size:r}=e,i={root:["root","color".concat(mh(n)),"medium"!==r&&"size".concat(mh(r))]};return l(l({},t),aA(i,Yw,t))})(C),I=t.useContext(Cw);let R=c;const x=qw(p,I&&I.onChange);let N=h;I&&("undefined"===typeof R&&(R=function(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}(I.value,s.value)),"undefined"===typeof N&&(N=I.name));const O=null!==(r=b.input)&&void 0!==r?r:E,[k,P]=uf("root",{ref:n,elementType:Zw,className:Mu(T.root,m),shouldForwardComponentProp:!0,externalForwardedProps:l({slots:y,slotProps:b},w),getSlotProps:e=>l(l({},e),{},{onChange:function(t){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];null===(n=e.onChange)||void 0===n||n.call(e,t,...i),x(t,...i)}}),ownerState:C,additionalProps:{type:"radio",icon:t.cloneElement(A,{fontSize:null!==(i=A.props.fontSize)&&void 0!==i?i:f}),checkedIcon:t.cloneElement(d,{fontSize:null!==(o=d.props.fontSize)&&void 0!==o?o:f}),disabled:S,name:N,checked:R,slots:y,slotProps:{input:"function"===typeof O?O(C):O}}});return(0,Tt.jsx)(k,l(l({},P),{},{classes:T}))})),n_=t_,r_=()=>{const{quizId:e}=pe(),n=he(),[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)([]),[s,c]=(0,t.useState)({}),[d,u]=(0,t.useState)(!0),[A,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(!1),[m,g]=(0,t.useState)(null),[v,y]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{u(!0);try{const t=await HE.getQuizById(e);if(!t.success||!t.data)return h(t.message||"Kh\xf4ng t\xecm th\u1ea5y quiz"),void u(!1);i(t.data);const n=await HE.startQuizSession(e);n.success&&n.data?(y(n.data.sessionId),n.data.questions?a(n.data.questions):a([])):h(n.message||"Kh\xf4ng kh\u1edfi t\u1ea1o \u0111\u01b0\u1ee3c session cho quiz")}catch(rI){h("L\u1ed7i khi t\u1ea3i quiz ho\u1eb7c kh\u1edfi t\u1ea1o session")}finally{u(!1)}})()}),[e]);return d?(0,Tt.jsx)(oA,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:(0,Tt.jsx)(Ph,{size:60})}):A?(0,Tt.jsx)(oA,{p:4,children:(0,Tt.jsx)(kp,{color:"error",children:A})}):r?(0,Tt.jsxs)(oA,{maxWidth:"md",mx:"auto",p:4,children:[(0,Tt.jsx)(kp,{variant:"h4",fontWeight:600,mb:2,children:r.title}),(0,Tt.jsx)(kp,{variant:"subtitle1",color:"text.secondary",mb:2,children:r.description}),o.map(((e,t)=>{var n;return(0,Tt.jsxs)(up,{sx:{p:2,mb:2},children:[(0,Tt.jsx)(kp,{variant:"h6",sx:{color:"#2196f3",fontWeight:600},children:"C\xe2u ".concat(t+1,": ").concat(e.content)}),(0,Tt.jsx)(Rw,{name:"question-".concat(e.id||e.questionId),value:s[e.id||e.questionId]||"",onChange:t=>{return n=e.id||e.questionId,r=t.target.value,void c((e=>l(l({},e),{},{[n]:r})));var n,r},children:null===(n=e.answers)||void 0===n?void 0:n.map((e=>(0,Tt.jsx)(Lw,{value:e.id,control:(0,Tt.jsx)(n_,{}),label:e.answerText},e.id)))})]},e.id||e.questionId)})),!m&&(0,Tt.jsx)(Gh,{variant:"contained",color:"primary",onClick:async()=>{f(!0);try{const t=await HE.submitQuizAnswers({quizId:e,sessionId:v,answers:Object.entries(s).map((e=>{let[t,n]=e;return{questionId:t,selectedAnswerId:n}}))});t.success&&t.data?g(t.data):h(t.message||"N\u1ed9p b\xe0i th\u1ea5t b\u1ea1i")}catch(rI){h("L\u1ed7i khi n\u1ed9p b\xe0i")}finally{f(!1)}},disabled:p||Object.keys(s).length!==o.length,children:p?"\u0110ang n\u1ed9p...":"N\u1ed9p b\xe0i"}),m&&m.isPassed&&(0,Tt.jsx)(Gh,{variant:"contained",color:"success",onClick:()=>n(-1),children:"Quay l\u1ea1i"}),m&&!m.isPassed&&(0,Tt.jsx)(Gh,{variant:"contained",color:"error",onClick:()=>window.location.reload(),children:"L\xe0m l\u1ea1i"}),m&&(0,Tt.jsxs)(oA,{mt:3,children:[(0,Tt.jsx)(kp,{variant:"h6",color:m.isPassed?"success.main":"error.main",children:m.isPassed?"B\u1ea1n \u0111\xe3 v\u01b0\u1ee3t qua quiz!":"B\u1ea1n ch\u01b0a \u0111\u1ea1t y\xeau c\u1ea7u."}),(0,Tt.jsxs)(kp,{children:["K\u1ebft qu\u1ea3: ",m.score,"%"]})]})]}):null},i_=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(!0),[o,a]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{i(!0),a("");try{const e=await fetch("http://localhost:5150/api/User/consultants"),t=await e.json();t.success&&Array.isArray(t.data)?n(t.data):a("Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch chuy\xean gia")}catch(rI){a("L\u1ed7i khi t\u1ea3i danh s\xe1ch chuy\xean gia")}finally{i(!1)}})()}),[]);const s=e=>{if(!e)return"Ch\u01b0a c\u1eadp nh\u1eadt";const t=e.toLowerCase();return"male"===t||"nam"===t?"Nam":"female"===t||"n\u1eef"===t||"nu"===t?"N\u1eef":"other"===t||"kh\xe1c"===t?"Kh\xe1c":e};return(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)("div",{className:"page-header secondary-bg fade-in",children:(0,Tt.jsxs)("div",{className:"container",children:[(0,Tt.jsx)("h1",{children:"Danh s\xe1ch Chuy\xean gia T\u01b0 v\u1ea5n"}),(0,Tt.jsx)("p",{children:"Ch\u1ecdn chuy\xean gia ph\xf9 h\u1ee3p \u0111\u1ec3 nh\u1eadn t\u01b0 v\u1ea5n chuy\xean nghi\u1ec7p, b\u1ea3o m\u1eadt v\xe0 t\u1eadn t\xe2m."})]})}),(0,Tt.jsx)("div",{className:"consultant-list-page",children:r?(0,Tt.jsx)("div",{className:"consultant-list-loading",children:"\u0110ang t\u1ea3i..."}):o?(0,Tt.jsx)("div",{className:"consultant-list-error",children:o}):(0,Tt.jsx)("div",{className:"consultant-list-grid",children:e.map((e=>(0,Tt.jsxs)("div",{className:"consultant-card",children:[(0,Tt.jsx)("div",{className:"consultant-avatar",children:(0,Tt.jsx)("img",{src:e.profilePicture||"/default-avatar.png",alt:e.fullname})}),(0,Tt.jsxs)("div",{className:"consultant-info",children:[(0,Tt.jsxs)("div",{className:"consultant-row",children:[(0,Tt.jsx)("span",{className:"consultant-label",children:"H\u1ecd & t\xean:"})," ",e.fullname||"-"]}),(0,Tt.jsxs)("div",{className:"consultant-row",children:[(0,Tt.jsx)("span",{className:"consultant-label",children:"Gi\u1edbi t\xednh:"})," ",s(e.gender)]}),(0,Tt.jsxs)("div",{className:"consultant-row",children:[(0,Tt.jsx)("span",{className:"consultant-label",children:"Chuy\xean m\xf4n:"})," ",e.specialization||"-"]}),(0,Tt.jsxs)("div",{className:"consultant-row",children:[(0,Tt.jsx)("span",{className:"consultant-label",children:"B\u1eb1ng c\u1ea5p:"})," ",e.degree||"-"]})]})]},e.userId)))})})]})},o_=()=>{const[e,n]=(0,t.useState)(!1),{currentUser:r,logout:i,isAdmin:o,isConsultant:a,refreshUserData:s}=ts(),c=he(),l=(0,t.useRef)(!1);(0,t.useEffect)((()=>{r&&s&&!l.current&&(r.profilePicture||(l.current=!0,s()))}),[]);const d=async()=>{try{await i(),c("/")}catch(e){console.error("Logout error:",e),c("/")}};return(0,Tt.jsxs)("header",{className:"header",children:[(0,Tt.jsx)("div",{className:"container",children:(0,Tt.jsxs)("div",{className:"header-content flex-between",children:[(0,Tt.jsx)("div",{className:"logo-container",children:(0,Tt.jsxs)(ft,{to:"/",className:"logo-link",children:[(0,Tt.jsx)("img",{src:"/Dlogo.jpg",alt:"Logo BrightChoice",className:"logo-image"}),(0,Tt.jsx)("h1",{children:"BrightChoice"})]})}),(0,Tt.jsx)("nav",{className:"main-nav",children:(0,Tt.jsxs)("ul",{className:"nav-list",children:[(0,Tt.jsx)("li",{className:"nav-item",children:(0,Tt.jsx)(ft,{to:"/education",className:"nav-link",children:"Kh\xf3a H\u1ecdc"})}),(0,Tt.jsx)("li",{className:"nav-item",children:(0,Tt.jsx)(ft,{to:"/counseling",className:"nav-link",children:"\u0110\u1eb7t L\u1ecbch T\u01b0 V\u1ea5n"})}),(0,Tt.jsx)("li",{className:"nav-item",children:(0,Tt.jsx)(ft,{to:"/surveys",className:"nav-link",children:"Kh\u1ea3o S\xe1t"})}),(0,Tt.jsx)("li",{className:"nav-item",children:(0,Tt.jsx)(ft,{to:"/programs",className:"nav-link",children:"S\u1ef1 Ki\u1ec7n"})}),(0,Tt.jsx)("li",{className:"nav-item",children:(0,Tt.jsx)("a",{href:"/consultants",className:"nav-link",children:"Chuy\xean gia t\u01b0 v\u1ea5n"})}),r&&!o()&&!a()&&(0,Tt.jsx)("li",{className:"nav-item",children:(0,Tt.jsx)(ft,{to:"/my-appointments",className:"nav-link",children:"L\u1ecbch H\u1eb9n"})}),a()&&(0,Tt.jsx)("li",{className:"nav-item",children:(0,Tt.jsx)(ft,{to:"/consult-time",className:"nav-link",children:"Qu\u1ea3n L\xfd L\u1ecbch"})}),o()&&(0,Tt.jsx)("li",{className:"nav-item",children:(0,Tt.jsxs)(ft,{to:"/dashboard",className:"nav-link",children:[" ","B\u1ea3ng \u0111i\u1ec1u khi\u1ec3n"]})})]})}),(0,Tt.jsx)("div",{className:"mobile-menu-button",onClick:()=>{n(!e)},children:(0,Tt.jsxs)("div",{className:"hamburger ".concat(e?"active":""),children:[(0,Tt.jsx)("span",{}),(0,Tt.jsx)("span",{}),(0,Tt.jsx)("span",{})]})}),(0,Tt.jsx)("div",{className:"auth-buttons",children:r?(0,Tt.jsxs)("div",{className:"user-dropdown",children:[(0,Tt.jsxs)("button",{className:"dropdown-toggle",children:[(0,Tt.jsxs)("div",{className:"user-avatar",children:[r.profilePicture?(0,Tt.jsx)("img",{src:r.profilePicture,alt:"Profile",className:"user-profile-pic",onError:e=>{e.target.style.display="none",e.target.parentNode.querySelector(".user-initials").style.display="flex"}}):null,(0,Tt.jsx)("div",{className:"user-initials",style:{display:r.profilePicture?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",fontSize:"14px",fontWeight:"600",textTransform:"uppercase",color:"#3f51b5"},children:(()=>{if(!r)return"";const e=r.fullname||r.email||"";if(e.includes(" ")){const t=e.split(" ");return t[0][0]+t[t.length-1][0]}return e.substring(0,2)})()})]}),(0,Tt.jsx)("span",{className:"user-name",children:r?r.fullname||r.email:""}),(0,Tt.jsx)(Ld,{icon:vu})]}),(0,Tt.jsxs)("div",{className:"dropdown-menu",children:[!o()&&!a()&&(0,Tt.jsxs)(ft,{to:"/profile",className:"dropdown-item",children:[(0,Tt.jsx)(Ld,{icon:iu})," H\u1ed3 S\u01a1 C\xe1 Nh\xe2n"]}),a()&&(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsxs)(ft,{to:"/profile",className:"dropdown-item",children:[(0,Tt.jsx)(Ld,{icon:iu})," H\u1ed3 S\u01a1 C\xe1 Nh\xe2n"]}),(0,Tt.jsx)(ft,{to:"/consult-time",className:"dropdown-item",children:"Qu\u1ea3n L\xfd L\u1ecbch"})]}),o()&&(0,Tt.jsx)(ft,{to:"/dashboard",className:"dropdown-item",children:"B\u1ea3ng th\xf4ng tin"}),(0,Tt.jsxs)("button",{className:"dropdown-item",onClick:d,children:[(0,Tt.jsx)(Ld,{icon:jd})," \u0110\u0103ng Xu\u1ea5t"]})]})]}):(0,Tt.jsxs)(ft,{to:"/login",className:"btn",children:[(0,Tt.jsx)(Ld,{icon:Wd})," \u0110\u0103ng Nh\u1eadp / \u0110\u0103ng K\xfd"]})})]})}),(0,Tt.jsx)("div",{className:"mobile-menu ".concat(e?"active":""),children:(0,Tt.jsxs)("div",{className:"mobile-nav",children:[(0,Tt.jsx)(ft,{to:"/education",className:"mobile-nav-link",children:"Kh\xf3a H\u1ecdc"}),(0,Tt.jsx)(ft,{to:"/education/surveys",className:"mobile-nav-link",children:"\u0110\xe1nh Gi\xe1"}),(0,Tt.jsx)(ft,{to:"/counseling",className:"mobile-nav-link",children:"\u0110\u1eb7t L\u1ecbch T\u01b0 V\u1ea5n"}),(0,Tt.jsx)(ft,{to:"/programs",className:"mobile-nav-link",children:"Ch\u01b0\u01a1ng Tr\xecnh"}),r&&!o()&&(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsxs)(ft,{to:"/profile",className:"mobile-nav-link",children:[(0,Tt.jsx)(Ld,{icon:iu})," H\u1ed3 S\u01a1 C\xe1 Nh\xe2n"]}),!a()&&(0,Tt.jsx)(ft,{to:"/my-appointments",className:"mobile-nav-link",children:"L\u1ecbch H\u1eb9n"})]}),a()&&(0,Tt.jsxs)(ft,{to:"/consult-time",className:"mobile-nav-link",children:[(0,Tt.jsx)(Ld,{icon:Au})," Qu\u1ea3n L\xfd L\u1ecbch"]}),o()&&(0,Tt.jsxs)(ft,{to:"/dashboard",className:"mobile-nav-link",children:[(0,Tt.jsx)(Ld,{icon:gu})," Dashboard"]}),r?(0,Tt.jsxs)("button",{className:"mobile-nav-link",onClick:d,children:[(0,Tt.jsx)(Ld,{icon:jd})," \u0110\u0103ng Xu\u1ea5t"]}):(0,Tt.jsxs)(ft,{to:"/login",className:"mobile-nav-link login",children:[(0,Tt.jsx)(Ld,{icon:Wd})," \u0110\u0103ng Nh\u1eadp / \u0110\u0103ng K\xfd"]})]})})]})},a_={prefix:"fab",iconName:"instagram",icon:[448,512,[],"f16d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"]},s_={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"]},c_={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};const l_=()=>{const e=(new Date).getFullYear();return(0,Tt.jsx)("footer",{className:"footer",children:(0,Tt.jsxs)("div",{className:"container",children:[(0,Tt.jsxs)("div",{className:"footer-content",children:[(0,Tt.jsxs)("div",{className:"footer-logo",children:[(0,Tt.jsx)("h2",{children:"C\u1ed9ng \u0110\u1ed3ng BrightChoice"}),(0,Tt.jsxs)("p",{children:[(0,Tt.jsx)("span",{className:"highlight-text",children:"Trao quy\u1ec1n cho c\u1ed9ng \u0111\u1ed3ng"})," ","th\xf4ng qua gi\xe1o d\u1ee5c v\xe0 h\u1ed7 tr\u1ee3"]})]}),(0,Tt.jsxs)("div",{className:"footer-links",children:[(0,Tt.jsxs)("div",{className:"footer-links-column",children:[(0,Tt.jsx)("h3",{children:"T\xe0i Nguy\xean"}),(0,Tt.jsxs)("ul",{children:[(0,Tt.jsx)("li",{children:(0,Tt.jsx)(ft,{to:"/education",children:"Trung T\xe2m Gi\xe1o D\u1ee5c"})}),(0,Tt.jsx)("li",{children:(0,Tt.jsx)(ft,{to:"/education/surveys",children:"\u0110\xe1nh Gi\xe1"})}),(0,Tt.jsx)("li",{children:(0,Tt.jsx)(ft,{to:"/blog",children:"Blog"})})]})]}),(0,Tt.jsxs)("div",{className:"footer-links-column",children:[(0,Tt.jsx)("h3",{children:"H\u1ed7 Tr\u1ee3"}),(0,Tt.jsxs)("ul",{children:[(0,Tt.jsx)("li",{children:(0,Tt.jsx)(ft,{to:"/counseling",children:"T\u01b0 V\u1ea5n"})}),(0,Tt.jsx)("li",{children:(0,Tt.jsx)(ft,{to:"/programs",children:"Ch\u01b0\u01a1ng Tr\xecnh"})}),(0,Tt.jsx)("li",{children:(0,Tt.jsx)(ft,{to:"/contact",children:"Li\xean H\u1ec7"})})]})]}),(0,Tt.jsxs)("div",{className:"footer-links-column",children:[(0,Tt.jsx)("h3",{children:"Ph\xe1p L\xfd"}),(0,Tt.jsxs)("ul",{children:[(0,Tt.jsx)("li",{children:(0,Tt.jsx)(ft,{to:"/privacy",children:"Ch\xednh S\xe1ch B\u1ea3o M\u1eadt"})}),(0,Tt.jsx)("li",{children:(0,Tt.jsx)(ft,{to:"/terms",children:"\u0110i\u1ec1u Kho\u1ea3n D\u1ecbch V\u1ee5"})}),(0,Tt.jsx)("li",{children:(0,Tt.jsx)(ft,{to:"/disclaimer",children:"Mi\u1ec5n Tr\u1eeb Tr\xe1ch Nhi\u1ec7m S\u1ee9c Kh\u1ecfe"})})]})]})]})]}),(0,Tt.jsxs)("div",{className:"footer-bottom",children:[(0,Tt.jsxs)("div",{className:"copyright",children:["\xa9 ",e," C\u1ed9ng \u0110\u1ed3ng BrightChoice. \u0110\xe3 \u0111\u0103ng k\xfd b\u1ea3n quy\u1ec1n."]}),(0,Tt.jsxs)("div",{className:"social-links",children:[(0,Tt.jsx)("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",children:(0,Tt.jsx)(Ld,{icon:s_})}),(0,Tt.jsx)("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",children:(0,Tt.jsx)(Ld,{icon:c_})}),(0,Tt.jsx)("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",children:(0,Tt.jsx)(Ld,{icon:a_})})]})]})]})})},d_=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)(!1);return(0,Tt.jsxs)("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[(0,Tt.jsx)("h2",{children:"API Connection Test"}),(0,Tt.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Tt.jsx)("button",{onClick:async()=>{i(!0),n(null);try{const e=await fetch("http://localhost:5150/health"),t=await e.text();n({success:e.ok,status:e.status,message:"Backend health check: ".concat(e.status),data:t})}catch(e){n({success:!1,error:e.message,errorType:e.name,message:"Backend is not running or not accessible"})}finally{i(!1)}},disabled:r,children:"Test Backend Health"}),(0,Tt.jsx)("button",{onClick:async()=>{i(!0),n(null);try{const t=await fetch("http://localhost:5150/api/Auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:"hohoanghai@gmail.com",password:"123456"})});let r=null;try{r=await t.json()}catch(e){r={error:"Failed to parse JSON response"}}n({success:t.ok,status:t.status,data:r})}catch(t){n({success:!1,error:t.message,errorType:t.name})}finally{i(!1)}},disabled:r,children:"Test Login API"}),(0,Tt.jsx)("button",{onClick:()=>{window.open("http://localhost:5150/swagger/index.html","_blank")},disabled:r,children:"Open Swagger"})]}),e&&(0,Tt.jsx)("pre",{style:{backgroundColor:"#eee",padding:"10px"},children:JSON.stringify(e,null,2)})]})};function u_(e){return eA("MuiCollapse",e)}tA("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const A_=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],h_=["ownerState"],p_=CA("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})(IA((e=>{let{theme:t}=e;return{height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"exited"===t.state&&!t.in&&"0px"===t.collapsedSize},style:{visibility:"hidden"}}]}}))),f_=CA("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),m_=CA("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),g_=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiCollapse"}),{addEndListener:i,children:o,className:s,collapsedSize:c="0px",component:d,easing:u,in:A,onEnter:h,onEntered:p,onEntering:f,onExit:m,onExited:g,onExiting:v,orientation:y="vertical",style:b,timeout:E=Qo.standard,TransitionComponent:w=Lf}=r,_=a(r,A_),S=l(l({},r),{},{orientation:y,collapsedSize:c}),C=(e=>{const{orientation:t,classes:n}=e;return aA({root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]},u_,n)})(S),T=sp(),I=qA(),R=t.useRef(null),x=t.useRef(),N="number"===typeof c?"".concat(c,"px"):c,O="horizontal"===y,k=O?"width":"height",P=t.useRef(null),B=NA(n,P),L=e=>t=>{if(e){const n=P.current;void 0===t?e(n):e(n,t)}},D=()=>R.current?R.current[O?"clientWidth":"clientHeight"]:0,U=L(((e,t)=>{R.current&&O&&(R.current.style.position="absolute"),e.style[k]=N,h&&h(e,t)})),M=L(((e,t)=>{const n=D();R.current&&O&&(R.current.style.position="");const{duration:r,easing:i}=Uf({style:b,timeout:E,easing:u},{mode:"enter"});if("auto"===E){const t=T.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(t,"ms"),x.current=t}else e.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");e.style[k]="".concat(n,"px"),e.style.transitionTimingFunction=i,f&&f(e,t)})),F=L(((e,t)=>{e.style[k]="auto",p&&p(e,t)})),j=L((e=>{e.style[k]="".concat(D(),"px"),m&&m(e)})),Q=L(g),V=L((e=>{const t=D(),{duration:n,easing:r}=Uf({style:b,timeout:E,easing:u},{mode:"exit"});if("auto"===E){const n=T.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(n,"ms"),x.current=n}else e.style.transitionDuration="string"===typeof n?n:"".concat(n,"ms");e.style[k]=N,e.style.transitionTimingFunction=r,v&&v(e)}));return(0,Tt.jsx)(w,l(l({in:A,onEnter:U,onEntered:F,onEntering:M,onExit:j,onExited:Q,onExiting:V,addEndListener:e=>{"auto"===E&&I.start(x.current||0,e),i&&i(P.current,e)},nodeRef:P,timeout:"auto"===E?null:E},_),{},{children:(e,t)=>{let{ownerState:n}=t,r=a(t,h_);return(0,Tt.jsx)(p_,l(l({as:d,className:Mu(C.root,s,{entered:C.entered,exited:!A&&"0px"===N&&C.hidden}[e]),style:l({[O?"minWidth":"minHeight"]:N},b),ref:B,ownerState:l(l({},S),{},{state:e})},r),{},{children:(0,Tt.jsx)(f_,{ownerState:l(l({},S),{},{state:e}),className:C.wrapper,ref:R,children:(0,Tt.jsx)(m_,{ownerState:l(l({},S),{},{state:e}),className:C.wrapperInner,children:o})})}))}}))}));g_&&(g_.muiSupportAuto=!0);const v_=g_;const y_=t.createContext({});function b_(e){return eA("MuiAccordion",e)}const E_=tA("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),w_=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],__=CA(up,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(E_.region)]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})(IA((e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],n),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&::before":{display:"none"}},["&.".concat(E_.expanded)]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},["&.".concat(E_.disabled)]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}})),IA((e=>{let{theme:t}=e;return{variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{["&.".concat(E_.expanded)]:{margin:"16px 0"}}}]}}))),S_=CA("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),C_=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiAccordion"}),{children:i,className:o,defaultExpanded:s=!1,disabled:c=!1,disableGutters:d=!1,expanded:u,onChange:A,square:h=!1,slots:p={},slotProps:f={},TransitionComponent:m,TransitionProps:g}=r,v=a(r,w_),[y,b]=Km({controlled:u,default:s,name:"Accordion",state:"expanded"}),E=t.useCallback((e=>{b(!y),A&&A(e,!y)}),[y,A,b]),[w,..._]=t.Children.toArray(i),S=t.useMemo((()=>({expanded:y,disabled:c,disableGutters:d,toggle:E})),[y,c,d,E]),C=l(l({},r),{},{square:h,disabled:c,disableGutters:d,expanded:y}),T=(e=>{const{classes:t,square:n,expanded:r,disabled:i,disableGutters:o}=e;return aA({root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],heading:["heading"],region:["region"]},b_,t)})(C),I={slots:l({transition:m},p),slotProps:l({transition:g},f)},[R,x]=uf("root",{elementType:__,externalForwardedProps:l(l({},I),v),className:Mu(T.root,o),shouldForwardComponentProp:!0,ownerState:C,ref:n,additionalProps:{square:h}}),[N,O]=uf("heading",{elementType:S_,externalForwardedProps:I,className:T.heading,ownerState:C}),[k,P]=uf("transition",{elementType:v_,externalForwardedProps:I,ownerState:C});return(0,Tt.jsxs)(R,l(l({},x),{},{children:[(0,Tt.jsx)(N,l(l({},O),{},{children:(0,Tt.jsx)(y_.Provider,{value:S,children:w})})),(0,Tt.jsx)(k,l(l({in:y,timeout:"auto"},P),{},{children:(0,Tt.jsx)("div",{"aria-labelledby":w.props.id,id:w.props["aria-controls"],role:"region",className:T.region,children:_})}))]}))})),T_=C_;function I_(e){return eA("MuiListItemButton",e)}const R_=tA("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),x_=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],N_=CA(fh,{shouldForwardProp:e=>AA(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})(IA((e=>{let{theme:t}=e;return{display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(R_.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):qi(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(R_.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):qi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(R_.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):qi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):qi(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(R_.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(R_.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{paddingTop:4,paddingBottom:4}}]}}))),O_=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:s="div",children:c,dense:d=!1,disableGutters:u=!1,divider:A=!1,focusVisibleClassName:h,selected:p=!1,className:f}=r,m=a(r,x_),g=t.useContext(ey),v=t.useMemo((()=>({dense:d||g.dense||!1,alignItems:i,disableGutters:u})),[i,g.dense,d,u]),y=t.useRef(null);zp((()=>{o&&y.current&&y.current.focus()}),[o]);const b=l(l({},r),{},{alignItems:i,dense:v.dense,disableGutters:u,divider:A,selected:p}),E=(e=>{const{alignItems:t,classes:n,dense:r,disabled:i,disableGutters:o,divider:a,selected:s}=e,c=aA({root:["root",r&&"dense",!o&&"gutters",a&&"divider",i&&"disabled","flex-start"===t&&"alignItemsFlexStart",s&&"selected"]},I_,n);return l(l({},n),c)})(b),w=NA(y,n);return(0,Tt.jsx)(ey.Provider,{value:v,children:(0,Tt.jsx)(N_,l(l({ref:w,href:m.href||m.to,component:(m.href||m.to)&&"div"===s?"button":s,focusVisibleClassName:Mu(E.focusVisible,h),ownerState:b,className:Mu(E.root,f)},m),{},{classes:E,children:c}))})})),k_=O_,P_=Zh((0,Tt.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),B_=["slots","slotProps"],L_=CA(fh)(IA((e=>{let{theme:t}=e;return l(l({display:"flex",marginLeft:"calc(".concat(t.spacing(1)," * 0.5)"),marginRight:"calc(".concat(t.spacing(1)," * 0.5)")},"light"===t.palette.mode?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]}),{},{borderRadius:2,"&:hover, &:focus":l({},"light"===t.palette.mode?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":l({boxShadow:t.shadows[0]},"light"===t.palette.mode?{backgroundColor:eo(t.palette.grey[200],.12)}:{backgroundColor:eo(t.palette.grey[600],.12)})})}))),D_=CA(P_)({width:24,height:16});const U_=function(e){const{slots:t={},slotProps:n={}}=e,r=a(e,B_),i=e;return(0,Tt.jsx)("li",{children:(0,Tt.jsx)(L_,l(l({focusRipple:!0},r),{},{ownerState:i,children:(0,Tt.jsx)(D_,l({as:t.CollapsedIcon,ownerState:i},n.collapsedIcon))}))})};function M_(e){return eA("MuiBreadcrumbs",e)}const F_=tA("MuiBreadcrumbs",["root","ol","li","separator"]),j_=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],Q_=CA(kp,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{["& .".concat(F_.li)]:t.li},t.root]})({}),V_=CA("ol",{name:"MuiBreadcrumbs",slot:"Ol"})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),H_=CA("li",{name:"MuiBreadcrumbs",slot:"Separator"})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function z_(e,t,n,r){return e.reduce(((i,o,a)=>(a<e.length-1?i=i.concat(o,(0,Tt.jsx)(H_,{"aria-hidden":!0,className:t,ownerState:r,children:n},"separator-".concat(a))):i.push(o),i)),[])}const K_=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiBreadcrumbs"}),{children:i,className:o,component:s="nav",slots:c={},slotProps:d={},expandText:u="Show path",itemsAfterCollapse:A=1,itemsBeforeCollapse:h=1,maxItems:p=8,separator:f="/"}=r,m=a(r,j_),[g,v]=t.useState(!1),y=l(l({},r),{},{component:s,expanded:g,expandText:u,itemsAfterCollapse:A,itemsBeforeCollapse:h,maxItems:p,separator:f}),b=(e=>{const{classes:t}=e;return aA({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},M_,t)})(y),E=jp({elementType:c.CollapsedIcon,externalSlotProps:d.collapsedIcon,ownerState:y}),w=t.useRef(null),_=t.Children.toArray(i).filter((e=>t.isValidElement(e))).map(((e,t)=>(0,Tt.jsx)("li",{className:b.li,children:e},"child-".concat(t))));return(0,Tt.jsx)(Q_,l(l({ref:n,component:s,color:"textSecondary",className:Mu(b.root,o),ownerState:y},m),{},{children:(0,Tt.jsx)(V_,{className:b.ol,ref:w,ownerState:y,children:z_(g||p&&_.length<=p?_:(e=>h+A>=e.length?e:[...e.slice(0,h),(0,Tt.jsx)(U_,{"aria-label":u,slots:{CollapsedIcon:c.CollapsedIcon},slotProps:{collapsedIcon:E},onClick:()=>{v(!0);const e=w.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-A,e.length)])(_),b.separator,f,y)})}))}));function G_(e){return eA("MuiLink",e)}const W_=tA("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),q_=e=>{let{theme:t,ownerState:n}=e;const r=n.color,i=kr(t,"palette.".concat(r,".main"),!1)||kr(t,"palette.".concat(r),!1)||n.color,o=kr(t,"palette.".concat(r,".mainChannel"))||kr(t,"palette.".concat(r,"Channel"));return"vars"in t&&o?"rgba(".concat(o," / 0.4)"):qi(i,.4)},Y_=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],X_={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},J_=CA(kp,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["underline".concat(mh(n.underline))],"button"===n.component&&t.button]}})(IA((e=>{let{theme:t}=e;return{variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:e=>{let{underline:t,ownerState:n}=e;return"always"===t&&"inherit"!==n.color},style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{underline:"always",color:n},style:{"--Link-underlineColor":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / 0.4)"):qi(t.palette[n].main,.4)}}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.4)"):qi(t.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":t.vars?"rgba(".concat(t.vars.palette.text.secondaryChannel," / 0.4)"):qi(t.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(t.vars||t).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(W_.focusVisible)]:{outline:"auto"}}}]}}))),Z_=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiLink"}),i=sp(),{className:o,color:s="primary",component:c="a",onBlur:d,onFocus:u,TypographyClasses:A,underline:h="always",variant:p="inherit",sx:f}=r,m=a(r,Y_),[g,v]=t.useState(!1),y=l(l({},r),{},{color:s,component:c,focusVisible:g,underline:h,variant:p}),b=(e=>{const{classes:t,component:n,focusVisible:r,underline:i}=e;return aA({root:["root","underline".concat(mh(i)),"button"===n&&"button",r&&"focusVisible"]},G_,t)})(y);return(0,Tt.jsx)(J_,l(l({color:s,className:Mu(b.root,o),classes:A,component:c,onBlur:e=>{RA(e.target)||v(!1),d&&d(e)},onFocus:e=>{RA(e.target)&&v(!0),u&&u(e)},ref:n,ownerState:y,variant:p},m),{},{sx:[...void 0===X_[s]?[{color:s}]:[],...Array.isArray(f)?f:[f]],style:l(l({},m.style),"always"===h&&"inherit"!==s&&!X_[s]&&{"--Link-underlineColor":q_({theme:i,ownerState:y})})}))})),$_=Z_;function eS(e){return eA("MuiLinearProgress",e)}tA("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const tS=["className","color","value","valueBuffer","variant"];var nS,rS,iS,oS,aS,sS;const cS=xi(nS||(nS=DA(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"]))),lS="string"!==typeof cS?Ri(rS||(rS=DA(["\n        animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n      "])),cS):null,dS=xi(iS||(iS=DA(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"]))),uS="string"!==typeof dS?Ri(oS||(oS=DA(["\n        animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n      "])),dS):null,AS=xi(aS||(aS=DA(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"]))),hS="string"!==typeof AS?Ri(sS||(sS=DA(["\n        animation: "," 3s infinite linear;\n      "])),AS):null,pS=(e,t)=>e.vars?e.vars.palette.LinearProgress["".concat(t,"Bg")]:"light"===e.palette.mode?Zi(e.palette[t].main,.62):Xi(e.palette[t].main,.5),fS=CA("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["color".concat(mh(n.color))],t[n.variant]]}})(IA((e=>{let{theme:t}=e;return{position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n},style:{backgroundColor:pS(t,n)}}})),{props:e=>{let{ownerState:t}=e;return"inherit"===t.color&&"buffer"!==t.variant},style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}}))),mS=CA("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t["dashedColor".concat(mh(n.color))]]}})(IA((e=>{let{theme:t}=e;return{position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;const r=pS(t,n);return{props:{color:n},style:{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)")}}}))]}})),hS||{animation:"".concat(AS," 3s infinite linear")}),gS=CA("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar1,t["barColor".concat(mh(n.color))],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})(IA((e=>{let{theme:t}=e;return{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main}}})),{props:{variant:"determinate"},style:{transition:"transform .".concat(4,"s linear")}},{props:{variant:"buffer"},style:{zIndex:1,transition:"transform .".concat(4,"s linear")}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant||"query"===t.variant},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant||"query"===t.variant},style:lS||{animation:"".concat(cS," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite")}}]}}))),vS=CA("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar2,t["barColor".concat(mh(n.color))],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})(IA((e=>{let{theme:t}=e;return{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n},style:{"--LinearProgressBar2-barColor":(t.vars||t).palette[n].main}}})),{props:e=>{let{ownerState:t}=e;return"buffer"!==t.variant&&"inherit"!==t.color},style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:e=>{let{ownerState:t}=e;return"buffer"!==t.variant&&"inherit"===t.color},style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n,variant:"buffer"},style:{backgroundColor:pS(t,n),transition:"transform .".concat(4,"s linear")}}})),{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant||"query"===t.variant},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant||"query"===t.variant},style:uS||{animation:"".concat(dS," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite")}}]}}))),yS=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiLinearProgress"}),{className:r,color:i="primary",value:o,valueBuffer:s,variant:c="indeterminate"}=n,d=a(n,tS),u=l(l({},n),{},{color:i,variant:c}),A=(e=>{const{classes:t,variant:n,color:r}=e;return aA({root:["root","color".concat(mh(r)),n],dashed:["dashed","dashedColor".concat(mh(r))],bar1:["bar","bar1","barColor".concat(mh(r)),("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","bar2","buffer"!==n&&"barColor".concat(mh(r)),"buffer"===n&&"color".concat(mh(r)),("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]},eS,t)})(u),h=ar(),p={},f={bar1:{},bar2:{}};if("determinate"===c||"buffer"===c)if(void 0!==o){p["aria-valuenow"]=Math.round(o),p["aria-valuemin"]=0,p["aria-valuemax"]=100;let e=o-100;h&&(e=-e),f.bar1.transform="translateX(".concat(e,"%)")}else 0;if("buffer"===c)if(void 0!==s){let e=(s||0)-100;h&&(e=-e),f.bar2.transform="translateX(".concat(e,"%)")}else 0;return(0,Tt.jsxs)(fS,l(l(l({className:Mu(A.root,r),ownerState:u,role:"progressbar"},p),{},{ref:t},d),{},{children:["buffer"===c?(0,Tt.jsx)(mS,{className:A.dashed,ownerState:u}):null,(0,Tt.jsx)(gS,{className:A.bar1,ownerState:u,style:f.bar1}),"determinate"===c?null:(0,Tt.jsx)(vS,{className:A.bar2,ownerState:u,style:f.bar2})]}))})),bS=yS;function ES(e){return eA("MuiAccordionSummary",e)}const wS=tA("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),_S=["children","className","expandIcon","focusVisibleClassName","onClick","slots","slotProps"],SS=CA(fh,{name:"MuiAccordionSummary",slot:"Root"})(IA((e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),["&.".concat(wS.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(wS.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["&:hover:not(.".concat(wS.disabled,")")]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{["&.".concat(wS.expanded)]:{minHeight:64}}}]}}))),CS=CA("span",{name:"MuiAccordionSummary",slot:"Content"})(IA((e=>{let{theme:t}=e;return{display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),["&.".concat(wS.expanded)]:{margin:"20px 0"}}}]}}))),TS=CA("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(IA((e=>{let{theme:t}=e;return{display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),["&.".concat(wS.expanded)]:{transform:"rotate(180deg)"}}}))),IS=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiAccordionSummary"}),{children:i,className:o,expandIcon:s,focusVisibleClassName:c,onClick:d,slots:u,slotProps:A}=r,h=a(r,_S),{disabled:p=!1,disableGutters:f,expanded:m,toggle:g}=t.useContext(y_),v=l(l({},r),{},{expanded:m,disabled:p,disableGutters:f}),y=(e=>{const{classes:t,expanded:n,disabled:r,disableGutters:i}=e;return aA({root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},ES,t)})(v),b={slots:u,slotProps:A},[E,w]=uf("root",{ref:n,shouldForwardComponentProp:!0,className:Mu(y.root,o),elementType:SS,externalForwardedProps:l(l({},b),h),ownerState:v,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:p,"aria-expanded":m,focusVisibleClassName:Mu(y.focusVisible,c)},getSlotProps:e=>l(l({},e),{},{onClick:t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e,t),(e=>{g&&g(e),d&&d(e)})(t)}})}),[_,S]=uf("content",{className:y.content,elementType:CS,externalForwardedProps:b,ownerState:v}),[C,T]=uf("expandIconWrapper",{className:y.expandIconWrapper,elementType:TS,externalForwardedProps:b,ownerState:v});return(0,Tt.jsxs)(E,l(l({},w),{},{children:[(0,Tt.jsx)(_,l(l({},S),{},{children:i})),s&&(0,Tt.jsx)(C,l(l({},T),{},{children:s}))]}))})),RS=IS;function xS(e){return eA("MuiAccordionDetails",e)}tA("MuiAccordionDetails",["root"]);const NS=["className"],OS=CA("div",{name:"MuiAccordionDetails",slot:"Root"})(IA((e=>{let{theme:t}=e;return{padding:t.spacing(1,2,2)}}))),kS=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiAccordionDetails"}),{className:r}=n,i=a(n,NS),o=n,s=(e=>{const{classes:t}=e;return aA({root:["root"]},xS,t)})(o);return(0,Tt.jsx)(OS,l({className:Mu(s.root,r),ref:t,ownerState:o},i))}));function PS(e){return eA("MuiListItemIcon",e)}const BS=tA("MuiListItemIcon",["root","alignItemsFlexStart"]),LS=["className"],DS=CA("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})(IA((e=>{let{theme:t}=e;return{minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}}))),US=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiListItemIcon"}),{className:i}=r,o=a(r,LS),s=t.useContext(ey),c=l(l({},r),{},{alignItems:s.alignItems}),d=(e=>{const{alignItems:t,classes:n}=e;return aA({root:["root","flex-start"===t&&"alignItemsFlexStart"]},PS,n)})(c);return(0,Tt.jsx)(DS,l({className:Mu(d.root,i),ownerState:c,ref:n},o))}));function MS(e){return eA("MuiListItemText",e)}const FS=tA("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),jS=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps","slots","slotProps"],QS=CA("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(FS.primary)]:t.primary},{["& .".concat(FS.secondary)]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[".".concat(Sp.root,":where(& .").concat(FS.primary,")")]:{display:"block"},[".".concat(Sp.root,":where(& .").concat(FS.secondary,")")]:{display:"block"},variants:[{props:e=>{let{ownerState:t}=e;return t.primary&&t.secondary},style:{marginTop:6,marginBottom:6}},{props:e=>{let{ownerState:t}=e;return t.inset},style:{paddingLeft:56}}]}),VS=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiListItemText"}),{children:i,className:o,disableTypography:s=!1,inset:c=!1,primary:d,primaryTypographyProps:u,secondary:A,secondaryTypographyProps:h,slots:p={},slotProps:f={}}=r,m=a(r,jS),{dense:g}=t.useContext(ey);let v=null!=d?d:i,y=A;const b=l(l({},r),{},{disableTypography:s,inset:c,primary:!!v,secondary:!!y,dense:g}),E=(e=>{const{classes:t,inset:n,primary:r,secondary:i,dense:o}=e;return aA({root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},MS,t)})(b),w={slots:p,slotProps:l({primary:u,secondary:h},f)},[_,S]=uf("root",{className:Mu(E.root,o),elementType:QS,externalForwardedProps:l(l({},w),m),ownerState:b,ref:n}),[C,T]=uf("primary",{className:E.primary,elementType:kp,externalForwardedProps:w,ownerState:b}),[I,R]=uf("secondary",{className:E.secondary,elementType:kp,externalForwardedProps:w,ownerState:b});return null==v||v.type===kp||s||(v=(0,Tt.jsx)(C,l(l({variant:g?"body2":"body1",component:null!==T&&void 0!==T&&T.variant?void 0:"span"},T),{},{children:v}))),null==y||y.type===kp||s||(y=(0,Tt.jsx)(I,l(l({variant:"body2",color:"textSecondary"},R),{},{children:y}))),(0,Tt.jsxs)(_,l(l({},S),{},{children:[v,y]}))}));function HS(e){return eA("MuiDialog",e)}const zS=tA("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const KS=t.createContext({}),GS=["aria-describedby","aria-labelledby","aria-modal","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onClick","onClose","open","PaperComponent","PaperProps","scroll","slots","slotProps","TransitionComponent","transitionDuration","TransitionProps"],WS=CA(Iy,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),qS=CA(Vy,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),YS=CA("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t["scroll".concat(mh(n.scroll))]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),XS=CA(up,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t["scrollPaper".concat(mh(n.scroll))],t["paperWidth".concat(mh(String(n.maxWidth)))],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(IA((e=>{let{theme:t}=e;return{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:e=>{let{ownerState:t}=e;return!t.maxWidth},style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)"),["&.".concat(zS.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter((e=>"xs"!==e)).map((e=>({props:{maxWidth:e},style:{maxWidth:"".concat(t.breakpoints.values[e]).concat(t.breakpoints.unit),["&.".concat(zS.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}}))),{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"calc(100% - 64px)"}},{props:e=>{let{ownerState:t}=e;return t.fullScreen},style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(zS.paperScrollBody)]:{margin:0,maxWidth:"100%"}}}]}}))),JS=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiDialog"}),i=sp(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":s,"aria-labelledby":c,"aria-modal":d=!0,BackdropComponent:u,BackdropProps:A,children:h,className:p,disableEscapeKeyDown:f=!1,fullScreen:m=!1,fullWidth:g=!1,maxWidth:v="sm",onClick:y,onClose:b,open:E,PaperComponent:w=up,PaperProps:_={},scroll:S="paper",slots:C={},slotProps:T={},TransitionComponent:I=_y,transitionDuration:R=o,TransitionProps:x}=r,N=a(r,GS),O=l(l({},r),{},{disableEscapeKeyDown:f,fullScreen:m,fullWidth:g,maxWidth:v,scroll:S}),k=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=e;return aA({root:["root"],container:["container","scroll".concat(mh(n))],paper:["paper","paperScroll".concat(mh(n)),"paperWidth".concat(mh(String(r))),i&&"paperFullWidth",o&&"paperFullScreen"]},HS,t)})(O),P=t.useRef(),B=lA(c),L=t.useMemo((()=>({titleId:B})),[B]),D={slots:l({transition:I},C),slotProps:l({transition:x,paper:_,backdrop:A},T)},[U,M]=uf("root",{elementType:qS,shouldForwardComponentProp:!0,externalForwardedProps:D,ownerState:O,className:Mu(k.root,p),ref:n}),[F,j]=uf("backdrop",{elementType:WS,shouldForwardComponentProp:!0,externalForwardedProps:D,ownerState:O}),[Q,V]=uf("paper",{elementType:XS,shouldForwardComponentProp:!0,externalForwardedProps:D,ownerState:O,className:Mu(k.paper,_.className)}),[H,z]=uf("container",{elementType:YS,externalForwardedProps:D,ownerState:O,className:k.container}),[K,G]=uf("transition",{elementType:_y,externalForwardedProps:D,ownerState:O,additionalProps:{appear:!0,in:E,timeout:R,role:"presentation"}});return(0,Tt.jsx)(U,l(l(l({closeAfterTransition:!0,slots:{backdrop:F},slotProps:{backdrop:l({transitionDuration:R,as:u},j)},disableEscapeKeyDown:f,onClose:b,open:E,onClick:e=>{y&&y(e),P.current&&(P.current=null,b&&b(e,"backdropClick"))}},M),N),{},{children:(0,Tt.jsx)(K,l(l({},G),{},{children:(0,Tt.jsx)(H,l(l({onMouseDown:e=>{P.current=e.target===e.currentTarget}},z),{},{children:(0,Tt.jsx)(Q,l(l({as:w,elevation:24,role:"dialog","aria-describedby":s,"aria-labelledby":B,"aria-modal":d},V),{},{children:(0,Tt.jsx)(KS.Provider,{value:L,children:h})}))}))}))}))})),ZS=JS;function $S(e){return eA("MuiDialogTitle",e)}const eC=tA("MuiDialogTitle",["root"]),tC=["className","id"],nC=CA(kp,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),rC=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiDialogTitle"}),{className:i,id:o}=r,s=a(r,tC),c=r,d=(e=>{const{classes:t}=e;return aA({root:["root"]},$S,t)})(c),{titleId:u=o}=t.useContext(KS);return(0,Tt.jsx)(nC,l({component:"h2",className:Mu(d.root,i),ownerState:c,ref:n,variant:"h6",id:null!==o&&void 0!==o?o:u},s))}));function iC(e){return eA("MuiDialogContent",e)}tA("MuiDialogContent",["root","dividers"]);const oC=["className","dividers"],aC=CA("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(IA((e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(eC.root," + &")]:{paddingTop:0}}}]}}))),sC=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiDialogContent"}),{className:r,dividers:i=!1}=n,o=a(n,oC),s=l(l({},n),{},{dividers:i}),c=(e=>{const{classes:t,dividers:n}=e;return aA({root:["root",n&&"dividers"]},iC,t)})(s);return(0,Tt.jsx)(aC,l({className:Mu(c.root,r),ownerState:s,ref:t},o))}));function cC(e){return eA("MuiDialogActions",e)}tA("MuiDialogActions",["root","spacing"]);const lC=["className","disableSpacing"],dC=CA("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableSpacing},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),uC=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:i=!1}=n,o=a(n,lC),s=l(l({},n),{},{disableSpacing:i}),c=(e=>{const{classes:t,disableSpacing:n}=e;return aA({root:["root",!n&&"spacing"]},cC,t)})(s);return(0,Tt.jsx)(dC,l({className:Mu(c.root,r),ownerState:s,ref:t},o))}));function AC(e){return eA("MuiFab",e)}const hC=tA("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),pC=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],fC=CA(fh,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>AA(e)||"classes"===e,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat(mh(n.size))],"inherit"===n.color&&t.colorInherit,t[mh(n.size)],t[n.color]]}})(IA((e=>{var t,n;let{theme:r}=e;return l(l({},r.typography.button),{},{minHeight:36,transition:r.transitions.create(["background-color","box-shadow","border-color"],{duration:r.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(r.vars||r).zIndex.fab,boxShadow:(r.vars||r).shadows[6],"&:active":{boxShadow:(r.vars||r).shadows[12]},color:r.vars?r.vars.palette.grey[900]:null===(t=(n=r.palette).getContrastText)||void 0===t?void 0:t.call(n,r.palette.grey[300]),backgroundColor:(r.vars||r).palette.grey[300],"&:hover":{backgroundColor:(r.vars||r).palette.grey.A100,"@media (hover: none)":{backgroundColor:(r.vars||r).palette.grey[300]},textDecoration:"none"},["&.".concat(hC.focusVisible)]:{boxShadow:(r.vars||r).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]})})),IA((e=>{let{theme:t}=e;return{variants:[...Object.entries(t.palette).filter(gh(["dark","contrastText"])).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].contrastText,backgroundColor:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:(t.vars||t).palette[n].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n].main}}}}}))]}})),IA((e=>{let{theme:t}=e;return{["&.".concat(hC.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}}))),mC=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiFab"}),{children:r,className:i,color:o="default",component:s="button",disabled:c=!1,disableFocusRipple:d=!1,focusVisibleClassName:u,size:A="large",variant:h="circular"}=n,p=a(n,pC),f=l(l({},n),{},{color:o,component:s,disabled:c,disableFocusRipple:d,size:A,variant:h}),m=(e=>{const{color:t,variant:n,classes:r,size:i}=e,o=aA({root:["root",n,"size".concat(mh(i)),"inherit"===t?"colorInherit":t]},AC,r);return l(l({},r),o)})(f);return(0,Tt.jsx)(fC,l(l({className:Mu(m.root,i),component:s,disabled:c,focusRipple:!d,focusVisibleClassName:Mu(m.focusVisible,u),ownerState:f,ref:t},p),{},{classes:m,children:r}))})),gC=mC,vC=Zh((0,Tt.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),yC=Zh((0,Tt.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),bC=Zh((0,Tt.jsx)("path",{d:"M8 5v14l11-7z"})),EC=Zh((0,Tt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),wC=Zh((0,Tt.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),_C=Zh((0,Tt.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),SC=Zh((0,Tt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"})),CC=Zh([(0,Tt.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4z"},"0"),(0,Tt.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-5.99 13c-.59 0-1.05-.47-1.05-1.05 0-.59.47-1.04 1.05-1.04.59 0 1.04.45 1.04 1.04-.01.58-.45 1.05-1.04 1.05m2.5-6.17c-.63.93-1.23 1.21-1.56 1.81-.13.24-.18.4-.18 1.18h-1.52c0-.41-.06-1.08.26-1.65.41-.73 1.18-1.16 1.63-1.8.48-.68.21-1.94-1.14-1.94-.88 0-1.32.67-1.5 1.23l-1.37-.57C11.51 5.96 12.52 5 13.99 5c1.23 0 2.08.56 2.51 1.26.37.61.58 1.73.01 2.57"},"1")]),TC=Zh((0,Tt.jsx)("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"})),IC=Zh((0,Tt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"})),RC=Zh((0,Tt.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"})),xC=CA(up)((e=>{let{theme:t,status:n}=e;return{padding:t.spacing(2),borderRadius:t.spacing(1),border:"2px solid ".concat("warning"===n?t.palette.warning.main:"danger"===n?t.palette.error.main:t.palette.primary.main),backgroundColor:"warning"===n?t.palette.warning.light:"danger"===n?t.palette.error.light:t.palette.background.paper,transition:"all 0.3s ease-in-out"}})),NC=CA(oA)((e=>{let{theme:t,progress:n,status:r}=e;return{position:"relative",display:"inline-flex","& .MuiCircularProgress-root":{color:"danger"===r?t.palette.error.main:"warning"===r?t.palette.warning.main:t.palette.primary.main}}})),OC=e=>{let{totalTimeMinutes:n=30,onTimeUp:r,onWarning:i,isActive:o=!1,isPaused:a=!1,warningThreshold:s=5,dangerThreshold:c=2,showCircular:l=!1,size:d="medium"}=e;const[u,A]=(0,t.useState)(60*n),[h,p]=(0,t.useState)("normal"),[f,m]=(0,t.useState)(!1),g=60*n,v=(g-u)/g*100,y=u/g*100,b=(0,t.useCallback)((e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return t>0?"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0")):"".concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))}),[]),E=(0,t.useCallback)((e=>{const t=e/60;return e<=0?"expired":t<=c?"danger":t<=s?"warning":"normal"}),[c,s]),w=e=>{switch(e){case"expired":case"danger":return"error";case"warning":return"warning";default:return"primary"}},_=e=>{switch(e){case"expired":case"danger":return(0,Tt.jsx)(IC,{});case"warning":return(0,Tt.jsx)(RC,{});default:return(0,Tt.jsx)(FE,{})}};(0,t.useEffect)((()=>{if(!o||a)return;const e=setInterval((()=>{A((e=>{const t=Math.max(0,e-1),n=E(t);return p(n),"warning"===n&&!f&&i&&(m(!0),i(t)),0===t&&r&&r(),t}))}),1e3);return()=>clearInterval(e)}),[o,a,f,r,i,E]),(0,t.useEffect)((()=>{"normal"===h&&f&&m(!1)}),[h,f]);return o?l?(0,Tt.jsxs)(NC,{progress:v,status:h,children:[(0,Tt.jsx)(Ph,{variant:"determinate",value:y,size:"small"===d?60:"large"===d?120:80,thickness:4,color:w(h)}),(0,Tt.jsxs)(oA,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[_(h),(0,Tt.jsx)(kp,{variant:"small"===d?"caption":"body2",component:"div",color:w(h),fontWeight:"bold",children:b(u)})]})]}):"compact"===d?(0,Tt.jsx)(Nm,{icon:_(h),label:b(u),color:w(h),variant:"normal"===h?"outlined":"filled",size:d}):(0,Tt.jsx)(xC,{elevation:2,status:h,children:(0,Tt.jsxs)(Vm,{spacing:2,children:[(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",spacing:1,children:[_(h),(0,Tt.jsx)(kp,{variant:"h6",color:w(h),children:b(u)})]}),(0,Tt.jsx)(Nm,{label:"expired"===h?"Time's Up!":"danger"===h?"Hurry Up!":"warning"===h?"Time Running Low":"Quiz Timer",color:w(h),size:"small",variant:"normal"===h?"outlined":"filled"})]}),(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(bS,{variant:"determinate",value:y,color:w(h),sx:{height:8,borderRadius:4,backgroundColor:e=>"light"===e.palette.mode?e.palette.grey[200]:e.palette.grey[800]}}),(0,Tt.jsxs)(Vm,{direction:"row",justifyContent:"space-between",sx:{mt:1},children:[(0,Tt.jsxs)(kp,{variant:"caption",color:"text.secondary",children:[b(g-u)," elapsed"]}),(0,Tt.jsxs)(kp,{variant:"caption",color:"text.secondary",children:[b(u)," remaining"]})]})]}),"expired"===h&&(0,Tt.jsx)(uE,{severity:"error",variant:"filled",children:"Time is up! Please submit your quiz immediately."}),"danger"===h&&(0,Tt.jsxs)(uE,{severity:"error",children:["Only ",Math.ceil(u/60)," minutes remaining!"]}),"warning"===h&&(0,Tt.jsxs)(uE,{severity:"warning",children:[Math.ceil(u/60)," minutes left. Consider reviewing your answers."]})]})}):null},kC=CA(oA)((e=>{let{theme:t}=e;return{background:"linear-gradient(135deg, #4f8cff 0%, #6fd6ff 100%)",color:"white",padding:t.spacing(4,0),position:"relative",overflow:"hidden"}})),PC=(CA(fp)((e=>{let{theme:t}=e;return{maxWidth:400,borderRadius:t.spacing(2),overflow:"hidden",boxShadow:t.shadows[8]}})),CA(T_)((e=>{let{theme:t}=e;return{marginBottom:t.spacing(1),"&:before":{display:"none"},"&.Mui-expanded":{margin:"".concat(t.spacing(1)," 0")}}}))),BC=CA(k_)((e=>{let{theme:t}=e;return{borderRadius:t.spacing(1),margin:t.spacing(.5,0),"&:hover":{backgroundColor:t.palette.action.hover},"&.Mui-selected":{backgroundColor:t.palette.primary.light,color:t.palette.primary.contrastText,"&:hover":{backgroundColor:t.palette.primary.main}}}})),LC=(CA(fp)((e=>{let{theme:t}=e;return{marginBottom:t.spacing(2),borderLeft:"4px solid ".concat(t.palette.secondary.main)}})),()=>{var e;const{courseId:n}=pe(),r=he(),[i,o]=(0,t.useState)({}),[a,s]=(0,t.useState)([]),[c,d]=(0,t.useState)(null),[u,A]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)({}),[g,v]=(0,t.useState)({}),[y,b]=(0,t.useState)(!1),[E,w]=(0,t.useState)(!1),[_,S]=(0,t.useState)(0),[C,T]=(0,t.useState)(!0),[I,R]=(0,t.useState)(!1),[x,N]=(0,t.useState)(null),[O,k]=(0,t.useState)(new Set),[P,B]=(0,t.useState)([]),[L,D]=(0,t.useState)(""),[U,M]=(0,t.useState)(null),[F,j]=(0,t.useState)({isEnrolled:!1,isCompleted:!1,progress:0}),[Q,V]=(0,t.useState)(!1),[H,z]=(0,t.useState)(!1),[K,G]=(0,t.useState)(null),[W,q]=(0,t.useState)(!1),[Y,X]=(0,t.useState)([]),[J,Z]=(0,t.useState)({}),[$,ee]=(0,t.useState)(0),[te,ne]=(0,t.useState)(!1),[re,ie]=(0,t.useState)(!1),[oe,ae]=(0,t.useState)(null),[se,ce]=(0,t.useState)(!1),[le,de]=(0,t.useState)(!1);(0,t.useEffect)((()=>{n&&(ue(),Ae())}),[n]),(0,t.useEffect)((()=>{y&&i&&me()}),[y,i]),(0,t.useEffect)((()=>{let e;return te&&$>0&&!re?e=setTimeout((()=>{ee((e=>e-1))}),1e3):0===$&&te&&!re&&Ee(),()=>clearTimeout(e)}),[te,$,re]);const ue=async()=>{try{T(!0),N("");const r=await HE.getPublicCourseById(n);if(null!==r&&void 0!==r&&r.success&&r.data){const i=r.data;var e=await HE.getChaptersByCourse(n);if(i.chapters=e,o(i),i.chapters&&i.chapters.length>0){const e=i.chapters[0];var t=await HE.getLessonsByChapter(e.id);e.lessons=t,k(new Set([e.id])),d(e),e.lessons&&e.lessons.length>0&&A(e.lessons[0])}const a=(e=>{if(!e||0===e.length)return 0;let t=0,n=0;return e.forEach((e=>{e.lessons&&(t+=e.lessons.length,n+=e.lessons.filter((e=>e.isCompleted)).length)})),t>0?Math.round(n/t*100):0})(i.chapters||[]);S(a)}else N((null===r||void 0===r?void 0:r.message)||"Course not found")}catch(rI){console.error("Error loading course details:",rI),N("Failed to load course details. Please try again later.")}finally{T(!1)}},Ae=async()=>{try{if(!n)return b(!1),void j({isEnrolled:!1,isCompleted:!1,progress:0});try{const e=!0===(await HE.isEnrolled(n)).data.isEnrolled;b(e),e?await fe():j({isEnrolled:!1,isCompleted:!1,progress:0})}catch(t){var e;null!==(e=t.message)&&void 0!==e&&e.includes("404")?(b(!1),j({isEnrolled:!1,isCompleted:!1,progress:0})):(console.error("Error checking enrollment status:",t),b(!1),j({isEnrolled:!1,isCompleted:!1,progress:0}))}}catch(rI){console.error("Error checking enrollment status:",rI),b(!1),j({isEnrolled:!1,isCompleted:!1,progress:0})}},fe=async()=>{try{const r=await HE.getCourseProgress(n);if(null!==r&&void 0!==r&&r.success&&r.data){const t=r.data;let n=0,o=!1;if(void 0!==t.completionPercentage)n=t.completionPercentage,o=n>=100;else if(void 0!==t.progress)n=t.progress,o=n>=100;else{var e;const t=(null===(e=i.chapters)||void 0===e?void 0:e.reduce(((e,t)=>{var n;return e+((null===(n=t.lessons)||void 0===n?void 0:n.length)||0)}),0))||0,r=Object.values(f).filter(Boolean).length;n=t>0?r/t*100:0,o=n>=100}S(n),w(o),j({isEnrolled:!0,isCompleted:o,progress:n,fallback:r.fallback||!1}),r.fallback&&(V(!0),z(!0))}else if(null!==r&&void 0!==r&&r.fallback){console.log("Using enrollment fallback for course completion check");const e=r.data||{};S(e.completionPercentage||0),w(e.isCompleted||!1),j({isEnrolled:!0,isCompleted:e.isCompleted||!1,progress:e.completionPercentage||0,status:e.status||"Enrolled",fallback:!0}),V(!0),z(!0)}else try{const e=await HE.getEnrollmentStatus(n);if(null!==e&&void 0!==e&&e.success&&e.data){const{isEnrolled:t,status:n}=e.data,r="Completed"===n,i=r?100:"InProgress"===n?25:0;j({isEnrolled:t,isCompleted:r,progress:i,status:n,fallback:!0}),S(i),w(r),V(!0),z(!0)}else j({isEnrolled:!0,isCompleted:!1,progress:0,fallback:!0}),V(!0),z(!0)}catch(t){console.warn("Enrollment status check also failed:",t),j({isEnrolled:!0,isCompleted:!1,progress:0,fallback:!0}),V(!0),z(!0)}}catch(rI){console.error("Error checking course completion:",rI);try{const e=await HE.getEnrollmentStatus(n);if(null!==e&&void 0!==e&&e.success&&e.data){const{isEnrolled:t,status:n}=e.data,r="Completed"===n,i=r?100:"InProgress"===n?25:0;j({isEnrolled:t,isCompleted:r,progress:i,status:n,fallback:!0}),S(i),w(r)}else j({isEnrolled:!0,isCompleted:!1,progress:0,fallback:!0}),V(!0),z(!0)}catch(r){console.warn("All fallbacks failed:",r),j({isEnrolled:!0,isCompleted:!1,progress:0,fallback:!0}),V(!0),z(!0)}}},me=async()=>{try{const e=await HE.getCourseProgress(n);if(null!==e&&void 0!==e&&e.success&&e.data){const t=e.data,n={};Array.isArray(t)&&t.forEach((e=>{e.lessonId&&(n[e.lessonId]=e.isCompleted),e.quizId&&v((t=>l(l({},t),{},{[e.quizId]:e.isCompleted})))})),m(n),y&&await fe()}else null!==e&&void 0!==e&&e.fallback?(console.log("Using enrollment fallback for lesson progress"),m({}),v({}),y&&await fe()):(console.log("No progress data available, using defaults"),m({}),v({}),y&&await fe())}catch(rI){console.error("Error loading course progress:",rI),m({}),v({}),y&&await fe()}},ge=async()=>{try{if(R(!0),N(null),y)await HE.dropFromCourse(n),b(!1),j({isEnrolled:!1,isCompleted:!1,progress:0});else try{await HE.enrollInCourse(n),b(!0),await fe()}catch(t){var e;if(null===(e=t.message)||void 0===e||!e.includes("already enrolled"))throw t;b(!0),await fe()}}catch(rI){console.error("Error with enrollment:",rI),rI.message&&rI.message.includes("401")?(localStorage.removeItem("accessToken"),r("/login",{state:{returnUrl:"/education/courses/".concat(n)}})):N("Failed to update enrollment. Please try again.")}finally{R(!1)}},ve=async e=>{try{await HE.createOrUpdateProgress({courseId:n,lessonId:e,percent:100,isCompleted:!0}),m((t=>l(l({},t),{},{[e]:!0}))),me()}catch(rI){console.error("Error updating progress:",rI)}},ye=()=>{Ee(),ce(!1)},be=e=>{console.log("Quiz warning: ".concat(Math.ceil(e/60)," minutes remaining"))},Ee=async()=>{try{de(!0),ce(!1);const e={quizId:h.quizId,answers:Object.entries(J).map((e=>{let[t,n]=e;return{questionId:t,selectedAnswerId:n}}))},t=await HE.submitQuizAnswers(e);null!==t&&void 0!==t&&t.success?(ae(t.data),t.data.passed&&(v((e=>l(l({},e),{},{[h.quizId]:!0}))),y&&await fe())):N("Failed to submit quiz. Please try again.")}catch(rI){console.error("Error submitting quiz:",rI),N("Failed to submit quiz. Please try again.")}finally{de(!1)}},we=()=>{if(null===i||void 0===i||!i.chapters||!c||!u)return null;const e=i.chapters.findIndex((e=>e.id===c.id)),t=c.lessons.findIndex((e=>e.id===u.id));if(t<c.lessons.length-1)return{chapter:c,lesson:c.lessons[t+1]};if(e<i.chapters.length-1){const t=i.chapters[e+1];if(t.lessons&&t.lessons.length>0)return{chapter:t,lesson:t.lessons[0]}}return null},_e=()=>{if(null===i||void 0===i||!i.chapters||!c||!u)return null;const e=i.chapters.findIndex((e=>e.id===c.id)),t=c.lessons.findIndex((e=>e.id===u.id));if(t>0)return{chapter:c,lesson:c.lessons[t-1]};if(e>0){const t=i.chapters[e-1];if(t.lessons&&t.lessons.length>0)return{chapter:t,lesson:t.lessons[t.lessons.length-1]}}return null},Se=e=>{const t="next"===e?we():_e();var n,r;t&&(n=t.chapter,r=t.lesson,d(n),A(r),p(null),y&&ve(r.id),O.has(t.chapter.id)||k((e=>new Set([...e,t.chapter.id]))))},Ce=e=>!0===f[e];return C?(0,Tt.jsx)(oA,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:(0,Tt.jsx)(Ph,{size:60})}):x&&!i?(0,Tt.jsxs)(Bg,{maxWidth:"lg",sx:{py:4},children:[(0,Tt.jsx)(uE,{severity:"error",sx:{mb:3},children:x}),(0,Tt.jsx)(Gh,{onClick:()=>r("/education"),startIcon:(0,Tt.jsx)(vC,{}),children:"Back to Education Hub"})]}):i?(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(v_,{in:H&&Q,children:(0,Tt.jsx)(Bg,{maxWidth:"lg",sx:{pt:2},children:(0,Tt.jsx)(uE,{severity:"info",sx:{mb:2},onClose:()=>z(!1),children:(0,Tt.jsxs)(kp,{variant:"body2",children:[(0,Tt.jsx)("strong",{children:"Th\xf4ng b\xe1o:"})," D\u1eef li\u1ec7u ti\u1ebfn tr\xecnh t\u1ea1m th\u1eddi kh\xf4ng kh\u1ea3 d\u1ee5ng. Ch\xfang t\xf4i \u0111ang hi\u1ec3n th\u1ecb th\xf4ng tin t\u1eeb tr\u1ea1ng th\xe1i \u0111\u0103ng k\xfd kh\xf3a h\u1ecdc c\u1ee7a b\u1ea1n. Ti\u1ebfn tr\xecnh chi ti\u1ebft c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt sau."]})})})}),(0,Tt.jsx)(kC,{children:(0,Tt.jsx)(Bg,{maxWidth:"lg",children:(0,Tt.jsxs)(pm,{container:!0,spacing:3,alignItems:"center",children:[(0,Tt.jsxs)(pm,{size:{xs:12,md:8},children:[(0,Tt.jsxs)(K_,{separator:(0,Tt.jsx)(yC,{}),sx:{mb:2,color:"rgba(255,255,255,0.8)"},children:[(0,Tt.jsx)($_,{color:"inherit",onClick:()=>r("/"),sx:{cursor:"pointer"},children:"Home"}),(0,Tt.jsx)($_,{color:"inherit",onClick:()=>r("/education"),sx:{cursor:"pointer"},children:"Education Hub"}),(0,Tt.jsx)(kp,{color:"white",children:i.title})]}),(0,Tt.jsx)(kp,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600,color:"white"},children:i.title}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:2,flexWrap:"wrap",sx:{mb:2},children:[(0,Tt.jsx)(Nm,{icon:(0,Tt.jsx)(PE,{}),label:ZE(i.courseType),color:"primary",variant:"filled"}),(0,Tt.jsx)(Nm,{icon:(0,Tt.jsx)(DE,{}),label:$E(i.ageGroup),color:"secondary",variant:"filled"})]})]}),(0,Tt.jsx)(pm,{size:{xs:12,md:4},children:!y&&(0,Tt.jsx)(Gh,{variant:"contained",size:"large",onClick:ge,disabled:I,startIcon:I?(0,Tt.jsx)(Ph,{size:20}):(0,Tt.jsx)(bC,{}),sx:{backgroundColor:"white",color:"primary.main",fontWeight:600,px:4,py:1.5,"&:hover":{backgroundColor:"grey.100"}},children:"Enroll Now"})})]})})}),x&&(0,Tt.jsx)(Bg,{maxWidth:"lg",sx:{pt:2},children:(0,Tt.jsx)(uE,{severity:"error",onClose:()=>N(""),children:x})}),y&&(0,Tt.jsx)(Bg,{maxWidth:"lg",sx:{py:3},children:(0,Tt.jsxs)(pm,{container:!0,spacing:3,children:[(0,Tt.jsxs)(pm,{size:{xs:12,lg:8},children:[u&&(0,Tt.jsx)(fp,{sx:{mb:3},children:(0,Tt.jsxs)(Bm,{sx:{p:0},children:[(0,Tt.jsx)(oA,{sx:{p:3,borderBottom:1,borderColor:"divider"},children:(0,Tt.jsxs)(Vm,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600},children:u.title}),(0,Tt.jsxs)(kp,{variant:"body2",color:"text.secondary",children:["Chapter ",null===c||void 0===c?void 0:c.chapterOrder,":"," ",null===c||void 0===c?void 0:c.title]})]}),(0,Tt.jsx)(oA,{children:Ce(u.id)&&(0,Tt.jsx)(EC,{color:"success",sx:{fontSize:32}})})]})}),(0,Tt.jsxs)(oA,{sx:{p:3},children:[u.videoUrl&&(0,Tt.jsx)(oA,{sx:{mb:3,borderRadius:2,overflow:"hidden"},children:(0,Tt.jsxs)("video",{width:"100%",height:"400",controls:!0,poster:i.imageUrl,children:[(0,Tt.jsx)("source",{src:u.videoUrl,type:"video/mp4"}),"Your browser does not support the video tag."]})}),(0,Tt.jsx)(kp,{variant:"body1",sx:{lineHeight:1.8,mb:3},children:u.content||u.description}),(0,Tt.jsx)(Vm,{direction:"row",justifyContent:"space-between",sx:{mt:4},children:(0,Tt.jsx)(Gh,{variant:"outlined",startIcon:(0,Tt.jsx)(wC,{}),onClick:()=>Se("previous"),disabled:!_e(),children:"Previous"})})]})]})}),!u&&!h&&(0,Tt.jsxs)(fp,{sx:{p:4,textAlign:"center"},children:[(0,Tt.jsx)(PE,{sx:{fontSize:64,color:"grey.400",mb:2}}),(0,Tt.jsxs)(kp,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:["Welcome to ",i.title]}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:3},children:F.isCompleted?"Congratulations! You have completed this course.":y?"Select a lesson from the course content to continue learning":"Select a lesson from the course content to start learning"}),y&&(0,Tt.jsxs)(oA,{sx:{mb:3},children:[(0,Tt.jsxs)(kp,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Course Progress:"," ",Math.round(F.progress),"%"]}),(0,Tt.jsx)(bS,{variant:"determinate",value:F.progress,sx:{height:8,borderRadius:4}})]}),y?F.isCompleted?(0,Tt.jsx)(Gh,{variant:"contained",color:"success",disabled:!0,startIcon:(0,Tt.jsx)(EC,{}),children:"\u0110\xe3 ho\xe0n th\xe0nh"}):(0,Tt.jsx)(Gh,{variant:"contained",color:"primary",onClick:()=>{var e,t;const n=null===(e=i.chapters)||void 0===e?void 0:e[0],r=null===n||void 0===n||null===(t=n.lessons)||void 0===t?void 0:t[0];r&&(A(r),p(null))},startIcon:(0,Tt.jsx)(bC,{}),children:"Ti\u1ebfp t\u1ee5c h\u1ecdc"}):(0,Tt.jsx)(Gh,{variant:"contained",onClick:ge,disabled:I,startIcon:(0,Tt.jsx)(bC,{}),children:I?"Enrolling...":"Enroll to Start Learning"})]})]}),y&&(0,Tt.jsx)(pm,{size:{xs:12,lg:4},children:(0,Tt.jsxs)(up,{sx:{p:3},children:[(0,Tt.jsx)(kp,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Course Content"}),null===(e=i.chapters)||void 0===e?void 0:e.map((e=>{var t,n,i,o;return(0,Tt.jsxs)(PC,{expanded:O.has(e.id),onChange:()=>(e=>{const t=new Set(O);t.has(e)?t.delete(e):t.add(e),k(t)})(e.id),children:[(0,Tt.jsx)(RS,{expandIcon:(0,Tt.jsx)(_C,{}),children:(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",spacing:1,sx:{width:"100%"},children:[(0,Tt.jsx)(BE,{color:"primary"}),(0,Tt.jsxs)(oA,{sx:{flexGrow:1},children:[(0,Tt.jsxs)(kp,{variant:"subtitle1",sx:{fontWeight:600},children:["Chapter ",e.chapterOrder,":"," ",e.title]}),(0,Tt.jsxs)(kp,{variant:"caption",color:"text.secondary",children:[(null===(t=e.lessons)||void 0===t?void 0:t.length)||0," lessons",(null===(n=e.quizzes)||void 0===n?void 0:n.length)>0&&" \u2022 ".concat(e.quizzes.length," quiz(es)")]})]})]})}),(0,Tt.jsx)(kS,{sx:{p:0},children:(0,Tt.jsxs)(iy,{children:[null===(i=e.lessons)||void 0===i?void 0:i.map((e=>(0,Tt.jsxs)(BC,{selected:(null===u||void 0===u?void 0:u.id)===e.id,onClick:()=>r("/lesson/".concat(e.id)),disabled:!y,children:[(0,Tt.jsx)(US,{children:Ce(e.id)?(0,Tt.jsx)(EC,{color:"success"}):(0,Tt.jsx)(SC,{color:"action"})}),(0,Tt.jsx)(VS,{primary:(0,Tt.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[e.title,Ce(e.id)&&(0,Tt.jsx)(EC,{color:"success",fontSize:"small",style:{marginLeft:6}})]}),secondary:(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,alignItems:"center",children:[(0,Tt.jsx)(FE,{fontSize:"small"}),(0,Tt.jsx)(kp,{variant:"caption",children:ew(e.estimatedDuration||10)})]})})]},e.id))),null===(o=e.quizzes)||void 0===o?void 0:o.map((e=>(0,Tt.jsxs)(BC,{onClick:()=>r("/quiz/".concat(e.quizId)),disabled:!y,children:[(0,Tt.jsx)(US,{children:(0,Tt.jsx)(CC,{color:"secondary"})}),(0,Tt.jsx)(VS,{primary:e.title,secondary:(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,alignItems:"center",children:[(0,Tt.jsx)(TC,{fontSize:"small"}),(0,Tt.jsxs)(kp,{variant:"caption",children:[e.timeLimitMinutes," minutes \u2022 ",e.passingScore,"% to pass"]})]})})]},e.quizId)))]})})]},e.id)}))]})})]})}),(0,Tt.jsxs)(ZS,{open:W,onClose:()=>{te||(q(!1),ce(!1))},maxWidth:"md",fullWidth:!0,disableEscapeKeyDown:te,children:[(0,Tt.jsx)(rC,{children:(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,Tt.jsx)(kp,{variant:"h6",children:null===h||void 0===h?void 0:h.title}),te&&(null===h||void 0===h?void 0:h.timeLimitMinutes)&&(0,Tt.jsx)(OC,{totalTimeMinutes:h.timeLimitMinutes,onTimeUp:ye,onWarning:be,isActive:se,isPaused:le,showCircular:!0,size:"small"})]})}),(0,Tt.jsx)(sC,{children:te?re&&oe?(0,Tt.jsxs)(oA,{sx:{textAlign:"center",py:3},children:[(0,Tt.jsx)(kp,{variant:"h5",gutterBottom:!0,children:"Quiz Completed!"}),(0,Tt.jsxs)(kp,{variant:"h6",sx:{mb:2},children:["Your Score: ",oe.score,"%"]}),(0,Tt.jsx)(kp,{variant:"body1",color:oe.passed?"success.main":"error.main",sx:{mb:3},children:oe.passed?"Congratulations! You passed!":"You need to retake this quiz."})]}):(0,Tt.jsxs)(oA,{children:[(null===h||void 0===h?void 0:h.timeLimitMinutes)&&(0,Tt.jsx)(oA,{sx:{mb:3},children:(0,Tt.jsx)(OC,{totalTimeMinutes:h.timeLimitMinutes,onTimeUp:ye,onWarning:be,isActive:se,isPaused:le,warningThreshold:5,dangerThreshold:2})}),Y.map(((e,t)=>{var n;return(0,Tt.jsx)(fp,{sx:{mb:2},children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsxs)(kp,{variant:"h6",gutterBottom:!0,children:["Question ",t+1]}),(0,Tt.jsx)(kp,{variant:"body1",sx:{mb:2},children:e.content}),(0,Tt.jsx)(Gv,{component:"fieldset",children:(0,Tt.jsx)(Rw,{value:J[e.questionId]||"",onChange:t=>{return n=e.questionId,r=t.target.value,void Z((e=>l(l({},e),{},{[n]:r})));var n,r},children:null===(n=e.answers)||void 0===n?void 0:n.map((e=>(0,Tt.jsx)(Lw,{value:e.answerId,control:(0,Tt.jsx)(n_,{}),label:e.answerText},e.answerId)))})})]})},e.questionId)}))]}):(0,Tt.jsxs)(oA,{sx:{textAlign:"center",py:3},children:[(0,Tt.jsx)(kp,{variant:"h6",gutterBottom:!0,children:"Ready to Start Quiz?"}),(0,Tt.jsx)(kp,{variant:"body1",sx:{mb:3},children:null===h||void 0===h?void 0:h.description}),(0,Tt.jsx)(Vm,{spacing:2,sx:{mb:3},children:(0,Tt.jsxs)(Vm,{direction:"row",justifyContent:"center",spacing:4,children:[(0,Tt.jsxs)(oA,{textAlign:"center",children:[(0,Tt.jsx)(kp,{variant:"h6",color:"primary",children:Y.length}),(0,Tt.jsx)(kp,{variant:"caption",children:"Questions"})]}),(null===h||void 0===h?void 0:h.timeLimitMinutes)&&(0,Tt.jsxs)(oA,{textAlign:"center",children:[(0,Tt.jsx)(kp,{variant:"h6",color:"primary",children:h.timeLimitMinutes}),(0,Tt.jsx)(kp,{variant:"caption",children:"Minutes"})]}),(0,Tt.jsxs)(oA,{textAlign:"center",children:[(0,Tt.jsxs)(kp,{variant:"h6",color:"primary",children:[(null===h||void 0===h?void 0:h.passingScore)||70,"%"]}),(0,Tt.jsx)(kp,{variant:"caption",children:"Passing Score"})]})]})}),(0,Tt.jsx)(uE,{severity:"info",sx:{mb:3},children:"Once you start the quiz, you cannot pause or restart it. Make sure you have enough time to complete it."})]})}),(0,Tt.jsx)(uC,{children:te?re?(0,Tt.jsx)(Gh,{onClick:()=>{q(!1),ae(null),ie(!1),ne(!1),ce(!1)},children:"Close"}):(0,Tt.jsx)(Gh,{variant:"contained",onClick:Ee,disabled:le||Object.keys(J).length!==Y.length,startIcon:le?(0,Tt.jsx)(Ph,{size:16}):null,children:le?"Submitting...":"Submit Quiz"}):(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(Gh,{onClick:()=>{q(!1),ce(!1)},children:"Cancel"}),(0,Tt.jsx)(Gh,{variant:"contained",onClick:()=>{ne(!0),ce(!0),null!==h&&void 0!==h&&h.timeLimitMinutes&&ee(60*h.timeLimitMinutes)},startIcon:(0,Tt.jsx)(bC,{}),children:"Start Quiz"})]})})]}),u&&we()&&(0,Tt.jsx)(gC,{color:"primary",sx:{position:"fixed",bottom:24,right:24},onClick:()=>Se("next"),children:(0,Tt.jsx)(yC,{})})]}):(0,Tt.jsx)(Bg,{maxWidth:"lg",sx:{py:4},children:(0,Tt.jsx)(uE,{severity:"warning",children:"Course not found"})})});function DC(e){return eA("MuiListItem",e)}tA("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function UC(e){return eA("MuiListItemSecondaryAction",e)}tA("MuiListItemSecondaryAction",["root","disableGutters"]);const MC=["className"],FC=CA("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:e=>{let{ownerState:t}=e;return t.disableGutters},style:{right:0}}]}),jC=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiListItemSecondaryAction"}),{className:i}=r,o=a(r,MC),s=t.useContext(ey),c=l(l({},r),{},{disableGutters:s.disableGutters}),d=(e=>{const{disableGutters:t,classes:n}=e;return aA({root:["root",t&&"disableGutters"]},UC,n)})(c);return(0,Tt.jsx)(FC,l({className:Mu(d.root,i),ownerState:c,ref:n},o))}));jC.muiName="ListItemSecondaryAction";const QC=jC,VC=["className"],HC=["alignItems","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disableGutters","disablePadding","divider","secondaryAction","slotProps","slots"],zC=CA("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.hasSecondaryAction&&t.secondaryAction]}})(IA((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&t.dense},style:{paddingTop:4,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&!!t.secondaryAction},style:{paddingRight:48}},{props:e=>{let{ownerState:t}=e;return!!t.secondaryAction},style:{["& > .".concat(R_.root)]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return t.button},style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:e=>{let{ownerState:t}=e;return t.hasSecondaryAction},style:{paddingRight:48}}]}}))),KC=CA("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),GC=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiListItem"}),{alignItems:i="center",children:o,className:s,component:c,components:d={},componentsProps:u={},ContainerComponent:A="li",ContainerProps:{className:h}={},dense:p=!1,disableGutters:f=!1,disablePadding:m=!1,divider:g=!1,secondaryAction:v,slotProps:y={},slots:b={}}=r,E=a(r.ContainerProps,VC),w=a(r,HC),_=t.useContext(ey),S=t.useMemo((()=>({dense:p||_.dense||!1,alignItems:i,disableGutters:f})),[i,_.dense,p,f]),C=t.useRef(null),T=t.Children.toArray(o),I=T.length&&Qv(T[T.length-1],["ListItemSecondaryAction"]),R=l(l({},r),{},{alignItems:i,dense:S.dense,disableGutters:f,disablePadding:m,divider:g,hasSecondaryAction:I}),x=(e=>{const{alignItems:t,classes:n,dense:r,disableGutters:i,disablePadding:o,divider:a,hasSecondaryAction:s}=e;return aA({root:["root",r&&"dense",!i&&"gutters",!o&&"padding",a&&"divider","flex-start"===t&&"alignItemsFlexStart",s&&"secondaryAction"],container:["container"]},DC,n)})(R),N=NA(C,n),O=b.root||d.Root||zC,k=y.root||u.root||{},P=l({className:Mu(x.root,k.className,s)},w);let B=c||"li";return I?(B=P.component||c?B:"div","li"===A&&("li"===B?B="div":"li"===P.component&&(P.component="div")),(0,Tt.jsx)(ey.Provider,{value:S,children:(0,Tt.jsxs)(KC,l(l({as:A,className:Mu(x.container,h),ref:N,ownerState:R},E),{},{children:[(0,Tt.jsx)(O,l(l(l(l({},k),!Qg(O)&&{as:B,ownerState:l(l({},R),k.ownerState)}),P),{},{children:T})),T.pop()]}))})):(0,Tt.jsx)(ey.Provider,{value:S,children:(0,Tt.jsxs)(O,l(l(l(l({},k),{},{as:B,ref:N},!Qg(O)&&{ownerState:l(l({},R),k.ownerState)}),P),{},{children:[T,v&&(0,Tt.jsx)(QC,{children:v})]}))})}));function WC(e){return eA("MuiTab",e)}const qC=tA("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),YC=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],XC=CA(fh,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t["textColor".concat(mh(n.textColor))],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{["& .".concat(qC.iconWrapper)]:t.iconWrapper},{["& .".concat(qC.icon)]:t.icon}]}})(IA((e=>{let{theme:t}=e;return l(l({},t.typography.button),{},{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:e=>{let{ownerState:t}=e;return t.label&&("top"===t.iconPosition||"bottom"===t.iconPosition)},style:{flexDirection:"column"}},{props:e=>{let{ownerState:t}=e;return t.label&&"top"!==t.iconPosition&&"bottom"!==t.iconPosition},style:{flexDirection:"row"}},{props:e=>{let{ownerState:t}=e;return t.icon&&t.label},style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:e=>{let{ownerState:t,iconPosition:n}=e;return t.icon&&t.label&&"top"===n},style:{["& > .".concat(qC.icon)]:{marginBottom:6}}},{props:e=>{let{ownerState:t,iconPosition:n}=e;return t.icon&&t.label&&"bottom"===n},style:{["& > .".concat(qC.icon)]:{marginTop:6}}},{props:e=>{let{ownerState:t,iconPosition:n}=e;return t.icon&&t.label&&"start"===n},style:{["& > .".concat(qC.icon)]:{marginRight:t.spacing(1)}}},{props:e=>{let{ownerState:t,iconPosition:n}=e;return t.icon&&t.label&&"end"===n},style:{["& > .".concat(qC.icon)]:{marginLeft:t.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,["&.".concat(qC.selected)]:{opacity:1},["&.".concat(qC.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(t.vars||t).palette.text.secondary,["&.".concat(qC.selected)]:{color:(t.vars||t).palette.primary.main},["&.".concat(qC.disabled)]:{color:(t.vars||t).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(t.vars||t).palette.text.secondary,["&.".concat(qC.selected)]:{color:(t.vars||t).palette.secondary.main},["&.".concat(qC.disabled)]:{color:(t.vars||t).palette.text.disabled}}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:e=>{let{ownerState:t}=e;return t.wrapped},style:{fontSize:t.typography.pxToRem(12)}}]})}))),JC=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiTab"}),{className:i,disabled:o=!1,disableFocusRipple:s=!1,fullWidth:c,icon:d,iconPosition:u="top",indicator:A,label:h,onChange:p,onClick:f,onFocus:m,selected:g,selectionFollowsFocus:v,textColor:y="inherit",value:b,wrapped:E=!1}=r,w=a(r,YC),_=l(l({},r),{},{disabled:o,disableFocusRipple:s,selected:g,icon:!!d,iconPosition:u,label:!!h,fullWidth:c,textColor:y,wrapped:E}),S=(e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:i,icon:o,label:a,selected:s,disabled:c}=e;return aA({root:["root",o&&a&&"labelIcon","textColor".concat(mh(n)),r&&"fullWidth",i&&"wrapped",s&&"selected",c&&"disabled"],icon:["iconWrapper","icon"]},WC,t)})(_),C=d&&h&&t.isValidElement(d)?t.cloneElement(d,{className:Mu(S.icon,d.props.className)}):d;return(0,Tt.jsxs)(XC,l(l({focusRipple:!s,className:Mu(S.root,i),ref:n,role:"tab","aria-selected":g,disabled:o,onClick:e=>{!g&&p&&p(e,b),f&&f(e)},onFocus:e=>{v&&!g&&p&&p(e,b),m&&m(e)},ownerState:_,tabIndex:g?0:-1},w),{},{children:["top"===u||"start"===u?(0,Tt.jsxs)(t.Fragment,{children:[C,h]}):(0,Tt.jsxs)(t.Fragment,{children:[h,C]}),A]}))})),ZC=JC,$C=e=>{const n=t.useRef({});return t.useEffect((()=>{n.current=e})),n.current};const eT=function(e){const{badgeContent:t,invisible:n=!1,max:r=99,showZero:i=!1}=e,o=$C({badgeContent:t,max:r});let a=n;!1!==n||0!==t||i||(a=!0);const{badgeContent:s,max:c=r}=a?o:e;return{badgeContent:s,invisible:a,max:c,displayValue:s&&Number(s)>c?"".concat(c,"+"):s}};function tT(e){return eA("MuiBadge",e)}const nT=tA("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),rT=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],iT=CA("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),oT=CA("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t["anchorOrigin".concat(mh(n.anchorOrigin.vertical)).concat(mh(n.anchorOrigin.horizontal)).concat(mh(n.overlap))],"default"!==n.color&&t["color".concat(mh(n.color))],n.invisible&&t.invisible]}})(IA((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.entries(t.palette).filter(gh(["contrastText"])).map((e=>{let[n]=e;return{props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText}}})),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",["&.".concat(nT.invisible)]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",["&.".concat(nT.invisible)]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",["&.".concat(nT.invisible)]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",["&.".concat(nT.invisible)]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",["&.".concat(nT.invisible)]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",["&.".concat(nT.invisible)]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",["&.".concat(nT.invisible)]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",["&.".concat(nT.invisible)]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}})));function aT(e){var t,n;return{vertical:null!==(t=null===e||void 0===e?void 0:e.vertical)&&void 0!==t?t:"top",horizontal:null!==(n=null===e||void 0===e?void 0:e.horizontal)&&void 0!==n?n:"right"}}const sT=t.forwardRef((function(e,t){var n,r,i,o;const s=xa({props:e,name:"MuiBadge"}),{anchorOrigin:c,className:d,classes:u,component:A,components:h={},componentsProps:p={},children:f,overlap:m="rectangular",color:g="default",invisible:v=!1,max:y=99,badgeContent:b,slots:E,slotProps:w,showZero:_=!1,variant:S="standard"}=s,C=a(s,rT),{badgeContent:T,invisible:I,max:R,displayValue:x}=eT({max:y,invisible:v,badgeContent:b,showZero:_}),N=$C({anchorOrigin:aT(c),color:g,overlap:m,variant:S,badgeContent:b}),O=I||null==T&&"dot"!==S,{color:k=g,overlap:P=m,anchorOrigin:B,variant:L=S}=O?N:s,D=aT(B),U="dot"!==L?x:void 0,M=l(l({},s),{},{badgeContent:T,invisible:O,max:R,displayValue:U,showZero:_,anchorOrigin:D,color:k,overlap:P,variant:L}),F=(e=>{const{color:t,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:a={}}=e;return aA({root:["root"],badge:["badge",o,r&&"invisible","anchorOrigin".concat(mh(n.vertical)).concat(mh(n.horizontal)),"anchorOrigin".concat(mh(n.vertical)).concat(mh(n.horizontal)).concat(mh(i)),"overlap".concat(mh(i)),"default"!==t&&"color".concat(mh(t))]},tT,a)})(M),j={slots:{root:null!==(n=null===E||void 0===E?void 0:E.root)&&void 0!==n?n:h.Root,badge:null!==(r=null===E||void 0===E?void 0:E.badge)&&void 0!==r?r:h.Badge},slotProps:{root:null!==(i=null===w||void 0===w?void 0:w.root)&&void 0!==i?i:p.root,badge:null!==(o=null===w||void 0===w?void 0:w.badge)&&void 0!==o?o:p.badge}},[Q,V]=uf("root",{elementType:iT,externalForwardedProps:l(l({},j),C),ownerState:M,className:Mu(F.root,d),ref:t,additionalProps:{as:A}}),[H,z]=uf("badge",{elementType:oT,externalForwardedProps:j,ownerState:M,className:F.badge});return(0,Tt.jsxs)(Q,l(l({},V),{},{children:[f,(0,Tt.jsx)(H,l(l({},z),{},{children:U}))]}))})),cT=sT,lT=Zh((0,Tt.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"})),dT=Zh((0,Tt.jsx)("path",{d:"M9.68 13.69 12 11.93l2.31 1.76-.88-2.85L15.75 9h-2.84L12 6.19 11.09 9H8.25l2.31 1.84zM20 10c0-4.42-3.58-8-8-8s-8 3.58-8 8c0 2.03.76 3.87 2 5.28V23l6-2 6 2v-7.72c1.24-1.41 2-3.25 2-5.28m-8-6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6"})),uT=Zh((0,Tt.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}));function AT(e){return eA("MuiDivider",e)}const hT=tA("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),pT=["absolute","children","className","orientation","component","flexItem","light","role","textAlign","variant"],fT=CA("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})(IA((e=>{let{theme:t}=e;return{margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):qi(t.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:e=>{let{ownerState:t}=e;return!!t.children},style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:e=>{let{ownerState:t}=e;return t.children&&"vertical"!==t.orientation},style:{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),borderTopStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"vertical"===t.orientation&&t.children},style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider),borderLeftStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"right"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:e=>{let{ownerState:t}=e;return"left"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}}))),mT=CA("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})(IA((e=>{let{theme:t}=e;return{display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)"),whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")}}]}}))),gT=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiDivider"}),{absolute:r=!1,children:i,className:o,orientation:s="horizontal",component:c=(i||"vertical"===s?"div":"hr"),flexItem:d=!1,light:u=!1,role:A=("hr"!==c?"separator":void 0),textAlign:h="center",variant:p="fullWidth"}=n,f=a(n,pT),m=l(l({},n),{},{absolute:r,component:c,flexItem:d,light:u,orientation:s,role:A,textAlign:h,variant:p}),g=(e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:o,orientation:a,textAlign:s,variant:c}=e;return aA({root:["root",t&&"absolute",c,o&&"light","vertical"===a&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===a&&"withChildrenVertical","right"===s&&"vertical"!==a&&"textAlignRight","left"===s&&"vertical"!==a&&"textAlignLeft"],wrapper:["wrapper","vertical"===a&&"wrapperVertical"]},AT,r)})(m);return(0,Tt.jsx)(fT,l(l({as:c,className:Mu(g.root,o),role:A,ref:t,ownerState:m,"aria-orientation":"separator"!==A||"hr"===c&&"vertical"!==s?void 0:s},f),{},{children:i?(0,Tt.jsx)(mT,{className:g.wrapper,ownerState:m,children:i}):null}))}));gT&&(gT.muiSkipListHighlight=!0);const vT=gT,yT=Zh((0,Tt.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"})),bT=Zh((0,Tt.jsx)("path",{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48z"})),ET=Zh((0,Tt.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),wT=Zh((0,Tt.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),_T=Zh((0,Tt.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"})),ST=Zh((0,Tt.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92"}));var CT=n(5239),TT=n.n(CT),IT=n(2284),RT=Uint8Array,xT=Uint16Array,NT=Int32Array,OT=new RT([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kT=new RT([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),PT=new RT([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),BT=function(e,t){for(var n=new xT(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new NT(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},LT=BT(OT,2),DT=LT.b,UT=LT.r;DT[28]=258,UT[258]=28;for(var MT=BT(kT,0),FT=MT.b,jT=MT.r,QT=new xT(32768),VT=0;VT<32768;++VT){var HT=(43690&VT)>>1|(21845&VT)<<1;HT=(61680&(HT=(52428&HT)>>2|(13107&HT)<<2))>>4|(3855&HT)<<4,QT[VT]=((65280&HT)>>8|(255&HT)<<8)>>1}var zT=function(e,t,n){for(var r=e.length,i=0,o=new xT(t);i<r;++i)e[i]&&++o[e[i]-1];var a,s=new xT(t);for(i=1;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;if(n){a=new xT(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var l=i<<4|e[i],d=t-e[i],u=s[e[i]-1]++<<d,A=u|(1<<d)-1;u<=A;++u)a[QT[u]>>c]=l}else for(a=new xT(r),i=0;i<r;++i)e[i]&&(a[i]=QT[s[e[i]-1]++]>>15-e[i]);return a},KT=new RT(288);for(VT=0;VT<144;++VT)KT[VT]=8;for(VT=144;VT<256;++VT)KT[VT]=9;for(VT=256;VT<280;++VT)KT[VT]=7;for(VT=280;VT<288;++VT)KT[VT]=8;var GT=new RT(32);for(VT=0;VT<32;++VT)GT[VT]=5;var WT=zT(KT,9,0),qT=zT(KT,9,1),YT=zT(GT,5,0),XT=zT(GT,5,1),JT=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ZT=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},$T=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},eI=function(e){return(e+7)/8|0},tI=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new RT(e.subarray(t,n))},nI=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],rI=function(e,t,n){var r=new Error(t||nI[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,rI),!n)throw r;return r},iI=function(e,t,n,r){var i=e.length,o=r?r.length:0;if(!i||t.f&&!t.l)return n||new RT(0);var a=!n,s=a||2!=t.i,c=t.i;a&&(n=new RT(3*i));var l=function(e){var t=n.length;if(e>t){var r=new RT(Math.max(2*t,e));r.set(n),n=r}},d=t.f||0,u=t.p||0,A=t.b||0,h=t.l,p=t.d,f=t.m,m=t.n,g=8*i;do{if(!h){d=ZT(e,u,1);var v=ZT(e,u+1,3);if(u+=3,!v){var y=e[(N=eI(u)+4)-4]|e[N-3]<<8,b=N+y;if(b>i){c&&rI(0);break}s&&l(A+y),n.set(e.subarray(N,b),A),t.b=A+=y,t.p=u=8*b,t.f=d;continue}if(1==v)h=qT,p=XT,f=9,m=5;else if(2==v){var E=ZT(e,u,31)+257,w=ZT(e,u+10,15)+4,_=E+ZT(e,u+5,31)+1;u+=14;for(var S=new RT(_),C=new RT(19),T=0;T<w;++T)C[PT[T]]=ZT(e,u+3*T,7);u+=3*w;var I=JT(C),R=(1<<I)-1,x=zT(C,I,1);for(T=0;T<_;){var N,O=x[ZT(e,u,R)];if(u+=15&O,(N=O>>4)<16)S[T++]=N;else{var k=0,P=0;for(16==N?(P=3+ZT(e,u,3),u+=2,k=S[T-1]):17==N?(P=3+ZT(e,u,7),u+=3):18==N&&(P=11+ZT(e,u,127),u+=7);P--;)S[T++]=k}}var B=S.subarray(0,E),L=S.subarray(E);f=JT(B),m=JT(L),h=zT(B,f,1),p=zT(L,m,1)}else rI(1);if(u>g){c&&rI(0);break}}s&&l(A+131072);for(var D=(1<<f)-1,U=(1<<m)-1,M=u;;M=u){var F=(k=h[$T(e,u)&D])>>4;if((u+=15&k)>g){c&&rI(0);break}if(k||rI(2),F<256)n[A++]=F;else{if(256==F){M=u,h=null;break}var j=F-254;if(F>264){var Q=OT[T=F-257];j=ZT(e,u,(1<<Q)-1)+DT[T],u+=Q}var V=p[$T(e,u)&U],H=V>>4;V||rI(3),u+=15&V;L=FT[H];if(H>3){Q=kT[H];L+=$T(e,u)&(1<<Q)-1,u+=Q}if(u>g){c&&rI(0);break}s&&l(A+131072);var z=A+j;if(A<L){var K=o-L,G=Math.min(L,z);for(K+A<0&&rI(3);A<G;++A)n[A]=r[K+A]}for(;A<z;++A)n[A]=n[A-L]}}t.l=h,t.p=M,t.b=A,t.f=d,h&&(d=1,t.m=f,t.d=p,t.n=m)}while(!d);return A!=n.length&&a?tI(n,0,A):n.subarray(0,A)},oI=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},aI=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},sI=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return{t:pI,l:0};if(1==i){var a=new RT(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],c=n[1],l=0,d=1,u=2;for(n[0]={s:-1,f:s.f+c.f,l:s,r:c};d!=i-1;)s=n[n[l].f<n[u].f?l++:u++],c=n[l!=d&&n[l].f<n[u].f?l++:u++],n[d++]={s:-1,f:s.f+c.f,l:s,r:c};var A=o[0].s;for(r=1;r<i;++r)o[r].s>A&&(A=o[r].s);var h=new xT(A+1),p=cI(n[d-1],h,0);if(p>t){r=0;var f=0,m=p-t,g=1<<m;for(o.sort((function(e,t){return h[t.s]-h[e.s]||e.f-t.f}));r<i;++r){var v=o[r].s;if(!(h[v]>t))break;f+=g-(1<<p-h[v]),h[v]=t}for(f>>=m;f>0;){var y=o[r].s;h[y]<t?f-=1<<t-h[y]++-1:++r}for(;r>=0&&f;--r){var b=o[r].s;h[b]==t&&(--h[b],++f)}p=t}return{t:new RT(h),l:p}},cI=function(e,t,n){return-1==e.s?Math.max(cI(e.l,t,n+1),cI(e.r,t,n+1)):t[e.s]=n},lI=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new xT(++t),r=0,i=e[0],o=1,a=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=e[s]}return{c:n.subarray(0,r),n:t}},dI=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},uI=function(e,t,n){var r=n.length,i=eI(t+2);e[i]=255&r,e[i+1]=r>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},AI=function(e,t,n,r,i,o,a,s,c,l,d){oI(t,d++,n),++i[256];for(var u=sI(i,15),A=u.t,h=u.l,p=sI(o,15),f=p.t,m=p.l,g=lI(A),v=g.c,y=g.n,b=lI(f),E=b.c,w=b.n,_=new xT(19),S=0;S<v.length;++S)++_[31&v[S]];for(S=0;S<E.length;++S)++_[31&E[S]];for(var C=sI(_,7),T=C.t,I=C.l,R=19;R>4&&!T[PT[R-1]];--R);var x,N,O,k,P=l+5<<3,B=dI(i,KT)+dI(o,GT)+a,L=dI(i,A)+dI(o,f)+a+14+3*R+dI(_,T)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&P<=B&&P<=L)return uI(t,d,e.subarray(c,c+l));if(oI(t,d,1+(L<B)),d+=2,L<B){x=zT(A,h,0),N=A,O=zT(f,m,0),k=f;var D=zT(T,I,0);oI(t,d,y-257),oI(t,d+5,w-1),oI(t,d+10,R-4),d+=14;for(S=0;S<R;++S)oI(t,d+3*S,T[PT[S]]);d+=3*R;for(var U=[v,E],M=0;M<2;++M){var F=U[M];for(S=0;S<F.length;++S){var j=31&F[S];oI(t,d,D[j]),d+=T[j],j>15&&(oI(t,d,F[S]>>5&127),d+=F[S]>>12)}}}else x=WT,N=KT,O=YT,k=GT;for(S=0;S<s;++S){var Q=r[S];if(Q>255){aI(t,d,x[(j=Q>>18&31)+257]),d+=N[j+257],j>7&&(oI(t,d,Q>>23&31),d+=OT[j]);var V=31&Q;aI(t,d,O[V]),d+=k[V],V>3&&(aI(t,d,Q>>5&8191),d+=kT[V])}else aI(t,d,x[Q]),d+=N[Q]}return aI(t,d,x[256]),d+N[256]},hI=new NT([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),pI=new RT(0),fI=function(e,t,n,r,i,o){var a=o.z||e.length,s=new RT(r+a+5*(1+Math.ceil(a/7e3))+i),c=s.subarray(r,s.length-i),l=o.l,d=7&(o.r||0);if(t){d&&(c[0]=o.r>>3);for(var u=hI[t-1],A=u>>13,h=8191&u,p=(1<<n)-1,f=o.p||new xT(32768),m=o.h||new xT(p+1),g=Math.ceil(n/3),v=2*g,y=function(t){return(e[t]^e[t+1]<<g^e[t+2]<<v)&p},b=new NT(25e3),E=new xT(288),w=new xT(32),_=0,S=0,C=o.i||0,T=0,I=o.w||0,R=0;C+2<a;++C){var x=y(C),N=32767&C,O=m[x];if(f[N]=O,m[x]=N,I<=C){var k=a-C;if((_>7e3||T>24576)&&(k>423||!l)){d=AI(e,c,0,b,E,w,S,T,R,C-R,d),T=_=S=0,R=C;for(var P=0;P<286;++P)E[P]=0;for(P=0;P<30;++P)w[P]=0}var B=2,L=0,D=h,U=N-O&32767;if(k>2&&x==y(C-U))for(var M=Math.min(A,k)-1,F=Math.min(32767,C),j=Math.min(258,k);U<=F&&--D&&N!=O;){if(e[C+B]==e[C+B-U]){for(var Q=0;Q<j&&e[C+Q]==e[C+Q-U];++Q);if(Q>B){if(B=Q,L=U,Q>M)break;var V=Math.min(U,Q-2),H=0;for(P=0;P<V;++P){var z=C-U+P&32767,K=z-f[z]&32767;K>H&&(H=K,O=z)}}}U+=(N=O)-(O=f[N])&32767}if(L){b[T++]=268435456|UT[B]<<18|jT[L];var G=31&UT[B],W=31&jT[L];S+=OT[G]+kT[W],++E[257+G],++w[W],I=C+B,++_}else b[T++]=e[C],++E[e[C]]}}for(C=Math.max(C,I);C<a;++C)b[T++]=e[C],++E[e[C]];d=AI(e,c,l,b,E,w,S,T,R,C-R,d),l||(o.r=7&d|c[d/8|0]<<3,d-=7,o.h=m,o.p=f,o.i=C,o.w=I)}else{for(C=o.w||0;C<a+l;C+=65535){var q=C+65535;q>=a&&(c[d/8|0]=l,q=a),d=uI(c,d+1,e.subarray(C,q))}o.i=a}return tI(s,0,r+eI(d)+i)},mI=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,o=0|n.length,a=0;a!=o;){for(var s=Math.min(a+2655,o);a<s;++a)i+=r+=n[a];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}e=r,t=i},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},gI=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),a=new RT(o.length+e.length);a.set(o),a.set(e,o.length),e=a,i.w=o.length}return fI(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,i)},vI=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},yI=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=mI();i.p(t.dictionary),vI(e,2,i.d())}},bI=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&rI(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&rI(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function EI(e,t){t||(t={});var n=mI();n.p(e);var r=gI(e,t,t.dictionary?6:2,4);return yI(r,t),vI(r,r.length-4,n.d()),r}function wI(e,t){return iI(e.subarray(bI(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var _I="undefined"!=typeof TextDecoder&&new TextDecoder;try{_I.decode(pI,{stream:!0})}catch(XB){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var SI=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function CI(){SI.console&&"function"==typeof SI.console.log&&SI.console.log.apply(SI.console,arguments)}var TI={log:CI,warn:function(e){SI.console&&("function"==typeof SI.console.warn?SI.console.warn.apply(SI.console,arguments):CI.call(null,arguments))},error:function(e){SI.console&&("function"==typeof SI.console.error?SI.console.error.apply(SI.console,arguments):CI(e))}};function II(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){kI(r.response,t,n)},r.onerror=function(){TI.error("could not download file")},r.send()}function RI(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function xI(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var NI,OI,kI=SI.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,IT.A)(window))||window!==SI?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=SI.URL||SI.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin!==location.origin?RI(i.href)?II(e,t,n):xI(i,i.target="_blank"):xI(i)):(i.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){xI(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(RI(e))II(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){xI(r)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,IT.A)(t)&&(TI.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return II(e,t,n);var i="application/octet-stream"===e.type,o=/constructor/i.test(SI.HTMLElement)||SI.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o)&&"object"===("undefined"==typeof FileReader?"undefined":(0,IT.A)(FileReader))){var s=new FileReader;s.onloadend=function(){var e=s.result;e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},s.readAsDataURL(e)}else{var c=SI.URL||SI.webkitURL,l=c.createObjectURL(e);r?r.location=l:location.href=l,r=null,setTimeout((function(){c.revokeObjectURL(l)}),4e4)}});function PI(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,a=i.exec(e);a&&(t=o(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}function BI(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];n=DI(n,r,i,o,t[0],7,-680876936),o=DI(o,n,r,i,t[1],12,-389564586),i=DI(i,o,n,r,t[2],17,606105819),r=DI(r,i,o,n,t[3],22,-1044525330),n=DI(n,r,i,o,t[4],7,-176418897),o=DI(o,n,r,i,t[5],12,1200080426),i=DI(i,o,n,r,t[6],17,-1473231341),r=DI(r,i,o,n,t[7],22,-45705983),n=DI(n,r,i,o,t[8],7,1770035416),o=DI(o,n,r,i,t[9],12,-1958414417),i=DI(i,o,n,r,t[10],17,-42063),r=DI(r,i,o,n,t[11],22,-1990404162),n=DI(n,r,i,o,t[12],7,1804603682),o=DI(o,n,r,i,t[13],12,-40341101),i=DI(i,o,n,r,t[14],17,-1502002290),n=UI(n,r=DI(r,i,o,n,t[15],22,1236535329),i,o,t[1],5,-165796510),o=UI(o,n,r,i,t[6],9,-1069501632),i=UI(i,o,n,r,t[11],14,643717713),r=UI(r,i,o,n,t[0],20,-373897302),n=UI(n,r,i,o,t[5],5,-701558691),o=UI(o,n,r,i,t[10],9,38016083),i=UI(i,o,n,r,t[15],14,-660478335),r=UI(r,i,o,n,t[4],20,-405537848),n=UI(n,r,i,o,t[9],5,568446438),o=UI(o,n,r,i,t[14],9,-1019803690),i=UI(i,o,n,r,t[3],14,-187363961),r=UI(r,i,o,n,t[8],20,1163531501),n=UI(n,r,i,o,t[13],5,-1444681467),o=UI(o,n,r,i,t[2],9,-51403784),i=UI(i,o,n,r,t[7],14,1735328473),n=MI(n,r=UI(r,i,o,n,t[12],20,-1926607734),i,o,t[5],4,-378558),o=MI(o,n,r,i,t[8],11,-2022574463),i=MI(i,o,n,r,t[11],16,1839030562),r=MI(r,i,o,n,t[14],23,-35309556),n=MI(n,r,i,o,t[1],4,-1530992060),o=MI(o,n,r,i,t[4],11,1272893353),i=MI(i,o,n,r,t[7],16,-155497632),r=MI(r,i,o,n,t[10],23,-1094730640),n=MI(n,r,i,o,t[13],4,681279174),o=MI(o,n,r,i,t[0],11,-358537222),i=MI(i,o,n,r,t[3],16,-722521979),r=MI(r,i,o,n,t[6],23,76029189),n=MI(n,r,i,o,t[9],4,-640364487),o=MI(o,n,r,i,t[12],11,-421815835),i=MI(i,o,n,r,t[15],16,530742520),n=FI(n,r=MI(r,i,o,n,t[2],23,-995338651),i,o,t[0],6,-198630844),o=FI(o,n,r,i,t[7],10,1126891415),i=FI(i,o,n,r,t[14],15,-1416354905),r=FI(r,i,o,n,t[5],21,-57434055),n=FI(n,r,i,o,t[12],6,1700485571),o=FI(o,n,r,i,t[3],10,-1894986606),i=FI(i,o,n,r,t[10],15,-1051523),r=FI(r,i,o,n,t[1],21,-2054922799),n=FI(n,r,i,o,t[8],6,1873313359),o=FI(o,n,r,i,t[15],10,-30611744),i=FI(i,o,n,r,t[6],15,-1560198380),r=FI(r,i,o,n,t[13],21,1309151649),n=FI(n,r,i,o,t[4],6,-145523070),o=FI(o,n,r,i,t[11],10,-1120210379),i=FI(i,o,n,r,t[2],15,718787259),r=FI(r,i,o,n,t[9],21,-343485551),e[0]=WI(n,e[0]),e[1]=WI(r,e[1]),e[2]=WI(i,e[2]),e[3]=WI(o,e[3])}function LI(e,t,n,r,i,o){return t=WI(WI(t,e),WI(r,o)),WI(t<<i|t>>>32-i,n)}function DI(e,t,n,r,i,o,a){return LI(t&n|~t&r,e,t,i,o,a)}function UI(e,t,n,r,i,o,a){return LI(t&r|n&~r,e,t,i,o,a)}function MI(e,t,n,r,i,o,a){return LI(t^n^r,e,t,i,o,a)}function FI(e,t,n,r,i,o,a){return LI(n^(t|~r),e,t,i,o,a)}function jI(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)BI(r,QI(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(BI(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,BI(r,i),r}function QI(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}NI=SI.atob.bind(SI),OI=SI.btoa.bind(SI);var VI="0123456789abcdef".split("");function HI(e){for(var t="",n=0;n<4;n++)t+=VI[e>>8*n+4&15]+VI[e>>8*n&15];return t}function zI(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function KI(e){return jI(e).map(zI).join("")}var GI="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=HI(e[t]);return e.join("")}(jI("hello"));function WI(e,t){if(GI){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function qI(e,t){var n,r,i,o;if(e!==n){for(var a=(i=e,o=1+(256/e.length|0),new Array(o+1).join(i)),s=[],c=0;c<256;c++)s[c]=c;var l=0;for(c=0;c<256;c++){var d=s[c];l=(l+d+a.charCodeAt(c))%256,s[c]=s[l],s[l]=d}n=e,r=s}else s=r;var u=t.length,A=0,h=0,p="";for(c=0;c<u;c++)h=(h+(d=s[A=(A+1)%256]))%256,s[A]=s[h],s[h]=d,a=s[(s[A]+s[h])%256],p+=String.fromCharCode(t.charCodeAt(c)^a);return p}var YI={print:4,modify:8,copy:16,"annot-forms":32};function XI(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach((function(e){if(void 0!==YI.perm)throw new Error("Invalid permission: "+e);i+=YI[e]})),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var o=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^i)),this.encryptionKey=KI(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=qI(this.encryptionKey,this.padding)}function JI(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);t+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):e[r]}return t}function ZI(e){if("object"!==(0,IT.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var i=Math.random().toString(35);return t[e][i]=[n,!!r],i},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[n]){var a=t[n][o];try{a[0].apply(e,r)}catch(n){SI.console&&TI.error("jsPDF PubSub Error",n.message,n)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function $I(e){if(!(this instanceof $I))return new $I(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function eR(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function tR(e,t,n,r,i){if(!(this instanceof tR))return new tR(e,t,n,r,i);this.type="axial"===e?2:3,this.coords=t,this.colors=n,eR.call(this,r,i)}function nR(e,t,n,r,i){if(!(this instanceof nR))return new nR(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,eR.call(this,r,i)}function rR(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],a=[],s=1,c=16,l="S",d=null;"object"===(0,IT.A)(e=e||{})&&(n=e.orientation,r=e.unit||r,i=e.format||i,o=e.compress||e.compressPdf||o,null!==(d=e.encryption||null)&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),s="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(c=e.floatPrecision),l=e.defaultPathOperation||"S"),a=e.filters||(!0===o?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,A={},h={internal:{},__private__:{}};h.__private__.PubSub=ZI;var p="1.3",f=h.__private__.getPdfVersion=function(){return p};h.__private__.setPdfVersion=function(e){p=e};var m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return m};var g=h.__private__.getPageFormat=function(e){return m[e]};i=i||"a4";var v="compat",y="advanced",b=v;function E(){this.saveGraphicsState(),J(new Oe(Ae,0,0,-Ae,0,ln()*Ae).toString()+" cm"),this.setFontSize(this.getFontSize()/Ae),l="n",b=y}function w(){this.restoreGraphicsState(),l="S",b=v}var _=h.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};h.advancedAPI=function(e){var t=b===v;return t&&E.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},h.compatAPI=function(e){var t=b===y;return t&&w.call(this),"function"!=typeof e||(e(this),t&&E.call(this)),this},h.isAdvancedAPI=function(){return b===y};var S,C=function(e){if(b!==y)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=h.roundToPrecision=h.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};S=h.hpf=h.__private__.hpf="number"==typeof c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return T(e,c)}:"smart"===c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return T(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return T(e,16)};var I=h.f2=h.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return T(e,2)},R=h.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return T(e,3)},x=h.scale=h.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return b===v?e*Ae:b===y?e:void 0},N=function(e){return x(function(e){return b===v?ln()-e:b===y?e:void 0}(e))};h.__private__.setPrecision=h.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var O,k="00000000000000000000000000000000",P=h.__private__.getFileId=function(){return k},B=h.__private__.setFileId=function(e){return k=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():k.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==d&&(vt=new XI(d.userPermissions,d.userPassword,d.ownerPassword,k)),k};h.setFileId=function(e){return B(e),this},h.getFileId=function(){return P()};var L=h.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),i=Math.abs(t%60),o=[n,j(r),"'",j(i),"'"].join("");return["D:",e.getFullYear(),j(e.getMonth()+1),j(e.getDate()),j(e.getHours()),j(e.getMinutes()),j(e.getSeconds()),o].join("")},D=h.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),a=parseInt(e.substr(14,2),10);return new Date(t,n,r,i,o,a,0)},U=h.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=L(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return O=t},M=h.__private__.getCreationDate=function(e){var t=O;return"jsDate"===e&&(t=D(O)),t};h.setCreationDate=function(e){return U(e),this},h.getCreationDate=function(e){return M(e)};var F,j=h.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},Q=h.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},V=0,H=[],z=[],K=0,G=[],W=[],q=!1,Y=z;h.__private__.setCustomOutputDestination=function(e){q=!0,Y=e};var X=function(e){q||(Y=e)};h.__private__.resetCustomOutputDestination=function(){q=!1,Y=z};var J=h.__private__.out=function(e){return e=e.toString(),K+=e.length+1,Y.push(e),Y},Z=h.__private__.write=function(e){return J(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},$=h.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(e){return te=b===y?e/Ae:e,this};var ne,re=h.__private__.getFontSize=h.getFontSize=function(){return b===v?te:te*Ae},ie=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(e){return ie=e,this},h.__private__.getR2L=h.getR2L=function(){return ie};var oe,ae=h.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ne=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ne=e}else ne=parseInt(e,10)};h.__private__.getZoomMode=function(){return ne};var se,ce=h.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');oe=e};h.__private__.getPageMode=function(){return oe};var le=h.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');se=e};h.__private__.getLayoutMode=function(){return se},h.__private__.setDisplayMode=h.setDisplayMode=function(e,t,n){return ae(e),le(t),ce(n),this};var de={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(e){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return de[e]},h.__private__.getDocumentProperties=function(){return de},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(e){for(var t in de)de.hasOwnProperty(t)&&e[t]&&(de[t]=e[t]);return this},h.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return de[e]=t};var ue,Ae,he,pe,fe,me={},ge={},ve=[],ye={},be={},Ee={},we={},_e=null,Se=0,Ce=[],Te=new ZI(h),Ie=e.hotfixes||[],Re={},xe={},Ne=[],Oe=function e(t,n,r,i,o,a){if(!(this instanceof e))return new e(t,n,r,i,o,a);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=1),isNaN(o)&&(o=0),isNaN(a)&&(a=0),this._matrix=[t,n,r,i,o,a]};Object.defineProperty(Oe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Oe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Oe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Oe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Oe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Oe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Oe.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Oe.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Oe.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Oe.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Oe.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Oe.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Oe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Oe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Oe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Oe.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Oe.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(e)},Oe.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,i=e.shx*this.shy+e.sy*this.sy,o=e.tx*this.sx+e.ty*this.shx+this.tx,a=e.tx*this.shy+e.ty*this.sy+this.ty;return new Oe(t,n,r,i,o,a)},Oe.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty,a=Math.sqrt(e*e+t*t),s=(e/=a)*n+(t/=a)*r;n-=e*s,r-=t*s;var c=Math.sqrt(n*n+r*r);return s/=c,e*(r/=c)<t*(n/=c)&&(e=-e,t=-t,s=-s,a=-a),{scale:new Oe(a,0,0,c,0,0),translate:new Oe(1,0,0,1,i,o),rotate:new Oe(e,t,-t,e,0,0),skew:new Oe(1,0,s,1,0,0)}},Oe.prototype.toString=function(e){return this.join(" ")},Oe.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty,a=1/(e*r-t*n),s=r*a,c=-t*a,l=-n*a,d=e*a;return new Oe(s,c,l,d,-s*i-l*o,-c*i-d*o)},Oe.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new tn(t,n)},Oe.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new tn(e.x+e.w,e.y+e.h));return new nn(t.x,t.y,n.x-t.x,n.y-t.y)},Oe.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty;return new Oe(e,t,n,r,i,o)},h.Matrix=Oe;var ke=h.matrixMult=function(e,t){return t.multiply(e)},Pe=new Oe(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Pe;var Be=function(e,t){if(!be[e]){var n=(t instanceof tR?"Sh":"P")+(Object.keys(ye).length+1).toString(10);t.id=n,be[e]=n,ye[n]=t,Te.publish("addPattern",t)}};h.ShadingPattern=tR,h.TilingPattern=nR,h.addShadingPattern=function(e,t){return C("addShadingPattern()"),Be(e,t),this},h.beginTilingPattern=function(e){C("beginTilingPattern()"),on(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},h.endTilingPattern=function(e,t){C("endTilingPattern()"),t.stream=W[F].join("\n"),Be(e,t),Te.publish("endTilingPattern",t),Ne.pop().restore()};var Le=h.__private__.newObject=function(){var e=De();return Ue(e,!0),e},De=h.__private__.newObjectDeferred=function(){return V++,H[V]=function(){return K},V},Ue=function(e,t){return t="boolean"==typeof t&&t,H[e]=K,t&&J(e+" 0 obj"),e},Me=h.__private__.newAdditionalObject=function(){var e={objId:De(),content:""};return G.push(e),e},Fe=De(),je=De(),Qe=h.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",i=0;i<3;i++)r+=("0"+Math.floor(255*parseFloat(t[i])).toString(16)).slice(-2);return r},Ve=h.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,r=e.ch2,i=e.ch3,o=e.ch4,a="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var s=new PI(n);if(s.ok)n=s.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var c=parseInt(n.substr(1),16);n=c>>16&255,r=c>>8&255,i=255&c}if(void 0===r||void 0===o&&n===r&&r===i)if("string"==typeof n)t=n+" "+a[0];else if(2===e.precision)t=I(n/255)+" "+a[0];else t=R(n/255)+" "+a[0];else if(void 0===o||"object"===(0,IT.A)(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",a[1]].join(" ");if("string"==typeof n)t=[n,r,i,a[1]].join(" ");else if(2===e.precision)t=[I(n/255),I(r/255),I(i/255),a[1]].join(" ");else t=[R(n/255),R(r/255),R(i/255),a[1]].join(" ")}else if("string"==typeof n)t=[n,r,i,o,a[2]].join(" ");else if(2===e.precision)t=[I(n),I(r),I(i),I(o),a[2]].join(" ");else t=[R(n),R(r),R(i),R(o),a[2]].join(" ");return t},He=h.__private__.getFilters=function(){return a},ze=h.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||He(),r=e.alreadyAppliedFilters||[],i=e.addLength1||!1,o=t.length,a=e.objectId,s=function(e){return e};if(null!==d&&void 0===a)throw new Error("ObjectId must be passed to putStream for file encryption");null!==d&&(s=vt.encryptor(a,0));var c={};!0===n&&(n=["FlateEncode"]);var l=e.additionalKeyValues||[],u=(c=void 0!==rR.API.processDataByFilters?rR.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==c.data.length&&(l.push({key:"Length",value:c.data.length}),!0===i&&l.push({key:"Length1",value:o})),0!=u.length)if(u.split("/").length-1==1)l.push({key:"Filter",value:u});else{l.push({key:"Filter",value:"["+u+"]"});for(var A=0;A<l.length;A+=1)if("DecodeParms"===l[A].key){for(var h=[],p=0;p<c.reverseChain.split("/").length-1;p+=1)h.push("null");h.push(l[A].value),l[A].value="["+h.join(" ")+"]"}}J("<<");for(var f=0;f<l.length;f++)J("/"+l[f].key+" "+l[f].value);J(">>"),0!==c.data.length&&(J("stream"),J(s(c.data)),J("endstream"))},Ke=h.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,i=e.contentsObjId;Ue(r,!0),J("<</Type /Page"),J("/Parent "+e.rootDictionaryObjId+" 0 R"),J("/Resources "+e.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(S(e.mediaBox.bottomLeftX))+" "+parseFloat(S(e.mediaBox.bottomLeftY))+" "+S(e.mediaBox.topRightX)+" "+S(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&J("/CropBox ["+S(e.cropBox.bottomLeftX)+" "+S(e.cropBox.bottomLeftY)+" "+S(e.cropBox.topRightX)+" "+S(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&J("/BleedBox ["+S(e.bleedBox.bottomLeftX)+" "+S(e.bleedBox.bottomLeftY)+" "+S(e.bleedBox.topRightX)+" "+S(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&J("/TrimBox ["+S(e.trimBox.bottomLeftX)+" "+S(e.trimBox.bottomLeftY)+" "+S(e.trimBox.topRightX)+" "+S(e.trimBox.topRightY)+"]"),null!==e.artBox&&J("/ArtBox ["+S(e.artBox.bottomLeftX)+" "+S(e.artBox.bottomLeftY)+" "+S(e.artBox.topRightX)+" "+S(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&J("/UserUnit "+e.userUnit),Te.publish("putPage",{objId:r,pageContext:Ce[t],pageNumber:t,page:n}),J("/Contents "+i+" 0 R"),J(">>"),J("endobj");var o=n.join("\n");return b===y&&(o+="\nQ"),Ue(i,!0),ze({data:o,filters:He(),objectId:i}),J("endobj"),r},Ge=h.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Se;e++)Ce[e].objId=De(),Ce[e].contentsObjId=De();for(e=1;e<=Se;e++)n.push(Ke({number:e,data:W[e],objId:Ce[e].objId,contentsObjId:Ce[e].contentsObjId,mediaBox:Ce[e].mediaBox,cropBox:Ce[e].cropBox,bleedBox:Ce[e].bleedBox,trimBox:Ce[e].trimBox,artBox:Ce[e].artBox,userUnit:Ce[e].userUnit,rootDictionaryObjId:Fe,resourceDictionaryObjId:je}));Ue(Fe,!0),J("<</Type /Pages");var r="/Kids [";for(t=0;t<Se;t++)r+=n[t]+" 0 R ";J(r+"]"),J("/Count "+Se),J(">>"),J("endobj"),Te.publish("postPutPages")},We=function(e){Te.publish("putFont",{font:e,out:J,newObject:Le,putStream:ze}),!0!==e.isAlreadyPutted&&(e.objectNumber=Le(),J("<<"),J("/Type /Font"),J("/BaseFont /"+JI(e.postScriptName)),J("/Subtype /Type1"),"string"==typeof e.encoding&&J("/Encoding /"+e.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},qe=function(e){e.objectNumber=Le();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[S(e.x),S(e.y),S(e.x+e.width),S(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");ze({data:n,additionalKeyValues:t,objectId:e.objectNumber}),J("endobj")},Ye=function(e,t){t||(t=21);var n=Le(),r=function(e,t){var n,r=[],i=1/(t-1);for(n=0;n<1;n+=i)r.push(n);if(r.push(1),0!=e[0].offset){var o={offset:0,color:e[0].color};e.unshift(o)}if(1!=e[e.length-1].offset){var a={offset:1,color:e[e.length-1].color};e.push(a)}for(var s="",c=0,l=0;l<r.length;l++){for(n=r[l];n>e[c+1].offset;)c++;var d=e[c].offset,u=(n-d)/(e[c+1].offset-d),A=e[c].color,h=e[c+1].color;s+=Q(Math.round((1-u)*A[0]+u*h[0]).toString(16))+Q(Math.round((1-u)*A[1]+u*h[1]).toString(16))+Q(Math.round((1-u)*A[2]+u*h[2]).toString(16))}return s.trim()}(e.colors,t),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+t+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ze({data:r,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),J("endobj"),e.objectNumber=Le(),J("<< /ShadingType "+e.type),J("/ColorSpace /DeviceRGB");var o="/Coords ["+S(parseFloat(e.coords[0]))+" "+S(parseFloat(e.coords[1]))+" ";2===e.type?o+=S(parseFloat(e.coords[2]))+" "+S(parseFloat(e.coords[3])):o+=S(parseFloat(e.coords[2]))+" "+S(parseFloat(e.coords[3]))+" "+S(parseFloat(e.coords[4]))+" "+S(parseFloat(e.coords[5])),J(o+="]"),e.matrix&&J("/Matrix ["+e.matrix.toString()+"]"),J("/Function "+n+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Xe=function(e,t){var n=De(),r=Le();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+e.boundingBox.map(S).join(" ")+"]"}),i.push({key:"XStep",value:S(e.xStep)}),i.push({key:"YStep",value:S(e.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),e.matrix&&i.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),ze({data:e.stream,additionalKeyValues:i,objectId:e.objectNumber}),J("endobj")},Je=function(e){for(var t in e.objectNumber=Le(),J("<<"),e)switch(t){case"opacity":J("/ca "+I(e[t]));break;case"stroke-opacity":J("/CA "+I(e[t]))}J(">>"),J("endobj")},Ze=function(e){Ue(e.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in J("/Font <<"),me)me.hasOwnProperty(e)&&(!1===u||!0===u&&A.hasOwnProperty(e))&&J("/"+e+" "+me[e].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(ye).length>0){for(var e in J("/Shading <<"),ye)ye.hasOwnProperty(e)&&ye[e]instanceof tR&&ye[e].objectNumber>=0&&J("/"+e+" "+ye[e].objectNumber+" 0 R");Te.publish("putShadingPatternDict"),J(">>")}}(),function(e){if(Object.keys(ye).length>0){for(var t in J("/Pattern <<"),ye)ye.hasOwnProperty(t)&&ye[t]instanceof h.TilingPattern&&ye[t].objectNumber>=0&&ye[t].objectNumber<e&&J("/"+t+" "+ye[t].objectNumber+" 0 R");Te.publish("putTilingPatternDict"),J(">>")}}(e.objectOid),function(){if(Object.keys(Ee).length>0){var e;for(e in J("/ExtGState <<"),Ee)Ee.hasOwnProperty(e)&&Ee[e].objectNumber>=0&&J("/"+e+" "+Ee[e].objectNumber+" 0 R");Te.publish("putGStateDict"),J(">>")}}(),function(){for(var e in J("/XObject <<"),Re)Re.hasOwnProperty(e)&&Re[e].objectNumber>=0&&J("/"+e+" "+Re[e].objectNumber+" 0 R");Te.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},$e=function(){var e=[];(function(){for(var e in me)me.hasOwnProperty(e)&&(!1===u||!0===u&&A.hasOwnProperty(e))&&We(me[e])})(),function(){var e;for(e in Ee)Ee.hasOwnProperty(e)&&Je(Ee[e])}(),function(){for(var e in Re)Re.hasOwnProperty(e)&&qe(Re[e])}(),function(e){var t;for(t in ye)ye.hasOwnProperty(t)&&(ye[t]instanceof tR?Ye(ye[t]):ye[t]instanceof nR&&Xe(ye[t],e))}(e),Te.publish("putResources"),e.forEach(Ze),Ze({resourcesOid:je,objectOid:Number.MAX_SAFE_INTEGER}),Te.publish("postPutResources")},et=function(e){ge[e.fontName]=ge[e.fontName]||{},ge[e.fontName][e.fontStyle]=e.id},tt=function(e,t,n,r,i){var o={id:"F"+(Object.keys(me).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:i||!1,metadata:{}};return Te.publish("addFont",{font:o,instance:this}),me[o.id]=o,et(o),o.id},nt=h.__private__.pdfEscape=h.pdfEscape=function(e,t){return function(e,t){var n,r,i,o,a,s,c,l,d;if(i=(t=t||{}).sourceEncoding||"Unicode",a=t.outputEncoding,(t.autoencode||a)&&me[ue].metadata&&me[ue].metadata[i]&&me[ue].metadata[i].encoding&&(o=me[ue].metadata[i].encoding,!a&&me[ue].encoding&&(a=me[ue].encoding),!a&&o.codePages&&(a=o.codePages[0]),"string"==typeof a&&(a=o[a]),a)){for(c=!1,s=[],n=0,r=e.length;n<r;n++)(l=a[e.charCodeAt(n)])?s.push(String.fromCharCode(l)):s.push(e[n]),s[n].charCodeAt(0)>>8&&(c=!0);e=s.join("")}for(n=e.length;void 0===c&&0!==n;)e.charCodeAt(n-1)>>8&&(c=!0),n--;if(!c)return e;for(s=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((d=(l=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(d),s.push(l-(d<<8))}return String.fromCharCode.apply(void 0,s)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rt=h.__private__.beginPage=function(e){W[++Se]=[],Ce[Se]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},at(Se),X(W[F])},it=function(e,t){var r,o,a;switch(n=t||n,"string"==typeof e&&(r=g(e.toLowerCase()),Array.isArray(r)&&(o=r[0],a=r[1])),Array.isArray(e)&&(o=e[0]*Ae,a=e[1]*Ae),isNaN(o)&&(o=i[0],a=i[1]),(o>14400||a>14400)&&(TI.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),o=Math.min(14400,o),a=Math.min(14400,a)),i=[o,a],n.substr(0,1)){case"l":a>o&&(i=[a,o]);break;case"p":o>a&&(i=[a,o])}rt(i),Mt(Dt),J(Gt),0!==Zt&&J(Zt+" J"),0!==$t&&J($t+" j"),Te.publish("addPage",{pageNumber:Se})},ot=function(e){e>0&&e<=Se&&(W.splice(e,1),Ce.splice(e,1),Se--,F>Se&&(F=Se),this.setPage(F))},at=function(e){e>0&&e<=Se&&(F=e)},st=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return W.length-1},ct=function(e,t,n){var r,i=void 0;return n=n||{},e=void 0!==e?e:me[ue].fontName,t=void 0!==t?t:me[ue].fontStyle,r=e.toLowerCase(),void 0!==ge[r]&&void 0!==ge[r][t]?i=ge[r][t]:void 0!==ge[e]&&void 0!==ge[e][t]?i=ge[e][t]:!1===n.disableWarning&&TI.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=ge.times[t])&&(i=ge.times.normal),i},lt=h.__private__.putInfo=function(){var e=Le(),t=function(e){return e};for(var n in null!==d&&(t=vt.encryptor(e,0)),J("<<"),J("/Producer ("+nt(t("jsPDF "+rR.version))+")"),de)de.hasOwnProperty(n)&&de[n]&&J("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+nt(t(de[n]))+")");J("/CreationDate ("+nt(t(O))+")"),J(">>"),J("endobj")},dt=h.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Fe;switch(Le(),J("<<"),J("/Type /Catalog"),J("/Pages "+t+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ne;"%"===n.substr(n.length-1)&&(ne=parseInt(ne)/100),"number"==typeof ne&&J("/OpenAction [3 0 R /XYZ null null "+I(ne)+"]")}switch(se||(se="continuous"),se){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}oe&&J("/PageMode /"+oe),Te.publish("putCatalog"),J(">>"),J("endobj")},ut=h.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(V+1)),J("/Root "+V+" 0 R"),J("/Info "+(V-1)+" 0 R"),null!==d&&J("/Encrypt "+vt.oid+" 0 R"),J("/ID [ <"+k+"> <"+k+"> ]"),J(">>")},At=h.__private__.putHeader=function(){J("%PDF-"+p),J("%\xba\xdf\xac\xe0")},ht=h.__private__.putXRef=function(){var e="0000000000";J("xref"),J("0 "+(V+1)),J("0000000000 65535 f ");for(var t=1;t<=V;t++)"function"==typeof H[t]?J((e+H[t]()).slice(-10)+" 00000 n "):void 0!==H[t]?J((e+H[t]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},pt=h.__private__.buildDocument=function(){V=0,K=0,z=[],H=[],G=[],Fe=De(),je=De(),X(z),Te.publish("buildDocument"),At(),Ge(),function(){Te.publish("putAdditionalObjects");for(var e=0;e<G.length;e++){var t=G[e];Ue(t.objId,!0),J(t.content),J("endobj")}Te.publish("postPutAdditionalObjects")}(),$e(),null!==d&&(vt.oid=Le(),J("<<"),J("/Filter /Standard"),J("/V "+vt.v),J("/R "+vt.r),J("/U <"+vt.toHexString(vt.U)+">"),J("/O <"+vt.toHexString(vt.O)+">"),J("/P "+vt.P),J(">>"),J("endobj")),lt(),dt();var e=K;return ht(),ut(),J("startxref"),J(""+e),J("%%EOF"),X(W[F]),z.join("\n")},ft=h.__private__.getBlob=function(e){return new Blob([$(e)],{type:"application/pdf"})},mt=h.output=h.__private__.output=function(e){return e.foo=function(){try{return e.apply(this,arguments)}catch(e){var t=e.stack||"";~t.indexOf(" at ")&&(t=t.split(" at ")[1]);var n="Error in function "+t.split("\n")[0].split("<")[0]+": "+e.message;if(!SI.console)throw new Error(n);SI.console.error(n,e),SI.alert&&alert(n)}},e.foo.bar=e,e.foo}((function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return pt();case"save":h.save(t.filename);break;case"arraybuffer":return $(pt());case"blob":return ft(pt());case"bloburi":case"bloburl":if(void 0!==SI.URL&&"function"==typeof SI.URL.createObjectURL)return SI.URL&&SI.URL.createObjectURL(ft(pt()))||void 0;TI.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=pt();try{n=OI(r)}catch(e){n=OI(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(SI)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",o=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(i=t.pdfObjectUrl,o="");var a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+o+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",s=SI.open();return null!==s&&s.document.write(a),s}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(SI)){var c='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',l=SI.open();if(null!==l){l.document.write(c);var d=this;l.document.documentElement.querySelector("#pdfViewer").onload=function(){l.document.title=t.filename,l.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(d.output("bloburl"))}}return l}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(SI))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',A=SI.open();if(null!==A&&(A.document.write(u),A.document.title=t.filename),A||"undefined"==typeof safari)return A;break;case"datauri":case"dataurl":return SI.document.location.href=this.output("datauristring",t);default:return null}})),gt=function(e){return!0===Array.isArray(Ie)&&Ie.indexOf(e)>-1};switch(r){case"pt":Ae=1;break;case"mm":Ae=72/25.4;break;case"cm":Ae=72/2.54;break;case"in":Ae=72;break;case"px":Ae=1==gt("px_scaling")?.75:96/72;break;case"pc":case"em":Ae=12;break;case"ex":Ae=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);Ae=r}var vt=null;U(),B();var yt=h.__private__.getPageInfo=h.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ce[e].objId,pageNumber:e,pageContext:Ce[e]}},bt=h.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Ce)if(Ce[t].objId===e)break;return yt(t)},Et=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Ce[F].objId,pageNumber:F,pageContext:Ce[F]}};h.addPage=function(){return it.apply(this,arguments),this},h.setPage=function(){return at.apply(this,arguments),X.call(this,W[F]),this},h.insertPage=function(e){return this.addPage(),this.movePage(F,e),this},h.movePage=function(e,t){var n,r;if(e>t){n=W[e],r=Ce[e];for(var i=e;i>t;i--)W[i]=W[i-1],Ce[i]=Ce[i-1];W[t]=n,Ce[t]=r,this.setPage(t)}else if(e<t){n=W[e],r=Ce[e];for(var o=e;o<t;o++)W[o]=W[o+1],Ce[o]=Ce[o+1];W[t]=n,Ce[t]=r,this.setPage(t)}return this},h.deletePage=function(){return ot.apply(this,arguments),this},h.__private__.text=h.text=function(e,t,n,r,i){var o,a,s,c,l,d,u,h,p,f=(r=r||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var m=n;n=t,t=e,e=m}if(arguments[3]instanceof Oe==0?(s=arguments[4],c=arguments[5],"object"===(0,IT.A)(u=arguments[3])&&null!==u||("string"==typeof s&&(c=s,s=null),"string"==typeof u&&(c=u,u=null),"number"==typeof u&&(s=u,u=null),r={flags:u,angle:s,align:c})):(C("The transform parameter of text() with a Matrix value"),p=i),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return f;var g,v="",E="number"==typeof r.lineHeightFactor?r.lineHeightFactor:Lt,w=f.internal.scaleFactor;function _(e){return e=e.split("\t").join(Array(r.TabLen||9).join(" ")),nt(e,u)}function T(e){for(var t,n=e.concat(),r=[],i=n.length;i--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function I(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,i,o=e.concat(),a=[],s=o.length;s--;)"string"==typeof(r=o.shift())?a.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(i=t(r[0],r[1],r[2]),a.push([i[0],i[1],i[2]]));n=a}return n}var R=!1,N=!0;if("string"==typeof e)R=!0;else if(Array.isArray(e)){var O=e.concat();a=[];for(var k,P=O.length;P--;)("string"!=typeof(k=O.shift())||Array.isArray(k)&&"string"!=typeof k[0])&&(N=!1);R=N}if(!1===R)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var B=te/f.internal.scaleFactor,L=B*(E-1);switch(r.baseline){case"bottom":n-=L;break;case"top":n+=B-L;break;case"hanging":n+=B-2*L;break;case"middle":n+=B/2-L}if((d=r.maxWidth||0)>0&&("string"==typeof e?e=f.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(f.splitTextToSize(t,d))}),[]))),o={text:e,x:t,y:n,options:r,mutex:{pdfEscape:nt,activeFontKey:ue,fonts:me,activeFontSize:te}},Te.publish("preProcessText",o),e=o.text,s=(r=o.options).angle,p instanceof Oe==0&&s&&"number"==typeof s){s*=Math.PI/180,0===r.rotationDirection&&(s=-s),b===y&&(s=-s);var D=Math.cos(s),U=Math.sin(s);p=new Oe(D,U,-U,D,0,0)}else s&&s instanceof Oe&&(p=s);b!==y||p||(p=Pe),void 0!==(l=r.charSpace||Xt)&&(v+=S(x(l))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(h=r.horizontalScale)&&(v+=S(100*h)+" Tz\n"),r.lang;var M=-1,F=void 0!==r.renderingMode?r.renderingMode:r.stroke,j=f.internal.getCurrentPageInfo().pageContext;switch(F){case 0:case!1:case"fill":M=0;break;case 1:case!0:case"stroke":M=1;break;case 2:case"fillThenStroke":M=2;break;case 3:case"invisible":M=3;break;case 4:case"fillAndAddForClipping":M=4;break;case 5:case"strokeAndAddPathForClipping":M=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":M=6;break;case 7:case"addToPathForClipping":M=7}var Q=void 0!==j.usedRenderingMode?j.usedRenderingMode:-1;-1!==M?v+=M+" Tr\n":-1!==Q&&(v+="0 Tr\n"),-1!==M&&(j.usedRenderingMode=M),c=r.align||"left";var V,H=te*E,z=f.internal.pageSize.getWidth(),K=me[ue];l=r.charSpace||Xt,d=r.maxWidth||0,u=Object.assign({autoencode:!0,noBOM:!0},r.flags);var G=[],W=function(e){return f.getStringUnitWidth(e,{font:K,charSpace:l,fontSize:te,doKerning:!1})*te/w};if("[object Array]"===Object.prototype.toString.call(e)){var q;a=T(e),"left"!==c&&(V=a.map(W));var Y,X=0;if("right"===c){t-=V[0],e=[],P=a.length;for(var Z=0;Z<P;Z++)0===Z?(Y=Vt(t),q=Ht(n)):(Y=x(X-V[Z]),q=-H),e.push([a[Z],Y,q]),X=V[Z]}else if("center"===c){t-=V[0]/2,e=[],P=a.length;for(var $=0;$<P;$++)0===$?(Y=Vt(t),q=Ht(n)):(Y=x((X-V[$])/2),q=-H),e.push([a[$],Y,q]),X=V[$]}else if("left"===c){e=[],P=a.length;for(var ee=0;ee<P;ee++)e.push(a[ee])}else if("justify"===c&&"Identity-H"===K.encoding){e=[],P=a.length,d=0!==d?d:z;for(var ne=0,re=0;re<P;re++)if(q=0===re?Ht(n):-H,Y=0===re?Vt(t):ne,re<P-1){var oe=x((d-V[re])/(a[re].split(" ").length-1)),ae=a[re].split(" ");e.push([ae[0]+" ",Y,q]),ne=0;for(var se=1;se<ae.length;se++){var ce=(W(ae[se-1]+" "+ae[se])-W(ae[se]))*w+oe;se==ae.length-1?e.push([ae[se],ce,0]):e.push([ae[se]+" ",ce,0]),ne-=ce}}else e.push([a[re],Y,q]);e.push(["",ne,0])}else{if("justify"!==c)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],P=a.length,d=0!==d?d:z,re=0;re<P;re++)q=0===re?Ht(n):-H,Y=0===re?Vt(t):0,re<P-1?G.push(S(x((d-V[re])/(a[re].split(" ").length-1)))):G.push(0),e.push([a[re],Y,q])}}!0===("boolean"==typeof r.R2L?r.R2L:ie)&&(e=I(e,(function(e,t,n){return[e.split("").reverse().join(""),t,n]}))),o={text:e,x:t,y:n,options:r,mutex:{pdfEscape:nt,activeFontKey:ue,fonts:me,activeFontSize:te}},Te.publish("postProcessText",o),e=o.text,g=o.mutex.isHex||!1;var le=me[ue].encoding;"WinAnsiEncoding"!==le&&"StandardEncoding"!==le||(e=I(e,(function(e,t,n){return[_(e),t,n]}))),a=T(e),e=[];for(var de,Ae,he,pe=Array.isArray(a[0])?1:0,fe="",ge=function(e,t,n){var i="";return n instanceof Oe?(n="number"==typeof r.angle?ke(n,new Oe(1,0,0,1,e,t)):ke(new Oe(1,0,0,1,e,t),n),b===y&&(n=ke(new Oe(1,0,0,-1,0,0),n)),i=n.join(" ")+" Tm\n"):i=S(e)+" "+S(t)+" Td\n",i},ve=0;ve<a.length;ve++){switch(fe="",pe){case 1:he=(g?"<":"(")+a[ve][0]+(g?">":")"),de=parseFloat(a[ve][1]),Ae=parseFloat(a[ve][2]);break;case 0:he=(g?"<":"(")+a[ve]+(g?">":")"),de=Vt(t),Ae=Ht(n)}void 0!==G&&void 0!==G[ve]&&(fe=G[ve]+" Tw\n"),0===ve?e.push(fe+ge(de,Ae,p)+he):0===pe?e.push(fe+he):1===pe&&e.push(fe+ge(de,Ae,p)+he)}e=0===pe?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var ye="BT\n/";return ye+=ue+" "+te+" Tf\n",ye+=S(te*E)+" TL\n",ye+=qt+"\n",ye+=v,ye+=e,J(ye+="ET"),A[ue]=!0,f};var wt=h.__private__.clip=h.clip=function(e){return J("evenodd"===e?"W*":"W"),this};h.clipEvenOdd=function(){return wt("evenodd")},h.__private__.discardPath=h.discardPath=function(){return J("n"),this};var _t=h.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(e){return _t(e)&&(l=e),this};var St=h.__private__.getStyle=h.getStyle=function(e){var t=l;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Ct=h.close=function(){return J("h"),this};h.stroke=function(){return J("S"),this},h.fill=function(e){return Tt("f",e),this},h.fillEvenOdd=function(e){return Tt("f*",e),this},h.fillStroke=function(e){return Tt("B",e),this},h.fillStrokeEvenOdd=function(e){return Tt("B*",e),this};var Tt=function(e,t){"object"===(0,IT.A)(t)?xt(t,e):J(e)},It=function(e){null===e||b===y&&void 0===e||(e=St(e),J(e))};function Rt(e,t,n,r,i){var o=new nR(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,i||this.matrix);o.stream=this.stream;var a=e+"$$"+this.cloneIndex+++"$$";return Be(a,o),o}var xt=function(e,t){var n=be[e.key],r=ye[n];if(r instanceof tR)J("q"),J(Nt(t)),r.gState&&h.setGState(r.gState),J(e.matrix.toString()+" cm"),J("/"+n+" sh"),J("Q");else if(r instanceof nR){var i=new Oe(1,0,0,-1,0,ln());e.matrix&&(i=i.multiply(e.matrix||Pe),n=Rt.call(r,e.key,e.boundingBox,e.xStep,e.yStep,i).id),J("q"),J("/Pattern cs"),J("/"+n+" scn"),r.gState&&h.setGState(r.gState),J(t),J("Q")}},Nt=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ot=h.moveTo=function(e,t){return J(S(x(e))+" "+S(N(t))+" m"),this},kt=h.lineTo=function(e,t){return J(S(x(e))+" "+S(N(t))+" l"),this},Pt=h.curveTo=function(e,t,n,r,i,o){return J([S(x(e)),S(N(t)),S(x(n)),S(N(r)),S(x(i)),S(N(o)),"c"].join(" ")),this};h.__private__.line=h.line=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!_t(i))throw new Error("Invalid arguments passed to jsPDF.line");return b===v?this.lines([[n-e,r-t]],e,t,[1,1],i||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},h.__private__.lines=h.lines=function(e,t,n,r,i,o){var a,s,c,l,d,u,A,h,p,f,m,g;if("number"==typeof e&&(g=n,n=t,t=e,e=g),r=r||[1,1],o=o||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!_t(i)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(Ot(t,n),a=r[0],s=r[1],l=e.length,f=t,m=n,c=0;c<l;c++)2===(d=e[c]).length?(f=d[0]*a+f,m=d[1]*s+m,kt(f,m)):(u=d[0]*a+f,A=d[1]*s+m,h=d[2]*a+f,p=d[3]*s+m,f=d[4]*a+f,m=d[5]*s+m,Pt(u,A,h,p,f,m));return o&&Ct(),It(i),this},h.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":Ot(r[0],r[1]);break;case"l":kt(r[0],r[1]);break;case"c":Pt.apply(this,r);break;case"h":Ct()}}return this},h.__private__.rect=h.rect=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!_t(i))throw new Error("Invalid arguments passed to jsPDF.rect");return b===v&&(r=-r),J([S(x(e)),S(N(t)),S(x(n)),S(x(r)),"re"].join(" ")),It(i),this},h.__private__.triangle=h.triangle=function(e,t,n,r,i,o,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o)||!_t(a))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[i-n,o-r],[e-i,t-o]],e,t,[1,1],a,!0),this},h.__private__.roundedRect=h.roundedRect=function(e,t,n,r,i,o,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o)||!_t(a))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),o=Math.min(o,.5*r),this.lines([[n-2*i,0],[i*s,0,i,o-o*s,i,o],[0,r-2*o],[0,o*s,-i*s,o,-i,o],[2*i-n,0],[-i*s,0,-i,-o*s,-i,-o],[0,2*o-r],[0,-o*s,i*s,-o,i,-o]],e+i,t,[1,1],a,!0),this},h.__private__.ellipse=h.ellipse=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!_t(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*r;return Ot(e+n,t),Pt(e+n,t-a,e+o,t-r,e,t-r),Pt(e-o,t-r,e-n,t-a,e-n,t),Pt(e-n,t+a,e-o,t+r,e,t+r),Pt(e+o,t+r,e+n,t+a,e+n,t),It(i),this},h.__private__.circle=h.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!_t(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},h.setFont=function(e,t,n){return n&&(t=_(t,n)),ue=ct(e,t,{disableWarning:!1}),this};var Bt=h.__private__.getFont=h.getFont=function(){return me[ct.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var e,t,n={};for(e in ge)if(ge.hasOwnProperty(e))for(t in n[e]=[],ge[e])ge[e].hasOwnProperty(t)&&n[e].push(t);return n},h.addFont=function(e,t,n,r,i){var o=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==o.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==o.indexOf(arguments[3])&&(n=_(n,r)),tt.call(this,e,t,n,i=i||"Identity-H")};var Lt,Dt=e.lineWidth||.200025,Ut=h.__private__.getLineWidth=h.getLineWidth=function(){return Dt},Mt=h.__private__.setLineWidth=h.setLineWidth=function(e){return Dt=e,J(S(x(e))+" w"),this};h.__private__.setLineDash=rR.API.setLineDash=rR.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map((function(e){return S(x(e))})).join(" "),t=S(x(t)),J("["+e+"] "+t+" d"),this};var Ft=h.__private__.getLineHeight=h.getLineHeight=function(){return te*Lt};h.__private__.getLineHeight=h.getLineHeight=function(){return te*Lt};var jt=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Lt=e),this},Qt=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Lt};jt(e.lineHeight);var Vt=h.__private__.getHorizontalCoordinate=function(e){return x(e)},Ht=h.__private__.getVerticalCoordinate=function(e){return b===y?e:Ce[F].mediaBox.topRightY-Ce[F].mediaBox.bottomLeftY-x(e)},zt=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(e){return S(Vt(e))},Kt=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(e){return S(Ht(e))},Gt=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return Qe(Gt)},h.__private__.setStrokeColor=h.setDrawColor=function(e,t,n,r){return Gt=Ve({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),J(Gt),this};var Wt=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return Qe(Wt)},h.__private__.setFillColor=h.setFillColor=function(e,t,n,r){return Wt=Ve({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),J(Wt),this};var qt=e.textColor||"0 g",Yt=h.__private__.getTextColor=h.getTextColor=function(){return Qe(qt)};h.__private__.setTextColor=h.setTextColor=function(e,t,n,r){return qt=Ve({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var Xt=e.charSpace,Jt=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Xt||0)};h.__private__.setCharSpace=h.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xt=e,this};var Zt=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(e){var t=h.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zt=t,J(t+" J"),this};var $t=0;h.__private__.setLineJoin=h.setLineJoin=function(e){var t=h.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $t=t,J(t+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(S(x(e))+" M"),this},h.GState=$I,h.setGState=function(e){(e="string"==typeof e?Ee[we[e]]:en(null,e)).equals(_e)||(J("/"+e.id+" gs"),_e=e)};var en=function(e,t){if(!e||!we[e]){var n=!1;for(var r in Ee)if(Ee.hasOwnProperty(r)&&Ee[r].equals(t)){n=!0;break}if(n)t=Ee[r];else{var i="GS"+(Object.keys(Ee).length+1).toString(10);Ee[i]=t,t.id=i}return e&&(we[e]=t.id),Te.publish("addGState",t),t}};h.addGState=function(e,t){return en(e,t),this},h.saveGraphicsState=function(){return J("q"),ve.push({key:ue,size:te,color:qt}),this},h.restoreGraphicsState=function(){J("Q");var e=ve.pop();return ue=e.key,te=e.size,qt=e.color,_e=null,this},h.setCurrentTransformationMatrix=function(e){return J(e.toString()+" cm"),this},h.comment=function(e){return J("#"+e),this};var tn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(e){i=e.toString()}}),this},nn=function(e,t,n,r){tn.call(this,e,t),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var o=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(e){isNaN(e)||(o=parseFloat(e))}}),this},rn=function(){this.page=Se,this.currentPage=F,this.pages=W.slice(0),this.pagesContext=Ce.slice(0),this.x=he,this.y=pe,this.matrix=fe,this.width=sn(F),this.height=ln(F),this.outputDestination=Y,this.id="",this.objectNumber=-1};rn.prototype.restore=function(){Se=this.page,F=this.currentPage,Ce=this.pagesContext,W=this.pages,he=this.x,pe=this.y,fe=this.matrix,cn(F,this.width),dn(F,this.height),Y=this.outputDestination};var on=function(e,t,n,r,i){Ne.push(new rn),Se=F=0,W=[],he=e,pe=t,fe=i,rt([n,r])};for(var an in h.beginFormObject=function(e,t,n,r,i){return on(e,t,n,r,i),this},h.endFormObject=function(e){return function(e){if(xe[e])Ne.pop().restore();else{var t=new rn,n="Xo"+(Object.keys(Re).length+1).toString(10);t.id=n,xe[e]=n,Re[n]=t,Te.publish("addFormObject",t),Ne.pop().restore()}}(e),this},h.doFormObject=function(e,t){var n=Re[xe[e]];return J("q"),J(t.toString()+" cm"),J("/"+n.id+" Do"),J("Q"),this},h.getFormObject=function(e){var t=Re[xe[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},h.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(kI(ft(pt()),e),"function"==typeof kI.unload&&SI.setTimeout&&setTimeout(kI.unload,911),this):new Promise((function(t,n){try{var r=kI(ft(pt()),e);"function"==typeof kI.unload&&SI.setTimeout&&setTimeout(kI.unload,911),t(r)}catch(e){n(e.message)}}))},rR.API)rR.API.hasOwnProperty(an)&&("events"===an&&rR.API.events.length?function(e,t){var n,r,i;for(i=t.length-1;-1!==i;i--)n=t[i][0],r=t[i][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(Te,rR.API.events):h[an]=rR.API[an]);var sn=h.getPageWidth=function(e){return(Ce[e=e||F].mediaBox.topRightX-Ce[e].mediaBox.bottomLeftX)/Ae},cn=h.setPageWidth=function(e,t){Ce[e].mediaBox.topRightX=t*Ae+Ce[e].mediaBox.bottomLeftX},ln=h.getPageHeight=function(e){return(Ce[e=e||F].mediaBox.topRightY-Ce[e].mediaBox.bottomLeftY)/Ae},dn=h.setPageHeight=function(e,t){Ce[e].mediaBox.topRightY=t*Ae+Ce[e].mediaBox.bottomLeftY};return h.internal={pdfEscape:nt,getStyle:St,getFont:Bt,getFontSize:re,getCharSpace:Jt,getTextColor:Yt,getLineHeight:Ft,getLineHeightFactor:Qt,getLineWidth:Ut,write:Z,getHorizontalCoordinate:Vt,getVerticalCoordinate:Ht,getCoordinateString:zt,getVerticalCoordinateString:Kt,collections:{},newObject:Le,newAdditionalObject:Me,newObjectDeferred:De,newObjectDeferredBegin:Ue,getFilters:He,putStream:ze,events:Te,scaleFactor:Ae,pageSize:{getWidth:function(){return sn(F)},setWidth:function(e){cn(F,e)},getHeight:function(){return ln(F)},setHeight:function(e){dn(F,e)}},encryptionOptions:d,encryption:vt,getEncryptor:function(e){return null!==d?vt.encryptor(e,0):function(e){return e}},output:mt,getNumberOfPages:st,pages:W,out:J,f2:I,f3:R,getPageInfo:yt,getPageInfoByObjId:bt,getCurrentPageInfo:Et,getPDFVersion:f,Point:tn,Rectangle:nn,Matrix:Oe,hasHotfix:gt},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return sn(F)},set:function(e){cn(F,e)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return ln(F)},set:function(e){dn(F,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ee.length;t<n;t++){var r=tt.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===u&&(A[r]=!0);var i=e[t][0].split("-");et({id:r,fontName:i[0],fontStyle:i[1]||""})}Te.publish("addFonts",{fonts:me,dictionary:ge})}.call(h,ee),ue="F1",it(i,n),Te.publish("initialized"),h}XI.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},XI.prototype.toHexString=function(e){return e.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},XI.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},XI.prototype.processOwnerPassword=function(e,t){return qI(KI(t).substr(0,5),e)},XI.prototype.encryptor=function(e,t){var n=KI(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return qI(n,e)}},$I.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,IT.A)(e)!==(0,IT.A)(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return 0===r},rR.API={events:[]},rR.version="3.0.1";var iR=rR.API,oR=1,aR=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},sR=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},cR=function(e){return e.toFixed(2)},lR=function(e){return e.toFixed(5)};iR.__acroform__={};var dR=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},uR=function(e){return e*oR},AR=function(e){var t=new xR,n=HR.internal.getHeight(e)||0,r=HR.internal.getWidth(e)||0;return t.BBox=[0,0,Number(cR(r)),Number(cR(n))],t},hR=iR.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},pR=iR.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},fR=iR.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},mR=iR.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return fR(e,t-1)},gR=iR.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return hR(e,t-1)},vR=iR.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return pR(e,t-1)},yR=iR.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],o=e[1],a=e[2],s=e[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(o+s)||0,c.upperRight_X=n(i+a)||0,c.upperRight_Y=r(o)||0,[Number(cR(c.lowerLeft_X)),Number(cR(c.lowerLeft_Y)),Number(cR(c.upperRight_X)),Number(cR(c.upperRight_Y))]},bR=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=ER(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+cR(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=AR(e);return o.scope=e.scope,o.stream=t.join("\n"),o}},ER=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map((function(e){return e.split("\n")})):i.map((function(e){return[e]}));var o=n,a=HR.internal.getHeight(e)||0;a=a<0?-a:a;var s=HR.internal.getWidth(e)||0;s=s<0?-s:s;var c=function(t,n,r){if(t+1<i.length){var o=n+" "+i[t+1][0];return wR(o,e,r).width<=s-4}return!1};o++;e:for(;o>0;){t="",o--;var l,d,u=wR("3",e,o).height,A=e.multiline?a-o:(a-u)/2,h=A+=2,p=0,f=0,m=0;if(o<=0){t="(...) Tj\n",t+="% Width of Text: "+wR(t,e,o=12).width+", FieldWidth:"+s+"\n";break}for(var g="",v=0,y=0;y<i.length;y++)if(i.hasOwnProperty(y)){var b=!1;if(1!==i[y].length&&m!==i[y].length-1){if((u+2)*(v+2)+2>a)continue e;g+=i[y][m],b=!0,f=y,y--}else{g=" "==(g+=i[y][m]+" ").substr(g.length-1)?g.substr(0,g.length-1):g;var E=parseInt(y),w=c(E,g,o),_=y>=i.length-1;if(w&&!_){g+=" ",m=0;continue}if(w||_){if(_)f=E;else if(e.multiline&&(u+2)*(v+2)+2>a)continue e}else{if(!e.multiline)continue e;if((u+2)*(v+2)+2>a)continue e;f=E}}for(var S="",C=p;C<=f;C++){var T=i[C];if(e.multiline){if(C===f){S+=T[m]+" ",m=(m+1)%T.length;continue}if(C===p){S+=T[T.length-1]+" ";continue}}S+=T[0]+" "}switch(S=" "==S.substr(S.length-1)?S.substr(0,S.length-1):S,d=wR(S,e,o).width,e.textAlign){case"right":l=s-d-2;break;case"center":l=(s-d)/2;break;default:l=2}t+=cR(l)+" "+cR(h)+" Td\n",t+="("+aR(S)+") Tj\n",t+=-cR(l)+" 0 Td\n",h=-(o+2),d=0,p=b?f:f+1,v++,g=""}break}return r.text=t,r.fontSize=o,r},wR=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},_R={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},SR=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find((function(e){return e.type===n.type&&e.object===n.object}))&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},CR=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(OR.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(_R)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");oR=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new NR,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){!function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0}(e)})),e.internal.events.subscribe("buildDocument",(function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&SR(r,e)}}(e)})),e.internal.events.subscribe("putCatalog",(function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)})),e.internal.events.subscribe("postPutPages",(function(t){!function(e,t){var n=!e;for(var r in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(r)){var i=e[r],o=[],a=i.Rect;if(i.Rect&&(i.Rect=yR(i.Rect,t)),t.internal.newObjectDeferredBegin(i.objId,!0),i.DA=HR.createDefaultAppearanceStream(i),"object"===(0,IT.A)(i)&&"function"==typeof i.getKeyValueListForStream&&(o=i.getKeyValueListForStream()),i.Rect=a,i.hasAppearanceStream&&!i.appearanceStreamContent){var s=bR(i);o.push({key:"AP",value:"<</N "+s+">>"}),t.internal.acroformPlugin.xForms.push(s)}if(i.appearanceStreamContent){var c="";for(var l in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(l)){var d=i.appearanceStreamContent[l];if(c+="/"+l+" ",c+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var r in d)if(d.hasOwnProperty(r)){var u=d[r];"function"==typeof u&&(u=u.call(t,i)),c+="/"+r+" "+u+" ",t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u)}}else"function"==typeof(u=d)&&(u=u.call(t,i)),c+="/"+r+" "+u,t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u);c+=">>"}o.push({key:"AP",value:"<<\n"+c+">>"})}t.internal.putStream({additionalKeyValues:o,objectId:i.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),"object"===(0,IT.A)(i)&&"function"==typeof i.putStream&&i.putStream(),delete e[r]}}(t.internal.acroformPlugin.xForms,t)}(t,e)})),e.internal.acroformPlugin.isInitialized=!0}},TR=iR.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(e){return e};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(0!==o&&(i+=" "),(0,IT.A)(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":"/"!==e[o].substr(0,1)?(void 0!==t&&n&&(r=n.internal.getEncryptor(t)),i+="("+aR(r(e[o].toString()))+")"):i+=e[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},IR=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+aR(r(e))+")"},RR=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};RR.prototype.toString=function(){return this.objId+" 0 R"},RR.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},RR.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)}));for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:TR(i,this.objId,this.scope)}):i instanceof RR?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&e.push({key:r,value:i}))}return e};var xR=function(){RR.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};dR(xR,RR);var NR=function(){RR.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+aR(t(e))+")"}},set:function(t){e=t}})};dR(NR,RR);var OR=function e(){RR.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(t,3))},set:function(e){!0===Boolean(e)?this.F=gR(t,3):this.F=vR(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof FR)return;o="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+aR(t(o))+")"},set:function(e){o=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(e){a=e}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(e){c=e}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===l?50/oR:l},set:function(e){l=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof FR||this instanceof QR))return IR(u,this.objId,this.scope)},set:function(e){e=e.toString(),u=e}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof DR==0?IR(A,this.objId,this.scope):A},set:function(e){e=e.toString(),A=this instanceof DR==0?"("===e.substr(0,1)?sR(e.substr(1,e.length-2)):sR(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof DR==1?sR(A.substr(1,A.length-1)):A},set:function(e){e=e.toString(),A=this instanceof DR==1?"/"+e:e}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof DR==0?IR(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof DR==0?"("===e.substr(0,1)?sR(e.substr(1,e.length-2)):sR(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof DR==1?sR(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof DR==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(e){e=Boolean(e),f=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,1):this.Ff=vR(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,2):this.Ff=vR(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,3):this.Ff=vR(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==m)return m},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');m=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(m){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:m=2;break;case"center":case 1:m=1;break;default:m=0}}})};dR(OR,RR);var kR=function(){OR.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return TR(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,i=[];r=t.exec(e);)i.push(r[n]);return i}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,18):this.Ff=vR(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=gR(this.Ff,19):this.Ff=vR(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=gR(this.Ff,20),t.sort()):this.Ff=vR(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,22):this.Ff=vR(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,23):this.Ff=vR(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,27):this.Ff=vR(this.Ff,27)}}),this.hasAppearanceStream=!1};dR(kR,OR);var PR=function(){kR.call(this),this.fontName="helvetica",this.combo=!1};dR(PR,kR);var BR=function(){PR.call(this),this.combo=!0};dR(BR,PR);var LR=function(){BR.call(this),this.edit=!0};dR(LR,BR);var DR=function(){OR.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,15):this.Ff=vR(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,16):this.Ff=vR(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,17):this.Ff=vR(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,26):this.Ff=vR(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+aR(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,IT.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};dR(DR,OR);var UR=function(){DR.call(this),this.pushButton=!0};dR(UR,DR);var MR=function(){DR.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};dR(MR,DR);var FR=function(){var e,t;OR.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),r)n.push("/"+t+" ("+aR(e(r[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,IT.A)(e)&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){"string"==typeof e&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=HR.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};dR(FR,OR),MR.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},MR.prototype.createOption=function(e){var t=new FR;return t.Parent=this,t.optionName=e,this.Kids.push(t),zR.call(this.scope,t),t};var jR=function(){DR.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=HR.CheckBox.createAppearanceStream()};dR(jR,DR);var QR=function(){OR.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,13):this.Ff=vR(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,21):this.Ff=vR(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,23):this.Ff=vR(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,24):this.Ff=vR(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,25):this.Ff=vR(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,26):this.Ff=vR(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};dR(QR,OR);var VR=function(){QR.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(mR(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=gR(this.Ff,14):this.Ff=vR(this.Ff,14)}}),this.password=!0};dR(VR,QR);var HR={CheckBox:{createAppearanceStream:function(){return{N:{On:HR.CheckBox.YesNormal},D:{On:HR.CheckBox.YesPushDown,Off:HR.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=AR(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=ER(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+cR(HR.internal.getWidth(e))+" "+cR(HR.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+cR(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=AR(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],o=HR.internal.getHeight(e),a=HR.internal.getWidth(e),s=ER(e,e.caption);return i.push("1 g"),i.push("0 0 "+cR(a)+" "+cR(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+cR(a-1)+" "+cR(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+cR(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=AR(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+cR(HR.internal.getWidth(e))+" "+cR(HR.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:HR.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=HR.RadioButton.Circle.YesNormal,t.D[e]=HR.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=AR(e);t.scope=e.scope;var n=[],r=HR.internal.getWidth(e)<=HR.internal.getHeight(e)?HR.internal.getWidth(e)/4:HR.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=HR.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+lR(HR.internal.getWidth(e)/2)+" "+lR(HR.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=AR(e);t.scope=e.scope;var n=[],r=HR.internal.getWidth(e)<=HR.internal.getHeight(e)?HR.internal.getWidth(e)/4:HR.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*HR.internal.Bezier_C).toFixed(5)),a=Number((r*HR.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+lR(HR.internal.getWidth(e)/2)+" "+lR(HR.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+lR(HR.internal.getWidth(e)/2)+" "+lR(HR.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=AR(e);t.scope=e.scope;var n=[],r=HR.internal.getWidth(e)<=HR.internal.getHeight(e)?HR.internal.getWidth(e)/4:HR.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*HR.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+lR(HR.internal.getWidth(e)/2)+" "+lR(HR.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:HR.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=HR.RadioButton.Cross.YesNormal,t.D[e]=HR.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=AR(e);t.scope=e.scope;var n=[],r=HR.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+cR(HR.internal.getWidth(e)-2)+" "+cR(HR.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(cR(r.x1.x)+" "+cR(r.x1.y)+" m"),n.push(cR(r.x2.x)+" "+cR(r.x2.y)+" l"),n.push(cR(r.x4.x)+" "+cR(r.x4.y)+" m"),n.push(cR(r.x3.x)+" "+cR(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=AR(e);t.scope=e.scope;var n=HR.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+cR(HR.internal.getWidth(e))+" "+cR(HR.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+cR(HR.internal.getWidth(e)-2)+" "+cR(HR.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(cR(n.x1.x)+" "+cR(n.x1.y)+" m"),r.push(cR(n.x2.x)+" "+cR(n.x2.y)+" l"),r.push(cR(n.x4.x)+" "+cR(n.x4.y)+" m"),r.push(cR(n.x3.x)+" "+cR(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=AR(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+cR(HR.internal.getWidth(e))+" "+cR(HR.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};HR.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=HR.internal.getWidth(e),n=HR.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},HR.internal.getWidth=function(e){var t=0;return"object"===(0,IT.A)(e)&&(t=uR(e.Rect[2])),t},HR.internal.getHeight=function(e){var t=0;return"object"===(0,IT.A)(e)&&(t=uR(e.Rect[3])),t};var zR=iR.addField=function(e){if(CR(this,e),!(e instanceof OR))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};iR.AcroFormChoiceField=kR,iR.AcroFormListBox=PR,iR.AcroFormComboBox=BR,iR.AcroFormEditBox=LR,iR.AcroFormButton=DR,iR.AcroFormPushButton=UR,iR.AcroFormRadioButton=MR,iR.AcroFormCheckBox=jR,iR.AcroFormTextField=QR,iR.AcroFormPasswordField=VR,iR.AcroFormAppearance=HR,iR.AcroForm={ChoiceField:kR,ListBox:PR,ComboBox:BR,EditBox:LR,Button:DR,PushButton:UR,RadioButton:MR,CheckBox:jR,TextField:QR,PasswordField:VR,Appearance:HR},rR.AcroForm={ChoiceField:kR,ListBox:PR,ComboBox:BR,EditBox:LR,Button:DR,PushButton:UR,RadioButton:MR,CheckBox:jR,TextField:QR,PasswordField:VR,Appearance:HR};rR.AcroForm;function KR(e){return e.reduce((function(e,t,n){return e[t]=n,e}),{})}!function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(e,r){var i,o,a,s,c,l=t;if("RGBA"===(r=r||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(w(e))for(c in n)for(a=n[c],i=0;i<a.length;i+=1){for(s=!0,o=0;o<a[i].length;o+=1)if(void 0!==a[i][o]&&a[i][o]!==e[o]){s=!1;break}if(!0===s){l=c;break}}else for(c in n)for(a=n[c],i=0;i<a.length;i+=1){for(s=!0,o=0;o<a[i].length;o+=1)if(void 0!==a[i][o]&&a[i][o]!==e.charCodeAt(o)){s=!1;break}if(!0===s){l=c;break}}return l===t&&r!==t&&(l=r),l},i=function e(t){for(var n=this.internal.write,r=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:t.width}),o.push({key:"Height",value:t.height}),t.colorSpace===m.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===m.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&o.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var a="",s=0,c=t.transparency.length;s<c;s++)a+=t.transparency[s]+" "+t.transparency[s]+" ";o.push({key:"Mask",value:"["+a+"]"})}void 0!==t.sMask&&o.push({key:"SMask",value:t.objectId+1+" 0 R"});var l=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:o,alreadyAppliedFilters:l,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var d="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,u={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:d,data:t.sMask};"filter"in t&&(u.filter=t.filter),e.call(this,u)}if(t.colorSpace===m.INDEXED){var A=this.internal.newObject();r({data:S(new Uint8Array(t.palette)),objectId:A}),n("endobj")}},o=function(){var e=this.internal.collections.addImage_images;for(var t in e)i.call(this,e[t])},a=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var r in t)n("/I"+(e=t[r]).index,e.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var e=this.internal.collections.addImage_images;return s.call(this),e},l=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(t){return"function"==typeof e["process"+t.toUpperCase()]},u=function(e){return"object"===(0,IT.A)(e)&&1===e.nodeType},A=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return NI(unescape(r).split("base64,").pop());var i=e.loadFile(r,!0);if(void 0!==i)return i}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var o;switch(n){case"PNG":o="image/png";break;case"WEBP":o="image/webp";break;default:o="image/jpeg"}return NI(t.toDataURL(o,1).split("base64,").pop())}},h=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},p=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},f=function(e,t,n,r,i,o){var a=p.call(this,n,r,i),s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=c.call(this);if(n=a[0],r=a[1],d[i.index]=i,o){o*=Math.PI/180;var u=Math.cos(o),A=Math.sin(o),h=function(e){return e.toFixed(4)},f=[h(u),h(A),h(-1*A),h(u),0,0,"cm"]}this.internal.write("q"),o?(this.internal.write([1,"0","0",1,s(e),l(t+r),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([s(n),"0","0",s(r),"0","0","cm"].join(" "))):this.internal.write([s(n),"0","0",s(r),s(e),l(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},m=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(w(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},y=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},b=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null},E=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return E()&&e instanceof ArrayBuffer};var w=e.__addimage__.isArrayBufferView=function(e){return E()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},_=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},S=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=w(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,n,r,i,o,a,c,l,d;if("number"==typeof arguments[1]?(n=t,r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[4],c=arguments[5],l=arguments[6],d=arguments[7]):(n=arguments[1],r=arguments[2],i=arguments[3],o=arguments[4],a=arguments[5],c=arguments[6],l=arguments[7],d=arguments[8]),"object"===(0,IT.A)(e=arguments[0])&&!u(e)&&"imageData"in e){var A=e;e=A.imageData,n=A.format||n||t,r=A.x||r||0,i=A.y||i||0,o=A.w||A.width||o,a=A.h||A.height||a,c=A.alias||c,l=A.compression||l,d=A.rotation||A.angle||d}var h=this.internal.getFilters();if(void 0===l&&-1!==h.indexOf("FlateEncode")&&(l="SLOW"),isNaN(r)||isNaN(i))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var p=C.call(this,e,n,c,l);return f.call(this,r,i,o,a,p,d),this};var C=function(n,i,o,a){var s,c,p;if("string"==typeof n&&r(n)===t){n=unescape(n);var f=T(n,!1);(""!==f||void 0!==(f=e.loadFile(n,!0)))&&(n=f)}if(u(n)&&(n=A(n,i)),i=r(n,i),!d(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if((null==(p=o)||0===p.length)&&(o=function(e){return"string"==typeof e||w(e)?v(e):w(e.data)?v(e.data):null}(n)),(s=h.call(this,o))||(E()&&(n instanceof Uint8Array||"RGBA"===i||(c=n,n=_(n))),s=this["process"+i.toUpperCase()](n,l.call(this),o,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:g.NONE}(a),c)),!s)throw new Error("An unknown error occurred whilst processing the image.");return s},T=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var n,r="";if("string"==typeof e){var i;n=null!==(i=b(e))&&void 0!==i?i:e;try{r=NI(n)}catch(e){if(t)throw y(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};e.getImageProperties=function(n){var i,o,a="";if(u(n)&&(n=A(n)),"string"==typeof n&&r(n)===t&&(""===(a=T(n,!1))&&(a=e.loadFile(n)||""),n=a),o=r(n),!d(o))throw new Error("addImage does not support files of type '"+o+"', please ensure that a plugin for '"+o+"' support is added.");if(!E()||n instanceof Uint8Array||(n=_(n)),!(i=this["process"+o.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return i.fileType=o,i}}(rR.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};rR.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,i,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getPageInfoByObjId(e.objId),c=e.pageContext.annotations,l=!1,d=0;d<c.length&&!l;d++)switch((n=c[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(0!=l){this.internal.write("/Annots [");for(var u=0;u<c.length;u++){n=c[u];var A=this.internal.pdfEscape,h=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(p.objId),g=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+o(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+A(m(n.contents))+")",i+=" /Popup "+f.objId+" 0 R",i+=" /P "+s.objId+" 0 R",i+=" /T ("+A(m(g))+") >>",p.content=i;var v=p.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+o(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+v,n.open&&(i+=" /Open true"),i+=" >>",f.content=i,this.internal.write(p.objId,"0 R",f.objId,"0 R");break;case"freetext":r="/Rect ["+o(n.bounds.x)+" "+a(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var y=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+A(h(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+y+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var b=this.annotations._nameMap[n.options.name];n.options.pageNumber=b.page,n.options.top=b.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+A(h(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var E=a(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+E+" "+n.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,i){var o=this.internal.getCurrentPageInfo(),a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:a(e),y:s(t),w:a(e+n),h:s(t+r)},options:i,type:"link"})},e.textWithLink=function(e,t,n,r){var i,o,a=this.getTextWidth(e),s=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){o=r.maxWidth;var c=this.splitTextToSize(e,o).length;i=Math.ceil(s*c)}else o=a,i=s;return this.text(e,t,n,r),n+=.2*s,"center"===r.align&&(t-=a/2),"right"===r.align&&(t-=a),this.link(t,n-s,o,i,r),a},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(rR.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},a=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},s=e.__arabicParser__.isArabicEndLetter=function(e){return a(e)&&o(e)&&t[e.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(e){return a(e)&&i.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return a(e)&&o(e)&&t[e.charCodeAt(0)].length>=1};var l=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return a(e)&&o(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return a(e)&&o(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return a(e)&&o(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,i="",o=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(o++,"number"==typeof(r=r[e.charCodeAt(t)])&&(i+=String.fromCharCode(r),r=n,o=0),t===e.length-1&&(r=n,i+=e.charAt(t-(o-1)),t-=o-1,o=0)):(r=n,i+=e.charAt(t-o),t-=o,o=0);return i};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var A=e.__arabicParser__.getCorrectForm=function(e,t,n){return a(e)?!1===o(e)?-1:!l(e)||!a(t)&&!a(n)||!a(n)&&s(t)||s(e)&&!a(t)||s(e)&&c(t)||s(e)&&s(t)?0:d(e)&&a(t)&&!s(t)&&a(n)&&l(n)?3:s(e)||!a(n)?1:2:-1},h=function(e){var n=0,r=0,i=0,o="",s="",c="",l=(e=e||"").split("\\s+"),d=[];for(n=0;n<l.length;n+=1){for(d.push(""),r=0;r<l[n].length;r+=1)o=l[n][r],s=l[n][r-1],c=l[n][r+1],a(o)?(i=A(o,s,c),d[n]+=-1!==i?String.fromCharCode(t[o.charCodeAt(0)][i]):o):d[n]+=o;d[n]=u(d[n])}return d.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([h(t[r][0]),t[r][1],t[r][2]]):n.push([h(t[r])]);e=n}else e=h(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(rR.API),rR.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}));return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(rR.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var o=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return o},set:function(e){o=e}});var a=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return a},set:function(e){a=e}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){r.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),i=t.font||this.getFont(),o=t.scaleFactor||this.internal.scaleFactor,a=0,s=0,c=0,l=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(l.splitTextToSize(t,d))}),[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)a<(c=this.getStringUnitWidth(e[u],{font:i})*n)&&(a=c);return 0!==a&&(s=e.length),{w:a/=o,h:Math.max((s*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/o,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var e;e=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var i=this.internal.__cell__.lastCell,a=this.internal.__cell__.padding,s=this.internal.__cell__.margins||t,c=this.internal.__cell__.tableHeaderRow,l=this.internal.__cell__.printHeaders;return void 0!==i.lineNumber&&(i.lineNumber===e.lineNumber?(e.x=(i.x||0)+(i.width||0),e.y=i.y||0):i.y+i.height+e.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=s.top,l&&c&&(this.printHeaderRow(e.lineNumber,!0),e.y+=c[0].height)):e.y=i.y+i.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-a,e.y+a,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+a,{align:"center",baseline:"top",maxWidth:e.width-a-a}):this.text(e.text,e.x+a,e.y+a,{align:"left",baseline:"top",maxWidth:e.width-a-a})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,c,l,d){if(r.call(this),!c)throw new Error("No data for PDF table.");var u,A,h,p,f=[],m=[],g=[],v={},y={},b=[],E=[],w=(d=d||{}).autoSize||!1,_=!1!==d.printHeaders,S=d.css&&void 0!==d.css["font-size"]?16*d.css["font-size"]:d.fontSize||12,C=d.margins||Object.assign({width:this.getPageWidth()},t),T="number"==typeof d.padding?d.padding:3,I=d.headerBackgroundColor||"#c8c8c8",R=d.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=_,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=S,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=R,this.setFontSize(S),null==l)m=f=Object.keys(c[0]),g=f.map((function(){return"left"}));else if(Array.isArray(l)&&"object"===(0,IT.A)(l[0]))for(f=l.map((function(e){return e.name})),m=l.map((function(e){return e.prompt||e.name||""})),g=l.map((function(e){return e.align||"left"})),u=0;u<l.length;u+=1)y[l[u].name]=l[u].width*(19.049976/25.4);else Array.isArray(l)&&"string"==typeof l[0]&&(m=f=l,g=f.map((function(){return"left"})));if(w||Array.isArray(l)&&"string"==typeof l[0])for(u=0;u<f.length;u+=1){for(v[p=f[u]]=c.map((function(e){return e[p]})),this.setFont(void 0,"bold"),b.push(this.getTextDimensions(m[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=v[p],this.setFont(void 0,"normal"),h=0;h<A.length;h+=1)b.push(this.getTextDimensions(A[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);y[p]=Math.max.apply(null,b)+T+T,b=[]}if(_){var x={};for(u=0;u<f.length;u+=1)x[f[u]]={},x[f[u]].text=m[u],x[f[u]].align=g[u];var N=s.call(this,x,y);E=f.map((function(t){return new o(e,n,y[t],N,x[t].text,void 0,x[t].align)})),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var O=l.reduce((function(e,t){return e[t.name]=t.align,e}),{});for(u=0;u<c.length;u+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:u,data:c[u]},this);var k=s.call(this,c[u],y);for(h=0;h<f.length;h+=1){var P=c[u][f[h]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:u,col:h,data:P},this),a.call(this,new o(e,n,y[f[h]],k,P,u+2,O[f[h]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var s=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(e).map((function(r){var i=e[r];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,t[r]-n-n)}),this).map((function(e){return this.getLineHeightFactor()*e.length*r/i+n+n}),this).reduce((function(e,t){return Math.max(e,t)}),0)};e.setTableHeaderRow=function(e){r.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var c=[],l=0;l<this.internal.__cell__.tableHeaderRow.length;l+=1){i=this.internal.__cell__.tableHeaderRow[l].clone(),t&&(i.y=this.internal.__cell__.margins.top||0,c.push(i)),i.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,i),this.setTextColor(d)}c.length>0&&this.setTableHeaderRow(c),this.setFont(void 0,"normal"),n=!1}}(rR.API);var GR={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},WR=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],qR=KR(WR),YR=[100,200,300,400,500,600,700,800,900],XR=KR(YR);function JR(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return GR[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),i=function(e){return"number"==typeof qR[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function ZR(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var $R={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ex={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function tx(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function nx(e){return e.trimLeft()}function rx(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function ix(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var ox,ax,sx,cx=["times"];!function(e){var t,n,r,i,o,a,s,c,l,d=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new c,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new a,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new a,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,c=this.internal.Matrix,l=new d}]);var u=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}});var o=0;Object.defineProperty(this,"posY",{get:function(){return o},set:function(e){isNaN(e)||(o=e)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),l.margin=t}});var a=!1;Object.defineProperty(this,"autoPaging",{get:function(){return a},set:function(e){a=e}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(e){s=e}});var c=[];Object.defineProperty(this,"pageBreaks",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(e){e instanceof d&&(l=e)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(e){l.path=e}});var u=[];Object.defineProperty(this,"ctxStack",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=A(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=A(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var h=null;function p(e,t){if(null===h){var n=function(e){var t=[];return Object.keys(e).forEach((function(n){e[n].forEach((function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))}))})),t}(e.getFontList());h=function(e){for(var t={},n=0;n<e.length;++n){var r=JR(e[n]),i=r.family,o=r.stretch,a=r.style,s=r.weight;t[i]=t[i]||{},t[i][o]=t[i][o]||{},t[i][o][a]=t[i][o][a]||{},t[i][o][a][s]=r}return t}(n.concat(t))}return h}var f=null;Object.defineProperty(this,"fontFaces",{get:function(){return f},set:function(e){h=null,f=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1];t[2];var r=t[3],i=t[4];t[5];var o=t[6],a=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===a?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===a?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var s=function(e){var t,n,r=[],i=e.trim();if(""===i)return cx;if(i in ex)return[ex[i]];for(;""!==i;){switch(n=null,t=(i=nx(i)).charAt(0)){case'"':case"'":n=rx(i.substring(1),t);break;default:n=ix(i)}if(null===n)return cx;if(r.push(n[0]),""!==(i=nx(n[1]))&&","!==i.charAt(0))return cx;i=i.replace(/^,/,"")}return r}(o);if(this.fontFaces){var c=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},$R,n.genericFontFamilies||{}),o=null,a=null,s=0;s<t.length;++s)if(i[(o=JR(t[s])).family]&&(o.family=i[o.family]),e.hasOwnProperty(o.family)){a=e[o.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+tx(o)+"' and default family '"+r+"'.");if(a=function(e,t){if(t[e])return t[e];var n=qR[e],r=n<=qR.normal?-1:1,i=ZR(t,WR,n,r);if(!i)throw new Error("Could not find a matching font-stretch value for "+e);return i}(o.stretch,a),a=function(e,t){if(t[e])return t[e];for(var n=GR[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(o.style,a),!(a=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=XR[e],r=ZR(t,YR,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(o.weight,a)))throw new Error("Failed to resolve a font for the rule '"+tx(o)+"'.");return a}(p(this.pdf,this.fontFaces),s.map((function(e){return{family:e,stretch:"normal",weight:r,style:n}})));this.pdf.setFont(c.ref.name,c.ref.style)}else{var l="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(l="bold"),"italic"===n&&(l+="italic"),0===l.length&&(l="normal");for(var d="",u={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},A=0;A<s.length;A++){if(void 0!==this.pdf.internal.getFont(s[A],l,{noFallback:!0,disableWarning:!0})){d=s[A];break}if("bolditalic"===l&&void 0!==this.pdf.internal.getFont(s[A],"bold",{noFallback:!0,disableWarning:!0}))d=s[A],l="bold";else if(void 0!==this.pdf.internal.getFont(s[A],"normal",{noFallback:!0,disableWarning:!0})){d=s[A],l="normal";break}}if(""===d)for(var h=0;h<s.length;h++)if(u[s[h]]){d=u[s[h]];break}d=""===d?"Times":d,this.pdf.setFont(d,l)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,U.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,U.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};u.prototype.setLineDash=function(e){this.lineDash=e},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){b.call(this,"fill",!1)},u.prototype.stroke=function(){b.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw TI.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(e,t)},u.prototype.closePath=function(){var e=new a(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,IT.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new a(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(e.x,e.y)},u.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw TI.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(n.x,n.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},u.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw TI.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new a(n,r)),o=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"qct",x1:o.x,y1:o.y,x:i.x,y:i.y}),this.ctx.lastPoint=new a(i.x,i.y)},u.prototype.bezierCurveTo=function(e,t,n,r,i,o){if(isNaN(i)||isNaN(o)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw TI.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new a(i,o)),c=this.ctx.transform.applyToPoint(new a(e,t)),l=this.ctx.transform.applyToPoint(new a(n,r));this.path.push({type:"bct",x1:c.x,y1:c.y,x2:l.x,y2:l.y,x:s.x,y:s.y}),this.ctx.lastPoint=new a(s.x,s.y)},u.prototype.arc=function(e,t,n,r,i,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i))throw TI.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new a(e,t));e=s.x,t=s.y;var c=this.ctx.transform.applyToPoint(new a(0,n)),l=this.ctx.transform.applyToPoint(new a(0,0));n=Math.sqrt(Math.pow(c.x-l.x,2)+Math.pow(c.y-l.y,2))}Math.abs(i-r)>=2*Math.PI&&(r=0,i=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:i,counterclockwise:o})},u.prototype.arcTo=function(e,t,n,r,i){throw new Error("arcTo not implemented.")},u.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw TI.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},u.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw TI.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},u.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw TI.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},u.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw TI.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},u.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},u.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(e){var t,n,r,i;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,i=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==o)t=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=parseFloat(o[4]);else{if(i=1,"string"==typeof e&&"#"!==e.charAt(0)){var a=new PI(e);e=a.ok?a.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:i,style:e}},h=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};u.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw TI.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!h.call(this)){var i=B(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;R.call(this,{text:e,x:t,y:n,scale:o,angle:i,align:this.textAlign,maxWidth:r})}},u.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw TI.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){r=isNaN(r)?void 0:r;var i=B(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;R.call(this,{text:e,x:t,y:n,scale:o,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:r})}},u.prototype.measureText=function(e){if("string"!=typeof e)throw TI.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),i=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:i*=Math.round(96*n/72*1e4)/1e4})},u.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw TI.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new c(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.rotate=function(e){if(isNaN(e))throw TI.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new c(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},u.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw TI.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new c(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.transform=function(e,t,n,r,i,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o))throw TI.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var a=new c(e,t,n,r,i,o);this.ctx.transform=this.ctx.transform.multiply(a)},u.prototype.setTransform=function(e,t,n,r,i,o){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,i=isNaN(i)?0:i,o=isNaN(o)?0:o,this.ctx.transform=new c(e,t,n,r,i,o)};var f=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(e,t,n,r,i,o,a,l,d){var u=this.pdf.getImageProperties(e),A=1,h=1,p=1,g=1;void 0!==r&&void 0!==l&&(p=l/r,g=d/i,A=u.width/r*l/r,h=u.height/i*d/i),void 0===o&&(o=t,a=n,t=0,n=0),void 0!==r&&void 0===l&&(l=r,d=i),void 0===r&&void 0===l&&(l=u.width,d=u.height);for(var b,w=this.ctx.transform.decompose(),_=B(w.rotate.shx),S=new c,C=(S=(S=(S=S.multiply(w.translate)).multiply(w.skew)).multiply(w.scale)).applyToRectangle(new s(o-t*p,a-n*g,r*A,i*h)),T=m.call(this,C),I=[],R=0;R<T.length;R+=1)-1===I.indexOf(T[R])&&I.push(T[R]);if(y(I),this.autoPaging)for(var x=I[0],N=I[I.length-1],O=x;O<N+1;O++){this.pdf.setPage(O);var k=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],P=1===O?this.posY+this.margin[0]:this.margin[0],L=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],D=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],U=1===O?0:L+(O-2)*D;if(0!==this.ctx.clip_path.length){var M=this.path;b=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(b,this.posX+this.margin[3],-U+P+this.ctx.prevPageLastElemOffset),E.call(this,"fill",!0),this.path=M}var F=JSON.parse(JSON.stringify(C));F=v([F],this.posX+this.margin[3],-U+P+this.ctx.prevPageLastElemOffset)[0];var j=(O>x||O<N)&&f.call(this);j&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],k,D,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",F.x,F.y,F.w,F.h,null,null,_),j&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",C.x,C.y,C.w,C.h,null,null,_)};var m=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+i)/n)+1);break;case"arc":r.push(Math.floor((e.y+i-e.radius)/n)+1),r.push(Math.floor((e.y+i+e.radius)/n)+1);break;case"qct":var o=L(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((o.y+i)/n)+1),r.push(Math.floor((o.y+o.h+i)/n)+1);break;case"bct":var a=D(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((a.y+i)/n)+1),r.push(Math.floor((a.y+a.h+i)/n)+1);break;case"rect":r.push(Math.floor((e.y+i)/n)+1),r.push(Math.floor((e.y+e.h+i)/n)+1)}for(var s=0;s<r.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<r[s];)g.call(this);return r},g=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,i=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=i,this.lineJoin=o},v=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},y=function(e){return e.sort((function(e,t){return e-t}))},b=function(e,t){for(var n,r,i=this.fillStyle,o=this.strokeStyle,a=this.lineCap,s=this.lineWidth,c=Math.abs(s*this.ctx.transform.scaleX),l=this.lineJoin,d=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),A=[],h=0;h<u.length;h++)if(void 0!==u[h].x)for(var p=m.call(this,u[h]),b=0;b<p.length;b+=1)-1===A.indexOf(p[b])&&A.push(p[b]);for(var w=0;w<A.length;w++)for(;this.pdf.internal.getNumberOfPages()<A[w];)g.call(this);if(y(A),this.autoPaging)for(var _=A[0],S=A[A.length-1],C=_;C<S+1;C++){this.pdf.setPage(C),this.fillStyle=i,this.strokeStyle=o,this.lineCap=a,this.lineWidth=c,this.lineJoin=l;var T=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],I=1===C?this.posY+this.margin[0]:this.margin[0],R=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],x=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],N=1===C?0:R+(C-2)*x;if(0!==this.ctx.clip_path.length){var O=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(n,this.posX+this.margin[3],-N+I+this.ctx.prevPageLastElemOffset),E.call(this,e,!0),this.path=O}if(r=JSON.parse(JSON.stringify(d)),this.path=v(r,this.posX+this.margin[3],-N+I+this.ctx.prevPageLastElemOffset),!1===t||0===C){var k=(C>_||C<S)&&f.call(this);k&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],T,x,null).clip().discardPath()),E.call(this,e,t),k&&this.pdf.restoreGraphicsState()}this.lineWidth=s}else this.lineWidth=c,E.call(this,e,t),this.lineWidth=s;this.path=d},E=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!h.call(this))){for(var n,r,i=[],o=this.path,a=0;a<o.length;a++){var s=o[a];switch(s.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:s,deltas:[],abs:[]});break;case"lt":var c=i.length;if(o[a-1]&&!isNaN(o[a-1].x)&&(n=[s.x-o[a-1].x,s.y-o[a-1].y],c>0))for(;c>=0;c--)if(!0!==i[c-1].close&&!0!==i[c-1].begin){i[c-1].deltas.push(n),i[c-1].abs.push(s);break}break;case"bct":n=[s.x1-o[a-1].x,s.y1-o[a-1].y,s.x2-o[a-1].x,s.y2-o[a-1].y,s.x-o[a-1].x,s.y-o[a-1].y],i[i.length-1].deltas.push(n);break;case"qct":var l=o[a-1].x+2/3*(s.x1-o[a-1].x),d=o[a-1].y+2/3*(s.y1-o[a-1].y),u=s.x+2/3*(s.x1-s.x),A=s.y+2/3*(s.y1-s.y),f=s.x,m=s.y;n=[l-o[a-1].x,d-o[a-1].y,u-o[a-1].x,A-o[a-1].y,f-o[a-1].x,m-o[a-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(s)}}r=t?null:"stroke"===e?"stroke":"fill";for(var g=!1,v=0;v<i.length;v++)if(i[v].arc)for(var y=i[v].abs,b=0;b<y.length;b++){var E=y[b];"arc"===E.type?S.call(this,E.x,E.y,E.radius,E.startAngle,E.endAngle,E.counterclockwise,void 0,t,!g):x.call(this,E.x,E.y),g=!0}else if(!0===i[v].close)this.pdf.internal.out("h"),g=!1;else if(!0!==i[v].begin){var w=i[v].start.x,_=i[v].start.y;N.call(this,i[v].deltas,w,_),g=!0}r&&C.call(this,r),t&&T.call(this)}},w=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},_=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(e,t,n,r,i,o,a,s,c){for(var l=k.call(this,n,r,i,o),d=0;d<l.length;d++){var u=l[d];0===d&&(c?I.call(this,u.x1+e,u.y1+t):x.call(this,u.x1+e,u.y1+t)),O.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}s?T.call(this):C.call(this,a)},C=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},T=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(e,t){this.pdf.internal.out(n(e)+" "+r(t)+" m")},R=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=w.call(this,e.y),i=_.call(this,r)-n.h,o=this.ctx.transform.applyToPoint(new a(e.x,r)),l=this.ctx.transform.decompose(),d=new c;d=(d=(d=d.multiply(l.translate)).multiply(l.skew)).multiply(l.scale);for(var u,A,h,p=this.ctx.transform.applyToRectangle(new s(e.x,r,n.w,n.h)),g=d.applyToRectangle(new s(e.x,i,n.w,n.h)),b=m.call(this,g),S=[],C=0;C<b.length;C+=1)-1===S.indexOf(b[C])&&S.push(b[C]);if(y(S),this.autoPaging)for(var T=S[0],I=S[S.length-1],R=T;R<I+1;R++){this.pdf.setPage(R);var x=1===R?this.posY+this.margin[0]:this.margin[0],N=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],O=this.pdf.internal.pageSize.height-this.margin[2],k=O-this.margin[0],P=this.pdf.internal.pageSize.width-this.margin[1],B=P-this.margin[3],L=1===R?0:N+(R-2)*k;if(0!==this.ctx.clip_path.length){var D=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(u,this.posX+this.margin[3],-1*L+x),E.call(this,"fill",!0),this.path=D}var U=v([JSON.parse(JSON.stringify(g))],this.posX+this.margin[3],-L+x+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(A=this.pdf.internal.getFontSize(),this.pdf.setFontSize(A*e.scale),h=this.lineWidth,this.lineWidth=h*e.scale);var M="text"!==this.autoPaging;if(M||U.y+U.h<=O){if(M||U.y>=x&&U.x<=P){var F=M?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||P-U.x)[0],j=v([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-L+x+this.ctx.prevPageLastElemOffset)[0],Q=M&&(R>T||R<I)&&f.call(this);Q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],B,k,null).clip().discardPath()),this.pdf.text(F,j.x,j.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),Q&&this.pdf.restoreGraphicsState()}}else U.y<O&&(this.ctx.prevPageLastElemOffset+=O-U.y);e.scale>=.01&&(this.pdf.setFontSize(A),this.lineWidth=h)}else e.scale>=.01&&(A=this.pdf.internal.getFontSize(),this.pdf.setFontSize(A*e.scale),h=this.lineWidth,this.lineWidth=h*e.scale),this.pdf.text(e.text,o.x+this.posX,o.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(A),this.lineWidth=h)},x=function(e,t,i,o){i=i||0,o=o||0,this.pdf.internal.out(n(e+i)+" "+r(t+o)+" l")},N=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},O=function(e,n,r,a,s,c,l,d){this.pdf.internal.out([t(i(r+e)),t(o(a+n)),t(i(s+e)),t(o(c+n)),t(i(l+e)),t(o(d+n)),"c"].join(" "))},k=function(e,t,n,r){for(var i=2*Math.PI,o=Math.PI/2;t>n;)t-=i;var a=Math.abs(n-t);a<i&&r&&(a=i-a);for(var s=[],c=r?-1:1,l=t;a>1e-5;){var d=l+c*Math.min(a,o);s.push(P.call(this,e,l,d)),a-=Math.abs(d-l),l=d}return s},P=function(e,t,n){var r=(n-t)/2,i=e*Math.cos(r),o=e*Math.sin(r),a=i,s=-o,c=a*a+s*s,l=c+a*i+s*o,d=4/3*(Math.sqrt(2*c*l)-l)/(a*o-s*i),u=a-d*s,A=s+d*a,h=u,p=-A,f=r+t,m=Math.cos(f),g=Math.sin(f);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:u*m-A*g,y2:u*g+A*m,x3:h*m-p*g,y3:h*g+p*m,x4:e*Math.cos(n),y4:e*Math.sin(n)}},B=function(e){return 180*e/Math.PI},L=function(e,t,n,r,i,o){var a=e+.5*(n-e),c=t+.5*(r-t),l=i+.5*(n-i),d=o+.5*(r-o),u=Math.min(e,i,a,l),A=Math.max(e,i,a,l),h=Math.min(t,o,c,d),p=Math.max(t,o,c,d);return new s(u,h,A-u,p-h)},D=function(e,t,n,r,i,o,a,c){var l,d,u,A,h,p,f,m,g,v,y,b,E,w,_=n-e,S=r-t,C=i-n,T=o-r,I=a-i,R=c-o;for(d=0;d<41;d++)g=(f=(u=e+(l=d/40)*_)+l*((h=n+l*C)-u))+l*(h+l*(i+l*I-h)-f),v=(m=(A=t+l*S)+l*((p=r+l*T)-A))+l*(p+l*(o+l*R-p)-m),0==d?(y=g,b=v,E=g,w=v):(y=Math.min(y,g),b=Math.min(b,v),E=Math.max(E,g),w=Math.max(w,v));return new s(Math.round(y),Math.round(b),Math.round(E-y),Math.round(w-b))},U=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(rR.API),function(e){var t=function(e){var t,n,r,i,o,a,s,c,l,d;for(/[^\x00-\xFF]/.test(e),n=[],r=0,i=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;i>r;r+=4)0!==(o=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(a=(o=((o=((o=((o=(o-(d=o%85))/85)-(l=o%85))/85)-(c=o%85))/85)-(s=o%85))/85)%85,n.push(a+33,s+33,c+33,l+33,d+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,i,o,a=String,s="length",c=255,l="charCodeAt",d="slice",u="replace";for(e[d](-2),e=e[d](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),r=[],i=0,o=(e+=t="uuuuu"[d](e[s]%5||5))[s];o>i;i+=5)n=52200625*(e[l](i)-33)+614125*(e[l](i+1)-33)+7225*(e[l](i+2)-33)+85*(e[l](i+3)-33)+(e[l](i+4)-33),r.push(c&n>>24,c&n>>16,c&n>>8,c&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[s]),a.fromCharCode.apply(a,r)},r=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},i=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=EI(t)).reduce((function(e,t){return e+String.fromCharCode(t)}),"")};e.processDataByFilters=function(e,o){var a=0,s=e||"",c=[];for("string"==typeof(o=o||[])&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":s=n(s),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":s=t(s),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":s=r(s),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":s=s.split("").map((function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)})).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":s=i(s),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:s,reverseChain:c.reverse().join(" ")}}}(rR.API),function(e){e.loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,i=0,o=function(e){var t=e.length,n=[],r=String.fromCharCode;for(i=0;i<t;i+=1)n.push(r(255&e.charCodeAt(i)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(o(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return o(r.responseText)}(e,t,n)}catch(e){}return r}(e,t,n)},e.loadImageFile=e.loadFile}(rR.API),function(e){function t(){return(SI.html2canvas?Promise.resolve(SI.html2canvas):Promise.resolve().then(n.t.bind(n,5239,23))).catch((function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))})).then((function(e){return e.default?e.default:e}))}function r(){return(SI.DOMPurify?Promise.resolve(SI.DOMPurify):n.e(977).then(n.bind(n,7977))).catch((function(e){return Promise.reject(new Error("Could not load dompurify: "+e))})).then((function(e){return e.default?e.default:e}))}var i=function(e){var t=(0,IT.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},o=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},a=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(e,t){return e.__proto__=t||a.prototype,e},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch(i(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(r).then((function(t){return this.set({src:o("div",{innerHTML:e,dompurify:t})})}));case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},a.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),i=t.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(e(i,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",(function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft}),!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},a.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},a.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var o=0;o<n.length;++o){var a=n[o],s=a.src.find((function(e){return"truetype"===e.format}));s&&t.addFont(s.url,a.ref.name,a.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,t.context2d.save(!0),e(this.prop.container,i)})).then((function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},a.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},a.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},a.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},a.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},a.prototype.set=function(e){if("object"!==i(e))return this;var t=Object.keys(e||{}).map((function(t){if(t in a.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},a.prototype.get=function(e,t){return this.then((function(){var n=e in a.template.prop?this.prop[e]:this.opt[e];return t?t(n):n}))},a.prototype.setMargin=function(e){return this.then((function(){switch(i(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},a.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then((function(){(e=e||rR.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},a.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},a.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,(function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,(function(t){return n.updateProgress(null,e),t})).then(e,t).then((function(e){return n.updateProgress(1),e}))}))},a.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:a.convert(Object.assign({},this),Promise.prototype),i=n.call(r,e,t);return a.convert(i,this.__proto__)},a.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},a.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},a.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return a.convert(t,this)},a.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},a.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,rR.getPageSize=function(e,t,n){if("object"===(0,IT.A)(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var i,o=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":i=1;break;case"mm":i=72/25.4;break;case"cm":i=72/2.54;break;case"in":i=72;break;case"px":i=.75;break;case"pc":case"em":i=12;break;case"ex":i=6;break;default:throw"Invalid unit: "+t}var s,c=0,l=0;if(a.hasOwnProperty(o))c=a[o][1]/i,l=a[o][0]/i;else try{c=n[1],l=n[0]}catch(Es){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",l>c&&(s=l,l=c,c=s);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",c>l&&(s=l,l=c,c=s)}return{width:l,height:c,unit:t,k:i,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(JR):null;var n=new a(t);return t.worker?n:n.from(e).doCallback()}}(rR.API),rR.API.addJS=function(e){return sx=e,this.internal.events.subscribe("postPutResources",(function(){ox=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ox+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ax=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+sx+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==ox&&void 0!==ax&&this.internal.out("/Names <</JavaScript "+ox+" 0 R>>")})),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),i=0;i<r.length;i++){var o=r[i],a=n.exec(o);if(null!=a){var s=a[1];e.internal.newObjectDeferredBegin(s,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,l=[];for(i=0;i<c;i++){var d=e.internal.newObject();l.push(d);var u=e.internal.getPageInfo(i+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var A=e.internal.newObject();for(e.internal.write("<< /Names [ "),i=0;i<l.length;i++)e.internal.write("(page_"+(i+1)+")"+l[i]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+A+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var i=t.children[r];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var a=e.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+a.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var s=0;s<t.children.length;s++)this.renderItems(t.children[s])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(rR.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,i,o,a){var s,c=this.decode.DCT_DECODE,l=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(s=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),i=e.length,o={width:0,height:0,numcomponents:1},a=4;a<i;a+=2){if(a+=r,-1!==t.indexOf(e.charCodeAt(a+1))){n=256*e.charCodeAt(a+5)+e.charCodeAt(a+6),o={width:256*e.charCodeAt(a+7)+e.charCodeAt(a+8),height:n,numcomponents:e.charCodeAt(a+9)};break}r=256*e.charCodeAt(a+2)+e.charCodeAt(a+3)}return o}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}l={data:e,width:s.width,height:s.height,colorSpace:a,bitsPerComponent:8,filter:c,index:n,alias:r}}return l}}(rR.API);var lx,dx,ux,Ax,hx,px=function(){var e,t,n;function r(e){var t,n,r,i,o,a,s,c,l,d,u,A,h,p;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(t=this.readUInt32(),l=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),i=this.readUInt16()||100,a.delay=1e3*o/i,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&&(this.pos+=4,t-=4),e=(null!=a?a.data:void 0)||this.imgData,A=0;0<=t?A<t:A>t;0<=t?++A:--A)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((d=r-this.transparency.indexed.length)>0)for(h=0;0<=d?h<d:h>d;0<=d?++h:--h)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(u=this.read(t)).indexOf(0),c=String.fromCharCode.apply(String,u.slice(0,s)),this.text[c]=String.fromCharCode.apply(String,u.slice(s+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),r=0,i=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function o(o,a,s,c){var l,d,u,A,h,p,f,m,g,v,y,b,E,w,_,S,C,T,I,R,x,N=Math.ceil((i.width-o)/s),O=Math.ceil((i.height-a)/c),k=i.width==N&&i.height==O;for(w=t*N,b=k?n:new Uint8Array(w*O),p=e.length,E=0,d=0;E<O&&r<p;){switch(e[r++]){case 0:for(A=C=0;C<w;A=C+=1)b[d++]=e[r++];break;case 1:for(A=T=0;T<w;A=T+=1)l=e[r++],h=A<t?0:b[d-t],b[d++]=(l+h)%256;break;case 2:for(A=I=0;I<w;A=I+=1)l=e[r++],u=(A-A%t)/t,_=E&&b[(E-1)*w+u*t+A%t],b[d++]=(_+l)%256;break;case 3:for(A=R=0;R<w;A=R+=1)l=e[r++],u=(A-A%t)/t,h=A<t?0:b[d-t],_=E&&b[(E-1)*w+u*t+A%t],b[d++]=(l+Math.floor((h+_)/2))%256;break;case 4:for(A=x=0;x<w;A=x+=1)l=e[r++],u=(A-A%t)/t,h=A<t?0:b[d-t],0===E?_=S=0:(_=b[(E-1)*w+u*t+A%t],S=u&&b[(E-1)*w+(u-1)*t+A%t]),f=h+_-S,m=Math.abs(f-h),v=Math.abs(f-_),y=Math.abs(f-S),g=m<=v&&m<=y?h:v<=y?_:S,b[d++]=(l+g)%256;break;default:throw new Error("Invalid filter algorithm: "+e[r-1])}if(!k){var P=((a+E*c)*i.width+o)*t,B=E*w;for(A=0;A<N;A+=1){for(var L=0;L<t;L+=1)n[P++]=b[B++];P+=(s-1)*t}}E++}}return e=wI(e),1==i.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),n},r.prototype.decodePalette=function(){var e,t,n,r,i,o,a,s,c;for(n=this.palette,o=this.transparency.indexed||[],i=new Uint8Array((o.length||0)+n.length),r=0,e=0,t=a=0,s=n.length;a<s;t=a+=3)i[r++]=n[t],i[r++]=n[t+1],i[r++]=n[t+2],i[r++]=null!=(c=o[e++])?c:255;return i},r.prototype.copyToImageData=function(e,t){var n,r,i,o,a,s,c,l,d,u,A;if(r=this.colors,d=null,n=this.hasAlphaChannel,this.palette.length&&(d=null!=(A=this._decodedPalette)?A:this._decodedPalette=this.decodePalette(),r=4,n=!0),l=(i=e.data||e).length,a=d||t,o=s=0,1===r)for(;o<l;)c=d?4*t[o/4]:s,u=a[c++],i[o++]=u,i[o++]=u,i[o++]=u,i[o++]=n?a[c++]:255,s=c;else for(;o<l;)c=d?4*t[o/4]:s,i[o++]=a[c++],i[o++]=a[c++],i[o++]=a[c++],i[o++]=n?a[c++]:255,s=c},r.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var i=function(){if("[object Window]"===Object.prototype.toString.call(SI)){try{t=SI.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return i(),e=function(e){var r;if(!0===i())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(r=new Image).src=t.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(t){var n,r,i,o,a,s,c,l;if(this.animation){for(l=[],r=a=0,s=(c=this.animation.frames).length;a<s;r=++a)n=c[r],i=t.createImageData(n.width,n.height),o=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,o),n.imageData=i,l.push(n.image=e(i));return l}},r.prototype.renderFrame=function(e,t){var n,r,i;return n=(r=this.animation.frames)[t],i=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?e.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&e.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(e){var t,n,r,i,o,a,s=this;return n=0,a=this.animation,i=a.numFrames,r=a.frames,o=a.numPlays,(t=function(){var a,c;if(a=n++%i,c=r[a],s.renderFrame(e,a),i>1&&n/i<o)return s.animation._timeout=setTimeout(t,c.delay)})()},r.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},r.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},r}();function fx(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,a=1<<1+(7&i);e[t++],e[t++];var s=null,c=null;o&&(s=t,c=a,t+=3*a);var l=!0,d=[],u=0,A=null,h=0,p=null;for(this.width=n,this.height=r;l&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((I=e[t++])>=0))throw Error("Invalid block size");if(0===I)break;t+=I}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var f=e[t++];u=e[t++]|e[t++]<<8,A=e[t++],0==(1&f)&&(A=null),h=f>>2&7,t++;break;case 254:for(;;){if(!((I=e[t++])>=0))throw Error("Invalid block size");if(0===I)break;t+=I}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var m=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++],E=b>>6&1,w=1<<1+(7&b),_=s,S=c,C=!1;b>>7&&(C=!0,_=t,S=w,t+=3*w);var T=t;for(t++;;){var I;if(!((I=e[t++])>=0))throw Error("Invalid block size");if(0===I)break;t+=I}d.push({x:m,y:g,width:v,height:y,has_local_palette:C,palette_offset:_,palette_size:S,data_offset:T,data_length:t-T,transparent_index:A,interlaced:!!E,delay:u,disposal:h});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,r){var i=this.frameInfo(t),o=i.width*i.height,a=new Uint8Array(o);mx(e,i.data_offset,a,o);var s=i.palette_offset,c=i.transparent_index;null===c&&(c=256);var l=i.width,d=n-l,u=l,A=4*(i.y*n+i.x),h=4*((i.y+i.height)*n+i.x),p=A,f=4*d;!0===i.interlaced&&(f+=4*n*7);for(var m=8,g=0,v=a.length;g<v;++g){var y=a[g];if(0===u&&(u=l,(p+=f)>=h&&(f=4*d+4*n*(m-1),p=A+(l+d)*(m<<1),m>>=1)),y===c)p+=4;else{var b=e[s+3*y],E=e[s+3*y+1],w=e[s+3*y+2];r[p++]=w,r[p++]=E,r[p++]=b,r[p++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,r){var i=this.frameInfo(t),o=i.width*i.height,a=new Uint8Array(o);mx(e,i.data_offset,a,o);var s=i.palette_offset,c=i.transparent_index;null===c&&(c=256);var l=i.width,d=n-l,u=l,A=4*(i.y*n+i.x),h=4*((i.y+i.height)*n+i.x),p=A,f=4*d;!0===i.interlaced&&(f+=4*n*7);for(var m=8,g=0,v=a.length;g<v;++g){var y=a[g];if(0===u&&(u=l,(p+=f)>=h&&(f=4*d+4*n*(m-1),p=A+(l+d)*(m<<1),m>>=1)),y===c)p+=4;else{var b=e[s+3*y],E=e[s+3*y+1],w=e[s+3*y+2];r[p++]=b,r[p++]=E,r[p++]=w,r[p++]=255}--u}}}function mx(e,t,n,r){for(var i=e[t++],o=1<<i,a=o+1,s=a+1,c=i+1,l=(1<<c)-1,d=0,u=0,A=0,h=e[t++],p=new Int32Array(4096),f=null;;){for(;d<16&&0!==h;)u|=e[t++]<<d,d+=8,1===h?h=e[t++]:--h;if(d<c)break;var m=u&l;if(u>>=c,d-=c,m!==o){if(m===a)break;for(var g=m<s?m:f,v=0,y=g;y>o;)y=p[y]>>8,++v;var b=y;if(A+v+(g!==m?1:0)>r)return void TI.log("Warning, gif stream longer than expected.");n[A++]=b;var E=A+=v;for(g!==m&&(n[A++]=b),y=g;v--;)y=p[y],n[--E]=255&y,y>>=8;null!==f&&s<4096&&(p[s++]=f<<8|b,s>=l+1&&c<12&&(++c,l=l<<1|1)),f=m}else s=a+1,l=(1<<(c=i+1))-1,f=null}return A!==r&&TI.log("Warning, gif stream shorter than expected."),n}function gx(e){var t,n,r,i,o,a=Math.floor,s=new Array(64),c=new Array(64),l=new Array(64),d=new Array(64),u=new Array(65535),A=new Array(65535),h=new Array(64),p=new Array(64),f=[],m=0,g=7,v=new Array(64),y=new Array(64),b=new Array(64),E=new Array(256),w=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],x=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],O=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function k(e,t){for(var n=0,r=0,i=new Array,o=1;o<=16;o++){for(var a=1;a<=e[o];a++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=o,r++,n++;n*=2}return i}function P(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(m|=1<<g),n--,--g<0&&(255==m?(B(255),B(0)):B(m),g=7,m=0)}function B(e){f.push(e)}function L(e){B(e>>8&255),B(255&e)}function D(e,t,n,r,i){for(var o,a=i[0],s=i[240],c=function(e,t){var n,r,i,o,a,s,c,l,d,u,A=0;for(d=0;d<8;++d){n=e[A],r=e[A+1],i=e[A+2],o=e[A+3],a=e[A+4],s=e[A+5],c=e[A+6];var p=n+(l=e[A+7]),f=n-l,m=r+c,g=r-c,v=i+s,y=i-s,b=o+a,E=o-a,w=p+b,_=p-b,S=m+v,C=m-v;e[A]=w+S,e[A+4]=w-S;var T=.707106781*(C+_);e[A+2]=_+T,e[A+6]=_-T;var I=.382683433*((w=E+y)-(C=g+f)),R=.5411961*w+I,x=1.306562965*C+I,N=.707106781*(S=y+g),O=f+N,k=f-N;e[A+5]=k+R,e[A+3]=k-R,e[A+1]=O+x,e[A+7]=O-x,A+=8}for(A=0,d=0;d<8;++d){n=e[A],r=e[A+8],i=e[A+16],o=e[A+24],a=e[A+32],s=e[A+40],c=e[A+48];var P=n+(l=e[A+56]),B=n-l,L=r+c,D=r-c,U=i+s,M=i-s,F=o+a,j=o-a,Q=P+F,V=P-F,H=L+U,z=L-U;e[A]=Q+H,e[A+32]=Q-H;var K=.707106781*(z+V);e[A+16]=V+K,e[A+48]=V-K;var G=.382683433*((Q=j+M)-(z=D+B)),W=.5411961*Q+G,q=1.306562965*z+G,Y=.707106781*(H=M+D),X=B+Y,J=B-Y;e[A+40]=J+W,e[A+24]=J-W,e[A+8]=X+q,e[A+56]=X-q,A++}for(d=0;d<64;++d)u=e[d]*t[d],h[d]=u>0?u+.5|0:u-.5|0;return h}(e,t),l=0;l<64;++l)p[_[l]]=c[l];var d=p[0]-n;n=p[0],0==d?P(r[0]):(P(r[A[o=32767+d]]),P(u[o]));for(var f=63;f>0&&0==p[f];)f--;if(0==f)return P(a),n;for(var m,g=1;g<=f;){for(var v=g;0==p[g]&&g<=f;)++g;var y=g-v;if(y>=16){m=y>>4;for(var b=1;b<=m;++b)P(s);y&=15}o=32767+p[g],P(i[(y<<4)+A[o]]),P(u[o]),g++}return 63!=f&&P(a),n}function U(e){e=Math.min(Math.max(e,1),100),o!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=a((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),s[_[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var u=a((i[o]*e+50)/100);u=Math.min(Math.max(u,1),255),c[_[o]]=u}for(var A=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],h=0,p=0;p<8;p++)for(var f=0;f<8;f++)l[h]=1/(s[_[h]]*A[p]*A[f]*8),d[h]=1/(c[_[h]]*A[p]*A[f]*8),h++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),o=e)}this.encode=function(e,o){o&&U(o),f=new Array,m=0,g=7,L(65496),L(65504),L(16),B(74),B(70),B(73),B(70),B(0),B(1),B(1),B(0),L(1),L(1),B(0),B(0),function(){L(65499),L(132),B(0);for(var e=0;e<64;e++)B(s[e]);B(1);for(var t=0;t<64;t++)B(c[t])}(),function(e,t){L(65472),L(17),B(8),L(t),L(e),B(3),B(1),B(17),B(0),B(2),B(17),B(1),B(3),B(17),B(1)}(e.width,e.height),function(){L(65476),L(418),B(0);for(var e=0;e<16;e++)B(S[e+1]);for(var t=0;t<=11;t++)B(C[t]);B(16);for(var n=0;n<16;n++)B(T[n+1]);for(var r=0;r<=161;r++)B(I[r]);B(1);for(var i=0;i<16;i++)B(R[i+1]);for(var o=0;o<=11;o++)B(x[o]);B(17);for(var a=0;a<16;a++)B(N[a+1]);for(var s=0;s<=161;s++)B(O[s])}(),L(65498),L(12),B(3),B(1),B(0),B(2),B(17),B(3),B(17),B(0),B(63),B(0);var a=0,u=0,A=0;m=0,g=7,this.encode.displayName="_encode_";for(var h,p,E,_,k,M,F,j,Q,V=e.data,H=e.width,z=e.height,K=4*H,G=0;G<z;){for(h=0;h<K;){for(k=K*G+h,F=-1,j=0,Q=0;Q<64;Q++)M=k+(j=Q>>3)*K+(F=4*(7&Q)),G+j>=z&&(M-=K*(G+1+j-z)),h+F>=K&&(M-=h+F-K+4),p=V[M++],E=V[M++],_=V[M++],v[Q]=(w[p]+w[E+256|0]+w[_+512|0]>>16)-128,y[Q]=(w[p+768|0]+w[E+1024|0]+w[_+1280|0]>>16)-128,b[Q]=(w[p+1280|0]+w[E+1536|0]+w[_+1792|0]>>16)-128;a=D(v,l,a,t,r),u=D(y,d,u,n,i),A=D(b,d,A,n,i),h+=32}G+=8}if(g>=0){var W=[];W[1]=g+1,W[0]=(1<<g+1)-1,P(W)}return L(65497),new Uint8Array(f)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)E[t]=e(t)}(),t=k(S,C),n=k(R,x),r=k(T,I),i=k(N,O),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)A[32767+r]=n,u[32767+r]=[],u[32767+r][1]=n,u[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)A[32767+i]=n,u[32767+i]=[],u[32767+i][1]=n,u[32767+i][0]=t-1+i;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)w[e]=19595*e,w[e+256|0]=38470*e,w[e+512|0]=7471*e+32768,w[e+768|0]=-11059*e,w[e+1024|0]=-21709*e,w[e+1280|0]=32768*e+8421375,w[e+1536|0]=-27439*e,w[e+1792|0]=-5329*e}(),U(e)}function vx(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function yx(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,i){for(var o=0;o<i;o++)e[t+o]=n[r+o]}function i(e,t,n,r){for(var i=0;i<r;i++)e[t+i]=n}function o(e){return new Int32Array(e)}function a(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function s(e,t){var n=[];return function e(n,r,i){for(var o=i[r],a=0;a<o&&(n.push(i.length>r+1?[]:new t),!(i.length<r+1));a++)e(n[a],r+1,i)}(n,0,e),n}var c=function(){var e=this;function c(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function l(e,n,r,i,o){t(!(i%r));do{e[n+(i-=r)]=o}while(0<i)}function d(e,n,r,i,a){if(t(2328>=a),512>=a)var s=o(512);else if(null==(s=o(a)))return 0;return function(e,n,r,i,a,s){var d,A,h=n,p=1<<r,f=o(16),m=o(16);for(t(0!=a),t(null!=i),t(null!=e),t(0<r),A=0;A<a;++A){if(15<i[A])return 0;++f[i[A]]}if(f[0]==a)return 0;for(m[1]=0,d=1;15>d;++d){if(f[d]>1<<d)return 0;m[d+1]=m[d]+f[d]}for(A=0;A<a;++A)d=i[A],0<i[A]&&(s[m[d]++]=A);if(1==m[15])return(i=new u).g=0,i.value=s[0],l(e,h,1,p,i),p;var g,v=-1,y=p-1,b=0,E=1,w=1,_=1<<r;for(A=0,d=1,a=2;d<=r;++d,a<<=1){if(E+=w<<=1,0>(w-=f[d]))return 0;for(;0<f[d];--f[d])(i=new u).g=d,i.value=s[A++],l(e,h+b,a,_,i),b=c(b,d)}for(d=r+1,a=2;15>=d;++d,a<<=1){if(E+=w<<=1,0>(w-=f[d]))return 0;for(;0<f[d];--f[d]){if(i=new u,(b&y)!=v){for(h+=_,g=1<<(v=d)-r;15>v&&!(0>=(g-=f[v]));)++v,g<<=1;p+=_=1<<(g=v-r),e[n+(v=b&y)].g=g+r,e[n+v].value=h-n-v}i.g=d-r,i.value=s[A++],l(e,h+(b>>r),a,_,i),b=c(b,d)}}return E!=2*m[15]-1?0:p}(e,n,r,i,a,s)}function u(){this.value=this.g=0}function A(){this.value=this.g=0}function h(){this.G=a(5,u),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Fn,A)}function p(e,n,r,i){t(null!=e),t(null!=n),t(2147483648>i),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+i,e.Zc=4<=i?r+i-4+1:r,T(e)}function f(e,t){for(var n=0;0<t--;)n|=R(e,128)<<t;return n}function m(e,t){var n=f(e,t);return I(e)?-n:n}function g(e,n,r,i){var o,a=0;for(t(null!=e),t(null!=n),t(4294967288>i),e.Sb=i,e.Ra=0,e.u=0,e.h=0,4<i&&(i=4),o=0;o<i;++o)a+=n[r+o]<<8*o;e.Ra=a,e.bb=i,e.oa=n,e.pa=r}function v(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Vn-8>>>0,++e.bb,e.u-=8;_(e)&&(e.h=1,e.u=0)}function y(e,n){if(t(0<=n),!e.h&&n<=Qn){var r=w(e)&jn[n];return e.u+=n,v(e),r}return e.h=1,e.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function E(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function w(e){return e.Ra>>>(e.u&Vn-1)>>>0}function _(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Vn}function S(e,t){e.u=t,e.h=_(e)}function C(e){e.u>=Hn&&(t(e.u>=Hn),v(e))}function T(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function I(e){return f(e,1)}function R(e,t){var n=e.Ca;0>e.b&&T(e);var r=e.b,i=n*t>>>8,o=(e.I>>>r>i)+0;for(o?(n-=i,e.I-=i+1<<r>>>0):n=i+1,r=n,i=0;256<=r;)i+=8,r>>=8;return r=7^i+zn[r],e.b-=r,e.Ca=(n<<r)-1,o}function x(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function N(e,t){return e[t+0]|e[t+1]<<8}function O(e,t){return N(e,t)|e[t+2]<<16}function k(e,t){return N(e,t)|N(e,t+2)<<16}function P(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=o(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function B(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function L(){this.X=[],this.Xa=this.Mb=0}function D(e,n,r,i){t(null!=r),t(null!=i);var o=r[0],a=i[0];return 0==o&&(o=(e*a+n/2)/n),0==a&&(a=(n*o+e/2)/e),0>=o||0>=a?0:(r[0]=o,i[0]=a,1)}function U(e,t){return e+(1<<t)-1>>>t}function M(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function F(t,n){e[n]=function(n,r,i,o,a,s,c){var l;for(l=0;l<a;++l){var d=e[t](s[c+l-1],i,o+l);s[c+l]=M(n[r+l],d)}}}function j(){this.ud=this.hd=this.jd=0}function Q(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function V(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function H(e,t){return V(e+(e-t+.5>>1))}function z(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function K(e,t,n,r,i,o,a){for(r=o[a-1],n=0;n<i;++n)o[a+n]=r=M(e[t+n],r)}function G(e,t,n,r,i){var o;for(o=0;o<n;++o){var a=e[t+o],s=a>>8&255,c=16711935&(c=(c=16711935&a)+((s<<16)+s));r[i+o]=(4278255360&a)+c>>>0}}function W(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function q(e,t,n,r,i,o){var a;for(a=0;a<r;++a){var s=t[n+a],c=s>>>8,l=s,d=255&(d=(d=s>>>16)+((e.jd<<24>>24)*(c<<24>>24)>>>5));l=255&(l=(l+=(e.hd<<24>>24)*(c<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),i[o+a]=(4278255360&s)+(d<<16)+l}}function Y(t,n,r,i,o){e[n]=function(e,t,n,r,a,s,c,l,d){for(r=c;r<l;++r)for(c=0;c<d;++c)a[s++]=o(n[i(e[t++])])},e[t]=function(t,n,a,s,c,l,d){var u=8>>t.b,A=t.Ea,h=t.K[0],p=t.w;if(8>u)for(t=(1<<t.b)-1,p=(1<<u)-1;n<a;++n){var f,m=0;for(f=0;f<A;++f)f&t||(m=i(s[c++])),l[d++]=o(h[m&p]),m>>=u}else e["VP8LMapColor"+r](s,c,h,p,l,d,n,a,A)}}function X(e,t,n,r,i){for(n=t+n;t<n;){var o=e[t++];r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=255&o}}function J(e,t,n,r,i){for(n=t+n;t<n;){var o=e[t++];r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=255&o,r[i++]=o>>24&255}}function Z(e,t,n,r,i){for(n=t+n;t<n;){var o=(a=e[t++])>>16&240|a>>12&15,a=240&a|a>>28&15;r[i++]=o,r[i++]=a}}function $(e,t,n,r,i){for(n=t+n;t<n;){var o=(a=e[t++])>>16&248|a>>13&7,a=a>>5&224|a>>3&31;r[i++]=o,r[i++]=a}}function ee(e,t,n,r,i){for(n=t+n;t<n;){var o=e[t++];r[i++]=255&o,r[i++]=o>>8&255,r[i++]=o>>16&255}}function te(e,t,n,i,o,a){if(0==a)for(n=t+n;t<n;)x(i,((a=e[t++])[0]>>24|a[1]>>8&65280|a[2]<<8&16711680|a[3]<<24)>>>0),o+=32;else r(i,o,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==Hr||e==zr||e==Kr||e==Gr}function ie(){this.eb=[],this.size=this.A=this.fb=0}function oe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ae(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ie,this.f.kb=new oe,this.sd=null}function se(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ce(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function le(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function de(e,t){var n=e.T,i=t.ba.f.RGBA,o=i.eb,a=i.fb+e.ka*i.A,s=gi[t.ba.S],c=e.y,l=e.O,d=e.f,u=e.N,A=e.ea,h=e.W,p=t.cc,f=t.dc,m=t.Mc,g=t.Nc,v=e.ka,y=e.ka+e.T,b=e.U,E=b+1>>1;for(0==v?s(c,l,null,null,d,u,A,h,d,u,A,h,o,a,null,null,b):(s(t.ec,t.fc,c,l,p,f,m,g,d,u,A,h,o,a-i.A,o,a,b),++n);v+2<y;v+=2)p=d,f=u,m=A,g=h,u+=e.Rc,h+=e.Rc,a+=2*i.A,s(c,(l+=2*e.fa)-e.fa,c,l,p,f,m,g,d,u,A,h,o,a-i.A,o,a,b);return l+=e.fa,e.j+y<e.o?(r(t.ec,t.fc,c,l,b),r(t.cc,t.dc,d,u,E),r(t.Mc,t.Nc,A,h,E),n--):1&y||s(c,l,null,null,d,u,A,h,d,u,A,h,o,a+i.A,null,null,b),n}function ue(e,n,r){var i=e.F,o=[e.J];if(null!=i){var a=e.U,s=n.ba.S,c=s==jr||s==Kr;n=n.ba.f.RGBA;var l=[0],d=e.ka;l[0]=e.T,e.Kb&&(0==d?--l[0]:(--d,o[0]-=e.width),e.j+e.ka+e.T==e.o&&(l[0]=e.o-e.j-d));var u=n.eb;d=n.fb+d*n.A,e=Cr(i,o[0],e.width,a,l,u,d+(c?0:3),n.A),t(r==l),e&&re(s)&&_r(u,d,c,a,l,n.A)}return 0}function Ae(e){var t=e.ma,n=t.ba.S,r=11>n,i=n==Ur||n==Fr||n==jr||n==Qr||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Dn(t.Oa,e,i?11:12))return 0;if(i&&re(n)&&yn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=le,e.Kb){if(n=e.U+1>>1,t.memory=o(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=de,yn()}}else alert("todo:EmitYUV");i&&(t.Jb=ue,r&&gn())}if(r&&!Oi){for(e=0;256>e;++e)ki[e]=89858*(e-128)+Ti>>Ci,Li[e]=-22014*(e-128)+Ti,Bi[e]=-45773*(e-128),Pi[e]=113618*(e-128)+Ti>>Ci;for(e=Ii;e<Ri;++e)t=76283*(e-16)+Ti>>Ci,Di[e-Ii]=Ke(t,255),Ui[e-Ii]=Ke(t+8>>4,15);Oi=1}return 1}function he(e){var n=e.ma,r=e.U,i=e.T;return t(!(1&e.ka)),0>=r||0>=i?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function pe(e){e.ma.memory=null}function fe(e,t,n,r){return 47!=y(e,8)?0:(t[0]=y(e,14)+1,n[0]=y(e,14)+1,r[0]=y(e,1),0!=y(e,3)?0:!e.h)}function me(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+y(t,n)+1}function ge(e,t){return 120<t?t-120:1<=(n=((n=Zr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function ve(e,t,n){var r=w(n),i=e[t+=255&r].g-8;return 0<i&&(S(n,n.u+8),r=w(n),t+=e[t].value,t+=r&(1<<i)-1),S(n,n.u+e[t].g),e[t].value}function ye(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function be(e,n,r){var i=e.xc;return t((n=0==i?0:e.vc[e.md*(r>>i)+(n>>i)])<e.Wb),e.Ya[n]}function Ee(e,n,i,o){var a=e.ab,s=e.c*n,c=e.C;n=c+n;var l=i,d=o;for(o=e.Ta,i=e.Ua;0<a--;){var u=e.gc[a],A=c,h=n,p=l,f=d,m=(d=o,l=i,u.Ea);switch(t(A<h),t(h<=u.nc),u.hc){case 2:Wn(p,f,(h-A)*m,d,l);break;case 0:var g=A,v=h,y=d,b=l,E=(T=u).Ea;0==g&&(Kn(p,f,null,null,1,y,b),K(p,f+1,0,0,E-1,y,b+1),f+=E,b+=E,++g);for(var w=1<<T.b,_=w-1,S=U(E,T.b),C=T.K,T=T.w+(g>>T.b)*S;g<v;){var I=C,R=T,x=1;for(Gn(p,f,y,b-E,1,y,b);x<E;){var N=(x&~_)+w;N>E&&(N=E),(0,Zn[I[R++]>>8&15])(p,f+ +x,y,b+x-E,N-x,y,b+x),x=N}f+=E,b+=E,++g&_||(T+=S)}h!=u.nc&&r(d,l-m,d,l+(h-A-1)*m,m);break;case 1:for(m=p,v=f,E=(p=u.Ea)-(b=p&~(y=(f=1<<u.b)-1)),g=U(p,u.b),w=u.K,u=u.w+(A>>u.b)*g;A<h;){for(_=w,S=u,C=new j,T=v+b,I=v+p;v<T;)W(_[S++],C),$n(C,m,v,f,d,l),v+=f,l+=f;v<I&&(W(_[S++],C),$n(C,m,v,E,d,l),v+=E,l+=E),++A&y||(u+=g)}break;case 3:if(p==d&&f==l&&0<u.b){for(v=d,p=m=l+(h-A)*m-(b=(h-A)*U(u.Ea,u.b)),f=d,y=l,g=[],b=(E=b)-1;0<=b;--b)g[b]=f[y+b];for(b=E-1;0<=b;--b)v[p+b]=g[b];qn(u,A,h,d,m,d,l)}else qn(u,A,h,p,f,d,l)}l=o,d=i}d!=i&&r(o,i,l,d,s)}function we(e,n){var r=e.V,i=e.Ba+e.c*e.C,o=n-e.C;if(t(n<=e.l.o),t(16>=o),0<o){var a=e.l,s=e.Ta,c=e.Ua,l=a.width;if(Ee(e,o,r,i),o=c=[c],t((r=e.C)<(i=n)),t(a.v<a.va),i>a.o&&(i=a.o),r<a.j){var d=a.j-r;r=a.j,o[0]+=d*l}if(r>=i?r=0:(o[0]+=4*a.v,a.ka=r-a.j,a.U=a.va-a.v,a.T=i-r,r=1),r){if(c=c[0],11>(r=e.ca).S){var u=r.f.RGBA,A=(i=r.S,o=a.U,a=a.T,d=u.eb,u.A),h=a;for(u=u.fb+e.Ma*u.A;0<h--;){var p=s,f=c,m=o,g=d,v=u;switch(i){case Dr:er(p,f,m,g,v);break;case Ur:tr(p,f,m,g,v);break;case Hr:tr(p,f,m,g,v),_r(g,v,0,m,1,0);break;case Mr:ir(p,f,m,g,v);break;case Fr:te(p,f,m,g,v,1);break;case zr:te(p,f,m,g,v,1),_r(g,v,0,m,1,0);break;case jr:te(p,f,m,g,v,0);break;case Kr:te(p,f,m,g,v,0),_r(g,v,1,m,1,0);break;case Qr:nr(p,f,m,g,v);break;case Gr:nr(p,f,m,g,v),Sr(g,v,m,1,0);break;case Vr:rr(p,f,m,g,v);break;default:t(0)}c+=l,u+=A}e.Ma+=a}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function _e(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function Se(e,n,r,i,o,a){if(0!=e.Z){var s=e.qd,c=e.rd;for(t(null!=mi[e.Z]);n<r;++n)mi[e.Z](s,c,i,o,i,o,a),s=i,c=o,o+=a;e.qd=s,e.rd=c}}function Ce(e,n){var r=e.l.ma,i=0==r.Z||1==r.Z?e.l.j:e.C;if(i=e.C<i?i:e.C,t(n<=e.l.o),n>i){var o=e.l.width,a=r.ca,s=r.tb+o*i,c=e.V,l=e.Ba+e.c*i,d=e.gc;t(1==e.ab),t(3==d[0].hc),Xn(d[0],i,n,c,l,a,s),Se(r,i,n,a,s,o)}e.C=e.Ma=n}function Te(e,n,r,i,o,a,s){var c=e.$/i,l=e.$%i,d=e.m,u=e.s,A=r+e.$,h=A;o=r+i*o;var p=r+i*a,f=280+u.ua,m=e.Pb?c:16777216,g=0<u.ua?u.Wa:null,v=u.wc,y=A<p?be(u,l,c):null;t(e.C<a),t(p<=o);var b=!1;e:for(;;){for(;b||A<p;){var E=0;if(c>=m){var T=A-r;t((m=e).Pb),m.wd=m.m,m.xd=T,0<m.s.ua&&B(m.s.Wa,m.s.vb),m=c+ei}if(l&v||(y=be(u,l,c)),t(null!=y),y.Qb&&(n[A]=y.qb,b=!0),!b)if(C(d),y.jc){E=d,T=n;var I=A,R=y.pd[w(E)&Fn-1];t(y.jc),256>R.g?(S(E,E.u+R.g),T[I]=R.value,E=0):(S(E,E.u+R.g-256),t(256<=R.value),E=R.value),0==E&&(b=!0)}else E=ve(y.G[0],y.H[0],d);if(d.h)break;if(b||256>E){if(!b)if(y.nd)n[A]=(y.qb|E<<8)>>>0;else{if(C(d),b=ve(y.G[1],y.H[1],d),C(d),T=ve(y.G[2],y.H[2],d),I=ve(y.G[3],y.H[3],d),d.h)break;n[A]=(I<<24|b<<16|E<<8|T)>>>0}if(b=!1,++A,++l>=i&&(l=0,++c,null!=s&&c<=a&&!(c%16)&&s(e,c),null!=g))for(;h<A;)E=n[h++],g.X[(506832829*E&4294967295)>>>g.Mb]=E}else if(280>E){if(E=me(E-256,d),T=ve(y.G[4],y.H[4],d),C(d),T=ge(i,T=me(T,d)),d.h)break;if(A-r<T||o-A<E)break e;for(I=0;I<E;++I)n[A+I]=n[A+I-T];for(A+=E,l+=E;l>=i;)l-=i,++c,null!=s&&c<=a&&!(c%16)&&s(e,c);if(t(A<=o),l&v&&(y=be(u,l,c)),null!=g)for(;h<A;)E=n[h++],g.X[(506832829*E&4294967295)>>>g.Mb]=E}else{if(!(E<f))break e;for(b=E-280,t(null!=g);h<A;)E=n[h++],g.X[(506832829*E&4294967295)>>>g.Mb]=E;E=A,t(!(b>>>(T=g).Xa)),n[E]=T.X[b],b=!0}b||t(d.h==_(d))}if(e.Pb&&d.h&&A<o)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&B(e.s.vb,e.s.Wa);else{if(d.h)break e;null!=s&&s(e,c>a?a:c),e.a=0,e.$=A-r}return 1}return e.a=3,0}function Ie(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Re(){var t=new sn;return null==t?null:(t.a=0,t.xb=fi,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Wn=G,$n=q,er=X,tr=J,nr=Z,rr=$,ir=ee,e.VP8LMapColor32b=Yn,e.VP8LMapColor8b=Jn,t)}function xe(e,n,r,s,c){var l=1,A=[e],p=[n],f=s.m,m=s.s,g=null,v=0;e:for(;;){if(r)for(;l&&y(f,1);){var b=A,E=p,_=s,T=1,I=_.m,R=_.gc[_.ab],x=y(I,2);if(_.Oc&1<<x)l=0;else{switch(_.Oc|=1<<x,R.hc=x,R.Ea=b[0],R.nc=E[0],R.K=[null],++_.ab,t(4>=_.ab),x){case 0:case 1:R.b=y(I,3)+2,T=xe(U(R.Ea,R.b),U(R.nc,R.b),0,_,R.K),R.K=R.K[0];break;case 3:var N,O=y(I,8)+1,k=16<O?0:4<O?1:2<O?2:3;if(b[0]=U(R.Ea,k),R.b=k,N=T=xe(O,1,0,_,R.K)){var B,L=O,D=R,F=1<<(8>>D.b),j=o(F);if(null==j)N=0;else{var Q=D.K[0],V=D.w;for(j[0]=D.K[0][0],B=1;B<1*L;++B)j[B]=M(Q[V+B],j[B-1]);for(;B<4*F;++B)j[B]=0;D.K[0]=null,D.K[0]=j,N=1}}T=N;break;case 2:break;default:t(0)}l=T}}if(A=A[0],p=p[0],l&&y(f,1)&&!(l=1<=(v=y(f,4))&&11>=v)){s.a=3;break e}var H;if(H=l)t:{var z,K,G,W=s,q=A,Y=p,X=v,J=r,Z=W.m,$=W.s,ee=[null],te=1,ne=0,re=$r[X];n:for(;;){if(J&&y(Z,1)){var ie=y(Z,3)+2,oe=U(q,ie),ae=U(Y,ie),se=oe*ae;if(!xe(oe,ae,0,W,ee))break n;for(ee=ee[0],$.xc=ie,z=0;z<se;++z){var ce=ee[z]>>8&65535;ee[z]=ce,ce>=te&&(te=ce+1)}}if(Z.h)break n;for(K=0;5>K;++K){var le=Yr[K];!K&&0<X&&(le+=1<<X),ne<le&&(ne=le)}var de=a(te*re,u),ue=te,Ae=a(ue,h);if(null==Ae)var he=null;else t(65536>=ue),he=Ae;var pe=o(ne);if(null==he||null==pe||null==de){W.a=1;break n}var fe=de;for(z=G=0;z<te;++z){var me=he[z],ge=me.G,ve=me.H,be=0,Ee=1,we=0;for(K=0;5>K;++K){le=Yr[K],ge[K]=fe,ve[K]=G,!K&&0<X&&(le+=1<<X);r:{var _e,Se=le,Ce=W,Re=pe,Ne=fe,Oe=G,ke=0,Pe=Ce.m,Be=y(Pe,1);if(i(Re,0,0,Se),Be){var Le=y(Pe,1)+1,De=y(Pe,1),Ue=y(Pe,0==De?1:8);Re[Ue]=1,2==Le&&(Re[Ue=y(Pe,8)]=1);var Me=1}else{var Fe=o(19),je=y(Pe,4)+4;if(19<je){Ce.a=3;var Qe=0;break r}for(_e=0;_e<je;++_e)Fe[Jr[_e]]=y(Pe,3);var Ve=void 0,He=void 0,ze=Ce,Ke=Fe,Ge=Se,We=Re,qe=0,Ye=ze.m,Xe=8,Je=a(128,u);i:for(;d(Je,0,7,Ke,19);){if(y(Ye,1)){var Ze=2+2*y(Ye,3);if((Ve=2+y(Ye,Ze))>Ge)break i}else Ve=Ge;for(He=0;He<Ge&&Ve--;){C(Ye);var $e=Je[0+(127&w(Ye))];S(Ye,Ye.u+$e.g);var et=$e.value;if(16>et)We[He++]=et,0!=et&&(Xe=et);else{var tt=16==et,nt=et-16,rt=qr[nt],it=y(Ye,Wr[nt])+rt;if(He+it>Ge)break i;for(var ot=tt?Xe:0;0<it--;)We[He++]=ot}}qe=1;break i}qe||(ze.a=3),Me=qe}(Me=Me&&!Pe.h)&&(ke=d(Ne,Oe,8,Re,Se)),Me&&0!=ke?Qe=ke:(Ce.a=3,Qe=0)}if(0==Qe)break n;if(Ee&&1==Xr[K]&&(Ee=0==fe[G].g),be+=fe[G].g,G+=Qe,3>=K){var at,st=pe[0];for(at=1;at<le;++at)pe[at]>st&&(st=pe[at]);we+=st}}if(me.nd=Ee,me.Qb=0,Ee&&(me.qb=(ge[3][ve[3]+0].value<<24|ge[1][ve[1]+0].value<<16|ge[2][ve[2]+0].value)>>>0,0==be&&256>ge[0][ve[0]+0].value&&(me.Qb=1,me.qb+=ge[0][ve[0]+0].value<<8)),me.jc=!me.Qb&&6>we,me.jc){var ct,lt=me;for(ct=0;ct<Fn;++ct){var dt=ct,ut=lt.pd[dt],At=lt.G[0][lt.H[0]+dt];256<=At.value?(ut.g=At.g+256,ut.value=At.value):(ut.g=0,ut.value=0,dt>>=ye(At,8,ut),dt>>=ye(lt.G[1][lt.H[1]+dt],16,ut),dt>>=ye(lt.G[2][lt.H[2]+dt],0,ut),ye(lt.G[3][lt.H[3]+dt],24,ut))}}}$.vc=ee,$.Wb=te,$.Ya=he,$.yc=de,H=1;break t}H=0}if(!(l=H)){s.a=3;break e}if(0<v){if(m.ua=1<<v,!P(m.Wa,v)){s.a=1,l=0;break e}}else m.ua=0;var ht=s,pt=A,ft=p,mt=ht.s,gt=mt.xc;if(ht.c=pt,ht.i=ft,mt.md=U(pt,gt),mt.wc=0==gt?-1:(1<<gt)-1,r){s.xb=pi;break e}if(null==(g=o(A*p))){s.a=1,l=0;break e}l=(l=Te(s,g,0,A,p,p,null))&&!f.h;break e}return l?(null!=c?c[0]=g:(t(null==g),t(r)),s.$=0,r||Ie(m)):Ie(m),l}function Ne(e,n){var r=e.c*e.i,i=r+n+16*n;return t(e.c<=n),e.V=o(i),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function Oe(e,n){var r=e.C,i=n-r,o=e.V,a=e.Ba+e.c*r;for(t(n<=e.l.o);0<i;){var s=16<i?16:i,c=e.l.ma,l=e.l.width,d=l*s,u=c.ca,A=c.tb+l*r,h=e.Ta,p=e.Ua;Ee(e,s,o,a),Tr(h,p,u,A,d),Se(c,r,r+s,u,A,l),i-=s,o+=s*e.c,r+=s}t(r==n),e.C=e.Ma=n}function ke(){this.ub=this.yd=this.td=this.Rb=0}function Pe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Be(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Le(){this.Yb=function(){var e=[];return function e(t,n,r){for(var i=r[n],o=0;o<i&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));o++)e(t[o],n+1,r)}(e,0,[3,11]),e}()}function De(){this.jb=o(3),this.Wc=s([4,8],Le),this.Xc=s([4,17],Le)}function Ue(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Me(){this.ld=this.La=this.dd=this.tc=0}function Fe(){this.Na=this.la=0}function je(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qe(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ve(){this.uc=this.M=this.Nb=0,this.wa=Array(new Me),this.Y=0,this.ya=Array(new Qe),this.aa=0,this.l=new Ge}function He(){this.y=o(16),this.f=o(8),this.ea=o(8)}function ze(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new ke,this.Kc=new Pe,this.ed=new Ue,this.Qa=new Be,this.Ic=this.$c=this.Aa=0,this.D=new Ve,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,b),this.ia=0,this.pb=a(4,je),this.Pa=new De,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new He),this.Hd=0,this.rb=Array(new Fe),this.sb=0,this.wa=Array(new Me),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qe),this.L=this.aa=0,this.gd=s([4,2],Me),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ke(e,t){return 0>e?0:e>t?t:e}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function We(){var e=new ze;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ri||(ri=Je)),e}function qe(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Ye(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Xe(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return qe(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,o=n.w,a=n.ha;if(4>a)return qe(e,7,"Truncated header.");var s=r[o+0]|r[o+1]<<8|r[o+2]<<16,c=e.Od;if(c.Rb=!(1&s),c.td=s>>1&7,c.yd=s>>4&1,c.ub=s>>5,3<c.td)return qe(e,3,"Incorrect keyframe parameters.");if(!c.yd)return qe(e,4,"Frame not displayable.");o+=3,a-=3;var l=e.Kc;if(c.Rb){if(7>a)return qe(e,7,"cannot parse picture header");if(!Ye(r,o,a))return qe(e,3,"Bad code word");l.c=16383&(r[o+4]<<8|r[o+3]),l.Td=r[o+4]>>6,l.i=16383&(r[o+6]<<8|r[o+5]),l.Ud=r[o+6]>>6,o+=7,a-=7,e.za=l.c+15>>4,e.Ub=l.i+15>>4,n.width=l.c,n.height=l.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((s=e.Pa).jb,0,255,s.jb.length),t(null!=(s=e.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,i(s.Zb,0,0,s.Zb.length),i(s.Lb,0,0,s.Lb)}if(c.ub>a)return qe(e,7,"bad partition length");p(s=e.m,r,o,c.ub),o+=c.ub,a-=c.ub,c.Rb&&(l.Ld=I(s),l.Kd=I(s)),l=e.Qa;var d,u=e.Pa;if(t(null!=s),t(null!=l),l.Cb=I(s),l.Cb){if(l.Bb=I(s),I(s)){for(l.Fb=I(s),d=0;4>d;++d)l.Zb[d]=I(s)?m(s,7):0;for(d=0;4>d;++d)l.Lb[d]=I(s)?m(s,6):0}if(l.Bb)for(d=0;3>d;++d)u.jb[d]=I(s)?f(s,8):255}else l.Bb=0;if(s.Ka)return qe(e,3,"cannot parse segment header");if((l=e.ed).zd=I(s),l.Tb=f(s,6),l.wb=f(s,3),l.Pc=I(s),l.Pc&&I(s)){for(u=0;4>u;++u)I(s)&&(l.vd[u]=m(s,6));for(u=0;4>u;++u)I(s)&&(l.od[u]=m(s,6))}if(e.L=0==l.Tb?0:l.zd?1:2,s.Ka)return qe(e,3,"cannot parse filter header");var A=a;if(a=d=o,o=d+A,l=A,e.Xb=(1<<f(e.m,2))-1,A<3*(u=e.Xb))r=7;else{for(d+=3*u,l-=3*u,A=0;A<u;++A){var h=r[a+0]|r[a+1]<<8|r[a+2]<<16;h>l&&(h=l),p(e.Jc[+A],r,d,h),d+=h,l-=h,a+=3}p(e.Jc[+u],r,d,l),r=d<o?0:5}if(0!=r)return qe(e,r,"cannot parse partitions");for(r=f(d=e.m,7),a=I(d)?m(d,4):0,o=I(d)?m(d,4):0,l=I(d)?m(d,4):0,u=I(d)?m(d,4):0,d=I(d)?m(d,4):0,A=e.Qa,h=0;4>h;++h){if(A.Cb){var g=A.Zb[h];A.Fb||(g+=r)}else{if(0<h){e.pb[h]=e.pb[0];continue}g=r}var v=e.pb[h];v.Sc[0]=ti[Ke(g+a,127)],v.Sc[1]=ni[Ke(g+0,127)],v.Eb[0]=2*ti[Ke(g+o,127)],v.Eb[1]=101581*ni[Ke(g+l,127)]>>16,8>v.Eb[1]&&(v.Eb[1]=8),v.Qc[0]=ti[Ke(g+u,117)],v.Qc[1]=ni[Ke(g+d,127)],v.lc=g+d}if(!c.Rb)return qe(e,4,"Not a key frame.");for(I(s),c=e.Pa,r=0;4>r;++r){for(a=0;8>a;++a)for(o=0;3>o;++o)for(l=0;11>l;++l)u=R(s,li[r][a][o][l])?f(s,8):si[r][a][o][l],c.Wc[r][a].Yb[o][l]=u;for(a=0;17>a;++a)c.Xc[r][a]=c.Wc[r][di[a]]}return e.kc=I(s),e.kc&&(e.Bd=f(s,8)),e.cb=1}function Je(e,t,n,r,i,o,a){var s=t[i].Yb[n];for(n=0;16>i;++i){if(!R(e,s[n+0]))return i;for(;!R(e,s[n+1]);)if(s=t[++i].Yb[0],n=0,16==i)return 16;var c=t[i+1].Yb;if(R(e,s[n+2])){var l=e,d=0;if(R(l,(A=s)[(u=n)+3]))if(R(l,A[u+6])){for(s=0,u=2*(d=R(l,A[u+8]))+(A=R(l,A[u+9+d])),d=0,A=ii[u];A[s];++s)d+=d+R(l,A[s]);d+=3+(8<<u)}else R(l,A[u+7])?(d=7+2*R(l,165),d+=R(l,145)):d=5+R(l,159);else d=R(l,A[u+4])?3+R(l,A[u+5]):2;s=c[2]}else d=1,s=c[1];c=a+oi[i],0>(l=e).b&&T(l);var u,A=l.b,h=(u=l.Ca>>1)-(l.I>>A)>>31;--l.b,l.Ca+=h,l.Ca|=1,l.I-=(u+1&h)<<A,o[c]=((d^h)-h)*r[(0<i)+0]}return 16}function Ze(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,i(e.zc,0,0,e.zc.length),e.ja=0}function $e(e,n){if(null==e)return 0;if(null==n)return qe(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Xe(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var s=Fi[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-s>>4,e.zb=n.j-s>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+s>>4,e.Hb=n.va+15+s>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var c=e.ed;for(s=0;4>s;++s){var l;if(e.Qa.Cb){var d=e.Qa.Lb[s];e.Qa.Fb||(d+=c.Tb)}else d=c.Tb;for(l=0;1>=l;++l){var u=e.gd[s][l],A=d;if(c.Pc&&(A+=c.vd[0],l&&(A+=c.od[0])),0<(A=0>A?0:63<A?63:A)){var h=A;0<c.wb&&(h=4<c.wb?h>>2:h>>1)>9-c.wb&&(h=9-c.wb),1>h&&(h=1),u.dd=h,u.tc=2*A+h,u.ld=40<=A?2:15<=A?1:0}else u.tc=0;u.La=l}}}s=0}else qe(e,6,"Frame setup failed"),s=e.a;if(s=0==s){if(s){e.$c=0,0<e.Aa||(e.Ic=Qi);e:{s=e.Ic,c=4*(h=e.za);var p=32*h,f=h+1,m=0<e.L?h*(0<e.Aa?2:1):0,g=(2==e.Aa?2:1)*h;if((u=c+832+(l=3*(16*s+Fi[e.L])/2*p)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)s=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=o(u),e.Fc=0,null==e.Ec){s=qe(e,1,"no memory during frame initialization.");break e}e.Vb=u}u=e.Ec,A=e.Fc,e.Ac=u,e.Bc=A,A+=c,e.Gd=a(p,He),e.Hd=0,e.rb=a(f+1,Fe),e.sb=1,e.wa=m?a(m,Me):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=h),t(!0),e.oc=u,e.pc=A,A+=832,e.ya=a(g,Qe),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=h),e.R=16*h,e.B=8*h,h=(p=Fi[e.L])*e.R,p=p/2*e.B,e.sa=u,e.ta=A+h,e.qa=e.sa,e.ra=e.ta+16*s*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*s*e.B+p,e.$c=0,A+=l,e.mb=d?u:null,e.nb=d?A:null,t(A+d<=e.Fc+e.Vb),Ze(e),i(e.Ac,e.Bc,0,c),s=1}}if(s){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Or){for(s=-255;255>=s;++s)Ir[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)Rr[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)xr[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)Nr[255+s]=0>s?0:255<s?255:s;Or=1}or=lt,ar=ot,cr=at,lr=st,dr=ct,sr=it,ur=qt,Ar=Yt,hr=Zt,pr=$t,fr=Xt,mr=Jt,gr=en,vr=tn,yr=Vt,br=Ht,Er=zt,wr=Kt,Ai[0]=St,Ai[1]=ut,Ai[2]=wt,Ai[3]=_t,Ai[4]=Ct,Ai[5]=It,Ai[6]=Tt,Ai[7]=Rt,Ai[8]=Nt,Ai[9]=xt,ui[0]=gt,ui[1]=ht,ui[2]=pt,ui[3]=ft,ui[4]=vt,ui[5]=yt,ui[6]=bt,hi[0]=Bt,hi[1]=At,hi[2]=Ot,hi[3]=kt,hi[4]=Dt,hi[5]=Lt,hi[6]=Ut,s=1}else s=0}s&&(s=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var a,s=e.Jc[e.M&e.Xb],c=e.m,l=e;for(a=0;a<l.za;++a){var d=c,u=l,A=u.Ac,h=u.Bc+4*a,p=u.zc,f=u.ya[u.aa+a];if(u.Qa.Bb?f.$b=R(d,u.Pa.jb[0])?2+R(d,u.Pa.jb[2]):R(d,u.Pa.jb[1]):f.$b=0,u.kc&&(f.Ad=R(d,u.Bd)),f.Za=!R(d,145)+0,f.Za){var m=f.Ob,g=0;for(u=0;4>u;++u){var v,y=p[0+u];for(v=0;4>v;++v){y=ci[A[h+v]][y];for(var b=ai[R(d,y[0])];0<b;)b=ai[2*b+R(d,y[b])];y=-b,A[h+v]=y}r(m,g,A,h,4),g+=4,p[0+u]=y}}else y=R(d,156)?R(d,128)?1:3:R(d,163)?2:0,f.Ob[0]=y,i(A,h,y,4),i(p,0,y,4);f.Dd=R(d,142)?R(d,114)?R(d,183)?1:3:2:0}if(l.m.Ka)return qe(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(l=s,d=(c=e).rb[c.sb-1],A=c.rb[c.sb+c.ja],a=c.ya[c.aa+c.ja],h=c.kc?a.Ad:0)d.la=A.la=0,a.Za||(d.Na=A.Na=0),a.Hc=0,a.Gc=0,a.ia=0;else{var E,w;if(d=A,A=l,h=c.Pa.Xc,p=c.ya[c.aa+c.ja],f=c.pb[p.$b],u=p.ad,m=0,g=c.rb[c.sb-1],y=v=0,i(u,m,0,384),p.Za)var _=0,S=h[3];else{b=o(16);var C=d.Na+g.Na;if(C=ri(A,h[1],C,f.Eb,0,b,0),d.Na=g.Na=(0<C)+0,1<C)or(b,0,u,m);else{var T=b[0]+3>>3;for(b=0;256>b;b+=16)u[m+b]=T}_=1,S=h[0]}var I=15&d.la,x=15&g.la;for(b=0;4>b;++b){var N=1&x;for(T=w=0;4>T;++T)I=I>>1|(N=(C=ri(A,S,C=N+(1&I),f.Sc,_,u,m))>_)<<7,w=w<<2|(3<C?3:1<C?2:0!=u[m+0]),m+=16;I>>=4,x=x>>1|N<<7,v=(v<<8|w)>>>0}for(S=I,_=x>>4,E=0;4>E;E+=2){for(w=0,I=d.la>>4+E,x=g.la>>4+E,b=0;2>b;++b){for(N=1&x,T=0;2>T;++T)C=N+(1&I),I=I>>1|(N=0<(C=ri(A,h[2],C,f.Qc,0,u,m)))<<3,w=w<<2|(3<C?3:1<C?2:0!=u[m+0]),m+=16;I>>=2,x=x>>1|N<<5}y|=w<<4*E,S|=I<<4<<E,_|=(240&x)<<E}d.la=S,g.la=_,p.Hc=v,p.Gc=y,p.ia=43690&y?0:f.ia,h=!(v|y)}if(0<c.L&&(c.wa[c.Y+c.ja]=c.gd[a.$b][a.Za],c.wa[c.Y+c.ja].La|=!h),l.Ka)return qe(e,7,"Premature end-of-file encountered.")}if(Ze(e),c=n,l=1,a=(s=e).D,d=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)e:{if(a.M=s.M,a.uc=d,Bn(s,a),l=1,a=(w=s.D).Nb,d=(y=Fi[s.L])*s.R,A=y/2*s.B,b=16*a*s.R,T=8*a*s.B,h=s.sa,p=s.ta-d+b,f=s.qa,u=s.ra-A+T,m=s.Ha,g=s.Ia-A+T,x=0==(I=w.M),v=I>=s.Va-1,2==s.Aa&&Bn(s,w),w.uc)for(N=(C=s).D.M,t(C.D.uc),w=C.yb;w<C.Hb;++w){_=w,S=N;var O=(k=(Q=C).D).Nb;E=Q.R;var k=k.wa[k.Y+_],P=Q.sa,B=Q.ta+16*O*E+16*_,L=k.dd,D=k.tc;if(0!=D)if(t(3<=D),1==Q.L)0<_&&br(P,B,E,D+4),k.La&&wr(P,B,E,D),0<S&&yr(P,B,E,D+4),k.La&&Er(P,B,E,D);else{var U=Q.B,M=Q.qa,F=Q.ra+8*O*U+8*_,j=Q.Ha,Q=Q.Ia+8*O*U+8*_;O=k.ld,0<_&&(Ar(P,B,E,D+4,L,O),pr(M,F,j,Q,U,D+4,L,O)),k.La&&(mr(P,B,E,D,L,O),vr(M,F,j,Q,U,D,L,O)),0<S&&(ur(P,B,E,D+4,L,O),hr(M,F,j,Q,U,D+4,L,O)),k.La&&(fr(P,B,E,D,L,O),gr(M,F,j,Q,U,D,L,O))}}if(s.ia&&alert("todo:DitherRow"),null!=c.put){if(w=16*I,I=16*(I+1),x?(c.y=s.sa,c.O=s.ta+b,c.f=s.qa,c.N=s.ra+T,c.ea=s.Ha,c.W=s.Ia+T):(w-=y,c.y=h,c.O=p,c.f=f,c.N=u,c.ea=m,c.W=g),v||(I-=y),I>c.o&&(I=c.o),c.F=null,c.J=null,null!=s.Fa&&0<s.Fa.length&&w<I&&(c.J=An(s,c,w,I-w),c.F=s.mb,null==c.F&&0==c.F.length)){l=qe(s,3,"Could not decode alpha data.");break e}w<c.j&&(y=c.j-w,w=c.j,t(!(1&y)),c.O+=s.R*y,c.N+=s.B*(y>>1),c.W+=s.B*(y>>1),null!=c.F&&(c.J+=c.width*y)),w<I&&(c.O+=c.v,c.N+=c.v>>1,c.W+=c.v>>1,null!=c.F&&(c.J+=c.v),c.ka=w-c.j,c.U=c.va-c.v,c.T=I-w,l=c.put(c))}a+1!=s.Ic||v||(r(s.sa,s.ta-d,h,p+16*s.R,d),r(s.qa,s.ra-A,f,u+8*s.B,A),r(s.Ha,s.Ia-A,m,g+8*s.B,A))}if(!l)return qe(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),s&=1}return s?(e.cb=0,s):0}function et(e,t,n,r,i){i=e[t+n+32*r]+(i>>3),e[t+n+32*r]=-256&i?0>i?0:255:i}function tt(e,t,n,r,i,o){et(e,t,0,n,r+i),et(e,t,1,n,r+o),et(e,t,2,n,r-o),et(e,t,3,n,r-i)}function nt(e){return(20091*e>>16)+e}function rt(e,t,n,r){var i,a=0,s=o(16);for(i=0;4>i;++i){var c=e[t+0]+e[t+8],l=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-nt(e[t+12]),u=nt(e[t+4])+(35468*e[t+12]>>16);s[a+0]=c+u,s[a+1]=l+d,s[a+2]=l-d,s[a+3]=c-u,a+=4,t++}for(i=a=0;4>i;++i)c=(e=s[a+0]+4)+s[a+8],l=e-s[a+8],d=(35468*s[a+4]>>16)-nt(s[a+12]),et(n,r,0,0,c+(u=nt(s[a+4])+(35468*s[a+12]>>16))),et(n,r,1,0,l+d),et(n,r,2,0,l-d),et(n,r,3,0,c-u),a++,r+=32}function it(e,t,n,r){var i=e[t+0]+4,o=35468*e[t+4]>>16,a=nt(e[t+4]),s=35468*e[t+1]>>16;tt(n,r,0,i+a,e=nt(e[t+1]),s),tt(n,r,1,i+o,e,s),tt(n,r,2,i-o,e,s),tt(n,r,3,i-a,e,s)}function ot(e,t,n,r,i){rt(e,t,n,r),i&&rt(e,t+16,n,r+4)}function at(e,t,n,r){ar(e,t+0,n,r,1),ar(e,t+32,n,r+128,1)}function st(e,t,n,r){var i;for(e=e[t+0]+4,i=0;4>i;++i)for(t=0;4>t;++t)et(n,r,t,i,e)}function ct(e,t,n,r){e[t+0]&&lr(e,t+0,n,r),e[t+16]&&lr(e,t+16,n,r+4),e[t+32]&&lr(e,t+32,n,r+128),e[t+48]&&lr(e,t+48,n,r+128+4)}function lt(e,t,n,r){var i,a=o(16);for(i=0;4>i;++i){var s=e[t+0+i]+e[t+12+i],c=e[t+4+i]+e[t+8+i],l=e[t+4+i]-e[t+8+i],d=e[t+0+i]-e[t+12+i];a[0+i]=s+c,a[8+i]=s-c,a[4+i]=d+l,a[12+i]=d-l}for(i=0;4>i;++i)s=(e=a[0+4*i]+3)+a[3+4*i],c=a[1+4*i]+a[2+4*i],l=a[1+4*i]-a[2+4*i],d=e-a[3+4*i],n[r+0]=s+c>>3,n[r+16]=d+l>>3,n[r+32]=s-c>>3,n[r+48]=d-l>>3,r+=64}function dt(e,t,n){var r,i=t-32,o=Br,a=255-e[i-1];for(r=0;r<n;++r){var s,c=o,l=a+e[t-1];for(s=0;s<n;++s)e[t+s]=c[l+e[i+s]];t+=32}}function ut(e,t){dt(e,t,4)}function At(e,t){dt(e,t,8)}function ht(e,t){dt(e,t,16)}function pt(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function ft(e,t){var n;for(n=16;0<n;--n)i(e,t,e[t-1],16),t+=32}function mt(e,t,n){var r;for(r=0;16>r;++r)i(t,n+32*r,e,16)}function gt(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];mt(r>>5,e,t)}function vt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];mt(r>>4,e,t)}function yt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];mt(r>>4,e,t)}function bt(e,t){mt(128,e,t)}function Et(e,t,n){return e+2*t+n+2>>2}function wt(e,t){var n,i=t-32;for(i=new Uint8Array([Et(e[i-1],e[i+0],e[i+1]),Et(e[i+0],e[i+1],e[i+2]),Et(e[i+1],e[i+2],e[i+3]),Et(e[i+2],e[i+3],e[i+4])]),n=0;4>n;++n)r(e,t+32*n,i,0,i.length)}function _t(e,t){var n=e[t-1],r=e[t-1+32],i=e[t-1+64],o=e[t-1+96];x(e,t+0,16843009*Et(e[t-1-32],n,r)),x(e,t+32,16843009*Et(n,r,i)),x(e,t+64,16843009*Et(r,i,o)),x(e,t+96,16843009*Et(i,o,o))}function St(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)i(e,t+32*n,r,4)}function Ct(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],o=e[t-1-32],a=e[t+0-32],s=e[t+1-32],c=e[t+2-32],l=e[t+3-32];e[t+0+96]=Et(r,i,e[t-1+96]),e[t+1+96]=e[t+0+64]=Et(n,r,i),e[t+2+96]=e[t+1+64]=e[t+0+32]=Et(o,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=Et(a,o,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=Et(s,a,o),e[t+3+32]=e[t+2+0]=Et(c,s,a),e[t+3+0]=Et(l,c,s)}function Tt(e,t){var n=e[t+1-32],r=e[t+2-32],i=e[t+3-32],o=e[t+4-32],a=e[t+5-32],s=e[t+6-32],c=e[t+7-32];e[t+0+0]=Et(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=Et(n,r,i),e[t+2+0]=e[t+1+32]=e[t+0+64]=Et(r,i,o),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=Et(i,o,a),e[t+3+32]=e[t+2+64]=e[t+1+96]=Et(o,a,s),e[t+3+64]=e[t+2+96]=Et(a,s,c),e[t+3+96]=Et(s,c,c)}function It(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],o=e[t-1-32],a=e[t+0-32],s=e[t+1-32],c=e[t+2-32],l=e[t+3-32];e[t+0+0]=e[t+1+64]=o+a+1>>1,e[t+1+0]=e[t+2+64]=a+s+1>>1,e[t+2+0]=e[t+3+64]=s+c+1>>1,e[t+3+0]=c+l+1>>1,e[t+0+96]=Et(i,r,n),e[t+0+64]=Et(r,n,o),e[t+0+32]=e[t+1+96]=Et(n,o,a),e[t+1+32]=e[t+2+96]=Et(o,a,s),e[t+2+32]=e[t+3+96]=Et(a,s,c),e[t+3+32]=Et(s,c,l)}function Rt(e,t){var n=e[t+0-32],r=e[t+1-32],i=e[t+2-32],o=e[t+3-32],a=e[t+4-32],s=e[t+5-32],c=e[t+6-32],l=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+i+1>>1,e[t+2+0]=e[t+1+64]=i+o+1>>1,e[t+3+0]=e[t+2+64]=o+a+1>>1,e[t+0+32]=Et(n,r,i),e[t+1+32]=e[t+0+96]=Et(r,i,o),e[t+2+32]=e[t+1+96]=Et(i,o,a),e[t+3+32]=e[t+2+96]=Et(o,a,s),e[t+3+64]=Et(a,s,c),e[t+3+96]=Et(s,c,l)}function xt(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],o=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+i+1>>1,e[t+2+32]=e[t+0+64]=i+o+1>>1,e[t+1+0]=Et(n,r,i),e[t+3+0]=e[t+1+32]=Et(r,i,o),e[t+3+32]=e[t+1+64]=Et(i,o,o),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=o}function Nt(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],o=e[t-1+96],a=e[t-1-32],s=e[t+0-32],c=e[t+1-32],l=e[t+2-32];e[t+0+0]=e[t+2+32]=n+a+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=i+r+1>>1,e[t+0+96]=o+i+1>>1,e[t+3+0]=Et(s,c,l),e[t+2+0]=Et(a,s,c),e[t+1+0]=e[t+3+32]=Et(n,a,s),e[t+1+32]=e[t+3+64]=Et(r,n,a),e[t+1+64]=e[t+3+96]=Et(i,r,n),e[t+1+96]=Et(o,i,r)}function Ot(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function kt(e,t){var n;for(n=0;8>n;++n)i(e,t,e[t-1],8),t+=32}function Pt(e,t,n){var r;for(r=0;8>r;++r)i(t,n+32*r,e,8)}function Bt(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Pt(r>>4,e,t)}function Lt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Pt(r>>3,e,t)}function Dt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Pt(r>>3,e,t)}function Ut(e,t){Pt(128,e,t)}function Mt(e,t,n){var r=e[t-n],i=e[t+0],o=3*(i-r)+kr[1020+e[t-2*n]-e[t+n]],a=Pr[112+(o+4>>3)];e[t-n]=Br[255+r+Pr[112+(o+3>>3)]],e[t+0]=Br[255+i-a]}function Ft(e,t,n,r){var i=e[t+0],o=e[t+n];return Lr[255+e[t-2*n]-e[t-n]]>r||Lr[255+o-i]>r}function jt(e,t,n,r){return 4*Lr[255+e[t-n]-e[t+0]]+Lr[255+e[t-2*n]-e[t+n]]<=r}function Qt(e,t,n,r,i){var o=e[t-3*n],a=e[t-2*n],s=e[t-n],c=e[t+0],l=e[t+n],d=e[t+2*n],u=e[t+3*n];return 4*Lr[255+s-c]+Lr[255+a-l]>r?0:Lr[255+e[t-4*n]-o]<=i&&Lr[255+o-a]<=i&&Lr[255+a-s]<=i&&Lr[255+u-d]<=i&&Lr[255+d-l]<=i&&Lr[255+l-c]<=i}function Vt(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)jt(e,t+r,n,i)&&Mt(e,t+r,n)}function Ht(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)jt(e,t+r*n,1,i)&&Mt(e,t+r*n,1)}function zt(e,t,n,r){var i;for(i=3;0<i;--i)Vt(e,t+=4*n,n,r)}function Kt(e,t,n,r){var i;for(i=3;0<i;--i)Ht(e,t+=4,n,r)}function Gt(e,t,n,r,i,o,a,s){for(o=2*o+1;0<i--;){if(Qt(e,t,n,o,a))if(Ft(e,t,n,s))Mt(e,t,n);else{var c=e,l=t,d=n,u=c[l-2*d],A=c[l-d],h=c[l+0],p=c[l+d],f=c[l+2*d],m=27*(v=kr[1020+3*(h-A)+kr[1020+u-p]])+63>>7,g=18*v+63>>7,v=9*v+63>>7;c[l-3*d]=Br[255+c[l-3*d]+v],c[l-2*d]=Br[255+u+g],c[l-d]=Br[255+A+m],c[l+0]=Br[255+h-m],c[l+d]=Br[255+p-g],c[l+2*d]=Br[255+f-v]}t+=r}}function Wt(e,t,n,r,i,o,a,s){for(o=2*o+1;0<i--;){if(Qt(e,t,n,o,a))if(Ft(e,t,n,s))Mt(e,t,n);else{var c=e,l=t,d=n,u=c[l-d],A=c[l+0],h=c[l+d],p=Pr[112+(4+(f=3*(A-u))>>3)],f=Pr[112+(f+3>>3)],m=p+1>>1;c[l-2*d]=Br[255+c[l-2*d]+m],c[l-d]=Br[255+u+f],c[l+0]=Br[255+A-p],c[l+d]=Br[255+h-m]}t+=r}}function qt(e,t,n,r,i,o){Gt(e,t,n,1,16,r,i,o)}function Yt(e,t,n,r,i,o){Gt(e,t,1,n,16,r,i,o)}function Xt(e,t,n,r,i,o){var a;for(a=3;0<a;--a)Wt(e,t+=4*n,n,1,16,r,i,o)}function Jt(e,t,n,r,i,o){var a;for(a=3;0<a;--a)Wt(e,t+=4,1,n,16,r,i,o)}function Zt(e,t,n,r,i,o,a,s){Gt(e,t,i,1,8,o,a,s),Gt(n,r,i,1,8,o,a,s)}function $t(e,t,n,r,i,o,a,s){Gt(e,t,1,i,8,o,a,s),Gt(n,r,1,i,8,o,a,s)}function en(e,t,n,r,i,o,a,s){Wt(e,t+4*i,i,1,8,o,a,s),Wt(n,r+4*i,i,1,8,o,a,s)}function tn(e,t,n,r,i,o,a,s){Wt(e,t+4,1,i,8,o,a,s),Wt(n,r+4,1,i,8,o,a,s)}function nn(){this.ba=new ae,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ce,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function on(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function an(){this.ua=0,this.Wa=new L,this.vb=new L,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new h,this.yc=new u}function sn(){this.xb=this.a=0,this.l=new Ge,this.ca=new ae,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new E,this.Pb=0,this.wd=new E,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new an,this.ab=0,this.gc=a(4,on),this.Oc=0}function cn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ln(e,t,n,r,i,o,a){for(e=null==e?0:e[t+0],t=0;t<a;++t)i[o+t]=e+n[r+t]&255,e=i[o+t]}function dn(e,t,n,r,i,o,a){var s;if(null==e)ln(null,null,n,r,i,o,a);else for(s=0;s<a;++s)i[o+s]=e[t+s]+n[r+s]&255}function un(e,t,n,r,i,o,a){if(null==e)ln(null,null,n,r,i,o,a);else{var s,c=e[t+0],l=c,d=c;for(s=0;s<a;++s)l=d+(c=e[t+s])-l,d=n[r+s]+(-256&l?0>l?0:255:l)&255,l=c,i[o+s]=d}}function An(e,n,i,a){var s=n.width,c=n.o;if(t(null!=e&&null!=n),0>i||0>=a||i+a>c)return null;if(!e.Cc){if(null==e.ga){var l;if(e.ga=new cn,(l=null==e.ga)||(l=n.width*n.o,t(0==e.Gb.length),e.Gb=o(l),e.Uc=0,null==e.Gb?l=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,l=1),l=!l),!l){l=e.ga;var d=e.Fa,u=e.P,A=e.qc,h=e.mb,p=e.nb,f=u+1,m=A-1,v=l.l;if(t(null!=d&&null!=h&&null!=n),mi[0]=null,mi[1]=ln,mi[2]=dn,mi[3]=un,l.ca=h,l.tb=p,l.c=n.width,l.i=n.height,t(0<l.c&&0<l.i),1>=A)n=0;else if(l.$a=3&d[u+0],l.Z=d[u+0]>>2&3,l.Lc=d[u+0]>>4&3,u=d[u+0]>>6&3,0>l.$a||1<l.$a||4<=l.Z||1<l.Lc||u)n=0;else if(v.put=he,v.ac=Ae,v.bc=pe,v.ma=l,v.width=n.width,v.height=n.height,v.Da=n.Da,v.v=n.v,v.va=n.va,v.j=n.j,v.o=n.o,l.$a)e:{t(1==l.$a),n=Re();t:for(;;){if(null==n){n=0;break e}if(t(null!=l),l.mc=n,n.c=l.c,n.i=l.i,n.l=l.l,n.l.ma=l,n.l.width=l.c,n.l.height=l.i,n.a=0,g(n.m,d,f,m),!xe(l.c,l.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&_e(n.s)?(l.ic=1,d=n.c*n.i,n.Ta=null,n.Ua=0,n.V=o(d),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(l.ic=0,n=Ne(n,l.c)),!n)break t;n=1;break e}l.mc=null,n=0}else n=m>=l.c*l.i;l=!n}if(l)return null;1!=e.ga.Lc?e.Ga=0:a=c-i}t(null!=e.ga),t(i+a<=c);e:{if(n=(d=e.ga).c,c=d.l.o,0==d.$a){if(f=e.rc,m=e.Vc,v=e.Fa,u=e.P+1+i*n,A=e.mb,h=e.nb+i*n,t(u<=e.P+e.qc),0!=d.Z)for(t(null!=mi[d.Z]),l=0;l<a;++l)mi[d.Z](f,m,v,u,A,h,n),f=A,m=h,h+=n,u+=n;else for(l=0;l<a;++l)r(A,h,v,u,n),f=A,m=h,h+=n,u+=n;e.rc=f,e.Vc=m}else{if(t(null!=d.mc),n=i+a,t(null!=(l=d.mc)),t(n<=l.i),l.C>=n)n=1;else if(d.ic||gn(),d.ic){d=l.V,f=l.Ba,m=l.c;var y=l.i,b=(v=1,u=l.$/m,A=l.$%m,h=l.m,p=l.s,l.$),E=m*y,w=m*n,S=p.wc,T=b<w?be(p,A,u):null;t(b<=E),t(n<=y),t(_e(p));t:for(;;){for(;!h.h&&b<w;){if(A&S||(T=be(p,A,u)),t(null!=T),C(h),256>(y=ve(T.G[0],T.H[0],h)))d[f+b]=y,++b,++A>=m&&(A=0,++u<=n&&!(u%16)&&Ce(l,u));else{if(!(280>y)){v=0;break t}y=me(y-256,h);var I,R=ve(T.G[4],T.H[4],h);if(C(h),!(b>=(R=ge(m,R=me(R,h)))&&E-b>=y)){v=0;break t}for(I=0;I<y;++I)d[f+b+I]=d[f+b+I-R];for(b+=y,A+=y;A>=m;)A-=m,++u<=n&&!(u%16)&&Ce(l,u);b<w&&A&S&&(T=be(p,A,u))}t(h.h==_(h))}Ce(l,u>n?n:u);break t}!v||h.h&&b<E?(v=0,l.a=h.h?5:3):l.$=b,n=v}else n=Te(l,l.V,l.Ba,l.c,l.i,n,Oe);if(!n){a=0;break e}}i+a>=c&&(e.Cc=1),a=1}if(!a)return null;if(e.Cc&&(null!=(a=e.ga)&&(a.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+i*s}function hn(e,t,n,r,i,o){for(;0<i--;){var a,s=e,c=t+(n?1:0),l=e,d=t+(n?0:3);for(a=0;a<r;++a){var u=l[d+4*a];255!=u&&(u*=32897,s[c+4*a+0]=s[c+4*a+0]*u>>23,s[c+4*a+1]=s[c+4*a+1]*u>>23,s[c+4*a+2]=s[c+4*a+2]*u>>23)}t+=o}}function pn(e,t,n,r,i){for(;0<r--;){var o;for(o=0;o<n;++o){var a=e[t+2*o+0],s=15&(l=e[t+2*o+1]),c=4369*s,l=(240&l|l>>4)*c>>16;e[t+2*o+0]=(240&a|a>>4)*c>>16&240|(15&a|a<<4)*c>>16>>4&15,e[t+2*o+1]=240&l|s}t+=i}}function fn(e,t,n,r,i,o,a,s){var c,l,d=255;for(l=0;l<i;++l){for(c=0;c<r;++c){var u=e[t+c];o[a+4*c]=u,d&=u}t+=n,a+=s}return 255!=d}function mn(e,t,n,r,i){var o;for(o=0;o<i;++o)n[r+o]=e[t+o]>>8}function gn(){_r=hn,Sr=pn,Cr=fn,Tr=mn}function vn(n,r,i){e[n]=function(e,n,o,a,s,c,l,d,u,A,h,p,f,m,g,v,y){var b,E=y-1>>1,w=s[c+0]|l[d+0]<<16,_=u[A+0]|h[p+0]<<16;t(null!=e);var S=3*w+_+131074>>2;for(r(e[n+0],255&S,S>>16,f,m),null!=o&&(S=3*_+w+131074>>2,r(o[a+0],255&S,S>>16,g,v)),b=1;b<=E;++b){var C=s[c+b]|l[d+b]<<16,T=u[A+b]|h[p+b]<<16,I=w+C+_+T+524296,R=I+2*(C+_)>>3;S=R+w>>1,w=(I=I+2*(w+T)>>3)+C>>1,r(e[n+2*b-1],255&S,S>>16,f,m+(2*b-1)*i),r(e[n+2*b-0],255&w,w>>16,f,m+(2*b-0)*i),null!=o&&(S=I+_>>1,w=R+T>>1,r(o[a+2*b-1],255&S,S>>16,g,v+(2*b-1)*i),r(o[a+2*b+0],255&w,w>>16,g,v+(2*b+0)*i)),w=C,_=T}1&y||(S=3*w+_+131074>>2,r(e[n+y-1],255&S,S>>16,f,m+(y-1)*i),null!=o&&(S=3*_+w+131074>>2,r(o[a+y-1],255&S,S>>16,g,v+(y-1)*i)))}}function yn(){gi[Dr]=vi,gi[Ur]=bi,gi[Mr]=yi,gi[Fr]=Ei,gi[jr]=wi,gi[Qr]=_i,gi[Vr]=Si,gi[Hr]=bi,gi[zr]=Ei,gi[Kr]=wi,gi[Gr]=_i}function bn(e){return e&~Ni?0>e?0:255:e>>xi}function En(e,t){return bn((19077*e>>8)+(26149*t>>8)-14234)}function wn(e,t,n){return bn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function _n(e,t){return bn((19077*e>>8)+(33050*t>>8)-17685)}function Sn(e,t,n,r,i){r[i+0]=En(e,n),r[i+1]=wn(e,t,n),r[i+2]=_n(e,t)}function Cn(e,t,n,r,i){r[i+0]=_n(e,t),r[i+1]=wn(e,t,n),r[i+2]=En(e,n)}function Tn(e,t,n,r,i){var o=wn(e,t,n);t=o<<3&224|_n(e,t)>>3,r[i+0]=248&En(e,n)|o>>5,r[i+1]=t}function In(e,t,n,r,i){var o=240&_n(e,t)|15;r[i+0]=240&En(e,n)|wn(e,t,n)>>4,r[i+1]=o}function Rn(e,t,n,r,i){r[i+0]=255,Sn(e,t,n,r,i+1)}function xn(e,t,n,r,i){Cn(e,t,n,r,i),r[i+3]=255}function Nn(e,t,n,r,i){Sn(e,t,n,r,i),r[i+3]=255}function Ke(e,t){return 0>e?0:e>t?t:e}function On(t,n,r){e[t]=function(e,t,i,o,a,s,c,l,d){for(var u=l+(-2&d)*r;l!=u;)n(e[t+0],i[o+0],a[s+0],c,l),n(e[t+1],i[o+0],a[s+0],c,l+r),t+=2,++o,++s,l+=2*r;1&d&&n(e[t+0],i[o+0],a[s+0],c,l)}}function kn(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Pn(e,t,n,r,i){switch(e>>>30){case 3:ar(t,n,r,i,0);break;case 2:sr(t,n,r,i);break;case 1:lr(t,n,r,i)}}function Bn(e,t){var n,o,a=t.M,s=t.Nb,c=e.oc,l=e.pc+40,d=e.oc,u=e.pc+584,A=e.oc,h=e.pc+600;for(n=0;16>n;++n)c[l+32*n-1]=129;for(n=0;8>n;++n)d[u+32*n-1]=129,A[h+32*n-1]=129;for(0<a?c[l-1-32]=d[u-1-32]=A[h-1-32]=129:(i(c,l-32-1,127,21),i(d,u-32-1,127,9),i(A,h-32-1,127,9)),o=0;o<e.za;++o){var p=t.ya[t.aa+o];if(0<o){for(n=-1;16>n;++n)r(c,l+32*n-4,c,l+32*n+12,4);for(n=-1;8>n;++n)r(d,u+32*n-4,d,u+32*n+4,4),r(A,h+32*n-4,A,h+32*n+4,4)}var f=e.Gd,m=e.Hd+o,g=p.ad,v=p.Hc;if(0<a&&(r(c,l-32,f[m].y,0,16),r(d,u-32,f[m].f,0,8),r(A,h-32,f[m].ea,0,8)),p.Za){var y=c,b=l-32+16;for(0<a&&(o>=e.za-1?i(y,b,f[m].y[15],4):r(y,b,f[m+1].y,0,4)),n=0;4>n;n++)y[b+128+n]=y[b+256+n]=y[b+384+n]=y[b+0+n];for(n=0;16>n;++n,v<<=2)y=c,b=l+Mi[n],Ai[p.Ob[n]](y,b),Pn(v,g,16*+n,y,b)}else if(y=kn(o,a,p.Ob[0]),ui[y](c,l),0!=v)for(n=0;16>n;++n,v<<=2)Pn(v,g,16*+n,c,l+Mi[n]);for(n=p.Gc,y=kn(o,a,p.Dd),hi[y](d,u),hi[y](A,h),v=g,y=d,b=u,255&(p=n|0)&&(170&p?cr(v,256,y,b):dr(v,256,y,b)),p=A,v=h,255&(n>>=8)&&(170&n?cr(g,320,p,v):dr(g,320,p,v)),a<e.Ub-1&&(r(f[m].y,0,c,l+480,16),r(f[m].f,0,d,u+224,8),r(f[m].ea,0,A,h+224,8)),n=8*s*e.B,f=e.sa,m=e.ta+16*o+16*s*e.R,g=e.qa,p=e.ra+8*o+n,v=e.Ha,y=e.Ia+8*o+n,n=0;16>n;++n)r(f,m+n*e.R,c,l+32*n,16);for(n=0;8>n;++n)r(g,p+n*e.B,d,u+32*n,8),r(v,y+n*e.B,A,h+32*n,8)}}function Ln(e,r,i,o,a,s,c,l,d){var u=[0],A=[0],h=0,p=null!=d?d.kd:0,f=null!=d?d:new rn;if(null==e||12>i)return 7;f.data=e,f.w=r,f.ha=i,r=[r],i=[i],f.gb=[f.gb];e:{var m=r,v=i,y=f.gb;if(t(null!=e),t(null!=v),t(null!=y),y[0]=0,12<=v[0]&&!n(e,m[0],"RIFF")){if(n(e,m[0]+8,"WEBP")){y=3;break e}var b=k(e,m[0]+4);if(12>b||4294967286<b){y=3;break e}if(p&&b>v[0]-8){y=7;break e}y[0]=b,m[0]+=12,v[0]-=12}y=0}if(0!=y)return y;for(b=0<f.gb[0],i=i[0];;){e:{var w=e;v=r,y=i;var _=u,S=A,C=m=[0];if((R=h=[h])[0]=0,8>y[0])y=7;else{if(!n(w,v[0],"VP8X")){if(10!=k(w,v[0]+4)){y=3;break e}if(18>y[0]){y=7;break e}var T=k(w,v[0]+8),I=1+O(w,v[0]+12);if(2147483648<=I*(w=1+O(w,v[0]+15))){y=3;break e}null!=C&&(C[0]=T),null!=_&&(_[0]=I),null!=S&&(S[0]=w),v[0]+=18,y[0]-=18,R[0]=1}y=0}}if(h=h[0],m=m[0],0!=y)return y;if(v=!!(2&m),!b&&h)return 3;if(null!=s&&(s[0]=!!(16&m)),null!=c&&(c[0]=v),null!=l&&(l[0]=0),c=u[0],m=A[0],h&&v&&null==d){y=0;break}if(4>i){y=7;break}if(b&&h||!b&&!h&&!n(e,r[0],"ALPH")){i=[i],f.na=[f.na],f.P=[f.P],f.Sa=[f.Sa];e:{T=e,y=r,b=i;var R=f.gb;_=f.na,S=f.P,C=f.Sa,I=22,t(null!=T),t(null!=b),w=y[0];var x=b[0];for(t(null!=_),t(null!=C),_[0]=null,S[0]=null,C[0]=0;;){if(y[0]=w,b[0]=x,8>x){y=7;break e}var N=k(T,w+4);if(4294967286<N){y=3;break e}var P=8+N+1&-2;if(I+=P,0<R&&I>R){y=3;break e}if(!n(T,w,"VP8 ")||!n(T,w,"VP8L")){y=0;break e}if(x[0]<P){y=7;break e}n(T,w,"ALPH")||(_[0]=T,S[0]=w+8,C[0]=N),w+=P,x-=P}}if(i=i[0],f.na=f.na[0],f.P=f.P[0],f.Sa=f.Sa[0],0!=y)break}i=[i],f.Ja=[f.Ja],f.xa=[f.xa];e:if(R=e,y=r,b=i,_=f.gb[0],S=f.Ja,C=f.xa,T=y[0],w=!n(R,T,"VP8 "),I=!n(R,T,"VP8L"),t(null!=R),t(null!=b),t(null!=S),t(null!=C),8>b[0])y=7;else{if(w||I){if(R=k(R,T+4),12<=_&&R>_-12){y=3;break e}if(p&&R>b[0]-8){y=7;break e}S[0]=R,y[0]+=8,b[0]-=8,C[0]=I}else C[0]=5<=b[0]&&47==R[T+0]&&!(R[T+4]>>5),S[0]=b[0];y=0}if(i=i[0],f.Ja=f.Ja[0],f.xa=f.xa[0],r=r[0],0!=y)break;if(4294967286<f.Ja)return 3;if(null==l||v||(l[0]=f.xa?2:1),c=[c],m=[m],f.xa){if(5>i){y=7;break}l=c,p=m,v=s,null==e||5>i?e=0:5<=i&&47==e[r+0]&&!(e[r+4]>>5)?(b=[0],R=[0],_=[0],g(S=new E,e,r,i),fe(S,b,R,_)?(null!=l&&(l[0]=b[0]),null!=p&&(p[0]=R[0]),null!=v&&(v[0]=_[0]),e=1):e=0):e=0}else{if(10>i){y=7;break}l=m,null==e||10>i||!Ye(e,r+3,i-3)?e=0:(p=e[r+0]|e[r+1]<<8|e[r+2]<<16,v=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=f.Ja||!v||!e?e=0:(c&&(c[0]=v),l&&(l[0]=e),e=1))}if(!e)return 3;if(c=c[0],m=m[0],h&&(u[0]!=c||A[0]!=m))return 3;null!=d&&(d[0]=f,d.offset=r-d.w,t(4294967286>r-d.w),t(d.offset==d.ha-i));break}return 0==y||7==y&&h&&null==d?(null!=s&&(s[0]|=null!=f.na&&0<f.na.length),null!=o&&(o[0]=c),null!=a&&(a[0]=m),0):y}function Dn(e,t,n){var r=t.width,i=t.height,o=0,a=0,s=r,c=i;if(t.Da=null!=e&&0<e.Da,t.Da&&(s=e.cd,c=e.bd,o=e.v,a=e.j,11>n||(o&=-2,a&=-2),0>o||0>a||0>=s||0>=c||o+s>r||a+c>i))return 0;if(t.v=o,t.j=a,t.va=o+s,t.o=a+c,t.U=s,t.T=c,t.da=null!=e&&0<e.da,t.da){if(!D(s,c,n=[e.ib],o=[e.hb]))return 0;t.ib=n[0],t.hb=o[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*i/4,t.Kb=0),1}function Un(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Mn(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var i=n.cd,a=n.bd,s=-2&n.v,c=-2&n.j;if(0>s||0>c||0>=i||0>=a||s+i>e||c+a>t)return 2;e=i,t=a}if(n.da){if(!D(e,t,i=[n.ib],a=[n.hb]))return 2;e=i[0],t=a[0]}}r.width=e,r.height=t;e:{var l=r.width,d=r.height;if(e=r.S,0>=l||0>=d||!(e>=Dr&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){s=a=i=t=0;var u=(c=l*Vi[e])*d;if(11>e||(a=(d+1)/2*(t=(l+1)/2),12==e&&(s=(i=l)*d)),null==(d=o(u+2*a+s))){e=1;break e}r.sd=d,11>e?((l=r.f.RGBA).eb=d,l.fb=0,l.A=c,l.size=u):((l=r.f.kb).y=d,l.O=0,l.fa=c,l.Fd=u,l.f=d,l.N=0+u,l.Ab=t,l.Cd=a,l.ea=d,l.W=0+u+a,l.Db=t,l.Ed=a,12==e&&(l.F=d,l.J=0+u+2*a),l.Tc=s,l.lb=i)}if(t=1,i=r.S,a=r.width,s=r.height,i>=Dr&&13>i)if(11>i)e=r.f.RGBA,t&=(c=Math.abs(e.A))*(s-1)+a<=e.size,t&=c>=a*Vi[i],t&=null!=e.eb;else{e=r.f.kb,c=(a+1)/2,u=(s+1)/2,l=Math.abs(e.fa),d=Math.abs(e.Ab);var A=Math.abs(e.Db),h=Math.abs(e.lb),p=h*(s-1)+a;t&=l*(s-1)+a<=e.Fd,t&=d*(u-1)+c<=e.Cd,t=(t&=A*(u-1)+c<=e.Ed)&l>=a&d>=c&A>=c,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==i&&(t&=h>=a,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Un(r)),e}var Fn=64,jn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Qn=24,Vn=32,Hn=8,zn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];F("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return Q(Q(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return Q(e,t[n-1])},e.Predictor7=function(e,t,n){return Q(e,t[n+0])},e.Predictor8=function(e,t,n){return Q(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return Q(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return Q(Q(e,t[n-1]),Q(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=z(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+z(r>>16&255,e>>16&255,t>>16&255)+z(r>>8&255,e>>8&255,t>>8&255)+z(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(V((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|V((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|V((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|V((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(H((e=Q(e,t[n+0]))>>24&255,r>>24&255)<<24|H(e>>16&255,r>>16&255)<<16|H(e>>8&255,r>>8&255)<<8|H(255&e,255&r))>>>0};var Kn=e.PredictorAdd0;e.PredictorAdd1=K,F("Predictor2","PredictorAdd2"),F("Predictor3","PredictorAdd3"),F("Predictor4","PredictorAdd4"),F("Predictor5","PredictorAdd5"),F("Predictor6","PredictorAdd6"),F("Predictor7","PredictorAdd7"),F("Predictor8","PredictorAdd8"),F("Predictor9","PredictorAdd9"),F("Predictor10","PredictorAdd10"),F("Predictor11","PredictorAdd11"),F("Predictor12","PredictorAdd12"),F("Predictor13","PredictorAdd13");var Gn=e.PredictorAdd2;Y("ColorIndexInverseTransform","MapARGB","32b",(function(e){return e>>8&255}),(function(e){return e})),Y("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(e){return e}),(function(e){return e>>8&255}));var Wn,qn=e.ColorIndexInverseTransform,Yn=e.MapARGB,Xn=e.VP8LColorIndexInverseTransformAlpha,Jn=e.MapAlpha,Zn=e.VP8LPredictorsAdd=[];Zn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var $n,er,tr,nr,rr,ir,or,ar,sr,cr,lr,dr,ur,Ar,hr,pr,fr,mr,gr,vr,yr,br,Er,wr,_r,Sr,Cr,Tr,Ir=o(511),Rr=o(2041),xr=o(225),Nr=o(767),Or=0,kr=Rr,Pr=xr,Br=Nr,Lr=Ir,Dr=0,Ur=1,Mr=2,Fr=3,jr=4,Qr=5,Vr=6,Hr=7,zr=8,Kr=9,Gr=10,Wr=[2,3,7],qr=[3,3,11],Yr=[280,256,256,256,40],Xr=[0,1,1,1,0],Jr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$r=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ei=8,ti=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ni=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ri=null,ii=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],oi=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ai=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],si=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ci=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],li=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],di=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ui=[],Ai=[],hi=[],pi=1,fi=2,mi=[],gi=[];vn("UpsampleRgbLinePair",Sn,3),vn("UpsampleBgrLinePair",Cn,3),vn("UpsampleRgbaLinePair",Nn,4),vn("UpsampleBgraLinePair",xn,4),vn("UpsampleArgbLinePair",Rn,4),vn("UpsampleRgba4444LinePair",In,2),vn("UpsampleRgb565LinePair",Tn,2);var vi=e.UpsampleRgbLinePair,yi=e.UpsampleBgrLinePair,bi=e.UpsampleRgbaLinePair,Ei=e.UpsampleBgraLinePair,wi=e.UpsampleArgbLinePair,_i=e.UpsampleRgba4444LinePair,Si=e.UpsampleRgb565LinePair,Ci=16,Ti=1<<Ci-1,Ii=-227,Ri=482,xi=6,Ni=(256<<xi)-1,Oi=0,ki=o(256),Pi=o(256),Bi=o(256),Li=o(256),Di=o(Ri-Ii),Ui=o(Ri-Ii);On("YuvToRgbRow",Sn,3),On("YuvToBgrRow",Cn,3),On("YuvToRgbaRow",Nn,4),On("YuvToBgraRow",xn,4),On("YuvToArgbRow",Rn,4),On("YuvToRgba4444Row",In,2),On("YuvToRgb565Row",Tn,2);var Mi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Fi=[0,2,8],ji=[8,7,6,4,4,2,2,2,1,1,1,1],Qi=1;this.WebPDecodeRGBA=function(e,n,r,i,o){var a=Ur,s=new nn,c=new ae;s.ba=c,c.S=a,c.width=[c.width],c.height=[c.height];var l=c.width,d=c.height,u=new se;if(null==u||null==e)var A=2;else t(null!=u),A=Ln(e,n,r,u.width,u.height,u.Pd,u.Qd,u.format,null);if(0!=A?l=0:(null!=l&&(l[0]=u.width[0]),null!=d&&(d[0]=u.height[0]),l=1),l){c.width=c.width[0],c.height=c.height[0],null!=i&&(i[0]=c.width),null!=o&&(o[0]=c.height);e:{if(i=new Ge,(o=new rn).data=e,o.w=n,o.ha=r,o.kd=1,n=[0],t(null!=o),(0==(e=Ln(o.data,o.w,o.ha,null,null,null,n,null,o))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=s),i.data=o.data,i.w=o.w+o.offset,i.ha=o.ha-o.offset,i.put=he,i.ac=Ae,i.bc=pe,i.ma=s,o.xa){if(null==(e=Re())){s=1;break e}if(function(e,n){var r=[0],i=[0],o=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,g(e.m,n.data,n.w,n.ha),!fe(e.m,r,i,o)){e.a=3;break t}if(e.xb=fi,n.width=r[0],n.height=i[0],!xe(r[0],i[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,i)){if(i=0==(n=Mn(i.width,i.height,s.Oa,s.ba))){t:{i=e;n:for(;;){if(null==i){i=0;break t}if(t(null!=i.s.yc),t(null!=i.s.Ya),t(0<i.s.Wb),t(null!=(r=i.l)),t(null!=(o=r.ma)),0!=i.xb){if(i.ca=o.ba,i.tb=o.tb,t(null!=i.ca),!Dn(o.Oa,r,Fr)){i.a=2;break n}if(!Ne(i,r.width))break n;if(r.da)break n;if((r.da||re(i.ca.S))&&gn(),11>i.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=i.ca.f.kb.F&&gn()),i.Pb&&0<i.s.ua&&null==i.s.vb.X&&!P(i.s.vb,i.s.Wa.Xa)){i.a=1;break n}i.xb=0}if(!Te(i,i.V,i.Ba,i.c,i.i,r.o,we))break n;o.Dc=i.Ma,i=1;break t}t(0!=i.a),i=0}i=!i}i&&(n=e.a)}else n=e.a}else{if(null==(e=new We)){s=1;break e}if(e.Fa=o.na,e.P=o.P,e.qc=o.Sa,Xe(e,i)){if(0==(n=Mn(i.width,i.height,s.Oa,s.ba))){if(e.Aa=0,r=s.Oa,t(null!=(o=e)),null!=r){if(0<(l=0>(l=r.Md)?0:100<l?255:255*l/100)){for(d=u=0;4>d;++d)12>(A=o.pb[d]).lc&&(A.ia=l*ji[0>A.lc?0:A.lc]>>3),u|=A.ia;u&&(alert("todo:VP8InitRandom"),o.ia=1)}o.Ga=r.Id,100<o.Ga?o.Ga=100:0>o.Ga&&(o.Ga=0)}$e(e,i)||(n=e.a)}}else n=e.a}0==n&&null!=s.Oa&&s.Oa.fd&&(n=Un(s.ba))}s=n}a=0!=s?null:11>a?c.f.RGBA.eb:c.f.kb.y}else a=null;return a};var Vi=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new c;var A=[0],h=[0],p=[],f=new c,m=e,g=function(e,t){var n={},r=0,i=!1,o=0,a=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){for(u(e,t+=4),t+=8;t<e.length;){var s=l(e,t),c=u(e,t+=4);t+=4;var A=c+(1&c);switch(s){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(f=n.frames[r]).src_off=i?a:t-8,f.src_size=o+c+8,r++,i&&(i=!1,o=0,a=0);break;case"VP8X":(f=n.header={}).feature_flags=e[t];var h=t+4;f.canvas_width=1+d(e,h),h+=3,f.canvas_height=1+d(e,h),h+=3;break;case"ALPH":i=!0,o=A+8,a=t-8;break;case"ANIM":(f=n.header).bgcolor=u(e,t),h=t+4,f.loop_count=(m=e)[(g=h)+0]|m[g+1]<<8,h+=2;break;case"ANMF":var p,f;(f=n.frames[r]={}).offset_x=2*d(e,t),t+=3,f.offset_y=2*d(e,t),t+=3,f.width=1+d(e,t),t+=3,f.height=1+d(e,t),t+=3,f.duration=d(e,t),t+=3,p=e[t++],f.dispose=1&p,f.blend=p>>1&1}"ANMF"!=s&&(t+=A)}var m,g;return n}}(m,0);g.response=m,g.rgbaoutput=!0,g.dataurl=!1;var v=g.header?g.header:null,y=g.frames?g.frames:null;if(v){v.loop_counter=v.loop_count,A=[v.canvas_height],h=[v.canvas_width];for(var b=0;b<y.length&&0!=y[b].blend;b++);}var E=y[0],w=f.WebPDecodeRGBA(m,E.src_off,E.src_size,h,A);E.rgba=w,E.imgwidth=h[0],E.imgheight=A[0];for(var _=0;_<h[0]*A[0]*4;_++)p[_]=w[_];return this.width=h,this.height=A,this.data=p,this}!function(e){var t=function(t,r,c,l){var d=4,u=o;switch(l){case e.image_compression.FAST:d=1,u=i;break;case e.image_compression.MEDIUM:d=6,u=a;break;case e.image_compression.SLOW:d=9,u=s}var A=EI(t=n(t,r,c,u),{level:d});return e.__addimage__.arrayBufferToBinaryString(A)},n=function(e,t,n,r){for(var i,o,a,s=e.length/t,c=new Uint8Array(e.length+s),u=l(),A=0;A<s;A+=1){if(a=A*t,i=e.subarray(a,a+t),r)c.set(r(i,n,o),a+A);else{for(var h,p=u.length,f=[];h<p;h+=1)f[h]=u[h](i,n,o);var m=d(f.concat());c.set(f[m],a+A)}o=i}return c},r=function(e){var t=Array.apply([],e);return t.unshift(0),t},i=function(e,t){var n,r=[],i=e.length;r[0]=1;for(var o=0;o<i;o+=1)n=e[o-t]||0,r[o+1]=e[o]-n+256&255;return r},o=function(e,t,n){var r,i=[],o=e.length;i[0]=2;for(var a=0;a<o;a+=1)r=n&&n[a]||0,i[a+1]=e[a]-r+256&255;return i},a=function(e,t,n){var r,i,o=[],a=e.length;o[0]=3;for(var s=0;s<a;s+=1)r=e[s-t]||0,i=n&&n[s]||0,o[s+1]=e[s]+256-(r+i>>>1)&255;return o},s=function(e,t,n){var r,i,o,a,s=[],l=e.length;s[0]=4;for(var d=0;d<l;d+=1)r=e[d-t]||0,i=n&&n[d]||0,o=n&&n[d-t]||0,a=c(r,i,o),s[d+1]=e[d]-a+256&255;return s},c=function(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),i=Math.abs(e-n),o=Math.abs(e+t-n-n);return r<=i&&r<=o?e:i<=o?t:n},l=function(){return[r,i,o,a,s]},d=function(e){var t=e.map((function(e){return e.reduce((function(e,t){return e+Math.abs(t)}),0)}));return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,r,i,o){var a,s,c,l,d,u,A,h,p,f,m,g,v,y,b,E=this.decode.FLATE_DECODE,w="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(c=new px(n)).imgData,s=c.bits,a=c.colorSpace,d=c.colors,-1!==[4,6].indexOf(c.colorType)){if(8===c.bits){p=(h=32==c.pixelBitlength?new Uint32Array(c.decodePixels().buffer):16==c.pixelBitlength?new Uint16Array(c.decodePixels().buffer):new Uint8Array(c.decodePixels().buffer)).length,m=new Uint8Array(p*c.colors),f=new Uint8Array(p);var _,S=c.pixelBitlength-c.bits;for(y=0,b=0;y<p;y++){for(v=h[y],_=0;_<S;)m[b++]=v>>>_&255,_+=c.bits;f[y]=v>>>_&255}}if(16===c.bits){p=(h=new Uint32Array(c.decodePixels().buffer)).length,m=new Uint8Array(p*(32/c.pixelBitlength)*c.colors),f=new Uint8Array(p*(32/c.pixelBitlength)),g=c.colors>1,y=0,b=0;for(var C=0;y<p;)v=h[y++],m[b++]=v>>>0&255,g&&(m[b++]=v>>>16&255,v=h[y++],m[b++]=v>>>0&255),f[C++]=v>>>16&255;s=8}o!==e.image_compression.NONE?(n=t(m,c.width*c.colors,c.colors,o),A=t(f,c.width,1,o)):(n=m,A=f,E=void 0)}if(3===c.colorType&&(a=this.color_spaces.INDEXED,u=c.palette,c.transparency.indexed)){var T=c.transparency.indexed,I=0;for(y=0,p=T.length;y<p;++y)I+=T[y];if((I/=255)===p-1&&-1!==T.indexOf(0))l=[T.indexOf(0)];else if(I!==p){for(h=c.decodePixels(),f=new Uint8Array(h.length),y=0,p=h.length;y<p;y++)f[y]=T[h[y]];A=t(f,c.width,1)}}var R=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(o);return E===this.decode.FLATE_DECODE&&(w="/Predictor "+R+" "),w+="/Colors "+d+" /BitsPerComponent "+s+" /Columns "+c.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(A&&this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),{alias:i,data:n,index:r,filter:E,decodeParameters:w,transparency:l,palette:u,sMask:A,predictor:R,width:c.width,height:c.height,bitsPerComponent:s,colorSpace:a}}}}(rR.API),function(e){e.processGIF89A=function(t,n,r,i){var o=new fx(t),a=o.width,s=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var l={data:c,width:a,height:s},d=new gx(100).encode(l,100);return e.processJPEG.call(this,d,n,r,i)},e.processGIF87A=e.processGIF89A}(rR.API),vx.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},vx.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){TI.log("bit decode error:"+e)}},vx.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var c=this.palette[o>>7-s&1];this.data[a+4*s]=c.blue,this.data[a+4*s+1]=c.green,this.data[a+4*s+2]=c.red,this.data[a+4*s+3]=255}0!==n&&(this.pos+=4-n)}},vx.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,s=o>>4,c=15&o,l=this.palette[s];if(this.data[a]=l.blue,this.data[a+1]=l.green,this.data[a+2]=l.red,this.data[a+3]=255,2*i+1>=this.width)break;l=this.palette[c],this.data[a+4]=l.blue,this.data[a+4+1]=l.green,this.data[a+4+2]=l.red,this.data[a+4+3]=255}0!==t&&(this.pos+=4-t)}},vx.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!==e&&(this.pos+=4-e)}},vx.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,s=(o>>5&t)/t*255|0,c=(o>>10&t)/t*255|0,l=o>>15?255:0,d=r*this.width*4+4*i;this.data[d]=c,this.data[d+1]=s,this.data[d+2]=a,this.data[d+3]=l}this.pos+=e}},vx.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&t)/t*255|0,c=(a>>5&n)/n*255|0,l=(a>>11)/t*255|0,d=i*this.width*4+4*o;this.data[d]=l,this.data[d+1]=c,this.data[d+2]=s,this.data[d+3]=255}this.pos+=e}},vx.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},vx.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=a}},vx.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var o=new vx(t,!1),a=o.width,s=o.height,c={data:o.getData(),width:a,height:s},l=new gx(100).encode(c,100);return e.processJPEG.call(this,l,n,r,i)}}(rR.API),yx.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var o=new yx(t),a=o.width,s=o.height,c={data:o.getData(),width:a,height:s},l=new gx(100).encode(c,100);return e.processJPEG.call(this,l,n,r,i)}}(rR.API),rR.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,o=new Uint8Array(i/4*3),a=new Uint8Array(i/4),s=0,c=0,l=0;l<i;l+=4){var d=r[l],u=r[l+1],A=r[l+2],h=r[l+3];o[s++]=d,o[s++]=u,o[s++]=A,a[c++]=h}var p=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:p,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},rR.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},lx=rR.API,dx=lx.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:i.metadata.Unicode.widths,c=s.fof?s.fof:1,l=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=l.fof?l.fof:1,u=!1!==t.doKerning,A=0,h=e.length,p=0,f=s[0]||c,m=[];for(n=0;n<h;n++)r=e.charCodeAt(n),"function"==typeof i.metadata.widthOfString?m.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/o)||0)/1e3):(A=u&&"object"===(0,IT.A)(l[r])&&!isNaN(parseInt(l[r][p],10))?l[r][p]/d:0,m.push((s[r]||f)/c+A)),p=r;return m},ux=lx.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return lx.processArabic&&(e=lx.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,i)/n:dx.apply(this,arguments).reduce((function(e,t){return e+t}),0)},Ax=function(e,t,n,r){for(var i=[],o=0,a=e.length,s=0;o!==a&&s+t[o]<n;)s+=t[o],o++;i.push(e.slice(0,o));var c=o;for(s=0;o!==a;)s+t[o]>r&&(i.push(e.slice(c,o)),s=0,c=o),s+=t[o],o++;return c!==o&&i.push(e.slice(c,o)),i},hx=function(e,t,n){n||(n={});var r,i,o,a,s,c,l,d=[],u=[d],A=n.textIndent||0,h=0,p=0,f=e.split(" "),m=dx.apply(this,[" ",n])[0];if(c=-1===n.lineIndent?f[0].length+2:n.lineIndent||0){var g=Array(c).join(" "),v=[];f.map((function(e){(e=e.split(/\s*\n/)).length>1?v=v.concat(e.map((function(e,t){return(t&&e.length?"\n":"")+e}))):v.push(e[0])})),f=v,c=ux.apply(this,[g,n])}for(o=0,a=f.length;o<a;o++){var y=0;if(r=f[o],c&&"\n"==r[0]&&(r=r.substr(1),y=1),A+h+(p=(i=dx.apply(this,[r,n])).reduce((function(e,t){return e+t}),0))>t||y){if(p>t){for(s=Ax.apply(this,[r,i,t-(A+h),t]),d.push(s.shift()),d=[s.pop()];s.length;)u.push([s.shift()]);p=i.slice(r.length-(d[0]?d[0].length:0)).reduce((function(e,t){return e+t}),0)}else d=[r];u.push(d),A=p+c,h=m}else d.push(r),A+=h+p,h=m}return l=c?function(e,t){return(t?g:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(l)},lx.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var s,c,l=[];for(s=0,c=r.length;s<c;s++)l=l.concat(hx.apply(this,[r[s],a,o]));return l},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<16;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var o=function(e){return"0x"+parseInt(e,10).toString(16)},a=e.__fontmetrics__.compress=function(e){var t,n,i,s,c=["{"];for(var l in e){if(t=e[l],isNaN(parseInt(l,10))?n="'"+l+"'":(l=parseInt(l,10),n=(n=o(l).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof t)t<0?(i=o(t).slice(3),s="-"):(i=o(t).slice(2),s=""),i=s+i.slice(0,-1)+r[i.slice(-1)];else{if("object"!==(0,IT.A)(t))throw new Error("Don't know what to do with value type "+(0,IT.A)(t)+".");i=a(t)}c.push(n+i)}return c.push("}"),c.join("")},s=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,r,i,o,a={},s=1,c=a,l=[],d="",u="",A=e.length-1,h=1;h<A;h+=1)"'"==(o=e[h])?t?(i=t.join(""),t=void 0):t=[]:t?t.push(o):"{"==o?(l.push([c,i]),c={},i=void 0):"}"==o?((r=l.pop())[0][r[1]]=c,i=void 0,c=r[0]):"-"==o?s=-1:void 0===i?n.hasOwnProperty(o)?(d+=n[o],i=parseInt(d,16)*s,s=1,d=""):d+=o:n.hasOwnProperty(o)?(u+=n[o],c[i]=parseInt(u,16)*s,s=1,i=void 0,u=""):u+=o;return a},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},l={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=d.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=l.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(rR.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(void 0===o)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(r=!1===o.existsFileInVFS(i.postScriptName)?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(NI(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(i,r)}}])}(rR),function(){function e(){return(SI.canvg?Promise.resolve(SI.canvg):n.e(455).then(n.bind(n,8455))).catch((function(e){return Promise.reject(new Error("Could not load canvg: "+e))})).then((function(e){return e.default?e.default:e}))}rR.API.addSvgAsImage=function(t,n,r,i,o,a,s,c){if(isNaN(n)||isNaN(r))throw TI.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw TI.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=i,l.height=o;var d=l.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return e().then((function(e){return e.fromString(d,t,u)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(e){return e.render(u)})).then((function(){A.addImage(l.toDataURL("image/jpeg",1),n,r,i,o,s,c)}))}}(),rR.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},rR.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),c=[],l=0,d=0,u=0;function A(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var h=s.length;for(u=0;u<h;u+=1)n[s[u]].value=n[s[u]].defaultValue,n[s[u]].explicitSet=!1}if("object"===(0,IT.A)(e))for(i in e)if(o=e[i],A(s,i)&&void 0!==o){if("boolean"===n[i].type&&"boolean"==typeof o)n[i].value=o;else if("name"===n[i].type&&A(n[i].valueSet,o))n[i].value=o;else if("integer"===n[i].type&&Number.isInteger(o))n[i].value=o;else if("array"===n[i].type){for(l=0;l<o.length;l+=1)if(r=!0,1===o[l].length&&"number"==typeof o[l][0])c.push(String(o[l]-1));else if(o[l].length>1){for(d=0;d<o[l].length;d+=1)"number"!=typeof o[l][d]&&(r=!1);!0===r&&c.push([o[l][0]-1,o[l][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),a=n.length+r.length+i.length+t.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+i+o),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(rR.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,i=["","0","00","000","0000"],o=[""],a=0,s=e.length;a<s;++a){if(n=t.metadata.characterToGlyph(e.charCodeAt(a)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(a),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return o.join("");n=n.toString(16),o.push(i[4-n.length],n)}return o.join("")},r=function(e){var t,n,r,i,o,a,s;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],a=0,s=(n=Object.keys(e).sort((function(e,t){return e-t}))).length;a<s;a++)t=n[a],r.length>=100&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(i=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+i+">"));return r.length&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,o=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var s=n.metadata.Unicode.widths,c=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),l="",d=0;d<c.length;d++)l+=String.fromCharCode(c[d]);var u=o();a({data:l,addLength1:!0,objectId:u}),i("endobj");var A=o();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:A}),i("endobj");var h=o();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+JI(n.fontName)),i("/FontFile2 "+u+" 0 R"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var p=o();i("<<"),i("/Type /Font"),i("/BaseFont /"+JI(n.fontName)),i("/FontDescriptor "+h+" 0 R"),i("/W "+e.API.PDFObject.convert(s)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=o(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+A+" 0 R"),i("/BaseFont /"+JI(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+p+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,o=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var s=n.metadata.rawData,c="",l=0;l<s.length;l++)c+=String.fromCharCode(s[l]);var d=o();a({data:c,addLength1:!0,objectId:d}),i("endobj");var u=o();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:u}),i("endobj");var A=o();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+d+" 0 R"),i("/Flags 96"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+JI(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=o();for(var h=0;h<n.metadata.hmtx.widths.length;h++)n.metadata.hmtx.widths[h]=parseInt(n.metadata.hmtx.widths[h]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+JI(n.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]);var i=function(e){var t,r=e.text||"",i=e.x,o=e.y,a=e.options||{},s=e.mutex||{},c=s.pdfEscape,l=s.activeFontKey,d=s.fonts,u=l,A="",h=0,p="",f=d[u].encoding;if("Identity-H"!==d[u].encoding)return{text:r,x:i,y:o,options:a,mutex:s};for(p=r,u=l,Array.isArray(r)&&(p=r[0]),h=0;h<p.length;h+=1)d[u].metadata.hasOwnProperty("cmap")&&(t=d[u].metadata.cmap.unicode.codeMap[p[h].charCodeAt(0)]),t||p[h].charCodeAt(0)<256&&d[u].metadata.hasOwnProperty("Unicode")?A+=p[h]:A+="";var m="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===f?m=c(A,u).split("").map((function(e){return e.charCodeAt(0).toString(16)})).join(""):"Identity-H"===f&&(m=n(A,d[u])),s.isHex=!0,{text:m,x:i,y:o,options:a,mutex:s}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var o=0;for(o=0;o<t.length;o+=1)Array.isArray(t[o])&&3===t[o].length?n.push([i(Object.assign({},r,{text:t[o][0]})).text,t[o][1],t[o][2]]):n.push(i(Object.assign({},r,{text:t[o]})).text);e.text=n}else e.text=i(Object.assign({},r,{text:t})).text}])}(rR),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(rR.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,i,o,a,s,c,l=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},h={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,g=0;this.__bidiEngine__={};var v=function(e){var t=e.charCodeAt(),n=t>>8,r=h[n];return void 0!==r?l[256*r+(255&t)]:252===n||253===n?"AL":f.test(n)?"L":8===n?"R":"N"},y=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=v(e.charAt(n))))return!1;if("R"===t)return!0}return!1},b=function(e,t,a,s){var c,l,d,u,A=t[s];switch(A){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"N":case"AN":break;case"EN":m&&(A="AN");break;case"AL":m=!0,A="R";break;case"WS":case"BN":A="N";break;case"CS":s<1||s+1>=t.length||"EN"!==(c=a[s-1])&&"AN"!==c||"EN"!==(l=t[s+1])&&"AN"!==l?A="N":m&&(l="AN"),A=l===c?l:"N";break;case"ES":A="EN"===(c=s>0?a[s-1]:"B")&&s+1<t.length&&"EN"===t[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===a[s-1]){A="EN";break}if(m){A="N";break}for(d=s+1,u=t.length;d<u&&"ET"===t[d];)d++;A=d<u&&"EN"===t[d]?"EN":"N";break;case"NSM":if(i&&!o){for(u=t.length,d=s+1;d<u&&"NSM"===t[d];)d++;if(d<u){var h=e[s],p=h>=1425&&h<=2303||64286===h;if(c=t[d],p&&("R"===c||"AL"===c)){A="R";break}}}A=s<1||"B"===(c=t[s-1])?"N":a[s-1];break;case"B":m=!1,n=!0,A=g;break;case"S":r=!0,A="N"}return A},E=function(e,t,n){var r=e.split("");return n&&w(r,n,{hiLevel:g}),r.reverse(),t&&t.reverse(),r.join("")},w=function(e,t,i){var o,a,s,c,l,h=-1,p=e.length,f=0,y=[],E=g?u:d,w=[];for(m=!1,n=!1,r=!1,a=0;a<p;a++)w[a]=v(e[a]);for(s=0;s<p;s++){if(l=f,y[s]=b(e,w,y,s),o=240&(f=E[l][A[y[s]]]),f&=15,t[s]=c=E[f][5],o>0)if(16===o){for(a=h;a<s;a++)t[a]=1;h=-1}else h=-1;if(E[f][6])-1===h&&(h=s);else if(h>-1){for(a=h;a<s;a++)t[a]=c;h=-1}"B"===w[s]&&(t[s]=0),i.hiLevel|=c}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=g;for(var i=r-1;i>=0&&"WS"===e[i];i--)t[i]=g}}(w,t,p)},_=function(e,t,r,i,o){if(!(o.hiLevel<e)){if(1===e&&1===g&&!n)return t.reverse(),void(r&&r.reverse());for(var a,s,c,l,d=t.length,u=0;u<d;){if(i[u]>=e){for(c=u+1;c<d&&i[c]>=e;)c++;for(l=u,s=c-1;l<s;l++,s--)a=t[l],t[l]=t[s],t[s]=a,r&&(a=r[l],r[l]=r[s],r[s]=a);u=c}u++}}},S=function(e,t,n){var r=e.split(""),i={hiLevel:g};return n||(n=[]),w(r,n,i),function(e,t,n){if(0!==n.hiLevel&&c)for(var r,i=0;i<e.length;i++)1===t[i]&&(r=p.indexOf(e[i]))>=0&&(e[i]=p[r+1])}(r,n,i),_(2,r,t,n,i),_(1,r,t,n,i),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===o&&(o=y(e)),void 0===s&&(s=y(e))}(e,t),i||!a||s)if(i&&a&&o^s)g=o?1:0,e=E(e,t,n);else if(!i&&a&&s)g=o?1:0,e=S(e,t,n),e=E(e,t);else if(!i||o||a||s){if(i&&!a&&o^s)e=E(e,t),o?(g=0,e=S(e,t,n)):(g=1,e=S(e,t,n),e=E(e,t));else if(i&&o&&!a&&s)g=1,e=S(e,t,n),e=E(e,t);else if(!i&&!a&&o^s){var r=c;o?(g=1,e=S(e,t,n),g=0,c=!1,e=S(e,t,n),c=r):(g=0,e=S(e,t,n),e=E(e,t),g=1,c=!1,e=S(e,t,n),c=r,e=E(e,t))}}else g=0,e=S(e,t,n);else g=o?1:0,e=S(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(i=e.isInputVisual,a=e.isOutputVisual,o=e.isInputRtl,s=e.isOutputRtl,c=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var r=e.options||{};e.mutex,r.lang;var i=[];if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var o=0;for(i=[],o=0;o<t.length;o+=1)"[object Array]"===Object.prototype.toString.call(t[o])?i.push([n.doBidiReorder(t[o][0]),t[o][1],t[o][2]]):i.push([n.doBidiReorder(t[o])]);e.text=i}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(rR),rR.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new Ex(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new jx(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new wx(this.contents),this.head=new Cx(this),this.name=new kx(this),this.cmap=new Ix(this),this.toUnicode={},this.hhea=new Rx(this),this.maxp=new Px(this),this.hmtx=new Bx(this),this.post=new Nx(this),this.os2=new xx(this),this.loca=new Fx(this),this.glyf=new Dx(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,i;for(i=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],i.push(Math.round(e*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),0!=(32768&(t=r>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,i,o,a;for(o=0,i=0,a=(e=""+e).length;0<=a?i<a:i>a;i=0<=a?++i:--i)r=e.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return o*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var bx,Ex=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,i,o,a,s;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^o)+256*(255^a)+(255^s)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*i+65536*o+256*a+s},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(this.writeByte(t));return i},e}(),wx=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,i,o,a,s,c,l,d,u,A,h,p;for(p in A=Object.keys(t).length,s=Math.log(2),d=16*Math.floor(Math.log(A)/s),o=Math.floor(d/s),l=16*A-d,(r=new Ex).writeInt(this.scalarType),r.writeShort(A),r.writeShort(d),r.writeShort(o),r.writeShort(l),i=16*A,c=r.pos+i,a=null,h=[],t)for(u=t[p],r.writeString(p),r.writeInt(e(u)),r.writeInt(c),r.writeInt(u.length),h=h.concat(u),"head"===p&&(a=c),c+=u.length;c%4;)h.push(0),c++;return r.write(h),n=2981146554-e(r.data),r.pos=a+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,i;for(e=Lx.call(e);e.length%4;)e.push(0);for(r=new Ex(e),n=0,t=0,i=e.length;t<i;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),_x={}.hasOwnProperty,Sx=function(e,t){for(var n in t)_x.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};bx=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Cx=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sx(e,bx),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new Ex).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),Tx=function(){function e(e,t){var n,r,i,o,a,s,c,l,d,u,A,h,p,f,m,g,v;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=e.readByte();break;case 4:for(A=e.readUInt16(),u=A/2,e.pos+=6,i=function(){var t,n;for(n=[],s=t=0;0<=u?t<u:t>u;s=0<=u?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,p=function(){var t,n;for(n=[],s=t=0;0<=u?t<u:t>u;s=0<=u?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],s=t=0;0<=u?t<u:t>u;s=0<=u?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],s=t=0;0<=u?t<u:t>u;s=0<=u?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,a=function(){var t,n;for(n=[],s=t=0;0<=r?t<r:t>r;s=0<=r?++t:--t)n.push(e.readUInt16());return n}(),s=m=0,v=i.length;m<v;s=++m)for(f=i[s],n=g=h=p[s];h<=f?g<=f:g>=f;n=h<=f?++g:--g)0===l[s]?o=n+c[s]:0!==(o=a[l[s]/2+(n-h)-(u-s)]||0)&&(o+=c[s]),this.codeMap[n]=65535&o}e.pos=d}return e.encode=function(e,t){var n,r,i,o,a,s,c,l,d,u,A,h,p,f,m,g,v,y,b,E,w,_,S,C,T,I,R,x,N,O,k,P,B,L,D,U,M,F,j,Q,V,H,z,K,G,W;switch(x=new Ex,o=Object.keys(e).sort((function(e,t){return e-t})),t){case"macroman":for(p=0,f=function(){var e=[];for(h=0;h<256;++h)e.push(0);return e}(),g={0:0},i={},N=0,B=o.length;N<B;N++)null==g[z=e[r=o[N]]]&&(g[z]=++p),i[r]={old:e[r],new:g[e[r]]},f[r]=g[e[r]];return x.writeUInt16(1),x.writeUInt16(0),x.writeUInt32(12),x.writeUInt16(0),x.writeUInt16(262),x.writeUInt16(0),x.write(f),{charMap:i,subtable:x.data,maxGlyphID:p+1};case"unicode":for(I=[],d=[],v=0,g={},n={},m=c=null,O=0,L=o.length;O<L;O++)null==g[b=e[r=o[O]]]&&(g[b]=++v),n[r]={old:b,new:g[b]},a=g[b]-r,null!=m&&a===c||(m&&d.push(m),I.push(r),c=a),m=r;for(m&&d.push(m),d.push(65535),I.push(65535),C=2*(S=I.length),_=2*Math.pow(Math.log(S)/Math.LN2,2),u=Math.log(_/2)/Math.LN2,w=2*S-_,s=[],E=[],A=[],h=k=0,D=I.length;k<D;h=++k){if(T=I[h],l=d[h],65535===T){s.push(0),E.push(0);break}if(T-(R=n[T].new)>=32768)for(s.push(0),E.push(2*(A.length+S-h)),r=P=T;T<=l?P<=l:P>=l;r=T<=l?++P:--P)A.push(n[r].new);else s.push(R-T),E.push(0)}for(x.writeUInt16(3),x.writeUInt16(1),x.writeUInt32(12),x.writeUInt16(4),x.writeUInt16(16+8*S+2*A.length),x.writeUInt16(0),x.writeUInt16(C),x.writeUInt16(_),x.writeUInt16(u),x.writeUInt16(w),V=0,U=d.length;V<U;V++)r=d[V],x.writeUInt16(r);for(x.writeUInt16(0),H=0,M=I.length;H<M;H++)r=I[H],x.writeUInt16(r);for(K=0,F=s.length;K<F;K++)a=s[K],x.writeUInt16(a);for(G=0,j=E.length;G<j;G++)y=E[G],x.writeUInt16(y);for(W=0,Q=A.length;W<Q;W++)p=A[W],x.writeUInt16(p);return{charMap:n,subtable:x.data,maxGlyphID:v+1}}},e}(),Ix=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sx(e,bx),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new Tx(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=Tx.encode(e,t),(r=new Ex).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),Rx=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sx(e,bx),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),xx=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sx(e,bx),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),Nx=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sx(e,bx),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],i=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;i=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),Ox=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},kx=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sx(e,bx),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,r,i,o,a,s,c,l,d,u;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(s={},i=l=0,d=n.length;l<d;i=++l)r=n[i],e.pos=r.offset,c=e.readString(r.length),o=new Ox(c,r),null==s[u=r.nameID]&&(s[u]=[]),s[r.nameID].push(o);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},e}(),Px=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sx(e,bx),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),Bx=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sx(e,bx),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,r,i,o,a,s;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)i.push(e.readInt16());return i}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)i=n[e],r.push(i.advance);return r}.call(this),n=this.widths[this.widths.length-1],s=[],t=o=0;0<=r?o<r:o>r;t=0<=r?++o:--o)s.push(this.widths.push(n));return s},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),Lx=[].slice,Dx=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sx(e,bx),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,r,i,o,a,s,c,l,d;return e in this.cache?this.cache[e]:(i=this.file.loca,t=this.file.contents,n=i.indexOf(e),0===(r=i.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,o=(a=new Ex(t.read(r))).readShort(),c=a.readShort(),d=a.readShort(),s=a.readShort(),l=a.readShort(),this.cache[e]=-1===o?new Mx(a,c,d,s,l):new Ux(a,o,c,d,s,l),this.cache[e]))},e.prototype.encode=function(e,t,n){var r,i,o,a,s;for(o=[],i=[],a=0,s=t.length;a<s;a++)r=e[t[a]],i.push(o.length),r&&(o=o.concat(r.encode(n)));return i.push(o.length),{table:o,offsets:i}},e}(),Ux=function(){function e(e,t,n,r,i,o){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Mx=function(){function e(e,t,n,r,i){var o,a;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new Ex(Lx.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),Fx=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sx(e,bx),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,o=0;o<n.length;++o)if(n[o]=r,i<t.length&&t[i]==o){++i,n[o]=r;var a=this.offsets[o],s=this.offsets[o+1]-a;s>0&&(r+=s)}for(var c=new Array(4*n.length),l=0;l<n.length;++l)c[4*l+3]=255&n[l],c[4*l+2]=(65280&n[l])>>8,c[4*l+1]=(16711680&n[l])>>16,c[4*l]=(4278190080&n[l])>>24;return c},e}(),jx=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,i;for(t in r=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,i,o,a,s;for(r={},o=0,a=e.length;o<a;o++)r[i=e[o]]=this.font.glyf.glyphFor(i);for(i in t=[],r)(null!=(n=r[i])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in s=this.glyphsFor(t))n=s[i],r[i]=n;return r},e.prototype.encode=function(e,t){var n,r,i,o,a,s,c,l,d,u,A,h,p,f,m;for(r in n=Ix.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),A={0:0},m=n.charMap)A[(s=m[r]).old]=s.new;for(h in u=n.maxGlyphID,o)h in A||(A[h]=u++);return l=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(A),d=Object.keys(l).sort((function(e,t){return e-t})),p=function(){var e,t,n;for(n=[],e=0,t=d.length;e<t;e++)a=d[e],n.push(l[a]);return n}(),i=this.font.glyf.encode(o,p,A),c=this.font.loca.encode(i.offsets,p),f={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();rR.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,i,o,a;if(Array.isArray(n))return"["+function(){var e,i,o;for(o=[],e=0,i=n.length;e<i;e++)r=n[e],o.push(t.convert(r));return o}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in o=["<<"],n)a=n[i],o.push("/"+i+" "+t.convert(a));return o.push(">>"),o.join("\n")}return""+n},t}();const Qx=CA(up)((e=>{let{theme:t}=e;return{padding:t.spacing(4),background:"linear-gradient(135deg, ".concat(t.palette.primary.light," 0%, ").concat(t.palette.primary.main," 100%)"),color:"white",textAlign:"center",position:"relative",minHeight:"600px",display:"flex",flexDirection:"column",justifyContent:"center",border:"8px solid ".concat(t.palette.secondary.main),borderRadius:t.spacing(2),"&::before":{content:'""',position:"absolute",top:20,left:20,right:20,bottom:20,border:"2px solid ".concat(t.palette.common.white),borderRadius:t.spacing(1)}}})),Vx=CA(oA)((e=>{let{theme:t}=e;return{position:"absolute",top:-20,right:20,background:t.palette.secondary.main,borderRadius:"50%",width:80,height:80,display:"flex",alignItems:"center",justifyContent:"center",border:"4px solid ".concat(t.palette.common.white)}})),Hx=CA(oA)((e=>{let{theme:t}=e;return{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:.1,fontSize:"120px",zIndex:0}})),zx=e=>{var n,r;let{open:i,onClose:o,certificate:a,userInfo:s=null}=e;const[c,l]=(0,t.useState)(!1),[d,u]=(0,t.useState)("pdf"),A=(0,t.useRef)(null),h={fullName:"Student Name",email:"student@example.com",completionDate:(new Date).toISOString()},p=s||h,f=(null===a||void 0===a||null===(n=a.course)||void 0===n?void 0:n.title)||(null===a||void 0===a?void 0:a.courseName)||"Course Title",m=(null===a||void 0===a?void 0:a.completedAt)||(null===a||void 0===a?void 0:a.completionDate)||p.completionDate,g=((null===a||void 0===a?void 0:a.certificateId)||"CERT-".concat(Date.now()),(null===a||void 0===a||null===(r=a.course)||void 0===r?void 0:r.estimatedDuration)||(null===a||void 0===a?void 0:a.duration)||0),v=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),y=e=>{if(!e)return"Not specified";const t=Math.floor(e/60),n=e%60;return t>0?"".concat(t,"h ").concat(n,"m"):"".concat(n," minutes")},b=()=>{const e=new Date(m),t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=Math.random().toString(36).substr(2,6).toUpperCase();return"SWP-".concat(t).concat(n,"-").concat(r)};return(0,Tt.jsxs)(ZS,{open:i,onClose:o,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh"}},children:[(0,Tt.jsx)(rC,{children:(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",spacing:2,children:[(0,Tt.jsx)(dT,{color:"primary"}),(0,Tt.jsx)(kp,{variant:"h6",children:"Certificate of Completion"})]}),(0,Tt.jsx)(Em,{onClick:o,children:(0,Tt.jsx)(ET,{})})]})}),(0,Tt.jsx)(sC,{sx:{p:3},children:(0,Tt.jsxs)(pm,{container:!0,spacing:3,children:[(0,Tt.jsxs)(pm,{size:{xs:12,md:8},children:[(0,Tt.jsxs)(oA,{sx:{mb:2},children:[(0,Tt.jsx)(kp,{variant:"h6",gutterBottom:!0,children:"Certificate Preview"}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:"Your official certificate of completion"})]}),(0,Tt.jsxs)(Qx,{ref:A,elevation:0,children:[(0,Tt.jsx)(Hx,{children:(0,Tt.jsx)(PE,{sx:{fontSize:"inherit"}})}),(0,Tt.jsx)(Vx,{children:(0,Tt.jsx)(dT,{sx:{fontSize:40,color:"white"}})}),(0,Tt.jsxs)(oA,{sx:{position:"relative",zIndex:1},children:[(0,Tt.jsx)(kp,{variant:"h3",component:"h1",sx:{fontWeight:"bold",mb:1,textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"Certificate of Completion"}),(0,Tt.jsx)(kp,{variant:"h6",sx:{opacity:.9,mb:4,letterSpacing:1},children:"Substance Wellness Platform"}),(0,Tt.jsx)(kp,{variant:"h6",sx:{mb:2,opacity:.9},children:"This is to certify that"}),(0,Tt.jsx)(kp,{variant:"h4",component:"h2",sx:{fontWeight:"bold",mb:3,textShadow:"1px 1px 2px rgba(0,0,0,0.3)",borderBottom:"2px solid white",pb:1,display:"inline-block"},children:p.fullName}),(0,Tt.jsx)(kp,{variant:"h6",sx:{mb:2,opacity:.9},children:"has successfully completed the course"}),(0,Tt.jsxs)(kp,{variant:"h5",component:"h3",sx:{fontWeight:"600",mb:4,fontStyle:"italic",textShadow:"1px 1px 2px rgba(0,0,0,0.3)"},children:['"',f,'"']}),(0,Tt.jsxs)(pm,{container:!0,spacing:2,sx:{mb:4,maxWidth:600,mx:"auto"},children:[(0,Tt.jsx)(pm,{size:{xs:6},children:(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,Tt.jsx)(yT,{}),(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"caption",display:"block",children:"Completion Date"}),(0,Tt.jsx)(kp,{variant:"body2",fontWeight:"600",children:v(m)})]})]})}),(0,Tt.jsx)(pm,{size:{xs:6},children:(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,Tt.jsx)(PE,{}),(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"caption",display:"block",children:"Course Duration"}),(0,Tt.jsx)(kp,{variant:"body2",fontWeight:"600",children:y(g)})]})]})})]}),(0,Tt.jsxs)(kp,{variant:"body2",sx:{opacity:.8,mb:2},children:["Certificate ID: ",b()]}),(0,Tt.jsxs)(Vm,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mt:4,maxWidth:400,mx:"auto"},children:[(0,Tt.jsxs)(oA,{textAlign:"center",children:[(0,Tt.jsx)(vT,{sx:{borderColor:"white",width:120,mb:1}}),(0,Tt.jsx)(kp,{variant:"caption",children:"Platform Director"})]}),(0,Tt.jsx)(bT,{sx:{fontSize:40,opacity:.8}}),(0,Tt.jsxs)(oA,{textAlign:"center",children:[(0,Tt.jsx)(vT,{sx:{borderColor:"white",width:120,mb:1}}),(0,Tt.jsx)(kp,{variant:"caption",children:"Course Instructor"})]})]})]})]})]}),(0,Tt.jsx)(pm,{size:{xs:12,md:4},children:(0,Tt.jsx)(fp,{children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsx)(kp,{variant:"h6",gutterBottom:!0,children:"Certificate Actions"}),(0,Tt.jsxs)(Vm,{spacing:2,children:[(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"subtitle2",gutterBottom:!0,children:"Download Format"}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,children:[(0,Tt.jsx)(Nm,{label:"PDF",variant:"pdf"===d?"filled":"outlined",onClick:()=>u("pdf"),color:"primary",size:"small"}),(0,Tt.jsx)(Nm,{label:"Image",variant:"image"===d?"filled":"outlined",onClick:()=>u("image"),color:"primary",size:"small"})]})]}),(0,Tt.jsx)(Gh,{variant:"contained",startIcon:c?(0,Tt.jsx)(Ph,{size:16}):(0,Tt.jsx)(wT,{}),onClick:()=>{"pdf"===d?(async()=>{if(A.current)try{l(!0);const e=(await TT()(A.current,{scale:2,backgroundColor:null,logging:!1})).toDataURL("image/png"),t=new rR({orientation:"landscape",unit:"mm",format:"a4"}),n=t.internal.pageSize.getWidth(),r=t.internal.pageSize.getHeight();t.addImage(e,"PNG",0,0,n,r),t.save("certificate-".concat(f.replace(/\s+/g,"-").toLowerCase(),".pdf"))}catch(e){console.error("Error generating PDF:",e)}finally{l(!1)}})():(async()=>{if(A.current)try{l(!0);const e=await TT()(A.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),t=document.createElement("a");t.download="certificate-".concat(f.replace(/\s+/g,"-").toLowerCase(),".png"),t.href=e.toDataURL(),t.click()}catch(e){console.error("Error generating image:",e)}finally{l(!1)}})()},disabled:c,fullWidth:!0,children:"Download Certificate"}),(0,Tt.jsx)(Gh,{variant:"outlined",startIcon:(0,Tt.jsx)(_T,{}),onClick:()=>{const e=A.current,t=window.open("","","width=900,height=650");t.document.write("\n      <html>\n        <head>\n          <title>Certificate - ".concat(f,"</title>\n          <style>\n            body { \n              margin: 0; \n              padding: 20px; \n              font-family: Arial, sans-serif;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              min-height: 100vh;\n            }\n            @media print {\n              body { padding: 0; }\n              @page { margin: 0.5in; }\n            }\n          </style>\n        </head>\n        <body>\n          ").concat(e.innerHTML,"\n        </body>\n      </html>\n    ")),t.document.close(),t.focus(),t.print(),t.close()},fullWidth:!0,children:"Print Certificate"}),(0,Tt.jsx)(Gh,{variant:"outlined",startIcon:(0,Tt.jsx)(ST,{}),onClick:async()=>{if(navigator.share)try{await navigator.share({title:"Certificate - ".concat(f),text:"I've completed the course \"".concat(f,'" and earned a certificate!'),url:window.location.href})}catch(e){console.log("Sharing cancelled")}else{const e="I've completed the course \"".concat(f,'" and earned a certificate! \ud83c\udf93');navigator.clipboard.writeText(e)}},fullWidth:!0,children:"Share Achievement"})]}),(0,Tt.jsx)(vT,{sx:{my:3}}),(0,Tt.jsx)(kp,{variant:"h6",gutterBottom:!0,children:"Certificate Details"}),(0,Tt.jsxs)(Vm,{spacing:2,children:[(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"caption",color:"text.secondary",children:"Student"}),(0,Tt.jsx)(kp,{variant:"body2",children:p.fullName})]}),(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"caption",color:"text.secondary",children:"Course"}),(0,Tt.jsx)(kp,{variant:"body2",children:f})]}),(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"caption",color:"text.secondary",children:"Completion Date"}),(0,Tt.jsx)(kp,{variant:"body2",children:v(m)})]}),(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"caption",color:"text.secondary",children:"Course Duration"}),(0,Tt.jsx)(kp,{variant:"body2",children:y(g)})]}),(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"caption",color:"text.secondary",children:"Certificate ID"}),(0,Tt.jsx)(kp,{variant:"body2",sx:{fontFamily:"monospace"},children:b()})]})]}),(0,Tt.jsx)(uE,{severity:"info",sx:{mt:2},children:(0,Tt.jsx)(kp,{variant:"caption",children:"This certificate serves as proof of course completion and can be used for professional development or continuing education requirements."})})]})})})]})}),(0,Tt.jsx)(uC,{children:(0,Tt.jsx)(Gh,{onClick:o,children:"Close"})})]})},Kx=CA(fp)((e=>{let{theme:t}=e;return{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:t.shadows[8]}}})),Gx=(CA(fp)((e=>{let{theme:t}=e;return{background:"linear-gradient(135deg, ".concat(t.palette.primary.main," 0%, ").concat(t.palette.primary.dark," 100%)"),color:"white",marginBottom:t.spacing(3)}})),CA(up)((e=>{let{theme:t}=e;return{padding:t.spacing(2),textAlign:"center",background:"linear-gradient(135deg, ".concat(t.palette.secondary.light," 0%, ").concat(t.palette.secondary.main," 100%)"),color:"white",borderRadius:t.spacing(2)}}))),Wx=CA(up)((e=>{let{theme:t}=e;return{padding:t.spacing(3),textAlign:"center",height:"100%",borderRadius:t.spacing(2),"&:hover":{backgroundColor:t.palette.action.hover}}})),qx=()=>{const e=he(),[n,r]=(0,t.useState)(!0),[i,o]=(0,t.useState)(""),[a,s]=(0,t.useState)(0),[c,d]=(0,t.useState)([]),[u,A]=(0,t.useState)([]),[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)({totalEnrollments:0,completedCourses:0,totalStudyTime:0,averageScore:0,certificates:0}),[g,v]=(0,t.useState)(!1),[y,b]=(0,t.useState)(null);(0,t.useEffect)((()=>{E()}),[]);const E=async()=>{try{r(!0),o("");const e=await HE.getMyEnrollments();if(null!==e&&void 0!==e&&e.success&&e.data){d(e.data);const t=e.data.filter((e=>e.status===qE.COMPLETED)).length,n=e.data.reduce(((e,t)=>e+(t.timeSpentMinutes||0)),0);m((r=>l(l({},r),{},{totalEnrollments:e.data.length,completedCourses:t,totalStudyTime:n,certificates:t}))),p([{id:1,title:"First Steps",description:"Enrolled in your first course",icon:PE,earned:!0,earnedDate:"2024-01-15"},{id:2,title:"Fast Learner",description:"Completed a course in under 2 hours",icon:TC,earned:t>0,earnedDate:t>0?"2024-01-20":null},{id:3,title:"Quiz Master",description:"Passed 5 quizzes with 90%+ score",icon:CC,earned:!1,earnedDate:null},{id:4,title:"Dedicated Student",description:"Studied for 10+ hours total",icon:lT,earned:n>=600,earnedDate:n>=600?"2024-01-25":null}])}const t=await HE.getMyProgress();null!==t&&void 0!==t&&t.success&&t.data&&A(t.data)}catch(rI){console.error("Error loading dashboard data:",rI),o("Failed to load dashboard data. Please try again later.")}finally{r(!1)}},w=e=>{switch(e){case qE.COMPLETED:return"success";case qE.IN_PROGRESS:return"primary";case qE.ENROLLED:return"info";case qE.DROPPED:return"error";case qE.SUSPENDED:return"warning";default:return"default"}},_=t=>{e("/education/courses/".concat(t.courseId))};return n?(0,Tt.jsx)(Bg,{maxWidth:"lg",sx:{py:4},children:(0,Tt.jsx)(oA,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,Tt.jsx)(Ph,{size:60})})}):(0,Tt.jsxs)(Bg,{maxWidth:"lg",sx:{py:4},children:[(0,Tt.jsxs)(oA,{sx:{mb:4},children:[(0,Tt.jsx)(kp,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600},children:"My Learning Dashboard"}),(0,Tt.jsx)(kp,{variant:"body1",color:"text.secondary",children:"Track your progress, manage your courses, and celebrate your achievements"})]}),i&&(0,Tt.jsx)(uE,{severity:"error",sx:{mb:3},children:i}),(0,Tt.jsxs)(pm,{container:!0,spacing:3,sx:{mb:4},children:[(0,Tt.jsx)(pm,{size:{xs:12,sm:6,md:3},children:(0,Tt.jsxs)(Wx,{children:[(0,Tt.jsx)(PE,{sx:{fontSize:40,color:"primary.main",mb:1}}),(0,Tt.jsx)(kp,{variant:"h4",sx:{fontWeight:600},children:f.totalEnrollments}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:"Enrolled Courses"})]})}),(0,Tt.jsx)(pm,{size:{xs:12,sm:6,md:3},children:(0,Tt.jsxs)(Wx,{children:[(0,Tt.jsx)(EC,{sx:{fontSize:40,color:"success.main",mb:1}}),(0,Tt.jsx)(kp,{variant:"h4",sx:{fontWeight:600},children:f.completedCourses}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:"Completed"})]})}),(0,Tt.jsx)(pm,{size:{xs:12,sm:6,md:3},children:(0,Tt.jsxs)(Wx,{children:[(0,Tt.jsx)(TC,{sx:{fontSize:40,color:"warning.main",mb:1}}),(0,Tt.jsxs)(kp,{variant:"h4",sx:{fontWeight:600},children:[Math.round(f.totalStudyTime/60),"h"]}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:"Study Time"})]})}),(0,Tt.jsx)(pm,{size:{xs:12,sm:6,md:3},children:(0,Tt.jsxs)(Wx,{children:[(0,Tt.jsx)(dT,{sx:{fontSize:40,color:"secondary.main",mb:1}}),(0,Tt.jsx)(kp,{variant:"h4",sx:{fontWeight:600},children:f.certificates}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:"Certificates"})]})})]}),(0,Tt.jsx)(up,{sx:{mb:3},children:(0,Tt.jsxs)(Sf,{value:a,onChange:(e,t)=>{s(t)},variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider"},children:[(0,Tt.jsx)(ZC,{icon:(0,Tt.jsx)(cT,{badgeContent:c.length,color:"primary",children:(0,Tt.jsx)(PE,{})}),label:"My Courses",iconPosition:"start"}),(0,Tt.jsx)(ZC,{icon:(0,Tt.jsx)(uT,{}),label:"Progress",iconPosition:"start"}),(0,Tt.jsx)(ZC,{icon:(0,Tt.jsx)(cT,{badgeContent:h.filter((e=>e.earned)).length,color:"secondary",children:(0,Tt.jsx)(lT,{})}),label:"Achievements",iconPosition:"start"})]})}),0===a&&(0,Tt.jsx)(oA,{children:c.length>0?(0,Tt.jsx)(pm,{container:!0,spacing:3,children:c.map((e=>{var t,n,r,i,o,a,s,c;return(0,Tt.jsx)(pm,{size:{xs:12,md:6,lg:4},children:(0,Tt.jsxs)(Kx,{children:[(0,Tt.jsx)(wp,{component:"img",height:"180",image:(c=e.course,(null===c||void 0===c?void 0:c.imageUrl)||"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=250&fit=crop&auto=format"),alt:null===(t=e.course)||void 0===t?void 0:t.title}),(0,Tt.jsxs)(Bm,{sx:{flexGrow:1},children:[(0,Tt.jsx)(kp,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:null===(n=e.course)||void 0===n?void 0:n.title}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:2},children:null===(r=e.course)||void 0===r?void 0:r.description}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,sx:{mb:2},children:[(0,Tt.jsx)(Nm,{label:(s=e.status,YE[s]||"Unknown"),color:w(e.status),size:"small"}),(0,Tt.jsx)(Nm,{label:ZE(null===(i=e.course)||void 0===i?void 0:i.courseType),variant:"outlined",size:"small"})]}),(0,Tt.jsxs)(oA,{sx:{mb:2},children:[(0,Tt.jsxs)(Vm,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:"Progress"}),(0,Tt.jsxs)(kp,{variant:"body2",color:"text.secondary",children:[e.progress||0,"%"]})]}),(0,Tt.jsx)(bS,{variant:"determinate",value:e.progress||0,sx:{height:6,borderRadius:3}})]}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:2,sx:{mb:2},children:[(0,Tt.jsxs)(oA,{display:"flex",alignItems:"center",gap:.5,children:[(0,Tt.jsx)(FE,{fontSize:"small",color:"action"}),(0,Tt.jsx)(kp,{variant:"caption",color:"text.secondary",children:ew(e.timeSpentMinutes||0)})]}),(0,Tt.jsxs)(oA,{display:"flex",alignItems:"center",gap:.5,children:[(0,Tt.jsx)(BE,{fontSize:"small",color:"action"}),(0,Tt.jsxs)(kp,{variant:"caption",color:"text.secondary",children:[(null===(o=e.course)||void 0===o||null===(a=o.chapters)||void 0===a?void 0:a.length)||0," chapters"]})]})]}),(0,Tt.jsxs)(kp,{variant:"caption",color:"text.secondary",children:["Enrolled:"," ",new Date(e.enrolledAt).toLocaleDateString()]})]}),(0,Tt.jsx)(hg,{sx:{p:2},children:e.status===qE.COMPLETED?(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,width:"100%",children:[(0,Tt.jsx)(Gh,{variant:"outlined",startIcon:(0,Tt.jsx)(dT,{}),onClick:()=>(e=>{var t,n;b({course:e.course,completedAt:e.completedAt,courseName:null===(t=e.course)||void 0===t?void 0:t.title,duration:null===(n=e.course)||void 0===n?void 0:n.estimatedDuration,certificateId:"CERT-".concat(e.enrollmentId)}),v(!0)})(e),sx:{flex:1},children:"Certificate"}),(0,Tt.jsx)(Gh,{variant:"contained",startIcon:(0,Tt.jsx)(jE,{}),onClick:()=>_(e),sx:{flex:1},children:"Review"})]}):(0,Tt.jsx)(Gh,{variant:"contained",fullWidth:!0,startIcon:(0,Tt.jsx)(bC,{}),onClick:()=>_(e),children:"Continue Learning"})})]})},e.enrollmentId)}))}):(0,Tt.jsxs)(up,{sx:{p:4,textAlign:"center"},children:[(0,Tt.jsx)(PE,{sx:{fontSize:64,color:"grey.400",mb:2}}),(0,Tt.jsx)(kp,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Enrolled Courses"}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Start your learning journey by enrolling in a course"}),(0,Tt.jsx)(Gh,{variant:"contained",component:ft,to:"/education",startIcon:(0,Tt.jsx)(PE,{}),children:"Browse Courses"})]})}),1===a&&(0,Tt.jsx)(oA,{children:(0,Tt.jsx)(up,{children:(0,Tt.jsx)(iy,{children:u.length>0?u.map((e=>{var t,n;return(0,Tt.jsxs)(GC,{children:[(0,Tt.jsx)(US,{children:e.isCompleted?(0,Tt.jsx)(EC,{color:"success"}):(0,Tt.jsx)(BE,{color:"action"})}),(0,Tt.jsx)(VS,{primary:(null===(t=e.lesson)||void 0===t?void 0:t.title)||"Lesson",secondary:(0,Tt.jsxs)(Vm,{direction:"row",spacing:2,alignItems:"center",children:[(0,Tt.jsx)(kp,{variant:"caption",children:null===(n=e.course)||void 0===n?void 0:n.title}),(0,Tt.jsxs)(kp,{variant:"caption",children:[e.percent,"% complete"]}),(0,Tt.jsxs)(kp,{variant:"caption",children:[ew(e.timeSpentMinutes||0)," ","spent"]})]})})]},e.progressId)})):(0,Tt.jsx)(GC,{children:(0,Tt.jsx)(VS,{primary:"No progress data available",secondary:"Start learning to track your progress"})})})})}),2===a&&(0,Tt.jsx)(oA,{children:(0,Tt.jsx)(pm,{container:!0,spacing:3,children:h.map((e=>{const t=e.icon;return(0,Tt.jsx)(pm,{size:{xs:12,sm:6,md:3},children:(0,Tt.jsxs)(Gx,{sx:{opacity:e.earned?1:.5},children:[(0,Tt.jsx)(t,{sx:{fontSize:48,mb:1}}),(0,Tt.jsx)(kp,{variant:"h6",gutterBottom:!0,children:e.title}),(0,Tt.jsx)(kp,{variant:"body2",sx:{mb:2},children:e.description}),e.earned&&(0,Tt.jsx)(Nm,{label:"Earned ".concat(new Date(e.earnedDate).toLocaleDateString()),size:"small",sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white"}})]})},e.id)}))})}),(0,Tt.jsx)(zx,{open:g,onClose:()=>v(!1),certificate:y,userInfo:{fullName:localStorage.getItem("userFullname")||"Student Name",email:localStorage.getItem("userEmail")||"student@example.com"}})]})};function Yx(e,t){return function(){return e.apply(t,arguments)}}const{toString:Xx}=Object.prototype,{getPrototypeOf:Jx}=Object,{iterator:Zx,toStringTag:$x}=Symbol,eN=(tN=Object.create(null),e=>{const t=Xx.call(e);return tN[t]||(tN[t]=t.slice(8,-1).toLowerCase())});var tN;const nN=e=>(e=e.toLowerCase(),t=>eN(t)===e),rN=e=>t=>typeof t===e,{isArray:iN}=Array,oN=rN("undefined");const aN=nN("ArrayBuffer");const sN=rN("string"),cN=rN("function"),lN=rN("number"),dN=e=>null!==e&&"object"===typeof e,uN=e=>{if("object"!==eN(e))return!1;const t=Jx(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!($x in e)&&!(Zx in e)},AN=nN("Date"),hN=nN("File"),pN=nN("Blob"),fN=nN("FileList"),mN=nN("URLSearchParams"),[gN,vN,yN,bN]=["ReadableStream","Request","Response","Headers"].map(nN);function EN(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),iN(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(n=0;n<o;n++)a=r[n],t.call(null,e[a],a,e)}}function wN(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const _N="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,SN=e=>!oN(e)&&e!==_N;const CN=(TN="undefined"!==typeof Uint8Array&&Jx(Uint8Array),e=>TN&&e instanceof TN);var TN;const IN=nN("HTMLFormElement"),RN=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),xN=nN("RegExp"),NN=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};EN(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)};const ON=nN("AsyncFunction"),kN=(PN="function"===typeof setImmediate,BN=cN(_N.postMessage),PN?setImmediate:BN?((e,t)=>(_N.addEventListener("message",(n=>{let{source:r,data:i}=n;r===_N&&i===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),_N.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var PN,BN;const LN="undefined"!==typeof queueMicrotask?queueMicrotask.bind(_N):"undefined"!==typeof process&&process.nextTick||kN,DN={isArray:iN,isArrayBuffer:aN,isBuffer:function(e){return null!==e&&!oN(e)&&null!==e.constructor&&!oN(e.constructor)&&cN(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||cN(e.append)&&("formdata"===(t=eN(e))||"object"===t&&cN(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&aN(e.buffer),t},isString:sN,isNumber:lN,isBoolean:e=>!0===e||!1===e,isObject:dN,isPlainObject:uN,isReadableStream:gN,isRequest:vN,isResponse:yN,isHeaders:bN,isUndefined:oN,isDate:AN,isFile:hN,isBlob:pN,isRegExp:xN,isFunction:cN,isStream:e=>dN(e)&&cN(e.pipe),isURLSearchParams:mN,isTypedArray:CN,isFileList:fN,forEach:EN,merge:function e(){const{caseless:t}=SN(this)&&this||{},n={},r=(r,i)=>{const o=t&&wN(n,i)||i;uN(n[o])&&uN(r)?n[o]=e(n[o],r):uN(r)?n[o]=e({},r):iN(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&EN(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return EN(t,((t,r)=>{n&&cN(t)?e[r]=Yx(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,a;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&Jx(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:eN,kindOfTest:nN,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(iN(e))return e;let t=e.length;if(!lN(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Zx]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:IN,hasOwnProperty:RN,hasOwnProp:RN,reduceDescriptors:NN,freezeMethods:e=>{NN(e,((t,n)=>{if(cN(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];cN(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return iN(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:wN,global:_N,isContextDefined:SN,isSpecCompliantForm:function(e){return!!(e&&cN(e.append)&&"FormData"===e[$x]&&e[Zx])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(dN(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=iN(e)?[]:{};return EN(e,((e,t)=>{const o=n(e,r+1);!oN(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:ON,isThenable:e=>e&&(dN(e)||cN(e))&&cN(e.then)&&cN(e.catch),setImmediate:kN,asap:LN,isIterable:e=>null!=e&&cN(e[Zx])};function UN(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}DN.inherits(UN,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:DN.toJSONObject(this.config),code:this.code,status:this.status}}});const MN=UN.prototype,FN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{FN[e]={value:e}})),Object.defineProperties(UN,FN),Object.defineProperty(MN,"isAxiosError",{value:!0}),UN.from=(e,t,n,r,i,o)=>{const a=Object.create(MN);return DN.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),UN.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const jN=UN;function QN(e){return DN.isPlainObject(e)||DN.isArray(e)}function VN(e){return DN.endsWith(e,"[]")?e.slice(0,-2):e}function HN(e,t,n){return e?e.concat(t).map((function(e,t){return e=VN(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const zN=DN.toFlatObject(DN,{},null,(function(e){return/^is[A-Z]/.test(e)}));const KN=function(e,t,n){if(!DN.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=DN.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!DN.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&DN.isSpecCompliantForm(t);if(!DN.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(DN.isDate(e))return e.toISOString();if(DN.isBoolean(e))return e.toString();if(!s&&DN.isBlob(e))throw new jN("Blob is not supported. Use a Buffer instead.");return DN.isArrayBuffer(e)||DN.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let s=e;if(e&&!i&&"object"===typeof e)if(DN.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(DN.isArray(e)&&function(e){return DN.isArray(e)&&!e.some(QN)}(e)||(DN.isFileList(e)||DN.endsWith(n,"[]"))&&(s=DN.toArray(e)))return n=VN(n),s.forEach((function(e,r){!DN.isUndefined(e)&&null!==e&&t.append(!0===a?HN([n],r,o):null===a?n:n+"[]",c(e))})),!1;return!!QN(e)||(t.append(HN(i,n,o),c(e)),!1)}const d=[],u=Object.assign(zN,{defaultVisitor:l,convertValue:c,isVisitable:QN});if(!DN.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!DN.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),DN.forEach(n,(function(n,o){!0===(!(DN.isUndefined(n)||null===n)&&i.call(t,n,DN.isString(o)?o.trim():o,r,u))&&e(n,r?r.concat(o):[o])})),d.pop()}}(e),t};function GN(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function WN(e,t){this._pairs=[],e&&KN(e,this,t)}const qN=WN.prototype;qN.append=function(e,t){this._pairs.push([e,t])},qN.toString=function(e){const t=e?function(t){return e.call(this,t,GN)}:GN;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const YN=WN;function XN(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function JN(e,t,n){if(!t)return e;const r=n&&n.encode||XN;DN.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(o=i?i(t,n):DN.isURLSearchParams(t)?t.toString():new YN(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const ZN=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){DN.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},$N={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eO={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:YN,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},tO="undefined"!==typeof window&&"undefined"!==typeof document,nO="object"===typeof navigator&&navigator||void 0,rO=tO&&(!nO||["ReactNative","NativeScript","NS"].indexOf(nO.product)<0),iO="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,oO=tO&&window.location.href||"http://localhost",aO=l(l({},e),eO);const sO=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const a=Number.isFinite(+o),s=i>=e.length;if(o=!o&&DN.isArray(r)?r.length:o,s)return DN.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a;r[o]&&DN.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&DN.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!a}if(DN.isFormData(e)&&DN.isFunction(e.entries)){const n={};return DN.forEachEntry(e,((e,r)=>{t(function(e){return DN.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const cO={transitional:$N,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=DN.isObject(e);i&&DN.isHTMLForm(e)&&(e=new FormData(e));if(DN.isFormData(e))return r?JSON.stringify(sO(e)):e;if(DN.isArrayBuffer(e)||DN.isBuffer(e)||DN.isStream(e)||DN.isFile(e)||DN.isBlob(e)||DN.isReadableStream(e))return e;if(DN.isArrayBufferView(e))return e.buffer;if(DN.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return KN(e,new aO.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return aO.isNode&&DN.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=DN.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return KN(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(DN.isString(e))try{return(t||JSON.parse)(e),DN.trim(e)}catch(XB){if("SyntaxError"!==XB.name)throw XB}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||cO.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(DN.isResponse(e)||DN.isReadableStream(e))return e;if(e&&DN.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(XB){if(n){if("SyntaxError"===XB.name)throw jN.from(XB,jN.ERR_BAD_RESPONSE,this,null,this.response);throw XB}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:aO.classes.FormData,Blob:aO.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};DN.forEach(["delete","get","head","post","put","patch"],(e=>{cO.headers[e]={}}));const lO=cO,dO=DN.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uO=Symbol("internals");function AO(e){return e&&String(e).trim().toLowerCase()}function hO(e){return!1===e||null==e?e:DN.isArray(e)?e.map(hO):String(e)}function pO(e,t,n,r,i){return DN.isFunction(r)?r.call(this,t,n):(i&&(t=n),DN.isString(t)?DN.isString(r)?-1!==t.indexOf(r):DN.isRegExp(r)?r.test(t):void 0:void 0)}class fO{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=AO(t);if(!i)throw new Error("header name must be a non-empty string");const o=DN.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=hO(e))}const o=(e,t)=>DN.forEach(e,((e,n)=>i(e,n,t)));if(DN.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(DN.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&dO[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(DN.isObject(e)&&DN.isIterable(e)){let n,r,i={};for(const t of e){if(!DN.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?DN.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=AO(e)){const n=DN.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(DN.isFunction(t))return t.call(this,e,n);if(DN.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=AO(e)){const n=DN.findKey(this,e);return!(!n||void 0===this[n]||t&&!pO(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=AO(e)){const i=DN.findKey(n,e);!i||t&&!pO(0,n[i],i,t)||(delete n[i],r=!0)}}return DN.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!pO(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return DN.forEach(this,((r,i)=>{const o=DN.findKey(n,i);if(o)return t[o]=hO(r),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete t[i],t[a]=hO(r),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return DN.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&DN.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[uO]=this[uO]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=AO(e);t[r]||(!function(e,t){const n=DN.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return DN.isArray(e)?e.forEach(r):r(e),this}}fO.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),DN.reduceDescriptors(fO.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),DN.freezeMethods(fO);const mO=fO;function gO(e,t){const n=this||lO,r=t||n,i=mO.from(r.headers);let o=r.data;return DN.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function vO(e){return!(!e||!e.__CANCEL__)}function yO(e,t,n){jN.call(this,null==e?"canceled":e,jN.ERR_CANCELED,t,n),this.name="CanceledError"}DN.inherits(yO,jN,{__CANCEL__:!0});const bO=yO;function EO(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new jN("Request failed with status code "+n.status,[jN.ERR_BAD_REQUEST,jN.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const wO=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,a=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),l=r[a];i||(i=c),n[o]=s,r[o]=c;let d=a,u=0;for(;d!==o;)u+=n[d++],d%=e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),c-i<t)return;const A=l&&c-l;return A?Math.round(1e3*u/A):void 0}};const _O=function(e,t){let n,r,i=0,o=1e3/t;const a=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];t>=o?a(c,e):(n=c,r||(r=setTimeout((()=>{r=null,a(n)}),o-t)))},()=>n&&a(n)]},SO=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=wO(50,250);return _O((n=>{const o=n.loaded,a=n.lengthComputable?n.total:void 0,s=o-r,c=i(s);r=o;e({loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&o<=a?(a-o)/c:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},CO=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},TO=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return DN.asap((()=>e(...n)))},IO=aO.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,aO.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(aO.origin),aO.navigator&&/(msie|trident)/i.test(aO.navigator.userAgent)):()=>!0,RO=aO.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const a=[e+"="+encodeURIComponent(t)];DN.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),DN.isString(r)&&a.push("path="+r),DN.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function xO(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const NO=e=>e instanceof mO?l({},e):e;function OO(e,t){t=t||{};const n={};function r(e,t,n,r){return DN.isPlainObject(e)&&DN.isPlainObject(t)?DN.merge.call({caseless:r},e,t):DN.isPlainObject(t)?DN.merge({},t):DN.isArray(t)?t.slice():t}function i(e,t,n,i){return DN.isUndefined(t)?DN.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function o(e,t){if(!DN.isUndefined(t))return r(void 0,t)}function a(e,t){return DN.isUndefined(t)?DN.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t,n)=>i(NO(e),NO(t),0,!0)};return DN.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=c[r]||i,a=o(e[r],t[r],r);DN.isUndefined(a)&&o!==s||(n[r]=a)})),n}const kO=e=>{const t=OO({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:s,auth:c}=t;if(t.headers=s=mO.from(s),t.url=JN(xO(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&s.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),DN.isFormData(r))if(aO.hasStandardBrowserEnv||aO.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(aO.hasStandardBrowserEnv&&(i&&DN.isFunction(i)&&(i=i(t)),i||!1!==i&&IO(t.url))){const e=o&&a&&RO.read(a);e&&s.set(o,e)}return t},PO="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=kO(e);let i=r.data;const o=mO.from(r.headers).normalize();let a,s,c,l,d,{responseType:u,onUploadProgress:A,onDownloadProgress:h}=r;function p(){l&&l(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let f=new XMLHttpRequest;function m(){if(!f)return;const r=mO.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());EO((function(e){t(e),p()}),(function(e){n(e),p()}),{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=m:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(m)},f.onabort=function(){f&&(n(new jN("Request aborted",jN.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new jN("Network Error",jN.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||$N;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new jN(t,i.clarifyTimeoutError?jN.ETIMEDOUT:jN.ECONNABORTED,e,f)),f=null},void 0===i&&o.setContentType(null),"setRequestHeader"in f&&DN.forEach(o.toJSON(),(function(e,t){f.setRequestHeader(t,e)})),DN.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),u&&"json"!==u&&(f.responseType=r.responseType),h&&([c,d]=SO(h,!0),f.addEventListener("progress",c)),A&&f.upload&&([s,l]=SO(A),f.upload.addEventListener("progress",s),f.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(a=t=>{f&&(n(!t||t.type?new bO(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);g&&-1===aO.protocols.indexOf(g)?n(new jN("Unsupported protocol "+g+":",jN.ERR_BAD_REQUEST,e)):f.send(i||null)}))},BO=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof jN?t:new bO(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,i(new jN("timeout ".concat(t," of ms exceeded"),jN.ETIMEDOUT))}),t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:s}=r;return s.unsubscribe=()=>DN.asap(a),s}};function LO(e,t){this.v=e,this.k=t}function DO(e){return function(){return new UO(e.apply(this,arguments))}}function UO(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof LO;Promise.resolve(s?a.v:a).then((function(n){if(s){var c="return"===t?"return":"next";if(!a.k||n.done)return r(c,n);n=e[c](n).value}i(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function MO(e){return new LO(e,0)}function FO(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new LO(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function jO(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new QO(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function QO(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return QO=function(e){this.s=e,this.n=e.next},QO.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new QO(e)}UO.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},UO.prototype.next=function(e){return this._invoke("next",e)},UO.prototype.throw=function(e){return this._invoke("throw",e)},UO.prototype.return=function(e){return this._invoke("return",e)};const VO=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},HO=function(){var e=DO((function*(e,t){var n,r=!1,i=!1;try{for(var o,a=jO(zO(e));r=!(o=yield MO(a.next())).done;r=!1){const e=o.value;yield*FO(jO(VO(e,t)))}}catch(rI){i=!0,n=rI}finally{try{r&&null!=a.return&&(yield MO(a.return()))}finally{if(i)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),zO=function(){var e=DO((function*(e){if(e[Symbol.asyncIterator])return void(yield*FO(jO(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield MO(t.read());if(e)break;yield n}}finally{yield MO(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),KO=(e,t,n,r)=>{const i=HO(e,t);let o,a=0,s=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return s(),void e.close();let o=r.byteLength;if(n){let e=a+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(rI){throw s(rI),rI}},cancel:e=>(s(e),i.return())},{highWaterMark:2})},GO="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,WO=GO&&"function"===typeof ReadableStream,qO=GO&&("function"===typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),YO=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(XB){return!1}},XO=WO&&YO((()=>{let e=!1;const t=new Request(aO.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),JO=WO&&YO((()=>DN.isReadableStream(new Response("").body))),ZO={stream:JO&&(e=>e.body)};var $O;GO&&($O=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!ZO[e]&&(ZO[e]=DN.isFunction($O[e])?t=>t[e]():(t,n)=>{throw new jN("Response type '".concat(e,"' is not supported"),jN.ERR_NOT_SUPPORT,n)})})));const ek=async(e,t)=>{const n=DN.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(DN.isBlob(e))return e.size;if(DN.isSpecCompliantForm(e)){const t=new Request(aO.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return DN.isArrayBufferView(e)||DN.isArrayBuffer(e)?e.byteLength:(DN.isURLSearchParams(e)&&(e+=""),DN.isString(e)?(await qO(e)).byteLength:void 0)})(t):n},tk=GO&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:d,headers:u,withCredentials:A="same-origin",fetchOptions:h}=kO(e);d=d?(d+"").toLowerCase():"text";let p,f=BO([i,o&&o.toAbortSignal()],a);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(c&&XO&&"get"!==n&&"head"!==n&&0!==(g=await ek(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(DN.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=CO(g,SO(TO(c)));r=KO(n.body,65536,e,t)}}DN.isString(A)||(A=A?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,l(l({},h),{},{signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?A:void 0}));let o=await fetch(p,h);const a=JO&&("stream"===d||"response"===d);if(JO&&(s||a&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=DN.toFiniteNumber(o.headers.get("content-length")),[n,r]=s&&CO(t,SO(TO(s),!0))||[];o=new Response(KO(o.body,65536,n,(()=>{r&&r(),m&&m()})),e)}d=d||"text";let v=await ZO[DN.findKey(ZO,d)||"text"](o,e);return!a&&m&&m(),await new Promise(((t,n)=>{EO(t,n,{data:v,headers:mO.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})}))}catch(rI){if(m&&m(),rI&&"TypeError"===rI.name&&/Load failed|fetch/i.test(rI.message))throw Object.assign(new jN("Network Error",jN.ERR_NETWORK,e,p),{cause:rI.cause||rI});throw jN.from(rI,rI&&rI.code,e,p)}}),nk={http:null,xhr:PO,fetch:tk};DN.forEach(nk,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(XB){}Object.defineProperty(e,"adapterName",{value:t})}}));const rk=e=>"- ".concat(e),ik=e=>DN.isFunction(e)||null===e||!1===e,ok=e=>{e=DN.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!ik(n)&&(r=nk[(t=String(n)).toLowerCase()],void 0===r))throw new jN("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(rk).join("\n"):" "+rk(e[0]):"as no adapter specified";throw new jN("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function ak(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new bO(null,e)}function sk(e){ak(e),e.headers=mO.from(e.headers),e.data=gO.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ok(e.adapter||lO.adapter)(e).then((function(t){return ak(e),t.data=gO.call(e,e.transformResponse,t),t.headers=mO.from(t.headers),t}),(function(t){return vO(t)||(ak(e),t&&t.response&&(t.response.data=gO.call(e,e.transformResponse,t.response),t.response.headers=mO.from(t.response.headers))),Promise.reject(t)}))}const ck="1.10.0",lk={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{lk[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const dk={};lk.transitional=function(e,t,n){function r(e,t){return"[Axios v"+ck+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new jN(r(i," has been removed"+(t?" in "+t:"")),jN.ERR_DEPRECATED);return t&&!dk[i]&&(dk[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}},lk.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const uk={assertOptions:function(e,t,n){if("object"!==typeof e)throw new jN("options must be an object",jN.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],a=t[o];if(a){const t=e[o],n=void 0===t||a(t,o,e);if(!0!==n)throw new jN("option "+o+" must be "+n,jN.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new jN("Unknown option "+o,jN.ERR_BAD_OPTION)}},validators:lk},Ak=uk.validators;class hk{constructor(e){this.defaults=e||{},this.interceptors={request:new ZN,response:new ZN}}async request(e,t){try{return await this._request(e,t)}catch(rI){if(rI instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{rI.stack?n&&!String(rI.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(rI.stack+="\n"+n):rI.stack=n}catch(XB){}}throw rI}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=OO(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&uk.assertOptions(n,{silentJSONParsing:Ak.transitional(Ak.boolean),forcedJSONParsing:Ak.transitional(Ak.boolean),clarifyTimeoutError:Ak.transitional(Ak.boolean)},!1),null!=r&&(DN.isFunction(r)?t.paramsSerializer={serialize:r}:uk.assertOptions(r,{encode:Ak.function,serialize:Ak.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),uk.assertOptions(t,{baseUrl:Ak.spelling("baseURL"),withXsrfToken:Ak.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&DN.merge(i.common,i[t.method]);i&&DN.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=mO.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let d,u=0;if(!s){const e=[sk.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,c),d=e.length,l=Promise.resolve(t);u<d;)l=l.then(e[u++],e[u++]);return l}d=a.length;let A=t;for(u=0;u<d;){const e=a[u++],t=a[u++];try{A=e(A)}catch(h){t.call(this,h);break}}try{l=sk.call(this,A)}catch(h){return Promise.reject(h)}for(u=0,d=c.length;u<d;)l=l.then(c[u++],c[u++]);return l}getUri(e){return JN(xO((e=OO(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}DN.forEach(["delete","get","head","options"],(function(e){hk.prototype[e]=function(t,n){return this.request(OO(n||{},{method:e,url:t,data:(n||{}).data}))}})),DN.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(OO(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}hk.prototype[e]=t(),hk.prototype[e+"Form"]=t(!0)}));const pk=hk;class fk{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new bO(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new fk((function(t){e=t}));return{token:t,cancel:e}}}const mk=fk;const gk={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gk).forEach((e=>{let[t,n]=e;gk[n]=t}));const vk=gk;const yk=function e(t){const n=new pk(t),r=Yx(pk.prototype.request,n);return DN.extend(r,pk.prototype,n,{allOwnKeys:!0}),DN.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(OO(t,n))},r}(lO);yk.Axios=pk,yk.CanceledError=bO,yk.CancelToken=mk,yk.isCancel=vO,yk.VERSION=ck,yk.toFormData=KN,yk.AxiosError=jN,yk.Cancel=yk.CanceledError,yk.all=function(e){return Promise.all(e)},yk.spread=function(e){return function(t){return e.apply(null,t)}},yk.isAxiosError=function(e){return DN.isObject(e)&&!0===e.isAxiosError},yk.mergeConfig=OO,yk.AxiosHeaders=mO,yk.formToJSON=e=>sO(DN.isHTMLForm(e)?new FormData(e):e),yk.getAdapter=ok,yk.HttpStatusCode=vk,yk.default=yk;const bk=yk,Ek="".concat(Ma.BASE_URL,"/api/Surveys"),wk=async()=>{const e=await localStorage.getItem("accessToken");return{headers:{Authorization:"Bearer ".concat(e)}}},_k={async checkSurveyStatus(){const e=await wk();return(await bk.get("".concat(Ek,"/check-status"),e)).data},async getSuitableSurvey(){const e=await wk();return(await bk.get("".concat(Ek,"/get-suitable"),e)).data},getSurveyById:async e=>(await bk.get("".concat(Ek,"/").concat(e))).data,async submitSurvey(e,t){const n=await wk();return(await bk.post("".concat(Ek,"/").concat(e,"/submit"),{answers:t},n)).data},async getHistory(){const e=await wk();return(await bk.get("".concat(Ek,"/history"),e)).data}},Sk=_k,Ck=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)(!0),[o,a]=(0,t.useState)(null);return(0,t.useEffect)((()=>{Sk.checkSurveyStatus().then(n).catch((()=>a("Kh\xf4ng th\u1ec3 t\u1ea3i tr\u1ea1ng th\xe1i kh\u1ea3o s\xe1t"))).finally((()=>i(!1)))}),[]),r?(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("div",{className:"survey-banner",children:(0,Tt.jsxs)("div",{className:"survey-banner-content",children:[(0,Tt.jsx)("h1",{className:"survey-banner-title",children:"Kh\u1ea3o S\xe1t"}),(0,Tt.jsx)("p",{className:"survey-banner-subtitle",children:"\u0110\xe1nh gi\xe1 t\xe2m l\xfd c\u1ee7a b\u1ea1n qua b\xe0i kh\u1ea3o s\xe1t"})]})}),(0,Tt.jsx)("div",{className:"survey-root",children:(0,Tt.jsx)("div",{className:"survey-container",children:(0,Tt.jsxs)("div",{className:"survey-title",style:{justifyContent:"center"},children:[(0,Tt.jsx)("span",{role:"img","aria-label":"survey",children:"\ud83d\udcdd"})," \u0110ang t\u1ea3i tr\u1ea1ng th\xe1i kh\u1ea3o s\xe1t..."]})})})]}):o?(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("div",{className:"survey-banner",children:(0,Tt.jsxs)("div",{className:"survey-banner-content",children:[(0,Tt.jsx)("h1",{className:"survey-banner-title",children:"Kh\u1ea3o S\xe1t"}),(0,Tt.jsx)("p",{className:"survey-banner-subtitle",children:"\u0110\xe1nh gi\xe1 t\xe2m l\xfd c\u1ee7a b\u1ea1n qua b\xe0i kh\u1ea3o s\xe1t"})]})}),(0,Tt.jsx)("div",{className:"survey-root",children:(0,Tt.jsx)("div",{className:"survey-container survey-alert",children:o})})]}):(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("div",{className:"survey-banner",children:(0,Tt.jsxs)("div",{className:"survey-banner-content",children:[(0,Tt.jsx)("h1",{className:"survey-banner-title",children:"Kh\u1ea3o S\xe1t"}),(0,Tt.jsx)("p",{className:"survey-banner-subtitle",children:"\u0110\xe1nh gi\xe1 m\u1ee9c \u0111\u1ed9 s\u1eed d\u1ee5ng ch\u1ea5t g\xe2y nghi\u1ec7n c\u1ee7a b\u1ea1n qua b\xe0i kh\u1ea3o s\xe1t"})]})}),(0,Tt.jsx)("div",{className:"survey-root",children:(0,Tt.jsxs)("div",{className:"survey-container",style:{maxWidth:900},children:[(0,Tt.jsxs)("div",{className:"survey-title",children:[(0,Tt.jsx)("span",{role:"img","aria-label":"survey",children:"\ud83d\udcdd"})," Kh\u1ea3o s\xe1t"]}),(0,Tt.jsx)("div",{className:"survey-desc",children:null===e||void 0===e?void 0:e.message}),(0,Tt.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16,marginTop:24},children:[(null===e||void 0===e?void 0:e.canTakeSurvey)&&(0,Tt.jsx)(ft,{to:"/surveys/take",style:{textDecoration:"none"},children:(0,Tt.jsx)("button",{className:"survey-btn",style:{width:"100%"},children:"B\u1eaft \u0111\u1ea7u kh\u1ea3o s\xe1t"})}),(null===e||void 0===e?void 0:e.hasCompleted)&&(0,Tt.jsx)(ft,{to:"/surveys/history",style:{textDecoration:"none"},children:(0,Tt.jsx)("button",{className:"survey-btn",style:{width:"100%",background:"linear-gradient(90deg,#60a5fa 0%,#6366f1 100%)"},children:"Xem l\u1ecbch s\u1eed"})})]}),(0,Tt.jsxs)("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"20px",marginTop:"20px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"16px"},children:[(0,Tt.jsxs)("div",{style:{textAlign:"center"},children:[(0,Tt.jsx)("div",{style:{fontSize:"24px",marginBottom:"4px"},children:"\ud83d\udcca"}),(0,Tt.jsx)("div",{style:{fontWeight:"600",color:"#1e293b"},children:"10 c\xe2u h\u1ecfi"}),(0,Tt.jsx)("div",{style:{fontSize:"14px",color:"#64748b"},children:"Th\u1eddi gian: ~5 ph\xfat"})]}),(0,Tt.jsxs)("div",{style:{textAlign:"center"},children:[(0,Tt.jsx)("div",{style:{fontSize:"24px",marginBottom:"4px"},children:"\ud83c\udfaf"}),(0,Tt.jsx)("div",{style:{fontWeight:"600",color:"#1e293b"},children:"95% ch\xednh x\xe1c"}),(0,Tt.jsx)("div",{style:{fontSize:"14px",color:"#64748b"},children:"\u0110\u1ed9 tin c\u1eady"})]})]}),(0,Tt.jsxs)("div",{style:{backgroundColor:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:"12px",padding:"20px",marginTop:"16px"},children:[(0,Tt.jsx)("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px",fontSize:"16px",fontWeight:"600",color:"#1e40af"},children:"\ud83d\udca1 H\u01b0\u1edbng d\u1eabn l\xe0m kh\u1ea3o s\xe1t"}),(0,Tt.jsxs)("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",color:"#1e293b",lineHeight:"1.5"},children:[(0,Tt.jsx)("li",{children:"Tr\u1ea3 l\u1eddi trung th\u1ef1c \u0111\u1ec3 c\xf3 k\u1ebft qu\u1ea3 ch\xednh x\xe1c nh\u1ea5t"}),(0,Tt.jsx)("li",{children:"\u0110\u1ecdc k\u1ef9 t\u1eebng c\xe2u h\u1ecfi tr\u01b0\u1edbc khi ch\u1ecdn \u0111\xe1p \xe1n"}),(0,Tt.jsx)("li",{children:"D\u1ef1a v\xe0o c\u1ea3m nh\u1eadn hi\u1ec7n t\u1ea1i, kh\xf4ng qu\xe1 suy ngh\u0129"}),(0,Tt.jsx)("li",{children:"Ho\xe0n th\xe0nh t\u1ea5t c\u1ea3 c\xe2u h\u1ecfi \u0111\u1ec3 c\xf3 \u0111\xe1nh gi\xe1 \u0111\u1ea7y \u0111\u1ee7"})]})]}),(0,Tt.jsxs)("div",{style:{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"12px",padding:"20px",marginTop:"16px"},children:[(0,Tt.jsx)("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px",fontSize:"16px",fontWeight:"600",color:"#15803d"},children:"\ud83d\udd12 Cam k\u1ebft b\u1ea3o m\u1eadt"}),(0,Tt.jsxs)("div",{style:{fontSize:"14px",color:"#374151",lineHeight:"1.5"},children:[(0,Tt.jsxs)("div",{style:{marginBottom:"8px"},children:["\u2713 ",(0,Tt.jsx)("strong",{children:"B\u1ea3o m\u1eadt tuy\u1ec7t \u0111\u1ed1i:"})," Th\xf4ng tin c\xe1 nh\xe2n \u0111\u01b0\u1ee3c m\xe3 h\xf3a an to\xe0n"]}),(0,Tt.jsxs)("div",{children:["\u2713 ",(0,Tt.jsx)("strong",{children:"Tu\xe2n th\u1ee7 quy \u0111\u1ecbnh:"})," \u0110\xe1p \u1ee9ng ti\xeau chu\u1ea9n b\u1ea3o v\u1ec7 d\u1eef li\u1ec7u c\xe1 nh\xe2n"]})]})]})]})})]})},Tk=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)(0),[s,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)(!1),[A,h]=(0,t.useState)(null),p=he();(0,t.useEffect)((()=>{const e=localStorage.getItem("survey_progress");if(e){const{survey:t,answers:r,current:o}=JSON.parse(e);return n(t),i(r),a(o),void c(!1)}Sk.getSuitableSurvey().then((e=>{n(e),i(e.questions.map((e=>({questionId:e.questionId,selectedAnswerId:null}))))})).catch((()=>h("Kh\xf4ng th\u1ec3 t\u1ea3i kh\u1ea3o s\xe1t"))).finally((()=>c(!1)))}),[]),(0,t.useEffect)((()=>{e&&r.length&&localStorage.setItem("survey_progress",JSON.stringify({survey:e,answers:r,current:o}))}),[e,r,o]);if(s)return(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("div",{className:"survey-banner",children:(0,Tt.jsxs)("div",{className:"survey-banner-content",children:[(0,Tt.jsx)("h1",{className:"survey-banner-title",children:"L\xe0m B\xe0i Kh\u1ea3o S\xe1t"}),(0,Tt.jsx)("p",{className:"survey-banner-subtitle",children:"H\xe3y tr\u1ea3 l\u1eddi c\xe1c c\xe2u h\u1ecfi d\u01b0\u1edbi \u0111\xe2y m\u1ed9t c\xe1ch ch\xe2n th\u1ef1c nh\u1ea5t"})]})}),(0,Tt.jsx)("div",{className:"survey-root",children:(0,Tt.jsxs)("div",{className:"survey-container",children:[(0,Tt.jsxs)("div",{className:"survey-title",style:{justifyContent:"center"},children:[(0,Tt.jsx)("span",{role:"img","aria-label":"survey",children:"\ud83d\udcdd"})," \u0110ang t\u1ea3i c\xe2u h\u1ecfi..."]}),(0,Tt.jsxs)("div",{style:{marginTop:24},children:[(0,Tt.jsx)("div",{className:"survey-progress",children:(0,Tt.jsx)("div",{className:"survey-progress-bar",style:{width:"40%"}})}),(0,Tt.jsxs)("div",{className:"survey-question",style:{opacity:.5},children:[(0,Tt.jsx)("div",{className:"survey-answer",style:{width:"80%",margin:"8px auto",height:32,background:"#f3f4f6"}}),(0,Tt.jsx)("div",{className:"survey-answer",style:{width:"60%",margin:"8px auto",height:32,background:"#f3f4f6"}})]})]})]})})]});if(A)return(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("div",{className:"survey-banner",children:(0,Tt.jsxs)("div",{className:"survey-banner-content",children:[(0,Tt.jsx)("h1",{className:"survey-banner-title",children:"L\xe0m B\xe0i Kh\u1ea3o S\xe1t"}),(0,Tt.jsx)("p",{className:"survey-banner-subtitle",children:"H\xe3y tr\u1ea3 l\u1eddi c\xe1c c\xe2u h\u1ecfi d\u01b0\u1edbi \u0111\xe2y m\u1ed9t c\xe1ch ch\xe2n th\u1ef1c nh\u1ea5t"})]})}),(0,Tt.jsx)("div",{className:"survey-root",children:(0,Tt.jsx)("div",{className:"survey-container survey-alert",children:A})})]});if(!e)return null;const f=e.questions[o],m=e.questions.length,g=r.filter((e=>e.selectedAnswerId)).length,v=Math.round(g/m*100);return(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("div",{className:"survey-banner",children:(0,Tt.jsxs)("div",{className:"survey-banner-content",children:[(0,Tt.jsx)("h1",{className:"survey-banner-title",children:"L\xe0m B\xe0i Kh\u1ea3o S\xe1t"}),(0,Tt.jsx)("p",{className:"survey-banner-subtitle",children:"H\xe3y tr\u1ea3 l\u1eddi c\xe1c c\xe2u h\u1ecfi d\u01b0\u1edbi \u0111\xe2y m\u1ed9t c\xe1ch ch\xe2n th\u1ef1c nh\u1ea5t"})]})}),(0,Tt.jsx)("div",{className:"survey-root",children:(0,Tt.jsxs)("div",{className:"survey-container",children:[(0,Tt.jsxs)("div",{className:"survey-title",children:[(0,Tt.jsx)("span",{role:"img","aria-label":"survey",children:"\ud83d\udcdd"})," ",e.title]}),(0,Tt.jsx)("div",{className:"survey-desc",children:e.description}),"        ",(0,Tt.jsx)("div",{className:"survey-progress","aria-label":"Ti\u1ebfn tr\xecnh kh\u1ea3o s\xe1t",children:(0,Tt.jsx)("div",{className:"survey-progress-bar",style:{width:v+"%"}})}),(0,Tt.jsx)("div",{className:"survey-question",children:f.content}),(0,Tt.jsx)("div",{className:"survey-answers",children:f.answers.map((e=>(0,Tt.jsxs)("label",{className:"survey-answer"+(r[o].selectedAnswerId===e.answerId?" selected":""),children:[(0,Tt.jsx)("input",{type:"radio",checked:r[o].selectedAnswerId===e.answerId,onChange:()=>{return t=e.answerId,void i((e=>e.map(((e,n)=>n===o?l(l({},e),{},{selectedAnswerId:t}):e))));var t},disabled:d,"aria-label":e.answerText}),e.answerText]},e.answerId)))}),(0,Tt.jsxs)("div",{className:"survey-nav",children:[o>0&&(0,Tt.jsx)("button",{className:"survey-btn",onClick:()=>a((e=>e-1)),children:"Tr\u01b0\u1edbc"}),o<e.questions.length-1?(0,Tt.jsx)("button",{className:"survey-btn",onClick:()=>a((e=>e+1)),disabled:!r[o].selectedAnswerId,children:"Ti\u1ebfp"}):(0,Tt.jsx)("button",{className:"survey-btn",onClick:async()=>{if(r.some((e=>!e.selectedAnswerId)))h("Vui l\xf2ng tr\u1ea3 l\u1eddi t\u1ea5t c\u1ea3 c\xe2u h\u1ecfi");else{u(!0);try{const t=await Sk.submitSurvey(e.surveyId,r);localStorage.removeItem("survey_progress"),p("/surveys/results",{state:{result:t}})}catch(XB){var t,n;h((null===(t=XB.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"L\u1ed7i khi n\u1ed9p kh\u1ea3o s\xe1t")}finally{u(!1)}}},disabled:d||!r[o].selectedAnswerId,children:d?"\u0110ang g\u1eedi...":"N\u1ed9p b\xe0i"}),"        "]})]})})]})},Ik=()=>{const{state:e}=de(),t=he(),n=null===e||void 0===e?void 0:e.result;return n?(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("div",{className:"survey-banner",children:(0,Tt.jsxs)("div",{className:"survey-banner-content",children:[(0,Tt.jsx)("h1",{className:"survey-banner-title",children:"K\u1ebft Qu\u1ea3 Kh\u1ea3o S\xe1t"}),(0,Tt.jsx)("p",{className:"survey-banner-subtitle",children:"Ph\xe2n t\xedch v\xe0 \u0111\xe1nh gi\xe1 t\u1eeb b\xe0i kh\u1ea3o s\xe1t c\u1ee7a b\u1ea1n"})]})}),(0,Tt.jsx)("div",{className:"survey-root",children:(0,Tt.jsxs)("div",{className:"survey-container survey-results-container",children:[(0,Tt.jsxs)("div",{className:"survey-title survey-title-center",children:[(0,Tt.jsx)("span",{role:"img","aria-label":"result",children:"\ud83c\udf89"})," ","K\u1ebft qu\u1ea3 kh\u1ea3o s\xe1t"]}),"        ",(0,Tt.jsxs)("div",{className:"survey-results-summary",children:[(0,Tt.jsx)("b",{children:"M\u1ee9c \u0111\u1ed9 r\u1ee7i ro:"})," ",(0,Tt.jsx)("span",{className:"survey-results-risk",children:n.riskLevel})," ",(0,Tt.jsx)("br",{}),(0,Tt.jsx)("b",{children:"\u0110\u1ec1 xu\u1ea5t:"})," ",(0,Tt.jsx)("span",{className:"survey-results-suggestion",children:n.suggestedAction})," ",(0,Tt.jsx)("br",{}),(0,Tt.jsx)("b",{children:"Ng\xe0y n\u1ed9p:"})," ",new Date(n.submittedAt).toLocaleDateString("vi-VN")]}),(0,Tt.jsxs)("div",{className:"survey-action-buttons",children:[(0,Tt.jsxs)(ft,{to:"/counseling",className:"survey-action-btn survey-action-btn--primary",children:[(0,Tt.jsx)("span",{role:"img","aria-label":"calendar",children:"\ud83d\udcc5"})," \u0110\u1eb7t l\u1ecbch t\u01b0 v\u1ea5n ngay"]}),(0,Tt.jsxs)(ft,{to:"/education",className:"survey-action-btn survey-action-btn--secondary",children:[(0,Tt.jsx)("span",{role:"img","aria-label":"book",children:"\ud83d\udcda"})," Xem kh\xf3a h\u1ecdc ph\xf9 h\u1ee3p"]}),(0,Tt.jsxs)("button",{className:"survey-action-btn survey-action-btn--secondary",onClick:()=>t("/surveys"),children:[(0,Tt.jsx)("span",{role:"img","aria-label":"back",children:"\u21a9\ufe0f"})," Quay l\u1ea1i trang kh\u1ea3o s\xe1t"]}),"        "]})]})})]}):(t("/surveys"),null)},Rk=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(!0),[o,a]=(0,t.useState)(null);return(0,t.useEffect)((()=>{Sk.getHistory().then(n).catch((()=>a("Kh\xf4ng th\u1ec3 t\u1ea3i l\u1ecbch s\u1eed kh\u1ea3o s\xe1t"))).finally((()=>i(!1)))}),[]),r?(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("div",{className:"survey-banner",children:(0,Tt.jsxs)("div",{className:"survey-banner-content",children:[(0,Tt.jsx)("h1",{className:"survey-banner-title",children:"L\u1ecbch S\u1eed Kh\u1ea3o S\xe1t"}),(0,Tt.jsx)("p",{className:"survey-banner-subtitle",children:"Xem l\u1ea1i c\xe1c kh\u1ea3o s\xe1t b\u1ea1n \u0111\xe3 ho\xe0n th\xe0nh"})]})}),(0,Tt.jsx)("div",{className:"survey-root",children:(0,Tt.jsx)("div",{className:"survey-container",children:(0,Tt.jsxs)("div",{className:"survey-title survey-title-center",children:[(0,Tt.jsx)("span",{role:"img","aria-label":"history",children:"\ud83d\udcdc"})," \u0110ang t\u1ea3i l\u1ecbch s\u1eed..."]})})})]}):o?(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("div",{className:"survey-banner",children:(0,Tt.jsxs)("div",{className:"survey-banner-content",children:[(0,Tt.jsx)("h1",{className:"survey-banner-title",children:"L\u1ecbch S\u1eed Kh\u1ea3o S\xe1t"}),(0,Tt.jsx)("p",{className:"survey-banner-subtitle",children:"Xem l\u1ea1i c\xe1c kh\u1ea3o s\xe1t b\u1ea1n \u0111\xe3 ho\xe0n th\xe0nh"})]})}),(0,Tt.jsx)("div",{className:"survey-root",children:(0,Tt.jsx)("div",{className:"survey-container survey-alert",children:o})})]}):e.length?(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("div",{className:"survey-banner",children:(0,Tt.jsxs)("div",{className:"survey-banner-content",children:[(0,Tt.jsx)("h1",{className:"survey-banner-title",children:"L\u1ecbch S\u1eed Kh\u1ea3o S\xe1t"}),(0,Tt.jsx)("p",{className:"survey-banner-subtitle",children:"Xem l\u1ea1i c\xe1c kh\u1ea3o s\xe1t b\u1ea1n \u0111\xe3 ho\xe0n th\xe0nh"})]})}),(0,Tt.jsx)("div",{className:"survey-root",children:(0,Tt.jsxs)("div",{className:"survey-container survey-history-container",children:[(0,Tt.jsxs)("div",{className:"survey-title survey-title-center",children:[(0,Tt.jsx)("span",{role:"img","aria-label":"history",children:"\ud83d\udcdc"})," L\u1ecbch s\u1eed kh\u1ea3o s\xe1t"]}),(0,Tt.jsx)("ul",{className:"survey-history-list",children:e.map((e=>(0,Tt.jsx)("li",{className:"survey-history-item",children:(0,Tt.jsxs)("div",{className:"survey-history-card",children:[(0,Tt.jsx)("div",{className:"survey-history-title",children:e.surveyTitle}),(0,Tt.jsxs)("div",{className:"survey-history-date",children:["Ng\xe0y n\u1ed9p: ",new Date(e.submittedAt).toLocaleDateString("vi-VN")]}),(0,Tt.jsxs)("div",{className:"survey-history-risk",children:["R\u1ee7i ro: ",(0,Tt.jsx)("b",{className:"survey-history-risk-level",children:e.riskLevel})]})]})},e.id)))}),(0,Tt.jsx)("div",{className:"survey-back-button-container",children:(0,Tt.jsx)(ft,{to:"/surveys",className:"survey-back-link",children:(0,Tt.jsxs)("button",{className:"survey-btn",children:[(0,Tt.jsx)("span",{className:"survey-back-arrow",children:"\u2190"})," Quay l\u1ea1i trang kh\u1ea3o s\xe1t"]})})})]})})]}):(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("div",{className:"survey-banner",children:(0,Tt.jsxs)("div",{className:"survey-banner-content",children:[(0,Tt.jsx)("h1",{className:"survey-banner-title",children:"L\u1ecbch S\u1eed Kh\u1ea3o S\xe1t"}),(0,Tt.jsx)("p",{className:"survey-banner-subtitle",children:"Xem l\u1ea1i c\xe1c kh\u1ea3o s\xe1t b\u1ea1n \u0111\xe3 ho\xe0n th\xe0nh"})]})}),(0,Tt.jsx)("div",{className:"survey-root",children:(0,Tt.jsx)("div",{className:"survey-container survey-title-center",children:"Ch\u01b0a c\xf3 kh\u1ea3o s\xe1t n\xe0o."})})]})},xk={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||Ma.BASE_URL,Nk=()=>{const e=localStorage.getItem("accessToken"),t={"Content-Type":"application/json",Accept:"application/json"};return e&&(t.Authorization="Bearer ".concat(e)),t},Ok=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const r={method:e,url:"".concat(xk).concat(t),headers:Nk(),timeout:1e4};n&&(r.data=n),console.log("\ud83d\ude80 API Call: ".concat(e," ").concat(r.url),{headers:r.headers,data:n});const i=await bk(r);return console.log("\u2705 API Response: ".concat(e," ").concat(r.url),{status:i.status,data:i.data}),i.data}catch(s){var r,i,o,a;throw console.error("\u274c API Error: ".concat(e," ").concat(xk).concat(t),{status:null===(r=s.response)||void 0===r?void 0:r.status,statusText:null===(i=s.response)||void 0===i?void 0:i.statusText,data:null===(o=s.response)||void 0===o?void 0:o.data,message:s.message,code:s.code}),401===(null===(a=s.response)||void 0===a?void 0:a.status)&&(localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userEmail"),localStorage.removeItem("userFullname"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userPhone"),localStorage.removeItem("userGender"),localStorage.removeItem("userDateOfBirth"),localStorage.removeItem("userAddress"),window.location.href="/login"),s}},kk={getAllEvents:async()=>{try{return await Ok("GET",Ma.ENDPOINTS.COMMUNITY_EVENTS)}catch(e){throw console.error("Error fetching all events:",e),e}},getUpcomingEvents:async()=>{try{return await Ok("GET",Ma.ENDPOINTS.COMMUNITY_EVENTS_UPCOMING)}catch(e){throw console.error("Error fetching upcoming events:",e),e}},getPastEvents:async()=>{try{return await Ok("GET",Ma.ENDPOINTS.COMMUNITY_EVENTS_PAST)}catch(e){throw console.error("Error fetching past events:",e),e}},getEventById:async e=>{try{const t=Ma.ENDPOINTS.COMMUNITY_EVENTS_BY_ID.replace("{id}",e);return await Ok("GET",t)}catch(t){throw console.error("Error fetching event ".concat(e,":"),t),t}},getMyEvents:async()=>{try{return await Ok("GET",Ma.ENDPOINTS.COMMUNITY_EVENTS_MY_EVENTS)}catch(e){throw console.error("Error fetching my events:",e),e}},createEvent:async e=>{try{return await Ok("POST",Ma.ENDPOINTS.COMMUNITY_EVENTS,e)}catch(t){throw console.error("Error creating event:",t),t}},updateEvent:async(e,t)=>{try{const n=Ma.ENDPOINTS.COMMUNITY_EVENTS_BY_ID.replace("{id}",e);return await Ok("PUT",n,t)}catch(n){throw console.error("Error updating event ".concat(e,":"),n),n}},deleteEvent:async e=>{try{const t=Ma.ENDPOINTS.COMMUNITY_EVENTS_BY_ID.replace("{id}",e);return await Ok("DELETE",t)}catch(t){throw console.error("Error deleting event ".concat(e,":"),t),t}},registerForEvent:async e=>{try{return await Ok("POST",Ma.ENDPOINTS.EVENT_PARTICIPANTS_REGISTER,{eventId:e})}catch(t){throw console.error("Error registering for event ".concat(e,":"),t),t}},unregisterFromEvent:async e=>{try{const t=Ma.ENDPOINTS.EVENT_PARTICIPANTS_UNREGISTER.replace("{eventId}",e);return await Ok("DELETE",t)}catch(t){throw console.error("Error unregistering from event ".concat(e,":"),t),t}},checkRegistrationStatus:async e=>{try{var t;const n=Ma.ENDPOINTS.EVENT_PARTICIPANTS_CHECK_REGISTRATION.replace("{eventId}",e);console.log("\ud83d\udd0d Calling registration check API:",{endpoint:"".concat(xk).concat(n),eventId:e,headers:Nk()});const r=await Ok("GET",n);console.log("\ud83d\udce1 Registration check API response:",{endpoint:n,response:r,responseType:typeof r,responseKeys:Object.keys(r||{}),dataKeys:Object.keys((null===r||void 0===r?void 0:r.data)||{}),fullStructure:JSON.stringify(r,null,2)});let i={success:(null===r||void 0===r?void 0:r.success)||void 0!==(null===r||void 0===r?void 0:r.data),data:{isRegistered:!1}};if(void 0!==(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.isRegistered))i.data.isRegistered=Boolean(r.data.isRegistered);else if(void 0!==(null===r||void 0===r?void 0:r.isRegistered))i.data.isRegistered=Boolean(r.isRegistered);else if(!0===(null===r||void 0===r?void 0:r.data)||!1===(null===r||void 0===r?void 0:r.data))i.data.isRegistered=Boolean(r.data);else if("object"===typeof(null===r||void 0===r?void 0:r.data)&&null!==(null===r||void 0===r?void 0:r.data)){const e=r.data.registered||r.data.isParticipant||r.data.joined;i.data.isRegistered=Boolean(e)}return console.log("\ud83d\udccb Normalized registration response:",{original:r,normalized:i,finalStatus:i.data.isRegistered}),i}catch(i){var n,r;throw console.error("\u274c Error checking registration status for event ".concat(e,":"),{error:i,status:null===(n=i.response)||void 0===n?void 0:n.status,data:null===(r=i.response)||void 0===r?void 0:r.data,message:i.message}),i}},getFeedbackByEvent:async e=>{try{const t=Ma.ENDPOINTS.EVENT_FEEDBACK_BY_EVENT.replace("{eventId}",e);return await Ok("GET",t)}catch(t){throw console.error("Error fetching feedback for event ".concat(e,":"),t),t}},getMyFeedback:async()=>{try{return await Ok("GET",Ma.ENDPOINTS.EVENT_FEEDBACK_BY_USER)}catch(e){throw console.error("Error fetching my feedback:",e),e}},checkUserFeedbackStatus:async e=>{try{const t=Ma.ENDPOINTS.EVENT_FEEDBACK_CHECK_USER.replace("{eventId}",e);return await Ok("GET",t)}catch(r){var t,n;if(console.error("Error checking feedback status for event ".concat(e,":"),r),404===(null===(t=r.response)||void 0===t?void 0:t.status)||405===(null===(n=r.response)||void 0===n?void 0:n.status))return console.log("Feedback check endpoint not available, assuming no existing feedback"),{success:!0,data:null};throw r}},submitFeedback:async e=>{try{var t;console.log("\ud83d\udd0d Submitting feedback with details:",{eventId:null===e||void 0===e?void 0:e.eventId,rating:null===e||void 0===e?void 0:e.rating,comment:(null===e||void 0===e||null===(t=e.comment)||void 0===t?void 0:t.substring(0,50))+"...",endpoint:Ma.ENDPOINTS.EVENT_FEEDBACK,fullUrl:"".concat(xk).concat(Ma.ENDPOINTS.EVENT_FEEDBACK),payload:e});const n=await Ok("POST",Ma.ENDPOINTS.EVENT_FEEDBACK,e);return console.log("\u2705 Feedback submitted successfully:",n),n}catch(o){var n,r,i;throw console.error("\u274c Error submitting feedback:",{status:null===(n=o.response)||void 0===n?void 0:n.status,statusText:null===(r=o.response)||void 0===r?void 0:r.statusText,data:null===(i=o.response)||void 0===i?void 0:i.data,message:o.message,payload:e}),o}},updateFeedback:async(e,t)=>{try{const n=Ma.ENDPOINTS.EVENT_FEEDBACK_BY_ID.replace("{id}",e);return await Ok("PUT",n,t)}catch(i){var n,r;if(console.error("Error updating feedback ".concat(e,":"),i),404===(null===(n=i.response)||void 0===n?void 0:n.status)||405===(null===(r=i.response)||void 0===r?void 0:r.status))return console.log("Update endpoint not available, trying to submit as new feedback"),await kk.submitFeedback(t);throw i}},getAllFeedback:async()=>{try{return await Ok("GET",Ma.ENDPOINTS.EVENT_FEEDBACK)}catch(e){throw console.error("Error fetching all feedback:",e),e}},getFeedbackById:async e=>{try{const t=Ma.ENDPOINTS.EVENT_FEEDBACK_BY_ID.replace("{id}",e);return await Ok("GET",t)}catch(t){throw console.error("Error fetching feedback ".concat(e,":"),t),t}},deleteFeedback:async e=>{try{const t=Ma.ENDPOINTS.EVENT_FEEDBACK_BY_ID.replace("{id}",e);return await Ok("DELETE",t)}catch(t){throw console.error("Error deleting feedback ".concat(e,":"),t),t}},getEventAverageRating:async e=>{try{const t=Ma.ENDPOINTS.EVENT_FEEDBACK_AVERAGE_RATING.replace("{eventId}",e);return await Ok("GET",t)}catch(t){throw console.error("Error fetching average rating for event ".concat(e,":"),t),t}},getEventFeedbackCount:async e=>{try{const t=Ma.ENDPOINTS.EVENT_FEEDBACK_COUNT.replace("{eventId}",e);return await Ok("GET",t)}catch(t){throw console.error("Error fetching feedback count for event ".concat(e,":"),t),t}},getEventParticipants:async e=>{try{const t=Ma.ENDPOINTS.EVENT_PARTICIPANTS_BY_EVENT.replace("{eventId}",e);return await Ok("GET",t)}catch(t){throw console.error("Error fetching participants for event ".concat(e,":"),t),t}}},Pk=kk,Bk=e=>{let{isOpen:n,onClose:r,eventToEdit:i=null,onEventSaved:o,mode:a="create"}=e;const[s,c]=(0,t.useState)({title:"",description:"",startTime:"",endTime:"",location:"",onlineLink:"",imageUrl:""}),[d,u]=(0,t.useState)(!1),[A,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),m=e=>{if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(i,"T").concat(o,":").concat(a)}catch(t){return""}},g=e=>{if(!e)return null;try{const t=new Date(e);if(isNaN(t.getTime()))return null;const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(i,"T").concat(o,":").concat(a,":").concat(s,"+07:00")}catch(t){return null}},v={title:"",description:"",startTime:"",endTime:"",location:"",onlineLink:"",imageUrl:""};(0,t.useEffect)((()=>{"edit"===a&&i?(c({title:i.title||"",description:i.description||"",startTime:m(i.startTime||i.startDate),endTime:m(i.endTime||i.endDate),location:i.location||"",onlineLink:i.onlineLink||"",imageUrl:i.imageUrl||""}),f(i.imageUrl||null)):(c(l({},v)),f(null)),h(null)}),[a,i,n]);const y=e=>{const{name:t,value:n}=e.target;c((e=>l(l({},e),{},{[t]:n})))};return n?(0,Tt.jsx)("div",{className:"modal-overlay",onClick:r,children:(0,Tt.jsxs)("div",{className:"event-management-modal",onClick:e=>e.stopPropagation(),style:{maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[(0,Tt.jsxs)("div",{className:"modal-header",children:[(0,Tt.jsx)("h2",{children:"edit"===a?"Ch\u1ec9nh s\u1eeda s\u1ef1 ki\u1ec7n":"T\u1ea1o s\u1ef1 ki\u1ec7n m\u1edbi"}),(0,Tt.jsx)("button",{className:"modal-close",onClick:r,children:"\xd7"})]}),(0,Tt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.title.trim()?s.description.trim()?s.startTime?!(s.endTime&&new Date(s.endTime)<=new Date(s.startTime))||(h("Th\u1eddi gian k\u1ebft th\xfac ph\u1ea3i sau th\u1eddi gian b\u1eaft \u0111\u1ea7u"),0):(h("Th\u1eddi gian b\u1eaft \u0111\u1ea7u l\xe0 b\u1eaft bu\u1ed9c"),0):(h("M\xf4 t\u1ea3 s\u1ef1 ki\u1ec7n l\xe0 b\u1eaft bu\u1ed9c"),0):(h("Ti\xeau \u0111\u1ec1 s\u1ef1 ki\u1ec7n l\xe0 b\u1eaft bu\u1ed9c"),0)){u(!0),h(null);try{const e={title:s.title.trim(),description:s.description.trim(),startTime:g(s.startTime),endTime:s.endTime?g(s.endTime):null,location:s.location.trim()||null,onlineLink:s.onlineLink.trim()||null,imageUrl:s.imageUrl||null};if(!e.startTime)return void h("Th\u1eddi gian b\u1eaft \u0111\u1ea7u kh\xf4ng h\u1ee3p l\u1ec7");let n;var t;if(n="edit"===a&&null!==i&&void 0!==i&&i.id?await Pk.updateEvent(i.id,e):await Pk.createEvent(e),n&&n.success)o&&o(n.data),r(),c(l({},v)),f(null);else h((null===(t=n)||void 0===t?void 0:t.message)||"L\u1ed7i khi ".concat("edit"===a?"c\u1eadp nh\u1eadt":"t\u1ea1o"," s\u1ef1 ki\u1ec7n"))}catch(rI){var n,d,A,p,m,y,b,E,w,_,S,C,T;console.error("".concat("edit"===a?"Update":"Create"," event error:"),rI),console.error("Error response:",{status:null===(n=rI.response)||void 0===n?void 0:n.status,statusText:null===(d=rI.response)||void 0===d?void 0:d.statusText,data:null===(A=rI.response)||void 0===A?void 0:A.data,headers:null===(p=rI.response)||void 0===p?void 0:p.headers,config:rI.config});let t="\u0110\xe3 x\u1ea3y ra l\u1ed7i khi ".concat("edit"===a?"c\u1eadp nh\u1eadt":"t\u1ea1o"," s\u1ef1 ki\u1ec7n");if(null!==(m=rI.response)&&void 0!==m&&null!==(y=m.data)&&void 0!==y&&y.message)t=rI.response.data.message;else if(null!==(b=rI.response)&&void 0!==b&&null!==(E=b.data)&&void 0!==E&&E.error)t=rI.response.data.error;else if(null!==(w=rI.response)&&void 0!==w&&null!==(_=w.data)&&void 0!==_&&_.errors){const n=rI.response.data.errors;Array.isArray(n)?t=n.join(", "):"object"===typeof n&&(t=Object.values(n).flat().join(", "))}else 400===(null===(S=rI.response)||void 0===S?void 0:S.status)?t="D\u1eef li\u1ec7u kh\xf4ng h\u1ee3p l\u1ec7. Vui l\xf2ng ki\u1ec3m tra l\u1ea1i c\xe1c tr\u01b0\u1eddng th\xf4ng tin.":401===(null===(C=rI.response)||void 0===C?void 0:C.status)?t="B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n th\u1ef1c hi\u1ec7n thao t\xe1c n\xe0y. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i.":403===(null===(T=rI.response)||void 0===T?void 0:T.status)&&(t="B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n t\u1ea1o s\u1ef1 ki\u1ec7n. Vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean.");h(t)}finally{u(!1)}}},className:"event-form",style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},children:[(0,Tt.jsxs)("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"20px",maxHeight:"calc(90vh - 120px)"},children:[A&&(0,Tt.jsxs)("div",{className:"error-message mb-4",children:[(0,Tt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),A]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{htmlFor:"title",children:"Ti\xeau \u0111\u1ec1 s\u1ef1 ki\u1ec7n *"}),(0,Tt.jsx)("input",{type:"text",id:"title",name:"title",value:s.title,onChange:y,placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 s\u1ef1 ki\u1ec7n",required:!0})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{htmlFor:"description",children:"M\xf4 t\u1ea3 s\u1ef1 ki\u1ec7n *"}),(0,Tt.jsx)("textarea",{id:"description",name:"description",value:s.description,onChange:y,placeholder:"Nh\u1eadp m\xf4 t\u1ea3 s\u1ef1 ki\u1ec7n",rows:"4",required:!0})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{htmlFor:"imageUrl",children:"\u1ea2nh s\u1ef1 ki\u1ec7n"}),(0,Tt.jsx)("input",{type:"url",id:"imageUrl",name:"imageUrl",value:s.imageUrl,onChange:e=>{y(e),e.target.value?f(e.target.value):f(null)},placeholder:"https://example.com/image.jpg"}),s.imageUrl&&(0,Tt.jsxs)("div",{className:"image-preview",style:{margin:"16px 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",maxWidth:"400px",minHeight:"120px",maxHeight:"260px",overflow:"hidden",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",background:"#f8fafc"},children:[(0,Tt.jsx)("img",{src:s.imageUrl,alt:"Event preview",style:{width:"100%",height:"auto",maxHeight:"240px",objectFit:"contain",borderRadius:"12px",background:"#fff",boxShadow:"0 1px 4px rgba(0,0,0,0.06)"},onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}),(0,Tt.jsx)("div",{style:{display:"none",padding:"20px",textAlign:"center",color:"#999"},children:"Kh\xf4ng th\u1ec3 t\u1ea3i \u1ea3nh"}),(0,Tt.jsx)("button",{type:"button",className:"btn-remove-image",onClick:()=>{f(null),c((e=>l(l({},e),{},{imageUrl:""})))},title:"X\xf3a \u1ea3nh",style:{marginTop:"8px"},children:"\xd7"})]}),(0,Tt.jsx)("small",{className:"form-text",children:"Nh\u1eadp URL \u1ea3nh (JPG, PNG, GIF)."})]}),(0,Tt.jsxs)("div",{className:"form-row",children:[(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{htmlFor:"startTime",children:"Th\u1eddi gian b\u1eaft \u0111\u1ea7u *"}),(0,Tt.jsx)("input",{type:"datetime-local",id:"startTime",name:"startTime",value:s.startTime,onChange:y,required:!0})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{htmlFor:"endTime",children:"Th\u1eddi gian k\u1ebft th\xfac"}),(0,Tt.jsx)("input",{type:"datetime-local",id:"endTime",name:"endTime",value:s.endTime,onChange:y})]})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{htmlFor:"location",children:"\u0110\u1ecba \u0111i\u1ec3m"}),(0,Tt.jsx)("input",{type:"text",id:"location",name:"location",value:s.location,onChange:y,placeholder:"Nh\u1eadp \u0111\u1ecba \u0111i\u1ec3m t\u1ed5 ch\u1ee9c"})]}),(0,Tt.jsx)("div",{className:"form-row",children:(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{htmlFor:"onlineLink",children:"Link tham gia online"}),(0,Tt.jsx)("input",{type:"url",id:"onlineLink",name:"onlineLink",value:s.onlineLink,onChange:y,placeholder:"https://..."})]})})]}),(0,Tt.jsxs)("div",{className:"modal-footer",children:[(0,Tt.jsx)("button",{type:"button",className:"btn-secondary",onClick:r,disabled:d,children:"H\u1ee7y"}),(0,Tt.jsx)("button",{type:"submit",className:"btn-primary",disabled:d,children:d?"\u0110ang x\u1eed l\xfd...":"edit"===a?"Ho\xe0n t\u1ea5t ch\u1ec9nh s\u1eeda":"T\u1ea1o s\u1ef1 ki\u1ec7n"})]})]})]})}):null},Lk=e=>{let{isOpen:t,onClose:n,onConfirm:r,eventTitle:i,loading:o=!1}=e;return t?(0,Tt.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Tt.jsx)("div",{className:"delete-confirmation-modal",onClick:e=>e.stopPropagation(),children:(0,Tt.jsxs)("div",{className:"delete-confirmation-content",children:[(0,Tt.jsx)("svg",{className:"warning-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,Tt.jsx)("h3",{children:"X\xe1c nh\u1eadn x\xf3a s\u1ef1 ki\u1ec7n"}),(0,Tt.jsxs)("p",{children:["B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a s\u1ef1 ki\u1ec7n ",(0,Tt.jsxs)("strong",{children:['"',i,'"']}),"?",(0,Tt.jsx)("br",{}),"H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c."]}),(0,Tt.jsxs)("div",{className:"delete-confirmation-actions",children:[(0,Tt.jsx)("button",{className:"btn-secondary",onClick:n,disabled:o,children:"H\u1ee7y"}),(0,Tt.jsx)("button",{className:"btn-confirm-delete",onClick:r,disabled:o,children:o?"\u0110ang x\xf3a...":"X\xf3a s\u1ef1 ki\u1ec7n"})]})]})})}):null},Dk=e=>{let{event:n,isOpen:r,onClose:i,onFeedbackSubmitted:o}=e;const[a,s]=(0,t.useState)({rating:0,comment:""}),[c,d]=(0,t.useState)(!1),[u,A]=(0,t.useState)(null),[h,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1),[y,b]=(0,t.useState)(!1);(0,t.useEffect)((()=>{r&&null!==n&&void 0!==n&&n.id?(b(!1),p(!1),A(null),E()):(s({rating:0,comment:""}),m(null))}),[r,null===n||void 0===n?void 0:n.id]);const E=async()=>{if(null!==n&&void 0!==n&&n.id){v(!0);try{var e;const t=await Pk.checkUserFeedbackStatus(n.id);null!==t&&void 0!==t&&t.success&&null!==t&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.id?(m(t.data),s({rating:t.data.rating||0,comment:t.data.comment||""}),console.log("\u2705 Found existing feedback:",t.data.id)):(m(null),s({rating:0,comment:""}))}catch(rI){console.log("\u26a0\ufe0f Could not check existing feedback (this is normal if endpoint doesn't exist):",rI.message),m(null),s({rating:0,comment:""})}finally{v(!1)}}},w=()=>{b(!0),setTimeout((()=>{i(),b(!1)}),300)},_=async e=>{if(e.preventDefault(),0===a.rating?(A("Vui l\xf2ng ch\u1ecdn s\u1ed1 sao \u0111\xe1nh gi\xe1"),0):a.comment.trim()?!(a.comment.trim().length<10)||(A("Nh\u1eadn x\xe9t ph\u1ea3i c\xf3 \xedt nh\u1ea5t 10 k\xfd t\u1ef1"),0):(A("Vui l\xf2ng nh\u1eadp nh\u1eadn x\xe9t v\u1ec1 s\u1ef1 ki\u1ec7n"),0)){d(!0),A(null);try{var t;const e={eventId:n.id,rating:parseInt(a.rating),comment:a.comment.trim()};let s;try{s=await Pk.submitFeedback(e)}catch(g){var r;if(null===f||void 0===f||!f.id||409!==(null===(r=g.response)||void 0===r?void 0:r.status))throw g;s=await Pk.updateFeedback(f.id,e)}var i;if(null!==(t=s)&&void 0!==t&&t.success)p(!0),o&&o(),setTimeout(w,2e3);else A((null===(i=s)||void 0===i?void 0:i.message)||"\u0110\xe3 x\u1ea3y ra l\u1ed7i khi g\u1eedi \u0111\xe1nh gi\xe1")}catch(rI){var s,c,l,u,h,m;let t="\u0110\xe3 x\u1ea3y ra l\u1ed7i khi g\u1eedi \u0111\xe1nh gi\xe1";const n=null===(s=rI.response)||void 0===s?void 0:s.data;if(400===(null===(c=rI.response)||void 0===c?void 0:c.status))t=null!==n&&void 0!==n&&n.message?n.message:null!==n&&void 0!==n&&n.title?n.title:null!==n&&void 0!==n&&n.errors?Object.values(n.errors).flat().join(", ")||"D\u1eef li\u1ec7u kh\xf4ng h\u1ee3p l\u1ec7":"string"===typeof n?n:"D\u1eef li\u1ec7u kh\xf4ng h\u1ee3p l\u1ec7 - vui l\xf2ng ki\u1ec3m tra l\u1ea1i th\xf4ng tin";else if(401===(null===(l=rI.response)||void 0===l?void 0:l.status))t="B\u1ea1n c\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 th\u1ef1c hi\u1ec7n thao t\xe1c n\xe0y";else if(403===(null===(u=rI.response)||void 0===u?void 0:u.status))t="B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n \u0111\xe1nh gi\xe1 s\u1ef1 ki\u1ec7n n\xe0y";else{if(404===(null===(h=rI.response)||void 0===h?void 0:h.status)||405===(null===(m=rI.response)||void 0===m?void 0:m.status))return t="Ch\u1ee9c n\u0103ng \u0111\xe1nh gi\xe1 \u0111ang \u0111\u01b0\u1ee3c ph\xe1t tri\u1ec3n. C\u1ea3m \u01a1n b\u1ea1n \u0111\xe3 quan t\xe2m!",p(!0),o&&o(),void setTimeout(w,3e3);null!==n&&void 0!==n&&n.message&&(t=n.message)}A(t)}finally{d(!1)}}};return r?(0,Tt.jsx)("div",{className:"modal-overlay".concat(y?" closing":""),onClick:w,role:"dialog","aria-modal":"true",tabIndex:"-1",children:(0,Tt.jsxs)("div",{className:"modal-content event-feedback-modal",onClick:e=>e.stopPropagation(),role:"document",children:[(0,Tt.jsxs)("div",{className:"modal-header",children:[(0,Tt.jsx)("h2",{children:f?"C\u1eadp nh\u1eadt \u0111\xe1nh gi\xe1":"\u0110\xe1nh gi\xe1 s\u1ef1 ki\u1ec7n"}),(0,Tt.jsx)("button",{className:"modal-close",onClick:w,children:"\xd7"})]}),(0,Tt.jsx)("div",{className:"modal-body",children:g?(0,Tt.jsxs)("div",{className:"loading-state",children:[(0,Tt.jsx)("div",{className:"loading-spinner"}),(0,Tt.jsx)("p",{children:"\u0110ang ki\u1ec3m tra \u0111\xe1nh gi\xe1 hi\u1ec7n t\u1ea1i..."})]}):h?(0,Tt.jsxs)("div",{className:"success-state",children:[(0,Tt.jsx)("div",{className:"success-icon",children:"\u2705"}),(0,Tt.jsx)("h3",{children:"G\u1eedi \u0111\xe1nh gi\xe1 th\xe0nh c\xf4ng!"}),(0,Tt.jsxs)("p",{children:['C\u1ea3m \u01a1n b\u1ea1n \u0111\xe3 chia s\u1ebb ph\u1ea3n h\u1ed3i v\u1ec1 s\u1ef1 ki\u1ec7n "',null===n||void 0===n?void 0:n.title,'"']})]}):(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsxs)("div",{className:"event-info",children:[(0,Tt.jsxs)("h3",{children:["S\u1ef1 ki\u1ec7n: ",null===n||void 0===n?void 0:n.title]}),(0,Tt.jsx)("p",{className:"event-date",children:(null===n||void 0===n?void 0:n.startTime)&&new Date(n.startTime).toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),u&&(0,Tt.jsxs)("div",{className:"error-message",children:[(0,Tt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u]}),(0,Tt.jsxs)("form",{onSubmit:_,className:"feedback-form",children:[(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{htmlFor:"rating",children:"\u0110\xe1nh gi\xe1 t\u1ed5ng th\u1ec3 *"}),(0,Tt.jsx)("div",{className:"rating-stars",id:"rating",role:"radiogroup","aria-labelledby":"rating",children:[1,2,3,4,5].map((e=>(0,Tt.jsx)("button",{type:"button",className:"star".concat(a.rating>=e?" filled":""),onClick:()=>{return t=e,void s((e=>l(l({},e),{},{rating:t})));var t},"aria-label":"".concat(e," sao"),children:"\u2b50"},e)))}),(0,Tt.jsxs)("div",{className:"rating-labels",children:[(0,Tt.jsx)("span",{children:"R\u1ea5t t\u1ec7"}),(0,Tt.jsx)("span",{children:"Tuy\u1ec7t v\u1eddi"})]})]}),(0,Tt.jsxs)("div",{className:"form-group",children:[(0,Tt.jsx)("label",{htmlFor:"comment",children:"Nh\u1eadn x\xe9t chi ti\u1ebft *"}),(0,Tt.jsx)("textarea",{id:"comment",name:"comment",value:a.comment,onChange:e=>{const{name:t,value:n}=e.target;s((e=>l(l({},e),{},{[t]:n})))},placeholder:"Chia s\u1ebb tr\u1ea3i nghi\u1ec7m c\u1ee7a b\u1ea1n v\u1ec1 s\u1ef1 ki\u1ec7n n\xe0y...",rows:"4",maxLength:"1000",required:!0}),(0,Tt.jsxs)("div",{className:"char-count",children:[a.comment.length,"/1000 k\xfd t\u1ef1"]})]}),(0,Tt.jsxs)("div",{className:"form-suggestions",children:[(0,Tt.jsx)("p",{children:(0,Tt.jsx)("strong",{children:"G\u1ee3i \xfd n\u1ed9i dung \u0111\xe1nh gi\xe1:"})}),(0,Tt.jsxs)("ul",{children:[(0,Tt.jsx)("li",{children:"Ch\u1ea5t l\u01b0\u1ee3ng n\u1ed9i dung v\xe0 t\xednh h\u1eefu \xedch c\u1ee7a s\u1ef1 ki\u1ec7n"}),(0,Tt.jsx)("li",{children:"S\u1ef1 t\u1ed5 ch\u1ee9c v\xe0 chuy\xean nghi\u1ec7p c\u1ee7a ban t\u1ed5 ch\u1ee9c"}),(0,Tt.jsx)("li",{children:"M\xf4i tr\u01b0\u1eddng v\xe0 kh\xf4ng kh\xed s\u1ef1 ki\u1ec7n"}),(0,Tt.jsx)("li",{children:"\u0110i\u1ec1u g\xec b\u1ea1n th\xedch nh\u1ea5t v\xe0 mu\u1ed1n c\u1ea3i thi\u1ec7n"})]})]})]})]})}),!g&&!h&&(0,Tt.jsxs)("div",{className:"modal-footer",children:[(0,Tt.jsx)("button",{type:"button",className:"btn-secondary",onClick:w,disabled:c,children:"H\u1ee7y"}),(0,Tt.jsx)("button",{type:"submit",className:"btn-primary",onClick:_,disabled:c||0===a.rating,children:c?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)("span",{className:"loading-spinner"}),"\u0110ang g\u1eedi..."]}):f?"C\u1eadp nh\u1eadt \u0111\xe1nh gi\xe1":"G\u1eedi \u0111\xe1nh gi\xe1"})]})]})}):null},Uk=e=>{let{eventId:n,eventTitle:r}=e;const{isStaff:i}=ts(),[o,a]=(0,t.useState)([]),[s,c]=(0,t.useState)(!0),[l,d]=(0,t.useState)(null),[u,A]=(0,t.useState)(n?{id:n,title:r}:null),[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)({averageRating:0,totalFeedbacks:0,ratingDistribution:{1:0,2:0,3:0,4:0,5:0}});(0,t.useEffect)((()=>{n||g()}),[n]),(0,t.useEffect)((()=>{null!==u&&void 0!==u&&u.id&&v(u.id)}),[u]);const g=async()=>{try{const e=await Pk.getAllEvents();e&&e.success&&(p(e.data||[]),e.data&&e.data.length>0&&A(e.data[0]))}catch(rI){console.error("Error loading events:",rI),d("Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch s\u1ef1 ki\u1ec7n")}},v=async e=>{if(e){c(!0),d(null);try{const t=await Pk.getFeedbackByEvent(e);let n=[];if(t&&t.success&&(n=t.data||[]),a(n),n.length>0){const e=n.reduce(((e,t)=>e+(t.rating||0)),0)/n.length,t={1:0,2:0,3:0,4:0,5:0};n.forEach((e=>{e.rating>=1&&e.rating<=5&&t[e.rating]++})),m({averageRating:e,totalFeedbacks:n.length,ratingDistribution:t})}else m({averageRating:0,totalFeedbacks:0,ratingDistribution:{1:0,2:0,3:0,4:0,5:0}})}catch(rI){console.error("Error loading event feedback:",rI),d("Kh\xf4ng th\u1ec3 t\u1ea3i \u0111\xe1nh gi\xe1 c\u1ee7a s\u1ef1 ki\u1ec7n")}finally{c(!1)}}},y=e=>e?new Date(e).toLocaleString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Ch\u01b0a x\xe1c \u0111\u1ecbnh",b=e=>{const t=[];for(let n=1;n<=5;n++)t.push((0,Tt.jsx)("span",{className:"star ".concat(n<=e?"filled":""),children:"\u2605"},n));return t};return i()?(0,Tt.jsxs)("div",{className:"feedback-list-container",children:[(0,Tt.jsxs)("div",{className:"feedback-list-header",children:[(0,Tt.jsx)("h1",{children:"\ud83d\udcca Qu\u1ea3n l\xfd \u0111\xe1nh gi\xe1 s\u1ef1 ki\u1ec7n"}),(0,Tt.jsx)("p",{children:"Xem v\xe0 qu\u1ea3n l\xfd t\u1ea5t c\u1ea3 \u0111\xe1nh gi\xe1 t\u1eeb ng\u01b0\u1eddi tham gia"})]}),!n&&h.length>0&&(0,Tt.jsxs)("div",{className:"event-selector",children:[(0,Tt.jsx)("label",{htmlFor:"event-select",children:"Ch\u1ecdn s\u1ef1 ki\u1ec7n:"}),(0,Tt.jsxs)("select",{id:"event-select",value:(null===u||void 0===u?void 0:u.id)||"",onChange:e=>{const t=h.find((t=>t.id===e.target.value));A(t)},className:"event-select-input",children:[(0,Tt.jsx)("option",{value:"",children:"-- Ch\u1ecdn s\u1ef1 ki\u1ec7n --"}),h.map((e=>(0,Tt.jsxs)("option",{value:e.id,children:[e.title," (",y(e.startTime||e.startDate),")"]},e.id)))]})]}),u&&(0,Tt.jsxs)("div",{className:"selected-event-info",children:[(0,Tt.jsxs)("h2",{children:["\ud83d\udcc5 ",u.title]}),u.startTime&&(0,Tt.jsxs)("p",{className:"event-date",children:["\ud83d\udd52 ",y(u.startTime)]})]}),u&&!s&&(0,Tt.jsxs)("div",{className:"feedback-stats",children:[(0,Tt.jsxs)("div",{className:"stats-grid",children:[(0,Tt.jsxs)("div",{className:"stat-card",children:[(0,Tt.jsx)("div",{className:"stat-number",children:f.totalFeedbacks}),(0,Tt.jsx)("div",{className:"stat-label",children:"T\u1ed5ng \u0111\xe1nh gi\xe1"})]}),(0,Tt.jsxs)("div",{className:"stat-card",children:[(0,Tt.jsx)("div",{className:"stat-number",children:f.averageRating>0?f.averageRating.toFixed(1):"0"}),(0,Tt.jsx)("div",{className:"stat-label",children:"\u0110i\u1ec3m trung b\xecnh"}),(0,Tt.jsx)("div",{className:"stat-stars",children:b(Math.round(f.averageRating))})]})]}),f.totalFeedbacks>0&&(0,Tt.jsxs)("div",{className:"rating-distribution",children:[(0,Tt.jsx)("h3",{children:"Ph\xe2n b\u1ed1 \u0111\xe1nh gi\xe1"}),(0,Tt.jsx)("div",{className:"distribution-bars",children:[5,4,3,2,1].map((e=>(0,Tt.jsxs)("div",{className:"distribution-row",children:[(0,Tt.jsxs)("span",{className:"rating-label",children:[e," \u2b50"]}),(0,Tt.jsx)("div",{className:"progress-bar",children:(0,Tt.jsx)("div",{className:"progress-fill",style:{width:"".concat(f.totalFeedbacks>0?f.ratingDistribution[e]/f.totalFeedbacks*100:0,"%")}})}),(0,Tt.jsxs)("span",{className:"count-label",children:["(",f.ratingDistribution[e],")"]})]},e)))})]})]}),l&&(0,Tt.jsxs)("div",{className:"error-message",children:[(0,Tt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),l]}),s&&(0,Tt.jsxs)("div",{className:"loading-state",children:[(0,Tt.jsx)("div",{className:"loading-spinner"}),(0,Tt.jsx)("p",{children:"\u0110ang t\u1ea3i \u0111\xe1nh gi\xe1..."})]}),!s&&u&&(0,Tt.jsx)("div",{className:"feedback-list",children:o.length>0?(0,Tt.jsx)("div",{className:"feedbacks-grid",children:o.map((e=>(0,Tt.jsxs)("div",{className:"feedback-card",children:[(0,Tt.jsxs)("div",{className:"feedback-header",children:[(0,Tt.jsxs)("div",{className:"user-info",children:[(0,Tt.jsx)("div",{className:"user-avatar",children:e.userDisplayName?e.userDisplayName.charAt(0).toUpperCase():"?"}),(0,Tt.jsxs)("div",{className:"user-details",children:[(0,Tt.jsx)("h4",{children:e.userDisplayName||"Ng\u01b0\u1eddi d\xf9ng \u1ea9n danh"}),(0,Tt.jsx)("p",{className:"feedback-date",children:y(e.submittedAt||e.createdAt)})]})]}),(0,Tt.jsx)("div",{className:"feedback-actions",children:(0,Tt.jsx)("button",{className:"btn-delete-feedback",onClick:()=>(async e=>{if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a \u0111\xe1nh gi\xe1 n\xe0y?"))try{const t=await Pk.deleteFeedback(e);t&&t.success?null!==u&&void 0!==u&&u.id&&v(u.id):alert("Kh\xf4ng th\u1ec3 x\xf3a \u0111\xe1nh gi\xe1")}catch(rI){console.error("Error deleting feedback:",rI),alert("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi x\xf3a \u0111\xe1nh gi\xe1")}})(e.id),title:"X\xf3a \u0111\xe1nh gi\xe1",children:(0,Tt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]}),(0,Tt.jsxs)("div",{className:"feedback-rating",children:[(0,Tt.jsx)("div",{className:"stars",children:b(e.rating||0)}),(0,Tt.jsxs)("span",{className:"rating-text",children:[e.rating||0,"/5"]})]}),e.comment&&(0,Tt.jsx)("div",{className:"feedback-comment",children:(0,Tt.jsxs)("p",{children:['"',e.comment,'"']})})]},e.id)))}):(0,Tt.jsxs)("div",{className:"empty-state",children:[(0,Tt.jsx)("div",{className:"empty-icon",children:"\ud83d\udcdd"}),(0,Tt.jsx)("h3",{children:"Ch\u01b0a c\xf3 \u0111\xe1nh gi\xe1 n\xe0o"}),(0,Tt.jsx)("p",{children:"S\u1ef1 ki\u1ec7n n\xe0y ch\u01b0a c\xf3 \u0111\xe1nh gi\xe1 t\u1eeb ng\u01b0\u1eddi tham gia."})]})})]}):(0,Tt.jsx)("div",{className:"feedback-list-container",children:(0,Tt.jsxs)("div",{className:"access-denied",children:[(0,Tt.jsx)("h2",{children:"Truy c\u1eadp b\u1ecb t\u1eeb ch\u1ed1i"}),(0,Tt.jsx)("p",{children:"B\u1ea1n c\u1ea7n quy\u1ec1n Staff \u0111\u1ec3 xem trang n\xe0y."})]})})},Mk=()=>(0,Tt.jsx)("div",{style:{width:"100vw",minHeight:260,background:"url('https://images.unsplash.com/photo-1529156069898-49953e39b3ac?ixlib=rb-4.0.3&auto=format&fit=crop&w=1632&q=80'), linear-gradient(120deg, #5eb6e9 0%, #a7e9af 100%)",backgroundSize:"cover",backgroundPosition:"center",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"2rem",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",overflow:"hidden",animation:"slowZoom 30s infinite alternate ease-in-out"},children:(0,Tt.jsxs)("div",{style:{width:"100vw",minHeight:260,background:"rgba(0,0,0,0.45)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:"2rem 1rem"},children:[(0,Tt.jsx)("h1",{style:{color:"#fff",fontSize:"2.8rem",fontWeight:800,marginBottom:"0.5rem",textShadow:"0 2px 8px rgba(0,0,0,0.3)",animation:"fadeInUp 0.8s ease-out",letterSpacing:"-0.5px"},children:"S\u1ef1 ki\u1ec7n c\u1ed9ng \u0111\u1ed3ng"}),(0,Tt.jsx)("p",{style:{color:"#e0f7fa",fontSize:"1.25rem",fontWeight:400,textShadow:"0 1px 4px rgba(0,0,0,0.2)",animation:"fadeInUp 1s ease-out"},children:"Kh\xe1m ph\xe1, \u0111\u0103ng k\xfd v\xe0 tham gia c\xe1c s\u1ef1 ki\u1ec7n \xfd ngh\u0129a d\xe0nh cho b\u1ea1n!"})]})}),Fk=e=>{let{event:n,isOpen:r,onClose:i}=e;const[o,a]=(0,t.useState)(null),[s,c]=(0,t.useState)(!1),[l,d]=(0,t.useState)(null),[u,A]=(0,t.useState)(!1);(0,t.useEffect)((()=>{r&&null!==n&&void 0!==n&&n.id&&(A(!1),p())}),[r,null===n||void 0===n?void 0:n.id]);const h=()=>{A(!0),setTimeout((()=>{i(),A(!1)}),300)},p=async()=>{c(!0),d(null);try{const e=await Pk.getEventById(n.id);e&&e.success?a(e.data):d("Kh\xf4ng th\u1ec3 t\u1ea3i th\xf4ng tin chi ti\u1ebft s\u1ef1 ki\u1ec7n")}catch(rI){d("L\u1ed7i khi t\u1ea3i th\xf4ng tin s\u1ef1 ki\u1ec7n"),console.error("Error fetching event details:",rI)}finally{c(!1)}},f=e=>e?new Date(e).toLocaleString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Ch\u01b0a x\xe1c \u0111\u1ecbnh";return r?t.createElement("div",{className:"modal-overlay ".concat(u?"closing":""),onClick:h},t.createElement("div",{className:"modal-content event-detail-modal",onClick:e=>e.stopPropagation()},[t.createElement("div",{className:"modal-header",key:"header"},[t.createElement("h2",{key:"title"},(null===n||void 0===n?void 0:n.title)||"Chi ti\u1ebft s\u1ef1 ki\u1ec7n"),t.createElement("button",{className:"modal-close",onClick:h,key:"close"},"\xd7")]),t.createElement("div",{className:"modal-body",key:"body"},[s&&t.createElement("div",{key:"loading",style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"40px",fontSize:"16px",color:"#666"}},"\u0110ang t\u1ea3i..."),l&&t.createElement("div",{key:"error",style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"6px",color:"#721c24",fontSize:"14px",margin:"16px 0"}},["\u26a0\ufe0f ",l]),o&&t.createElement("div",{className:"event-detail-content",key:"content"},[t.createElement("div",{className:"detail-info",key:"info"},[t.createElement("div",{className:"info-section",key:"time"},[t.createElement("h3",{key:"time-title"},"\ud83d\udcc5 Th\u1eddi gian"),t.createElement("p",{key:"start"},"B\u1eaft \u0111\u1ea7u: ".concat(f(o.startTime||o.startDate))),o.endTime&&t.createElement("p",{key:"end"},"D\u1ef1 ki\u1ebfn k\u1ebft th\xfac: ".concat(f(o.endTime)))]),o.location&&t.createElement("div",{className:"info-section",key:"location"},[t.createElement("h3",{key:"loc-title"},"\ud83d\udccd \u0110\u1ecba \u0111i\u1ec3m"),t.createElement("p",{key:"loc-text"},o.location)]),t.createElement("div",{className:"info-section",key:"desc"},[t.createElement("h3",{key:"desc-title"},"\ud83d\udcdd M\xf4 t\u1ea3"),t.createElement("div",{className:"description-content",key:"desc-content"},o.description||"Ch\u01b0a c\xf3 m\xf4 t\u1ea3")]),o.creatorName&&t.createElement("div",{className:"info-section",key:"creator"},[t.createElement("h3",{key:"creator-title"},"\ud83d\udc64 T\u1ed5 ch\u1ee9c b\u1edfi"),t.createElement("p",{key:"creator-text"},o.creatorName)]),t.createElement("div",{className:"info-section",key:"participants"},[t.createElement("h3",{key:"part-title"},"\ud83d\udc65 Tham gia"),t.createElement("p",{key:"part-text"},"".concat(o.participantCount||0," ng\u01b0\u1eddi \u0111\xe3 \u0111\u0103ng k\xfd").concat(o.maxParticipants?" / ".concat(o.maxParticipants," t\u1ed1i \u0111a"):""))])])])]),t.createElement("div",{className:"modal-footer",key:"footer"},[t.createElement("button",{className:"btn-secondary",onClick:h,key:"close-btn"},"\u0110\xf3ng")])])):null},jk=e=>{let{event:n,onRegistrationChange:r,onFeedbackClick:i}=e;const{isAuthenticated:o,currentUser:a}=ts(),[s,c]=(0,t.useState)(!1),[l,d]=(0,t.useState)(!1),[u,A]=(0,t.useState)(null),[h,p]=(0,t.useState)(!0),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(!1),[y,b]=(0,t.useState)(null),[E,w]=(0,t.useState)(null),[_,S]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=localStorage.getItem("userId");if(b(e),e&&null!==n&&void 0!==n&&n.id&&o){const t="event_registration_".concat(n.id,"_").concat(e),r=localStorage.getItem(t);if(r)try{const t=JSON.parse(r);if(t.userId===e&&t.version>=1)return console.log("\ud83d\ude80 Early cache load:",t),c(t.isRegistered),v(!0),p(!1),A(null),void w(e)}catch(XB){console.log("\u274c Invalid early cache data")}}o||(p(!1),v(!0))}),[null===n||void 0===n?void 0:n.id,o]),(0,t.useEffect)((()=>{const e=localStorage.getItem("userId");y!==e&&null!==y&&(console.log("User changed, checking registration state for new user:",{oldUserId:y,newUserId:e,eventId:null===n||void 0===n?void 0:n.id}),A(null),v(!1),p(!0)),y!==e&&b(e)}),[y,null===n||void 0===n?void 0:n.id]),(0,t.useEffect)((()=>{(()=>{localStorage.getItem("userId");localStorage.getItem("accessToken")&&o||(console.log("User logged out completely, clearing all registration cache"),Object.keys(localStorage).forEach((e=>{e.startsWith("event_registration_")&&(localStorage.removeItem(e),console.log("Removed cache:",e))})),A(null),v(!1),c(!1),p(!0),w(null))})()}),[o]),(0,t.useEffect)((()=>{console.log("\ud83d\udd0d EventRegistrationButton state changed:",{eventId:null===n||void 0===n?void 0:n.id,isRegistered:s,hasCheckedRegistration:g,checkingStatus:h,isAuthenticated:o,userId:localStorage.getItem("userId"),timestamp:(new Date).toISOString()})}),[s,g,h]);const C=(0,t.useCallback)((async()=>{if(!o||null===n||void 0===n||!n.id)return p(!1),void v(!0);const e=localStorage.getItem("userId");return e?g&&E===e?void console.log("\u2705 Already checked for this user, skipping"):(console.log("\ud83d\udd0d Starting registration status check callback:",{eventId:n.id,userId:e,lastCheckedUserId:E,hasCheckedRegistration:g}),{userId:e,shouldContinue:!0}):(p(!1),void v(!0))}),[null===n||void 0===n?void 0:n.id,o,g,E]);(0,t.useEffect)((()=>{let e=!0,t=null;return null!==n&&void 0!==n&&n.id&&o&&(async()=>{const r=await C();if(null===r||void 0===r||!r.shouldContinue)return;const{userId:i}=r;e&&(p(!0),A(null),v(!1),t=setTimeout((()=>{e&&(console.log("\u23f0 Fallback timeout - force stopping check status"),p(!1),v(!0))}),12e3));const o=null!==E&&E!==i,a="event_registration_".concat(n.id,"_").concat(i),s=localStorage.getItem(a);if(console.log("\ud83d\udd0d Starting registration status check:",{eventId:n.id,userId:i,lastCheckedUserId:E,shouldForceReload:o,hasCachedStatus:!!s,hasCheckedRegistration:g}),s&&!o)try{const n=JSON.parse(s);if(n.userId===i&&n.version>=1){if(n.isRegistered||!(Date.now()-n.timestamp>3e5))return console.log("\ud83d\udccb Using valid cached registration status:",n),void(e&&(clearTimeout(t),c(n.isRegistered),v(!0),p(!1),n.isRegistered&&A(null),w(i)));console.log("\u23f0 Cache expired for unregistered status, removing:",a),localStorage.removeItem(a)}else console.log("\u274c Cache invalid (wrong user or old version), removing:",a),localStorage.removeItem(a)}catch(XB){console.log("\u274c Invalid cache data, removing:",a),localStorage.removeItem(a)}o&&console.log("\ud83d\udd04 Force reloading registration status for new user session");try{var l;const r=localStorage.getItem("accessToken"),s=localStorage.getItem("userEmail");console.log("\ud83d\udd0d Checking registration status:",{eventId:n.id,hasToken:!!r,userId:i,userEmail:s,tokenLength:r?r.length:0,forceReload:o});const u=await Pk.checkRegistrationStatus(n.id);if(console.log("\ud83d\udce1 Registration status response:",{eventId:n.id,response:u,success:null===u||void 0===u?void 0:u.success,isRegistered:null===u||void 0===u||null===(l=u.data)||void 0===l?void 0:l.isRegistered,currentUserId:i,responseStructure:JSON.stringify(u,null,2)}),e&&u&&u.success){var d,h;const e=Boolean(null===(d=u.data)||void 0===d?void 0:d.isRegistered);console.log("\u2705 Setting registration status:",{eventId:n.id,registrationStatus:e,userId:i,rawData:u.data,booleanConversion:Boolean(null===(h=u.data)||void 0===h?void 0:h.isRegistered)}),clearTimeout(t),c(e),localStorage.setItem(a,JSON.stringify({isRegistered:e,timestamp:Date.now(),version:1,userId:i})),e&&A(null)}else e&&(console.log("\u274c API response not successful:",u),clearTimeout(t))}catch(u){var f,m,y,b;if(console.log("\u26a0\ufe0f Could not check registration status:",u),console.log("Error details:",{status:null===(f=u.response)||void 0===f?void 0:f.status,message:null===(m=u.response)||void 0===m||null===(y=m.data)||void 0===y?void 0:y.message,eventId:n.id}),e&&(clearTimeout(t),("AbortError"===u.name||"ECONNABORTED"===u.code||null!==(b=u.message)&&void 0!==b&&b.includes("timeout"))&&(console.log("\ud83d\udd52 Request timeout, trying to use any available cache"),s)))try{const e=JSON.parse(s);e.userId===i&&(console.log("\ud83d\udccb Using cached status due to timeout:",e),c(e.isRegistered),e.isRegistered&&A(null))}catch(XB){console.log("\u274c Could not parse cached data during timeout fallback")}}finally{e&&(clearTimeout(t),p(!1),v(!0),w(i))}})(),()=>{e=!1,t&&clearTimeout(t)}}),[null===n||void 0===n?void 0:n.id,C]),(0,t.useEffect)((()=>{console.log("\ud83d\udd04 Registration state changed:",{eventId:null===n||void 0===n?void 0:n.id,isRegistered:s,hasCheckedRegistration:g,checkingStatus:h,lastCheckedUserId:E,currentUserId:y,userId:localStorage.getItem("userId")})}),[s,g,h,E]);const T=new Date,I=new Date(n.startTime||n.startDate),R=new Date(n.endTime||n.endDate||n.startTime||n.startDate);console.log("Event Debug:",{title:n.title,startTime:n.startTime||n.startDate,endTime:n.endTime||n.endDate,now:T.toISOString(),eventEndTime:R.toISOString(),isEndTimePast:R<T,isStartTimePast:I<T});let x=R;n.endTime||n.endDate||(x=new Date(I.getTime()+72e5));const N=x<T;if(!o)return(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),m(!0)},className:"registration-btn btn-register",children:[(0,Tt.jsx)("svg",{className:"w-2 h-2 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"\u0110\u0103ng k\xfd"]}),f&&(0,Tt.jsx)("div",{className:"login-modal-overlay",onClick:()=>m(!1),children:(0,Tt.jsxs)("div",{className:"login-modal",onClick:e=>e.stopPropagation(),children:[(0,Tt.jsxs)("div",{className:"modal-header",children:[(0,Tt.jsx)("h3",{children:"Y\xeau c\u1ea7u \u0111\u0103ng nh\u1eadp"}),(0,Tt.jsx)("button",{type:"button",className:"modal-close",onClick:()=>m(!1),children:"\xd7"})]}),(0,Tt.jsx)("div",{className:"modal-body",children:(0,Tt.jsx)("p",{children:"B\u1ea1n c\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 \u0111\u0103ng k\xfd tham gia s\u1ef1 ki\u1ec7n n\xe0y."})}),(0,Tt.jsxs)("div",{className:"modal-footer",children:[(0,Tt.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>m(!1),children:"H\u1ee7y"}),(0,Tt.jsx)(ft,{to:"/login",className:"btn-primary",onClick:()=>m(!1),children:"\u0110\u0103ng nh\u1eadp"})]})]})})]});if(h||!g)return(0,Tt.jsxs)("div",{className:"registration-btn btn-loading",children:[(0,Tt.jsx)("span",{className:"loading-spinner"}),"Ki\u1ec3m tra..."]});if(s){const e=new Date,t=new Date(n.startTime||n.startDate);let o=new Date(n.endTime||n.endDate||n.startTime||n.startDate);n.endTime||n.endDate||(o=new Date(t.getTime()+72e5));const a=o<e;return(0,Tt.jsxs)("div",{children:[(0,Tt.jsxs)("div",{className:"registered-actions-container",children:[(0,Tt.jsxs)("div",{className:"registered-btn-wrapper ".concat(_?"dropdown-active":""),children:[(0,Tt.jsxs)("button",{type:"button",className:"registration-btn btn-registered ".concat(_?"dropdown-active":""),onClick:e=>{e.preventDefault(),e.stopPropagation(),S(!_)},children:[(0,Tt.jsx)("svg",{className:"w-2 h-2 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Tt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"\u0110\xe3 \u0111\u0103ng k\xfd",(0,Tt.jsx)("span",{className:"dropdown-arrow",children:"\u25bc"})]}),(0,Tt.jsx)("div",{className:"registration-dropdown-menu ".concat(_?"show":""),children:(0,Tt.jsxs)("button",{type:"button",className:"registration-dropdown-item cancel-registration",onClick:async e=>{e.preventDefault(),e.stopPropagation(),S(!1),d(!0),A(null);try{await Pk.unregisterFromEvent(n.id),c(!1),v(!0);const e="event_registration_".concat(n.id,"_").concat(localStorage.getItem("userId"));localStorage.removeItem(e),r&&r(n.id,!1)}catch(rI){A("H\u1ee7y \u0111\u0103ng k\xfd th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{d(!1)}},disabled:l,children:[(0,Tt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),l?"H\u1ee7y...":"H\u1ee7y \u0111\u0103ng k\xfd"]})})]}),(0,Tt.jsxs)("button",{type:"button",className:"btn-feedback",onClick:()=>{a?i&&i(n):window.alert("B\u1ea1n ch\u1ec9 c\xf3 th\u1ec3 \u0111\xe1nh gi\xe1 sau khi s\u1ef1 ki\u1ec7n k\u1ebft th\xfac.")},children:[(0,Tt.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),"\u0110\xe1nh gi\xe1 s\u1ef1 ki\u1ec7n"]})]}),u&&(0,Tt.jsxs)("div",{className:"error-message mt-1",children:[(0,Tt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u]})]})}return N?(0,Tt.jsx)("span",{className:"registration-btn btn-completed",children:"\u0110\xe3 k\u1ebft th\xfac"}):(0,Tt.jsxs)("div",{className:"flex flex-col",children:[(0,Tt.jsx)("button",{type:"button",onClick:async e=>{if(e.preventDefault(),e.stopPropagation(),console.log("\ud83d\ude80 Starting registration process:",{eventId:n.id,isAuthenticated:o,isRegistered:s,loading:l}),o)if(s)console.log("\u274c Already registered, skipping");else{d(!0),A(null);try{const e=localStorage.getItem("accessToken"),t=localStorage.getItem("userId");console.log("Registering for event:",{eventId:n.id,hasToken:!!e,userId:t,tokenLength:e?e.length:0});const i=await Pk.registerForEvent(n.id);if(console.log("Registration response:",{eventId:n.id,response:i,success:null===i||void 0===i?void 0:i.success}),i&&i.success){console.log("\u2705 Registration successful, updating state"),c(!0),v(!0),A(null);const e="event_registration_".concat(n.id,"_").concat(localStorage.getItem("userId"));localStorage.setItem(e,JSON.stringify({isRegistered:!0,timestamp:Date.now(),version:1,userId:localStorage.getItem("userId")})),r&&r(n.id,!0),console.log("\u2705 Registration completed successfully, cache updated")}else A((null===i||void 0===i?void 0:i.message)||"\u0110\xe3 x\u1ea3y ra l\u1ed7i khi \u0111\u0103ng k\xfd tham gia s\u1ef1 ki\u1ec7n")}catch(rI){var t,i,a,u,h,p,f,g,y;console.error("Registration error:",rI);const o=()=>{console.log("\u26a0\ufe0f User already registered, updating state"),c(!0),v(!0),A(null);const e="event_registration_".concat(n.id,"_").concat(localStorage.getItem("userId")),t={isRegistered:!0,timestamp:Date.now(),version:1,userId:localStorage.getItem("userId")};localStorage.setItem(e,JSON.stringify(t)),console.log("\ud83d\udcbe Cached registration status:",t),r&&r(n.id,!0),console.log("\u2705 Already registered status updated, cache saved")};let s="\u0110\xe3 x\u1ea3y ra l\u1ed7i khi \u0111\u0103ng k\xfd tham gia s\u1ef1 ki\u1ec7n",l=!0;if(console.log("\u274c Registration error details:",{status:null===(t=rI.response)||void 0===t?void 0:t.status,message:null===(i=rI.response)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.message,fullError:rI}),400===(null===(u=rI.response)||void 0===u?void 0:u.status)||409===(null===(h=rI.response)||void 0===h?void 0:h.status)){var b,E;const t=(null===(b=rI.response)||void 0===b||null===(E=b.data)||void 0===E?void 0:E.message)||"",n=["\u0111\xe3 \u0111\u0103ng k\xfd","already registered","\u0111\xe3 tham gia","already participated","duplicate registration","registration exists"],r=n.some((e=>t.toLowerCase().includes(e.toLowerCase())));console.log("\ud83d\udd0d Checking if already registered:",{errorMsg:t,patterns:n,isAlreadyRegistered:r}),r?(o(),l=!1):s=t||"Y\xeau c\u1ea7u kh\xf4ng h\u1ee3p l\u1ec7"}else 401===(null===(p=rI.response)||void 0===p?void 0:p.status)?s="B\u1ea1n c\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 th\u1ef1c hi\u1ec7n thao t\xe1c n\xe0y":403===(null===(f=rI.response)||void 0===f?void 0:f.status)?s="B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n th\u1ef1c hi\u1ec7n thao t\xe1c n\xe0y":null!==(g=rI.response)&&void 0!==g&&null!==(y=g.data)&&void 0!==y&&y.message&&(s=rI.response.data.message);l&&A(s)}finally{d(!1)}}else m(!0)},disabled:l,className:"registration-btn btn-register ".concat(l?"btn-loading":""),children:l?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)("span",{className:"loading-spinner"}),"X\u1eed l\xfd..."]}):(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)("svg",{className:"w-2 h-2 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"\u0110\u0103ng k\xfd"]})}),u&&(0,Tt.jsxs)("div",{className:"error-message mt-1",children:[(0,Tt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u]})]})},Qk=()=>{const{isAuthenticated:e,currentUser:n,isStaff:r}=ts(),[i,o]=(0,t.useState)([]),[a,s]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),[u,A]=(0,t.useState)("all"),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1),[y,b]=(0,t.useState)(null),[E,w]=(0,t.useState)(!1),[_,S]=(0,t.useState)(!1),[C,T]=(0,t.useState)(null),[I,R]=(0,t.useState)("create"),[x,N]=(0,t.useState)(!1),[O,k]=(0,t.useState)(null),[P,B]=(0,t.useState)(!1),[L,D]=(0,t.useState)(!1),U=(0,t.useCallback)(((e,t)=>{const n=new Date;let r=e;switch(t){case"upcoming":r=e.filter((e=>{const t=new Date(e.endTime||e.endDate||e.startTime||e.startDate);return e.endTime||e.endDate||t.setTime(t.getTime()+72e5),t>=n})).sort(((e,t)=>new Date(e.startTime||e.startDate)-new Date(t.startTime||t.startDate)));break;case"past":r=e.filter((e=>{const t=new Date(e.endTime||e.endDate||e.startTime||e.startDate);return e.endTime||e.endDate||t.setTime(t.getTime()+72e5),t<n}));break;default:r=e}return r}),[]),M=async()=>{p(null);try{let t;if(t=await Pk.getAllEvents(),t&&t.success){const e=t.data||[];o(e);const n=U(e,u);s(n)}else{var e;p((null===(e=t)||void 0===e?void 0:e.message)||"Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch s\u1ef1 ki\u1ec7n")}}catch(rI){var t,n;console.error("Error loading events:",rI),null!==(t=rI.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message?p(rI.response.data.message):p("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi t\u1ea3i danh s\xe1ch s\u1ef1 ki\u1ec7n")}};(0,t.useEffect)((()=>{M()}),[]),(0,t.useEffect)((()=>{if(i.length>0){const e=U(i,u);s(e)}}),[u,i,U]);const F=e=>{b(e),w(!0)};return(0,Tt.jsxs)("div",{className:"events-page",children:[(0,Tt.jsx)(Mk,{}),L?(0,Tt.jsxs)("div",{className:"container",children:[(0,Tt.jsx)("div",{className:"feedback-navigation",children:(0,Tt.jsxs)("button",{type:"button",className:"btn-back-to-events",onClick:()=>D(!1),children:[(0,Tt.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Quay l\u1ea1i danh s\xe1ch s\u1ef1 ki\u1ec7n"]})}),(0,Tt.jsx)(Uk,{})]}):(0,Tt.jsxs)("div",{className:"events-container",children:[(0,Tt.jsxs)("div",{className:"events-header",style:{display:"none"},children:[(0,Tt.jsx)("h1",{children:"S\u1ef1 Ki\u1ec7n C\u1ed9ng \u0110\u1ed3ng"}),(0,Tt.jsx)("p",{children:"Tham gia c\xe1c ho\u1ea1t \u0111\u1ed9ng c\u1ed9ng \u0111\u1ed3ng \u0111\u1ec3 x\xe2y d\u1ef1ng m\u1ed9t x\xe3 h\u1ed9i kh\xf4ng ma t\xfay"})]}),r()&&(0,Tt.jsxs)("div",{className:"staff-controls",children:[(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{children:"Qu\u1ea3n l\xfd s\u1ef1 ki\u1ec7n"}),(0,Tt.jsxs)("div",{className:"staff-badge",children:[(0,Tt.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Staff"]})]}),(0,Tt.jsxs)("div",{className:"staff-actions",children:[(0,Tt.jsxs)("button",{type:"button",className:"btn-create-event",onClick:()=>{T(null),R("create"),S(!0)},children:[(0,Tt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"T\u1ea1o s\u1ef1 ki\u1ec7n m\u1edbi"]}),(0,Tt.jsxs)("button",{type:"button",className:"btn-view-feedback",onClick:()=>D(!0),children:[(0,Tt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Xem t\u1ea5t c\u1ea3 \u0111\xe1nh gi\xe1"]})]})]}),"        ",(0,Tt.jsx)("div",{className:"events-nav",children:[{key:"all",label:"T\u1ea5t c\u1ea3"},{key:"upcoming",label:"S\u1eafp di\u1ec5n ra"},{key:"past",label:"\u0110\xe3 k\u1ebft th\xfac"}].map((e=>(0,Tt.jsx)("button",{type:"button",onClick:t=>{t.preventDefault(),A(e.key)},className:"nav-tab ".concat(u===e.key?"active":""),children:e.label},e.key)))}),h&&(0,Tt.jsxs)("div",{className:"error-message",children:[(0,Tt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("p",{children:h}),(0,Tt.jsx)("button",{type:"button",onClick:()=>{p(null),M()},className:"text-sm underline mt-1",children:"Th\u1eed l\u1ea1i"})]})]}),a.length>0?(0,Tt.jsx)("div",{className:"events-grid",children:a.map((e=>{return(0,Tt.jsxs)("div",{className:"event-card ".concat(r()?"staff-view":""),children:[(0,Tt.jsxs)("div",{className:"event-image",children:[e.imageUrl?(0,Tt.jsx)("img",{src:e.imageUrl,alt:e.title,onError:e=>{e.target.style.display="none"}}):(0,Tt.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Tt.jsx)("svg",{className:"w-16 h-16 text-white opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,Tt.jsx)("div",{className:"event-date-badge",children:new Date(e.startTime||e.startDate).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"})}),(0,Tt.jsx)("div",{className:"event-status-badge ".concat((()=>{const t=new Date,n=new Date(e.startTime||e.startDate);let r=new Date(e.endTime||e.endDate||e.startTime||e.startDate);return e.endTime||e.endDate||(r=new Date(n.getTime()+72e5)),r<t?"status-past":"status-upcoming"})()),children:(()=>{const t=new Date,n=new Date(e.startTime||e.startDate);let r=new Date(e.endTime||e.endDate||e.startTime||e.startDate);return e.endTime||e.endDate||(r=new Date(n.getTime()+72e5)),r<t?"\u0110\xe3 k\u1ebft th\xfac":n<=t&&t<=r?"\u0110ang di\u1ec5n ra":"S\u1eafp di\u1ec5n ra"})()})]}),(0,Tt.jsxs)("div",{className:"event-content",children:[(0,Tt.jsx)("h3",{className:"event-title",children:e.title}),(0,Tt.jsxs)("div",{className:"event-meta",children:[(0,Tt.jsxs)("div",{className:"meta-item",children:[(0,Tt.jsx)("svg",{className:"meta-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(t=e.startTime||e.startDate,new Date(t).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))]}),e.location&&(0,Tt.jsxs)("div",{className:"meta-item",children:[(0,Tt.jsxs)("svg",{className:"meta-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.location]})]}),(0,Tt.jsx)("div",{className:"registration-section",children:(0,Tt.jsxs)("div",{className:"event-actions",children:[(0,Tt.jsxs)("button",{type:"button",className:"btn-outline",onClick:t=>{t.preventDefault(),t.stopPropagation(),m(e),v(!0)},children:[(0,Tt.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Xem chi ti\u1ebft"]}),(0,Tt.jsx)(jk,{event:e,onRegistrationChange:(e,t)=>{s(t?t=>t.map((t=>t.id===e?l(l({},t),{},{participantCount:(t.participantCount||0)+1}):t)):t=>t.map((t=>t.id===e&&t.participantCount>0?l(l({},t),{},{participantCount:t.participantCount-1}):t)))},onFeedbackClick:F},"".concat(e.id,"-").concat((null===n||void 0===n?void 0:n.userId)||"anonymous")),r()&&(0,Tt.jsxs)("div",{className:"staff-actions-wrapper",children:[(0,Tt.jsxs)("button",{type:"button",className:"btn-outline staff-edit-btn",onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{T(e),R("edit"),S(!0)})(e)},children:[(0,Tt.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Ch\u1ec9nh s\u1eeda"]}),(0,Tt.jsxs)("button",{type:"button",className:"btn-outline staff-delete-btn",onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{k(e),N(!0)})(e)},children:[(0,Tt.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"X\xf3a"]})]})]})})]})]},e.id);var t}))}):(0,Tt.jsxs)("div",{className:"empty-state",children:[(0,Tt.jsx)("svg",{className:"empty-state-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Tt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,Tt.jsx)("h3",{children:"Kh\xf4ng c\xf3 s\u1ef1 ki\u1ec7n n\xe0o"}),"            ",(0,Tt.jsx)("p",{children:"Hi\u1ec7n t\u1ea1i kh\xf4ng c\xf3 s\u1ef1 ki\u1ec7n n\xe0o trong danh m\u1ee5c n\xe0y."})]})]}),(0,Tt.jsx)(Fk,{event:f,isOpen:g,onClose:()=>v(!1)}),r()&&(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(Bk,{isOpen:_,onClose:()=>S(!1),eventToEdit:C,mode:I,onEventSaved:e=>{if("create"===I){const t=[e,...i];o(t);const n=U(t,u);s(n)}else{const t=i.map((t=>t.id===e.id?e:t));o(t);const n=U(t,u);s(n)}}}),(0,Tt.jsx)(Lk,{isOpen:x,onClose:()=>N(!1),onConfirm:async()=>{if(O){B(!0);try{const e=await Pk.deleteEvent(O.id);e&&e.success?(o((e=>e.filter((e=>e.id!==O.id)))),s((e=>e.filter((e=>e.id!==O.id)))),N(!1),k(null)):p((null===e||void 0===e?void 0:e.message)||"Kh\xf4ng th\u1ec3 x\xf3a s\u1ef1 ki\u1ec7n")}catch(rI){var e,t;console.error("Error deleting event:",rI),p((null===(e=rI.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"\u0110\xe3 x\u1ea3y ra l\u1ed7i khi x\xf3a s\u1ef1 ki\u1ec7n")}finally{B(!1)}}},eventTitle:null===O||void 0===O?void 0:O.title,loading:P})]}),(0,Tt.jsx)(Dk,{event:y,isOpen:E,onClose:()=>w(!1),onFeedbackSubmitted:()=>{console.log("Feedback submitted successfully")}})]})};function Vk(e){return eA("MuiTableContainer",e)}tA("MuiTableContainer",["root"]);const Hk=["className","component"],zk=CA("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),Kk=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiTableContainer"}),{className:r,component:i="div"}=n,o=a(n,Hk),s=l(l({},n),{},{component:i}),c=(e=>{const{classes:t}=e;return aA({root:["root"]},Vk,t)})(s);return(0,Tt.jsx)(zk,l({ref:t,as:i,className:Mu(c.root,r),ownerState:s},o))}));const Gk=t.createContext();function Wk(e){return eA("MuiTable",e)}tA("MuiTable",["root","stickyHeader"]);const qk=["className","component","padding","size","stickyHeader"],Yk=CA("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(IA((e=>{let{theme:t}=e;return{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":l(l({},t.typography.body2),{},{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"}),variants:[{props:e=>{let{ownerState:t}=e;return t.stickyHeader},style:{borderCollapse:"separate"}}]}}))),Xk="table",Jk=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiTable"}),{className:i,component:o=Xk,padding:s="normal",size:c="medium",stickyHeader:d=!1}=r,u=a(r,qk),A=l(l({},r),{},{component:o,padding:s,size:c,stickyHeader:d}),h=(e=>{const{classes:t,stickyHeader:n}=e;return aA({root:["root",n&&"stickyHeader"]},Wk,t)})(A),p=t.useMemo((()=>({padding:s,size:c,stickyHeader:d})),[s,c,d]);return(0,Tt.jsx)(Gk.Provider,{value:p,children:(0,Tt.jsx)(Yk,l({as:o,role:o===Xk?null:"table",ref:n,className:Mu(h.root,i),ownerState:A},u))})})),Zk=Jk;const $k=t.createContext();function eP(e){return eA("MuiTableHead",e)}tA("MuiTableHead",["root"]);const tP=["className","component"],nP=CA("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),rP={variant:"head"},iP="thead",oP=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiTableHead"}),{className:r,component:i=iP}=n,o=a(n,tP),s=l(l({},n),{},{component:i}),c=(e=>{const{classes:t}=e;return aA({root:["root"]},eP,t)})(s);return(0,Tt.jsx)($k.Provider,{value:rP,children:(0,Tt.jsx)(nP,l({as:i,className:Mu(c.root,r),ref:t,role:i===iP?null:"rowgroup",ownerState:s},o))})}));function aP(e){return eA("MuiTableRow",e)}const sP=tA("MuiTableRow",["root","selected","hover","head","footer"]),cP=["className","component","hover","selected"],lP=CA("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(IA((e=>{let{theme:t}=e;return{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,["&.".concat(sP.hover,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(sP.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):qi(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):qi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}}))),dP="tr",uP=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiTableRow"}),{className:i,component:o=dP,hover:s=!1,selected:c=!1}=r,d=a(r,cP),u=t.useContext($k),A=l(l({},r),{},{component:o,hover:s,selected:c,head:u&&"head"===u.variant,footer:u&&"footer"===u.variant}),h=(e=>{const{classes:t,selected:n,hover:r,head:i,footer:o}=e;return aA({root:["root",n&&"selected",r&&"hover",i&&"head",o&&"footer"]},aP,t)})(A);return(0,Tt.jsx)(lP,l({as:o,ref:n,className:Mu(h.root,i),role:o===dP?null:"row",ownerState:A},d))})),AP=uP;function hP(e){return eA("MuiTableCell",e)}const pP=tA("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),fP=["align","className","component","padding","scope","size","sortDirection","variant"],mP=CA("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat(mh(n.size))],"normal"!==n.padding&&t["padding".concat(mh(n.padding))],"inherit"!==n.align&&t["align".concat(mh(n.align))],n.stickyHeader&&t.stickyHeader]}})(IA((e=>{let{theme:t}=e;return l(l({},t.typography.body2),{},{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?"1px solid ".concat(t.vars.palette.TableCell.border):"1px solid\n    ".concat("light"===t.palette.mode?Zi(qi(t.palette.divider,1),.88):Xi(qi(t.palette.divider,1),.68)),textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",["&.".concat(pP.paddingCheckbox)]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:e=>{let{ownerState:t}=e;return t.stickyHeader},style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]})}))),gP=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiTableCell"}),{align:i="inherit",className:o,component:s,padding:c,scope:d,size:u,sortDirection:A,variant:h}=r,p=a(r,fP),f=t.useContext(Gk),m=t.useContext($k),g=m&&"head"===m.variant;let v;v=s||(g?"th":"td");let y=d;"td"===v?y=void 0:!y&&g&&(y="col");const b=h||m&&m.variant,E=l(l({},r),{},{align:i,component:v,padding:c||(f&&f.padding?f.padding:"normal"),size:u||(f&&f.size?f.size:"medium"),sortDirection:A,stickyHeader:"head"===b&&f&&f.stickyHeader,variant:b}),w=(e=>{const{classes:t,variant:n,align:r,padding:i,size:o,stickyHeader:a}=e;return aA({root:["root",n,a&&"stickyHeader","inherit"!==r&&"align".concat(mh(r)),"normal"!==i&&"padding".concat(mh(i)),"size".concat(mh(o))]},hP,t)})(E);let _=null;return A&&(_="asc"===A?"ascending":"descending"),(0,Tt.jsx)(mP,l({as:v,ref:n,className:Mu(w.root,o),"aria-sort":_,scope:y,ownerState:E},p))})),vP=gP;function yP(e){return eA("MuiTableBody",e)}tA("MuiTableBody",["root"]);const bP=["className","component"],EP=CA("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),wP={variant:"body"},_P="tbody",SP=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiTableBody"}),{className:r,component:i=_P}=n,o=a(n,bP),s=l(l({},n),{},{component:i}),c=(e=>{const{classes:t}=e;return aA({root:["root"]},yP,t)})(s);return(0,Tt.jsx)($k.Provider,{value:wP,children:(0,Tt.jsx)(EP,l({className:Mu(c.root,r),as:i,ref:t,role:i===_P?null:"rowgroup",ownerState:s},o))})})),CP=Zh((0,Tt.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function TP(e){return eA("MuiAvatar",e)}tA("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const IP=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],RP=CA("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(IA((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:l({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:l({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]}}))),xP=CA("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),NP=CA(CP,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});const OP=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiAvatar"}),{alt:i,children:o,className:s,component:c="div",slots:d={},slotProps:u={},imgProps:A,sizes:h,src:p,srcSet:f,variant:m="circular"}=r,g=a(r,IP);let v=null;const y=l(l({},r),{},{component:c,variant:m}),b=function(e){let{crossOrigin:n,referrerPolicy:r,src:i,srcSet:o}=e;const[a,s]=t.useState(!1);return t.useEffect((()=>{if(!i&&!o)return;s(!1);let e=!0;const t=new Image;return t.onload=()=>{e&&s("loaded")},t.onerror=()=>{e&&s("error")},t.crossOrigin=n,t.referrerPolicy=r,t.src=i,o&&(t.srcset=o),()=>{e=!1}}),[n,r,i,o]),a}(l(l(l({},A),"function"===typeof u.img?u.img(y):u.img),{},{src:p,srcSet:f})),E=p||f,w=E&&"error"!==b;y.colorDefault=!w,delete y.ownerState;const _=(e=>{const{classes:t,variant:n,colorDefault:r}=e;return aA({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},TP,t)})(y),[S,C]=uf("root",{ref:n,className:Mu(_.root,s),elementType:RP,externalForwardedProps:l({slots:d,slotProps:u,component:c},g),ownerState:y}),[T,I]=uf("img",{className:_.img,elementType:xP,externalForwardedProps:{slots:d,slotProps:{img:l(l({},A),u.img)}},additionalProps:{alt:i,src:p,srcSet:f,sizes:h},ownerState:y}),[R,x]=uf("fallback",{className:_.fallback,elementType:NP,externalForwardedProps:{slots:d,slotProps:u},shouldForwardComponentProp:!0,ownerState:y});return v=w?(0,Tt.jsx)(T,l({},I)):o||0===o?o:E&&i?i[0]:(0,Tt.jsx)(R,l({},x)),(0,Tt.jsx)(S,l(l({},C),{},{children:v}))})),kP=OP;function PP(e){return eA("MuiMenuItem",e)}const BP=tA("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),LP=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],DP=CA(fh,{shouldForwardProp:e=>AA(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})(IA((e=>{let{theme:t}=e;return l(l({},t.typography.body1),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(BP.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):qi(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(BP.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):qi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(BP.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):qi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):qi(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(BP.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(BP.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(hT.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(hT.inset)]:{marginLeft:52},["& .".concat(FS.root)]:{marginTop:0,marginBottom:0},["& .".concat(FS.inset)]:{paddingLeft:36},["& .".concat(BS.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:l(l({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2),{},{["& .".concat(BS.root," svg")]:{fontSize:"1.25rem"}})}]})}))),UP=t.forwardRef((function(e,n){const r=xa({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:s=!1,divider:c=!1,disableGutters:d=!1,focusVisibleClassName:u,role:A="menuitem",tabIndex:h,className:p}=r,f=a(r,LP),m=t.useContext(ey),g=t.useMemo((()=>({dense:s||m.dense||!1,disableGutters:d})),[m.dense,s,d]),v=t.useRef(null);zp((()=>{i&&v.current&&v.current.focus()}),[i]);const y=l(l({},r),{},{dense:g.dense,divider:c,disableGutters:d}),b=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:a}=e,s=aA({root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},PP,a);return l(l({},a),s)})(r),E=NA(v,n);let w;return r.disabled||(w=void 0!==h?h:-1),(0,Tt.jsx)(ey.Provider,{value:g,children:(0,Tt.jsx)(DP,l(l({ref:E,role:A,tabIndex:w,component:o,focusVisibleClassName:Mu(b.focusVisible,u),className:Mu(b.root,p)},f),{},{ownerState:y,classes:b}))})})),MP=UP,FP=Zh((0,Tt.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),jP=Zh((0,Tt.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),QP=Zh((0,Tt.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),VP=Zh((0,Tt.jsx)("path",{fillRule:"evenodd",d:"M3 3v8h8V3zm6 6H5V5h4zm-6 4v8h8v-8zm6 6H5v-4h4zm4-16v8h8V3zm6 6h-4V5h4zm-6 4v8h8v-8zm6 6h-4v-4h4z"})),HP=Zh((0,Tt.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"})),zP=Zh((0,Tt.jsx)("path",{d:"M7.94 5.12 6.49 3.66C8.07 2.61 9.96 2 12 2c5.52 0 10 4.48 10 10 0 2.04-.61 3.93-1.66 5.51l-1.46-1.46C19.59 14.86 20 13.48 20 12c0-4.41-3.59-8-8-8-1.48 0-2.86.41-4.06 1.12m9.72 4.41-1.41-1.41-2.65 2.65 1.41 1.41zm2.12 13.08-2.27-2.27C15.93 21.39 14.04 22 12 22 6.48 22 2 17.52 2 12c0-2.04.61-3.93 1.66-5.51L1.39 4.22 2.8 2.81l18.38 18.38zm-3.72-3.73L12.18 15l-1.59 1.59-4.24-4.24 1.41-1.41 2.83 2.83.18-.18-5.65-5.65C4.41 9.14 4 10.52 4 12c0 4.41 3.59 8 8 8 1.48 0 2.86-.41 4.06-1.12"})),KP=Zh((0,Tt.jsx)("path",{d:"M5 4v2h14V4zm0 10h4v6h6v-6h4l-7-7z"})),GP=Zh((0,Tt.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),WP=["title","description"],qP=CA(fp)((e=>{let{theme:t}=e;return{height:"100%",display:"flex",flexDirection:"column",borderRadius:16,overflow:"hidden",background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)",border:"1px solid ".concat(qi(t.palette.primary.main,.12)),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative","&:hover":{transform:"translateY(-4px)",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",borderColor:t.palette.primary.main},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:3,background:"linear-gradient(90deg, ".concat(t.palette.primary.main,", ").concat(t.palette.secondary.main,")")}}})),YP=CA(oA)((e=>{let{theme:t}=e;return{position:"relative",height:200,overflow:"hidden",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&::after":{content:'""',position:"absolute",bottom:0,left:0,right:0,height:"30%",background:"linear-gradient(transparent, rgba(0,0,0,0.3))"}}})),XP=CA(oA)((e=>{let{theme:t}=e;return{position:"absolute",top:12,right:12,zIndex:2,background:"rgba(255, 255, 255, 0.95)",borderRadius:20,padding:"4px 8px",backdropFilter:"blur(10px)",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}})),JP=(CA(Nm)((e=>{let{theme:t}=e;return{position:"absolute",top:12,left:12,zIndex:2,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",fontWeight:600,fontSize:"0.75rem","& .MuiChip-icon":{color:t.palette.primary.main}}})),CA(Kk)((e=>{let{theme:t}=e;return{borderRadius:16,overflow:"hidden",background:"white",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid ".concat(qi(t.palette.primary.main,.1))}}))),ZP=CA(oA)((e=>{let{theme:t}=e;return{background:"linear-gradient(135deg, ".concat(t.palette.primary.main," 0%, ").concat(t.palette.primary.dark," 50%, ").concat(t.palette.secondary.main," 100%)"),color:"white",padding:t.spacing(6,0),position:"relative",marginBottom:t.spacing(4),borderRadius:"0 0 24px 24px","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.1"%3E%3Ccircle cx="36" cy="24" r="5"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")',opacity:.3}}})),$P=(CA(fp)((e=>{let{theme:t}=e;return{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease","&:hover":{transform:"scale(1.02)",boxShadow:t.shadows[8]}}})),()=>{var e,n;const r=he(),[i,o]=(0,t.useState)([]),[s,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)(""),[A,h]=(0,t.useState)("grid"),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[v,y]=(0,t.useState)(null),[b,E]=(0,t.useState)(!1),[w,_]=(0,t.useState)(!1),[S,C]=(0,t.useState)({page:1,pageSize:12,totalPages:1,totalItems:0}),[T,I]=(0,t.useState)({courseType:"BasicAwareness",ageGroup:GE.ADULTS,categoryId:"",image:null}),[R,x]=(0,t.useState)({}),[N,O]=(0,t.useState)(!1),[k,P]=(0,t.useState)([]),[B,L]=(0,t.useState)(!1),D=(0,t.useRef)(null),U=(0,t.useRef)(null),M=(0,t.useMemo)((()=>{const e=i.filter((e=>e.isPublished)).length,t=i.length-e,n=i.reduce(((e,t)=>{var n;return e+((null===(n=t.chapters)||void 0===n?void 0:n.length)||0)}),0);return{total:i.length,published:e,draft:t,totalChapters:n}}),[i]),F=(0,t.useCallback)((()=>{x((e=>{if(e.title||e.description){const{title:t,description:n}=e;return a(e,WP)}return e}))}),[]),j=(0,t.useCallback)((()=>{F()}),[F]),Q=(0,t.useCallback)((()=>{F()}),[F]),V=(0,t.useCallback)((e=>{I((t=>l(l({},t),{},{courseType:e.target.value})))}),[]),H=(0,t.useCallback)((e=>{I((t=>l(l({},t),{},{ageGroup:parseInt(e.target.value)})))}),[]),z=(0,t.useCallback)((e=>{I((t=>l(l({},t),{},{categoryId:e.target.value})))}),[]),K=(0,t.useCallback)((e=>{I((t=>{var n;return l(l({},t),{},{image:(null===(n=e.target.files)||void 0===n?void 0:n[0])||null})}))}),[]),G=(0,t.useCallback)((()=>{var e,t,n,r;const i={},o=(null===(e=D.current)||void 0===e||null===(t=e.value)||void 0===t?void 0:t.trim())||"",a=(null===(n=U.current)||void 0===n||null===(r=n.value)||void 0===r?void 0:r.trim())||"";return o||(i.title="Title is required"),a||(i.description="Description is required"),T.categoryId||(i.categoryId="Category is required"),{errors:i,isValid:0===Object.keys(i).length}}),[T.categoryId]),W=(0,t.useMemo)((()=>[{value:"BasicAwareness",label:"Basic Awareness"},{value:"Prevention",label:"Prevention"},{value:"Intervention",label:"Intervention"},{value:"FamilyEducation",label:"Family Education"},{value:"Recovery",label:"Recovery"}]),[]),q=(0,t.useMemo)((()=>[{value:GE.TEENAGERS,label:"Teenagers (15-21)"},{value:GE.ADULTS,label:"Adults (22-64)"}]),[]),Y=(0,t.useCallback)((async()=>{c(!0),u("");try{const e=await Ha.getCourses(S.page,S.pageSize);e.success?(o(e.data.data||e.data),e.data.pagination&&C((t=>l(l({},t),{},{totalPages:e.data.pagination.totalPages,totalItems:e.data.pagination.totalItems})))):u(e.error||"Failed to load courses")}catch(rI){console.error("Error loading courses:",rI),u("Failed to load courses. Please try again.")}finally{c(!1)}}),[S.page,S.pageSize]),X=(0,t.useCallback)((async()=>{try{L(!0);const e=await Ha.getCategories();e.success&&e.data?(P(e.data),e.data.length>0&&!T.categoryId&&I((t=>l(l({},t),{},{categoryId:e.data[0].id})))):(console.warn("Failed to load categories, using empty list"),P([]))}catch(rI){console.error("Error loading categories:",rI),P([])}finally{L(!1)}}),[T.categoryId]);(0,t.useEffect)((()=>{Y(),X()}),[Y,X]);const J=(0,t.useCallback)(((e,t)=>{f(e.currentTarget),g(t)}),[]),Z=(0,t.useCallback)((()=>{f(null),g(null)}),[]),$=(0,t.useCallback)((()=>{E(!0),I({courseType:"BasicAwareness",ageGroup:GE.ADULTS,categoryId:"",image:null}),x({}),D.current&&(D.current.value=""),U.current&&(U.current.value="")}),[]),ee=((0,t.useCallback)((e=>{r("/admin/courses/".concat(e.courseId,"/edit")),Z()}),[r]),(0,t.useCallback)((e=>{r("/education/courses/".concat(e.courseId)),Z()}),[r]),(0,t.useCallback)((e=>{r("/admin/courses/".concat(e.courseId,"/content")),Z()}),[r])),te=(0,t.useCallback)((()=>{console.log("handleDeleteCourse called, selectedCourse:",m),m?(y(m),_(!0),Z()):console.error("No selectedCourse available")}),[m]),ne=(0,t.useCallback)((async e=>{try{(e.isPublished?await HE.unpublishCourse(e.courseId):await HE.publishCourse(e.courseId)).success?Y():u("Failed to update course status")}catch(rI){console.error("Error toggling publish status:",rI),u("Failed to update course status")}Z()}),[Y]),re=(0,t.useCallback)((async()=>{var e,t,n,i;const{errors:o,isValid:a}=G();if(!a)return void x(o);O(!0),u("");const s=(null===(e=D.current)||void 0===e||null===(t=e.value)||void 0===t?void 0:t.trim())||"",c=(null===(n=U.current)||void 0===n||null===(i=n.value)||void 0===i?void 0:i.trim())||"",l=JE({Title:s,Description:c,CourseType:T.courseType,AgeGroup:T.ageGroup,CategoryId:T.categoryId,Image:T.image});try{const e=await Ha.createCourse(l);e.success?(console.log("Course created successfully:",e.data),E(!1),O(!1),I({courseType:"BasicAwareness",ageGroup:GE.ADULTS,categoryId:k.length>0?k[0].id:"",image:null}),x({}),D.current&&(D.current.value=""),U.current&&(U.current.value=""),e.data.courseId?r("/admin/courses/".concat(e.data.courseId,"/content")):Y()):(u(e.error||"Failed to create course"),O(!1))}catch(rI){console.error("Error creating course:",rI),u(rI.message||"Failed to create course. Please try again."),O(!1)}}),[T,G,r,Y,k]),ie=(0,t.useCallback)((async()=>{if(v){console.log("Attempting to delete course:",v),O(!0);try{const e=await Ha.deleteCourse(v.courseId);e.success||e.isSuccess?(_(!1),y(null),Y()):u(e.message||e.error||"Failed to delete course")}catch(rI){console.error("Error deleting course:",rI),u("Failed to delete course. Please try again.")}finally{O(!1)}}else console.error("No courseToDelete available for delete operation")}),[v,Y]),oe=(0,t.useCallback)((e=>e.isPublished?(0,Tt.jsx)(Nm,{label:"\u0110\xe3 xu\u1ea5t b\u1ea3n",color:"success",size:"small"}):(0,Tt.jsx)(Nm,{label:"B\u1ea3n nh\xe1p",color:"default",size:"small"})),[]),ae=(0,t.useCallback)((e=>(0,Tt.jsx)(pm,{size:{xs:12,sm:6,md:4},children:(0,Tt.jsxs)(qP,{children:[(0,Tt.jsx)(YP,{sx:{backgroundImage:e.imageUrl?"url(".concat(e.imageUrl,")"):'url("https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=250&fit=crop&auto=format")',backgroundSize:"cover",backgroundPosition:"center"},children:(0,Tt.jsx)(XP,{children:oe(e)})}),(0,Tt.jsxs)(Bm,{sx:{flexGrow:1,p:3},children:[(0,Tt.jsx)(kp,{variant:"h6",gutterBottom:!0,sx:{fontWeight:700,color:"text.primary",mb:2,lineHeight:1.3},children:e.title}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.6,mb:3},children:e.description}),(0,Tt.jsx)(oA,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",pt:1}})]}),(0,Tt.jsxs)(hg,{sx:{justifyContent:"space-between",px:3,pb:3,pt:0},children:[(0,Tt.jsx)(Gh,{variant:"contained",size:"small",startIcon:(0,Tt.jsx)(FP,{}),onClick:()=>ee(e),sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:3,py:1,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-1px)"}},children:"Ch\u1ec9nh S\u1eeda"}),(0,Tt.jsx)(Em,{size:"small",onClick:t=>J(t,e),sx:{bgcolor:qi("#000",.04),borderRadius:2,"&:hover":{bgcolor:qi("#000",.08),transform:"scale(1.1)"}},children:(0,Tt.jsx)(jP,{})})]})]})},e.courseId)),[oe,ee,J]),se=(0,t.useCallback)((()=>(0,Tt.jsx)(JP,{component:up,children:(0,Tt.jsxs)(Zk,{children:[(0,Tt.jsx)(oP,{children:(0,Tt.jsxs)(AP,{sx:{bgcolor:"primary.main"},children:[(0,Tt.jsx)(vP,{sx:{color:"white",fontWeight:600,py:2},children:"Kh\xf3a H\u1ecdc"}),(0,Tt.jsx)(vP,{sx:{color:"white",fontWeight:600,py:2},children:"Tr\u1ea1ng Th\xe1i"}),(0,Tt.jsx)(vP,{align:"right",sx:{color:"white",fontWeight:600,py:2},children:"H\xe0nh \u0110\u1ed9ng"})]})}),(0,Tt.jsx)(SP,{children:i.map(((e,t)=>(0,Tt.jsxs)(AP,{sx:{"&:nth-of-type(odd)":{backgroundColor:qi("#f8fafc",.5)},"&:hover":{backgroundColor:qi("#1976d2",.08),transform:"scale(1.01)"},transition:"all 0.2s ease"},children:[(0,Tt.jsx)(vP,{sx:{py:2},children:(0,Tt.jsxs)(oA,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,Tt.jsx)(kP,{src:e.imageUrl,sx:{width:48,height:48,borderRadius:2,boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:(0,Tt.jsx)(PE,{})}),(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"subtitle1",sx:{fontWeight:600,lineHeight:1.3},children:e.title}),(0,Tt.jsxs)(kp,{variant:"caption",color:"text.secondary",sx:{lineHeight:1.4},children:[e.description.substring(0,60),"..."]})]})]})}),(0,Tt.jsx)(vP,{sx:{py:2},children:oe(e)}),(0,Tt.jsx)(vP,{align:"right",sx:{py:2},children:(0,Tt.jsx)(Em,{size:"small",onClick:t=>J(t,e),sx:{bgcolor:qi("#000",.04),borderRadius:2,"&:hover":{bgcolor:qi("#000",.08),transform:"scale(1.1)"}},children:(0,Tt.jsx)(jP,{})})})]},e.courseId)))})]})})),[i,oe,J]),ce=(0,t.useCallback)((()=>h("grid")),[]),le=(0,t.useCallback)((()=>h("table")),[]);return s?(0,Tt.jsx)(oA,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:(0,Tt.jsx)(Ph,{size:60})}):(0,Tt.jsxs)(oA,{sx:{minHeight:"100vh",bgcolor:"#f8fafc"},children:[(0,Tt.jsx)(ZP,{children:(0,Tt.jsx)(Bg,{children:(0,Tt.jsxs)(oA,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:700,mb:1,fontSize:"3rem",color:"transparent",background:"linear-gradient(to right, #ffffff, #e0e0e0)",WebkitBackgroundClip:"text",backgroundClip:"text",textShadow:"0 0 10px rgba(255, 255, 255, 0.3)"},children:"Qu\u1ea3n L\xfd Kh\xf3a H\u1ecdc"}),(0,Tt.jsx)(kp,{variant:"h6",sx:{opacity:.9,fontSize:"1.5rem",maxWidth:"800px",margin:"0 auto",color:"transparent",background:"linear-gradient(to right, #ffffff, #e0e0e0)",WebkitBackgroundClip:"text",backgroundClip:"text",textShadow:"0 0 10px rgba(255, 255, 255, 0.3)"},children:"T\u1ea1o v\xe0 qu\u1ea3n l\xfd c\xe1c kh\xf3a h\u1ecdc gi\xe1o d\u1ee5c, ch\u01b0\u01a1ng, b\xe0i h\u1ecdc v\xe0 b\xe0i ki\u1ec3m tra"})]}),(0,Tt.jsx)(Gh,{variant:"contained",startIcon:(0,Tt.jsx)(QP,{}),onClick:$,size:"large",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",borderRadius:3,px:4,py:1.5,"&:hover":{bgcolor:"rgba(255,255,255,0.3)",transform:"translateY(-2px)"},backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.3)"},children:"T\u1ea1o Kh\xf3a H\u1ecdc"})]})})}),(0,Tt.jsxs)(Bg,{maxWidth:"xl",sx:{pb:4},children:[d&&(0,Tt.jsx)(uE,{severity:"error",sx:{mb:3,borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},onClose:()=>u(""),children:d}),i.length>0&&(null===(e=i[0])||void 0===e||null===(n=e.courseId)||void 0===n?void 0:n.includes("mock"))&&(0,Tt.jsxs)(uE,{severity:"info",sx:{mb:3,borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[(0,Tt.jsx)("strong",{children:"Ch\u1ebf \u0111\u1ed9 ph\xe1t tri\u1ec3n:"})," API backend kh\xf4ng kh\u1ea3 d\u1ee5ng. Hi\u1ec7n t\u1ea1i \u0111ang hi\u1ec3n th\u1ecb d\u1eef li\u1ec7u m\u1eabu cho m\u1ee5c \u0111\xedch ph\xe1t tri\u1ec3n."]}),(0,Tt.jsxs)(up,{sx:{p:3,mb:4,borderRadius:3,background:"white",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid ".concat(qi("#1976d2",.1))},children:[(0,Tt.jsxs)(oA,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,Tt.jsx)(kp,{variant:"h6",sx:{fontWeight:600},children:"Th\u1ed1ng K\xea Kh\xf3a H\u1ecdc"}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,children:[(0,Tt.jsx)(Gh,{variant:"grid"===A?"contained":"outlined",onClick:ce,size:"small",startIcon:(0,Tt.jsx)(VP,{}),sx:{borderRadius:2},children:"L\u01b0\u1edbi"}),(0,Tt.jsx)(Gh,{variant:"table"===A?"contained":"outlined",onClick:le,size:"small",startIcon:(0,Tt.jsx)(HP,{}),sx:{borderRadius:2},children:"B\u1ea3ng"})]})]}),(0,Tt.jsxs)(pm,{container:!0,spacing:2,children:[(0,Tt.jsx)(pm,{size:{xs:12,sm:6,md:3},children:(0,Tt.jsxs)(oA,{sx:{p:2.5,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white",textAlign:"center",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,right:0,width:40,height:40,borderRadius:"50%",background:"rgba(255,255,255,0.1)",transform:"translate(15px, -15px)"}},children:[(0,Tt.jsx)(kp,{variant:"h3",sx:{fontWeight:700,mb:.5,color:"#ffffff"},children:M.total}),(0,Tt.jsx)(kp,{variant:"body2",sx:{opacity:1,color:"#ffffff"},children:"T\u1ed5ng Kh\xf3a H\u1ecdc"})]})}),(0,Tt.jsx)(pm,{size:{xs:12,sm:6,md:3},children:(0,Tt.jsxs)(oA,{sx:{p:2.5,borderRadius:2,background:"linear-gradient(135deg, #4caf50 0%, #388e3c 100%)",color:"white",textAlign:"center",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,right:0,width:40,height:40,borderRadius:"50%",background:"rgba(255,255,255,0.1)",transform:"translate(15px, -15px)"}},children:[(0,Tt.jsx)(kp,{variant:"h3",sx:{fontWeight:700,mb:.5,color:"#ffffff"},children:M.published}),(0,Tt.jsx)(kp,{variant:"body2",sx:{opacity:1,color:"#ffffff"},children:"\u0110\xe3 Xu\u1ea5t B\u1ea3n"})]})}),(0,Tt.jsx)(pm,{size:{xs:12,sm:6,md:3},children:(0,Tt.jsxs)(oA,{sx:{p:2.5,borderRadius:2,background:"linear-gradient(135deg, #ff9800 0%, #f57c00 100%)",color:"white",textAlign:"center",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,right:0,width:40,height:40,borderRadius:"50%",background:"rgba(255,255,255,0.1)",transform:"translate(15px, -15px)"}},children:[(0,Tt.jsx)(kp,{variant:"h3",sx:{fontWeight:700,mb:.5,color:"#ffffff"},children:M.draft}),(0,Tt.jsx)(kp,{variant:"body2",sx:{opacity:1,color:"#ffffff"},children:"B\u1ea3n Nh\xe1p"})]})}),(0,Tt.jsx)(pm,{size:{xs:12,sm:6,md:3},children:(0,Tt.jsxs)(oA,{sx:{p:2.5,borderRadius:2,background:"linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%)",color:"white",textAlign:"center",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,right:0,width:40,height:40,borderRadius:"50%",background:"rgba(255,255,255,0.1)",transform:"translate(15px, -15px)"}},children:[(0,Tt.jsx)(kp,{variant:"h3",sx:{fontWeight:700,mb:.5,color:"#ffffff"},children:M.totalChapters}),(0,Tt.jsx)(kp,{variant:"body2",sx:{opacity:1,color:"#ffffff"},children:"T\u1ed5ng Ch\u01b0\u01a1ng"})]})})]})]}),0===i.length?(0,Tt.jsxs)(up,{sx:{p:6,textAlign:"center",borderRadius:3,background:"white",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:[(0,Tt.jsx)(PE,{sx:{fontSize:80,color:"grey.300",mb:3}}),(0,Tt.jsx)(kp,{variant:"h5",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"Kh\xf4ng t\xecm th\u1ea5y kh\xf3a h\u1ecdc n\xe0o"}),(0,Tt.jsx)(kp,{variant:"body1",color:"text.secondary",sx:{mb:4,maxWidth:400,mx:"auto"},children:"B\u1eaft \u0111\u1ea7u b\u1eb1ng c\xe1ch t\u1ea1o kh\xf3a h\u1ecdc \u0111\u1ea7u ti\xean c\u1ee7a b\u1ea1n v\xe0 b\u1eaft \u0111\u1ea7u chia s\u1ebb ki\u1ebfn th\u1ee9c v\u1edbi h\u1ecdc vi\xean"}),(0,Tt.jsx)(Gh,{variant:"contained",size:"large",startIcon:(0,Tt.jsx)(QP,{}),onClick:$,sx:{borderRadius:3,px:4,py:1.5,fontWeight:600},children:"T\u1ea1o Kh\xf3a H\u1ecdc \u0110\u1ea7u Ti\xean"})]}):"grid"===A?(0,Tt.jsx)(pm,{container:!0,spacing:3,children:i.map(ae)}):se(),(0,Tt.jsxs)(cb,{anchorEl:p,open:Boolean(p),onClose:Z,PaperProps:{sx:{borderRadius:2,boxShadow:"0 8px 24px rgba(0,0,0,0.12)",mt:1,minWidth:200,border:"1px solid ".concat(qi("#1976d2",.1))}},children:[m&&(0,Tt.jsx)(MP,{onClick:()=>ne(m),sx:{borderRadius:1,mx:1,my:.5,"&:hover":{bgcolor:qi("#1976d2",.08)}},children:m.isPublished?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(zP,{sx:{mr:2,color:"grey.600"}}),(0,Tt.jsx)(kp,{sx:{fontWeight:500},children:"H\u1ee7y Xu\u1ea5t B\u1ea3n"})]}):(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(KP,{sx:{mr:2,color:"success.main"}}),(0,Tt.jsx)(kp,{sx:{fontWeight:500},children:"Xu\u1ea5t B\u1ea3n"})]})}),(0,Tt.jsxs)(MP,{onClick:te,sx:{color:"error.main",borderRadius:1,mx:1,my:.5,"&:hover":{bgcolor:qi("#f44336",.08)}},children:[(0,Tt.jsx)(GP,{sx:{mr:2}}),(0,Tt.jsx)(kp,{sx:{fontWeight:500},children:"X\xf3a"})]})]}),(0,Tt.jsxs)(ZS,{open:b,onClose:()=>E(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:"0 20px 40px rgba(0,0,0,0.15)"}},children:[(0,Tt.jsx)(rC,{sx:{bgcolor:"primary.main",color:"white",fontWeight:700,py:3},children:"\u2728 T\u1ea1o Kh\xf3a H\u1ecdc M\u1edbi"}),(0,Tt.jsx)(sC,{sx:{p:4},children:(0,Tt.jsxs)(oA,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[(0,Tt.jsx)(Hb,{inputRef:D,label:"Ti\xeau \u0110\u1ec1 Kh\xf3a H\u1ecdc",fullWidth:!0,onChange:j,error:!!R.title,helperText:R.title,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,Tt.jsx)(Hb,{inputRef:U,label:"M\xf4 T\u1ea3",fullWidth:!0,multiline:!0,rows:4,onChange:Q,error:!!R.description,helperText:R.description,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,Tt.jsxs)(pm,{container:!0,spacing:2,children:[(0,Tt.jsx)(pm,{size:{xs:12,sm:6},children:(0,Tt.jsxs)(Gv,{fullWidth:!0,children:[(0,Tt.jsx)(jv,{children:"Lo\u1ea1i Kh\xf3a H\u1ecdc"}),(0,Tt.jsx)(Ub,{value:T.courseType,label:"Lo\u1ea1i Kh\xf3a H\u1ecdc",onChange:V,sx:{borderRadius:2},children:W.map((e=>(0,Tt.jsx)(MP,{value:e.value,children:e.label},e.value)))})]})}),(0,Tt.jsx)(pm,{size:{xs:12,sm:6},children:(0,Tt.jsxs)(Gv,{fullWidth:!0,children:[(0,Tt.jsx)(jv,{children:"Nh\xf3m Tu\u1ed5i M\u1ee5c Ti\xeau"}),(0,Tt.jsx)(Ub,{value:T.ageGroup,label:"Nh\xf3m Tu\u1ed5i M\u1ee5c Ti\xeau",onChange:H,sx:{borderRadius:2},children:q.map((e=>(0,Tt.jsx)(MP,{value:e.value,children:e.label},e.value)))})]})})]}),(0,Tt.jsx)(pm,{container:!0,spacing:2,children:(0,Tt.jsx)(pm,{size:{xs:12},children:(0,Tt.jsxs)(Gv,{fullWidth:!0,required:!0,error:!!R.categoryId,children:[(0,Tt.jsx)(jv,{children:"Danh M\u1ee5c"}),(0,Tt.jsx)(Ub,{value:T.categoryId,label:"Danh M\u1ee5c",onChange:z,disabled:B,sx:{borderRadius:2},children:B?(0,Tt.jsx)(MP,{disabled:!0,children:"\u0110ang t\u1ea3i danh m\u1ee5c..."}):k.length>0?k.map((e=>(0,Tt.jsx)(MP,{value:e.id,children:e.name},e.id))):(0,Tt.jsx)(MP,{disabled:!0,children:"Kh\xf4ng c\xf3 danh m\u1ee5c n\xe0o"})}),R.categoryId&&(0,Tt.jsx)(kp,{variant:"caption",color:"error",sx:{mt:.5},children:R.categoryId})]})})}),(0,Tt.jsxs)(oA,{sx:{p:3,border:"2px dashed",borderColor:"grey.300",borderRadius:2,textAlign:"center",bgcolor:qi("#f5f5f5",.5),transition:"all 0.2s ease","&:hover":{borderColor:"primary.main",bgcolor:qi("#1976d2",.02)}},children:[(0,Tt.jsx)(kp,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:600,color:"text.primary"},children:"H\xecnh \u1ea2nh Kh\xf3a H\u1ecdc"}),(0,Tt.jsxs)(Gh,{variant:"outlined",component:"label",startIcon:(0,Tt.jsx)(QP,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:500},children:["T\u1ea3i L\xean H\xecnh \u1ea2nh",(0,Tt.jsx)("input",{type:"file",hidden:!0,accept:"image/*",onChange:K})]}),T.image&&(0,Tt.jsxs)(kp,{variant:"caption",sx:{ml:2,color:"success.main",fontWeight:600,bgcolor:qi("#4caf50",.1),px:1,py:.5,borderRadius:1},children:["\u2713 ",T.image.name]})]})]})}),(0,Tt.jsxs)(uC,{sx:{p:3,gap:2},children:[(0,Tt.jsx)(Gh,{onClick:()=>E(!1),sx:{borderRadius:2,textTransform:"none",fontWeight:500,px:3},children:"H\u1ee7y"}),(0,Tt.jsx)(Gh,{onClick:re,variant:"contained",disabled:N,startIcon:N?(0,Tt.jsx)(Ph,{size:16}):(0,Tt.jsx)(QP,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:4,py:1.5,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)"}},children:N?"\u0110ang t\u1ea1o...":"T\u1ea1o Kh\xf3a H\u1ecdc"})]})]}),(0,Tt.jsxs)(ZS,{open:w,onClose:()=>{_(!1),y(null)},PaperProps:{sx:{borderRadius:3,boxShadow:"0 20px 40px rgba(0,0,0,0.15)"}},children:[(0,Tt.jsx)(rC,{sx:{color:"error.main",fontWeight:700,py:3},children:"\ud83d\uddd1\ufe0f X\xf3a Kh\xf3a H\u1ecdc"}),(0,Tt.jsxs)(sC,{sx:{py:2,px:3},children:[(0,Tt.jsxs)(kp,{sx:{lineHeight:1.6},children:["B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a kh\xf3a h\u1ecdc"," ",(0,Tt.jsxs)("strong",{children:['"',(null===v||void 0===v?void 0:v.title)||(null===v||void 0===v?void 0:v.courseId)||"Unknown Course",'"']}),"? H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c v\xe0 s\u1ebd x\xf3a v\u0129nh vi\u1ec5n t\u1ea5t c\u1ea3 n\u1ed9i dung li\xean quan."]}),!1]}),(0,Tt.jsxs)(uC,{sx:{p:3,gap:2},children:[(0,Tt.jsx)(Gh,{onClick:()=>{_(!1),y(null)},sx:{borderRadius:2,textTransform:"none",fontWeight:500,px:3},children:"H\u1ee7y"}),(0,Tt.jsx)(Gh,{onClick:ie,color:"error",variant:"contained",disabled:N||!v,startIcon:N?(0,Tt.jsx)(Ph,{size:16}):(0,Tt.jsx)(GP,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:4,py:1.5},children:N?"\u0110ang x\xf3a...":"X\xf3a Kh\xf3a H\u1ecdc"})]})]}),(0,Tt.jsx)(gC,{color:"primary",sx:{position:"fixed",bottom:24,right:24,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 8px 20px rgba(25, 118, 210, 0.4)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"scale(1.1)",boxShadow:"0 12px 24px rgba(25, 118, 210, 0.6)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onClick:$,children:(0,Tt.jsx)(QP,{})})]})]})}),eB=t.memo($P),tB=Zh((0,Tt.jsx)("path",{d:"M20 9H4v2h16zM4 15h16v-2H4z"})),nB=Zh((0,Tt.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"})),rB=Zh((0,Tt.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),iB=Zh((0,Tt.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),oB=Zh((0,Tt.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),aB=Zh((0,Tt.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),sB=Zh((0,Tt.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function cB(e){return eA("MuiCheckbox",e)}const lB=tA("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),dB=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","disableRipple","className","slots","slotProps"],uB=CA(Qw,{shouldForwardProp:e=>AA(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t["size".concat(mh(n.size))],"default"!==n.color&&t["color".concat(mh(n.color))]]}})(IA((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi(t.palette[n].main,t.palette.action.hoverOpacity)}}}})),...Object.entries(t.palette).filter(gh()).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(lB.checked,", &.").concat(lB.indeterminate)]:{color:(t.vars||t).palette[n].main},["&.".concat(lB.disabled)]:{color:(t.vars||t).palette.action.disabled}}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}}))),AB=(0,Tt.jsx)(aB,{}),hB=(0,Tt.jsx)(oB,{}),pB=(0,Tt.jsx)(sB,{}),fB=t.forwardRef((function(e,n){var r,i,o;const s=xa({props:e,name:"MuiCheckbox"}),{checkedIcon:c=AB,color:d="primary",icon:u=hB,indeterminate:A=!1,indeterminateIcon:h=pB,inputProps:p,size:f="medium",disableRipple:m=!1,className:g,slots:v={},slotProps:y={}}=s,b=a(s,dB),E=A?h:u,w=A?h:c,_=l(l({},s),{},{disableRipple:m,color:d,indeterminate:A,size:f}),S=(e=>{const{classes:t,indeterminate:n,color:r,size:i}=e,o=aA({root:["root",n&&"indeterminate","color".concat(mh(r)),"size".concat(mh(i))]},cB,t);return l(l({},t),o)})(_),C=null!==(r=y.input)&&void 0!==r?r:p,[T,I]=uf("root",{ref:n,elementType:uB,className:Mu(S.root,g),shouldForwardComponentProp:!0,externalForwardedProps:l({slots:v,slotProps:y},b),ownerState:_,additionalProps:{type:"checkbox",icon:t.cloneElement(E,{fontSize:null!==(i=E.props.fontSize)&&void 0!==i?i:f}),checkedIcon:t.cloneElement(w,{fontSize:null!==(o=w.props.fontSize)&&void 0!==o?o:f}),disableRipple:m,slots:v,slotProps:{input:zy("function"===typeof C?C(_):C,{"data-indeterminate":A})}}});return(0,Tt.jsx)(T,l(l({},I),{},{classes:S}))})),mB=fB,gB=Zh((0,Tt.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),vB=CA(fp)((e=>{let{theme:t}=e;return{marginBottom:t.spacing(2),border:"1px solid ".concat(t.palette.divider),"&:hover":{boxShadow:t.shadows[4]}}})),yB=CA(oA)((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",padding:t.spacing(1),marginBottom:t.spacing(1),border:"1px solid ".concat(t.palette.divider),borderRadius:t.shape.borderRadius,"&.correct":{backgroundColor:t.palette.success.light+"20",borderColor:t.palette.success.main},"&.incorrect":{backgroundColor:t.palette.error.light+"20",borderColor:t.palette.error.main}}})),bB=e=>{let{quiz:n,onSave:r,onCancel:i}=e;const[o,a]=(0,t.useState)({title:"",description:"",passingScore:70,timeLimit:30,isFinalQuiz:!1,maxAttempts:1,allowRetry:!0,retryDelayMinutes:60,questions:[]}),[s,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[A,h]=(0,t.useState)({questionText:"",questionType:"multiple_choice",points:1,orderIndex:1,answers:[]}),[p,f]=(0,t.useState)(!1),[m,g]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(n){console.log("Loading quiz data:",n);const e=!(!n.id&&!n.quizId);g(e);const t=(n.questions||[]).map(((e,t)=>({id:e.id,questionText:e.content||e.questionText||"",questionType:e.questionType||"multiple_choice",points:e.points||1,orderIndex:e.questionOrder||t+1,answers:(e.answers||[]).map(((e,t)=>({id:e.id,answerText:e.answerText||"",isCorrect:e.isCorrect||!1,orderIndex:t+1})))})));a({id:n.id||n.quizId,title:n.title||"",description:n.description||"",passingScore:n.passingScore||70,timeLimit:n.timeLimitMinutes||30,isFinalQuiz:n.isFinalQuiz||!1,maxAttempts:n.maxAttempts||1,allowRetry:!1!==n.allowRetry,retryDelayMinutes:n.retryDelayMinutes||60,questions:t,lessonId:n.lessonId}),console.log("Converted quiz data:",{isExisting:e,questionsCount:t.length,questions:t})}else g(!1),a({title:"",description:"",passingScore:70,timeLimit:30,isFinalQuiz:!1,maxAttempts:1,allowRetry:!0,retryDelayMinutes:60,questions:[]})}),[n]),(0,t.useEffect)((()=>{d&&h({questionText:d.questionText||"",questionType:d.questionType||"multiple_choice",points:d.points||1,orderIndex:d.orderIndex||1,answers:d.answers||[]})}),[d]);const v=()=>{u(null),h({questionText:"",questionType:"multiple_choice",points:1,orderIndex:o.questions.length+1,answers:[{answerText:"",isCorrect:!1,orderIndex:1},{answerText:"",isCorrect:!1,orderIndex:2}]}),c(!0)},y=(e,t,n)=>{const r=[...A.answers];r[e]=l(l({},r[e]),{},{[t]:n}),"isCorrect"===t&&!0===n&&"short_answer"!==A.questionType&&r.forEach(((t,n)=>{n!==e&&(t.isCorrect=!1)})),h(l(l({},A),{},{answers:r}))};return(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(fp,{sx:{mb:3},children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsxs)(kp,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Tt.jsx)(CC,{}),m?"Ch\u1ec9nh S\u1eeda Quiz":"T\u1ea1o Quiz M\u1edbi"]}),m&&(0,Tt.jsxs)(kp,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["\u0110ang ch\u1ec9nh s\u1eeda quiz: ",(0,Tt.jsx)("strong",{children:o.title})]}),(0,Tt.jsxs)(pm,{container:!0,spacing:3,sx:{mt:1},children:[(0,Tt.jsx)(pm,{size:{xs:12,md:6},children:(0,Tt.jsx)(Hb,{label:"Quiz Title",fullWidth:!0,value:o.title,onChange:e=>a(l(l({},o),{},{title:e.target.value}))})}),(0,Tt.jsx)(pm,{size:{xs:12,md:3},children:(0,Tt.jsx)(Hb,{label:"Passing Score (%)",type:"number",fullWidth:!0,value:o.passingScore,onChange:e=>a(l(l({},o),{},{passingScore:Number(e.target.value)})),inputProps:{min:0,max:100}})}),(0,Tt.jsx)(pm,{size:{xs:12,md:3},children:(0,Tt.jsx)(Hb,{label:"Time Limit (minutes)",type:"number",fullWidth:!0,value:o.timeLimit,onChange:e=>a(l(l({},o),{},{timeLimit:Number(e.target.value)||0})),inputProps:{min:0},helperText:"0 = No time limit"})}),(0,Tt.jsx)(pm,{size:{xs:12},children:(0,Tt.jsx)(Hb,{label:"Description",fullWidth:!0,multiline:!0,rows:3,value:o.description,onChange:e=>a(l(l({},o),{},{description:e.target.value}))})})]})]})}),(0,Tt.jsx)(fp,{sx:{mb:3},children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsx)(kp,{variant:"h6",gutterBottom:!0,children:"Quiz Statistics"}),(0,Tt.jsxs)(pm,{container:!0,spacing:2,children:[(0,Tt.jsxs)(pm,{size:{xs:3},children:[(0,Tt.jsx)(kp,{variant:"h4",color:"primary.main",children:o.questions.length}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:"Questions"})]}),(0,Tt.jsxs)(pm,{size:{xs:3},children:[(0,Tt.jsx)(kp,{variant:"h4",color:"primary.main",children:o.questions.reduce(((e,t)=>e+(t.points||1)),0)}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:"Total Points"})]}),(0,Tt.jsxs)(pm,{size:{xs:3},children:[(0,Tt.jsxs)(kp,{variant:"h4",color:"primary.main",children:[o.passingScore,"%"]}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:"Passing Score"})]}),(0,Tt.jsxs)(pm,{size:{xs:3},children:[(0,Tt.jsx)(kp,{variant:"h4",color:"primary.main",children:o.timeLimit||"\u221e"}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:"Time Limit (min)"})]})]})]})}),(0,Tt.jsxs)(oA,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,Tt.jsxs)(kp,{variant:"h5",sx:{fontWeight:600},children:["Questions (",o.questions.length,")"]}),(0,Tt.jsx)(Gh,{variant:"contained",startIcon:(0,Tt.jsx)(QP,{}),onClick:v,children:"Add Question"})]}),0===o.questions.length?(0,Tt.jsx)(fp,{children:(0,Tt.jsxs)(Bm,{sx:{textAlign:"center",py:4},children:[(0,Tt.jsx)(CC,{sx:{fontSize:64,color:"grey.400",mb:2}}),(0,Tt.jsx)(kp,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No questions yet"}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Start building your quiz by adding the first question"}),(0,Tt.jsx)(Gh,{variant:"contained",startIcon:(0,Tt.jsx)(QP,{}),onClick:v,children:"Add Question"})]})}):(0,Tt.jsx)(oA,{children:o.questions.map(((e,t)=>{var n;return(0,Tt.jsx)(vB,{children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsxs)(oA,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,Tt.jsxs)(oA,{sx:{flex:1},children:[(0,Tt.jsxs)(kp,{variant:"h6",gutterBottom:!0,children:["Question ",t+1,m&&(0,Tt.jsx)(Nm,{label:e.id?"C\xf3 s\u1eb5n":"M\u1edbi",size:"small",color:e.id?"default":"primary",sx:{ml:1}})]}),(0,Tt.jsx)(kp,{variant:"body1",sx:{mb:2},children:e.questionText}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,sx:{mb:2},children:[(0,Tt.jsx)(Nm,{label:e.questionType.replace("_"," ").toUpperCase(),size:"small",variant:"outlined"}),(0,Tt.jsx)(Nm,{label:"".concat(e.points||1," point").concat(1!==(e.points||1)?"s":""),size:"small"})]})]}),(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(Em,{onClick:()=>((e,t)=>{u(l(l({},e),{},{index:t})),c(!0)})(e,t),children:(0,Tt.jsx)(FP,{})}),(0,Tt.jsx)(Em,{onClick:()=>(async e=>{const t=o.questions[e];if(!window.confirm('B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a c\xe2u h\u1ecfi n\xe0y: "'.concat(t.questionText,'"?')))return;if(t.id&&m)try{f(!0),console.log("Deleting question from backend:",t.id);const e=await Ha.deleteQuestion(t.id);if(!e.success)return alert(e.error||"Kh\xf4ng th\u1ec3 x\xf3a c\xe2u h\u1ecfi t\u1eeb backend"),void f(!1);console.log("Successfully deleted question from backend")}catch(rI){return console.error("Error deleting question:",rI),alert(rI.message||"Kh\xf4ng th\u1ec3 x\xf3a c\xe2u h\u1ecfi t\u1eeb backend"),void f(!1)}const n=o.questions.filter(((t,n)=>n!==e)),r=n.map(((e,t)=>l(l({},e),{},{orderIndex:t+1})));a(l(l({},o),{},{questions:r})),f(!1)})(t),color:"error",disabled:p,children:(0,Tt.jsx)(GP,{})})]})]}),(0,Tt.jsx)(oA,{children:"short_answer"===e.questionType?(0,Tt.jsxs)(yB,{className:"correct",children:[(0,Tt.jsx)(EC,{sx:{mr:1,color:"success.main"}}),(0,Tt.jsx)(kp,{variant:"body2",children:"Short answer question (manually graded)"})]}):null===(n=e.answers)||void 0===n?void 0:n.map(((e,t)=>(0,Tt.jsxs)(yB,{className:e.isCorrect?"correct":"incorrect",children:[e.isCorrect?(0,Tt.jsx)(EC,{sx:{mr:1,color:"success.main"}}):(0,Tt.jsx)(gB,{sx:{mr:1,color:"error.main"}}),(0,Tt.jsx)(kp,{variant:"body2",children:e.answerText})]},t)))})]})},t)}))}),(0,Tt.jsxs)(oA,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:4},children:[(0,Tt.jsx)(Gh,{onClick:i,children:"Cancel"}),!1,(0,Tt.jsx)(Gh,{variant:"contained",onClick:async()=>{if(!o.title.trim())return void alert("Please enter a quiz title");if(0===o.questions.length)return void alert("Please add at least one question");const e=(null===n||void 0===n?void 0:n.lessonId)||o.lessonId;if(!e)return void alert("Error: lessonId is missing. Cannot create quiz without a lesson.");if(localStorage.getItem("accessToken")){f(!0);try{if(m){var t;console.log("Updating existing quiz:",o.id);const e={title:o.title,description:o.description,isFinalQuiz:!0,timeLimitMinutes:Number(o.timeLimit)||300,passingScore:Number(o.passingScore)||100,maxAttempts:Number(o.maxAttempts)||10,allowRetry:null===(t=o.allowRetry)||void 0===t||t,retryDelayMinutes:Number(o.retryDelayMinutes)||1440};console.log("Quiz update payload:",e);try{const t=await Ha.updateQuiz(o.id,e);if(console.log("Quiz update response:",t),t&&t.success)console.log("Quiz updated successfully");else{var i,a;if(console.error("Quiz update failed:",t),401===(null===t||void 0===t?void 0:t.status)||null!==t&&void 0!==t&&null!==(i=t.error)&&void 0!==i&&i.includes("401")||null!==t&&void 0!==t&&null!==(a=t.error)&&void 0!==a&&a.includes("Unauthorized"))return void alert("\ud83d\udd12 Phi\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 h\u1ebft h\u1ea1n. \n\n\u0110\u1ec3 kh\u1eafc ph\u1ee5c:\n1. Refresh trang v\xe0 \u0111\u0103ng nh\u1eadp l\u1ea1i\n2. Ho\u1eb7c m\u1edf tab m\u1edbi v\xe0 \u0111\u0103ng nh\u1eadp\n3. Sau \u0111\xf3 quay l\u1ea1i v\xe0 th\u1eed l\u1ea1i\n\nChi ti\u1ebft l\u1ed7i: ".concat((null===t||void 0===t?void 0:t.error)||"Unauthorized"));const e=(null===t||void 0===t?void 0:t.error)||(null===t||void 0===t?void 0:t.message)||"Failed to update quiz";console.warn("Quiz update not supported: ".concat(e,". Will only add new questions.")),alert("Kh\xf4ng th\u1ec3 c\u1eadp nh\u1eadt th\xf4ng tin quiz (c\xf3 th\u1ec3 backend ch\u01b0a h\u1ed7 tr\u1ee3), nh\u01b0ng s\u1ebd th\xeam c\xe2u h\u1ecfi m\u1edbi.")}}catch(u){if(console.error("Quiz update error:",u),u.message.includes("401")||u.message.includes("Unauthorized"))return void alert("\ud83d\udd12 Phi\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 h\u1ebft h\u1ea1n. \n\n\u0110\u1ec3 kh\u1eafc ph\u1ee5c:\n1. Refresh trang v\xe0 \u0111\u0103ng nh\u1eadp l\u1ea1i\n2. Ho\u1eb7c m\u1edf tab m\u1edbi v\xe0 \u0111\u0103ng nh\u1eadp\n3. Sau \u0111\xf3 quay l\u1ea1i v\xe0 th\u1eed l\u1ea1i\n\nChi ti\u1ebft l\u1ed7i: ".concat(u.message));console.warn("Quiz update failed: ".concat(u.message,". Will only add new questions.")),alert("Kh\xf4ng th\u1ec3 c\u1eadp nh\u1eadt th\xf4ng tin quiz (c\xf3 th\u1ec3 backend ch\u01b0a h\u1ed7 tr\u1ee3), nh\u01b0ng s\u1ebd th\xeam c\xe2u h\u1ecfi m\u1edbi.")}for(const[t,n]of o.questions.entries())if(n.id)console.log("Skipping update for existing question ".concat(n.id," (API not fully supported)"));else{console.log("Creating new question for quiz ".concat(o.id));const e={quizId:o.id,content:n.questionText,questionType:n.questionType,questionOrder:t+1,answers:n.answers.map((e=>({answerText:e.answerText,isCorrect:e.isCorrect})))};try{const t=await Ha.createQuestion(e);if(t&&t.success)console.log("Successfully created new question");else{const e=(null===t||void 0===t?void 0:t.error)||"Failed to create new question: "+n.questionText;console.error("Question creation failed:",e,t),alert(e)}}catch(A){console.error("Question creation error:",A),alert("Kh\xf4ng th\u1ec3 t\u1ea1o c\xe2u h\u1ecfi: ".concat(n.questionText,". L\u1ed7i: ").concat(A.message))}}console.log("Successfully updated quiz with all questions"),alert("Quiz \u0111\xe3 \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt th\xe0nh c\xf4ng!")}else{var s;const t={lessonId:e,title:o.title,description:o.description,isFinalQuiz:!0,timeLimitMinutes:Number(o.timeLimit)||300,passingScore:Number(o.passingScore)||100,maxAttempts:Number(o.maxAttempts)||10,allowRetry:null===(s=o.allowRetry)||void 0===s||s,retryDelayMinutes:Number(o.retryDelayMinutes)||1440};console.log("Quiz payload being sent:",t);const n=await Ha.createQuiz(t);if(console.log("Quiz creation response:",n),!n||!n.success){console.error("Quiz creation failed. Full response:",n);const e=(null===n||void 0===n?void 0:n.error)||(null===n||void 0===n?void 0:n.message)||(null===n||void 0===n?void 0:n.data)&&n.data.message||"Failed to create quiz. See console for details.";return void(e.includes("already has quiz")?alert("B\xe0i h\u1ecdc n\xe0y \u0111\xe3 c\xf3 quiz. M\u1ed7i b\xe0i h\u1ecdc ch\u1ec9 \u0111\u01b0\u1ee3c ph\xe9p c\xf3 m\u1ed9t quiz. Vui l\xf2ng ch\u1ecdn b\xe0i h\u1ecdc kh\xe1c ho\u1eb7c ch\u1ec9nh s\u1eeda quiz hi\u1ec7n c\xf3."):alert(e))}let r=null;if(n.data&&(r=n.data.id||n.data.quizId),!r)return console.error("No quiz ID returned. Full response:",n),void alert("Quiz was created but no ID was returned. Cannot proceed with adding questions.");console.log("Successfully created quiz with ID:",r);for(const[e,i]of o.questions.entries()){const t={quizId:r,content:i.questionText,questionType:i.questionType,questionOrder:e+1,answers:i.answers.map((e=>({answerText:e.answerText,isCorrect:e.isCorrect})))};console.log("Creating question ".concat(e+1,":"),t);const n=await Ha.createQuestion(t);if(!n||!n.success){const e=(null===n||void 0===n?void 0:n.error)||(null===n||void 0===n?void 0:n.data)&&n.data.message||"Failed to create question: "+i.questionText;throw console.error("Question creation failed:",e,n),alert(e),new Error(e)}console.log("Successfully created question ".concat(e+1))}console.log("Successfully created quiz with all questions"),alert("Quiz \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o th\xe0nh c\xf4ng!")}await r()}catch(u){var c,l,d;console.error("Error saving quiz:",u,null===u||void 0===u?void 0:u.response,null===u||void 0===u?void 0:u.data),alert("Failed to save quiz. "+((null===u||void 0===u?void 0:u.message)||(null===u||void 0===u||null===(c=u.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.message)||(null===u||void 0===u||null===(d=u.data)||void 0===d?void 0:d.message)||"See console for details."))}finally{f(!1)}}else alert("B\u1ea1n ch\u01b0a \u0111\u0103ng nh\u1eadp. Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 ti\u1ebfp t\u1ee5c.")},disabled:p,startIcon:p?(0,Tt.jsx)(Ph,{size:16}):(0,Tt.jsx)(iB,{}),children:m?"C\u1eadp Nh\u1eadt Quiz":"L\u01b0u Quiz"})]}),(0,Tt.jsxs)(ZS,{open:s,onClose:()=>c(!1),maxWidth:"md",fullWidth:!0,children:[(0,Tt.jsx)(rC,{children:d?"Edit Question":"Add New Question"}),(0,Tt.jsx)(sC,{children:(0,Tt.jsxs)(oA,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[(0,Tt.jsx)(Hb,{label:"Question Text",fullWidth:!0,multiline:!0,rows:3,value:A.questionText,onChange:e=>h(l(l({},A),{},{questionText:e.target.value}))}),(0,Tt.jsxs)(pm,{container:!0,spacing:2,children:[(0,Tt.jsx)(pm,{size:{xs:8},children:(0,Tt.jsxs)(Gv,{fullWidth:!0,children:[(0,Tt.jsx)(jv,{children:"Question Type"}),(0,Tt.jsxs)(Ub,{value:A.questionType,label:"Question Type",onChange:e=>(e=>{let t=[];switch(e){case"multiple_choice":t=[{answerText:"",isCorrect:!1,orderIndex:1},{answerText:"",isCorrect:!1,orderIndex:2},{answerText:"",isCorrect:!1,orderIndex:3},{answerText:"",isCorrect:!1,orderIndex:4}];break;case"true_false":t=[{answerText:"True",isCorrect:!1,orderIndex:1},{answerText:"False",isCorrect:!1,orderIndex:2}];break;case"short_answer":t=[{answerText:"",isCorrect:!0,orderIndex:1}];break;default:t=[]}h(l(l({},A),{},{questionType:e,answers:t}))})(e.target.value),children:[(0,Tt.jsx)(MP,{value:"multiple_choice",children:"Multiple Choice"}),(0,Tt.jsx)(MP,{value:"true_false",children:"True/False"}),(0,Tt.jsx)(MP,{value:"short_answer",children:"Short Answer"})]})]})}),(0,Tt.jsx)(pm,{size:{xs:4},children:(0,Tt.jsx)(Hb,{label:"Points",type:"number",fullWidth:!0,value:A.points,onChange:e=>h(l(l({},A),{},{points:parseInt(e.target.value)})),inputProps:{min:1}})})]}),"short_answer"!==A.questionType&&(0,Tt.jsxs)(oA,{children:[(0,Tt.jsxs)(oA,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,Tt.jsx)(kp,{variant:"h6",children:"Answer Options"}),"multiple_choice"===A.questionType&&(0,Tt.jsx)(Gh,{size:"small",startIcon:(0,Tt.jsx)(QP,{}),onClick:()=>{const e={answerText:"",isCorrect:!1,orderIndex:A.answers.length+1};h(l(l({},A),{},{answers:[...A.answers,e]}))},children:"Add Option"})]}),A.answers.map(((e,t)=>(0,Tt.jsxs)(oA,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,Tt.jsx)(mB,{checked:e.isCorrect,onChange:e=>y(t,"isCorrect",e.target.checked),color:"success"}),(0,Tt.jsx)(Hb,{fullWidth:!0,label:"Option ".concat(t+1),value:e.answerText,onChange:e=>y(t,"answerText",e.target.value),disabled:"true_false"===A.questionType}),"multiple_choice"===A.questionType&&A.answers.length>2&&(0,Tt.jsx)(Em,{onClick:()=>(e=>{const t=A.answers.filter(((t,n)=>n!==e)),n=t.map(((e,t)=>l(l({},e),{},{orderIndex:t+1})));h(l(l({},A),{},{answers:n}))})(t),color:"error",children:(0,Tt.jsx)(GP,{})})]},t))),(0,Tt.jsx)(uE,{severity:"info",sx:{mt:2},children:"multiple_choice"===A.questionType?"Check the box next to the correct answer(s)":"Select True or False as the correct answer"})]}),"short_answer"===A.questionType&&(0,Tt.jsx)(uE,{severity:"info",children:"Short answer questions will need to be graded manually by instructors."})]})}),(0,Tt.jsxs)(uC,{children:[(0,Tt.jsx)(Gh,{onClick:()=>c(!1),children:"Cancel"}),(0,Tt.jsxs)(Gh,{onClick:()=>{if(!A.questionText.trim())return void alert("Please enter a question text");if("short_answer"!==A.questionType){if(!A.answers.some((e=>e.isCorrect)))return void alert("Please mark at least one answer as correct")}if(A.answers.some((e=>!e.answerText.trim())))return void alert("Please fill in all answer options");let e=[...o.questions];null!==d&&"number"===typeof d.index?e[d.index]=l({},A):e.push(l({},A)),a(l(l({},o),{},{questions:e})),c(!1)},variant:"contained",children:[d?"Update":"Add"," Question"]})]})]})]})},EB=CA(fp)((e=>{let{theme:t}=e;return{borderRadius:16,overflow:"hidden",background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)",border:"1px solid ".concat(qi(t.palette.primary.main,.12)),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative","&:hover":{transform:"translateY(-2px)",boxShadow:"0 12px 24px rgba(0,0,0,0.1)",borderColor:t.palette.primary.main},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:3,background:"linear-gradient(90deg, ".concat(t.palette.primary.main,", ").concat(t.palette.secondary.main,")")}}})),wB=CA(T_)((e=>{let{theme:t}=e;return{marginBottom:t.spacing(2),borderRadius:12,overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"1px solid ".concat(qi(t.palette.primary.main,.08)),"&:before":{display:"none"},"&.Mui-expanded":{margin:"".concat(t.spacing(2)," 0"),boxShadow:"0 8px 24px rgba(0,0,0,0.12)"}}})),_B=CA(oA)((e=>{let{theme:t}=e;return{background:"linear-gradient(135deg, ".concat(t.palette.primary.main," 0%, ").concat(t.palette.primary.dark," 50%, ").concat(t.palette.secondary.main," 100%)"),color:"white",padding:t.spacing(4,0),marginBottom:t.spacing(4),borderRadius:"0 0 24px 24px",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.1"%3E%3Ccircle cx="36" cy="24" r="5"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")',opacity:.3}}})),SB=CA(Gh)((e=>{let{theme:t}=e;return{borderRadius:8,textTransform:"none",fontWeight:600,padding:t.spacing(1,2),boxShadow:"0 2px 8px rgba(0,0,0,0.1)","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}}})),CB=()=>{var e,n,r,i,o,a,s,c;const{courseId:d}=pe(),u=he(),[A,h]=(0,t.useState)(null),[p,f]=(0,t.useState)([]),[m,g]=(0,t.useState)(!0),[v,y]=(0,t.useState)(""),[b,E]=(0,t.useState)(null),[w,_]=(0,t.useState)(!1),[S,C]=(0,t.useState)(!1),[T,I]=(0,t.useState)(null),[R,x]=(0,t.useState)({title:"",description:"",orderIndex:1}),[N,O]=(0,t.useState)({title:"",description:"",content:"",videoUrl:"",orderIndex:1,estimatedDuration:10,chapterId:"",lessonType:"Text",additionalResources:"",passingScore:100}),[k,P]=(0,t.useState)(!1),[B,L]=(0,t.useState)({}),[D,U]=(0,t.useState)(!1),[M,F]=(0,t.useState)(null),[j,Q]=(0,t.useState)(null);(0,t.useEffect)((()=>{V()}),[d]),(0,t.useEffect)((()=>{p.length>0&&(async()=>{const e={};for(const t of p){const n=t.chapterId||t.id;if(n)try{const t=await Ha.authenticatedRequest("/api/Lesson/chapter/".concat(n));if(t.success){const r=await Promise.all(t.data.map((async e=>{const t=await Ha.getQuizzesByLesson(e.lessonId||e.id);let r=t.success?t.data:[];r=r.map((e=>l(l({},e),{},{id:e.id||e.quizId,questions:e.questions||[]})));const i=l(l({},e),{},{quizzes:r});return console.log("DEBUG: lessonWithQuizzes for chapter",n,i),i})));console.log("DEBUG: lessonsWithQuizzes for chapter",n,r),e[n]=r}else e[n]=[]}catch(rI){e[n]=[]}}console.log("DEBUG: Setting chapterLessons",JSON.stringify(e,null,2)),L(e)})()}),[p]);const V=async()=>{try{g(!0),y("");const e=await Ha.getCourseById(d);e.success&&h(e.data);const t=await Ha.getChapters();if(t.success){const e=t.data.filter((e=>e.courseId===d)).sort(((e,t)=>e.orderIndex-t.orderIndex));f(e)}}catch(rI){console.error("Error loading course data:",rI),y("Failed to load course data. Please try again.")}finally{g(!1)}},H=()=>{I(null),x({title:"",description:"",orderIndex:p.length+1}),_(!0)},z=()=>Object.values(B).some((e=>e.some((e=>e.quizzes&&e.quizzes.length>0)))),K=()=>{for(const e of Object.values(B))for(const t of e)if(t.quizzes&&t.quizzes.length>0)return t.quizzes[0];return null},G=()=>Object.values(B).some((e=>e.length>0)),W=()=>{for(const e of Object.values(B))if(e.length>0)return e[0];return null},q=e=>(B[e]||[]).length>0;return m?(0,Tt.jsx)(oA,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:(0,Tt.jsx)(Ph,{size:60})}):A?(0,Tt.jsxs)(oA,{sx:{minHeight:"100vh",bgcolor:"#f8fafc"},children:[(0,Tt.jsx)(_B,{children:(0,Tt.jsx)(Bg,{children:(0,Tt.jsxs)(pm,{container:!0,spacing:4,alignItems:"center",children:[(0,Tt.jsxs)(pm,{item:!0,xs:12,md:8,children:[(0,Tt.jsxs)(K_,{separator:"/",sx:{mb:2,"& .MuiBreadcrumbs-separator":{color:"rgba(255,255,255,0.7)"},"& .MuiLink-root":{color:"rgba(255,255,255,0.9)"},"& .MuiTypography-root":{color:"white"}},children:[(0,Tt.jsx)($_,{component:"button",variant:"body1",onClick:()=>u("/admin/courses"),sx:{textDecoration:"none",color:"rgba(255,255,255,0.9)","&:hover":{color:"white"}},children:"Qu\u1ea3n l\xfd kh\xf3a h\u1ecdc"}),(0,Tt.jsx)(kp,{color:"white",sx:{fontWeight:500},children:"Qu\u1ea3n l\xfd n\u1ed9i dung"})]}),(0,Tt.jsx)(kp,{variant:"h3",component:"h1",sx:{fontWeight:700,mb:1,color:"white",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:A.title}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,sx:{mb:2},children:[(0,Tt.jsx)(Nm,{label:ZE(A.courseType),sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontWeight:500}}),(0,Tt.jsx)(Nm,{label:$E(A.ageGroup),sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontWeight:500}}),(0,Tt.jsx)(Nm,{label:A.isPublished?"\u0110\xe3 xu\u1ea5t b\u1ea3n":"B\u1ea3n nh\xe1p",sx:{bgcolor:A.isPublished?"rgba(76,175,80,0.8)":"rgba(255,193,7,0.8)",color:"white",fontWeight:500}})]}),(0,Tt.jsx)(kp,{variant:"h6",sx:{opacity:.9,color:"white",maxWidth:600,lineHeight:1.5},children:A.description})]}),(0,Tt.jsx)(pm,{item:!0,xs:12,md:4,children:(0,Tt.jsx)(oA,{sx:{textAlign:{xs:"left",md:"right"}},children:(0,Tt.jsxs)(Vm,{direction:{xs:"row",md:"column"},spacing:2,children:[(0,Tt.jsx)(SB,{variant:"outlined",startIcon:(0,Tt.jsx)(rB,{}),onClick:()=>u("/admin/courses"),sx:{borderColor:"rgba(255,255,255,0.5)",color:"white","&:hover":{borderColor:"white",bgcolor:"rgba(255,255,255,0.1)"}},children:"Quay l\u1ea1i kh\xf3a h\u1ecdc"}),(0,Tt.jsx)(SB,{variant:"contained",startIcon:(0,Tt.jsx)(jE,{}),onClick:()=>u("/education/courses/".concat(d)),sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},children:"Xem kh\xf3a h\u1ecdc"}),!A.isPublished&&(0,Tt.jsx)(SB,{variant:"contained",startIcon:(0,Tt.jsx)(KP,{}),onClick:async()=>{try{P(!0);const e=await HE.publishCourse(d);e.success?(h((e=>l(l({},e),{},{isPublished:!0}))),alert("Kh\xf3a h\u1ecdc \u0111\xe3 \u0111\u01b0\u1ee3c xu\u1ea5t b\u1ea3n th\xe0nh c\xf4ng!")):alert(e.error||"Kh\xf4ng th\u1ec3 xu\u1ea5t b\u1ea3n kh\xf3a h\u1ecdc")}catch(v){console.error("Error publishing course:",v),alert("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi xu\u1ea5t b\u1ea3n kh\xf3a h\u1ecdc")}finally{P(!1)}},sx:{bgcolor:"success.main",color:"white","&:hover":{bgcolor:"success.dark"}},children:"Xu\u1ea5t b\u1ea3n kh\xf3a h\u1ecdc"}),z()&&G()&&(0,Tt.jsx)(SB,{variant:"contained",startIcon:(0,Tt.jsx)(EC,{}),onClick:async()=>{try{P(!0);const e=await fetch("".concat(Ma.BASE_URL,"/api/CourseEnrolledment/complete/").concat(d),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))},body:JSON.stringify(d)});if(e.ok)alert("\ud83c\udf89 Ch\xfac m\u1eebng! B\u1ea1n \u0111\xe3 ho\xe0n th\xe0nh kh\xf3a h\u1ecdc!"),u("/education/courses");else{const t=await e.json();alert("Kh\xf4ng th\u1ec3 ho\xe0n th\xe0nh kh\xf3a h\u1ecdc: ".concat(t.message||"Unknown error"))}}catch(v){console.error("Error completing course:",v),alert("L\u1ed7i khi ho\xe0n th\xe0nh kh\xf3a h\u1ecdc: ".concat(v.message))}finally{P(!1)}},disabled:k,sx:{bgcolor:"purple",color:"white","&:hover":{bgcolor:"darkpurple"}},children:"Ho\xe0n th\xe0nh kh\xf3a h\u1ecdc"})]})})})]})})}),(0,Tt.jsxs)(Bg,{maxWidth:"xl",sx:{pb:4},children:[v&&(0,Tt.jsx)(uE,{severity:"error",sx:{mb:3,borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},onClose:()=>y(""),children:v}),(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(up,{sx:{p:3,mb:4,borderRadius:3,background:"white",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid ".concat(qi("#1976d2",.1))},children:(0,Tt.jsxs)(oA,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"h5",sx:{fontWeight:700,mb:.5},children:"N\u1ed9i dung kh\xf3a h\u1ecdc"}),(0,Tt.jsxs)(kp,{variant:"body2",color:"text.secondary",children:[p.length," ch\u01b0\u01a1ng \u2022"," ",Object.values(B).reduce(((e,t)=>e+t.length),0)," ","b\xe0i h\u1ecdc",z()&&(0,Tt.jsxs)(Tt.Fragment,{children:[" \u2022 1 b\xe0i ki\u1ec3m tra (",(null===(e=K())||void 0===e||null===(n=e.questions)||void 0===n?void 0:n.length)||0," c\xe2u h\u1ecfi)"]})]})]}),(0,Tt.jsxs)(oA,{sx:{display:"flex",gap:2},children:[(0,Tt.jsx)(SB,{variant:"contained",startIcon:(0,Tt.jsx)(QP,{}),onClick:H,sx:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white"},children:"Th\xeam ch\u01b0\u01a1ng"}),(0,Tt.jsx)(SB,{variant:"contained",startIcon:z()?(0,Tt.jsx)(CC,{}):(0,Tt.jsx)(QP,{}),onClick:()=>{if(z()){const e=K(),t=W();t&&(F(t.lessonId||t.id),Q(e),U(!0))}else{const e=W();if(!e)return void alert("Vui l\xf2ng t\u1ea1o \xedt nh\u1ea5t m\u1ed9t b\xe0i h\u1ecdc tr\u01b0\u1edbc khi t\u1ea1o quiz");F(e.lessonId||e.id),Q(null),U(!0)}},disabled:!G(),sx:{background:G()?z()?"linear-gradient(135deg, #ff9800 0%, #f57c00 100%)":"linear-gradient(135deg, #4caf50 0%, #388e3c 100%)":"grey.300",color:"white"},children:G()?z()?"Ch\u1ec9nh s\u1eeda Quiz":"T\u1ea1o Quiz":"C\u1ea7n c\xf3 b\xe0i h\u1ecdc"})]})]})}),z()&&(0,Tt.jsx)(up,{sx:{p:3,mb:4,borderRadius:3,background:"linear-gradient(145deg, #f0f8ff 0%, #e6f3ff 100%)",border:"1px solid",borderColor:"primary.main",boxShadow:"0 4px 20px rgba(25, 118, 210, 0.1)"},children:(0,Tt.jsxs)(oA,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Tt.jsxs)(oA,{children:[(0,Tt.jsxs)(kp,{variant:"h6",sx:{fontWeight:600,mb:1,color:"primary.main"},children:["\ud83d\udcdd ",null===(r=K())||void 0===r?void 0:r.title]}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:2},children:null===(i=K())||void 0===i?void 0:i.description}),(0,Tt.jsxs)(oA,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[(0,Tt.jsxs)(kp,{variant:"caption",sx:{bgcolor:"primary.main",color:"white",px:1.5,py:.5,borderRadius:1,fontWeight:600},children:[(null===(o=K())||void 0===o||null===(a=o.questions)||void 0===a?void 0:a.length)||0," c\xe2u h\u1ecfi"]}),(0,Tt.jsxs)(kp,{variant:"caption",sx:{bgcolor:"success.main",color:"white",px:1.5,py:.5,borderRadius:1,fontWeight:600},children:["\u0110i\u1ec3m \u0111\u1ea1t: ",(null===(s=K())||void 0===s?void 0:s.passingScore)||0,"%"]}),(0,Tt.jsxs)(kp,{variant:"caption",sx:{bgcolor:"warning.main",color:"white",px:1.5,py:.5,borderRadius:1,fontWeight:600},children:["Th\u1eddi gian:"," ",(null===(c=K())||void 0===c?void 0:c.timeLimitMinutes)||0," ph\xfat"]})]})]}),(0,Tt.jsx)(SB,{variant:"outlined",startIcon:(0,Tt.jsx)(CC,{}),onClick:()=>{const e=K(),t=W();t&&(F(t.lessonId||t.id),Q(e),U(!0))},sx:{borderColor:"primary.main",color:"primary.main","&:hover":{backgroundColor:"primary.main",color:"white"}},children:"Xem chi ti\u1ebft"})]})}),0===p.length?(0,Tt.jsxs)(up,{sx:{p:4,textAlign:"center"},children:[(0,Tt.jsx)(BE,{sx:{fontSize:64,color:"grey.400",mb:2}}),(0,Tt.jsx)(kp,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Ch\u01b0a t\xecm th\u1ea5y ch\u01b0\u01a1ng n\xe0o"}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"H\xe3y b\u1eaft \u0111\u1ea7u x\xe2y d\u1ef1ng kh\xf3a h\u1ecdc c\u1ee7a b\u1ea1n b\u1eb1ng c\xe1ch th\xeam ch\u01b0\u01a1ng \u0111\u1ea7u ti\xean"}),(0,Tt.jsx)(Gh,{variant:"contained",startIcon:(0,Tt.jsx)(QP,{}),onClick:H,children:"Th\xeam ch\u01b0\u01a1ng"})]}):(0,Tt.jsx)(oA,{children:p.map((e=>{const t=e.chapterId||e.id,n=B[t]||[];return console.log("DEBUG: Chapter object in renderChapterAccordion:",e),console.log("DEBUG: Chapter properties:",Object.keys(e)),console.log("DEBUG: Using chapterId:",t),console.log("DEBUG: UI lessons for chapter",t,n),(0,Tt.jsxs)(wB,{expanded:b===t,onChange:()=>E(b===t?null:t),children:[(0,Tt.jsx)(RS,{expandIcon:(0,Tt.jsx)(_C,{}),children:(0,Tt.jsxs)(oA,{sx:{display:"flex",alignItems:"center",width:"100%",gap:2},children:[(0,Tt.jsxs)(oA,{sx:{display:"flex",alignItems:"center",gap:1,cursor:"grab","&:active":{cursor:"grabbing"}},children:[(0,Tt.jsx)(tB,{color:"action"}),(0,Tt.jsx)(BE,{color:"primary"})]}),(0,Tt.jsxs)(oA,{sx:{flex:1},children:[(0,Tt.jsxs)(kp,{variant:"h6",sx:{fontWeight:600},children:["Ch\u01b0\u01a1ng ",e.orderIndex,": ",e.title,(0,Tt.jsx)(kp,{variant:"caption",color:"text.secondary",sx:{ml:2},component:"span"})]}),(0,Tt.jsxs)(kp,{variant:"body2",color:"text.secondary",children:[n.length||0," b\xe0i h\u1ecdc"]})]})]})}),(0,Tt.jsxs)(kS,{children:[(0,Tt.jsxs)(oA,{sx:{display:"flex",gap:1,mb:2,justifyContent:"flex-end"},children:[(0,Tt.jsx)(SB,{size:"small",variant:"outlined",startIcon:(0,Tt.jsx)(FP,{}),onClick:()=>(e=>{I(e),x({title:e.title,description:e.description,orderIndex:e.orderIndex}),_(!0)})(e),sx:{minWidth:"auto",px:1},children:"S\u1eeda"}),(0,Tt.jsx)(SB,{size:"small",variant:"outlined",color:"error",startIcon:(0,Tt.jsx)(GP,{}),onClick:()=>(async e=>{if(window.confirm('B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a "'.concat(e.title,'"?')))try{P(!0),console.log("Deleting chapter:",e),console.log("Chapter ID candidates:",{chapterId:e.chapterId,id:e.id,using:e.chapterId||e.id});const t=e.chapterId||e.id;if(!t)return y("Kh\xf4ng t\xecm th\u1ea5y ID c\u1ee7a ch\u01b0\u01a1ng \u0111\u1ec3 x\xf3a"),void P(!1);const n=await Ha.deleteChapter(t);n.success?(V(),alert("\u2705 Ch\u01b0\u01a1ng \u0111\xe3 \u0111\u01b0\u1ee3c x\xf3a th\xe0nh c\xf4ng!")):y(n.error||"Failed to delete chapter")}catch(rI){console.error("Error deleting chapter:",rI),y("Failed to delete chapter. Please try again.")}finally{P(!1)}})(e),sx:{minWidth:"auto",px:1},children:"X\xf3a"})]}),(0,Tt.jsx)(pm,{container:!0,spacing:3,children:(0,Tt.jsx)(pm,{size:{xs:12},children:(0,Tt.jsx)(fp,{variant:"outlined",children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsxs)(oA,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,Tt.jsxs)(kp,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Tt.jsx)(nB,{}),"B\xe0i h\u1ecdc"]}),(0,Tt.jsx)(SB,{size:"small",variant:"contained",startIcon:(0,Tt.jsx)(QP,{}),onClick:()=>(e=>{e?q(e)?alert("Ch\u01b0\u01a1ng n\xe0y \u0111\xe3 c\xf3 m\u1ed9t b\xe0i h\u1ecdc. M\u1ed7i ch\u01b0\u01a1ng ch\u1ec9 \u0111\u01b0\u1ee3c ph\xe9p c\xf3 m\u1ed9t b\xe0i h\u1ecdc."):(I(null),O({title:"",description:"",content:"",videoUrl:"",orderIndex:1,estimatedDuration:10,chapterId:e,lessonType:"Text",additionalResources:"",passingScore:100}),C(!0)):alert("Kh\xf4ng c\xf3 ch\u01b0\u01a1ng n\xe0o \u0111\u01b0\u1ee3c ch\u1ecdn ho\u1eb7c ch\u01b0\u01a1ng ch\u01b0a \u0111\u01b0\u1ee3c t\u1ea3i.")})(t),disabled:q(t),sx:{background:q(t)?"grey.300":"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white"},children:q(t)?"\u0110\xe3 c\xf3 b\xe0i h\u1ecdc":"Th\xeam b\xe0i h\u1ecdc"})]}),n.length>0?(0,Tt.jsx)(iy,{dense:!0,children:n.sort(((e,t)=>e.orderIndex-t.orderIndex)).map((e=>(console.log("Lesson object:",e),(0,Tt.jsx)(EB,{sx:{mb:2},children:(0,Tt.jsx)(Bm,{children:(0,Tt.jsxs)(oA,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,Tt.jsxs)(oA,{sx:{flex:1},children:[(0,Tt.jsx)(kp,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:e.title}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:1},children:e.description}),(0,Tt.jsxs)(kp,{variant:"caption",color:"text.secondary",children:[e.estimatedDuration||10," ","ph\xfat \u2022"," ",e.lessonType||"Text"]})]}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,children:[(0,Tt.jsx)(SB,{size:"small",variant:"outlined",startIcon:(0,Tt.jsx)(FP,{}),onClick:()=>(e=>{I(e),O({title:e.title,description:e.description||"",content:e.content,videoUrl:e.videoUrl||"",orderIndex:e.orderIndex,estimatedDuration:e.estimatedDuration||10,chapterId:e.chapterId,lessonType:e.lessonType||"Text",additionalResources:e.additionalResources||"",passingScore:e.passingScore||100}),C(!0)})(e),sx:{minWidth:"auto"},children:"S\u1eeda"}),(0,Tt.jsx)(SB,{size:"small",variant:"outlined",color:"error",startIcon:(0,Tt.jsx)(GP,{}),onClick:()=>(async e=>{if(z()){if(!window.confirm('\u26a0\ufe0f C\u1ea2NH B\xc1O: Kh\xf3a h\u1ecdc n\xe0y c\xf3 ch\u1ee9a quiz. \n        \nVi\u1ec7c x\xf3a b\xe0i h\u1ecdc c\xf3 th\u1ec3 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn quiz.\n        \nB\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a b\xe0i h\u1ecdc "'.concat(e.title,'"?')))return}else if(!window.confirm('B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a b\xe0i h\u1ecdc "'.concat(e.title,'"?')))return;try{P(!0),console.log("Deleting lesson:",e.lessonId||e.id);const t=await Ha.deleteLesson(e.lessonId||e.id);if(t.success||t.isSuccess)V(),alert("\u2705 B\xe0i h\u1ecdc \u0111\xe3 \u0111\u01b0\u1ee3c x\xf3a th\xe0nh c\xf4ng!");else{const e=t.error||t.message||"Failed to delete lesson";console.error("Delete lesson failed:",t),y("Kh\xf4ng th\u1ec3 x\xf3a b\xe0i h\u1ecdc: ".concat(e))}}catch(rI){console.error("Error deleting lesson:",rI),rI.message.includes("401")||rI.message.includes("Unauthorized")?y("Phi\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 h\u1ebft h\u1ea1n. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i."):rI.message.includes("404")?y("B\xe0i h\u1ecdc kh\xf4ng t\u1ed3n t\u1ea1i ho\u1eb7c \u0111\xe3 \u0111\u01b0\u1ee3c x\xf3a."):y("Kh\xf4ng th\u1ec3 x\xf3a b\xe0i h\u1ecdc: ".concat(rI.message))}finally{P(!1)}})(e),disabled:k,sx:{minWidth:"auto",borderColor:"error.main","&:hover":{backgroundColor:"error.main",color:"white"}},children:"X\xf3a"})]})]})})},e.lessonId||e.id))))}):(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",textAlign:"center",py:2,children:"Ch\u01b0a c\xf3 b\xe0i h\u1ecdc n\xe0o. H\xe3y b\u1eaft \u0111\u1ea7u b\u1eb1ng c\xe1ch th\xeam m\u1ed9t b\xe0i h\u1ecdc."})]})})})})]})]},t)}))})]}),(0,Tt.jsxs)(ZS,{open:w,onClose:()=>_(!1),maxWidth:"md",fullWidth:!0,children:[(0,Tt.jsx)(rC,{children:T?"Ch\u1ec9nh s\u1eeda ch\u01b0\u01a1ng":"T\u1ea1o ch\u01b0\u01a1ng m\u1edbi"}),(0,Tt.jsx)(sC,{children:(0,Tt.jsxs)(oA,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[(0,Tt.jsx)(Hb,{label:"Ti\xeau \u0111\u1ec1 ch\u01b0\u01a1ng",fullWidth:!0,value:R.title,onChange:e=>x(l(l({},R),{},{title:e.target.value}))}),(0,Tt.jsx)(Hb,{label:"M\xf4 t\u1ea3",fullWidth:!0,multiline:!0,rows:3,value:R.description,onChange:e=>x(l(l({},R),{},{description:e.target.value}))}),(0,Tt.jsx)(Hb,{label:"Th\u1ee9 t\u1ef1",type:"number",value:R.orderIndex,onChange:e=>x(l(l({},R),{},{orderIndex:parseInt(e.target.value)})),inputProps:{min:1}})]})}),(0,Tt.jsxs)(uC,{children:[(0,Tt.jsx)(Gh,{onClick:()=>_(!1),children:"H\u1ee7y"}),(0,Tt.jsxs)(Gh,{onClick:async()=>{try{P(!0);const e=Number(R.orderIndex)>0?Number(R.orderIndex):1,t={courseId:d,title:R.title,description:R.description,chapterOrder:e};let n;T?(console.log("DEBUG editingItem:",T),n=await Ha.updateChapter(T.chapterId||T.id,t)):n=await Ha.createChapter(t),n.success?(_(!1),V()):y(n.error||"Failed to save chapter")}catch(rI){console.error("Error saving chapter:",rI),y("Failed to save chapter. Please try again.")}finally{P(!1)}},variant:"contained",disabled:k,startIcon:k?(0,Tt.jsx)(Ph,{size:16}):(0,Tt.jsx)(iB,{}),children:[T?"C\u1eadp nh\u1eadt":"T\u1ea1o"," ch\u01b0\u01a1ng"]})]})]}),(0,Tt.jsxs)(ZS,{open:S,onClose:()=>C(!1),maxWidth:"lg",fullWidth:!0,children:[(0,Tt.jsx)(rC,{children:T?"Ch\u1ec9nh s\u1eeda b\xe0i h\u1ecdc":"T\u1ea1o b\xe0i h\u1ecdc m\u1edbi"}),(0,Tt.jsx)(sC,{children:(0,Tt.jsxs)(oA,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[(0,Tt.jsx)(Hb,{label:"Ti\xeau \u0111\u1ec1 b\xe0i h\u1ecdc",fullWidth:!0,value:N.title,onChange:e=>O(l(l({},N),{},{title:e.target.value}))}),(0,Tt.jsx)(Hb,{label:"M\xf4 t\u1ea3",fullWidth:!0,multiline:!0,rows:2,value:N.description,onChange:e=>O(l(l({},N),{},{description:e.target.value}))}),(0,Tt.jsx)(Hb,{label:"N\u1ed9i dung",fullWidth:!0,multiline:!0,rows:8,value:N.content,onChange:e=>O(l(l({},N),{},{content:e.target.value})),placeholder:"Nh\u1eadp n\u1ed9i dung b\xe0i h\u1ecdc, h\u01b0\u1edbng d\u1eabn ho\u1eb7c ph\u01b0\u01a1ng ti\u1ec7n \u0111\xe3 l\u01b0u tr\u1eef..."}),(0,Tt.jsx)(Hb,{label:"URL video",fullWidth:!0,value:N.videoUrl,onChange:e=>O(l(l({},N),{},{videoUrl:e.target.value}))}),(0,Tt.jsxs)(pm,{container:!0,spacing:2,children:[(0,Tt.jsx)(pm,{size:{xs:6},children:(0,Tt.jsx)(Hb,{label:"Th\u1ee9 t\u1ef1",type:"number",fullWidth:!0,value:N.orderIndex,onChange:e=>O(l(l({},N),{},{orderIndex:parseInt(e.target.value)})),inputProps:{min:1}})}),(0,Tt.jsx)(pm,{size:{xs:6},children:(0,Tt.jsx)(Hb,{label:"Th\u1eddi gian \u01b0\u1edbc t\xednh (ph\xfat)",type:"number",fullWidth:!0,value:N.estimatedDuration,onChange:e=>O(l(l({},N),{},{estimatedDuration:parseInt(e.target.value)})),inputProps:{min:1}})})]}),(0,Tt.jsx)(Hb,{label:"Lo\u1ea1i b\xe0i h\u1ecdc",fullWidth:!0,value:N.lessonType,onChange:e=>O(l(l({},N),{},{lessonType:e.target.value}))}),(0,Tt.jsx)(Hb,{label:"T\xe0i li\u1ec7u th\xeam",fullWidth:!0,value:N.additionalResources,onChange:e=>O(l(l({},N),{},{additionalResources:e.target.value}))}),(0,Tt.jsx)(Hb,{label:"\u0110i\u1ec3m s\u1ed1 \u0111\u1ea1t \u0111\u01b0\u1ee3c",type:"number",fullWidth:!0,value:N.passingScore,onChange:e=>O(l(l({},N),{},{passingScore:parseInt(e.target.value)})),inputProps:{min:0,max:100}})]})}),(0,Tt.jsxs)(uC,{children:[(0,Tt.jsx)(Gh,{onClick:()=>C(!1),children:"H\u1ee7y"}),(0,Tt.jsxs)(Gh,{onClick:async()=>{try{P(!0),console.log("DEBUG lessonForm at submit:",N);const e=N.chapterId;if(!e||"string"!==typeof e||e.length<8)return y("Kh\xf4ng c\xf3 ch\u01b0\u01a1ng h\u1ee3p l\u1ec7 n\xe0o \u0111\u01b0\u1ee3c ch\u1ecdn. Vui l\xf2ng ch\u1ecdn m\u1ed9t ch\u01b0\u01a1ng."),void P(!1);if(!N.title||!N.description||!N.content)return y("Ti\xeau \u0111\u1ec1, m\xf4 t\u1ea3 v\xe0 n\u1ed9i dung l\xe0 b\u1eaft bu\u1ed9c."),void P(!1);const t=Math.max(1,Math.min(N.orderIndex||1,100)),n=Math.max(1,N.estimatedDuration||10),r={chapterId:e,title:N.title,description:N.description,content:N.content,videoUrl:N.videoUrl||"",lessonOrder:t,isCompleted:!1,duration:n,lessonType:N.lessonType||"Text",isPublished:!0,additionalResources:N.additionalResources||"",passingScore:N.passingScore||100};let i;console.log("Lesson data being sent:",r),console.log("DEBUG chapterId being sent:",e),console.log("DEBUG duration in seconds:",n),i=T?await Ha.updateLesson(T.lessonId||T.id,r):await Ha.createLesson(r),i.success?(C(!1),V()):y(i.error||"Failed to save lesson")}catch(rI){console.error("Error saving lesson:",rI),y("Failed to save lesson. Please try again.")}finally{P(!1)}},variant:"contained",disabled:k,startIcon:k?(0,Tt.jsx)(Ph,{size:16}):(0,Tt.jsx)(iB,{}),children:[T?"C\u1eadp nh\u1eadt":"T\u1ea1o"," b\xe0i h\u1ecdc"]})]})]}),(0,Tt.jsxs)(ZS,{open:D,onClose:()=>U(!1),maxWidth:"md",fullWidth:!0,children:[(0,Tt.jsx)(rC,{children:j?"Ch\u1ec9nh S\u1eeda Quiz":"T\u1ea1o Quiz M\u1edbi"}),(0,Tt.jsx)(sC,{children:(0,Tt.jsx)(bB,{quiz:j?l(l({},j),{},{lessonId:M}):{lessonId:M},onSave:async()=>{U(!1),await(async e=>{let t=null,n=null,r=null;for(const[a,s]of Object.entries(B)){const i=s.findIndex((t=>t.lessonId===e||t.id===e));if(-1!==i){t=a,n=i,r=[...s];break}}if(!t||null===n)return;const i=await Ha.getQuizzesByLesson(e);let o=i.success?i.data:[];o=o.map((e=>l(l({},e),{},{id:e.id||e.quizId,questions:e.questions||[]}))),r[n]=l(l({},r[n]),{},{quizzes:o}),L((e=>l(l({},e),{},{[t]:r})))})(M)},onCancel:()=>U(!1)})})]})]})]}):(0,Tt.jsx)(Bg,{children:(0,Tt.jsx)(uE,{severity:"error",children:"Kh\xf4ng t\xecm th\u1ea5y kh\xf3a h\u1ecdc"})})},TB=()=>{const{courseId:e}=pe(),n=he(),r=Boolean(e),[i,o]=(0,t.useState)(r),[a,s]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),[u,A]=(0,t.useState)({title:"",description:"",courseType:"BasicAwareness",ageGroup:GE.ADULTS,image:null,imageUrl:"",isPublished:!1}),[h,p]=(0,t.useState)({});(0,t.useEffect)((()=>{r&&f()}),[e,r]);const f=async()=>{try{o(!0),s("");const t=await Ha.getCourseById(e);if(t.success){const e=t.data;A({title:e.title||"",description:e.description||"",courseType:e.courseType||"BasicAwareness",ageGroup:"string"===typeof e.ageGroup?"Adults"===e.ageGroup?GE.ADULTS:"Teenagers"===e.ageGroup?GE.TEENAGERS:GE.ADULTS:e.ageGroup||GE.ADULTS,image:null,imageUrl:e.imageUrl||"",isPublished:e.isPublished||!1})}else s(t.error||"Failed to load course data")}catch(rI){console.error("Error loading course:",rI),s("Failed to load course data. Please try again.")}finally{o(!1)}};return i?(0,Tt.jsx)(oA,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:(0,Tt.jsx)(Ph,{size:60})}):(0,Tt.jsxs)(Bg,{maxWidth:"md",sx:{py:4},children:[(0,Tt.jsxs)(oA,{sx:{mb:4},children:[(0,Tt.jsxs)(K_,{sx:{mb:2},children:[(0,Tt.jsx)($_,{component:"button",variant:"body1",onClick:()=>n("/admin/courses"),sx:{textDecoration:"none"},children:"Course Management"}),(0,Tt.jsx)(kp,{color:"text.primary",children:r?"Edit Course":"Create Course"})]}),(0,Tt.jsx)(kp,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600},children:r?"Edit Course":"Create New Course"}),(0,Tt.jsx)(kp,{variant:"body1",color:"text.secondary",children:r?"Update course information and settings":"Fill in the course details to get started"})]}),a&&(0,Tt.jsx)(uE,{severity:"error",sx:{mb:3},onClose:()=>s(""),children:a}),(0,Tt.jsx)(fp,{children:(0,Tt.jsx)(Bm,{sx:{p:4},children:(0,Tt.jsxs)(pm,{container:!0,spacing:3,children:[(0,Tt.jsx)(pm,{size:{xs:12},children:(0,Tt.jsx)(Hb,{label:"Course Title",fullWidth:!0,value:u.title,onChange:e=>A(l(l({},u),{},{title:e.target.value})),error:!!h.title,helperText:h.title,placeholder:"Enter a descriptive course title"})}),(0,Tt.jsx)(pm,{size:{xs:12},children:(0,Tt.jsx)(Hb,{label:"Course Description",fullWidth:!0,multiline:!0,rows:4,value:u.description,onChange:e=>A(l(l({},u),{},{description:e.target.value})),error:!!h.description,helperText:h.description,placeholder:"Provide a detailed description of what students will learn"})}),(0,Tt.jsx)(pm,{size:{xs:12,md:6},children:(0,Tt.jsxs)(Gv,{fullWidth:!0,children:[(0,Tt.jsx)(jv,{children:"Course Type"}),(0,Tt.jsxs)(Ub,{value:u.courseType,label:"Course Type",onChange:e=>A(l(l({},u),{},{courseType:e.target.value})),children:[(0,Tt.jsx)(MP,{value:"BasicAwareness",children:"Basic Awareness"}),(0,Tt.jsx)(MP,{value:"Prevention",children:"Prevention"}),(0,Tt.jsx)(MP,{value:"Intervention",children:"Intervention"}),(0,Tt.jsx)(MP,{value:"RecoverySupport",children:"Recovery Support"}),(0,Tt.jsx)(MP,{value:"ProfessionalTraining",children:"Professional Training"}),(0,Tt.jsx)(MP,{value:"FamilyEducation",children:"Family Education"})]})]})}),(0,Tt.jsx)(pm,{size:{xs:12,md:6},children:(0,Tt.jsxs)(Gv,{fullWidth:!0,children:[(0,Tt.jsx)(jv,{children:"Target Age Group"}),(0,Tt.jsxs)(Ub,{value:u.ageGroup,label:"Target Age Group",onChange:e=>A(l(l({},u),{},{ageGroup:e.target.value})),children:[(0,Tt.jsx)(MP,{value:GE.TEENAGERS,children:"Teenagers (15-21)"}),(0,Tt.jsx)(MP,{value:GE.ADULTS,children:"Adults (22-70)"})]})]})}),(0,Tt.jsxs)(pm,{size:{xs:12},children:[(0,Tt.jsx)(kp,{variant:"subtitle1",gutterBottom:!0,children:"Course Image"}),(0,Tt.jsxs)(Vm,{spacing:2,children:[u.imageUrl&&(0,Tt.jsx)(oA,{component:"img",src:u.imageUrl,alt:"Course preview",sx:{width:"100%",maxWidth:300,height:200,objectFit:"cover",borderRadius:1,border:"1px solid",borderColor:"divider"}}),(0,Tt.jsxs)(Gh,{variant:"outlined",component:"label",sx:{alignSelf:"flex-start"},children:[u.imageUrl?"Change Image":"Upload Image",(0,Tt.jsx)("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&A(l(l({},u),{},{image:t}))}})]}),u.image&&(0,Tt.jsxs)(kp,{variant:"caption",color:"text.secondary",children:["New image selected: ",u.image.name]})]})]}),r&&(0,Tt.jsx)(pm,{size:{xs:12},children:(0,Tt.jsxs)(Gv,{fullWidth:!0,children:[(0,Tt.jsx)(jv,{children:"Publication Status"}),(0,Tt.jsxs)(Ub,{value:u.isPublished,label:"Publication Status",onChange:e=>A(l(l({},u),{},{isPublished:e.target.value})),children:[(0,Tt.jsx)(MP,{value:!1,children:"Draft (Not visible to students)"}),(0,Tt.jsx)(MP,{value:!0,children:"Published (Visible to students)"})]})]})})]})})}),(0,Tt.jsxs)(oA,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[(0,Tt.jsx)(Gh,{startIcon:(0,Tt.jsx)(rB,{}),onClick:()=>n("/admin/courses"),children:"Back to Courses"}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:2,children:[r&&(0,Tt.jsx)(Gh,{variant:"outlined",startIcon:(0,Tt.jsx)(jE,{}),onClick:()=>n("/education/courses/".concat(e)),children:"Preview Course"}),(0,Tt.jsx)(Gh,{variant:"contained",onClick:async()=>{if((()=>{const e={};return u.title.trim()||(e.title="Title is required"),u.description.trim()||(e.description="Description is required"),p(e),0===Object.keys(e).length})())try{d(!0),s("");const t=JE({Title:u.title,Description:u.description,CourseType:u.courseType,AgeGroup:u.ageGroup,Image:u.image,IsPublished:u.isPublished});let i;if(i=r?await Ha.updateCourse(e,t):await Ha.createCourse(t),i.success){const t=r?e:i.data.courseId;n("/admin/courses/".concat(t,"/content"))}else s(i.error||"Failed to save course")}catch(rI){console.error("Error saving course:",rI),s("Failed to save course. Please try again.")}finally{d(!1)}},disabled:c,startIcon:c?(0,Tt.jsx)(Ph,{size:16}):(0,Tt.jsx)(iB,{}),children:r?"Update Course":"Create Course"})]})]})]})};function IB(e){return eA("MuiSwitch",e)}const RB=tA("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),xB=["className","color","edge","size","sx","slots","slotProps"],NB=CA("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t["edge".concat(mh(n.edge))],t["size".concat(mh(n.size))]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,["& .".concat(RB.thumb)]:{width:16,height:16},["& .".concat(RB.switchBase)]:{padding:4,["&.".concat(RB.checked)]:{transform:"translateX(16px)"}}}}]}),OB=CA(Qw,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{["& .".concat(RB.input)]:t.input},"default"!==n.color&&t["color".concat(mh(n.color))]]}})(IA((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat(RB.checked)]:{transform:"translateX(20px)"},["&.".concat(RB.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat(RB.checked," + .").concat(RB.track)]:{opacity:.5},["&.".concat(RB.disabled," + .").concat(RB.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat(RB.input)]:{left:"-100%",width:"300%"}}})),IA((e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(gh(["light"])).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(RB.checked)]:{color:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):qi(t.palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(RB.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(n,"DisabledColor")]:"".concat("light"===t.palette.mode?Zi(t.palette[n].main,.62):Xi(t.palette[n].main,.55))}},["&.".concat(RB.checked," + .").concat(RB.track)]:{backgroundColor:(t.vars||t).palette[n].main}}}}))]}}))),kB=CA("span",{name:"MuiSwitch",slot:"Track"})(IA((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}}))),PB=CA("span",{name:"MuiSwitch",slot:"Thumb"})(IA((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}}))),BB=t.forwardRef((function(e,t){const n=xa({props:e,name:"MuiSwitch"}),{className:r,color:i="primary",edge:o=!1,size:s="medium",sx:c,slots:d={},slotProps:u={}}=n,A=a(n,xB),h=l(l({},n),{},{color:i,edge:o,size:s}),p=(e=>{const{classes:t,edge:n,size:r,color:i,checked:o,disabled:a}=e,s=aA({root:["root",n&&"edge".concat(mh(n)),"size".concat(mh(r))],switchBase:["switchBase","color".concat(mh(i)),o&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},IB,t);return l(l({},t),s)})(h),f={slots:d,slotProps:u},[m,g]=uf("root",{className:Mu(p.root,r),elementType:NB,externalForwardedProps:f,ownerState:h,additionalProps:{sx:c}}),[v,y]=uf("thumb",{className:p.thumb,elementType:PB,externalForwardedProps:f,ownerState:h}),b=(0,Tt.jsx)(v,l({},y)),[E,w]=uf("track",{className:p.track,elementType:kB,externalForwardedProps:f,ownerState:h});return(0,Tt.jsxs)(m,l(l({},g),{},{children:[(0,Tt.jsx)(OB,l(l({type:"checkbox",icon:b,checkedIcon:b,ref:t,ownerState:h},A),{},{classes:l(l({},p),{},{root:p.switchBase}),slots:l(l({},d.switchBase&&{root:d.switchBase}),d.input&&{input:d.input}),slotProps:l(l({},u.switchBase&&{root:"function"===typeof u.switchBase?u.switchBase(h):u.switchBase}),u.input&&{input:"function"===typeof u.input?u.input(h):u.input})})),(0,Tt.jsx)(E,l({},w))]}))})),LB=BB,DB=CA(fp)((e=>{let{theme:t}=e;return{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:t.shadows[4]}}})),UB=()=>{const{courseId:e}=pe(),n=he(),[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)([]),[s,c]=(0,t.useState)([]),[d,u]=(0,t.useState)(!0),[A,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[v,y]=(0,t.useState)(!1),[b,E]=(0,t.useState)(!1),[w,_]=(0,t.useState)(!1),[S,C]=(0,t.useState)({lessonId:"",title:"",description:"",isFinalQuiz:!0,timeLimitMinutes:30,passingScore:70,maxAttempts:3,allowRetry:!0,retryDelayMinutes:1440}),[T,I]=(0,t.useState)({});(0,t.useEffect)((()=>{R(),x()}),[e]);const R=async()=>{try{u(!0);const t=await HE.getCourseById(e);t.success&&i(t.data);const n=await HE.getChaptersByCourse(e);if(n&&Array.isArray(n)){const e=await Promise.all(n.map((async e=>{const t=await HE.getLessonsByChapter(e.id);return l(l({},e),{},{lessons:t||[]})})));a(e)}}catch(rI){console.error("Error loading course data:",rI),h("Failed to load course data")}finally{u(!1)}},x=async()=>{try{const t=await Ga(e);t.success&&c(t.data)}catch(rI){console.error("Error loading quizzes:",rI),h("Failed to load quizzes")}},N=()=>{f(null),g(null)},O=()=>{y(!0),C({lessonId:"",title:"",description:"",isFinalQuiz:!0,timeLimitMinutes:30,passingScore:70,maxAttempts:3,allowRetry:!0,retryDelayMinutes:1440}),I({})},k=e=>{n("/admin/quiz/".concat(e.id,"/edit")),N()},P=e=>s.some((t=>t.lessonId===e));return d?(0,Tt.jsx)(Bg,{maxWidth:"lg",sx:{py:4},children:(0,Tt.jsx)(oA,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,Tt.jsx)(Ph,{size:60})})}):(0,Tt.jsxs)(Bg,{maxWidth:"lg",sx:{py:4},children:[(0,Tt.jsxs)(oA,{sx:{mb:4},children:[(0,Tt.jsxs)(K_,{sx:{mb:2},children:[(0,Tt.jsx)($_,{color:"inherit",onClick:()=>n("/admin/courses"),sx:{cursor:"pointer"},children:"Courses"}),(0,Tt.jsx)(kp,{color:"text.primary",children:"Quiz Management"})]}),(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600},children:"\ud83d\udcdd Quiz Management"}),(0,Tt.jsx)(kp,{variant:"h6",color:"text.secondary",children:null===r||void 0===r?void 0:r.title})]}),(0,Tt.jsx)(Gh,{variant:"contained",startIcon:(0,Tt.jsx)(QP,{}),onClick:O,size:"large",children:"Create Quiz"})]})]}),A&&(0,Tt.jsx)(uE,{severity:"error",sx:{mb:3},onClose:()=>h(""),children:A}),s.length>0?(0,Tt.jsx)(pm,{container:!0,spacing:3,children:s.map((e=>(0,Tt.jsx)(pm,{item:!0,xs:12,md:6,lg:4,children:(0,Tt.jsxs)(DB,{children:[(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",spacing:2,sx:{mb:2},children:[(0,Tt.jsx)(CC,{color:"primary"}),(0,Tt.jsxs)(oA,{sx:{flexGrow:1},children:[(0,Tt.jsx)(kp,{variant:"h6",component:"h3",sx:{fontWeight:600},children:e.title}),(0,Tt.jsxs)(kp,{variant:"body2",color:"text.secondary",children:[e.chapterTitle," \u2022 ",e.lessonTitle]})]}),(0,Tt.jsx)(Em,{size:"small",onClick:t=>((e,t)=>{f(e.currentTarget),g(t)})(t,e),children:(0,Tt.jsx)(jP,{})})]}),e.description&&(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,flexWrap:"wrap",sx:{mb:2},children:[(0,Tt.jsx)(Nm,{icon:(0,Tt.jsx)(TC,{}),label:"".concat(e.timeLimitMinutes," min"),size:"small",variant:"outlined"}),(0,Tt.jsx)(Nm,{label:"".concat(e.passingScore,"% pass"),size:"small",variant:"outlined",color:"success"}),(0,Tt.jsx)(Nm,{label:"".concat(e.maxAttempts," attempts"),size:"small",variant:"outlined",color:"warning"}),e.allowRetry&&(0,Tt.jsx)(Nm,{label:"Retry allowed",size:"small",variant:"outlined",color:"info"})]})]}),(0,Tt.jsx)(hg,{sx:{justifyContent:"space-between",px:2,pb:2},children:(0,Tt.jsx)(Gh,{size:"small",startIcon:(0,Tt.jsx)(FP,{}),onClick:()=>k(e),children:"Edit"})})]})},e.id)))}):(0,Tt.jsxs)(up,{sx:{p:6,textAlign:"center"},children:[(0,Tt.jsx)(CC,{sx:{fontSize:64,color:"grey.400",mb:2}}),(0,Tt.jsx)(kp,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No quizzes found"}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create your first quiz to start testing students knowledge"}),(0,Tt.jsx)(Gh,{variant:"contained",startIcon:(0,Tt.jsx)(QP,{}),onClick:O,children:"Create First Quiz"})]}),(0,Tt.jsxs)(cb,{anchorEl:p,open:Boolean(p),onClose:N,children:[(0,Tt.jsxs)(MP,{onClick:()=>k(m),children:[(0,Tt.jsx)(FP,{sx:{mr:1}}),"Edit Quiz"]}),(0,Tt.jsxs)(MP,{onClick:()=>(g(m),E(!0),void N()),sx:{color:"error.main"},children:[(0,Tt.jsx)(GP,{sx:{mr:1}}),"Delete Quiz"]})]}),(0,Tt.jsxs)(ZS,{open:v,onClose:()=>y(!1),maxWidth:"md",fullWidth:!0,children:[(0,Tt.jsx)(rC,{children:"Create New Quiz"}),(0,Tt.jsx)(sC,{children:(0,Tt.jsxs)(Vm,{spacing:3,sx:{mt:2},children:[(0,Tt.jsxs)(Gv,{fullWidth:!0,error:!!T.lessonId,children:[(0,Tt.jsx)(jv,{children:"Select Lesson"}),(0,Tt.jsx)(Ub,{value:S.lessonId,label:"Select Lesson",onChange:e=>C((t=>l(l({},t),{},{lessonId:e.target.value}))),children:o.flatMap((e=>e.lessons.map((t=>l(l({},t),{},{chapterTitle:e.title}))))).map((e=>(0,Tt.jsxs)(MP,{value:e.id,disabled:P(e.id),children:[e.chapterTitle," \u2022 ",e.title,P(e.id)&&" (Has Quiz)"]},e.id)))}),T.lessonId&&(0,Tt.jsx)(kp,{variant:"caption",color:"error",sx:{mt:.5},children:T.lessonId})]}),(0,Tt.jsx)(Hb,{label:"Quiz Title",fullWidth:!0,value:S.title,onChange:e=>C((t=>l(l({},t),{},{title:e.target.value}))),error:!!T.title,helperText:T.title}),(0,Tt.jsx)(Hb,{label:"Description",fullWidth:!0,multiline:!0,rows:3,value:S.description,onChange:e=>C((t=>l(l({},t),{},{description:e.target.value})))}),(0,Tt.jsxs)(pm,{container:!0,spacing:2,children:[(0,Tt.jsx)(pm,{item:!0,xs:12,sm:6,children:(0,Tt.jsx)(Hb,{label:"Time Limit (minutes)",type:"number",fullWidth:!0,value:S.timeLimitMinutes,onChange:e=>C((t=>l(l({},t),{},{timeLimitMinutes:parseInt(e.target.value)||0}))),error:!!T.timeLimitMinutes,helperText:T.timeLimitMinutes,inputProps:{min:1,max:300}})}),(0,Tt.jsx)(pm,{item:!0,xs:12,sm:6,children:(0,Tt.jsx)(Hb,{label:"Passing Score (%)",type:"number",fullWidth:!0,value:S.passingScore,onChange:e=>C((t=>l(l({},t),{},{passingScore:parseInt(e.target.value)||0}))),error:!!T.passingScore,helperText:T.passingScore,inputProps:{min:0,max:100}})})]}),(0,Tt.jsxs)(pm,{container:!0,spacing:2,children:[(0,Tt.jsx)(pm,{item:!0,xs:12,sm:6,children:(0,Tt.jsx)(Hb,{label:"Max Attempts",type:"number",fullWidth:!0,value:S.maxAttempts,onChange:e=>C((t=>l(l({},t),{},{maxAttempts:parseInt(e.target.value)||1}))),inputProps:{min:1,max:10}})}),(0,Tt.jsx)(pm,{item:!0,xs:12,sm:6,children:(0,Tt.jsx)(Hb,{label:"Retry Delay (minutes)",type:"number",fullWidth:!0,value:S.retryDelayMinutes,onChange:e=>C((t=>l(l({},t),{},{retryDelayMinutes:parseInt(e.target.value)||0}))),disabled:!S.allowRetry,inputProps:{min:0}})})]}),(0,Tt.jsx)(Lw,{control:(0,Tt.jsx)(LB,{checked:S.allowRetry,onChange:e=>C((t=>l(l({},t),{},{allowRetry:e.target.checked})))}),label:"Allow Retry"})]})}),(0,Tt.jsxs)(uC,{children:[(0,Tt.jsx)(Gh,{onClick:()=>y(!1),children:"Cancel"}),(0,Tt.jsx)(Gh,{onClick:async()=>{if((()=>{const e={};return S.lessonId||(e.lessonId="Please select a lesson"),S.title.trim()||(e.title="Quiz title is required"),(S.timeLimitMinutes<1||S.timeLimitMinutes>300)&&(e.timeLimitMinutes="Time limit must be between 1 and 300 minutes"),(S.passingScore<0||S.passingScore>100)&&(e.passingScore="Passing score must be between 0 and 100"),I(e),0===Object.keys(e).length})()){_(!0);try{const e=await HE.createQuiz(S);e.success?(y(!1),x()):h(e.error||"Failed to create quiz")}catch(rI){console.error("Error creating quiz:",rI),h("Failed to create quiz. Please try again.")}finally{_(!1)}}},variant:"contained",disabled:w,startIcon:w?(0,Tt.jsx)(Ph,{size:16}):(0,Tt.jsx)(iB,{}),children:"Create Quiz"})]})]}),(0,Tt.jsxs)(ZS,{open:b,onClose:()=>E(!1),children:[(0,Tt.jsx)(rC,{children:"Delete Quiz"}),(0,Tt.jsx)(sC,{children:(0,Tt.jsxs)(kp,{children:['Are you sure you want to delete "',null===m||void 0===m?void 0:m.title,'"? This action cannot be undone.']})}),(0,Tt.jsxs)(uC,{children:[(0,Tt.jsx)(Gh,{onClick:()=>E(!1),children:"Cancel"}),(0,Tt.jsx)(Gh,{onClick:async()=>{if(m){_(!0);try{const e=await HE.deleteQuiz(m.id);e.success?(E(!1),x()):h(e.error||"Failed to delete quiz")}catch(rI){console.error("Error deleting quiz:",rI),h("Failed to delete quiz. Please try again.")}finally{_(!1)}}},color:"error",variant:"contained",disabled:w,startIcon:w?(0,Tt.jsx)(Ph,{size:16}):(0,Tt.jsx)(GP,{}),children:"Delete"})]})]})]})},MB=Zh([(0,Tt.jsx)("path",{d:"m12 2-5.5 9h11z"},"0"),(0,Tt.jsx)("circle",{cx:"17.5",cy:"17.5",r:"4.5"},"1"),(0,Tt.jsx)("path",{d:"M3 13.5h8v8H3z"},"2")]),FB=CA(fp)((e=>{let{theme:t}=e;return{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:t.shadows[8]}}})),jB=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(!0),[o,a]=(0,t.useState)(""),[s,c]=(0,t.useState)(""),[d,u]=(0,t.useState)("card"),[A,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)("create"),[m,g]=(0,t.useState)(null),[v,y]=(0,t.useState)(!1),[b,E]=(0,t.useState)(null),[w,_]=(0,t.useState)({name:"",description:"",isActive:!0}),[S,C]=(0,t.useState)({}),[T,I]=(0,t.useState)(!1),[R,x]=(0,t.useState)(null),[N,O]=(0,t.useState)(null);(0,t.useEffect)((()=>{k()}),[]);const k=async()=>{try{i(!0),a("");const e=await $a.getCategories();e.success&&e.data?n(e.data):(console.warn("Using mock category data for development"),n([{id:"1",name:"Substance Awareness",description:"Basic education about various substances and their effects",isActive:!0,courseCount:12,createdAt:"2024-01-15T00:00:00Z"},{id:"2",name:"Prevention Programs",description:"Preventive measures and early intervention strategies",isActive:!0,courseCount:8,createdAt:"2024-01-20T00:00:00Z"},{id:"3",name:"Recovery Support",description:"Support systems and recovery methodologies",isActive:!0,courseCount:6,createdAt:"2024-02-01T00:00:00Z"},{id:"4",name:"Professional Training",description:"Training for healthcare and support professionals",isActive:!1,courseCount:4,createdAt:"2024-02-10T00:00:00Z"}]))}catch(rI){console.error("Error loading categories:",rI),a("Failed to load categories. Please try again.")}finally{i(!1)}},P=()=>{x(null),O(null)},B=()=>{f("create"),_({name:"",description:"",isActive:!0}),C({}),h(!0),P()},L=e=>{f("edit"),g(e),_({name:e.name||"",description:e.description||"",isActive:!1!==e.isActive}),C({}),h(!0),P()},D=e=>{E(e),y(!0),P()},U=e.filter((e=>{var t;return e.name.toLowerCase().includes(s.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase()))}));return(0,Tt.jsxs)(Bg,{maxWidth:"xl",sx:{py:4},children:[(0,Tt.jsxs)(oA,{sx:{mb:4},children:[(0,Tt.jsxs)(Vm,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,sx:{mb:2},children:[(0,Tt.jsx)(kp,{variant:"h4",component:"h1",fontWeight:"bold",children:"Category Management"}),(0,Tt.jsx)(Gh,{variant:"contained",startIcon:(0,Tt.jsx)(QP,{}),onClick:B,size:"large",children:"Add Category"})]}),(0,Tt.jsx)(kp,{variant:"body1",color:"text.secondary",children:"Manage course categories to organize your educational content"})]}),(0,Tt.jsx)(oA,{sx:{mb:3},children:(0,Tt.jsxs)(Vm,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",children:[(0,Tt.jsx)(Hb,{placeholder:"Search categories...",value:s,onChange:e=>c(e.target.value),InputProps:{startAdornment:(0,Tt.jsx)(Xb,{position:"start",children:(0,Tt.jsx)(QE,{})}),endAdornment:s&&(0,Tt.jsx)(Xb,{position:"end",children:(0,Tt.jsx)(Em,{size:"small",onClick:()=>c(""),children:(0,Tt.jsx)(VE,{})})})},sx:{minWidth:300}}),(0,Tt.jsx)(Lw,{control:(0,Tt.jsx)(LB,{checked:"table"===d,onChange:e=>u(e.target.checked?"table":"card")}),label:"Table View"})]})}),o&&(0,Tt.jsx)(uE,{severity:"error",sx:{mb:3},onClose:()=>a(""),children:o}),r?(0,Tt.jsx)(pm,{container:!0,spacing:3,children:Array.from({length:6}).map(((e,t)=>(0,Tt.jsx)(pm,{size:{xs:12,sm:6,md:4},children:(0,Tt.jsx)(fp,{children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsx)(Rg,{variant:"rectangular",height:40,sx:{mb:2}}),(0,Tt.jsx)(Rg,{variant:"text",sx:{mb:1}}),(0,Tt.jsx)(Rg,{variant:"text",sx:{mb:2}}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,children:[(0,Tt.jsx)(Rg,{variant:"rectangular",width:60,height:24}),(0,Tt.jsx)(Rg,{variant:"rectangular",width:80,height:24})]})]})})},t)))}):0===U.length?(0,Tt.jsxs)(up,{sx:{p:4,textAlign:"center"},children:[(0,Tt.jsx)(MB,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,Tt.jsx)(kp,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:s?"No categories found":"No categories yet"}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:3},children:s?"Try adjusting your search terms":"Create your first category to organize courses"}),!s&&(0,Tt.jsx)(Gh,{variant:"contained",startIcon:(0,Tt.jsx)(QP,{}),onClick:B,children:"Add First Category"})]}):(0,Tt.jsx)(Tt.Fragment,{children:"card"===d?(0,Tt.jsx)(pm,{container:!0,spacing:3,children:U.map((e=>(0,Tt.jsx)(pm,{size:{xs:12,sm:6,md:4},children:(0,Tt.jsxs)(FB,{children:[(0,Tt.jsxs)(Bm,{sx:{flexGrow:1},children:[(0,Tt.jsxs)(Vm,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[(0,Tt.jsx)(MB,{color:"primary",sx:{mr:1}}),(0,Tt.jsx)(Em,{size:"small",onClick:t=>((e,t)=>{x(e.currentTarget),O(t)})(t,e),children:(0,Tt.jsx)(jP,{})})]}),(0,Tt.jsx)(kp,{variant:"h6",component:"h3",gutterBottom:!0,children:e.name}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description||"No description"}),(0,Tt.jsxs)(Vm,{direction:"row",spacing:1,sx:{mb:2},children:[(0,Tt.jsx)(Nm,{label:e.isActive?"Active":"Inactive",color:e.isActive?"success":"default",size:"small"}),(0,Tt.jsx)(Nm,{label:"".concat(e.courseCount||0," courses"),variant:"outlined",size:"small"})]}),(0,Tt.jsxs)(kp,{variant:"caption",color:"text.secondary",children:["Created:"," ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,Tt.jsxs)(hg,{children:[(0,Tt.jsx)(Gh,{size:"small",startIcon:(0,Tt.jsx)(FP,{}),onClick:()=>L(e),children:"Edit"}),(0,Tt.jsx)(Gh,{size:"small",color:"error",startIcon:(0,Tt.jsx)(GP,{}),onClick:()=>D(e),children:"Delete"})]})]})},e.id)))}):(0,Tt.jsx)(Kk,{component:up,children:(0,Tt.jsxs)(Zk,{children:[(0,Tt.jsx)(oP,{children:(0,Tt.jsxs)(AP,{children:[(0,Tt.jsx)(vP,{children:"Name"}),(0,Tt.jsx)(vP,{children:"Description"}),(0,Tt.jsx)(vP,{children:"Status"}),(0,Tt.jsx)(vP,{children:"Courses"}),(0,Tt.jsx)(vP,{children:"Created"}),(0,Tt.jsx)(vP,{align:"right",children:"Actions"})]})}),(0,Tt.jsx)(SP,{children:U.map((e=>(0,Tt.jsxs)(AP,{children:[(0,Tt.jsx)(vP,{children:(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",spacing:1,children:[(0,Tt.jsx)(MB,{color:"primary"}),(0,Tt.jsx)(kp,{variant:"subtitle2",children:e.name})]})}),(0,Tt.jsx)(vP,{children:(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",children:e.description||"No description"})}),(0,Tt.jsx)(vP,{children:(0,Tt.jsx)(Nm,{label:e.isActive?"Active":"Inactive",color:e.isActive?"success":"default",size:"small"})}),(0,Tt.jsxs)(vP,{children:[e.courseCount||0," courses"]}),(0,Tt.jsx)(vP,{children:new Date(e.createdAt).toLocaleDateString()}),(0,Tt.jsxs)(vP,{align:"right",children:[(0,Tt.jsx)(Em,{size:"small",onClick:()=>L(e),children:(0,Tt.jsx)(FP,{})}),(0,Tt.jsx)(Em,{size:"small",color:"error",onClick:()=>D(e),children:(0,Tt.jsx)(GP,{})})]})]},e.id)))})]})})}),(0,Tt.jsxs)(cb,{anchorEl:R,open:Boolean(R),onClose:P,children:[(0,Tt.jsxs)(MP,{onClick:()=>L(N),children:[(0,Tt.jsx)(FP,{sx:{mr:1}}),"Edit"]}),(0,Tt.jsxs)(MP,{onClick:()=>D(N),children:[(0,Tt.jsx)(GP,{sx:{mr:1}}),"Delete"]})]}),(0,Tt.jsxs)(ZS,{open:A,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Tt.jsx)(rC,{children:"create"===p?"Add New Category":"Edit Category"}),(0,Tt.jsx)(sC,{children:(0,Tt.jsxs)(Vm,{spacing:3,sx:{mt:1},children:[(0,Tt.jsx)(Hb,{label:"Category Name",value:w.name,onChange:e=>_((t=>l(l({},t),{},{name:e.target.value}))),error:!!S.name,helperText:S.name,fullWidth:!0,required:!0}),(0,Tt.jsx)(Hb,{label:"Description",value:w.description,onChange:e=>_((t=>l(l({},t),{},{description:e.target.value}))),error:!!S.description,helperText:S.description,multiline:!0,rows:3,fullWidth:!0}),(0,Tt.jsx)(Lw,{control:(0,Tt.jsx)(LB,{checked:w.isActive,onChange:e=>_((t=>l(l({},t),{},{isActive:e.target.checked})))}),label:"Active"})]})}),(0,Tt.jsxs)(uC,{children:[(0,Tt.jsx)(Gh,{onClick:()=>h(!1),children:"Cancel"}),(0,Tt.jsx)(Gh,{onClick:async()=>{if((()=>{const t={};return w.name.trim()?w.name.length>100&&(t.name="Category name must be less than 100 characters"):t.name="Category name is required",w.description&&w.description.length>500&&(t.description="Description must be less than 500 characters"),e.some((e=>e.name.toLowerCase()===w.name.toLowerCase()&&("create"===p||e.id!==(null===m||void 0===m?void 0:m.id))))&&(t.name="A category with this name already exists"),C(t),0===Object.keys(t).length})())try{I(!0);const e={name:w.name.trim(),description:w.description.trim(),isActive:w.isActive};let t;t="create"===p?await $a.createCategory(e):await $a.updateCategory(m.id,e),t.success?(h(!1),k(),a("")):a(t.message||"Failed to save category")}catch(rI){console.error("Error saving category:",rI),a("Failed to save category. Please try again.")}finally{I(!1)}},variant:"contained",disabled:T,startIcon:T?(0,Tt.jsx)(Ph,{size:16}):(0,Tt.jsx)(iB,{}),children:"create"===p?"Create":"Update"})]})]}),(0,Tt.jsxs)(ZS,{open:v,onClose:()=>y(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Tt.jsx)(rC,{children:"Confirm Delete"}),(0,Tt.jsxs)(sC,{children:[(0,Tt.jsxs)(kp,{children:['Are you sure you want to delete the category "',null===b||void 0===b?void 0:b.name,'"? This action cannot be undone.']}),(null===b||void 0===b?void 0:b.courseCount)>0&&(0,Tt.jsxs)(uE,{severity:"warning",sx:{mt:2},children:["This category has ",b.courseCount," ","associated courses. Deleting it may affect course organization."]})]}),(0,Tt.jsxs)(uC,{children:[(0,Tt.jsx)(Gh,{onClick:()=>y(!1),children:"Cancel"}),(0,Tt.jsx)(Gh,{onClick:async()=>{if(b)try{I(!0);const e=await $a.deleteCategory(b.id);e.success?(y(!1),E(null),k(),a("")):a(e.message||"Failed to delete category")}catch(rI){console.error("Error deleting category:",rI),a("Failed to delete category. Please try again.")}finally{I(!1)}},color:"error",variant:"contained",disabled:T,startIcon:T?(0,Tt.jsx)(Ph,{size:16}):(0,Tt.jsx)(GP,{}),children:"Delete"})]})]}),(0,Tt.jsx)(gC,{color:"primary",sx:{position:"fixed",bottom:16,right:16,display:{xs:"flex",sm:"none"}},onClick:B,children:(0,Tt.jsx)(QP,{})})]})},QB=CA(fp)((e=>{let{theme:t}=e;return{height:"100%",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:t.shadows[8]}}})),VB=CA(up)((e=>{let{theme:t}=e;return{padding:t.spacing(3),background:"linear-gradient(135deg, ".concat(t.palette.primary.light," 0%, ").concat(t.palette.primary.main," 100%)"),color:"white",textAlign:"center",borderRadius:t.spacing(2)}})),HB=()=>{const[e,n]=(0,t.useState)(0),[r,i]=(0,t.useState)(!1),[o,a]=(0,t.useState)(!1),s=[{title:"Category Management System",icon:(0,Tt.jsx)(MB,{}),description:"Complete CRUD interface for organizing courses by categories",highlights:["Admin dashboard for category management","Category filtering in course catalog","Active/inactive status management","Course count tracking per category"],status:"\u2705 Implemented",color:"success"},{title:"Enhanced Certificate System",icon:(0,Tt.jsx)(dT,{}),description:"Professional certificate generation with download options",highlights:["Professional certificate design","PDF and image download options","Print functionality","Social sharing capabilities","Certificate ID generation"],status:"\u2705 Implemented",color:"success"},{title:"Quiz Timer Enhancement",icon:(0,Tt.jsx)(TC,{}),description:"Visual countdown timer with warning states for quizzes",highlights:["Visual countdown display","Warning states (5 min, 2 min)","Auto-submit on time expiration","Multiple display modes (linear, circular, compact)","Pause/resume functionality"],status:"\u2705 Implemented",color:"success"},{title:"Advanced Search & Filtering",icon:(0,Tt.jsx)(QE,{}),description:"Enhanced course discovery with multiple filter options",highlights:["Category-based filtering","Age group and course type filters","Active filter display with chips","Quick filter clearing","Search term highlighting"],status:"\u2705 Implemented",color:"success"}],c=[{category:"User Experience",items:["Enhanced course catalog with better filtering","Professional certificate generation and download","Visual quiz timer with warning states","Improved navigation and breadcrumbs"]},{category:"Admin Features",items:["Complete category management system","Enhanced course organization tools","Better content management workflow","Comprehensive dashboard navigation"]},{category:"Technical Improvements",items:["Modern Material-UI components","Responsive design patterns","Better error handling and loading states","Code organization and reusability"]}],l={certificate:{course:{title:"Substance Awareness Fundamentals",estimatedDuration:120},completedAt:(new Date).toISOString(),courseName:"Substance Awareness Fundamentals",duration:120,certificateId:"DEMO-CERT-2024"},userInfo:{fullName:"Demo Student",email:"demo@example.com"}};return(0,Tt.jsxs)(Bg,{maxWidth:"xl",sx:{py:4},children:[(0,Tt.jsxs)(oA,{sx:{mb:4},children:[(0,Tt.jsx)(kp,{variant:"h3",component:"h1",gutterBottom:!0,align:"center",children:"LMS Feature Enhancement Demo"}),(0,Tt.jsx)(kp,{variant:"h6",color:"text.secondary",align:"center",children:"Comprehensive demonstration of the new features and improvements"})]}),(0,Tt.jsx)(oA,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,Tt.jsxs)(Sf,{value:e,onChange:(e,t)=>{n(t)},centered:!0,children:[(0,Tt.jsx)(ZC,{label:"Overview"}),(0,Tt.jsx)(ZC,{label:"Improvements"}),(0,Tt.jsx)(ZC,{label:"Live Demos"}),(0,Tt.jsx)(ZC,{label:"Implementation"})]})}),(0,Tt.jsxs)(oA,{sx:{minHeight:400},children:[0===e&&(0,Tt.jsxs)(Vm,{spacing:4,children:[(0,Tt.jsxs)(VB,{children:[(0,Tt.jsx)(PE,{sx:{fontSize:60,mb:2}}),(0,Tt.jsx)(kp,{variant:"h4",gutterBottom:!0,children:"LMS Enhancement Summary"}),(0,Tt.jsx)(kp,{variant:"h6",sx:{opacity:.9},children:"Successfully implemented 4 major feature enhancements"})]}),(0,Tt.jsx)(pm,{container:!0,spacing:3,children:s.map(((e,t)=>(0,Tt.jsx)(pm,{size:{xs:12,md:6},children:(0,Tt.jsx)(QB,{children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",spacing:2,sx:{mb:2},children:[e.icon,(0,Tt.jsx)(kp,{variant:"h6",children:e.title}),(0,Tt.jsx)(Nm,{label:e.status,color:e.color,size:"small"})]}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,Tt.jsx)(iy,{dense:!0,children:e.highlights.map(((e,t)=>(0,Tt.jsxs)(GC,{sx:{py:.5},children:[(0,Tt.jsx)(US,{sx:{minWidth:36},children:(0,Tt.jsx)(EC,{color:"success",fontSize:"small"})}),(0,Tt.jsx)(VS,{primary:e,primaryTypographyProps:{variant:"body2"}})]},t)))})]})})},t)))})]}),1===e&&(0,Tt.jsxs)(Vm,{spacing:3,children:[(0,Tt.jsx)(kp,{variant:"h5",gutterBottom:!0,children:"System Improvements by Category"}),c.map(((e,t)=>(0,Tt.jsx)(fp,{children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsx)(kp,{variant:"h6",gutterBottom:!0,color:"primary",children:e.category}),(0,Tt.jsx)(iy,{children:e.items.map(((e,t)=>(0,Tt.jsxs)(GC,{children:[(0,Tt.jsx)(US,{children:(0,Tt.jsx)(uT,{color:"primary"})}),(0,Tt.jsx)(VS,{primary:e})]},t)))})]})},t)))]}),2===e&&(0,Tt.jsxs)(Vm,{spacing:4,children:[(0,Tt.jsx)(kp,{variant:"h5",gutterBottom:!0,children:"Live Feature Demonstrations"}),(0,Tt.jsxs)(pm,{container:!0,spacing:3,children:[(0,Tt.jsx)(pm,{size:{xs:12,md:6},children:(0,Tt.jsx)(QB,{children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",spacing:2,sx:{mb:2},children:[(0,Tt.jsx)(dT,{color:"primary"}),(0,Tt.jsx)(kp,{variant:"h6",children:"Certificate System"})]}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Professional certificate generation with download and sharing options."}),(0,Tt.jsx)(Gh,{variant:"contained",fullWidth:!0,onClick:()=>i(!0),startIcon:(0,Tt.jsx)(dT,{}),children:"View Sample Certificate"})]})})}),(0,Tt.jsx)(pm,{size:{xs:12,md:6},children:(0,Tt.jsx)(QB,{children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsxs)(Vm,{direction:"row",alignItems:"center",spacing:2,sx:{mb:2},children:[(0,Tt.jsx)(TC,{color:"primary"}),(0,Tt.jsx)(kp,{variant:"h6",children:"Quiz Timer"})]}),(0,Tt.jsx)(kp,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Enhanced quiz timer with visual countdown and warning states."}),(0,Tt.jsxs)(Vm,{spacing:2,children:[(0,Tt.jsxs)(Gh,{variant:"contained",fullWidth:!0,onClick:()=>a(!o),startIcon:(0,Tt.jsx)(TC,{}),children:[o?"Hide":"Show"," Timer Demo"]}),o&&(0,Tt.jsxs)(oA,{children:[(0,Tt.jsx)(kp,{variant:"subtitle2",gutterBottom:!0,children:"30-minute Quiz Timer (Demo Mode)"}),(0,Tt.jsx)(OC,{totalTimeMinutes:30,isActive:!0,warningThreshold:25,dangerThreshold:28,onTimeUp:()=>console.log("Time's up!"),onWarning:e=>console.log("Warning!",e)})]})]})]})})})]}),(0,Tt.jsx)(uE,{severity:"info",children:(0,Tt.jsxs)(kp,{variant:"body2",children:[(0,Tt.jsx)("strong",{children:"Note:"})," These are demonstration features. In the actual system, they are fully integrated into the course learning and admin management workflows."]})})]}),3===e&&(0,Tt.jsxs)(Vm,{spacing:3,children:[(0,Tt.jsx)(kp,{variant:"h5",gutterBottom:!0,children:"Implementation Details"}),(0,Tt.jsx)(fp,{children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsx)(kp,{variant:"h6",gutterBottom:!0,color:"primary",children:"Technical Stack & Architecture"}),(0,Tt.jsxs)(pm,{container:!0,spacing:3,children:[(0,Tt.jsxs)(pm,{size:{xs:12,md:6},children:[(0,Tt.jsx)(kp,{variant:"subtitle1",gutterBottom:!0,children:"Frontend Technologies"}),(0,Tt.jsxs)(iy,{dense:!0,children:[(0,Tt.jsx)(GC,{children:(0,Tt.jsx)(VS,{primary:"React 18+ with Hooks"})}),(0,Tt.jsx)(GC,{children:(0,Tt.jsx)(VS,{primary:"Material-UI v5 Components"})}),(0,Tt.jsx)(GC,{children:(0,Tt.jsx)(VS,{primary:"React Router for Navigation"})}),(0,Tt.jsx)(GC,{children:(0,Tt.jsx)(VS,{primary:"Styled Components for Theming"})})]})]}),(0,Tt.jsxs)(pm,{size:{xs:12,md:6},children:[(0,Tt.jsx)(kp,{variant:"subtitle1",gutterBottom:!0,children:"New Dependencies"}),(0,Tt.jsxs)(iy,{dense:!0,children:[(0,Tt.jsx)(GC,{children:(0,Tt.jsx)(VS,{primary:"html2canvas - Certificate generation"})}),(0,Tt.jsx)(GC,{children:(0,Tt.jsx)(VS,{primary:"jsPDF - PDF export functionality"})}),(0,Tt.jsx)(GC,{children:(0,Tt.jsx)(VS,{primary:"Enhanced MUI components"})})]})]})]})]})}),(0,Tt.jsx)(fp,{children:(0,Tt.jsxs)(Bm,{children:[(0,Tt.jsx)(kp,{variant:"h6",gutterBottom:!0,color:"primary",children:"File Structure & Components"}),(0,Tt.jsx)(kp,{variant:"body2",component:"pre",sx:{bgcolor:"grey.100",p:2,borderRadius:1,fontFamily:"monospace",overflow:"auto"},children:"src/\n\u251c\u2500\u2500 components/\n\u2502   \u251c\u2500\u2500 admin/\n\u2502   \u2502   \u2514\u2500\u2500 CategoryManagement.js     \u2728 New\n\u2502   \u251c\u2500\u2500 CertificateViewer.js          \u2728 New  \n\u2502   \u251c\u2500\u2500 QuizTimer.js                  \u2728 New\n\u2502   \u2514\u2500\u2500 UserDashboard.js              \ud83d\udd04 Enhanced\n\u251c\u2500\u2500 pages/\n\u2502   \u251c\u2500\u2500 EducationHub.js               \ud83d\udd04 Enhanced\n\u2502   \u251c\u2500\u2500 Dashboard.js                  \ud83d\udd04 Enhanced\n\u2502   \u2514\u2500\u2500 admin/\n\u2502       \u2514\u2500\u2500 ... (existing admin pages)\n\u2514\u2500\u2500 services/\n    \u2514\u2500\u2500 ... (existing services)"})]})})]})]}),(0,Tt.jsx)(zx,{open:r,onClose:()=>i(!1),certificate:l.certificate,userInfo:l.userInfo})]})},zB=e=>{let{element:t}=e;const{currentUser:n,isAdmin:r,loading:i}=ts();return i?(0,Tt.jsx)("div",{children:"Loading..."}):r()?t:(0,Tt.jsx)(xe,{to:"/login"})},KB=e=>{let{element:t}=e;const{currentUser:n,loading:r}=ts();return r?(0,Tt.jsx)("div",{children:"Loading..."}):n?t:(0,Tt.jsx)(xe,{to:"/login"})},GB=e=>{let{element:t}=e;const{currentUser:n,isConsultant:r,loading:i}=ts();return i?(0,Tt.jsx)("div",{children:"Loading..."}):r()?t:(0,Tt.jsx)(xe,{to:"/login"})};function WB(){return(0,Tt.jsxs)("div",{className:"App",children:[(0,Tt.jsx)(o_,{}),(0,Tt.jsx)("main",{children:(0,Tt.jsxs)(ke,{children:[(0,Tt.jsx)(Ne,{path:"/Apitest",element:(0,Tt.jsx)(d_,{})}),(0,Tt.jsx)(Ne,{path:"/",element:(0,Tt.jsx)(op,{})}),(0,Tt.jsx)(Ne,{path:"/login",element:(0,Tt.jsx)(ap,{})}),(0,Tt.jsx)(Ne,{path:"/education",element:(0,Tt.jsx)(iw,{})}),(0,Tt.jsx)(Ne,{path:"/education/courses/:courseId",element:(0,Tt.jsx)(LC,{})}),(0,Tt.jsx)(Ne,{path:"/education/dashboard",element:(0,Tt.jsx)(KB,{element:(0,Tt.jsx)(qx,{})})}),(0,Tt.jsx)(Ne,{path:"/counseling",element:(0,Tt.jsx)(ow,{})}),(0,Tt.jsx)(Ne,{path:"/consult-time",element:(0,Tt.jsx)(GB,{element:(0,Tt.jsx)(Aw,{})})}),(0,Tt.jsx)(Ne,{path:"/consultants",element:(0,Tt.jsx)(i_,{})}),(0,Tt.jsx)(Ne,{path:"/programs",element:(0,Tt.jsx)(Qk,{})}),(0,Tt.jsx)(Ne,{path:"/surveys",element:(0,Tt.jsx)(KB,{element:(0,Tt.jsx)(Ck,{})})}),(0,Tt.jsx)(Ne,{path:"/surveys/take",element:(0,Tt.jsx)(KB,{element:(0,Tt.jsx)(Tk,{})})}),(0,Tt.jsx)(Ne,{path:"/surveys/results",element:(0,Tt.jsx)(KB,{element:(0,Tt.jsx)(Ik,{})})}),(0,Tt.jsx)(Ne,{path:"/surveys/history",element:(0,Tt.jsx)(KB,{element:(0,Tt.jsx)(Rk,{})})}),(0,Tt.jsx)(Ne,{path:"/lesson/:lessonId",element:(0,Tt.jsx)(yw,{})}),(0,Tt.jsx)(Ne,{path:"/quiz/:quizId",element:(0,Tt.jsx)(r_,{})}),(0,Tt.jsx)(Ne,{path:"/demo",element:(0,Tt.jsx)(HB,{})}),(0,Tt.jsx)(Ne,{path:"/admin/courses",element:(0,Tt.jsx)(zB,{element:(0,Tt.jsx)(eB,{})})}),(0,Tt.jsx)(Ne,{path:"/admin/courses/:courseId/content",element:(0,Tt.jsx)(zB,{element:(0,Tt.jsx)(CB,{})})}),(0,Tt.jsx)(Ne,{path:"/admin/courses/:courseId/edit",element:(0,Tt.jsx)(zB,{element:(0,Tt.jsx)(TB,{})})}),(0,Tt.jsx)(Ne,{path:"/admin/courses/:courseId/quiz",element:(0,Tt.jsx)(zB,{element:(0,Tt.jsx)(UB,{})})}),(0,Tt.jsx)(Ne,{path:"/admin/categories",element:(0,Tt.jsx)(zB,{element:(0,Tt.jsx)(jB,{})})}),(0,Tt.jsx)(Ne,{path:"/profile",element:(0,Tt.jsx)(KB,{element:(0,Tt.jsx)(mw,{})})}),(0,Tt.jsx)(Ne,{path:"/dashboard",element:(0,Tt.jsx)(zB,{element:(0,Tt.jsx)(fw,{})})}),(0,Tt.jsx)(Ne,{path:"/my-appointments",element:(0,Tt.jsx)(KB,{element:(0,Tt.jsx)(vw,{})})})]})}),(0,Tt.jsx)(l_,{})]})}const qB=function(){return(0,Tt.jsx)(ht,{children:(0,Tt.jsxs)(ba,{theme:Ua,children:[(0,Tt.jsx)(Da,{}),(0,Tt.jsx)(ns,{children:(0,Tt.jsx)(WB,{})})]})})},YB=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=t;n(e),r(e),i(e),o(e),a(e)}))};i.createRoot(document.getElementById("root")).render((0,Tt.jsx)(t.StrictMode,{children:(0,Tt.jsx)(qB,{})})),YB()})()})();
//# sourceMappingURL=main.d5a98705.js.map